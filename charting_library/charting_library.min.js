(function(f){"function"===typeof define&&define.amd?define(["jquery"],f):f(jQuery)})(function(f){if(!f.support.cors&&f.ajaxTransport&&window.XDomainRequest){var h=/^https?:\/\//i,d=/^get|post$/i,a=new RegExp("^"+location.protocol,"i");f.ajaxTransport("* text html xml json",function(b,c,g){if(b.crossDomain&&b.async&&d.test(b.type)&&h.test(b.url)&&a.test(b.url)){var e=null;return{send:function(a,d){var g="",l=(c.dataType||"").toLowerCase();e=new XDomainRequest;/^\d+$/.test(c.timeout)&&(e.timeout=c.timeout);
e.ontimeout=function(){d(500,"timeout")};e.onload=function(){var a="Content-Length: "+e.responseText.length+"\r\nContent-Type: "+e.contentType,b=200,c="success",g={text:e.responseText};try{if("html"===l||/text\/html/i.test(e.contentType))g.html=e.responseText;else if("json"===l||"text"!==l&&/\/json/i.test(e.contentType))try{g.json=f.parseJSON(e.responseText)}catch(h){b=500,c="parseerror"}else if("xml"===l||"text"!==l&&/\/xml/i.test(e.contentType)){var k=new ActiveXObject("Microsoft.XMLDOM");k.async=
!1;try{k.loadXML(e.responseText)}catch(n){k=void 0}if(!k||!k.documentElement||k.getElementsByTagName("parsererror").length)throw b=500,c="parseerror","Invalid XML: "+e.responseText;g.xml=k}}catch(m){throw m;}finally{d(b,c,g,a)}};e.onprogress=function(){};e.onerror=function(){d(500,"error",{text:e.responseText})};c.data&&(g="string"===f.type(c.data)?c.data:f.param(c.data));e.open(b.type,b.url);e.send(g)},abort:function(){e&&e.abort()}}}})}});"use strict";
function inherit(f,h){var d=function(){};d.prototype=h.prototype;f.prototype=new d;f.prototype.constructor=f;f.prototype.superclass=h}
(function(){function f(a){"hideSymbolSearch enabledStudies enabledDrawings disabledDrawings disabledStudies disableLogo hideSideToolbar".split(" ").map(function(b){a[b]&&console.warn("Feature `"+b+"` is obsolete. Please see the doc for details.")})}if(!window.TradingView){var h={mobile:{disabledFeatures:"left_toolbar header_widget timeframes_toolbar edit_buttons_in_legend context_menus control_bar border_around_the_chart".split(" "),enabledFeatures:["narrow_chart_enabled"]}},d={BARS:0,CANDLES:1,LINE:2,
AREA:3,HEIKEN_ASHI:8,HOLLOW_CANDLES:9,version:function(){return"1.6 (internal id 3561beec @ 2016-06-22 01:07:28.976139)"},gEl:function(a){return document.getElementById(a)},gId:function(){return"tradingview_"+(1048576*(1+Math.random())|0).toString(16).substring(1)},onready:function(a){window.addEventListener?window.addEventListener("DOMContentLoaded",a,!1):window.attachEvent("onload",a)},css:function(a){var b=document.getElementsByTagName("head")[0],c=document.createElement("style");c.type="text/css";
c.styleSheet?c.styleSheet.cssText=a:(a=document.createTextNode(a),c.appendChild(a));b.appendChild(c)},bindEvent:function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)},unbindEvent:function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)},widget:function(a){this.id=d.gId();if(!a.datafeed)throw"Datafeed is not defined";var b={width:800,height:500,symbol:"AA",interval:"D",timezone:"",container:"",path:"",
locale:"en",toolbar_bg:void 0,hideSymbolSearch:!1,hideSideToolbar:!1,enabledStudies:[],enabledDrawings:[],disabledDrawings:[],disabledStudies:[],drawingsAccess:void 0,studiesAccess:void 0,widgetbar:{datawindow:!1,details:!1,watchlist:!1,watchlist_settings:{default_symbols:[]}},overrides:{"mainSeriesProperties.showCountdown":!1},studiesOverrides:{},fullscreen:!1,autosize:!1,disabledFeatures:[],enabledFeatures:[],indicators_file_name:null,custom_css_url:null,auto_save_delay:null,debug:!1,time_frames:[{text:"5y",
resolution:"W"},{text:"1y",resolution:"W"},{text:"6m",resolution:"120"},{text:"3m",resolution:"60"},{text:"1m",resolution:"30"},{text:"5d",resolution:"5"},{text:"1d",resolution:"1"}],client_id:"0",user_id:"0",charts_storage_url:void 0,charts_storage_api_version:"1.0",logo:{},favorites:{intervals:[],chartTypes:[]},rss_news_feed:null},c={width:a.width,height:a.height,symbol:a.symbol,interval:a.interval,timezone:a.timezone,container:a.container_id,path:a.library_path,locale:a.locale,toolbar_bg:a.toolbar_bg,
hideSymbolSearch:a.hide_symbol_search||a.hideSymbolSearch,hideSideToolbar:a.hide_side_toolbar,enabledStudies:a.enabled_studies,disabledStudies:a.disabled_studies,enabledDrawings:a.enabled_drawings,disabledDrawings:a.disabled_drawings,drawingsAccess:a.drawings_access,studiesAccess:a.studies_access,widgetbar:a.widgetbar,overrides:a.overrides,studiesOverrides:a.studies_overrides,savedData:a.saved_data||a.savedData,snapshotUrl:a.snapshot_url,uid:this.id,datafeed:a.datafeed,tradingController:a.trading_controller,
disableLogo:a.disable_logo||a.disableLogo,logo:a.logo,autosize:a.autosize,fullscreen:a.fullscreen,disabledFeatures:a.disabled_features,enabledFeatures:a.enabled_features,indicators_file_name:a.indicators_file_name,custom_css_url:a.custom_css_url,auto_save_delay:a.auto_save_delay,debug:a.debug,client_id:a.client_id,user_id:a.user_id,charts_storage_url:a.charts_storage_url,charts_storage_api_version:a.charts_storage_api_version,favorites:a.favorites,numeric_formatting:a.numeric_formatting,rss_news_feed:a.rss_news_feed,
studyCountLimit:a.study_count_limit,symbolSearchRequestDelay:a.symbol_search_request_delay};f(c);this.options=$.extend(!0,b,c);this.options.time_frames=a.time_frames||b.time_frames;a.preset&&(a=a.preset,h[a]?(a=h[a],this.options.disabledFeatures=0<this.options.disabledFeatures.length?this.options.disabledFeatures.concat(a.disabledFeatures):a.disabledFeatures,this.options.enabledFeatures=0<this.options.enabledFeatures.length?this.options.enabledFeatures.concat(a.enabledFeatures):a.enabledFeatures):
console.warn("Unknown preset: `"+a+"`"));this._ready_handlers=[];this.create()}};d.widget.prototype={_innerWindow:function(){return d.gEl(this.id).contentWindow},_autoResizeChart:function(){this.options.fullscreen&&$(d.gEl(this.id)).css("height",$(window).height()+"px")},create:function(){function a(a){g.load(JSON.parse(a.content),a)}function b(){d.gEl(g.id).contentWindow.TradingView.GlobalEventsStorage.subscribe("chart_load_requested",a)}var c=this.render(),g=this,e;if(this.options.container){var f=
d.gEl(this.options.container);f.innerHTML=c}else document.write(c);if(this.options.autosize||this.options.fullscreen)f=$(d.gEl(this.id)),f.css("width","100%"),this.options.fullscreen||f.css("height","100%");this._autoResizeChart();this._onWindowResize=function(a){g._autoResizeChart()};window.addEventListener("resize",this._onWindowResize);this.unsubscribeFromLoadRequestEvent=function(){d.gEl(g.id).contentWindow.TradingView.GlobalEventsStorage.unsubscribe("chart_load_requested",a)};e=d.gEl(this.id);
var h=null,h=function(){d.unbindEvent(e,"load",h);e.contentWindow.widgetReady(function(){var a;g._ready=!0;for(a=g._ready_handlers.length;a--;)g._ready_handlers[a].call(g);e.contentWindow._initializationFinished();var c=d.gEl(g.id).contentWindow;if(c.TradingView.GlobalEventsStorage)b();else{var f=null,f=function(){b();d.unbindEvent(c,"load",f)};d.bindEvent(c,"load",f)}})};d.bindEvent(e,"load",h)},render:function(){window[this.options.uid]={datafeed:this.options.datafeed,tradingController:this.options.tradingController,
overrides:this.options.overrides,studiesOverrides:this.options.studiesOverrides,disabledFeatures:this.options.disabledFeatures,enabledFeatures:this.options.enabledFeatures,enabledDrawings:this.options.enabledDrawings,disabledDrawings:this.options.disabledDrawings,favorites:this.options.favorites,logo:this.options.logo,numeric_formatting:this.options.numeric_formatting,rss_news_feed:this.options.rss_news_feed};this.options.savedData&&(window[this.options.uid].chartContent={json:this.options.savedData});
var a=(this.options.path||"")+"static/tv-chart.html#localserver=1&symbol="+encodeURIComponent(this.options.symbol)+"&interval="+encodeURIComponent(this.options.interval)+(this.options.toolbar_bg?"&toolbarbg="+this.options.toolbar_bg.replace("#",""):"")+"&hideSymbolSearch="+this.options.hideSymbolSearch+"&hideSideToolbar="+this.options.hideSideToolbar+"&enabledStudies="+encodeURIComponent(JSON.stringify(this.options.enabledStudies))+"&disabledStudies="+encodeURIComponent(JSON.stringify(this.options.disabledStudies))+
(this.options.studiesAccess?"&studiesAccess="+encodeURIComponent(JSON.stringify(this.options.studiesAccess)):"")+"&widgetbar="+encodeURIComponent(JSON.stringify(this.options.widgetbar))+(this.options.drawingsAccess?"&drawingsAccess="+encodeURIComponent(JSON.stringify(this.options.drawingsAccess)):"")+"&timeFrames="+encodeURIComponent(JSON.stringify(this.options.time_frames))+(this.options.hasOwnProperty("disableLogo")?"&disableLogo="+encodeURIComponent(this.options.disableLogo):"")+"&locale="+encodeURIComponent(this.options.locale)+
"&uid="+encodeURIComponent(this.options.uid)+"&clientId="+encodeURIComponent(this.options.client_id)+"&userId="+encodeURIComponent(this.options.user_id)+(this.options.charts_storage_url?"&chartsStorageUrl="+encodeURIComponent(this.options.charts_storage_url):"")+(this.options.charts_storage_api_version?"&chartsStorageVer="+encodeURIComponent(this.options.charts_storage_api_version):"")+(this.options.indicators_file_name?"&indicatorsFile="+encodeURIComponent(this.options.indicators_file_name):"")+
(this.options.custom_css_url?"&customCSS="+encodeURIComponent(this.options.custom_css_url):"")+(this.options.auto_save_delay?"&autoSaveDelay="+encodeURIComponent(this.options.auto_save_delay):"")+"&debug="+this.options.debug+(this.options.snapshotUrl?"&snapshotUrl="+encodeURIComponent(this.options.snapshotUrl):"")+(this.options.timezone?"&timezone="+encodeURIComponent(this.options.timezone):"")+(this.options.studyCountLimit?"&studyCountLimit="+encodeURIComponent(this.options.studyCountLimit):"")+
(this.options.symbolSearchRequestDelay?"&ssreqdelay="+encodeURIComponent(this.options.symbolSearchRequestDelay):"");return'<iframe id="'+this.id+'" name="'+this.id+'"  src="'+a+'"'+(this.options.autosize||this.options.fullscreen?"":' width="'+this.options.width+'" height="'+this.options.height+'"')+' frameborder="0" allowTransparency="true" scrolling="no" allowfullscreen style="display:block;"></iframe>'},onChartReady:function(a){this._ready?a.call(this):this._ready_handlers.push(a)},setSymbol:function(a,
b,c){this._innerWindow().changeSymbol(a,b+"",c)},layout:function(){return this._innerWindow().layout()},setLayout:function(a){return this._innerWindow().setLayout(a)},chartsCount:function(a){return this._innerWindow().chartsCount(a)},chart:function(a){return this._innerWindow().chart(a)},activeChart:function(){return this._innerWindow().activeChart()},_widgetResizeTimer:null,createButton:function(a){var b=this;a=a||{};var c=a.align||"left";a=this._innerWindow().headerWidget;c="left"==c?a._$left:a._$right;
a=a.createGroup({single:!0}).appendTo(c);a=$('<div class="button"></div>').appendTo(a);this._widgetResizeTimer&&clearTimeout(this._widgetResizeTimer);this._widgetResizeTimer=setTimeout(function(){b._innerWindow().resizeWindow();clearTimeout(b._widgetResizeTimer)},5);return a},symbolInterval:function(a){var b=this._innerWindow().getSymbolInterval();a&&a(b);return b},onSymbolChange:function(a){this._innerWindow().setCallback("onSymbolChange",a)},onIntervalChange:function(a){this._innerWindow().setCallback("onIntervalChange",
a)},onTick:function(a){this._innerWindow().setCallback("onTick",a)},remove:function(){window.removeEventListener("resize",this._onWindowResize);delete window[this.options.uid];var a=d.gEl(this.id);a.contentWindow.destroyChart();this.unsubscribeFromLoadRequestEvent();a.parentNode.removeChild(a)},getVisibleRange:function(a){var b=this.activeChart().getVisibleRange();a&&a(b);return b},onAutoSaveNeeded:function(a){this._innerWindow().setCallback("onAutoSaveNeeded",a)},onMarkClick:function(a){this._innerWindow().setCallback("onMarkClick",
a)},onBarMarkClicked:function(a){this._innerWindow().setCallback("onMarkClick",a)},onTimescaleMarkClicked:function(a){this._innerWindow().setCallback("onTimescaleMarkClick",a)},subscribe:function(a,b){this._innerWindow().setCallback(a,b)},onScreenshotReady:function(a){this._innerWindow().setCallback("onScreenshotReady",a)},onContextMenu:function(a){this._innerWindow().TradingView.GlobalEventsStorage.subscribe("onContextMenu",function(b){b.callback(a(b.unixtime,b.price))})},onShortcut:function(a,b){this._innerWindow().createShortcutAction(a,
b)},onGrayedObjectClicked:function(a){this._innerWindow().TradingView.GlobalEventsStorage.subscribe("onGrayedObjectClicked",a)},closePopupsAndDialogs:function(){this._innerWindow().closePopupsAndDialogs()},applyOverrides:function(a){this.options=$.extend(!0,this.options,{overrides:a});this._innerWindow().applyOverrides(a)},createStudyTemplate:function(a,b){var c=this.activeChart().createStudyTemplate(a);b&&b(c);return c},addCustomCSSFile:function(a){this._innerWindow().addCustomCSSFile(a)},save:function(a){this._innerWindow().saveChart(a)},
load:function(a,b){this._innerWindow().loadChart({json:a,extendedData:b})},setLanguage:function(a){this.remove();this.options.locale=a;this.create()},isFloatingTradingPanelVisible:function(){return this._innerWindow().isFloatingTradingPanelVisible()},toggleFloatingTradingPanel:function(){this._innerWindow().toggleFloatingTradingPanel()},isBottomTradingPanelVisible:function(){return this._innerWindow().isBottomTradingPanelVisible()},toggleBottomTradingPanel:function(){this._innerWindow().toggleBottomTradingPanel()},
showSampleOrderDialog:function(a){return this._innerWindow().showSampleOrderDialog(a)},showSampleClosePositionDialog:function(a){return this._innerWindow().showSampleClosePositionDialog(a)},showSampleReversePositionDialog:function(a){return this._innerWindow().showSampleReversePositionDialog(a)},mainSeriesPriceFormatter:function(){return this._innerWindow().mainSeriesPriceFormatter()},showNoticeDialog:function(a){this._innerWindow().showNoticeDialog(a)},showConfirmDialog:function(a){this._innerWindow().showConfirmDialog(a)}};
"applyStudyTemplate setChartType clearMarks refreshMarks setVisibleRange createOrderLine createPositionLine createExecutionShape createVerticalLine createMultipointShape createShape removeEntity createStudy removeAllShapes removeAllStudies executeActionById executeAction".split(" ").forEach(function(a){d.widget.prototype[a]=function(){console.warn("Method `"+a+"` is obsolete. Please use `chart()."+a+"` instead.");return this.activeChart()[a].apply(this.activeChart(),arguments)}});window.TradingView&&
jQuery?jQuery.extend(window.TradingView,d):window.TradingView=d}})();
