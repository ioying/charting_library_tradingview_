webpackJsonp([0],[function(t,e,i){(function(t){"use strict";function e(t){return window.TVCallback[t]&&window.TVCallback[t].apply(null,Array.prototype.slice.call(arguments,1))}var o,n,s,r,a,l,h,c,d,p,u,_,f,g,m,v,y,w,b,S,T,C,x,P,L,k,E,I,A=i(3);i(4),i(66),i(274),o=i(40),n=i(132).Action,s=i(275),r=i(55).ChartSaver,a=i(279),l=i(44),h=i(271),c=i(75),d=c.PriceFormatter,p=i(280),i(282),u=i(283),_=i(376),f=i(385),g=i(387),m=i(284),v=i(388),y=i(287).UndoHistory,w=i(399),b=i(400),i(396),i(402),S=i(41),window.TVCallback={},T=!!urlParams.indicatorsFile,C=$.Deferred(),x=$.Deferred(),$.when(C,x).done(function(){ChartApiInstance.start()}),T?$.getScript(urlParams.indicatorsFile).done(function(){void 0!==window.__customIndicators&&window.isArray(window.__customIndicators)&&(window.PineJS=i(390),JSServer.studyLibrary=JSServer.studyLibrary.concat(window.__customIndicators),console.log("{0} custom indicators loaded.".format(window.__customIndicators.length)),C.resolve())}).fail(function(t){console.warn("Error loading custom indicators @ `{0}`: {1} ({2}) ".format(urlParams.indicatorsFile,t.statusText,t.status)),C.resolve()}):C.resolve(),window.__delayedMesssages=[],window.widgetReady=function(t){window.__delayedMesssages.push({callback:t})},window.customizeUI=function(t){var e,i;if(t.studiesOverrides){e=t.studiesOverrides;for(i in e)w.setProperty(i,e[i])}window.__defaultsOverrides=t.defaultsOverrides},window.applyOverrides=function(t){$.extend(!0,window.__defaultsOverrides,t),window.applyDefaultsOverrides(TradingView.defaultProperties.chartproperties),window.applyDefaultOverridesToLinetools(),window.chartWidgetCollection.applyOverrides(t)},window.is_authenticated=!1,P=function(){var i,n,s,c,m,y,w,b,T,C,P,L,k,E,I;if(!Modernizr.canvas||!Modernizr.canvastext)throw"Charting library cannot be running under this browser";t.setEnabled("charting_library_debug_mode","true"==urlParams.debug),i=window.headerChartPanel=$(".header-chart-panel"),n=$("#library-container"),s=$(".tv-header"),c=$("#footer-chart-panel"),t.enabled("remove_library_container_border")&&(n.css("border","0px"),n.css("padding","1px")),window.customizeUI({studiesOverrides:urlParams.studiesOverrides?JSON.parse(urlParams.studiesOverrides):void 0,defaultsOverrides:JSON.parse(urlParams.overrides)}),urlParams.numeric_formatting=urlParams.numeric_formatting&&JSON.parse(urlParams.numeric_formatting),urlParams.numeric_formatting&&"string"==typeof urlParams.numeric_formatting.decimal_sign&&(d.prototype.decimalSign=urlParams.numeric_formatting.decimal_sign[0]),t.enabled("saveload_storage_customization")&&(void 0!==urlParams.chartsStorageUrl&&urlParams.chartsStorageUrl&&void 0!==urlParams.clientId&&urlParams.clientId?o.initialize(urlParams.clientId,urlParams.userId,urlParams.chartsStorageUrl,urlParams.chartsStorageVer||"1.0"):(t.setEnabled("saveload_storage_customization",!1),t.setEnabled("header_saveload",!1))),window.ChartApiInstance=new v(window.parent[urlParams.uid].datafeed),urlParams.autoSaveDelay&&ChartApiInstance.setAutoSaveDelay(urlParams.autoSaveDelay),ChartApiInstance.setTimeFramesList(JSON.parse(urlParams.timeFrames)),ChartApiInstance.setStudiesAccessController(ChartApiInstance.createStudiesAccessController(urlParams.studiesAccess,urlParams.enabledStudies,urlParams.disabledStudies)),t.enabled("narrow_chart_enabled")&&$(".chart-page").css("min-width","240px"),t.enabled("use_localstorage_for_settings")&&TVSettings.sync(),m=urlParams.chartContent?JSON.parse(urlParams.chartContent).json:void 0,y=urlParams.interval||"D",w={jqParent:$("#chart-area"),onResize:function(e){var o,r,a,l,h,c,d=$(document.body).height()-2;n.height(d),o=$("#footer-chart-panel"),r=o&&o.is(":visible")?o.outerHeight():0,a=$("#bottom-area"),l=a&&a.is(":visible")?a.outerHeight():0,h=t.enabled("header_widget")&&i.is(":visible")?i.outerHeight():0,c=d-h-s.outerHeight()-l-r,c=Math.max(50,c),e.height(c)},padding:t.enabled("border_around_the_chart")?5:0,edge:t.enabled("border_around_the_chart")?5:0,content:m,widgetOptions:{hideIdeas:!0,addVolume:!0,handleSessionErrors:!0,muteSessionErrors:!0,timezone:urlParams.timezone,defSymbol:urlParams.symbol,defInterval:y,hideSymbolSearch:JSON.parse(urlParams.hideSymbolSearch)},globalEvents:!0,snapshotUrl:urlParams.snapshotUrl},m&&void 0!==m.extendedData&&(b=m.extendedData,w.metaInfo={id:b.uid,name:b.name,description:b.description,uid:b.uid,username:"",tags:""}),T=window.chartWidgetCollection=new u(w),T.activeChartWidget.subscribe(function(t){h.emit("activeChartChanged",T.getAll().indexOf(t))}),window.ChartSaverInstance=window.saver=new r(T),window.chartWidget=T.activeChartWidget.value(),window.pro=new TradingView.Pro,C=JSON.parse(urlParams.favorites),C.intervals=C.intervals.map(function(t){var e=""+t;return e.match(/1[DWMYdwmy]/)&&(e=e.slice(1)),e}),t.enabled("study_templates")&&(window.studyTemplates=new a({chartWidgetCollection:T,notShowQuicks:!t.enabled("items_favoriting")})),window.headerWidget=new _({chartWidgetCollection:T,headerChartPanel:i,hideStudyTemplates:!0,favoriteIntervals:C.intervals,interval_options:{interval:y},favoriteChartTypes:C.chartTypes}),l.bindToChartWidgetCollection(T),P=function(){},L=JSON.parse(urlParams.logo),P=L.image?function(e,i,o){var n,s,r,a,l,h,c,d;i=i||chartWidget._jqMainDiv,$(i).find(".onchart-custom-logo").remove(),n=$('<img src="'+L.image+'">'),s=L.link?$('<a href="'+L.link+'" target="_blank"/>').append(n):n,r=$('<span class="text">Powered&nbsp;by&nbsp;<span><a href="https://www.tradingview.com/" target="_blank"><span class="text logo-highlighted">TradingView</span></a>'),a=$('<div class="onchart-custom-logo"/>').appendTo(i),l=$('<div class="wrapper"/>').appendTo(a),h=$('<table class="inner">').appendTo(l),c=$("<tr>").appendTo(h),$('<td class="custom-logo">').append(s).appendTo(c),d=$("<tr>").appendTo(h),t.enabled("link_to_tradingview")&&$('<td class="tv-link">').append(r).appendTo(d),o&&a.addClass("on-pane")}:function(e,i,o){if(t.enabled("link_to_tradingview")){i=i||chartWidget._jqMainDiv,$(i).find(".onchart-tv-logo").remove();var n=$('<div class="onchart-tv-logo wrapper"><div class="wrapper"><a class="inner" href="https://www.tradingview.com/" target="_blank"><img class="solid" src="images/charting_library/logo-widget-copyright.png" alt="TradingView Logo"><img class="faded" src="images/charting_library/logo-widget-copyright-faded.png" alt="TradingView Logo"><span class="text"><span id="logo-symbol"></span>&nbsp;charts&nbsp;by&nbsp;<span class="logo-highlighted">TradingView</span></span></a></div></div>').appendTo(i);t.enabled("minimalistic_logo")?n.on("mouseenter",function(){$(this).addClass("expanded")}).on("mouseleave",function(){$(this).removeClass("expanded")}):n.addClass("expanded"),o&&n.addClass("on-pane")}},k=t.enabled("widget_logo")&&"true"!=urlParams.disableLogo,k&&(chartWidget.createLogo=P,t.enabled("show_logo_on_all_charts")&&(T.createLogo=P.bind(this)),t.enabled("move_logo_to_main_pane")||chartWidget.withModel(null,P)),urlParams.toolbarbg&&(E="#"+urlParams.toolbarbg,$(".tv-side-toolbar").css("background-color",E),$(".chart-controls-bar").css("background-color",E),$("#chart-area").css("background-color",E),i.css("background-color",E),$("#footer-chart-panel").css("background-color",E)),TradingView.isNaN(urlParams.studyCountLimit)||(TradingView.STUDY_COUNT_LIMIT=Math.max(2,+urlParams.studyCountLimit)),TradingView.isNaN(urlParams.ssreqdelay)||S.setSearchRequestDelay(Math.max(0,+urlParams.ssreqdelay)),I=new f({container:$(".tv-side-toolbar"),chartWidgetCollection:T,onWidget:!0,enabledDrawings:urlParams.enabledDrawings?JSON.parse(urlParams.enabledDrawings):[],disabledDrawings:urlParams.disabledDrawings?JSON.parse(urlParams.disabledDrawings):[],drawingsAccess:urlParams.drawingsAccess?JSON.parse(urlParams.drawingsAccess):void 0,forceVisible:"false"==urlParams.hideSideToolbar&&!!t.enabled("left_toolbar")}),window.sideToolbar=I,window.quoteSessionMultiplexerInstance={},window.quoteSessionMultiplexerInstance.simple=new p("simple"),window.quoteSessionMultiplexerInstance.full=new p,window.lineToolPropertiesToolbar=new g(T),chartWidget.onDisconnected().subscribe(null,function(t){t&&window.showCriticalErrorMessage()}),$(".tv-content").bind("contextmenu",function(t){var e=$(t.originalEvent.target);if(!e.is("input")&&!e.is("textarea"))return!1}),x.resolve(),function(){function t(t){chartWidget.withModel(null,function(){if(chartWidget.model().mainSeries().bars().size()>0)t();else{var e=function(){t(),chartWidget.model().mainSeries().onBarReceived().unsubscribe(null,e)};chartWidget.model().mainSeries().onBarReceived().subscribe(null,e)}})}window.widgetReady=t;for(var e=0;e<window.__delayedMesssages.length;++e)t(window.__delayedMesssages[e].callback)}(),chartWidget.withModel(null,function(){chartWidget.model().mainSeries().onSymbolResolved().subscribe(null,function(){var t=chartWidget.model().mainSeries().symbolInfo(),i=chartWidget.model().mainSeries().properties().interval.value(),o={name:t.name,exchange:t.exchange,description:t.description,type:t.type,interval:i};e("onSymbolChange",o)}),l.interval.subscribe(function(t){e("onIntervalChange",t)}),ChartApiInstance.on("realtime_tick",function(t){e("onTick",t)}),ChartApiInstance.on("onAutoSaveNeeded",function(){e("onAutoSaveNeeded")}),h.subscribeToAll(function(){if(e.apply(null,arguments),t.enabled("charting_library_debug_mode")){var i=Array.prototype.slice.call(arguments);console.log("Event {0}, arguments: {1}".format(i[0],JSON.stringify(i.slice(1))))}})}),T.onScreenshotReady().subscribe(null,function(t){e("onScreenshotReady",t)})},window.destroyChart=function(){window.chartWidgetCollection&&(window.chartWidgetCollection.destroy(),window.chartWidgetCollection=null),window.quoteSessionMultiplexerInstance&&(window.quoteSessionMultiplexerInstance.simple&&window.quoteSessionMultiplexerInstance.simple.destroy(),window.quoteSessionMultiplexerInstance.full&&window.quoteSessionMultiplexerInstance.full.destroy(),window.quoteSessionMultiplexerInstance=null),ChartApiInstance&&(ChartApiInstance.destroy(),ChartApiInstance=null)},L=$.Deferred(),$.when(A,L).done(function(){if(JSON.parse(urlParams.disabledFeatures).map(function(e){t.setEnabled(e,!1)}),JSON.parse(urlParams.enabledFeatures).map(function(e){t.setEnabled(e,!0)}),setTimeout(P,0),t.enabled("14851")){!function(t,e,i,o,n,s,r){t.GoogleAnalyticsObject=n,t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},t[n].l=1*new Date,s=e.createElement(i),r=e.getElementsByTagName(i)[0],s.async=1,s.src=o,r.parentNode.insertBefore(s,r)}(window,document,"script","//www.google-analytics.com/analytics.js","ga");var e=document.URL.match(RegExp("(:?.*://)([^/]+)/.*"))[2];ga("create","UA-53174009-1","auto"),ga("set",{hostname:e,page:e,referrer:e}),ga("send","pageview")}}),function(){var t=!0;window.parent[urlParams.uid].datafeed.onReady(function(e){t&&console.warn("`onReady` should return result asynchronously. Use `setTimeout` with 0 interval to execute the callback function."),window.configurationData=e,L.resolve()}),t=!1}(),window.getFunctionFromArguments=function(t){return window.parent[urlParams.uid][t]},window.loadChart=function(t){ChartApiInstance.purgeCache(),ChartApiInstance._studyEngine.stopSources(),window.chartWidgetCollection.loadContent(t.json),window.chartWidgetCollection.purgeUnusedWidgets(),t.extendedData&&(window.chartWidgetCollection.metaInfo.id.setValue(t.extendedData.uid),window.chartWidgetCollection.metaInfo.uid.setValue(t.extendedData.uid),window.chartWidgetCollection.metaInfo.name.setValue(t.extendedData.name)),l.symbol.setValue(I().symbol()),h.emit("chart_loaded")},window.createShortcutAction=function(){var t={};return function(e,i){void 0===t[e]&&(t[e]=new n({shortcut:e})),t[e].callbacks().subscribe(null,i)}}(),window.closePopupsAndDialogs=function(){TVDialogs.dialogs.forEach(function(t){t.dialog.find("._tv-dialog-title-close").click()}),s.hideAll()},window.addCustomCSSFile=function(t){var e=document.createElement("link");document.getElementsByTagName("head")[0].appendChild(e),e.setAttribute("type","text/css"),e.setAttribute("rel","stylesheet"),e.setAttribute("href",t)},urlParams.customCSS&&window.addCustomCSSFile(urlParams.customCSS),window._initializationFinished=function(){y.clearStack()},window.getSymbolInterval=function(){return{symbol:l.symbol.value(),interval:l.interval.value()}},window.setCallback=function(t,e){window.TVCallback[t]=e},window.symbolInfo=function(t){var e=chartWidget.model().mainSeries().symbolInfo(),i=chartWidget.model().mainSeries().properties().interval.value(),o={name:e.name,exchange:e.exchange,description:e.description,type:e.type,interval:i};return t(o),o},window.saveChart=function(t){window.ChartSaverInstance.whenReadyToSave(function(){var e=window.ChartSaverInstance.saveToJSON();return t&&t(JSON.parse(e.content))})},k=window.layout=function(){return window.chartWidgetCollection.layout.value()},window.setLayout=function(t){window.chartWidgetCollection.layout.setValue(t)},E=window.chartsCount=function(){return m[k()].count},window.chart=function(t){if(void 0===t&&(t=0),t<0||t>E())throw"Incorrect index: "+t;return new b(window.chartWidgetCollection.getAll()[t])},I=window.activeChart=function(){return new b(window.chartWidgetCollection.activeChartWidget.value())},window.changeSymbol=function(t,e,i){l.interval.setValue(e),l.symbol.setValue(t),i&&I().onDataLoaded().subscribe(null,i,!0)},window.resizeWindow=function(){$(window).resize()},window.mainSeriesPriceFormatter=function(){return chartWidget.model().mainSeries().priceScale().formatter()},window.showNoticeDialog=function(t){function e(){o&&(o(),o=null)}var o,n=i(62);t=t||{},t.title=t.title||"",t.body=t.body||"",o=t.callback,n.showNotice(t.title,"",{html:t.body,onOkButtonClick:e}).on("destroy",e)},window.showConfirmDialog=function(t){function e(t){o&&(o(t),o=null)}var o,n=i(62);if(t=t||{},t.title=t.title||"",t.body=t.body||"",!t.callback)throw Error("callback must be exist");o=t.callback,n.showConfirm(t.title,t.body,e.bind(null,!0),e.bind(null,!1),{okButtonText:$.t("OK"),cancelButtonText:$.t("Cancel")}).on("destroy",e.bind(null,!1))}}).call(e,i(1))},function(t,e,i){(function(t){var e=function(){var t,i,o,n,s,r,a,l,h,c,d={};if(void 0!==e)return e;t={custom_items_in_context_menu:{},websocket_connection:{},countdown:{},extended_hours:{},symbol_search_parser_mixin:{},show_pro_features:{},daily_timeframe_suffix:{},symbollist_context_menu:{},pay_attention_to_ticker_not_symbol:{},graying_disabled_tools_enabled:{},update_study_formatter_on_symbol_resolve:{},constraint_dialogs_movement:{},same_data_requery:{},phone_verification:{},show_interval_dialog_on_key_press:{},header_interval_dialog_button:{subsets:["show_interval_dialog_on_key_press"]},header_fullscreen_button:{},header_symbol_search:{},header_resolutions:{subsets:["header_interval_dialog_button"]},header_chart_type:{},header_settings:{},header_indicators:{},header_compare:{},header_undo_redo:{},header_screenshot:{},header_saveload:{},header_saveload_to_the_right:{},header_widget:{subsets:["header_widget_dom_node","header_symbol_search","header_resolutions","header_chart_type","header_settings","header_indicators","header_compare","header_undo_redo","header_fullscreen_button","compare_symbol"]},compare_symbol:{subsets:["header_compare"]},chart_property_page:{subsets:["chart_property_page_style","chart_property_page_scales","chart_property_page_background","chart_property_page_timezone_sessions","chart_property_page_evetns_alerts","chart_property_page_trading","chart_property_page_template_button"]},disable_userlink_popup:{},left_toolbar:{},control_bar:{},widget_logo:{},timeframes_toolbar:{},edit_buttons_in_legend:{},pane_context_menu:{},scales_context_menu:{},legend_context_menu:{},context_menus:{subsets:["pane_context_menu","scales_context_menu","legend_context_menu","objects_tree_context_menu"]},items_favoriting:{},save_chart_properties_to_local_storage:{},use_localstorage_for_settings:{subsets:["items_favoriting","save_chart_properties_to_local_storage"]},plain_studymarket:{},trading_watch_positions:{},disable_resolution_rebuild:{},border_around_the_chart:{},narrow_chart_enabled:{},charting_library_debug_mode:{},log_data_request_time:{},saveload_requires_authentication:{},saveload_storage_customization:{},new_chart_creation_available:{},volume_force_overlay:{},create_volume_indicator_by_default:{},saved_charts_count_restriction:{},lean_chart_load:{},stop_study_on_restart:{},star_some_intervals_by_default:{},predefined_items_only_may_be_starred:{},move_logo_to_main_pane:{},show_logo_on_all_charts:{},link_to_tradingview:{},right_bar_stays_on_scroll:{},chart_content_overrides_by_deafults:{},14851:{},show_dialog_on_snapshot_ready:{},snapshot_trading_drawings:{},allow_supported_resolutions_set_only:{},study_market_minimized:{},widgetbar_tabs:{},collapsible_header:{},show_extension_popup:{},study_templates:{},side_toolbar_in_fullscreen_mode:{},remove_library_container_border:{},whotrades_auth_only:{},support_multicharts:{},display_market_status:{},datasource_copypaste:{},line_tool_templates:{},expand_symbolsearch_items:{},symbol_search_three_columns_exchanges:{},symbol_search_flags:{},symbol_search_limited_exchanges:{},symbol_search_quandl:{},footer_share_buttons:{},footer_bugreport_button:{},footer_publish_idea_button:{},text_notes:{},symbol_info:{},no_bars_status:{},clear_bars_on_series_error:{},hide_loading_screen_on_series_error:{},seconds_resolution:{},dont_show_boolean_study_arguments:{},hide_last_na_study_output:{},price_scale_always_last_bar_value:{},study_dialog_search_control:{},cqg_trading_confirm_risks:{},trading_notifications:{},linetoolpropertieswidget_template_button:{},use_overrides_for_overlay:{},timezone_menu:{},onchart_messages:{},custom_resolutions_box:{},referral_program_for_widget_owners:{},referral_program_policy_aggressive:{subsets:["referral_program_policy_passive","referral_program_policy_normal"]},referral_program_policy_normal:{subsets:["referral_program_policy_passive","header_fake_features_buttons","custom_resolutions_box"]},tv_production:{subsets:["show_pro_features","countdown","extended_hours","symbol_search_parser_mixin","symbollist_context_menu","websocket_connection","header_fullscreen_button","header_widget","left_toolbar","control_bar","timeframes_toolbar","context_menus","edit_buttons_in_legend","use_localstorage_for_settings","saveload_requires_authentication","volume_force_overlay","new_chart_creation_available","saved_charts_count_restriction","create_volume_indicator_by_default","charts_auto_save","right_bar_stays_on_scroll","save_old_chart_before_save_as","chart_property_page_trading","chart_content_overrides_by_deafults","alerts","show_dialog_on_snapshot_ready","show_extension_popup","header_saveload","header_saveload_to_the_right","header_layouttoggle","datasource_copypaste","alerts","show_saved_watchlists","watchlists_from_to_file","chart_property_page","show_chart_property_page","support_multicharts","display_market_status","support_manage_drawings","widgetbar_tabs","study_templates","collapsible_header","line_tool_templates","caption_buttons_text_if_possible","footer_share_buttons","footer_publish_idea_button","text_notes","trading_watch_positions","symbol_info","linetoolpropertieswidget_template_button","cqg_trading_confirm_risks","trading_notifications","symbol_search_three_columns_exchanges","symbol_search_flags","symbol_search_limited_exchanges","symbol_search_quandl","phone_verification","chart_events","onchart_messages","custom_resolutions_box","compare_symbol","timezone_menu"]},browser_extension:{subsets:["disable_userlink_popup","show_pro_features","show_saved_watchlists","display_market_status","widgetbar_tabs"]},widget:{subsets:["show_pro_features","countdown","extended_hours","symbol_search_parser_mixin","symbollist_context_menu","websocket_connection","left_toolbar","control_bar","timeframes_toolbar","context_menus","edit_buttons_in_legend","use_localstorage_for_settings","saveload_requires_authentication","volume_force_overlay","create_volume_indicator_by_default","right_bar_stays_on_scroll","show_dialog_on_snapshot_ready","header_widget_dom_node","header_symbol_search","header_resolutions","header_chart_type","header_compare","header_indicators","header_resolutions","header_symbol_search","header_widget_dom_node","left_toolbar","saveload_requires_authentication","show_dialog_on_snapshot_ready","star_some_intervals_by_default","symbol_search_parser_mixin","symbollist_context_menu","timeframes_toolbar","use_localstorage_for_settings","volume_force_overlay","websocket_connection","display_market_status","symbol_info","linetoolpropertieswidget_template_button","symbol_search_three_columns_exchanges","symbol_search_flags","symbol_search_limited_exchanges","widgetbar_tabs","force_quandl_search","compare_symbol","timezone_menu"]},bovespa_widget:{subsets:["widget","header_settings","extended_hours","chart_property_page_timezone_sessions","linetoolpropertieswidget_template_button"]},charting_library_base:{subsets:["14851","adapt_onchart_logo_background","allow_supported_resolutions_set_only","border_around_the_chart","collapsible_header","constraint_dialogs_movement","context_menus","control_bar","create_volume_indicator_by_default","custom_items_in_context_menu","datasource_copypaste","daily_timeframe_suffix","display_market_status","edit_buttons_in_legend","graying_disabled_tools_enabled","header_widget","lean_chart_load","left_toolbar","trading_watch_positions","link_to_tradingview","pay_attention_to_ticker_not_symbol","plain_studymarket","predefined_items_only_may_be_starred","refresh_saved_charts_list_on_dialog_show","right_bar_stays_on_scroll","saveload_storage_customization","show_dialog_on_snapshot_ready","stop_study_on_restart","study_market_minimized","timeframes_toolbar","update_study_formatter_on_symbol_resolve","update_timeframes_set_on_symbol_resolve","use_localstorage_for_settings","volume_force_overlay","widget_logo","countdown","use_overrides_for_overlay","trading_notifications","compare_symbol","symbol_info","timezone_menu","study_dialog_search_control","show_chart_property_page","chart_property_page_style","chart_property_page_scales","chart_property_page_background","chart_property_page_timezone_sessions","chart_property_page_evetns_alerts"]},charting_library:{subsets:["charting_library_base","header_screenshot","header_saveload"]},static_charts_service:{subsets:["charting_library","disable_resolution_rebuild","log_data_request_time","same_data_requery"]},trading_terminal:{subsets:["charting_library_base","header_saveload_to_the_right","header_saveload","support_multicharts","header_layouttoggle","chart_property_page_trading"]},cqg_terminal:{subsets:["charting_library_base","chart_property_page_trading","header_saveload","header_saveload_to_the_right","expand_symbolsearch_items","caption_buttons_text_if_possible","clear_bars_on_series_error","no_bars_status","hide_loading_screen_on_series_error","support_multicharts","header_layouttoggle","same_data_requery","footer_bugreport_button"]},amp_terminal:{subsets:["cqg_terminal"]}},i={};for(o in t){for(n=t[o].subsets||[],s=0;s<n.length;++s)i[n[s]]=1;i[o]=1}r={};for(o in i)for(a in i)l=t[a],void 0!==l&&l.subsets&&l.subsets.indexOf(o)>=0&&(r.hasOwnProperty(o)||(r[o]=[]),r[o].push(a));return h={},c=function(t){return h[t]},d.enabled=function(t){var i,o,n=r.hasOwnProperty(t)?r[t]:[];if(0==c(t))return!1;for(i=c(t),o=0;o<n.length;++o)i|=e.enabled(n[o]);return i},d._uniqueSets=function(){return Object.keys(i)},d.enable=function(t){h[t]=!0},d.setEnabled=function(t,e){h[t]=e},"undefined"!=typeof __initialDisabledFeaturesets&&__initialDisabledFeaturesets&&__initialDisabledFeaturesets.map(function(t){d.setEnabled(t,!1)}),"undefined"!=typeof __initialEnabledFeaturesets&&__initialEnabledFeaturesets&&__initialEnabledFeaturesets.map(function(t){d.enable(t)}),d}();window.Featuresets=e,void 0!==t&&t&&t.exports&&(t.exports=e)}).call(e,i(2)(t))},,function(t,e){var i=$.Deferred();$.i18n.init({lng:urlParams.locale,load:"unspecific",resGetPath:"localization/translations/__lng__.json",keyseparator:"@",nsseparator:"@",fallbackLng:"en"},function(t){i.resolve(),$(window).resize(),$(".loading-indicator").hide()}),t.exports=i},function(t,e,i){"use strict";function o(t){return t.keys().map(t)}window.TradingView=window.TradingView||{},window.requireAll=o,i(5),i(11),i(12),i(13),i(14),i(15),i(16),i(17),i(18),i(19),i(20),i(23),i(24),i(25),i(28),i(29),i(30),i(31),i(60),i(61),i(62),i(64),i(65),i(39)},function(t,e,i){"use strict";var o=i(6);window.language&&(o.locale(window.language,{months:[$.t("January"),$.t("February"),$.t("March"),$.t("April"),$.t("May"),$.t("June"),$.t("July"),$.t("August"),$.t("September"),$.t("October"),$.t("November"),$.t("December")],monthsShort:[$.t("Jan"),$.t("Feb"),$.t("Mar"),$.t("Apr"),$.t("May"),$.t("Jun"),$.t("Jul"),$.t("Aug"),$.t("Sep"),$.t("Oct"),$.t("Nov"),$.t("Dec")],weekdays:[$.t("Sunday"),$.t("Monday"),$.t("Tuesday"),$.t("Wednesday"),$.t("Thursday"),$.t("Friday"),$.t("Saturday")],weekdaysShort:[$.t("Sun"),$.t("Mon"),$.t("Tue"),$.t("Wed"),$.t("Thu"),$.t("Fri"),$.t("Sat")],weekdaysMin:[$.t("Su",{context:"day_of_week"}),$.t("Mo",{context:"day_of_week"}),$.t("Tu",{context:"day_of_week"}),$.t("We",{context:"day_of_week"}),$.t("Th",{context:"day_of_week"}),$.t("Fr",{context:"day_of_week"}),$.t("Sa",{context:"day_of_week"})],longDateFormat:{LT:$.t("HH:mm"),LTS:$.t("HH:mm:ss"),L:$.t("MM/DD/YYYY"),l:$.t("M/D/YYYY"),LL:$.t("D MMMM YYYY"),ll:$.t("D MMM LT"),LLL:$.t("D MMMM YYYY LT"),lll:$.t("D MMM YYYY LT"),LLLL:$.t("ddd D MMMM YYYY LT"),llll:$.t("ddd D MMM YYYY LT")},calendar:{sameDay:$.t("[Today at] LT"),nextDay:$.t("[Tomorrow at] LT"),nextWeek:$.t("dddd [at] LT"),lastDay:$.t("[Yesterday at] LT"),lastWeek:$.t("[Last] dddd [at] LT"),sameElse:"L"},relativeTime:{future:function(t){return t===$.t("just now")?t:$.t("in %s",{context:"time_range"}).replace("%s",t)},past:function(t){return t===$.t("just now")?t:$.t("%s ago",{context:"time_range"}).replace("%s",t)},s:$.t("just now"),m:function(t){return $.t("%d minute",{count:t}).replace("%d",t)},mm:function(t){return $.t("%d minute",{count:t}).replace("%d",t)},h:$.t("an hour"),hh:function(t){return $.t("%d hour",{count:t}).replace("%d",t)},d:$.t("a day"),dd:function(t){return $.t("%d day",{count:t}).replace("%d",t)},M:$.t("a month"),MM:function(t){return $.t("%d month",{count:t}).replace("%d",t)},y:$.t("a year"),yy:function(t){return $.t("%d year",{count:t}).replace("%d",t)}},week:{dow:1,doy:4}}),o.locale(window.language))},,,,,,function(t,e){"use strict";!function(t){t.fn.contextMenu=function(e){t(this).bind("contextmenu",function(t){return e(t),!1})}}(jQuery)},function(t,e){"use strict";!function(t){t.fn.selectable=function(e){return this.each(function(){var i=t(this);i.css("user-select",e?"text":"none"),i.css("-moz-user-select",e?"text":"-moz-none"),i.css("-webkit-user-select",e?"auto":"none"),(t.browser.msie||t.browser.opera)&&i.attr("unselectable",e?"off":"on")})}}(jQuery)},function(module,exports){(function(){"use strict";this.JSON||(this.JSON={}),function(){function f(t){return t<10?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var i,o,n,s,r,a=gap,l=e[t];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),"function"==typeof rep&&(l=rep.call(e,t,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?l+"":"null";case"boolean":case"null":return l+"";case"object":if(!l)return"null";if(gap+=indent,r=[],"[object Array]"===Object.prototype.toString.apply(l)){for(s=l.length,i=0;i<s;i+=1)r[i]=str(i,l)||"null";return n=0===r.length?"[]":gap?"[\n"+gap+r.join(",\n"+gap)+"\n"+a+"]":"["+r.join(",")+"]",gap=a,n}if(rep&&"object"==typeof rep)for(s=rep.length,i=0;i<s;i+=1)o=rep[i],"string"==typeof o&&(n=str(o,l),n&&r.push(quote(o)+(gap?": ":":")+n));else for(o in l)Object.hasOwnProperty.call(l,o)&&(n=str(o,l),n&&r.push(quote(o)+(gap?": ":":")+n));return n=0===r.length?"{}":gap?"{\n"+gap+r.join(",\n"+gap)+"\n"+a+"}":"{"+r.join(",")+"}",gap=a,n}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(t){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(t){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,i){var o;if(gap="",indent="","number"==typeof i)for(o=0;o<i;o+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var i,o,n=t[e];if(n&&"object"==typeof n)for(i in n)Object.hasOwnProperty.call(n,i)&&(o=walk(n,i),void 0!==o?n[i]=o:delete n[i]);return reviver.call(t,e,n)}var j;if(text+="",cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()}).call(window)},function(t,e,i){(function(t){var e=window.TradingView=window.TradingView||{};window.PineAddons={};e.className=function(t){for(var i in this)if(e[i]===t)return i;return null},e.isMobileView=/mobile=1/i.test(window.location.search),e.isOnFeaturePage=/on-features-page=1/i.test(window.location.search),e.wrapUrl=function(e){return t.enabled("charting_library_base")&&(e=e.replace("","")),e},e.RESOURCES_ROOT=e.wrapUrl("chart-client/css/"),e.THEME_RESOURCES_ROOT=e.wrapUrl("chart-client/css/images/"),e.resourceFullPath=function(t){return e.RESOURCES_ROOT+t},e.themeResourceFullPath=function(t){return e.THEME_RESOURCES_ROOT+t},e.isMobile=function(){var t=/Android/i.test(navigator.userAgent),i=/BlackBerry/i.test(navigator.userAgent),o=/iPhone|iPad|iPod/i.test(navigator.userAgent),n=/Opera Mini/i.test(navigator.userAgent),s=e.winMobileMode,r=e.isMobileView||t||i||o||n||s;return{Android:function(){return t},BlackBerry:function(){return i},iOS:function(){return o},Opera:function(){return n},Windows:function(){return s},any:function(){return r}}}(),e.supportTouch=function(){return Modernizr.touch||e.isMobile.any()},e.onWidget=function(){return/widgetembed|widgetpopup|idea-popup/.test(window.location.pathname)},e.onOrder=function(){return"/order/"===window.location.pathname},"undefined"!=typeof jQuery&&(e.debugReady=$.Deferred())}).call(e,i(1))},function(t,e){"use strict";!function(t,e,i){"$:nomunge";function o(o,n){function s(e){t(r).each(function(){var i=t(this);this===e.target||i.has(e.target).length||i.triggerHandler(n,[e.target])})}n=n||o+i;var r=t(),a=o+"."+n+"-special-event";t.event.special[n]={setup:function(){r=r.add(this),delete r.prevObject,1===r.length&&t(e).bind(a,s)},teardown:function(){r=r.not(this),delete r.prevObject,0===r.length&&t(e).unbind(a)},add:function(t){var e=t.handler;t.handler=function(t,i){t.target=i,e.apply(this,arguments)}}}}t.map("click dblclick mousemove mousedown mouseup mouseover mouseout change select submit keydown keypress keyup".split(" "),function(t){o(t)}),o("focusin","focus"+i),o("focusout","blur"+i),Modernizr.touch&&(o("touchstart","mousedown"+i),
o("touchmove","mousemove"+i),o("touchend","mouseup"+i)),t.addOutsideEvent=o}(jQuery,document,"outside")},function(t,e){"use strict";!function(t){t.fn.mousecapture=function(e){var i=t(document);return this.each(function(){var o=t(this),n={};o.mousedown(function(t){var s,r,a;return e.move&&(s=function(t){e.move.call(o,t,n)},i.mousemove(s)),a=function(){e.move&&i.unbind("mousemove",s),i.unbind("mouseup",r)},r=e.up?function(t){return a(),e.up.call(o,t,n)}:a,i.mouseup(r),e.down.call(o,t,n)})}),this}}(jQuery)},function(t,e){"use strict";!function(t){function e(t,e){if(!(t.originalEvent.touches.length>1)){t.preventDefault();var i=t.originalEvent.changedTouches[0],o=document.createEvent("MouseEvents");o.initMouseEvent(e,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(o)}}if(t.support.touch="ontouchend"in document,t.support.touch){var i,o=t.ui.mouse.prototype,n=o._mouseInit,s=o._mouseDestroy;o._touchStart=function(t){var o=this;!i&&o._mouseCapture(t.originalEvent.changedTouches[0])&&(i=!0,o._touchMoved=!1,e(t,"mouseover"),e(t,"mousemove"),e(t,"mousedown"))},o._touchMove=function(t){i&&(this._touchMoved=!0,e(t,"mousemove"))},o._touchEnd=function(t){i&&(e(t,"mouseup"),e(t,"mouseout"),this._touchMoved||e(t,"click"),i=!1)},o._mouseInit=function(){var e=this;e.element.bind({touchstart:t.proxy(e,"_touchStart"),touchmove:t.proxy(e,"_touchMove"),touchend:t.proxy(e,"_touchEnd")}),n.call(e)},o._mouseDestroy=function(){var e=this;e.element.unbind({touchstart:t.proxy(e,"_touchStart"),touchmove:t.proxy(e,"_touchMove"),touchend:t.proxy(e,"_touchEnd")}),s.call(e)}}}(jQuery)},function(t,e){TradingView.guid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,i="x"==t?e:3&e|8;return i.toString(16)})},TradingView.randomHash=function(){return TradingView.randomHashN(12)},TradingView.randomHashN=function(t){var e,i,o="0123456789abcdefghijklmopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n="";for(e=0;e<t;e++)i=Math.round(Math.random()*(o.length-1)),n+=o[i];return n}},function(t,e,i){(function(t){function e(t){return"number"==typeof t&&isFinite(t)}function i(t){return null!==t&&void 0!==t&&t.constructor==Function}function o(t,e){t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),t.prototype.superclass=e}var n,s=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};"undefined"!=typeof window?(n=window.TradingView=window.TradingView||{},window.isNumber=e,window.isFunction=i,window.inherit=o,window.isArray=s):n=this.TradingView=this.TradingView||{},n.isNaN=function(t){return!(t<=0||t>0)},n.isAbsent=function(t){return null===t||void 0===t},n.isExistent=function(t){return null!==t&&void 0!==t},Number.isNaN=Number.isNaN||function(t){return t!=t},n.isSameType=function(t,e){return Number.isNaN(t)||Number.isNaN(e)?Number.isNaN(t)===Number.isNaN(e):{}.toString.call(t)==={}.toString.call(e)},n.isInteger=function(t){return"number"==typeof t&&t%1===0},n.parseBool=function(t){return t===!0||"true"===t},n.isBoolean=function(t){return t===!0||t===!1},n.isString=function(t){return null!==t&&void 0!==t&&t.constructor==String},n.declareClassAsPureInterface=function(t,e){for(var i in t.prototype)"function"==typeof t.prototype[i]&&t.prototype.hasOwnProperty(i)&&(t.prototype[i]=function(){throw e+"::"+i+" is an interface member declaration and must be overloaded in order to be called"})},n.requireFullInterfaceImplementation=function(t,e,i,o){for(var n in i.prototype)if("function"==typeof i.prototype[n]&&!t.prototype[n])throw"Interface implementation assertion failed: "+e+" does not implement "+o+"::"+n+" function"},n.isInherited=function(t,e){return t===e||!(!t||!t.prototype)&&(void 0!==t.prototype.superclass&&null!==t.prototype.superclass&&(t.prototype.superclass===e||n.isInherited(t.prototype.superclass,e)))},n.TypeValidator=function(t){this.m_type=t},n.TypeValidator.prototype.check=function(t){return t.constructor===this.m_type||n.isInherited(t.constructor,this.m_type)},n.PredicateValidator=function(t){this.m_predicate=t},n.PredicateValidator.prototype.check=function(t){return this.m_predicate(t)},n.clone=function(t){var e,i,o;if(!t||"object"!=typeof t)return t;e="function"==typeof t.pop?[]:{};for(i in t)t.hasOwnProperty(i)&&(o=t[i],o&&"object"==typeof o?e[i]=n.clone(o):e[i]=o);return e},n.deepEquals=function(t,e,o){var r,a,l,h,c;if(o||(o=""),t===e)return[!0,o];if(i(t)&&(t=void 0),i(e)&&(e=void 0),void 0===t&&void 0!==e)return[!1,o];if(void 0===e&&void 0!==t)return[!1,o];if(null===t&&null!==e)return[!1,o];if(null===e&&null!==t)return[!1,o];if(n.isString(t)&&n.isString(e))return[t===e,o];if(Array.isArray(t)&&Array.isArray(e)){if(r=t.length,a=e.length,r!==a)return[!1,o];for(l=0;l<r;l++)if(h=n.deepEquals(t[l],e[l],o+"["+l+"]"),!h[0])return h;return[!0,o]}if(s(t)||s(e))return[!1,o];for(c in t)if(h=n.deepEquals(t[c],e[c],o+"["+c+"]"),!h[0])return h;return[!0,o]},n.merge=function(t,e){for(var i in e)"object"==typeof e[i]&&t.hasOwnProperty(i)?n.merge(t[i],e[i]):t[i]=e[i];return t},n.mergeObj=function(t,e){for(var i in e)e[i].constructor===Object&&t.hasOwnProperty(i)?n.mergeObj(t[i],e[i]):t[i]=e[i];return t},n.mergeWithRules=function(t,e,i,o){var s,r;for(s in e)r=o?o+"."+s:s,i&&r in i?t[s]=i[r](t[s],e[s]):"object"==typeof e[s]&&t.hasOwnProperty(s)?n.merge(t[s],e[s],i,r):t[s]=e[s]},n.sortMultipleFunction=function(){var t=[].slice.call(arguments),e=t.length;return function(i,o){var n,s,r,a,l,h,c;for(c=0;c<e&&(h=0,r=t[c],a="string"==typeof r?r:r.name,n=i[a],s=o[a],"function"==typeof r.fn&&(n=r.fn(n),s=r.fn(s)),l=r.reverse?-1:1,n<s&&(h=l*-1),n>s&&(h=1*l),0===h);c++);return h}},void 0!==t&&t&&t.exports&&(t.exports={inherit:o,merge:n.merge,isNumber:e,isInteger:n.isInteger,isBoolean:n.isBoolean,isString:n.isString,isNaN:n.isNaN,isAbsent:n.isAbsent,isExistent:n.isExistent,isSameType:n.isSameType})}).call(e,i(2)(t))},function(t,e,i){(function(e){var o=window.CanvasEx=i(22);TradingView.resizeCanvas=function(t,e,i){var o,n,s,r,a,l=t.prop("height"),h=t.prop("width");l&&h&&(l/=window.hidpiCanvasRatio||1,h/=window.hidpiCanvasRatio||1,o=$("<canvas>").prop("width",h).prop("height",l),n=o.get(0).getContext("2d"),s=Math.min(h,e),r=Math.min(l,i),s&&r&&n.drawImage(t.get(0),0,0,s,r,0,0,s,r),t.prop("height",i).prop("width",e),a=t.get(0).getContext("2d"),s&&r&&a.drawImage(o.get(0),0,0,s,r,0,0,s,r),o.remove())},o.computeDashPattern=function(t){var e=[[t.lineWidth,2*t.lineWidth],[3*t.lineWidth,2*t.lineWidth],[6*t.lineWidth,6*t.lineWidth]];return e[t.lineStyle-1]},o.drawLine=function(t,e,i,n,s){isFinite(e)&&isFinite(n)&&isFinite(i)&&isFinite(s)&&(t.lineStyle===o.LINESTYLE_DASHED||t.lineStyle===o.LINESTYLE_DOTTED?t.drawDashedLine(t,e,i,n,s):o.drawSolidLine(t,e,i,n,s))},o.drawArrow=function(t,e,i,o,n){isFinite(e)&&isFinite(o)&&isFinite(i)&&isFinite(n)&&(t.beginPath(),t.moveTo(o,n),t.lineTo(e,i),t.moveTo(e+2,i+2),t.lineTo(e-2,i+2),t.moveTo(e-1,i+1),t.lineTo(e+1,i+1),t.stroke())},o.drawSolidLine=function(t,e,i,o,n){t.beginPath(),t.moveTo(e,i),t.lineTo(o,n),t.stroke()},o.setLineStyle=function(t,e){t.lineStyle=e;var i=[];e!=o.LINESTYLE_SOLID&&(i=o.computeDashPattern(t)),"function"==typeof t.setLineDash?t.setLineDash(i):void 0!==t.mozDash?t.mozDash=i:void 0!==t.webkitLineDash&&(t.webkitLineDash=i)},o.drawPoly=function(t,e,i){var o,n;for(t.beginPath(),t.moveTo(e[0].x,e[0].y),o=0;o<e.length;o++)n=e[o],t.lineTo(n.x,n.y);t.closePath(),t.stroke(),i&&t.fill()},o.lineStyles=[],"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.setFont=function(t){if(this.font!=t)try{this.font=t}catch(e){}},CanvasRenderingContext2D.prototype.lineStyle=o.LINESTYLE_SOLID,o.originalSave=CanvasRenderingContext2D.prototype.save,o.originalRestore=CanvasRenderingContext2D.prototype.restore,CanvasRenderingContext2D.prototype.save=function(){o.lineStyles.push(this.lineStyle),o.originalSave.call(this)},CanvasRenderingContext2D.prototype.restore=function(){o.lineStyles.length>0&&(this.lineStyle=o.lineStyles.pop(),o.originalRestore.call(this))},CanvasRenderingContext2D.prototype.drawDashedLine=function(t,e,i,n,s){t.save();var r=o.computeDashPattern(t);if(t.beginPath(),"function"==typeof t.setLineDash)t.setLineDash(r);else if(void 0!==t.mozDash)t.mozDash=r;else{if(void 0===t.webkitLineDash)return t.dashedLineTo(e,i,n,s,r),t.stroke(),void t.restore();t.webkitLineDash=r}t.moveTo(e,i),t.lineTo(n,s),t.stroke(),t.restore()},CanvasRenderingContext2D.prototype.dashedLineTo=function(t,i,o,n,s){var r,a,l,h,c,d,p={thereYet:e.greaterThan,cap:Math.min},u={thereYet:e.greaterThan,cap:Math.min};for(i-n>0&&(u.thereYet=e.lessThan,u.cap=Math.max),t-o>0&&(p.thereYet=e.lessThan,p.cap=Math.max),this.moveTo(t,i),r=t,a=i,l=0,h=!0;!p.thereYet(r,o)||!u.thereYet(a,n);)c=Math.atan2(n-i,o-t),d=s[l],r=p.cap(o,r+Math.cos(c)*d),a=u.cap(n,a+Math.sin(c)*d),h?this.lineTo(r,a):this.moveTo(r,a),l=(l+1)%s.length,h=!h},CanvasRenderingContext2D.prototype.roundRect=function(t,e,i,o,n){this.beginPath(),this.moveTo(t+n,e),this.lineTo(t+i-n,e),this.arcTo(t+i,e,t+i,e+n,n),this.lineTo(t+i,e+o-n),this.arcTo(t+i,e+o,t+i-n,e+o,n),this.lineTo(t+n,e+o),this.arcTo(t,e+o,t,e+o-n,n),this.lineTo(t,e+n),this.arcTo(t,e,t+n,e,n)}),t.exports=o}).call(e,i(21))},function(t,e){"use strict";var i={};i.lessThan=function(t,e){return t<=e},i.greaterThan=function(t,e){return t>=e},i.clamp=function(t,e,i){return Math.min(Math.max(t,e),i)},i.sign=function(t){return t<0?-1:t>0?1:0},i.isBaseDecimal=function(t){if(t<0)return TradingView.logDebugChart("MathEx.isBaseDecimal: argument less zero"),!1;for(var e=t;e>1;e/=10)if(e%10!==0)return!1;return!0},i.greaterOrEqual=function(t,e,i){return e-t<=i},i.equal=function(t,e,i){return Math.abs(t-e)<i},i.log10=function(t){return t<=0?void TradingView.logDebugChart("MathEx.log10: argument less or equal zero"):Math.log(t)/Math.log(10)},i.defComparator=function(t,e){return t<e?-1:t>e?1:0},i.min=function(t,e){var o,n;if(!Array.isArray(t))throw"argument is not array";if(t.length<1)throw"array is empty";for(e||(e=i.defComparator),o=t[0],n=0;n<t.length;++n)e(t[n],o)<0&&(o=t[n]);return o},i.max=function(t,e){var o,n;if(!Array.isArray(t))throw"argument is not array";if(t.length<1)throw"array is empty";for(e||(e=i.defComparator),o=t[0],n=0;n<t.length;++n)e(t[n],o)>0&&(o=t[n]);return o},i.Point=function(t,e){this.x=t,this.y=e},i.Point.prototype.add=function(t){return new i.Point(this.x+t.x,this.y+t.y)},i.Point.prototype.addScaled=function(t,e){return new i.Point(this.x+e*t.x,this.y+e*t.y)},i.Point.prototype.substract=function(t){return new i.Point(this.x-t.x,this.y-t.y)},i.Point.prototype.dotProduct=function(t){return this.x*t.x+this.y*t.y},i.Point.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},i.Point.prototype.scaled=function(t){return new i.Point(this.x*t,this.y*t)},i.Point.prototype.normalized=function(){return this.scaled(1/this.length())},i.Point.prototype.transponed=function(){return new i.Point((-this.y),this.x)},i.Point.prototype.clone=function(){return new i.Point(this.x,this.y)},i.Matrix=function(){this._rows=[[1,0,0],[0,1,0],[0,0,1]]},i.Matrix.prototype.mult=function(t){var e,o,n,s,r;if(t instanceof i.Matrix){for(e=new i.Matrix,o=0;o<3;o++)for(n=0;n<3;n++)for(e._rows[o][n]=0,s=0;s<3;s++)e._rows[o][n]+=this._rows[o][s]*t._rows[s][n];return e}if(t instanceof i.Point){for(r=[t.x,t.y,1],e=[0,0,0],o=0;o<3;o++)for(n=0;n<3;n++)e[o]+=r[n]*this._rows[o][n];return new i.Point(e[0],e[1])}throw"unsupported type"},i.Matrix.rotate=function(t){var e=new i.Matrix;return e._rows[0][0]=Math.cos(t),e._rows[1][1]=Math.cos(t),e._rows[0][1]=-Math.sin(t),e._rows[1][0]=Math.sin(t),e},i.Matrix.scale=function(t,e){var o=new i.Matrix;return o._rows[0][0]=t,o._rows[1][1]=e,o},i.Matrix.translate=function(t,e){var o=new i.Matrix;return o._rows[0][2]=t,o._rows[1][2]=e,o},i.distanceToLine=function(t,e,i){var o=e.substract(t),n=i.substract(t),s=n.dotProduct(o)/o.dotProduct(o),r=t.addScaled(o,s);return{distance:r.substract(i).length(),coeff:s}},i.distanceToSegment=function(t,e,o){var n,s,r=i.distanceToLine(t,e,o);return 0<=r.coeff&&r.coeff<=1?r:(n=t.substract(o).length(),s=e.substract(o).length(),n<s?{distance:n,coeff:0}:{distance:s,coeff:1})},i.intersectLines=function(t,e,i,o){var n,s,r,a=e.substract(t),l=o.substract(i),h=a.x*l.y-a.y*l.x;return Math.abs(h)<1e-6?null:(n=t.substract(i),s=n.y*l.x-n.x*l.y,r=s/h)},i.intersectSegment=function(t,e,o,n){var s,r,a,l=i.intersectLines(t,e,o,n);return null===l?null:(s=e.substract(t),r=s.scaled(l).add(t),a=i.distanceToSegment(o,n,r),Math.abs(a.distance)<1e-6?l:null)},i.pointInRect=function(t,e,i){return t.x>=e.x&&t.x<=i.x&&t.y>=e.y&&t.y<=i.y},i.pointInTriangle=function(t,e,o,n){var s=t.add(e).scaled(.5),r=s.add(o).scaled(.5),a=i.intersectSegment(t,e,r,n);return null===a&&(a=i.intersectSegment(e,o,r,n),null===a&&(a=i.intersectSegment(o,t,r,n),null===a))},i.intersectRayWithRect=function(t,e,o,n){var s,r,a=i.intersectLines(t,e,o,new i.Point(n.x,o.y)),l=i.intersectLines(t,e,new i.Point(n.x,o.y),n),h=i.intersectLines(t,e,n,new i.Point(o.x,n.y)),c=i.intersectLines(t,e,new i.Point(o.x,n.y),o),d=[];return a&&a>=0&&d.push(a),l&&l>=0&&d.push(l),h&&h>=0&&d.push(h),c&&c>=0&&d.push(c),0===d.length?null:(d.sort(function(t,e){return t-e}),s=i.pointInRect(t,o,n)?d[0]:d[d.length-1],r=t.addScaled(e.substract(t),s))},i.isInPolygon=function(t,e){var i,o,n=0,s=t.length-1,r=!1,a=e.x,l=e.y;for(n=0;n<t.length;n++)i=t[n],o=t[s],(i.y<l&&o.y>=l||o.y<l&&i.y>=l)&&i.x+(l-i.y)/(o.y-i.y)*(o.x-i.x)<a&&(r=!r),s=n;return r},i.isInCircle=function(t,e,i){var o=(i.x-t.x)*(i.x-t.x)+(i.y-t.y)*(i.y-t.y),n=e*e;return o<=n},i.optionalCorner=function(t,e,o,n){return Math.abs(t.x-e.x)>1e-6&&Math.abs(t.y-e.y)>1e-6?0===Math.round(t.x)||0===Math.round(e.x)?0===Math.round(t.y)||0===Math.round(e.y)?new i.Point(0,0):new i.Point(0,n):0===Math.round(t.y)||0===Math.round(e.y)?new i.Point(o,0):new i.Point(o,n):null},t.exports=i},function(t,e,i){(function(t){var e={};e.LINESTYLE_SOLID=0,e.LINESTYLE_DOTTED=1,e.LINESTYLE_DASHED=2,e.LINESTYLE_LARGE_DASHED=3,e.TEXTPOS_TOPLEFT=0,e.TEXTPOS_TOPCENTER=1,e.TEXTPOS_TOPRIGHT=2,e.TEXTPOS_MIDDLELEFT=3,e.TEXTPOS_MIDDLECENTER=4,e.TEXTPOS_MIDDLERIGHT=5,e.TEXTPOS_BOTTOMLEFT=6,e.TEXTPOS_BOTTOMCENTER=7,e.TEXTPOS_BOTTOMRIGHT=8,e.SIZE_AUTO="auto",e.SIZE_TINY="tiny",e.SIZE_SMALL="small",e.SIZE_NORMAL="normal",e.SIZE_LARGE="large",e.SIZE_HUGE="huge",e.MARKLOC_ABOVEBAR="AboveBar",e.MARKLOC_BELOWBAR="BelowBar",e.MARKLOC_TOP="Top",e.MARKLOC_BOTTOM="Bottom",e.MARKLOC_RIGHT="Right",e.MARKLOC_LEFT="Left",e.MARKLOC_ABSOLUTE="Absolute",e.MARKLOC_ABSOLUTEUP="AbsoluteUp",e.MARKLOC_ABSOLUTEDOWN="AbsoluteDown",e.HHISTLOC_RELATIVE="relative",e.HHISTLOC_ABSOLUTE="absolute",e.HHISTDIR_LEFTTORIGHT="left_to_right",e.HHISTDIR_RIGHTTOLEFT="right_to_left",void 0!==t&&t&&t.exports&&(t.exports=e)}).call(e,i(2)(t))},function(t,e){String.prototype.left=function(t){if(!TradingView.isInteger(t))throw"invalid length";if(t>this.length)throw"invalid length";return this.substring(0,t)},String.prototype.right=function(t){if(!TradingView.isInteger(t))throw"invalid length";if(t>this.length)throw"invalid length";return this.substring(this.length-t,this.length)},String.prototype.trimmed=function(){return this.replace(/^\s*/,"").replace(/\s*$/,"")},String.prototype.startsWith=function(t){return!(t.length>this.length)&&this.left(t.length)===t}},function(t,e){"use strict";var i=function(){if(window.localStorage&&"setItem"in window.localStorage)try{this.isAvailable=!0,this.localStorage=window.localStorage,this.localStorage.setItem("tvlocalstorage.available","true")}catch(t){delete this.isAvailable,delete this.localStorage}this._updateLength()};i.prototype.length=0,i.prototype.isAvailable=!1,i.prototype.localStorage={"tvlocalstorage.available":"false"},i.prototype._updateLength=function(){var t,e;if(this.isAvailable)this.length=this.localStorage.length;else{t=0;for(e in this.localStorage)this.localStorage.hasOwnProperty(e)&&t++;this.length=t}},i.prototype.key=function(t){return this.isAvailable?this.localStorage.key(t):this[Object.keys(this.localStorage)[t]]},i.prototype.getItem=function(t){return this.isAvailable?this.localStorage.getItem(t):this.localStorage[t]},i.prototype.setItem=function(t,e){this.isAvailable?this.localStorage.setItem(t,e):this.localStorage[t]=e,this._updateLength()},i.prototype.removeItem=function(t){this.isAvailable?this.localStorage.removeItem(t):delete this.localStorage[t],this._updateLength()},i.prototype.clear=function(){this.isAvailable?this.localStorage.clear():this.localStorage={},this._updateLength()},window.TVLocalStorage=new i,t.exports=window.TVLocalStorage},function(t,e,i){(function(t){t.register({LineTool5PointsPattern:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M25.3 19L22.5 8H24V4h-4v4h1.3l-4 4h-2.4L12 7.6V4H8v4h1.5L5.7 23H4v4h4v-3.4l6.8-7.6h2.798L23 19.9V23h4v-4zM9 7V5h2v2zM7.003 26H5v-2h2v2zM14 15.4L7.2 23h-.397L10.5 8.102l-.498-.098h1.1l2.898 4.4zm3-.4h-2v-2h2zm4-8V5h2v2zm-3.002 8.102v-2.4l3.698-3.697L24.2 19h-.8zM26 22h-2v-2h2z"/></svg>',LineToolABCD:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M21 3v1.975l-9 4.91V9H8v4h1.34L7.648 24H6v4h4v-1.975l9-4.91V22h4v-4h-1.34l1.692-11H25V3zm1 1h2v2h-2zm-1 2.115V7h1.34l-1.692 11h-1.12L12 12.145v-1.12zM9 10h2v2H9zm1.352 3h1.12L19 18.855v1.12l-9 4.91V24H8.66zM20 19h2v2h-2zM7 25h2v2H7z"/></svg>',LineToolArc:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M455.1 285.4C310.8 141.1 110.9 106.7 4.2 206l23.2 23.3c.2-.2.5-.4.8-.6l483.7 483.7c-.2.3-.4.5-.6.8l23.2 23.2c99.3-106.8 64.9-306.7-79.4-451zm76.2 400.1L55 209.2c98.3-58.6 256.8-19.5 376.3 100s158.7 278.1 100 376.3z"/></svg>',LineToolArrow:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M21 5v3.302l-5.598 2.3 1.7 1.702L9.298 20H6v4h4v-3.298l7.7-7.7 1.5 1.5 2.3-5.4.102-.1L25 9V5zM9 23H7v-2h2zM24 8l-1.9-.002.1-.2-.202.1L22 6h2z"/></svg>',LineToolArrowMarkDown:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9" class="text"><path d="M16 27l10-13h-6V6h-8v8H6l10 13zm0-1.5L8 15h5V7h6v8h5l-8 10.5z"/><path d="M16 25.5L8 15h5V7h6v8h5z" opacity=".3"/></svg>',LineToolArrowMarkLeft:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9" class="text"><path d="M5 16l13 10v-6h8v-8h-8V6L5 16zm1.5 0L17 8v5h8v6h-8v5L6.5 16z"/><path d="M6.5 16L17 8v5h8v6h-8v5z" opacity=".3"/></svg>',LineToolArrowMarkRight:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9" class="text"><path d="M26 16L13 6v6H5v8h8v6l13-10zm-1.5 0L14 24v-5H6v-6h8V8l10.5 8z"/><path d="M24.5 16L14 24v-5H6v-6h8V8z" opacity=".3"/></svg>',LineToolArrowMarkUp:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9" class="text"><path d="M15 5L5 18h6v8h8v-8h6L15 5zm0 1.5L23 17h-5v8h-6v-8H7l8-10.5z"/><path d="M15 6.5L23 17h-5v8h-6v-8H7z" opacity=".3"/></svg>',LineToolBalloon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9" class="text"><path fill-opacity=".2" d="M139.9 488.7H134c-64.3-2.9-113.9-55.5-113.9-116.9 0-64.3 55.5-116.9 122.7-116.9h309.7c67.2 0 122.7 52.6 122.7 116.9s-55.5 116.9-122.7 116.9H224.6v93.5l-84.7-93.5z"/><path d="M452.5 269.5c58.4 0 108.1 46.7 108.1 102.3s-49.7 102.3-108.1 102.3H210v70.1l-55.5-61.4-8.8-8.8H134c-55.5-2.9-99.3-49.7-99.3-102.3 0-55.5 49.7-102.3 108.1-102.3h309.7m0-29.1H142.8c-76 0-137.3 58.4-137.3 131.5 0 70.1 58.4 125.6 128.6 131.5l105.2 116.9V503.3h213.3c76 0 137.3-58.4 137.3-131.5s-61.4-131.5-137.4-131.5z"/></svg>',LineToolBarsPattern:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M17 4v2h-1v11h1v6h1v-6h1V6h-1V4zm8 0v2h-1v11h1v6h1v-6h1V6h-1V4zM4 5v2H3v11h1v6h1v-6h1V7H5V5zm9 0v2h-1v11h1v6h1v-6h1V7h-1V5zM8 7v6H7v11h1v2h1v-2h1V13H9V7zm9 0h1v9h-1zm8 0h1v9h-1zM4 8h1v9H4zm9 0h1v9h-1zm8 0v3h-1v11h1v2h1v-2h1V11h-1V8zm0 4h1v9h-1zM8 14h1v9H8z"/></svg>',LineToolBezierCubic:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M23 3v4h1.447c-.458.96-3.4 6.5-10.447 6.5-4.187 0-6.633 2.41-7.938 4.758-1.304 2.35-1.558 4.687-1.558 4.687L5 23H3v4h4v-4H5.504c.018-.15.282-2.186 1.434-4.258C8.133 16.592 10.188 14.5 14 14.5c8.292 0 11.46-7.303 11.46-7.303L25 7h2V3h-4zm1 1h2v2h-2V4zM4 24h2v2H4v-2z"/></svg>',LineToolBezierQuadro:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M23 3v1.5c-9.658 0-14.39 4.657-16.576 9.287C4.256 18.377 4.496 22.922 4.5 23H3v4h4v-4H5l.5-.027s-.237-4.39 1.826-8.76C9.39 9.843 13.658 5.5 23 5.5V7h4V3zm1 1h2v2h-2zM4 24h2v2H4z"/></svg>',LineToolBrush:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M377.6 283.1s-136.2-10.2-183.8 170.2c-30.6 115.7-177 251.9-177 251.9l10.2 17s224.7-54.5 360.8-139.6c177-112.3 64.7-255.3 64.7-255.3l-74.9-44.2zm44.3-143L374.2 249l122.5 68.1 78.3-88.5-153.1-88.5z"/></svg>',LineToolCallout:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9" class="text"><path fill-opacity=".2" d="M179.9 462.6h-42.1c-25.9 0-48.6-22.7-48.6-48.6V284.6c0-25.9 22.7-48.6 48.6-48.6h388.5c25.9 0 48.6 22.7 48.6 48.6v129.5c0 25.9-22.7 48.6-48.6 48.6H264L56.9 605.1l123-142.5z"/><path d="M526.3 252.2c19.4 0 32.4 12.9 32.4 32.4v129.5c0 19.4-12.9 32.4-32.4 32.4H257.6l-9.7 6.5-97.1 64.7 16.2-16.2 45.3-55h-74.5c-19.4 0-32.4-12.9-32.4-32.4V284.6c0-19.4 12.9-32.4 32.4-32.4h388.5m0-32.4H137.8c-35.6 0-64.7 29.1-64.7 64.7V414c0 35.6 29.1 64.7 64.7 64.7h6.5L1.8 640.7H31l233-161.9h259c35.6 0 64.7-29.1 64.7-64.7V284.6c3.3-35.6-25.8-64.8-61.4-64.8z"/></svg>',LineToolCircleLines:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M7 4v22h1V4H7zm5 0v22h1V4h-1zm5 0v22h1V4h-1zm5 0v22h1V4h-1z"/></svg>',LineToolCypherPattern:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M25.3 19L22.5 8H24V4h-4v4h1.3l-4 4h-2.4L12 7.6V4H8v4h1.5L5.7 23H4v4h4v-3.4l6.8-7.6h2.798L23 19.9V23h4v-4zM9 7V5h2v2zM7.003 26H5v-2h2v2zM14 15.4L7.2 23h-.397L10.5 8.102l-.498-.098h1.1l2.898 4.4zm3-.4h-2v-2h2zm4-8V5h2v2zm-3.002 8.102v-2.4l3.698-3.697L24.2 19h-.8zM26 22h-2v-2h2z"/></svg>',LineToolDateAndPriceRange:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M10 4v1h9V4zm4.5 1l-3.387 5H14v5H5v-4H4v9h1v-4h9v9h-4v1h9v-1h-4v-9h4.5v3l5.5-3.5-5.5-3.5v3H15v-5h3.113zM25 15.5V20h1v-9h-1z"/></svg>',LineToolDateRange:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M4 10v11h1v-5h15v3l5-3.5-5-3.5v3H5v-5H4zm21 5.5V21h1V10h-1v5.5z"/></svg>',LineToolDisjointAngle:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M22 3v2.047L9 10.352V10H5v4h4v-2.566l13-5.307V7h4V3zm1 1h2v2h-2zM6 11h2v2H6zm-1 6v4h4v-.783l13 5.2V28h4v-4h-4v.34l-13-5.2V17zm1 1h2v2H6zm17 7h2v2h-2z"/></svg>',LineToolElliottCircle:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M566.9 338.7v-24h24v-24h-72v24h24v119.9h-24v24h72v-24h-24v-95.9zm-407.5 71.9c-26.4 0-47.9 21.6-47.9 47.9s21.6 47.9 47.9 47.9 47.9-21.6 47.9-47.9-21.5-47.9-47.9-47.9zm57.5 86.3l-16.8 16.8 47.9 47.9 16.8-16.8-47.9-47.9zm124.7 47.9l16.8 16.8 119.9-119.9-16.9-16.7-119.8 119.8zm-38.4 9.6c-26.4 0-47.9 21.6-47.9 47.9 0 26.4 21.6 47.9 47.9 47.9s47.9-21.6 47.9-47.9c.1-26.3-21.5-47.9-47.9-47.9zM6 592.8l16.8 16.8 95.9-95.9-16.8-16.8L6 592.8z"/></svg>',LineToolElliottCorrection:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M10.943 9.127c-1.294 0-2.347 1.06-2.347 2.35s1.058 2.347 2.347 2.347c1.29 0 2.348-1.058 2.348-2.347 0-1.29-1.052-2.35-2.346-2.35zm14.805.707l-5.873 5.87.824.825 5.875-5.88-.828-.817zM8.125 13.357l-4.7 4.702.823.822 4.7-4.7-.823-.826zm5.637 0l-.823.825 2.346 2.347.822-.826-2.348-2.348zm4.23 2.82c-1.294 0-2.347 1.057-2.347 2.346 0 1.295 1.058 2.35 2.347 2.35 1.29 0 2.348-1.06 2.348-2.35.005-1.29-1.054-2.347-2.348-2.347z"/><path d="M6.593 11.064l-1-2.554h-3.22l-.988 2.554H.44L3.615 3H4.4l3.16 8.064h-.967zM5.303 7.67l-.935-2.49q-.18-.472-.373-1.158-.12.527-.347 1.16l-.944 2.487h2.598z"/><path d="M24.818 20.835q-1.323 0-2.092.884-.764.878-.764 2.41 0 1.577.736 2.44.742.857 2.11.857.84 0 1.917-.302v.818q-.835.313-2.06.313-1.775 0-2.74-1.076-.963-1.077-.963-3.06 0-1.242.462-2.175.467-.934 1.34-1.44.88-.505 2.065-.505 1.263 0 2.208.46l-.396.803q-.912-.428-1.824-.428z"/></svg>',LineToolElliottDoubleCombo:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M10.943 9.127c-1.294 0-2.347 1.06-2.347 2.35s1.058 2.347 2.347 2.347c1.29 0 2.348-1.058 2.348-2.347 0-1.29-1.052-2.35-2.346-2.35zm14.805.707l-5.873 5.87.824.825 5.875-5.88-.828-.817zM8.125 13.357l-4.7 4.702.823.822 4.7-4.7-.823-.826zm5.637 0l-.823.825 2.346 2.347.822-.826-2.348-2.348zm4.23 2.82c-1.294 0-2.347 1.057-2.347 2.346 0 1.295 1.058 2.35 2.347 2.35 1.29 0 2.348-1.06 2.348-2.35.005-1.29-1.054-2.347-2.348-2.347z"/><path d="M7.91 10.03h-.924l-1.62-5.377q-.116-.357-.26-.9-.142-.545-.147-.654-.122.724-.386 1.586l-1.57 5.345H2.08L-.056 2h.988l1.27 4.96q.263 1.044.384 1.89.148-1.005.44-1.967L4.463 2h.99l1.51 4.927q.263.852.445 1.923.103-.78.394-1.9L9.068 2h.988L7.91 10.03z"/><path d="M24.997 24l2.143-4.016h1.01L25.47 24.9v3.116h-.945v-3.07l-2.675-4.962h1.02L24.998 24z"/></svg>',LineToolElliottImpulse:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M10.943 9.127c-1.294 0-2.347 1.06-2.347 2.35s1.058 2.347 2.347 2.347c1.29 0 2.348-1.058 2.348-2.347 0-1.29-1.052-2.35-2.346-2.35zm14.805.707l-5.873 5.87.824.825 5.875-5.88-.828-.817zM8.125 13.357l-4.7 4.702.823.822 4.7-4.7-.823-.826zm5.637 0l-.823.825 2.346 2.347.822-.826-2.348-2.348zm4.23 2.82c-1.294 0-2.347 1.057-2.347 2.346 0 1.295 1.058 2.35 2.347 2.35 1.29 0 2.348-1.06 2.348-2.35.005-1.29-1.054-2.347-2.348-2.347z"/><path d="M6 11.03h-.89V5.308q0-.714.044-1.35-.115.114-.258.24-.143.127-1.307 1.072l-.485-.628L5.23 3H6v8.03z"/><path d="M23.802 23.126q1.27 0 1.994.63.73.628.73 1.72 0 1.248-.796 1.956-.79.71-2.186.71-1.357 0-2.07-.435v-.88q.384.248.955.39.57.138 1.125.138.967 0 1.5-.456.538-.457.538-1.32 0-1.68-2.06-1.68-.522 0-1.395.16l-.473-.303.303-3.757h3.993v.84H22.75l-.204 2.412q.632-.126 1.258-.126z"/></svg>',LineToolElliottMajorRetr2:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M162.5 446.7c-27 0-49 22.1-49 49 0 27 22.1 49 49 49s49-22.1 49-49-22-49-49-49zm58.9 88.3l-17.2 17.2 49 49 17.2-17.2-49-49zm127.5 49.1l17.2 17.2 122.6-122.6-17.2-17.2-122.6 122.6zm-39.3 9.8c-27 0-49 22.1-49 49 0 27 22.1 49 49 49 27 0 49-22.1 49-49 .1-27-22-49-49-49zm-304 39.2l17.2 17.2 98.1-98.1-17.2-17.2-98.1 98.1zm505.1-370.3h-27l-73.6 193.7h27l22.1-58.9h80.9l22.1 58.9h29.4l-80.9-193.7zm-46.6 112.8l22.1-56.4c4.9-12.3 7.4-24.5 9.8-36.8 2.5 9.8 7.4 24.5 14.7 39.2l19.6 53.9h-66.2z"/></svg>',LineToolElliottMinor2:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M227.1 479.2l-17.5 17.5 49.9 49.9 17.5-17.5-49.9-49.9zm-59.9-89.9c-27.5 0-49.9 22.5-49.9 49.9 0 27.5 22.5 49.9 49.9 49.9s49.9-22.5 49.9-49.9-22.5-49.9-49.9-49.9zm407-124.9h-7.5v7.5l-17.5 17.5h-32.5v25h50v124.9h25V264.4h-17.5zM317 539.1c-27.5 0-49.9 22.5-49.9 49.9s22.4 50 49.9 50 49.9-22.5 49.9-49.9-22.4-50-49.9-50zm39.9-10l17.5 17.5 124.9-124.9-17.5-17.5-124.9 124.9zm-349.5 50l17.5 17.5 99.9-99.9-17.5-17.5-99.9 99.9z"/></svg>',LineToolElliottMinorRetr:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M168.6 391.9c-28.1 0-51.1 23-51.1 51.1s23 51.1 51.1 51.1 51.1-23 51.1-51.1-23-51.1-51.1-51.1zm61.3 92L212 501.8l51.1 51.1L281 535l-51.1-51.1zM362.8 535l17.9 17.9 127.7-127.7-17.9-17.9L362.8 535zm-40.9 10.2c-28.1 0-51.1 23-51.1 51.1s23 51.1 51.1 51.1 51.1-23 51.1-51.1-23-51.1-51.1-51.1zM5.2 586.1L23 603.9l102.2-102.2-17.9-17.9L5.2 586.1zm577.3-227.4c0-7.7-2.6-23-2.6-48.5v-35.8c0-12.8 0-20.4-2.6-25.5-2.6-7.7-5.1-12.8-7.7-17.9-5.1-5.1-10.2-7.7-17.9-12.8-7.7-2.6-20.4-5.1-33.2-5.1-12.8 0-25.5 2.6-35.8 5.1-10.2 2.6-17.9 10.2-23 15.3-5.1 10.2-10.2 17.9-12.8 30.7l25.5 2.6c2.6-10.2 7.7-17.9 12.8-23 5.1-5.1 15.3-7.7 28.1-7.7s23 2.6 30.7 10.2c5.1 5.1 7.7 12.8 7.7 23v7.7c-10.2 2.6-25.5 7.7-48.5 10.2-10.2 2.6-17.9 2.6-23 5.1-7.7 2.6-12.8 5.1-20.4 7.7-5.1 5.1-10.2 10.2-12.8 15.3-2.6 7.7-5.1 12.8-5.1 20.4 0 12.8 5.1 23 15.3 33.2 10.2 7.7 23 12.8 40.9 12.8 10.2 0 20.4-2.6 30.7-5.1 10.2-2.6 17.9-10.2 28.1-17.9 0 7.7 2.6 12.8 5.1 20.4h28.1c-2.5-7.6-5.1-15.3-7.6-20.4zm-28.1-51.1c0 12.8-2.6 20.4-5.1 28.1s-10.2 15.3-17.9 17.9c-7.7 5.1-17.9 7.7-28.1 7.7s-17.9-2.6-23-7.7c-5.1-5.1-7.7-10.2-7.7-17.9 0-5.1 0-10.2 2.6-12.8 2.6-5.1 5.1-7.7 10.2-7.7 5.1-2.6 12.8-2.6 23-5.1 20.4-2.6 33.2-5.1 43.4-10.2v7.7h2.6z"/></svg>',LineToolElliottMinorRetr2:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M168.6 391.9c-28.1 0-51.1 23-51.1 51.1s23 51.1 51.1 51.1 51.1-23 51.1-51.1-23-51.1-51.1-51.1zm61.3 92L212 501.8l51.1 51.1L281 535l-51.1-51.1zM362.8 535l17.9 17.9 127.7-127.7-17.9-17.9L362.8 535zm-40.9 10.2c-28.1 0-51.1 23-51.1 51.1s23 51.1 51.1 51.1 51.1-23 51.1-51.1-23-51.1-51.1-51.1zM5.2 586.1L23 603.9l102.2-102.2-17.9-17.9L5.2 586.1zm577.3-227.4c0-7.7-2.6-23-2.6-48.5v-35.8c0-12.8 0-20.4-2.6-25.5-2.6-7.7-5.1-12.8-7.7-17.9-5.1-5.1-10.2-7.7-17.9-12.8-7.7-2.6-20.4-5.1-33.2-5.1-12.8 0-25.5 2.6-35.8 5.1-10.2 2.6-17.9 10.2-23 15.3-5.1 10.2-10.2 17.9-12.8 30.7l25.5 2.6c2.6-10.2 7.7-17.9 12.8-23 5.1-5.1 15.3-7.7 28.1-7.7s23 2.6 30.7 10.2c5.1 5.1 7.7 12.8 7.7 23v7.7c-10.2 2.6-25.5 7.7-48.5 10.2-10.2 2.6-17.9 2.6-23 5.1-7.7 2.6-12.8 5.1-20.4 7.7-5.1 5.1-10.2 10.2-12.8 15.3-2.6 7.7-5.1 12.8-5.1 20.4 0 12.8 5.1 23 15.3 33.2 10.2 7.7 23 12.8 40.9 12.8 10.2 0 20.4-2.6 30.7-5.1 10.2-2.6 17.9-10.2 28.1-17.9 0 7.7 2.6 12.8 5.1 20.4h28.1c-2.5-7.6-5.1-15.3-7.6-20.4zm-28.1-51.1c0 12.8-2.6 20.4-5.1 28.1s-10.2 15.3-17.9 17.9c-7.7 5.1-17.9 7.7-28.1 7.7s-17.9-2.6-23-7.7c-5.1-5.1-7.7-10.2-7.7-17.9 0-5.1 0-10.2 2.6-12.8 2.6-5.1 5.1-7.7 10.2-7.7 5.1-2.6 12.8-2.6 23-5.1 20.4-2.6 33.2-5.1 43.4-10.2v7.7h2.6z"/></svg>',LineToolElliottSubminuette:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M564.1 417.7h25.2v-126h-25.2v126zm0-176.3v25.2h25.2v-25.2h-25.2zM161.2 367.3c-27.7 0-50.4 22.7-50.4 50.4s22.7 50.4 50.4 50.4 50.4-22.7 50.4-50.4c-.1-27.7-22.7-50.4-50.4-50.4zm60.4 90.6L204 475.6l50.4 50.4 17.6-17.6-50.4-50.5zm131 50.4l17.6 17.6L496.1 400l-17.6-17.6-125.9 125.9zm-40.3 10.1c-27.7 0-50.4 22.7-50.4 50.4s22.7 50.4 50.4 50.4 50.4-22.7 50.4-50.4-22.7-50.4-50.4-50.4zM0 558.7l17.6 17.6 100.7-100.7-17.6-17.6L0 558.7z"/></svg>',
LineToolElliottSubminuette2:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M564.1 417.7h25.2v-126h-25.2v126zm0-176.3v25.2h25.2v-25.2h-25.2zM161.2 367.3c-27.7 0-50.4 22.7-50.4 50.4s22.7 50.4 50.4 50.4 50.4-22.7 50.4-50.4c-.1-27.7-22.7-50.4-50.4-50.4zm60.4 90.6L204 475.6l50.4 50.4 17.6-17.6-50.4-50.5zm131 50.4l17.6 17.6L496.1 400l-17.6-17.6-125.9 125.9zm-40.3 10.1c-27.7 0-50.4 22.7-50.4 50.4s22.7 50.4 50.4 50.4 50.4-22.7 50.4-50.4-22.7-50.4-50.4-50.4zM0 558.7l17.6 17.6 100.7-100.7-17.6-17.6L0 558.7z"/></svg>',LineToolElliottTriangle:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M10.943 9.127c-1.294 0-2.347 1.06-2.347 2.35s1.058 2.347 2.347 2.347c1.29 0 2.348-1.058 2.348-2.347 0-1.29-1.052-2.35-2.346-2.35zm14.805.707l-5.873 5.87.824.825 5.875-5.88-.828-.817zM8.125 13.357l-4.7 4.702.823.822 4.7-4.7-.823-.826zm5.637 0l-.823.825 2.346 2.347.822-.826-2.348-2.348zm4.23 2.82c-1.294 0-2.347 1.057-2.347 2.346 0 1.295 1.058 2.35 2.347 2.35 1.29 0 2.348-1.06 2.348-2.35.005-1.29-1.054-2.347-2.348-2.347z"/><path d="M7.593 10.064l-1-2.554h-3.22l-.988 2.554H1.44L4.615 2H5.4l3.16 8.064h-.967zM6.303 6.67l-.935-2.49q-.18-.472-.373-1.158-.12.527-.347 1.16l-.944 2.487h2.598z"/><path d="M25.477 28.03H21V20h4.477v.83h-3.543v2.587h3.33v.824h-3.33v2.956h3.543v.835z"/></svg>',LineToolElliottTripleCombo:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M10.943 9.127c-1.294 0-2.347 1.06-2.347 2.35s1.058 2.347 2.347 2.347c1.29 0 2.348-1.058 2.348-2.347 0-1.29-1.052-2.35-2.346-2.35zm14.805.707l-5.873 5.87.824.825 5.875-5.88-.828-.817zM8.125 13.357l-4.7 4.702.823.822 4.7-4.7-.823-.826zm5.637 0l-.823.825 2.346 2.347.822-.826-2.348-2.348zm4.23 2.82c-1.294 0-2.347 1.057-2.347 2.346 0 1.295 1.058 2.35 2.347 2.35 1.29 0 2.348-1.06 2.348-2.35.005-1.29-1.054-2.347-2.348-2.347z"/><path d="M8.91 9.03h-.924l-1.62-5.377q-.116-.357-.26-.9-.142-.545-.147-.654-.122.724-.386 1.586L4.004 9.03H3.08L.944 1h.988l1.27 4.96q.263 1.044.384 1.89.148-1.005.44-1.967L5.463 1h.99l1.51 4.927q.263.852.445 1.923.103-.78.394-1.9L10.068 1h.988L8.91 9.03z"/><path d="M27.52 28.03H22v-.73l4.263-6.46h-4.13V20H27.4v.73l-4.263 6.455h4.384v.846z"/></svg>',LineToolEllipse:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M13 5v1.557C10.26 6.84 7.792 7.69 5.887 8.95c-2.36 1.564-3.885 3.78-3.885 6.27 0 2.49 1.525 4.708 3.885 6.27 2.36 1.563 5.574 2.508 9.115 2.508 3.54 0 6.755-.945 9.115-2.508 2.36-1.562 3.885-3.78 3.885-6.27 0-2.49-1.525-4.706-3.885-6.27C22.21 7.69 19.743 6.84 17 6.558V5zm1 1h2v2h-2zm3 1.562c2.555.282 4.838 1.08 6.563 2.223C25.727 11.218 27 13.14 27 15.22c0 2.082-1.273 4-3.438 5.434-2.164 1.433-5.198 2.342-8.56 2.342s-6.398-.91-8.563-2.342C4.27 19.22 3 17.302 3 15.22c0-2.08 1.27-4 3.435-5.433 1.723-1.14 4.006-1.94 6.56-2.22V9h4z"/></svg>',LineToolExtended:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M23.605 6.646l-4.34 4.34L16 11l-.014 3.307L13.293 17H10v3.293l-3.354 3.353.708.708L10.707 21H14v-3.293l2.67-2.67L20 15v-3.334l4.313-4.312zM17 12h2v2h-2zm-6 6h2v2h-2z"/></svg>',LineToolFibChannel:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M387.382 160.99L19.62 528.75 5.193 514.327l367.763-367.762zM399.6 195.6v67.3l-259 259H73.2v81.6h81.6v-67.3l259-259h67.3v-81.6h-81.5zM134.4 583.1H93.6v-40.8h40.8v40.8zm326.3-326.3h-40.8V216h40.8v40.8zm114.2 73.4L426.1 481.1h-53l175.4-175.4-14.3-14.3-367.1 367.2 14.3 14.3 175.4-175.4v53l-151 150.9 14.3 14.3L371 564.8h69.3v-67.3l150.9-150.9-16.3-16.4zm-155 212.1h-40.8v-40.8h40.8v40.8zm88.53-257.64L162.304 630.787 147.88 616.36l346.125-346.124z"/></svg>',LineToolFibCircles:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M297.6 362.3c-32.2 0-58.6 26.4-58.6 58.6s26.4 58.6 58.6 58.6 58.6-26.4 58.6-58.6-26.3-58.6-58.6-58.6zm0 87.9c-17.6 0-29.3-14.7-29.3-29.3 0-17.6 14.7-29.3 29.3-29.3 17.6 0 29.3 14.7 29.3 29.3 0 17.6-11.7 29.3-29.3 29.3zm0-175.8c-79.1 0-146.5 64.5-146.5 146.5s64.5 146.5 146.5 146.5S444.2 503 444.2 420.9s-67.4-146.5-146.6-146.5zm0 263.8c-64.5 0-117.2-52.7-117.2-117.2s52.7-117.2 117.2-117.2S414.8 356.5 414.8 421s-52.7 117.2-117.2 117.2zm0-322.4c-114.3 0-205.1 90.8-205.1 205.1S183.3 626 297.6 626s205.1-90.8 205.1-205.1-90.8-205.1-205.1-205.1zm0 381c-96.7 0-175.8-79.1-175.8-175.8s79.1-175.8 175.8-175.8S473.4 324.3 473.4 421s-79.1 175.8-175.8 175.8zm0-468.9c-161.2 0-293 131.9-293 293s131.9 293 293 293 293-131.9 293-293-131.8-293-293-293zm0 556.8C151.1 684.7 33.9 567.5 33.9 421s117.2-263.7 263.7-263.7S561.3 274.5 561.3 421 444.2 684.7 297.6 684.7z"/></svg>',LineToolFibRetracement:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M4.3 642.1H591v-32.6H4.3v32.6zm0-195.6H591v-32.6H4.3v32.6zm0-228.1V251H591v-32.6H4.3z"/></svg>',LineToolFibSpeedResistanceArcs:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M297.6 439.5c79 0 146.3-64.4 146.3-146.3h-29.3c0 64.4-52.7 117.1-117.1 117.1s-117.1-52.7-117.1-117.1h-29.3c.2 82 64.6 146.3 146.5 146.3zm0-87.7c32.2 0 58.5-26.3 58.5-58.5h-29.3c0 17.6-14.6 29.3-29.3 29.3s-29.3-14.6-29.3-29.3h-29.3c.2 32.1 26.5 58.5 58.7 58.5zm0 146.3c114.1 0 204.8-90.7 204.8-204.8h-29.3c0 96.6-79 175.6-175.6 175.6s-175.6-79-175.6-175.6H92.8c0 114.1 90.7 204.8 204.8 204.8zM561 293.2c0 146.3-117.1 263.4-263.4 263.4S34.3 439.5 34.3 293.2H5c0 161 131.7 292.6 292.6 292.6s292.6-131.7 292.6-292.6H561z"/></svg>',LineToolFibSpeedResistanceFan:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M14.04 3.303l-.788 1.838.92.4.787-1.84-.92-.39zM5 4.5V25h20.5v-1H21v-6.102l.182.424 1.838-.787-.393-.92-1.627.7v-7.61l2.854-2.852-.708-.708L20.293 9h-7.607l.7-1.627-.92-.393-.788 1.838.424.182H6V4.5H5zM6 10h13.293l-5 5h-4.178l.117-.273-.92-.395-.285.668H6v-5zm4.89.656l-.788 1.838.918.395.79-1.84-.92-.4zm9.11.05V24h-5v-3.027l.668-.286-.395-.92-.273.118v-4.178l5-5zm6.303 4.335l-1.838.79.394.92 1.83-.79-.4-.91zM6 16h2.6l-.075.172.92.392.242-.564h3.606l-6.31 6.31.1-.23-.92-.394-.163.378V16zm8 .707v3.605l-.564.243.392.92L14 21.4V24H7.936l.378-.162-.394-.92-.23.098 6.31-6.31zM7.738 18.01l-.79 1.838.92.394.788-1.84-.918-.392zm11.21.18l-1.837.79.4.918 1.84-.787-.39-.92zm-7.35 3.154l-1.84.787.394.92 1.838-.78-.392-.92z"/></svg>',LineToolFibSpiral:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M411.2 234c-83.058 0-152.1 69.043-152.1 152.1 0 17.915 3.948 35.028 11.01 50.504l-150.4 30.076c-12.193-30.528-18.91-63.825-18.91-98.68h-20c0 36.155 6.758 70.764 19.046 102.652l-95.88 19.174 5.06 25.3L110.48 494.84C157.367 589.342 254.892 654.5 367.3 654.5c126.89 0 232.2-102.785 232.2-232.2 0-103.637-84.663-188.3-188.3-188.3zm0 20c92.76 0 168.3 75.54 168.3 168.3 0 118.587-96.087 212.2-212.2 212.2-102.81 0-192.092-58.358-236.532-143.72l153.378-30.673c22.716 30.04 58.685 49.694 98.655 49.694 54.71 0 100.4-45.69 100.4-100.4 0-46.72-38.25-82.4-82.4-82.4v20c33.46 0 62.4 26.53 62.4 62.4 0 43.5-36.9 80.4-80.4 80.4-29.91 0-57.24-13.27-76.33-34.15l90.29-18.05-5.06-25.3-101.3 20.26c-7.21-14.045-11.3-29.85-11.3-46.45 0-71.94 60.16-132.1 132.1-132.1z"/></svg>',LineToolFibTimeZone:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M7 4v22h1V4zm5 0v22h1V4zm10 0v22h1V4z"/></svg>',LineToolFibWedge:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M566.4 639.5C530.1 399.6 337.6 207.1 97.7 170.8v-33.5H14V221h27.9v418.5H14v83.7h83.7v-27.9h418.5v27.9h83.7v-83.7h-33.5zM41.9 165.2h27.9v27.9H41.9v-27.9zm27.9 530.1H41.9v-27.9h27.9v27.9zm27.9-27.9v-27.9H69.8v-106c67 16.7 117.2 67 133.9 133.9h-106zm133.9 0c-16.7-80.9-80.9-145.1-161.8-161.8v-83.7c125.5 22.3 223.2 120 245.5 245.5h-83.7zm111.6 0C320.9 527.9 209.3 416.3 69.8 394v-83.7c186.9 22.3 334.8 170.2 359.9 357.1h-86.5zm173 0h-58.6C432.5 466.5 270.7 304.7 69.8 279.6V221h27.9v-19.5c226 36.3 404.5 214.8 438 438h-19.5v27.9zm55.8 27.9h-27.9v-27.9H572v27.9z"/></svg>',LineToolFlagMark:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9" class="text"><path d="M303.306 426.633v-241.3h189.7l-93.1 120.7 96.5 120.6zM276.9 399.2c-3.4-3.4-6.9-3.4-13.8-3.4H111.4V154.4h148.3c3.4 0 13.8 10.3 17.2 17.2zm-17.2-262.1H94.2V413h169c13.8 0 31 31 31 31V164.7s-13.8-27.6-34.5-27.6zm-172.4 0H52.8v586.2h34.5zm443.606 30.933h-241.4v275.9h241.4l-110.4-138z"/><path d="M107.02 155.182v244.363h172.126V155.182H107.02zm194.423 26.754v251.5h206.91l-108.81-127.534L508.35 181.936H301.44z" opacity=".2"/></svg>',LineToolFlatBottom:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M22 4v2.87L7 13.048V13H3v4h4v-2.87l15-6.177V8h4V4h-4zm1 1h2v2h-2V5zM4 14h2v2H4v-2zm-1 8v4h4v-1.5h15V26h4v-4h-4v1.5H7V22H3zm1 1h2v2H4v-2zm19 0h2v2h-2v-2z"/></svg>',LineToolGannComplex:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M4 4v22h22V4zm2.12 1H11v.285l-.303.832c-.85-.32-1.644-.564-2.36-.74C7.474 5.167 6.76 5.065 6.12 5zm6.048 0H18v5.38c-2.16-1.71-4.19-2.907-6-3.72V5.465zM19 5h5.293L19 10.293zm6 .707V11h-5.293zM5 5.91c.69.014 1.72.102 3.098.44.68.167 1.44.4 2.257.71L8.922 11H5zm7 1.856c1.574.743 3.314 1.785 5.172 3.234H12zm-1 .45V11H9.986zM5 12h3.56l-2.183 6H5zm4.623 0H11v6H7.44zM12 12h5.293L12 17.293zm7.848 0H25v5.832l-.465.168h-.97c-.76-2.048-1.93-4.177-3.717-6zm-.848.574c1.636 1.63 2.735 3.547 3.473 5.426H19zm-1 .133V18h-5.293zM5 19h1.014L5 21.785zm2.078 0h3.215L5.24 24.053zM12 19h6v1.377l-6 2.182zm7 0h2.785L19 20.014zm5.715 0H25v6h-.04c-.048-1.186-.233-3.292-.97-5.736zm-1.68.61c.682 2.29.868 4.265.92 5.39H19v-3.922zM11 19.708v3.215L5.947 24.76zm7 1.734V25h-6v-1.377zm-7 2.546V25H8.215z"/></svg>',LineToolGannFan:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M14.04 3.303l-.788 1.838.92.4.787-1.84-.92-.39zM5 4.5V25h20.5v-1H7.936l.378-.162-.394-.92-.23.098L23.855 6.854l-.708-.708L6.984 22.31l.098-.23-.92-.394-.162.378V4.5H5zm7.465 2.48l-.787 1.838.918.393.79-1.83-.92-.39zm-1.576 3.676l-.79 1.838.92.395.79-1.84-.92-.4zm-1.58 3.676l-.79 1.84.92.392.78-1.837-.92-.395zm16.99.71l-1.84.786.39.92 1.83-.79-.397-.917zm-3.68 1.573l-1.84.79.39.917 1.84-.787-.4-.92zM7.73 18.01l-.787 1.838.92.394.78-1.84-.918-.392zm11.213.18l-1.84.79.39.918 1.84-.787-.396-.92zm-3.68 1.578l-1.84.787.392.92 1.84-.788-.396-.92zm-3.678 1.576l-1.84.787.393.92 1.84-.78-.393-.92z"/></svg>',LineToolGannSquare:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="30" height="30" enable-background="new 0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 5v20h20V5H5zm14 1h5v3h-5V6zm0 4h5v4h-5v-4zm-6-4h5v3h-5V6zm0 4h5v4h-5v-4zm5 5v5h-5v-5h5zM9 6h3v3H9V6zm0 4h3v4H9v-4zm3 5v5H9v-5h3zM6 6h2v3H6V6zm0 4h2v4H6v-4zm0 5h2v5H6v-5zm0 9v-3h2v3H6zm3 0v-3h3v3H9zm4 0v-3h5v3h-5zm11 0h-5v-3h5v3zm-5-4v-5h5v5h-5z"/></svg>',LineToolGannSquare2:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M4 4v22h22V4zm2.12 1H11v.285l-.303.832c-.85-.32-1.644-.564-2.36-.74C7.474 5.167 6.76 5.065 6.12 5zm6.048 0H18v5.38c-2.16-1.71-4.19-2.907-6-3.72V5.465zM19 5h5.293L19 10.293zm6 .707V11h-5.293zM5 5.91c.69.014 1.72.102 3.098.44.68.167 1.44.4 2.257.71L8.922 11H5zm7 1.856c1.574.743 3.314 1.785 5.172 3.234H12zm-1 .45V11H9.986zM5 12h3.56l-2.183 6H5zm4.623 0H11v6H7.44zM12 12h5.293L12 17.293zm7.848 0H25v5.832l-.465.168h-.97c-.76-2.048-1.93-4.177-3.717-6zm-.848.574c1.636 1.63 2.735 3.547 3.473 5.426H19zm-1 .133V18h-5.293zM5 19h1.014L5 21.785zm2.078 0h3.215L5.24 24.053zM12 19h6v1.377l-6 2.182zm7 0h2.785L19 20.014zm5.715 0H25v6h-.04c-.048-1.186-.233-3.292-.97-5.736zm-1.68.61c.682 2.29.868 4.265.92 5.39H19v-3.922zM11 19.708v3.215L5.947 24.76zm7 1.734V25h-6v-1.377zm-7 2.546V25H8.215z"/></svg>',LineToolGhostFeed:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M17 5v2h-1v11h1v4h1v-4h1V7h-1V5zm8 3v2h-1v11h1v4h1v-4h1V10h-1V8zM4 11v2H3v11h1v2h1v-2h1V13H5v-2zm9-7v2h-1v11h1v3h1v-3h1V6h-1V4zM8 4v2H7v11h1v6h1v-6h1V6H9V4zm9 4h1v9h-1zm8 3h1v9h-1zm-4-3v3h-1v11h1v2h1v-2h1V11h-1V8zM8 7h1v9H8z"/></svg>',LineToolHeadAndShoulders:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M13 0v4h1.06l-5.2 13h-.247l-3-6H7V7H3v4h.8l-1.958 8.242-1.91.262.136.992 1.526-.21L.236 26H0v4h4v-4H1.264l1.392-5.86L7 19.546V21h4v-2.002l7-.96V19h4v-1.512l4.043-.554L28.33 24H26v4h4v-4h-.617l-2.332-7.203 3.02-.414-.13-.992-3.19.44-1.9-5.83H26V6h-4v4h.99l-2.898 4.867L15.844 4H17V0zm1 1h2v2h-2zm.95 3.46L19.073 15H18v2.027l-7 .96V17H9.94zM23 7h2v2h-2zM4 8h2v2H4zm19.924 2.39l1.805 5.577-3.73.512V15h-.83zM4.72 11.452L7.495 17H7v1.535l-4.096.56zM21 16v2h-2v-2zm-11 2v2H8v-2zm17 7h2.18v2H27zM1.025 27H3v2H1v-1.893z"/></svg>',LineToolHorzLine:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29.999999 30.000001" width="30" height="30" enable-background="new 0 0 841.9 595.3"><path d="M3 17h4v-2h16v2h4v-4h-4v1H7v-1H3zm1-1v-2h2v2zm20 0v-2h2v2z"/></svg>',LineToolHorzRay:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29.999999 30.000001" width="30" height="30" enable-background="new 0 0 841.9 595.3"><path d="M3 13v4h4v-2h21v-1H7v-1zm1 1h2v2H4z"/></svg>',LineToolInsidePitchfork:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M15.646 3.646L8.29 11.002l-.35.352.015 1.308L8.06 22v.006L18.294 22l8.06-7.646-.707-.708L18.293 21h-.586L15 18.293v-2.586l6.354-6.353-.708-.708L14.293 15h-2.586L8.89 12.184l-.003-.364 7.467-7.466zm-6.74 9.967L11 15.707v2.586l-2.02 2.02zM12 16h2v2h-2zm-.293 3h2.586l3 3H9z"/></svg>',LineToolNote:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9" class="text"><path fill-opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M297.7 127.9c-127.1 0-230.1 101.6-230.1 227 0 118.4 104.2 240.4 173.8 314.7 26 27.8 56.3 44.2 56.3 44.2s32.5-16.7 60.4-45.3c69.5-71.3 169.6-183.5 169.6-313.7 0-125.2-103-226.9-230-226.9zm0 335c-57.8 0-104.6-46.8-104.6-104.6S240 253.7 297.7 253.7s104.6 46.8 104.6 104.6-46.8 104.6-104.6 104.6z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M297.7 232.8c-69.3 0-125.5 56.2-125.5 125.5s56.2 125.5 125.5 125.5 125.5-56.2 125.5-125.5-56.1-125.5-125.5-125.5zm0 230.1c-57.8 0-104.6-46.8-104.6-104.6S240 253.7 297.7 253.7s104.6 46.8 104.6 104.6-46.8 104.6-104.6 104.6zm0-335c-127.1 0-230.1 101.6-230.1 227 0 118.4 104.2 240.4 173.8 314.7 26 27.8 56.3 44.2 56.3 44.2s32.5-16.7 60.4-45.3c69.5-71.3 169.6-183.5 169.6-313.7 0-125.2-103-226.9-230-226.9zM352.6 651c-25.4 26.5-54.9 42-54.9 42s-27.5-15.3-51.2-41.1c-63.3-69.1-158-182.3-158-292.3 0-116.4 93.6-210.8 209.1-210.8s209.1 94.4 209.1 210.8c.1 121-90.9 225.2-154.1 291.4z"/></svg>',LineToolNoteAbsolute:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9" class="text"><path fill-opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M184.1 270C86.7 270 7.7 349.2 7.7 447c0 92.3 79.9 187.4 133.2 245.4 19.9 21.6 43.1 34.5 43.1 34.5s24.9-13 46.3-35.3C283.7 636 360.5 548.5 360.5 447c0-97.8-79-177-176.4-177zm.1 277.5c-53.2 0-96.3-43.8-96.3-97.9 0-54.1 43.1-97.9 96.3-97.9s96.3 43.8 96.3 97.9c-.1 54-43.1 97.9-96.3 97.9z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M184.2 351.7c-53.2 0-96.3 43.8-96.3 97.9 0 54.1 43.1 97.9 96.3 97.9s96.3-43.8 96.3-97.9c-.1-54.1-43.1-97.9-96.3-97.9zm0 167.6c-40.1 0-72.7-32.5-72.7-72.7s32.5-72.7 72.7-72.7 72.7 32.5 72.7 72.7-32.6 72.7-72.7 72.7zm-.1-249.3C86.7 270 7.7 349.2 7.7 447c0 92.3 79.9 187.4 133.2 245.4 19.9 21.6 43.1 34.5 43.1 34.5s24.9-13 46.3-35.3C283.7 636 360.5 548.5 360.5 447c0-97.8-79-177-176.4-177zM225 674c-18.9 20.3-40.9 32.1-40.9 32.1s-20.5-11.7-38.1-31.4C99 622 28.5 535.6 28.5 451.7c0-88.9 69.7-160.9 155.7-160.9 85.9 0 155.6 72 155.6 160.9 0 92.2-67.8 171.8-114.8 222.3zm343.4-363.4h19.8c-7.1 47.4-54.7 84.1-113.1 84.1s-105.8-36.7-113-84.1h18.7c8.5 31.8 42.3 56.1 83.9 59.5V248.5h-60.4V228h60.4v-21.5c-12.4-4.2-21.5-15.5-21.5-29.2 0-17.2 14.2-31.2 31.7-31.2s31.7 14 31.7 31.2c0 13.9-9.4 25.3-22.2 29.3V228h59.7v20.5h-59.7v121.6c41.7-3.4 75.5-27.6 84-59.5zm-81.5-133.2c0-6.6-5.4-11.9-12.1-11.9s-12.1 5.3-12.1 11.9 5.4 11.9 12.1 11.9 12.1-5.4 12.1-11.9z"/></svg>',LineToolParallelChannel:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M17 4v3.293L7.293 17H4v4h4v-3.293L17.707 8H21V4zm1 1h2v2h-2zm7.646 4.646L19.293 16H16v3.293l-6.354 6.353.708.708 6.376-6.377L20 20l.014-3.307 6.34-6.34zM17 17h2v2h-2zM5 18h2v2H5z"/></svg>',LineToolPitchfan:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M5 4v2H4v4h1v12H4v4h4v-1h12v1h4v-1h2v-1h-2v-2h-3.293l-2.816-2.816 9.3-3.72-.37-.93-9.69 3.878L14.71 16l9.646-9.646-.708-.708L14 15.293l-2.414-2.414 3.88-9.7-.93-.37-3.72 9.29L8 9.29V6H6V4zm0 3h2v2H5zm1 3h1.39l3.12 3.12L6.86 22H6zm5.184 3.89l2.11 2.11-4.925 4.924zM14 16.708l2.11 2.11-7.034 2.814zm2.88 2.88l3.12 3.12V24H8v-.86zM5 23h2v2H5zm16 0h2v2h-2z"/></svg>',LineToolPitchfork:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M15.646 3.646L7.293 12 11 15.707v2.586l-7.354 7.353.708.708L11.707 19h2.586L18 22.707l8.354-8.353-.708-.708L18 21.293l-3-3v-2.586l6.354-6.353-.708-.708L14.293 15h-2.586l-3-3 7.647-7.646zM12 16h2v2h-2z"/></svg>',LineToolPolyline:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M22 4v1H11.793L5 11.793V22H4v4h4v-1h8.207L20 20.707V17h5V8h1V4zm1 1h2v2h-2zM12.207 6H22v2h2v8h-5v4.293L15.793 24H8v-2H6v-9.793zM5 23h2v2H5z"/></svg>',LineToolPrediction:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M18 2v4h-2l3.44 4L23 6h-2V2h-3zm-6 7v2h-1v9h1v4h1v-4h1v-9h-1V9h-1zm-4 2v4H7v10h1v2h1v-2h1V15H9v-4H8zm4 1h1v7h-1v-7zm7.5 0a1.5 1.5 0 0 0-1.5 1.5 1.5 1.5 0 0 0 1.5 1.5 1.5 1.5 0 0 0 1.5-1.5 1.5 1.5 0 0 0-1.5-1.5zm-.006.996a.498.498 0 0 1 .498.498.498.498 0 0 1-.498.498.498.498 0 0 1-.498-.498.498.498 0 0 1 .498-.498zM8 15.72h1.19V24H8v-8.28z"/></svg>',LineToolPriceLabel:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9" class="text"><path d="M10.17 6.45c-1.145 0-2.077.928-2.077 2.078v6.225c0 .9.575 1.668 1.373 1.953L6.596 20H3v4h4l.057-2.825 6.635-4.35h12.23c1.146 0 2.078-.927 2.078-2.077v-6.22c0-1.15-.927-2.077-2.077-2.077zm.715 1.037h14.163c1.056 0 1.916.87 1.916 1.942v4.39c0 1.07-.86 1.94-1.916 1.94H13.66l-4.013 2.71-.383.02 1.238-2.775c-.83-.18-1.337-.964-1.337-1.9V9.43c0-1.073.663-1.943 1.72-1.943zM4 21h2v2H4z"/><path fill-opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M25.06 7.523H10.894c-1.056 0-1.72.87-1.72 1.943v4.397c0 .937.51 1.72 1.337 1.9L9.28 18.54l.384-.026 4.014-2.71H25.06c1.055 0 1.915-.87 1.915-1.94v-4.4c0-1.072-.86-1.942-1.916-1.942z"/></svg>',LineToolPriceRange:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M9 4v1h11V4H9zm5.5 1l-3.387 5H14v15H9v1h11v-1h-5V10h3.113L14.5 5z"/></svg>',LineToolProjection:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M3 3v4h1v16H3v4h4v-1h16v1h4v-4h-2l.5-.008c-.155-9.757-4.81-14.485-9.402-16.646C11.553 4.206 7.095 4.496 7 4.502V3zm1 1h2v2H4zm3 1l.033.498s4.31-.285 8.64 1.752C20 9.286 24.346 13.556 24.5 23H23v2H7v-2H5V7h2zM4 24h2v2H4zm20 0h2v2h-2z"/></svg>',LineToolRay:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M23.646 5.646L18.293 11H15v3.293L8.293 21H5v4h4v-3.293L15.707 15H19v-3.293l5.354-5.353zM16 12h2v2h-2zM6 22h2v2H6z"/></svg>',LineToolRectangle:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="30" height="30"><path d="M4 4v4h2v16h16v2h4v-4h-2V6H8V4zm1 1h2v2H5zm3 2h15v15h-1v1H7V8h1zm15 16h2v2h-2z"/></svg>',LineToolRegressionTrend:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M537.9 163.6l-14.7-26.4L54.4 400.9l14.7 26.4 468.8-263.7zM57.4 550.4L72 576.8 540.9 313l-14.7-26.4L57.4 550.4zm0 146.5L72 723.3l468.8-263.7-14.7-26.4L57.4 696.9z"/></svg>',LineToolRiskRewardLong:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60" width="30" height="30"><path d="M10 10v2h38v-2H10zm19 2l-6 6h5v14H10v2h18v6h-5l6 6 6-6h-5v-6h18v-2H30V18h5l-6-6zm0 34H10v2h38v-2H29z"/></svg>',LineToolRiskRewardShort:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60" width="30" height="30"><path d="M10 48v-2h38v2H10zm19-2l-6-6h5V26H10v-2h18v-6h-5l6-6 6 6h-5v6h18v2H30v14h5l-6 6zm0-34H10v-2h38v2H29z"/></svg>',LineToolRotatedRectangle:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="30" height="30"><path d="M10 2v3.293L5.293 10H2v4h3.293L16 24.707V28h4v-3.293L24.707 20H28v-4h-3.293L14 5.293V2h-4zm1 1h2v2h-2V3zm-.293 3h2.586L24 16.707v2.586L19.293 24h-2.586L6 13.293v-2.586L10.707 6zM3 11h2v2H3v-2zm22 6h2v2h-2v-2zm-8 8h2v2h-2v-2z"/></svg>',LineToolSchiffPitchfork:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M17 2v10.994h2V7.2l2 5.794h2l2.004-5.8.002 4.89V13l2-.002v-.916L27 2h-2l-3 7.398L19 2h-2zm-1.354 1.646L7.293 12 11 15.707v2.586L8.293 21H4v1h14.707l7.647-7.646-.708-.708L18.293 21h-.586L15 18.293v-2.586l1-1-.707-.707-1 1h-2.586l-3-3 7.647-7.646-.708-.708zM12 16h2v2h-2v-2zm-.293 3h2.586l2 2H9.707l2-2z"/></svg>',LineToolSchiffPitchfork2:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M15.646 3.646L7.293 12 11 15.707v2.586L8.293 21H4v1h14.707l7.647-7.646-.708-.708L18.293 21h-.586L15 18.293v-2.586l6.354-6.353-.708-.708L14.293 15h-2.586l-3-3 7.647-7.646zM12 16h2v2h-2zm-.293 3h2.586l2 2H9.707z"/></svg>',LineToolSineLine:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M10 2.5c-1.208 0-2.17.765-2.88 1.775-.706 1.01-1.215 2.3-1.6 3.58-.766 2.56-1.018 5.096-1.018 5.096L5 13H3v4h4v-4H5.504c.008-.076.254-2.453.975-4.855.36-1.22.85-2.43 1.46-3.295.6-.865 1.27-1.35 2.06-1.35.25 0 .59.218 1 .812.4.595.81 1.503 1.21 2.608.793 2.21 1.55 5.2 2.3 8.2.75 3 1.493 6.01 2.32 8.3.414 1.145.844 2.112 1.33 2.83.488.718 1.08 1.25 1.83 1.25 1.207 0 2.17-.765 2.88-1.775.705-1.01 1.214-2.3 1.6-3.58.765-2.56 1.017-5.096 1.017-5.096L25 17h2v-4h-4v4h1.496c-.008.076-.254 2.453-.975 4.855-.36 1.22-.85 2.43-1.46 3.295-.6.865-1.26 1.35-2.06 1.35-.25 0-.59-.218-1-.813-.4-.594-.81-1.502-1.21-2.607-.79-2.21-1.55-5.2-2.3-8.2-.75-3-1.49-6.01-2.32-8.3-.41-1.145-.84-2.112-1.33-2.83-.49-.718-1.08-1.25-1.83-1.25zM4 14h2v2H4v-2zm20 0h2v2h-2v-2z"/></svg>',LineToolText:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M129.8 244.3L5 609.7h54.8l42.6-121.8h121.8l39.6 121.8h57.8L190.7 244.3h-60.9zm-18.2 213.1l51.8-155.3 51.8 155.3H111.6zm456.6 115.7c-3 0-9.1 0-9.1-3-3-6.1-3-9.1-3-18.3v-134c0-82.2-91.3-82.2-103.5-82.2-30.4 0-109.6 3-109.6 91.3h39.6c3-39.6 42.6-60.9 70-60.9 30.4 0 54.8 15.2 54.8 45.7 0 18.3-18.3 30.4-36.5 33.5 0 0-67 9.1-82.2 18.3-15.2 3-45.7 21.3-45.7 70 0 42.6 27.4 76.1 76.1 76.1 33.5 0 67-18.3 91.3-42.6 0 12.2 3 24.4 12.2 30.4 6.1 6.1 18.3 9.1 33.5 9.1 6.1 0 21.3-3 33.5-6.1V567c-9.2 3.1-18.3 6.1-21.4 6.1zm-60.9-63.9c0 42.6-36.5 70-76.1 70-30.4 0-48.7-9.1-48.7-51.8 0-21.3 33.5-39.6 42.6-39.6 24.4-3 54.8-6.1 85.2-15.2v36.5h-3z"/></svg>',LineToolTextAbsolute:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path fill-rule="evenodd" clip-rule="evenodd" d="M567.7 358.1h20c-7.2 47.7-55.1 84.7-113.9 84.7s-106.7-37-113.9-84.7h18.9c8.6 32.1 42.6 56.5 84.5 59.9V295.6h-60.8v-20.7h60.8v-21.6c-12.5-4.2-21.7-15.6-21.7-29.4 0-17.3 14.3-31.4 31.9-31.4 17.6 0 31.9 14.1 31.9 31.4 0 14-9.5 25.5-22.4 29.5v21.5h60.1v20.7H483V418c42-3.4 76.1-27.8 84.7-59.9zm-82.1-134.2c0-6.6-5.4-12-12.1-12-6.7 0-12.1 5.3-12.1 12s5.4 12 12.1 12c6.6 0 12.1-5.4 12.1-12zm-85.5 295.4v92.6c0 5.5 4.2 13.1 6 15.2 1.8 2 4.3 3.1 7.6 3.1 2.4 0 2.2-.5 6.8-1.4v20.9c-7 1.6-10.9 2.4-16 2.4-10.8 0-18-3.4-23-7.7-4.9-4.2-9.2-5.9-10.1-15.5-19.1 20.2-37.9 22.5-65.6 22.5-36.5 0-59.5-22.7-59.5-54.8 0-60.9 75.4-59.9 56.1-57.7 0 0 68.5-5.2 68.5-22.8 0-20.7-11.9-32.3-42.5-32.3-14.3 0-24.9 3-31.8 8.9-6.9 5.9-11 6.7-12.1 18.8h-30c3.6-55.3 70.9-52.6 75.3-52 3.2-.2 23 .1 41.2 9.3 17 8.7 29.1 26.4 29.1 50.5zm-31.5 29.3c-21.8 11.8-38.4 11.5-61.2 17.4-6 1.5-30.9 5.3-30.9 28.2 0 30.4 14.7 37.1 37 37.1 30.5 0 55.1-18.3 55.1-50.5v-32.2zm-204.2 19.2H67.6l-29.1 84.3H1.7l96.4-272.2h41.2l92.9 272.2h-38.8l-29-84.3zM115.9 421L80.5 526.6h71L115.9 421z"/></svg>',LineToolTextAbsolute2:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M130.6 233.5L2.6 600h54.1l43.7-122.7h121.7L262.9 600h58l-130-366.5h-60.3zm-20.9 212.9l51-156.1 51.2 156.1H109.7zm460.9 116.4c-4.5 0-7.9-1.4-10.4-4.2-2.4-2.8-1.8-7.9-1.8-15.4V407.6c0-82-91.1-83.3-103.5-83.3-30.4 0-110.7 1.9-110.7 92.4h39.1c3.7-38.9 42.8-61.2 69.6-61.2 29.5 0 55.3 16.8 55.3 45.1 0 18.8-18.6 30.9-36.1 33.1 0 0-67.9 10.2-83.2 17-15.3 6.7-44.4 25.5-44.4 71.7 0 43.9 27.6 77.7 77.4 77.7 34.2 0 67.9-17.4 91.5-42.4 1.2 13 4.3 25.9 11.1 31.7 6.7 5.8 17.5 10.6 32.3 10.6 7 0 22.8-3 32.3-5.3v-34c-6 1.4-15.2 2.1-18.5 2.1zM510 500.5c0 44.1-35.6 70.3-77.2 70.3-30.5 0-49.8-10.3-49.8-51.9 0-22.7 33-39.2 41.5-40.3 24.5-3.3 54.8-6.5 85.6-16l-.1 37.9z"/></svg>',LineToolThreeDrivers:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M25 2v4h1.387l-2.602 7.145L21 12.005V10h-4v.37l-3-1.23V7h-4v.506L6 5.87V3H2v4h1.072l1.76 11H4v1.664l-2.416-.89-.346.94L4 20.73V22h3.45l2.55.937v1.995h3.828v-.584L18 25.88V28h4v-.646l2.002.736.346-.938L22 26.29V24h-1.102l3.473-9.535 2.44.998.38-.926-2.47-1.014L27.46 6H29V2zm1 1h2v2h-2zM3 4h2v2H3zm3 2.95l4 1.636V11h.287l-4.264 7h-.18L4.083 7H6zM11 8h2v2h-2zm3 2.223l3 1.226V14h.652l-5.502 7h-.318l-.11-10H14zM18 11h2v2h-2zm-7.266 1.19l.098 8.81H10v.873l-2-.736V18h-.805zM21 13.085l2.44.998-3.13 8.602L19.583 14H21zm-2.385 1.307l.8 9.607H18v.81l-4.172-1.54V21h-.406zM7 19v2H5v-2zm6 3v2h-2v-1.996zm6 3h2v2h-2z"/></svg>',LineToolTimeCycles:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M1 15.5v1s1.647.007 3.277.822C5.907 18.138 7.5 19.667 7.5 23H6v4h4v-4H8.508c.03-.186.287-1.697 1.176-3.252.946-1.656 2.51-3.248 5.316-3.248 2.267 0 3.876 1.59 4.955 3.27 1.01 1.57 1.456 3.032 1.516 3.23H20v4h4v-4h-1.5c0-3.333 1.592-4.862 3.223-5.678C27.353 16.507 29 16.5 29 16.5v-1s-1.853-.007-3.723.928c-1.488.744-2.984 2.162-3.54 4.552-.25-.544-.545-1.132-.942-1.75-1.17-1.82-3.062-3.73-5.795-3.73-3.194 0-5.13 1.908-6.184 3.752-.26.453-.468.905-.638 1.33-.62-2.158-2.05-3.45-3.455-4.154C2.853 15.493 1 15.5 1 15.5zM7 24h2v2H7zm14 0h2v2h-2z"/></svg>',LineToolTrendAngle:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="30" height="30"><path d="M21 5v3.3L8.3 21H5v4h4v-1h16v-1h-7c0-3.5-1.5-5.5-3.3-7l7-7H25V5zm1 1h2v2h-2zm-8 10.7c1.75 1.3 3 3.55 3 6.3H9v-1.3zM6 22h2v2H6z"/></svg>',LineToolTrendBasedFibExtension:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M25 17H6.05l-.03-3.68 16.187-7.386-.414-.91L5.016 12.68 5.05 17H5v1h.057v.004l.5-.004H25v-1zm0 3H5v1h20v-1zm0 3H5v1h20v-1z"/></svg>',LineToolTrendBasedFibTime:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M17 5v18.95l-3.68.03L5.934 7.792l-.91.414 7.656 16.777L17 24.95V25h1v-.057h.004l-.004-.5V5h-1zm3 0v20h1V5h-1zm3 0v20h1V5h-1z"/></svg>',LineToolTrendLine:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="30" height="30"><path d="M21 5v3.3L8.3 21H5v4h4v-3.3L21.7 9H25V5zm1 1h2v2h-2zM6 22h2v2H6z"/></svg>',LineToolTriangle:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M4 3v4h1.012L5 23H4v4h4v-3.373L22.78 7H26V3h-4v1H8V3zm1 1h2v2H5zm18 0h2v2h-2zM8 5h14v1.373L7.22 23H6l.012-16H8zM5 24h2v2H5z"/></svg>',LineToolTrianglePattern:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M4.5 3.238V22H3v4h4v-2.05l5-2.24V22h4v-2.08l13.238-5.926L22 10.848V9h-4v.107L14 7.37V5h-4v.63zm1 1.526L10 6.72V9h1.44L5.5 20.883zM11 6h2v2h-2zm3 2.46l4 1.737V13h1.064l-4.755 4.078L12.51 9H14zM19 10h2v2h-2zm-7.184.482L13.488 18H12v2.615l-5 2.24V22h-.94zM22 11.937l4.76 2.07L16 18.823V18h-1.232l5.834-5H22zM13 19h2v2h-2zm-9 4h2v2H4z"/></svg>',LineToolVertLine:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29.999999 30.000001" width="30" height="30" enable-background="new 0 0 841.9 595.3"><path d="M17 27v-4h-2V7h2V3h-4v4h1v16h-1v4zm-1-1h-2v-2h2zm0-20h-2V4h2z"/></svg>',SyncDrawing:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="30" height="30"><path d="M11.527 5.975c-1.345 0-2.692.508-3.713 1.53l-.283.282c-2.04 2.04-2.04 5.385 0 7.426l2.18 2.178c-.3-1.1-.26-2.29.17-3.36l-.58-.58c-1.09-1.09-1.09-2.8 0-3.89l.29-.28c1.1-1.09 2.8-1.09 3.89 0l2.76 2.76c1.09 1.1 1.09 2.8 0 3.89l-.28.28c-.313.32-.69.54-1.08.67l1.86 1.86c.353-.21.69-.45.994-.75l.28-.285c2.04-2.042 2.04-5.383 0-7.424l-2.76-2.76c-1.02-1.02-2.367-1.53-3.71-1.53zm1.733 5.285c-.337.208-.655.453-.946.744l-.283.283c-2.04 2.04-2.04 5.385 0 7.426l2.76 2.758c2.04 2.05 5.39 2.05 7.43 0l.29-.28c2.04-2.04 2.04-5.38 0-7.42l-2.18-2.18c.31 1.11.26 2.29-.17 3.37l.58.58c1.09 1.1 1.09 2.8 0 3.89l-.28.29c-1.09 1.093-2.793 1.093-3.89 0l-2.76-2.76c-1.09-1.092-1.09-2.796 0-3.89l.28-.284c.31-.304.67-.513 1.04-.65l-1.86-1.86zM18 13.492v.31l.03.028c-.007-.113-.01-.226-.03-.338z"/></svg>',"add-note":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28"><path fill="#ffffff" d="M18 10V0h-8v10H0v8h10v10h8V18h10v-8"/></svg>',"alarm-clock-plus":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17.5 16"><path d="M2.766.016C1.25.016.016 1.25.016 2.766c0 .518.155.992.406 1.406.98-1.57 2.54-2.737 4.375-3.22C4.293.39 3.58.016 2.767.016zm7.78 0c-.812 0-1.526.374-2.03.938 1.84.48 3.39 1.648 4.375 3.22.26-.416.41-.89.41-1.407 0-1.515-1.23-2.75-2.75-2.75zm-3.874 1.72C3.182 1.736.36 4.588.36 8.078c0 1.362.422 2.624 1.155 3.655L.61 12.89a.857.857 0 1 0 1.343 1.064l.75-.97c1.083.876 2.466 1.407 3.97 1.407.667 0 1.297-.12 1.905-.31v-1.72c-.58.26-1.226.41-1.906.41-2.596 0-4.688-2.09-4.688-4.69 0-2.59 2.092-4.72 4.688-4.72 2.26 0 4.147 1.62 4.594 3.75h1.625c-.46-3.03-3.05-5.37-6.21-5.37zM6.61 4.172a.65.65 0 0 0-.095.03.65.65 0 0 0-.5.657v2.93l-1.25 1.32a.652.652 0 1 0 .938.9l1.438-1.5.19-.19V4.86a.65.65 0 0 0-.72-.688zm6.374 4.625v2.687h-2.72v1.813h2.72v2.688h1.78v-2.688h2.72v-1.813h-2.72V8.798h-1.78z"/></svg>',
area:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M453.8 360.2l-92.1 6L234 517.7l-86.2-86.1L5.2 514.7v118.9h585.3V268.1z" opacity=".3"/><path d="M234 508.8c-156 222.067-78 111.033 0 0zm309-276.3l-71.3 95.1h-101L236.9 488l-92.1-112.9-38.6 41.6-101 98.1 41.6 41.6 95.1-95.1L234 574.2 397.4 387h104l89.1-118.9z"/></svg>',arrow:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="-200 -70 1000 1000"><path d="M486.2 398L109.1 120v468.6L246.3 520l106.6 201.9 99.1-49.6-103-205.7z"/></svg>',badge:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 14" width="25" height="14" style="position:relative;top:3px"><path d="M10.43 8.683L9.345 8.68c-.943-.005-1.712-.774-1.716-1.717-.003-.452.172-.877.49-1.195.32-.32.744-.493 1.196-.492l4.002.016c.83.004 2.22.18 2.225 1.316.002.522.427.943.95.942.52-.002.942-.427.94-.95-.007-1.932-1.62-3.188-4.107-3.198l-4.003-.016c-.96-.003-1.862.368-2.54 1.045-.677.68-1.048 1.58-1.044 2.54.003.99.41 1.887 1.06 2.54.652.65 1.55 1.056 2.54 1.06l1.086.004c.522.002.947-.42.948-.942.002-.52-.42-.946-.942-.947zm13.832-1.655c-.008-2.076-1.41-3.59-3.33-3.597l-1.357-.003c-.522-.002-.947.42-.948.942-.002.52.42.946.94.947l1.356.006c.996.003 1.445.863 1.448 1.714.004.453-.17.878-.49 1.196-.317.32-.742.493-1.195.492l-4.27-.017c-1.952-.008-1.955-.924-1.957-1.315-.002-.522-.426-.943-.948-.942-.523.003-.945.428-.943.95.004.896.296 1.63.834 2.17.66.66 1.69 1.023 3.01 1.028l4.27.017c.96.003 1.86-.368 2.54-1.046.675-.678 1.046-1.58 1.043-2.54z"/></svg>',bars:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" width="26" height="26"><path d="M16 4v7h-3v2h3v7h2v-2h3v-2h-3V4h-2zM7 6v12H4v2h3v2h2V10h3V8H9V6H7z"/></svg>',brackets:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 11"><path d="M5 0c-.942 0-1.69.178-2.25.53-.56.354-.844.834-.844 1.47v1.906c0 .394-.137.686-.437.875-.3.19-.8.277-1.47.285v.875c.62 0 1.08.1 1.403.28.326.18.5.48.5.906V9c0 .632.274 1.12.813 1.47.537.348 1.297.522 2.28.53v-.875c-.585-.008-1.04-.092-1.344-.28-.303-.19-.437-.49-.437-.908V7.095c0-.883-.597-1.403-1.75-1.563v-.06c1.153-.16 1.75-.68 1.75-1.564V2.094C3.22 1.3 3.81.868 5 .844V0zm3 0v.844c1.19.024 1.78.457 1.78 1.25v1.812c0 .883.597 1.403 1.75 1.563v.06c-1.153.16-1.75.68-1.75 1.56v1.844c0 .42-.133.718-.436.907-.303.19-.76.274-1.344.28V11c.983-.008 1.743-.182 2.28-.53.54-.35.814-.838.814-1.47V7.125c0-.427.174-.724.5-.906.326-.187.785-.285 1.406-.285V5.06c-.673-.01-1.17-.092-1.47-.28-.3-.19-.436-.48-.436-.875V2c0-.636-.285-1.116-.844-1.47C9.69.18 8.942 0 8 0z" font-family="Open Sans" font-size="40" letter-spacing="0" word-spacing="0" style="line-height:125%;-inkscape-font-specification:Open Sans"/></svg>',bucket:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path fill-rule="evenodd" clip-rule="evenodd" d="M88.3 714H507V295.4H88.3V714zm293.1-544.2v-41.9H213.9v41.9H46.5v83.7h502.4v-83.7H381.4z"/></svg>',bucket2:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40.000001 33.999999" width="40" height="34" enable-background="new 0 0 595.3 841.9"><g class="bg"><path stroke-miterlimit="10" stroke-width="20" d="M0 0v34h40V0H0zm1 29h38v4H1v-4z"/></g><g class="icon"><path d="M18.08 12.542c.822.82 1.916-.274 1.095-1.094l-4.923-4.923c-.82-.82-1.914.273-1.094 1.094zm.822-5.744l-6.564 6.564c-.766.766-.766 2.516 0 3.282l4.376 4.376c.766.766 2.516.766 3.282 0l6.564-6.564zm0 2.188l4.923 4.923H13.98z"/><path fill-opacity=".5" d="M27.107 15.55c2.735 2.735 3.282 6.017 0 6.017s-2.735-3.282 0-6.017z"/></g></svg>',candles:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" width="26" height="26"><path d="M16 3v3h-2v12h2v5h1v-5h2V6h-2V3h-1zM9 4v5H7v11h2v3h1v-3h2V9h-2V4H9zm-1 6h3v9H8v-9z"/></svg>',"chat-search":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 973.125"><path d="M960 832L710.875 582.875C746.438 524.812 768 457.155 768 384 768 171.97 596 0 384 0 171.97 0 0 171.97 0 384c0 212 171.97 384 384 384 73.156 0 140.812-21.562 198.875-57L832 960c17.5 17.5 46.5 17.375 64 0l64-64c17.5-17.5 17.5-46.5 0-64zM384 640c-141.375 0-256-114.625-256-256s114.625-256 256-256 256 114.625 256 256-114.625 256-256 256z"/></svg>',compare:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 17" width="17" height="17"><path d="M8.5.36L6.45 2H1v1h2l-3 8a3.54 3.5 0 0 0 3.055 2.97 3.5 3.5 0 0 0 .004 0 3.54 3.5 0 0 0 .44.03 3.5 3.5 0 0 0 .35-.018A3.54 3.5 0 0 0 7 11L4 3h9l-3 8a3.54 3.5 0 0 0 3.502 3A3.54 3.5 0 0 0 17 11l-3-8h2V2h-5.45L8.5.36zm0 1.28l.45.36h-.9l.45-.36zm-5 2.694L6 11H1l2.5-6.666zm10 0L16 11h-5l2.5-6.666z"/></svg>',config:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="-2.4 120.9 600 600" enable-background="new -2.4 120.9 600 600"><path d="M594 473.5V368.8h-76c-5.7-23.8-15.2-46.4-27.5-66.4l53.8-53.8-73.9-73.9-53.8 53.4c-20.6-12.8-42.7-21.8-66.4-27.5v-75.9H245.5v75.9c-23.8 5.7-46.4 15.2-66.4 27.5l-53.8-53.8-73.9 73.9 53.4 53.8C92 322.6 83 344.7 77.3 368.4h-76V473h75.9c5.7 23.8 15.2 46.4 27.5 66.4L51 593.3l73.9 73.9 53.8-53.4c20.6 12.8 42.7 21.8 66.4 27.5v75.9h104.6v-75.9c23.8-5.7 46.4-15.2 66.4-27.5l53.8 53.8 73.9-73.9-53.4-53.8c12.8-20.6 21.8-42.7 27.5-66.4H594zm-296.4 69.7c-67.3 0-122.3-54.6-122.3-122.3 0-67.3 54.6-122.3 122.3-122.3 67.3 0 122.3 54.6 122.3 122.3-.4 67.4-54.9 122.3-122.3 122.3z"/></svg>',cursor:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" enable-background="new 0 0 32 32"><path d="M16 15h1V8h-1v7zm2 1v1h7v-1h-7zm-2 9h1v-7h-1v7zm-8-8h7v-1H8v1z"/></svg>',datawindow:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="5 7 23 21" width="23" height="21"><path d="M6 7v18h20V7H6zm18 16H8V9h16v14zm-2-8H10v2h12v-2zm0-4H10v2h12v-2zm0 8H10v2h12v-2z"/></svg>',detach:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 586.09999 586.09996" width="586.1" height="586.1" enable-background="new 0 0 595.3 841.9"><path d="M0 586.1h117.2l351.7-351.7 117.2 117.3V0H234.4l117.3 117.2L0 468.9z"/></svg>',dot:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="-750 -750 2095.3 2341.9" enable-background="new 0 0 595.3 841.9"><circle cx="297.6" cy="420.9" r="294.8"/></svg>',download:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 18" width="26" height="18"><path d="M12 0C8.4 0 5.4 2.8 5.1 6.3 2 6.1.1 9 0 11.1 0 13.9 2.2 16 4.7 16h4.9l-1-1H4.7C2.8 15 1 13.3 1 11.2 1 9 3 6.7 6 7.4 6 3 9 1 12 1s3.7 1.2 5.1 2.9c1.5.1 3.3.6 4.2 1.7 1 1.5 1.2 2.6 1.2 4.2 1.4.4 2.5 1.5 2.5 2.7-.2 1.6-1.3 2.5-2.6 2.5h-5l-1 1h5.9c2.8 0 3.7-1.9 3.7-3.5s-1-3-2.5-3.4c0-1.6-.5-2.9-1.4-4.1-.9-1.2-2.7-2-4.5-2.1C16.3 1.2 14.3 0 12 0zm-2 7v5H7l6 6 6-6h-3V7h-6zm1 1h4v5h1.6L13 16.6 9.4 13H11V8z"/></svg>',drawginmode:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" enable-background="new 0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" d="M19.2 6.6c-.4-.4-1-.4-1.4 0l-1.2 1.2 1.8 1.8 1.9-1.9-1.1-1.1zM6 22l2.8-2.7L7.5 18 6 22zm3.3-6.9c-.4.4-1.6 1.7-1.2 2.1l1.3 1.3 8.3-8.3-1.8-1.8-6.6 6.7z" opacity=".4"/><path fill-rule="evenodd" clip-rule="evenodd" d="M9 25l2.8-2.7-1.3-1.3L9 25zM22.2 9.6c-.4-.4-1-.4-1.4 0l-1.2 1.2 1.8 1.8 1.9-1.9-1.1-1.1zm-9.9 8.5c-.4.4-1.6 1.7-1.2 2.1l1.3 1.3 8.3-8.3-1.8-1.8-6.6 6.7z" opacity=".75"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15.3 21.1c-.4.4-1.6 1.7-1.2 2.1l2.6 2.6c.4.4 1.7-.8 2.1-1.2l6.6-6.6-3.6-3.5-6.5 6.6zM12 28l4-1.5-2.5-2.5-1.5 4zm15.4-13.2l-2.1-2.1c-.4-.4-1-.4-1.4 0l-1.2 1.2 3.5 3.5 1.2-1.2c.3-.4.3-1 0-1.4z"/></svg>',"earnings-calendar":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 21" width="21" height="21"><path d="M6 1.5A4.5 1.5 0 0 0 1.5 3 4.5 1.5 0 0 0 6 4.5 4.5 1.5 0 0 0 10.5 3 4.5 1.5 0 0 0 6 1.5zm8.8 2.7a4.5 1.5 0 0 0-4.5 1.5 4.5 1.5 0 0 0 4.5 1.5 4.5 1.5 0 0 0 4.5-1.5 4.5 1.5 0 0 0-4.5-1.5zm-12.6.7a4.5 1.5 0 0 0-.7.8A4.5 1.5 0 0 0 6 7.2a4.5 1.5 0 0 0 3.8-.7v-.8c0-.2.1-.5.2-.7a4.5 1.5 0 0 0-.2-.1 4.5 1.5 0 0 1-3.8.7 4.5 1.5 0 0 1-3.8-.7zm0 2.7a4.5 1.5 0 0 0-.7.8 4.5 1.5 0 0 0 3 1.4v-.3c0-.4.2-.7.5-1 .2-.1.3-.1.4-.2a4.5 1.5 0 0 1-3.2-.7zm16.4 0a4.5 1.5 0 0 1-3.8.7 4.5 1.5 0 0 1-1.3-.1c.2.1.3.2.5.3.3.3.5.6.5 1v.4a4.5 1.5 0 0 0 .3 0 4.5 1.5 0 0 0 4.5-1.5 4.5 1.5 0 0 0-.7-.8zM9.5 8A4.5 1.5 0 0 0 5 9.5 4.5 1.5 0 0 0 9.5 11 4.5 1.5 0 0 0 14 9.5 4.5 1.5 0 0 0 9.5 8zm-7.3 2.3a4.5 1.5 0 0 0-.7.8 4.5 1.5 0 0 0 3 1.4v-1.6a4.5 1.5 0 0 1-2.3-.6zm16.4 0a4.5 1.5 0 0 1-3.8.7 4.5 1.5 0 0 1-.3 0v1.6a4.5 1.5 0 0 0 .3 0 4.5 1.5 0 0 0 4.5-1.5 4.5 1.5 0 0 0-.7-.8zM5.7 11.4a4.5 1.5 0 0 0-.7.8 4.5 1.5 0 0 0 4.5 1.5 4.5 1.5 0 0 0 4.5-1.5 4.5 1.5 0 0 0-.7-.8 4.5 1.5 0 0 1-3.8.7 4.5 1.5 0 0 1-3.8-.7zM18.6 13a4.5 1.5 0 0 1-3.8.7 4.5 1.5 0 0 1-.3 0v1.6a4.5 1.5 0 0 0 .3 0 4.5 1.5 0 0 0 4.5-1.5 4.5 1.5 0 0 0-.7-.8zM5.7 14.1a4.5 1.5 0 0 0-.7.8 4.5 1.5 0 0 0 4.5 1.5 4.5 1.5 0 0 0 4.5-1.5 4.5 1.5 0 0 0-.7-.8 4.5 1.5 0 0 1-3.8.7 4.5 1.5 0 0 1-3.8-.7zm0 2.7a4.5 1.5 0 0 0-.7.8 4.5 1.5 0 0 0 4.5 1.5 4.5 1.5 0 0 0 4.5-1.5 4.5 1.5 0 0 0-.7-.8 4.5 1.5 0 0 1-3.8.7 4.5 1.5 0 0 1-3.8-.7z"/></svg>',"economic-calendar":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22" width="22" height="22"><path d="M6.5 1C5.67 1 5 1.67 5 2.5v1C5 4.33 5.67 5 6.5 5S8 4.33 8 3.5v-1C8 1.67 7.33 1 6.5 1zm8 0c-.83 0-1.5.67-1.5 1.5v1c0 .83.67 1.5 1.5 1.5S16 4.33 16 3.5v-1c0-.83-.67-1.5-1.5-1.5zM1 4v16h19V4h-3.05c-.238 1.164-1.262 2-2.45 2-1.186-.002-2.208-.838-2.445-2H8.95C8.71 5.164 7.687 6 6.5 6c-1.186-.002-2.208-.838-2.445-2H1zm20 2v15H3v1h19V6h-1zM2 8h17v11H2V8zm3 1v3h3V9H5zm4 0v3h3V9H9zm4 0v3h3V9h-3zm-8 4v3h3v-3H5zm4 0v3h3v-3H9zm4 0v3h3v-3h-3z"/></svg>',eraser:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M17.948 5.54L7.705 15.468s-.942 1.36-1.67 3.24c-1.255 3.03.314 4.6 1.15 5.226.626.418 4.705 1.045 6.376-.524l10.77-10.767.11-3.866-6.49-3.237zm5.333 7.004l-9.61 9.616c-1.77 1.777-5.43 1.36-6.16.836-.42-.315-1.462-1.987-.63-3.764.838-1.986 1.57-3.24 1.57-3.24l9.515-9.407 5.435 3.03-.107 2.93zm-.52-2.822l-9.2 9.095-5.22-3.034-.31.627 5.124 2.928c-.105.524-.626 1.986-1.252 3.03-1.043 1.57-2.61 1.672-2.61 1.672l.94.418s1.152.106 2.09-1.36c.94-1.465 1.57-3.345 1.57-3.345l9.824-9.617-.94-.414zm1.46-.942l-5.02 4.91v3.453l5.02-4.497zm-6.27-3.24l-4.81 4.702 6.17 3.45 5.02-4.81z"/></svg>',favorite:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.5 13.8"><path d="M7.3 0l2.2 4.5 5 .7-3.6 3.6.8 5-4.4-2.4-4.5 2.4.8-5L0 5.2l5-.7z"/></svg>',font:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40.000001 33.999999" width="40" height="34" enable-background="new 0 0 595.3 841.9"><g class="bg"><path stroke-miterlimit="10" stroke-width="20" d="M0 0v34h40V0H0zm1 29h38v4H1v-4z"/></g><g class="icon"><text x="13.526" y="20.771" font-family="sans-serif" font-size="18.94" letter-spacing="0" word-spacing="0" style="line-height:125%"><tspan x="13.526" y="20.771">A</tspan></text></g></svg>',format:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="-2.4 120.9 14 14" width="14" height="14" enable-background="new -2.4 120.9 600 600"><path d="M-2.4 120.9v14h14v-14zm6.086 1.803H5.52v1.332c.416.1.805.258 1.166.48l.944-.935 1.297 1.297-.943.943c.215.35.38.748.48 1.164H9.8v1.837H8.463c-.1.417-.257.806-.48 1.167l.935.944-1.296 1.298-.944-.943c-.35.215-.747.38-1.164.48v1.332H3.677v-1.33c-.415-.102-.804-.258-1.165-.482l-.943.936-1.298-1.296.94-.945c-.216-.35-.38-.748-.482-1.165H-.597v-1.835H.737c.1-.416.257-.805.48-1.166l-.935-.944 1.296-1.297.944.943c.35-.215.747-.38 1.164-.48zm.912 3.053c-1.188 0-2.143.963-2.143 2.143 0 1.187.963 2.143 2.143 2.143 1.18 0 2.14-.963 2.145-2.145 0-1.188-.966-2.144-2.145-2.144z"/></svg>',fullscreen:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 586.09999 586.09996" width="586.1" height="586.1" enable-background="new 0 0 595.3 841.9"><path d="M172.6 367.9l-97.7 97.7L0 390.7v195.4h195.4l-74.9-74.9 97.7-97.7-45.6-45.6zM195.4 0H0v195.4l74.9-74.9 97.7 97.7 45.6-45.6-97.7-97.7L195.4 0zm195.3 0l74.9 74.9-97.7 97.7 45.6 45.6 97.7-97.7 74.9 74.9V0H390.7zm22.8 367.9l-45.6 45.6 97.7 97.7-74.9 74.9h195.4V390.7l-74.9 74.9-97.7-97.7z"/></svg>',gear:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13"><path d="M12.888 5.894s-.236-.088-.92-.152c-.834-.077-1.086-.39-1.363-.778H10.6c-.035-.093-.072-.184-.113-.274h.003c-.08-.47-.122-.87.414-1.515.438-.527.542-.756.542-.756-.103-.265-.35-.51-.35-.51s-.247-.248-.508-.35c0 0-.23.103-.757.54-.64.536-1.04.493-1.512.414h-.003c-.09-.04-.18-.077-.274-.112V2.39c-.39-.277-.703-.53-.78-1.363-.063-.683-.152-.92-.152-.92C6.85 0 6.5 0 6.5 0s-.35 0-.607.11c0 0-.088.238-.15.92-.08.834-.392 1.085-.78 1.363v.012c-.094.035-.185.07-.275.112h-.003c-.472.08-.87.122-1.516-.413-.53-.438-.76-.542-.76-.542-.26.103-.51.35-.51.35s-.246.247-.35.507c0 0 .105.23.543.752.536.645.493 1.044.414 1.515h.002c-.04.09-.078.18-.113.272h-.005c-.277.39-.53.7-1.364.78-.68.06-.918.15-.918.15C0 6.15 0 6.5 0 6.5s0 .35.112.606c0 0 .236.09.92.15.834.078 1.085.392 1.363.78H2.4c.036.093.072.184.113.274H2.51c.08.47.122.87-.414 1.515-.438.526-.542.756-.542.756.103.265.35.51.35.51s.247.248.508.35c0 0 .23-.103.757-.54.64-.536 1.04-.493 1.512-.414h.003c.09.04.18.077.274.112v.012c.39.276.702.53.78 1.362.063.683.152.92.152.92.257.11.606.11.606.11s.35 0 .604-.11c0 0 .09-.236.152-.92.077-.832.39-1.084.78-1.362v-.012c.093-.035.184-.072.274-.112h.004c.472-.08.87-.122 1.516.413.528.436.76.54.76.54.26-.103.506-.35.506-.35s.247-.247.35-.508c0 0-.104-.228-.542-.755-.536-.644-.493-1.044-.414-1.515h-.003c.04-.09.078-.18.112-.273h.003c.277-.39.53-.704 1.364-.78.682-.064.918-.15.918-.15C13 6.846 13 6.5 13 6.5s0-.35-.112-.606zM6.5 9.537c-1.68 0-3.04-1.36-3.04-3.037 0-1.677 1.36-3.037 3.04-3.037S9.54 4.823 9.54 6.5c0 1.677-1.36 3.037-3.04 3.037z"/></svg>',group:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M5.5 13A2.5 2.5 0 0 0 3 15.5 2.5 2.5 0 0 0 5.5 18 2.5 2.5 0 0 0 8 15.5 2.5 2.5 0 0 0 5.5 13zm9.5 0a2.5 2.5 0 0 0-2.5 2.5A2.5 2.5 0 0 0 15 18a2.5 2.5 0 0 0 2.5-2.5A2.5 2.5 0 0 0 15 13zm9.5 0a2.5 2.5 0 0 0-2.5 2.5 2.5 2.5 0 0 0 2.5 2.5 2.5 2.5 0 0 0 2.5-2.5 2.5 2.5 0 0 0-2.5-2.5z"/></svg>',heikenAshi:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" width="26" height="26"><path d="M16 3v3h-2v12h2v5h1v-5h2V6h-2V3h-1zM9 4v5H7v11h2v3h1v-3h2V9h-2V4H9z"/></svg>',help:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M297 127.5c-161.8 0-293 131.2-293 293s131.2 293 293 293 293-131.2 293-293-131.2-293-293-293zm0 537.2c-134.8 0-244.2-109.3-244.2-244.2S162.2 176.3 297 176.3s244.2 109.3 244.2 244.2S431.8 664.7 297 664.7zm-24.4-122.1h48.8v-48.8h-48.8v48.8zM368 319c-17.7-13.9-41.6-20.9-71.5-20.9-28.5 0-51.5 6.9-69 20.6-17.5 13.7-26.8 33.2-28.2 52.9h48.8c3.3-13.7 8.4-21.5 17.3-28.2 8.9-6.7 20-10.1 33.3-10.1 13.7 0 24.7 3.2 32.8 9.6 8.1 6.4 12.2 14.2 12.2 23.2 0 6.5-2.3 12.4-6.9 17.8-3 3.4-12.1 10.6-27.3 21.6-15.2 11-25.4 20.9-30.5 29.7-5.1 8.8-7.6 20-7.6 33.6 0 1.3 1-5.7 1.2.4h48.8c-.2-12.7-1.5-10.9 1.2-15.9 2.7-4.9 9.5-11.5 20.5-19.6 21.3-15.7 35.2-28.1 41.7-37.3 6.5-9.1 9.8-18.8 9.8-29 0-18.3-8.9-34.5-26.6-48.4z"/></svg>',hide:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" width="14" height="14"><path d="M0 0v14h14V0zm7 2.69c3.018 0 5.172 3.232 5.172 4.31 0 1.077-2.154 4.31-5.172 4.31S1.828 8.08 1.828 7c0-1.077 2.154-4.31 5.172-4.31zm0 1.508C5.49 4.198 4.198 5.49 4.198 7S5.49 9.802 7 9.802 9.802 8.51 9.802 7 8.51 4.198 7 4.198zm0 1.68c.646 0 1.12.476 1.12 1.122 0 .646-.473 1.12-1.12 1.12-.646 0-1.12-.473-1.12-1.12 0-.646.473-1.12 1.12-1.12z"/></svg>',hideAllDrawings:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" enable-background="new 0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" d="M16.5 14c.1 0 .3 0 .4.1l.7-.7c-.4-.2-.7-.3-1.1-.3-1.6 0-2.9 1.3-2.9 2.9 0 .4.1.8.2 1.1l.8-.8v-.4c0-1 .8-1.9 1.9-1.9zm-4.7 5.2C10.2 18 8.9 16.7 8.3 16c1.1-1.2 4.7-5 8.2-5 .9 0 1.9.3 2.8.7l.7-.7c-1.1-.6-2.3-.9-3.5-.9-4.6 0-9 5.4-9.2 5.6L7 16l.3.4c.1.1 1.6 2 3.8 3.6l.7-.8zm13.9-3.5c-.1-.1-1.5-1.8-3.4-3.2l2.8-2.8-.7-.7L9 24.3l.7.7 3.7-3.7c1 .4 2 .7 3 .7 4.9 0 9-5.4 9.2-5.6l.4-.4-.3-.3zm-7.2.5c-.1.9-.9 1.6-1.7 1.7l1.7-1.7zm-2 4.8c-.7 0-1.5-.2-2.2-.5l1.7-1.7c.2 0 .4.1.6.1 1.5 0 2.9-1.3 2.9-2.9 0-.2 0-.4-.1-.5l2.3-2.3c1.4 1.1 2.6 2.3 3.1 2.9-1.2 1.2-4.6 4.9-8.3 4.9z"/></svg>',hollowCandles:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" width="26" height="26"><path d="M16 3v3h-2v12h2v5h1v-5h2V6h-2V3h-1zM9 4v5H7v11h2v3h1v-3h2V9h-2V4H9zm6 3h3v10h-3V7zm-7 3h3v9H8v-9z"/></svg>',"i-in-circle":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22" width="22px" height="22px"><g fill-rule="evenodd"><path d="M12 16h-2v-6h2v6zm0-8h-2V6h2v2z"/><path d="M11.016.25C5.09.25.282 5.06.282 10.984c0 5.925 4.81 10.734 10.734 10.734 5.925 0 10.734-4.81 10.734-10.734S16.94.25 11.016.25zm0 1.5c5.096 0 9.234 4.138 9.234 9.234s-4.138 9.234-9.234 9.234-9.234-4.138-9.234-9.234S5.92 1.75 11.016 1.75z"/></g></svg>',indicators:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 17" width="17" height="17"><path d="M16 0a1 1 0 0 0-1 1 1 1 0 0 0 .127.484L13.017 5A1 1 0 0 0 13 5a1 1 0 0 0-.258.035L10.965 3.26A1 1 0 0 0 11 3a1 1 0 0 0-1-1 1 1 0 0 0-1 1 1 1 0 0 0 .082.393L7.12 6.008a1 1 0 0 0-.12-.01 1 1 0 0 0-.44.104l-1.564-1.04A1 1 0 0 0 5 4.998a1 1 0 0 0-1-1 1 1 0 0 0-1 1 1 1 0 0 0 .002.066l-1.56 1.04A1 1 0 0 0 1 5.998a1 1 0 0 0-1 1 1 1 0 0 0 1 1 1 1 0 0 0 1-1 1 1 0 0 0-.002-.064l1.56-1.04A1 1 0 0 0 4 6a1 1 0 0 0 .44-.103l1.564 1.04A1 1 0 0 0 6 7a1 1 0 0 0 1 1 1 1 0 0 0 1-1 1 1 0 0 0-.082-.39l1.965-2.62A1 1 0 0 0 10 4a1 1 0 0 0 .258-.035l1.777 1.777A1 1 0 0 0 12 6a1 1 0 0 0 1 1 1 1 0 0 0 1-1 1 1 0 0 0-.127-.482L15.983 2A1 1 0 0 0 16 2a1 1 0 0 0 1-1 1 1 0 0 0-1-1zm-1 5v10h2V5h-2zM9 7v8h2V7H9zM3 9v6h2V9H3zm9 1v5h2v-5h-2zM0 11v4h2v-4H0zm6 0v4h2v-4H6z"/></svg>',kagi:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" width="26" height="26"><path d="M7 4v17H5v-4H4v5h4V6h2v11h8l-.076-7H20v10h3V7h-8v7h-2V4z"/></svg>',"l-in-circle":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 11" width="11" height="11"><g fill-rule="evenodd"><path d="M3.905 8.25V2.63H4.9v4.734h2.54v.886H3.906z"/><path d="M5.5 0A5.502 5.502 0 0 0 0 5.5C0 8.536 2.465 11 5.5 11 8.536 11 11 8.535 11 5.5S8.535 0 5.5 0zm0 1C7.983 1 10 3.018 10 5.5 10 7.983 7.982 10 5.5 10A4.502 4.502 0 0 1 1 5.5C1 3.017 3.018 1 5.5 1z"/></g></svg>',"large-slider-handle":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><g transform="translate(0 -1032.362)"><circle fill="#fff" cx="10" cy="1042.362" r="8"/><path fill="#aaafb9" d="M10 1033.362c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9-4.03-9-9-9zm0 1.125c4.35 0 7.875 3.526 7.875 7.875 0 4.35-3.526 7.875-7.875 7.875-4.35 0-7.875-3.526-7.875-7.875 0-4.35 3.526-7.875 7.875-7.875zm0 5.875a2 2 0 0 0-2 2 2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2z"/></g></svg>',"layout-1":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29.000121 23.00011" width="29" height="23"><path d="M6 3v17h17V3H6zm1 1h15v15H7V4z"/><path d="M7 4h15v15H7z" opacity=".2"/></svg>',"layout-10":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29.000121 23.00011" width="29" height="23"><path d="M7 19h15v-6H7v6zm0-9h6V4H7v6zm9 0h6V4h-6v6z" opacity=".2"/><path d="M6 20h17v-8H6v8zm0-9h8V3H6v8zm1 8v-6h15v6H7zm0-9V4h6v6H7zm8 1h8V3h-8v8zm1-1V4h6v6h-6z"/></svg>',"layout-2":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29.000121 23.00011" width="29" height="23"><path d="M6 4h7v15H6zm10 0h7v15h-7z" opacity=".2"/><path d="M5 3v17h9V3H5zm1 1h7v15H6V4zm9-1v17h9V3h-9zm1 1h7v15h-7V4z"/></svg>',"layout-3":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29.000121 23.00011" width="29" height="23"><path d="M7 20v-7h15v7zm0-10V3h15v7z" opacity=".2"/><path d="M6 21h17v-9H6v9zm1-1v-7h15v7H7zm-1-9h17V2H6v9zm1-1V3h15v7H7z"/></svg>',"layout-4":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29.000121 23.00011" width="29" height="23"><path d="M7 4h15v3H7zm0 6h15v3H7zm0 6h15v3H7z" opacity=".2"/><path d="M6 3v5h17V3H6zm1 1h15v3H7V4zM6 9v5h17V9H6zm1 1h15v3H7v-3zm-1 5v5h17v-5H6zm1 1h15v3H7v-3z"/></svg>',"layout-5":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29.000121 23.00011" width="29" height="23"><path d="M7 4v15h3V4H7zm6 0v15h3V4h-3zm6 0v15h3V4h-3z" opacity=".2"/><path d="M6 3v17h5V3H6zm6 0v17h5V3h-5zm6 0v17h5V3h-5zM7 4h3v15H7V4zm6 0h3v15h-3V4zm6 0h3v15h-3V4z"/></svg>',"layout-6":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29.000121 23.00011" width="29" height="23"><path d="M7 4v15h6V4H7zm9 0v6h6V4h-6zm0 9v6h6v-6h-6z" opacity=".2"/><path d="M6 3v17h8V3H6zm9 0v8h8V3h-8zM7 4h6v15H7V4zm9 0h6v6h-6V4zm-1 8v8h8v-8h-8zm1 1h6v6h-6v-6z"/></svg>',"layout-7":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29.000121 23.00011" width="29" height="23"><path d="M7 4v6h6V4H7zm9 0v6h6V4h-6zm-9 9v6h6v-6H7zm9 0v6h6v-6h-6z" opacity=".2"/><path d="M6 3v8h8V3H6zm9 0v8h8V3h-8zM7 4h6v6H7V4zm9 0h6v6h-6V4zM6 12v8h8v-8H6zm9 0v8h8v-8h-8zm-8 1h6v6H7v-6zm9 0h6v6h-6v-6z"/></svg>',"layout-8":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29.000121 23.00011" width="29" height="23"><path d="M7 4v6h3V4H7zm6 0v6h3V4h-3zm6 0v6h3V4h-3zM7 13v6h3v-6H7zm6 0v6h3v-6h-3zm6 0v6h3v-6h-3z" opacity=".2"/><path d="M6 3v8h5V3H6zm6 0v8h5V3h-5zm6 0v8h5V3h-5zM7 4h3v6H7V4zm6 0h3v6h-3V4zm6 0h3v6h-3V4zM6 12v8h5v-8H6zm6 0v8h5v-8h-5zm6 0v8h5v-8h-5zM7 13h3v6H7v-6zm6 0h3v6h-3v-6zm6 0h3v6h-3v-6z"/></svg>',"layout-9":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29.000121 23.00011" width="29" height="23"><path d="M7 4v6h3V4H7zm4 0v6h3V4h-3zm4 0v6h3V4h-3zm4 0v6h3V4h-3zM7 13v6h3v-6H7zm4 0v6h3v-6h-3zm4 0v6h3v-6h-3zm4 0v6h3v-6h-3z" opacity=".2"/><path d="M6 3v8h17V3H6zm1 1h3v6H7V4zm4 0h3v6h-3V4zm4 0h3v6h-3V4zm4 0h3v6h-3V4zM6 12v8h17v-8H6zm1 1h3v6H7v-6zm4 0h3v6h-3v-6zm4 0h3v6h-3v-6zm4 0h3v6h-3v-6z"/></svg>',left:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="-80 -25 140 140"><path fill-rule="evenodd" clip-rule="evenodd" d="M10 12L-.7.7-41 43.2l.1.1-.1.1L-.7 85.9l10-10.6-29.7-31.2z"/></svg>',"legend-delete":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="-2.4 120.9 14 14" width="14" height="14" enable-background="new -2.4 120.9 600 600"><path d="M-2.4 120.9v14h14v-14zm3.34 2.123l3.66 3.66 3.66-3.66 1.217 1.22-3.66 3.658 3.66 3.66-1.22 1.22-3.658-3.66-3.66 3.66-1.22-1.22 3.66-3.66-3.66-3.66z"/></svg>',"legend-down":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" width="14" height="14"><path d="M14 14V0H0v14zm-7-2L4.2 9H6V3h2v6h1.8z"/></svg>',"legend-maximize":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" width="14" height="14"><path d="M0 0v14h14V0zm7 1l2.8 3H8v2.5H6V4H4.2zM6 7.5h2V10h1.8L7 13l-2.8-3H6z"/></svg>',"legend-restore":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" width="14" height="14"><path d="M0 0v14h14V0H0zm6 1.5h2V4h1.8L7 7l2.8 3H8v2.5H6V10H4.2L7 7 4.2 4H6V1.5z"/></svg>',"legend-sourcecode":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="-2.4 120.9 14 14" width="14" height="14" enable-background="new -2.4 120.9 600 600"><path d="M-2.4 120.9v14h14v-14zm4.833 2.042h1.084v1.083H2.433c-.143 0-.18.027-.24.09-.063.062-.135.19-.187.365-.103.353-.114-.147-.114.17 0 .84.01 1.425-.157 2-.127.44-.4.836-.76 1.25.36.413.633.81.76 1.248.167.575.157 1.16.157 2.002 0 .317.01-.185.114.168.052.176.124.305.186.368s.098.09.24.09h1.085v1.082H2.433c-.398 0-.768-.166-1.01-.41-.244-.245-.372-.54-.456-.826-.167-.57-.16-.155-.16-.472 0-.84-.01-1.34-.113-1.7-.09-.31-.328-.612-.7-1.008h-.81v-1.084h.81c.372-.397.61-.7.7-1.01.104-.358.114-.857.114-1.698 0-.317-.008.1.16-.472.083-.286.21-.583.454-.828.242-.244.613-.408 1.01-.408zm3.25 0h1.084c.398 0 .768.164 1.01.408.244.245.374.542.458.828.168.57.157.155.157.472 0 .84.01 1.34.114 1.7.09.31.328.61.7 1.008h.81v1.084h-.81c-.372.397-.61.7-.7 1.01-.104.358-.114.857-.114 1.698 0 .317.01-.1-.157.472-.084.286-.214.58-.457.826-.243.244-.613.41-1.01.41H5.682v-1.083h1.084c.143 0 .18-.026.24-.09.063-.062.138-.19.19-.367.103-.353.11.15.11-.168 0-.84-.01-1.427.158-2.002.127-.44.4-.835.76-1.248-.36-.414-.633-.81-.76-1.25-.167-.575-.157-1.16-.157-2 0-.317-.008.183-.112-.17-.05-.176-.126-.303-.188-.366s-.098-.09-.24-.09H5.682v-1.082z"/></svg>',"legend-up":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" width="14" height="14"><path d="M0 0v14h14V0zm7 2l2.8 3H8v6H6V5H4.2z"/></svg>',"line-dashed":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32.000001 24.999999" width="32" height="25" enable-background="new 0 0 595.3 841.9"><path d="M5 12v1h3v-1H5zm4 0v1h3v-1H9zm4 0v1h3v-1h-3zm4 0v1h3v-1h-3zm4 0v1h3v-1h-3zm4 0v1h3v-1h-3z"/></svg>',"line-dotted":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32.000001 24.999999" width="32" height="25" enable-background="new 0 0 595.3 841.9"><path d="M5 12v1h1v-1H5zm2 0v1h1v-1H7zm2 0v1h1v-1H9zm2 0v1h1v-1h-1zm2 0v1h1v-1h-1zm2 0v1h1v-1h-1zm2 0v1h1v-1h-1zm2 0v1h1v-1h-1zm2 0v1h1v-1h-1zm2 0v1h1v-1h-1zm2 0v1h1v-1h-1z"/></svg>',"line-left-arrow":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32.000001 24.999999" width="32" height="25" enable-background="new 0 0 595.3 841.9"><path d="M6.867 10.36L5 12.48l1.867 2.122V13H27v-1H6.867v-1.64z"/></svg>',"line-left-extend":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32.000001 24.999999" width="32" height="25" enable-background="new 0 0 595.3 841.9"><path d="M16 11v1H5v1h11v1h3v-1h5v1h3v-3h-3v1h-5v-1h-3zm1 1h1v1h-1v-1zm8 0h1v1h-1v-1z"/></svg>',"line-left-normal":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32.000001 24.999999" width="32" height="25" enable-background="new 0 0 595.3 841.9"><path d="M5 11v3h3v-1h19v-1H8v-1H5zm1 1h1v1H6v-1z"/></svg>',"line-right-arrow":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32.000001 24.999999" width="32" height="25" enable-background="new 0 0 595.3 841.9"><path d="M25.133 10.36L27 12.48l-1.867 2.122V13H5v-1h20.133v-1.64z"/></svg>',"line-right-extend":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32.000001 24.999999" width="32" height="25" enable-background="new 0 0 595.3 841.9"><path d="M16 11v1h11v1H16v1h-3v-1H8v1H5v-3h3v1h5v-1h3zm-1 1h-1v1h1v-1zm-8 0H6v1h1v-1z"/></svg>',"line-right-normal":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32.000001 24.999999" width="32" height="25" enable-background="new 0 0 595.3 841.9"><path d="M27 11v3h-3v-1H5v-1h19v-1h3zm-1 1h-1v1h1v-1z"/></svg>',"line-width-1":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32.000001 24.999999" width="32" height="25" enable-background="new 0 0 595.3 841.9"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 13h22v-1H5v1z"/></svg>',"line-width-2":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32.000001 24.999999" width="32" height="25" enable-background="new 0 0 595.3 841.9"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 14h22v-2H5v2z"/></svg>',"line-width-3":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32.000001 24.999999" width="32" height="25" enable-background="new 0 0 595.3 841.9"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 14h22v-3H5v3z"/></svg>',"line-width-4":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32.000001 24.999999" width="32" height="25" enable-background="new 0 0 595.3 841.9"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 15h22v-4H5v4z"/></svg>',line:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M142.5 447.4c-102.74 102.74-83.44 83.44 0 0m399-186.2l-70.9 94.6H370.1l-136 159.6-91.6-112.3-38.5 41.4L6.5 542l41.4 41.4 94.6-94.6 91.6 112.3 162.6-186.2h103.5l88.7-118.2z"/></svg>',lineBreak:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" width="26" height="26"><path d="M12 2v9h3V2h-3zm3 9v12h3V11h-3zm-3 0H9v9h3v-9zm1-8h1.05v6.95H13V3zm-3 9h1v7h-1v-7z"/></svg>',"linetool-bukkit":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 14" width="16" height="16"><path d="M5.75 5.75c.75.75 1.75-.25 1-1L2.25.25c-.75-.75-1.75.25-1 1zM6.5.5l-6 6c-.7.7-.7 2.3 0 3l4 4c.7.7 2.3.7 3 0l6-6zm0 2L11 7H2z"/><path fill-opacity=".5" d="M14 8.5c2.5 2.5 3 5.5 0 5.5s-2.5-3 0-5.5z"/></svg>',"linetool-clone":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path d="M0 0v11h6v5h11V5h-6V0H0zm2 2h7v3H6v4H2V2zm6 5h1v2H8V7zm3 0h4v7H8v-3h3V7z"/></svg>',"linetool-layers":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path d="M0 0v11h6v5h11V5h-6V0zm11 7h4v7H8v-3h3z"/></svg>',"linetool-visibility":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 10" width="12" height="10"><path d="M6 0C2.5 0 0 3.75 0 5s2.5 5 6 5 6-3.75 6-5-2.5-5-6-5zm0 1.75c1.75 0 3.25 1.5 3.25 3.25S7.75 8.25 6 8.25 2.75 6.75 2.75 5 4.25 1.75 6 1.75zM6 3.7c-.75 0-1.3.55-1.3 1.3S5.25 6.3 6 6.3 7.3 5.75 7.3 5 6.75 3.7 6 3.7z"/></svg>',link:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 14" width="30" height="14"><path d="M10.43 8.683L9.345 8.68c-.943-.005-1.712-.774-1.716-1.717-.005-.452.17-.877.49-1.195.32-.32.742-.493 1.194-.492l4.002.016c.83.004 2.22.18 2.225 1.316.003.522.428.943.95.942.52-.002.943-.427.94-.95-.006-1.932-1.62-3.188-4.106-3.198L9.32 3.386c-.96-.003-1.86.368-2.54 1.045-.676.68-1.047 1.58-1.043 2.54.003.99.41 1.89 1.06 2.54.652.65 1.55 1.058 2.54 1.06l1.086.006c.522.002.947-.42.948-.942.003-.52-.42-.946-.94-.947zm13.832-1.655c-.008-2.076-1.41-3.59-3.33-3.597h-1.357c-.522-.003-.947.42-.948.94-.002.52.42.947.94.948l1.356.006c.996.003 1.445.863 1.448 1.714.006.453-.17.878-.49 1.196-.315.32-.74.493-1.193.492l-4.27-.017c-1.952-.01-1.955-.925-1.957-1.316-.003-.522-.427-.943-.95-.942-.522.004-.944.43-.942.95.004.897.296 1.63.834 2.17.66.66 1.69 1.024 3.01 1.03l4.27.016c.96.003 1.86-.368 2.54-1.046.675-.678 1.046-1.58 1.043-2.54z"/></svg>',list:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 17"><g stroke="#cdbd28" stroke-linecap="round" stroke-width="0"><path d="M0 13h2v2H0zM3 13h13v2H3zM0 9h2v2H0zM3 5h13v2H3zM0 4.998h2v2H0zM3 9h13v2H3zM0 1h2v2H0zM3 1h13v2H3z"/></g></svg>',lock:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 9 12"><path d="M4 0C2.347 0 1 1.347 1 3v2H.3c-.165 0-.3.135-.3.3v6.4c0 .165.135.3.3.3h8.4c.165 0 .3-.135.3-.3V5.3c0-.165-.135-.3-.3-.3H8V3c0-1.653-1.347-3-3-3H4zm0 1h1c1.117 0 2 .883 2 2v2H2V3c0-1.117.883-2 2-2z"/></svg>',lockAllDrawings:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" enable-background="new 0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" d="M20 13h-1v-1.5C19 9 17 7 14.5 7S10 9 10 11.5V13H9c-.6 0-1 .4-1 1v8c0 .6.4 1 1 1h11c.6 0 1-.4 1-1v-8c0-.6-.4-1-1-1zm-8-.9c0-1.7 1.1-3.1 2.5-3.1s2.5 1.4 2.5 3.1v.9h-5v-.9z"/></svg>',magnet:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" enable-background="new 0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" d="M22 14c-.3-3.9-3.5-7-7.5-7S7.3 10.1 7 14v9h5v-9h.1c.2-1.1 1.2-2 2.4-2s2.2.9 2.4 2h.1v9h5v-9zm-11 8H8v-4h3v4zm10 0h-3v-4h3v4z"/></svg>',maximize:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 260.9 586.29997" width="260.9" height="586.3" enable-background="new 0 0 595.3 841.9"><path fill-rule="evenodd" clip-rule="evenodd" d="M163 325.7H97.9v130.2H.2v32.6h32.6v32.6h32.6v32.6H98v32.6h65.1v-32.6h32.6v-32.6h32.6v-32.6h32.6v-32.6h-97.7V325.7zm65.1-227.9V65.2h-32.6V32.6h-32.6V0H97.8v32.6H65.2v32.6H32.6v32.6H0v32.6h97.7v130.2h65.1V130.3h97.7V97.7h-32.4z"/></svg>',measure:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="30" height="30"><path d="M15 6v2h-1v6h1v2h1v-2h1V8h-1V6zm5 1v2h-1v6h1v2h1v-2h1V9h-1V7zM4 8v16h23v-5H9V8zm1 1h3v2H6v1h2v2H6v1h2v2H6v1h2v1.293l-3 3zm3.707 11H11v2h1v-2h2v2h1v-2h2v2h1v-2h2v2h1v-2h2v2h1v-2h2v3H5.707z"/></svg>',mentios:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.888672 15.336914" width="14.889" height="15.337" enable-background="new 0 0 32 32"><path d="M14.062 7.54q0 1.085-.32 2.1-.313 1.017-.9 1.853H9.406l-.21-.907q-.58.47-1.11.72-.53.25-1.22.25-1.31 0-2.1-.993-.782-.992-.782-2.773 0-1.774.96-2.83.962-1.053 2.298-1.053.572 0 1.01.133.437.125.944.382v-.375h1.243v6.578h1.89q.33-.585.49-1.46.17-.883.17-1.58 0-1.28-.36-2.327-.35-1.047-1.04-1.797-.686-.75-1.7-1.14-1.014-.41-2.3-.41-1.25 0-2.29.457-1.03.454-1.775 1.22-.75.765-1.18 1.836-.42 1.06-.42 2.265 0 1.29.402 2.36.404 1.063 1.146 1.82.775.79 1.814 1.188 1.04.41 2.267.41.67 0 1.383-.085.72-.086 1.376-.274v1.11q-.76.163-1.416.217-.656.06-1.35.06-1.454 0-2.697-.5-1.242-.49-2.132-1.38-.9-.898-1.4-2.156-.5-1.26-.5-2.78 0-1.448.526-2.69.525-1.25 1.43-2.164.908-.914 2.15-1.438 1.244-.53 2.66-.53 1.53 0 2.733.484 1.2.484 2.03 1.36.83.874 1.26 2.11.445 1.225.445 2.733zM9.18 9.532V5.485q-.493-.227-.884-.32-.39-.102-.836-.102-1.008 0-1.578.703-.57.703-.57 2 0 1.274.453 1.93.453.648 1.414.648.52 0 1.04-.242t.95-.57z" font-family="Arial-BoldMT" font-size="16"/></svg>',
minus:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 120"><path fill-rule="evenodd" clip-rule="evenodd" d="M28 50h65v17H28z"/></svg>',pencil:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path fill="#B8BCC2" fill-rule="evenodd" clip-rule="evenodd" d="M465.5 453.5L220.2 209.1 89.6 340.3 62 313.9l131.7-131.2-45.8-45.6c-14.6-14.6-38.3-14.6-52.9 0l-79.4 79.1C1 230.8 1 254.4 15.6 269l317.6 316.3c14.6 14.6 64.8 59.6 79.4 45l98.1-97.7c14.6-14.6-30.6-64.6-45.2-79.1zm68.6 107l-93.6 93.2 149.7 57.1-56.1-150.3z"/></svg>',pencil2:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40.000001 33.999999" width="40" height="34" enable-background="new 0 0 595.3 841.9"><g class="bg"><path stroke-miterlimit="10" stroke-width="20" d="M0 0v34h40V0H0zm1 29h38v4H1v-4z"/></g><g class="icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M24.335 15.167l-6.327-6.312-3.367 3.39-.71-.683 3.4-3.39-1.18-1.177c-.38-.378-.99-.378-1.36 0l-2.05 2.043c-.38.377-.38.986 0 1.364l8.19 8.17c.38.378 1.67 1.54 2.05 1.163l2.53-2.524c.38-.37-.79-1.66-1.16-2.04zm1.77 2.764l-2.415 2.41 3.86 1.48-1.446-3.88z"/></g></svg>',"plus-bolder":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 17"><path d="M7 2h3v13H7M2 7h13v3H2z"/></svg>',"plus-note":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="32" height="32"><path stroke-width="13" d="M13 4v9H4v6h9v9h6v-9h9v-6h-9V4h-6z"/></svg>',plus:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 140 140"><path fill-rule="evenodd" clip-rule="evenodd" d="M112 60H78V26H61v34H27v17h34v34h17V77h34z"/></svg>',pointFigure:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" width="26" height="26"><path d="M4 4v1h1v1h1v1H5v1H4v1h2V8h1v1h2V8H8V7H7V6h1V5h1V4H7v1H6V4H4zm12 0v1h1v1h1v1h-1v1h-1v1h2V8h1v1h2V8h-1V7h-1V6h1V5h1V4h-2v1h-1V4h-2zM4 10v1h1v1h1v1H5v1H4v1h2v-1h1v1h2v-1H8v-1H7v-1h1v-1h1v-1H7v1H6v-1H4zm7 0v1h-1v3h1v1h3v-1h1v-3h-1v-1h-3zm5 0v1h1v1h1v1h-1v1h-1v1h2v-1h1v1h2v-1h-1v-1h-1v-1h1v-1h1v-1h-2v1h-1v-1h-2zm-4 1h1v1h1v1h-1v1h-1v-1h-1v-1h1v-1zm-8 5v1h1v1h1v1H5v1H4v1h2v-1h1v1h2v-1H8v-1H7v-1h1v-1h1v-1H7v1H6v-1H4zm7 0v1h-1v3h1v1h3v-1h1v-3h-1v-1h-3zm1 1h1v1h1v1h-1v1h-1v-1h-1v-1h1v-1z"/></svg>',properties:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="-2.4 120.9 600 600" enable-background="new -2.4 120.9 600 600"><path d="M594 473.5V368.8h-76c-5.7-23.8-15.2-46.4-27.5-66.4l53.8-53.8-73.9-73.9-53.8 53.4c-20.6-12.8-42.7-21.8-66.4-27.5v-75.9H245.5v75.9c-23.8 5.7-46.4 15.2-66.4 27.5l-53.8-53.8-73.9 73.9 53.4 53.8C92 322.6 83 344.7 77.3 368.4h-76V473h75.9c5.7 23.8 15.2 46.4 27.5 66.4L51 593.3l73.9 73.9 53.8-53.4c20.6 12.8 42.7 21.8 66.4 27.5v75.9h104.6v-75.9c23.8-5.7 46.4-15.2 66.4-27.5l53.8 53.8 73.9-73.9-53.4-53.8c12.8-20.6 21.8-42.7 27.5-66.4H594zm-296.4 69.7c-67.3 0-122.3-54.6-122.3-122.3 0-67.3 54.6-122.3 122.3-122.3 67.3 0 122.3 54.6 122.3 122.3-.4 67.4-54.9 122.3-122.3 122.3z"/></svg>',"published-timeline":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 553.40004 587.49998" width="553.4" height="587.5" enable-background="new 0 0 595.3 841.9"><path d="M476.1 83.5l-21.6-21.6-40.2 46.4 21.6 21.6 40.2-46.4zM293.7 0h-30.9v61.8h30.9V0zm259.7 278.3l-3.1-30.9-61.8 3.1 3.1 30.9 61.8-3.1zM142.2 108.2L98.9 61.8 77.3 83.5l43.3 46.4 21.6-21.7zM64.9 454.5l21.6 21.6 46.4-43.3-21.6-21.6-46.4 43.3zM278.2 92.8c-92.8 0-170.1 83.5-170.1 185.5 0 71.1 37.1 132.9 92.8 163.9v83.5c0 34 27.8 61.8 61.8 61.8h30.9c34 0 61.8-27.8 61.8-61.8v-83.5c55.7-30.9 92.8-92.8 92.8-163.9.1-102-77.2-185.5-170-185.5zm0 327.7c-71.1 0-129.9-64.9-129.9-142.2 0-80.4 58.7-142.2 129.9-142.2S408.1 201 408.1 278.3c0 80.4-58.7 142.2-129.9 142.2zM0 281.4l61.8 3.1 3.1-30.9-61.8-3.1L0 281.4zm429.7 151.5l46.4 40.2 21.6-24.7-49.5-40.2-18.5 24.7z"/></svg>',redo:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15"><path d="M7.5 8.2v3.2L15 6.5 7.5 1.7V5S0 4.1 0 13.4c0-.1 1.7-5.2 7.5-5.2z"/></svg>',removeAllDrawingTools:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M12 7v1H9v2h13V8h-3V7h-7zm-2 4v12h11V11H10z"/></svg>',removenote:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 18" width="14" height="18"><path fill-rule="evenodd" d="M1 16c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V4H1v12zM14 1h-3.5l-1-1h-5l-1 1H0v2h14V1z"/></svg>',renko:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" width="26" height="26"><path d="M12 4v6h3V4h-3zm3 6v6h3v-6h-3zm3 6v6h3v-6h-3zm-6-6H9v6h3v-6zm-3 6H6v6h3v-6zm4-11h1v4h-1V5zm-3 6h1v4h-1v-4zm-3 6h1v4H7v-4z"/></svg>',restore:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="-58 -18 120 120"><path fill-rule="evenodd" clip-rule="evenodd" d="M31 13C23.4 5.3 12.8.5 1.1.5c-23.3 0-42.3 19-42.3 42.5s18.9 42.5 42.3 42.5c13.8 0 26-6.6 33.7-16.9l-16.5-1.8C13.5 70.4 7.5 72.5 1 72.5c-16.2 0-29.3-13.2-29.3-29.4S-15.2 13.7 1 13.7c8.1 0 15.4 3.3 20.7 8.6l-10.9 11h32.5V.5L31 13z"/></svg>',"right-stop":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.8 13.4" enable-background="new 0 0 14.8 13.4"><path d="M8 6.7L1.7 0 .1 1.7l4.7 4.9-4.8 5 1.7 1.8L8 6.7zm6.8 0L8.4 0 6.8 1.7l4.7 4.9-4.8 5 1.7 1.8 6.4-6.7z"/></svg>',right:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="-90 -55 140 140"><path fill-rule="evenodd" clip-rule="evenodd" d="M10 12l-40.3-42.5-10 10.6 29.7 31.2L-41 43.4l10.7 11.3L10 12.2l-.1-.1z"/></svg>',"s-in-circle":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 11" width="11" height="11"><g fill-rule="evenodd"><path d="M3.798 7.94l.37-.895c.392.276.78.415 1.162.415.585 0 .878-.205.878-.613a.872.872 0 0 0-.206-.55c-.138-.173-.423-.37-.853-.585-.432-.216-.722-.393-.872-.534a1.425 1.425 0 0 1-.345-.495 1.63 1.63 0 0 1-.12-.638c0-.435.16-.795.477-1.082.318-.284.727-.428 1.226-.428.65 0 1.126.12 1.43.364l-.302.858a1.87 1.87 0 0 0-1.108-.376c-.23 0-.41.06-.536.183a.627.627 0 0 0-.19.474c0 .32.358.655 1.07 1.003.377.184.65.353.814.508.167.156.293.336.38.542.087.206.132.436.132.69 0 .454-.18.828-.54 1.122-.36.295-.84.442-1.446.442A2.57 2.57 0 0 1 3.8 7.94H3.8z"/><path d="M5.5 0A5.502 5.502 0 0 0 0 5.5C0 8.536 2.465 11 5.5 11 8.536 11 11 8.535 11 5.5S8.535 0 5.5 0zm0 1C7.983 1 10 3.018 10 5.5 10 7.983 7.982 10 5.5 10A4.502 4.502 0 0 1 1 5.5C1 3.017 3.018 1 5.5 1z"/></g></svg>',"script-editor":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21.000134 17.000158" width="21" height="17" enable-background="new 0 0 595.3 841.9"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.482 2.042L2.4 2.002c-.764 0-1.385.677-1.385 1.51v7.444c0 .03-.02.05-.05.05l-.88-.01c-.03 0-.05.02-.05.052l-.012.513c-.01.09-.155 1.6.414 2.31.196.25.454.36.764.36l3.53-.02h3.44c.38 0 .72-.16.99-.45.26-.29.41-.68.41-1.08V4.2c0-.556.02-.833.35-1.172.145-.154.228-.226.476-.226l.163-.76h-.063zM6.545 13.41c-.372 0-.724.01-1.83.02H1.398l.02-.01c-.124-.03-.403-.103-.496-.216-.3-.37-.196-.657-.196-1.12 0-.112 0-.215.01-.286 0-.03.02-.04.052-.04.496 0 4.785.04 5.27.04.022 0 .042.02.053.04 0 0 .07 1.11.47 1.5.03.02.01.072-.03.072zM9.16 2.874c-.33.41-.33.75-.33 1.314v8.472c0 .113-.27.76-.62.77 0 0-.91.154-1.262-.842l-.03-.8c0-.175-.012-.75-.177-.75l-4.94-.04c-.03 0-.05-.022-.05-.053V3.5c0-.503.34-.75.62-.75 0 0 5.45.03 6.75.042.04 0 .06.05.04.082zm2.335 8.944l1.344-1.335c.1-.103.1-.277 0-.39l-.23-.226c-.11-.103-.28-.103-.39 0l-1.76 1.746c-.06.06-.09.144-.09.226 0 .06.02.13.07.18l1.79 1.77c.1.1.26.1.36 0l.26-.26c.1-.11.1-.26 0-.36l-1.36-1.37zm5.054-2.896l-3.03 5.67.77.41 3.03-5.67-.78-.41zm1.96 1.2l.26-.256c.1-.102.26-.102.36 0l1.79 1.777c.1.102.1.256 0 .36l-.26.256c-.11.1-.26.1-.36 0l-1.79-1.78c-.11-.1-.11-.27 0-.36zm.26 3.678l-.23-.227c-.11-.103-.11-.277 0-.39l1.75-1.746c.1-.102.28-.102.39 0l.226.226c.105.103.105.277 0 .39L19.16 13.8c-.113.102-.29.102-.392 0z"/></svg>',"scroll-to-upcoming":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path d="M10 1a8 8 0 0 0-7.844 6.47A1 1 0 0 1 3.02 7a1 1 0 0 1 .638.246l.494.432A6 6 0 0 1 10 3a6 6 0 0 1 6 6 6 6 0 0 1-6 6 6 6 0 0 1-3.867-1.412L4.62 14.91A8 8 0 0 0 10 17a8 8 0 0 0 8-8 8 8 0 0 0-8-8zm-.016 2.486A1 1 0 0 0 9 4.5V9a1 1 0 0 0 .293.707l2.5 2.5a1 1 0 1 0 1.414-1.414L11 8.586V4.5a1 1 0 0 0-1.016-1.014zM3.982 10.19A1 1 0 0 1 3 11h-.734a8 8 0 0 0 .324 1H3a1 1 0 0 1 .982.813l.864-.756a6 6 0 0 1-.686-1.71l-.178-.158z"/><path d="M0 13h3v2l4-3.5L3 8v2H0z"/></svg>',showObjectsTree:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="30" height="30"><path d="M18.827 8.17c-1.227.817-.993 1.49-.993 2.318 0 .703-.29 1.49-.62 1.778-.33.29-.8.965-.8.965l1.168 1.25s.823-.52 1.038-.72c.414-.37 1.407-.66 2.193-.66 1.737 0 2.387-.54 2.454-2.49.017-.5-.07-1.63-.07-1.63l-.795.02c-.458 2.406-1.457 2.53-2.28 1.79-.823-.74-1.13-1.193.386-2.774l-.48-.626-1.2.79zM6.46 7.716c-.29.455 1.2 3.847 1.984 4.468.91.785 1.903.496 2.896-.828.827-1.117.827-1.158.083-1.985-.414-.45-1.158-.82-1.696-.82s-1.034-.17-1.157-.38c-.332-.49-1.863-.86-2.11-.45zm3.983 5.846c0 .372 4.95 4.826 8.467 7.68 2.192 1.78 3.268 2.027 2.77.62-.454-1.24-7.983-10.328-8.81-10.576-.618 1.114-1.67 1.914-2.427 2.276zm-.468 5.778C7.74 21.367 7.74 21.367 8.57 22.194c.826.827.826.827 3.018-1.406 1.383-1.414 2.168-2.514 2.168-2.514l-1.272-1.21s-1.268 1.118-2.51 2.276z"/></svg>',small_arrow_right:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 3.0000003 6" width="3" height="6"><path d="M0 0c-.04 1.99 0 4.61 0 6l3-3z"/></svg>',smile:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 586.70002 595.19999" width="586.7" height="595.2" enable-background="new 0 0 595.3 841.9"><path d="M293.4 0C131.8 0 0 131.8 0 297.6s131.8 297.6 293.4 297.6 293.3-131.8 293.3-297.6S454.9 0 293.4 0zm68 182.8h85v93.5h-85v-93.5zm-212.6 0h85v93.5h-85v-93.5zm148.8 306.1c-136 0-187.1-106.3-187.1-106.3h378.4s-55.2 106.3-191.3 106.3z"/></svg>',snapshot:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 11.5"><path d="M7.5 4.8c-1.1 0-1.9.9-1.9 1.9s.9 1.9 1.9 1.9c1.1 0 1.9-.9 1.9-1.9s-.9-1.9-1.9-1.9zM13 1.9h-2.2c0-1-.9-1.9-2-1.9H6.1C5 0 4.2.9 4.2 1.9H1.9c-1 0-1.9.9-1.9 2v5.7c0 1.1.9 1.9 1.9 1.9H13c1.1 0 1.9-.9 1.9-1.9V3.9c.1-1.1-.8-2-1.9-2zm-5.5 8.3C5.6 10.2 4 8.6 4 6.7s1.5-3.4 3.4-3.4 3.4 1.5 3.4 3.4c.1 1.9-1.4 3.5-3.3 3.5z"/></svg>',star:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 582.90004 554.7" width="582.9" height="554.7" enable-background="new 0 0 595.3 841.9"><path d="M438.2 353.7l32.1 201-176.9-96.5-180.8 96.5 32.1-201L0 209l201-28.1L293.4 0l88.5 180.9 201 28.1z"/></svg>',stocktwits:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.8 9.4"><path d="M3.9 4c-.7-.3-1.1-.5-1.3-.6L2.2 3c-.1-.1-.1-.3-.1-.5 0-.3.1-.5.3-.7.2-.2.5-.3.9-.3.3 0 .7 0 1 .1.3.2.7.4 1.2.5L6.2.6C5.7.4 5.2.2 4.8.1L3.4 0C2.3 0 1.5.2 1 .7S.1 1.8.1 2.6c0 .4.1.8.3 1.1s.4.6.7.8c.3.2.7.5 1.3.8l1.2.6c.2.2.4.3.5.4.1.1.2.3.2.5 0 .3-.1.6-.4.7-.2.2-.6.2-1 .2s-.8-.1-1.2-.2C1.2 7.5.6 7.3 0 7v1.8c.8.4 1.7.6 2.7.6 1.1 0 2-.2 2.6-.7.7-.5 1-1.2 1-2 0-.6-.2-1.1-.5-1.5-.4-.4-1-.8-1.9-1.2zM7 0v1.6h3.1v7.8h1.6V1.6h3.1V0H7z"/></svg>',strategy:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 8"><path fill="#595959" fill-rule="evenodd" d="M2.5 2L0 5h2v3h1V5h2zm5 4L5 3h2V0h1v3h2z"/></svg>',textnote:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" width="14" height="14"><path d="M11.976.506v.002c-.102.01-.195.048-.27.123l-.716.722 2.174 1.984.716-.716c.523-.523-1.19-2.184-1.904-2.114zM.254 3.22C0 3.436 0 4 0 4v9s.006.577.25.773C.532 14 1 14 1 14h9s.577.025.813-.21c.234-.235.187-.784.187-.784V6.13L10 7v6H1V4h6.514L8.66 3H1s-.455-.024-.746.22zm10.304-1.485l-7.59 7.233 2.078 2.125L12.75 3.75zM2.328 9.59l-.237.24L2 12l2.233-.09.238-.24z"/></svg>',"trading-connect":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 14"><circle cx="5" cy="7" r="3"/></svg>',"trading-options":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9"><path d="M540.7 372.3h-38.9c-4.9-24.3-14.6-43.7-24.3-63.2l24.3-24.3c19.4-19.4 19.4-48.6 0-68s-48.6-19.4-68 0l-24.3 24.3c-19.4-9.7-38.9-19.4-63.2-24.3v-38.9c0-29.2-19.4-48.6-48.6-48.6S249 148.8 249 177.9v38.9c-24.3 4.9-43.7 14.6-63.2 24.3l-24.3-24.3c-19.4-19.4-48.6-19.4-68 0s-19.4 48.6 0 68l24.3 24.3c-9.7 19.4-19.4 38.9-24.3 63.2H54.6C25.5 372.3 6 391.8 6 420.9s19.4 48.6 48.6 48.6h38.9c4.9 24.3 14.6 43.7 24.3 63.2L93.5 557c-19.4 19.4-19.4 48.6 0 68s48.6 19.4 68 0l24.3-24.3c19.4 9.7 38.9 19.4 63.2 24.3v39c0 29.2 19.4 48.6 48.6 48.6s48.6-19.4 48.6-48.6v-38.9c24.3-4.9 43.7-14.6 63.2-24.3l24.3 24.3c19.4 19.4 48.6 19.4 68 0s19.4-48.6 0-68l-24.3-24.3c9.7-19.4 19.4-38.9 24.3-63.2h38.9c29.2 0 48.6-19.4 48.6-48.6.1-29.2-19.4-48.7-48.5-48.7zM297.6 566.8c-82.6 0-145.8-63.2-145.8-145.8S215 275.1 297.6 275.1s145.8 63.2 145.8 145.8-63.1 145.9-145.8 145.9zm0-194.5c-29.2 0-48.6 19.4-48.6 48.6s19.4 48.6 48.6 48.6 48.6-19.4 48.6-48.6-19.4-48.6-48.6-48.6z"/></svg>',twitter:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 11.6"><path d="M15 1.4c-.3.1-1 .4-1.7.5.4-.2 1.1-1 1.3-1.6-.4.3-1.4.7-1.9.7-.6-.7-1.4-1-2.3-1-1.7 0-3.1 1.3-3.1 3 0 .2 0 .4.1.7C5.1 3.6 2.4 2.5.9.6 0 2.1.8 3.9 1.8 4.5c-.4 0-1 0-1.3-.3 0 1 .5 2.4 2.4 2.9-.4.2-1 .1-1.3.1.1.9 1.4 2 2.8 2-.6.5-2.3 1.4-4.4 1.1 1.4.8 3.1 1.3 4.8 1.3 5 0 8.8-3.9 8.6-8.6.5-.4 1.1-.9 1.6-1.6z"/></svg>',undo:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15"><path d="M15 13.4C15 4.1 7.5 5 7.5 5V1.7L0 6.5l7.5 4.9V8.2c5.8 0 7.5 5.1 7.5 5.2z"/></svg>',upload:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 18" width="26" height="18"><path d="M12 0C8.4 0 5.4 2.8 5.1 6.3 2 6.1.1 9 0 11.1 0 13.9 2.2 16 4.7 16H9v-1H4.7C2.8 15 1 13.3 1 11.2 1 9 3 6.7 6 7.4 6 3 9 1 12 1s3.7 1.2 5.1 2.9c1.5.1 3.3.6 4.2 1.7 1 1.5 1.2 2.6 1.2 4.2 1.4.4 2.5 1.5 2.5 2.7-.2 1.6-1.3 2.5-2.6 2.5H17v1h5.3c2.8 0 3.7-1.9 3.7-3.5s-1-3-2.5-3.4c0-1.6-.5-2.9-1.4-4.1-.9-1.2-2.7-2-4.5-2.1C16.3 1.2 14.3 0 12 0zm1 6l-6 6h3v5h6v-5h3l-6-6z"/></svg>',"zoom-out":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" enable-background="new 0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" d="M20.8 18.5c.7-1.2 1.2-2.5 1.2-4 0-4.1-3.4-7.5-7.5-7.5S7 10.4 7 14.5s3.4 7.5 7.5 7.5c1.5 0 2.9-.5 4.1-1.2l4.3 4.3 2.2-2.2-4.3-4.4zM14.5 20c-3 0-5.5-2.5-5.5-5.5S11.5 9 14.5 9s5.5 2.5 5.5 5.5-2.5 5.5-5.5 5.5zM11 15h7v-1h-7v1z"/></svg>',zoom:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" enable-background="new 0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" d="M13.95 9.95h-1v3h-3v1h3v3h1v-3h3v-1h-3v-3zm5.8 7.5c.7-1.2 1.2-2.5 1.2-4 0-4.1-3.4-7.5-7.5-7.5s-7.5 3.4-7.5 7.5 3.4 7.5 7.5 7.5c1.5 0 2.9-.5 4.1-1.2l4.3 4.3 2.2-2.2-4.3-4.4zm-6.3 1.5c-3 0-5.5-2.5-5.5-5.5s2.5-5.5 5.5-5.5 5.5 2.5 5.5 5.5-2.5 5.5-5.5 5.5z"/></svg>'})}).call(e,i(26))},,,function(t,e,i){(function(t){t.register({"FXCMLogo-source":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2083 1043" preserveAspectRatio="xMidYMid"><path d="M1605.536 591.944V471.92c0-11.572-10.316-21.268-23.262-22.368-.676 0-1.506-.147-2.32-.147h-13.907c-2.345 0-4.673.42-6.88.952v141.587h-51.45v-37.848h-.13V450.1c-2.215-.548-4.552-.825-6.888-.825h-14.17c-14.304 0-25.996 10.08-25.996 22.366v82.456h-.13v37.848h-52.566V457.577c0-27.915 17.058-50.707 37.983-50.707H1619.02c20.9 0 37.966 22.792 37.966 50.707v134.367h-51.45zm-259.374-1.398h-118.468c-19.67 0-35.898-16.286-35.898-36.03v-111.32c0-19.888 16.227-36.048 35.898-36.048h118.468c19.8 0 35.882 16.16 35.882 36.047v24.168h-44.423c-1.367-9.107-8.947-16.287-18.026-16.287h-60.25c-10.05 0-18.297 8.703-18.297 19.188v59.246c0 10.5 8.248 19.205 18.296 19.205h60.25c10.056 0 18.15-8.704 18.15-19.205v-1.805h44.3v26.812c0 19.743-16.08 36.03-35.88 36.03zm-215.623-.277l-44.168-65.72-45.262 65.72-53.37.702 62.986-93.638-62.987-90.607h55.304l43.882 63.83 43.478-63.41h52.68l-62.04 90.334 63.424 92.79h-53.93zM895.484 450.1c-17.457 0-35.475-1.67-44.973 3.326-7.304 3.857-6.88 13.386-6.47 23.89l122.03-.678v44.733l-120.787-.146-.558 70.72-53.933-.13v-139.49c0-14.527 4.266-24.166 10.332-31.64 6.037-7.46 13.756-12.563 27.92-13.388 34.257-1.672 103.45-.148 137.576-.148l-.138 42.952c-20.64 0-47.607.147-71 0zM580.992 686.003h-1.372c-56.404 0-106.62-28.316-137.027-71.415l129.183-148.896v119.894H733.01c-25.864 58.568-84.332 99.845-152.018 100.417zm8.256-232.172h-8.256l-156.98.42c25.046-61.607 85.448-105.24 155.608-105.24h1.372c57.65.404 108.412 30.37 138.265 75.402L589.247 568.05V453.83z" class="cls-1"/></svg>',FXCMLogo:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1432 536" preserveAspectRatio="xMidYMid" style="fill: #154B94;"><path d="M1281.524 341.94V221.918c0-11.572-10.316-21.268-23.262-22.368-.676 0-1.506-.148-2.32-.148h-13.907c-2.345 0-4.673.42-6.88.952V341.94h-51.45v-37.847h-.13V200.097c-2.215-.548-4.552-.825-6.888-.825h-14.17c-14.304 0-25.996 10.08-25.996 22.366v82.456h-.13v37.848h-52.565V207.574c0-27.915 17.058-50.707 37.983-50.707h173.2c20.9 0 37.966 22.792 37.966 50.707V341.94h-51.45zm-259.374-1.397H903.682c-19.67 0-35.898-16.286-35.898-36.03v-111.32c0-19.888 16.227-36.048 35.898-36.048h118.468c19.8 0 35.882 16.16 35.882 36.047v24.168h-44.423c-1.368-9.107-8.948-16.287-18.027-16.287h-60.25c-10.05 0-18.297 8.703-18.297 19.188v59.247c0 10.5 8.248 19.205 18.296 19.205h60.25c10.056 0 18.15-8.704 18.15-19.205v-1.805h44.3v26.812c0 19.743-16.08 36.03-35.88 36.03zm-215.623-.277l-44.168-65.72-45.263 65.72-53.37.702 62.986-93.638-62.987-90.607h55.304l43.882 63.83 43.478-63.41h52.68l-62.04 90.334 63.424 92.79h-53.93zm-235.055-140.17c-17.457 0-35.475-1.67-44.973 3.327-7.305 3.857-6.88 13.386-6.47 23.89l122.03-.678v44.733l-120.788-.146-.558 70.72-53.933-.13v-139.49c0-14.527 4.267-24.166 10.333-31.64 6.037-7.46 13.756-12.563 27.92-13.388 34.257-1.672 103.45-.148 137.576-.148l-.14 42.952c-20.64 0-47.606.147-71 0zM256.98 436h-1.372c-56.404 0-106.62-28.316-137.027-71.415L247.765 215.69v119.893h161.234C383.134 394.15 324.666 435.428 256.98 436zm8.256-232.172h-8.256l-156.98.42c25.046-61.607 85.448-105.24 155.608-105.24h1.372c57.65.404 108.412 30.37 138.265 75.402l-130.01 143.637v-114.22z" class="cls-1"/></svg>',MOEXLogo1:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 272.14624 99.683876" width="272.146" height="99.684"><defs><clipPath id="a"><path d="M0 79.747h217.717V0H0v79.747z"/></clipPath></defs><g><g><g clip-path="url(#a)" transform="matrix(1.25 0 0 -1.25 0 99.684)"><g><path fill="#e31f25" fill-rule="evenodd" d="M77.25 61.86c-2.15-2.597-3.01-6.323-2.954-10.732 1.593-.5 2.75-1.988 2.75-3.746 0-1.47-.81-2.753-2.01-3.425l.004-.016c1.338-9.528-.616-14.418-2.63-16.46-4.918-.134-7.5 1.917-7.745 6.156 3.116.852 4.455 2.167 5.673 4.064.98 1.526 1.306 3.61 1.428 5.997-1.5.552-2.57 1.994-2.57 3.685 0 1.76 1.157 3.247 2.75 3.747.205 3.987.885 8.102 3.437 11.546l-1.33.58c-.53.23-.77.846-.54 1.374.11.25.306.436.54.538l33.214 14.493c.276.12.576.112.833 0l33.215-14.49c.527-.23.77-.846.54-1.374-.11-.25-.307-.437-.54-.538L108.17 48.715c-.278-.12-.578-.112-.834 0L77.25 61.86zm55.4-4.254V45.288c0-4.278-10.652-10.523-23.79-10.523-13.14 0-23.793 6.245-23.793 10.523v11.37l22.27-10.12c.255-.11.555-.12.832 0l24.48 11.068z"/></g><g><path fill="#fff" d="M94.764 65.912l12.987 5.32c.693.284 1.485-.047 1.77-.74.09-.218.117-.447.092-.667h.002l-.27-4.165 11.71-.295c.54.014 1.06-.298 1.283-.825.293-.69-.028-1.485-.717-1.778l-14.146-6.043c-.223-.107-.666-.12-.93-.09-.744.085-1.28.76-1.194 1.503l.754 4.9-10.857.272c-.747.017-1.34.638-1.322 1.386.012.555.357 1.023.84 1.222zm11.962 2.36l-6.417-2.63 6.104.09.312 2.54zm2.448-4.947l-.456-3.127 7.708 3.18-7.252-.053z"/></g><g><path fill="#2b2b2a" fill-rule="evenodd" d="M4.855 6.075H1.22v15.187c0 .2-.062.353-.187.46-.124.108-.27.162-.436.162-.165 0-.307-.058-.423-.174-.116-.116-.174-.266-.174-.448V5.452c0-.398.2-.597.597-.597h9.735c.398 0 .597.2.597.598v15.81c0 .198-.06.352-.175.46-.116.107-.257.16-.423.16-.166 0-.312-.057-.436-.173-.124-.116-.187-.266-.187-.448V6.075H6.05v15.187c0 .2-.058.353-.175.46-.116.108-.257.162-.423.162-.166 0-.307-.058-.423-.174-.117-.116-.175-.266-.175-.448V6.075zm11.9 5.75l3.76 4.11c.116.115.174.256.174.422 0 .166-.063.31-.188.436-.124.124-.27.187-.435.187-.133 0-.283-.067-.45-.2l-5.028-5.552v5.18c0 .198-.063.347-.188.447-.124.1-.26.15-.41.15-.415 0-.623-.2-.623-.598V5.453c0-.183.062-.328.186-.436.125-.108.27-.162.436-.162.166 0 .307.05.423.15.116.1.174.248.174.448V9.41l1.32 1.47 3.634-5.75c.116-.184.282-.275.498-.275.166 0 .31.058.435.174.124.115.187.257.187.423 0 .115-.033.232-.1.348l-3.81 6.026zm13.643-4.53v7.294c0 .33-.062.643-.186.933-.125.29-.3.548-.523.772-.225.224-.482.398-.773.523-.29.124-.61.186-.958.186h-2.44c-.35 0-.67-.062-.96-.186-.29-.125-.544-.3-.76-.523-.215-.224-.385-.48-.51-.772-.124-.29-.186-.602-.186-.934V7.294c0-.697.228-1.278.684-1.743.457-.465 1.034-.697 1.73-.697h2.44c.697 0 1.278.232 1.743.697.466.465.698 1.046.698 1.743m-1.22 0c0-.35-.115-.64-.348-.872-.233-.232-.523-.348-.87-.348h-2.44c-.333 0-.615.116-.848.348-.232.233-.348.523-.348.872v7.294c0 .33.116.613.348.846.233.233.515.348.847.348h2.44c.347 0 .637-.115.87-.348.233-.233.348-.515.348-.847V7.294zm10.955-1.842v10.954c0 .398-.208.597-.622.597h-3.634c-.333 0-.532-.157-.598-.473l-2.44-10.928v-.15c0-.182.063-.327.187-.435.124-.108.27-.162.435-.162.316 0 .507.158.573.473l2.315 10.456h2.565V5.454c0-.184.062-.33.187-.437.124-.108.26-.162.41-.162.415 0 .623.2.623.598m8.514 1.842c0-.35-.116-.64-.348-.872-.234-.232-.524-.348-.872-.348h-2.44c-.332 0-.614.116-.847.348-.23.233-.347.523-.347.872v7.294c0 .33.116.613.348.846.234.233.516.348.848.348h3.66v-8.49zm2.042-1.27c-.25.083-.45.245-.6.486-.148.24-.223.503-.223.785v9.112c0 .398-.207.597-.622.597h-4.257c-.35 0-.668-.062-.96-.186-.29-.125-.543-.3-.758-.523-.216-.224-.386-.48-.51-.772-.125-.29-.187-.602-.187-.934V7.294c0-.697.228-1.278.684-1.743.457-.465 1.034-.697 1.73-.697h2.44c.73 0 1.337.274 1.818.82.183-.215.348-.372.498-.472.25-.2.44-.315.573-.348.05-.017.124-.025.223-.025.165 0 .307.062.422.187.117.124.175.27.175.436 0 .282-.15.473-.448.572m19.84-.572v15.81c0 .214-.053.39-.16.52-.11.134-.237.2-.387.2-.232 0-.423-.132-.572-.398l-4.356-7.045-4.332 7.045c-.166.266-.357.4-.573.4-.15 0-.28-.068-.387-.2-.107-.133-.16-.308-.16-.523V5.452c0-.182.057-.327.173-.435.116-.108.257-.162.423-.162.414 0 .622.2.622.598v13.642l3.71-6.05c.148-.248.323-.373.522-.373.2 0 .373.125.522.374l3.735 6.075V5.454c0-.183.063-.328.188-.436.124-.108.27-.162.436-.162.398 0 .597.2.597.598m9.736 1.842v7.294c0 .33-.063.643-.187.933-.126.29-.3.548-.524.772-.224.224-.48.398-.772.523-.29.124-.61.186-.958.186h-2.44c-.35 0-.668-.062-.96-.186-.29-.125-.542-.3-.758-.523-.215-.224-.386-.48-.51-.772-.125-.29-.187-.602-.187-.934V7.294c0-.697.23-1.278.686-1.743.456-.465 1.033-.697 1.73-.697h2.44c.697 0 1.278.232 1.742.697.465.465.698 1.046.698 1.743m-1.22 0c0-.35-.116-.64-.35-.872-.232-.232-.522-.348-.87-.348h-2.44c-.332 0-.614.116-.847.348-.233.233-.35.523-.35.872v7.294c0 .33.117.613.35.846.232.233.514.348.846.348h2.44c.348 0 .638-.115.87-.348.234-.233.35-.515.35-.847V7.294zm10.332-2.44c.2 0 .352.062.46.187.108.124.162.26.162.41 0 .415-.207.623-.622.623H85.12c-.332 0-.614.116-.846.348-.233.233-.35.523-.35.872v7.294c0 .33.117.613.35.846.232.233.514.348.846.348h4.258c.2 0 .352.063.46.187.108.125.162.27.162.437 0 .398-.207.597-.622.597H85.12c-.348 0-.668-.062-.958-.186-.29-.125-.544-.3-.76-.523-.215-.224-.385-.48-.51-.772-.124-.29-.187-.602-.187-.934V7.294c0-.697.228-1.278.685-1.743.456-.465 1.033-.697 1.73-.697h4.258zm6.448 6.97l3.76 4.11c.115.115.173.256.173.422 0 .166-.063.31-.188.436-.124.124-.27.187-.435.187-.133 0-.282-.067-.448-.2l-5.03-5.552v5.18c0 .198-.063.347-.187.447-.124.1-.262.15-.41.15-.416 0-.623-.2-.623-.598V5.453c0-.183.062-.328.186-.436.125-.108.27-.162.436-.162.166 0 .307.05.423.15.117.1.175.248.175.448V9.41l1.32 1.47 3.634-5.75c.116-.184.282-.275.498-.275.166 0 .31.058.436.174.124.115.186.257.186.423 0 .115-.033.232-.1.348l-3.808 6.026zm13.643-4.53v7.294c0 .33-.063.643-.188.933-.124.29-.3.548-.523.772-.225.224-.482.398-.773.523-.29.124-.61.186-.958.186h-2.44c-.35 0-.67-.062-.96-.186-.29-.125-.543-.3-.758-.523-.216-.224-.387-.48-.51-.772-.125-.29-.188-.602-.188-.934V7.294c0-.697.228-1.278.685-1.743.455-.465 1.032-.697 1.73-.697h2.44c.696 0 1.277.232 1.742.697.465.465.697 1.046.697 1.743m-1.22 0c0-.35-.117-.64-.35-.872-.232-.232-.522-.348-.87-.348h-2.44c-.333 0-.615.116-.847.348-.233.233-.35.523-.35.872v7.294c0 .33.117.613.35.846.232.233.514.348.846.348h2.44c.348 0 .638-.115.87-.348.233-.233.35-.515.35-.847V7.294zm4.88 9.71v2.44c0 .398.115.7.347.908.233.208.515.31.847.31.348 0 .64-.107.87-.322.233-.215.35-.514.35-.896 0-.332-.15-.63-.45-.896-.28-.282-.63-.58-1.044-.896-.133-.117-.274-.225-.423-.324-.15-.1-.316-.208-.498-.324m4.853-9.71c0-.33-.12-.617-.36-.858-.24-.24-.528-.36-.86-.36h-2.415c-.348 0-.638.115-.87.347-.233.233-.35.523-.35.872v7.294c0 .33.117.613.35.846.232.233.522.348.87.348h2.416c.348 0 .638-.115.87-.348.233-.233.35-.515.35-.847V7.294zm-2.888 9.71c.083.084.175.158.274.224.1.067.198.14.298.225.3.25.48.406.548.473.216.265.365.53.448.796.066.15.1.39.1.722 0 .764-.258 1.37-.773 1.818-.446.398-1.003.597-1.666.597-.648 0-1.203-.2-1.668-.598-.498-.448-.747-1.054-.747-1.818V7.294c0-.33.06-.642.185-.933.125-.29.3-.546.523-.77.224-.225.482-.403.772-.536.29-.132.61-.2.958-.2h2.416c.348 0 .667.068.958.2.29.133.548.31.772.535.224.224.398.48.523.77.124.292.186.603.186.935v7.294c0 .33-.062.643-.186.933-.125.29-.3.548-.523.772-.224.224-.48.398-.772.523-.29.124-.61.186-.958.186h-1.67zm13.22-12.15c.2 0 .353.063.46.188.11.124.163.26.163.41 0 .415-.208.623-.623.623h-4.257c-.332 0-.614.116-.846.348-.233.233-.35.523-.35.872v7.294c0 .33.117.613.35.846.232.233.514.348.846.348h4.257c.2 0 .353.063.46.187.11.125.163.27.163.437 0 .398-.208.597-.623.597h-4.257c-.348 0-.668-.062-.958-.186-.29-.125-.544-.3-.76-.523-.216-.224-.386-.48-.51-.772-.124-.29-.187-.602-.187-.934V7.294c0-.697.228-1.278.685-1.743.456-.465 1.033-.697 1.73-.697h4.257zm6.448 6.972l3.76 4.108c.116.116.174.257.174.423 0 .166-.062.31-.187.436-.124.124-.27.187-.435.187-.133 0-.282-.067-.448-.2l-5.03-5.552v5.18c0 .198-.062.347-.186.447-.124.1-.26.15-.41.15-.415 0-.622-.2-.622-.598V5.453c0-.183.062-.328.186-.436.125-.108.27-.162.436-.162.166 0 .307.05.423.15.117.1.175.248.175.448V9.41l1.32 1.47 3.634-5.75c.116-.184.282-.275.498-.275.166 0 .31.058.435.174.125.115.187.257.187.423 0 .115-.033.232-.1.348l-3.81 6.026zm13.643-4.53v7.293c0 .33-.062.643-.186.933-.124.29-.3.548-.523.772-.224.224-.48.398-.772.523-.29.124-.61.186-.958.186h-2.44c-.348 0-.668-.062-.958-.186-.292-.125-.545-.3-.76-.523-.217-.224-.387-.48-.51-.772-.126-.29-.188-.602-.188-.934V7.294c0-.697.228-1.278.685-1.743.456-.465 1.033-.697 1.73-.697h2.44c.697 0 1.278.232 1.742.697.464.465.696 1.046.696 1.743m-1.22 0c0-.35-.115-.64-.348-.872-.232-.232-.523-.348-.87-.348h-2.44c-.333 0-.615.116-.848.348-.232.233-.348.523-.348.872v7.294c0 .33.116.613.348.846.233.233.515.348.847.348h2.44c.348 0 .64-.115.87-.348.234-.233.35-.515.35-.847V7.294zm8.515 13.37c.184 0 .33.057.437.173.108.117.162.258.162.424 0 .414-.2.622-.6.622h-2.414c-.2 0-.348-.062-.448-.187-.1-.125-.15-.27-.15-.435 0-.166.055-.307.163-.424.11-.116.254-.174.436-.174h2.415zm2.44-15.212v10.954c0 .2-.06.348-.186.448-.124.1-.27.15-.435.15-.167 0-.308-.055-.424-.163-.117-.108-.175-.253-.175-.435V6.075h-3.634c-.348 0-.64.116-.87.348-.233.233-.35.523-.35.872v9.112c0 .2-.062.348-.187.448-.125.1-.27.15-.436.15-.166 0-.307-.055-.423-.163-.115-.108-.173-.253-.173-.435V7.295c0-.332.062-.643.186-.934.125-.29.3-.546.523-.77.224-.225.48-.403.772-.536.29-.132.61-.2.958-.2h4.233c.414 0 .62.2.62.6m10.955.62v7.27h3.635c.697 0 1.278-.228 1.743-.684.465-.456.697-1.033.697-1.73V8.49c0-.698-.232-1.274-.697-1.73-.465-.457-1.046-.685-1.743-.685h-3.635zm0 8.49v6.1h6.075c.2 0 .35.058.448.174.1.117.15.258.15.424 0 .414-.2.622-.598.622h-6.697c-.398 0-.598-.208-.598-.622V5.452c0-.398.2-.597.598-.597h4.257c1.013 0 1.876.357 2.59 1.07.713.714 1.07 1.57 1.07 2.565v2.44c0 1.012-.357 1.867-1.07 2.564-.714.714-1.577 1.07-2.59 1.07h-3.635zm17.004-9.11v10.953c0 .2-.063.348-.187.448-.125.1-.27.15-.436.15-.166 0-.307-.055-.423-.163-.117-.108-.175-.253-.175-.435V6.075h-3.66c-.332 0-.614.116-.847.348-.232.233-.348.523-.348.872v9.112c0 .2-.062.348-.187.448-.124.1-.27.15-.436.15-.166 0-.307-.055-.423-.163-.117-.108-.175-.253-.175-.435V7.295c0-.697.228-1.278.684-1.743.456-.465 1.032-.697 1.73-.697h4.257c.415 0 .622.2.622.598m3.66.597v9.734h3.66c.33 0 .613-.115.845-.348.233-.233.35-.515.35-.847V7.294c0-.332-.117-.623-.35-.872-.232-.248-.514-.373-.846-.373h-3.66zm0-1.195h3.66c.33 0 .642.062.932.187.29.124.548.3.772.523.224.223.4.48.523.77.124.292.187.61.187.96v7.294c0 .33-.063.643-.187.933-.124.29-.3.548-.523.772-.224.224-.48.398-.772.523-.29.124-.6.186-.933.186h-4.283c-.4 0-.598-.2-.598-.597V.597c0-.198.057-.348.174-.448.116-.1.257-.15.423-.15.415 0 .622.2.622.598v4.257zM203.7 12v4.407c0 .2-.06.348-.186.448-.124.1-.26.15-.41.15-.415 0-.623-.2-.623-.598V12.05l-3.06 4.705c-.134.183-.3.274-.5.274-.165 0-.314-.063-.447-.188-.133-.124-.2-.27-.2-.435 0-.133.042-.25.125-.35l3.336-5.127-3.336-5.13c-.083-.13-.124-.248-.124-.347 0-.166.066-.308.2-.424.132-.117.28-.175.447-.175.216 0 .383.09.5.274l3.06 4.704v-4.38c0-.184.063-.33.188-.437.124-.108.27-.162.436-.162.166 0 .307.05.423.15.116.1.174.248.174.448V9.86l3.188-4.73c.133-.184.29-.275.473-.275.167 0 .312.058.437.174.124.115.186.257.186.423 0 .05-.004.108-.012.173-.007.067-.037.125-.086.175l-3.46 5.13 3.46 5.128c.066.117.1.233.1.35 0 .164-.063.306-.187.422-.125.116-.262.174-.41.174-.217 0-.383-.083-.5-.25L203.702 12zm14.018-6.547v10.954c0 .2-.063.348-.187.448-.124.1-.27.15-.435.15-.166 0-.307-.055-.423-.163-.116-.108-.175-.253-.175-.435V6.075h-3.66c-.33 0-.613.116-.845.348-.233.233-.35.523-.35.872v9.112c0 .2-.06.348-.186.448-.124.1-.27.15-.436.15-.165 0-.307-.055-.423-.163-.116-.108-.174-.253-.174-.435V7.295c0-.697.228-1.278.685-1.743.456-.465 1.033-.697 1.73-.697h4.257c.415 0 .623.2.623.598"/></g></g></g></g></svg>',MOEXLogo2:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 714.5831 123.43025" width="714.583" height="123.43"><defs><clipPath id="a"><path d="M0 595.28h841.89V0H0v595.28z"/></clipPath></defs><g><g><g clip-path="url(#a)" transform="matrix(1.25 0 0 -1.25 -163.576 273.356)"><g><path fill="#494090" d="M209.902 158.69l-4.843-.62-5.052-17.01-3.665-2.23 5.053 1.585 6.525 16.418 1.982 1.858z"/></g><g><path fill="#726aae" d="M211.197 160.142l-5.738-.722-.457-1.592 4.656.59 1.537 1.724z"/></g><g><path fill="#8d3472" d="M174.18 157.547l7.17 4.562 7.495-3.062-8.58-9.883-10.526-4.406 4.44 12.787z"/></g><g><path fill="#6e326a" d="M144.102 128.463l3.353-7.857h3.73v3.075l-7.083 4.783z"/></g><g><path fill="#8c316d" d="M142.86 173.407l-11.184-12.238 1.822-4.307 4.86 2.92 4.502 13.624z"/></g><g><path fill="#68336a" d="M226.98 202.556l3.25-3.88-1.257-.92-3.356.42-4.596 2.89 5.96 1.49z"/></g><g><path fill="#3f3576" d="M312.898 180.39l4.73 2.04 22.82-10.01 11.033-9.262 6.95-10.74-4.834.845-9.603 6.003 1.005 5.486-6.136 5.273-21.107 9.27-3.038-1.358-1.82 2.453z"/></g><g><path fill="#8c316d" d="M208.014 217.33l-.62-7.325 1.367-7.31 4.86-3.934 13.567 3.43 4.838.54 1.985 4.285-7.692 4.306-1.738 2.25-.846.93-6.452 4.185s-.36-1.012-.88-2.45l-8.388 1.096z"/></g><g><path fill="#6e326a" d="M208.014 217.33l.825-14.6 4.857-3.93-2.697-.784-5.137 2.688.512 3.393-16.444 5.547-6.35-5.183-.585 5.607 1.846 2.988 23.174 4.276z"/></g><g><path fill="#7d3773" d="M211 198.016l-1.093-6.884 14.81-15.526-23.345 4.228 4.53 21.263 5.098-3.08z"/></g><g><path fill="#68336a" d="M231.685 208.333l.64-2.863-.85-2.775.63.034 1.982 4.285-2.402 1.318z"/></g><g><path fill="#933f7a" d="M224.43 213.76l-2.694-4.554 10.185-1.916-.236 1.047-5.29 2.985-1.965 2.44z"/></g><g><path fill="#68336a" d="M224.435 213.7l-4.24-5.367h6.163l-1.923 5.366z"/></g><g><path fill="#462846" d="M221.988 209.23l2.577 2.426-.21-2.624-2.367.197z"/></g><g><path fill="#6e326a" d="M210.43 194.894l35.916-2.28-9.218-8.555-12.662-2.674-6.43 1.11-8.31 8.567.703 3.83z"/></g><g><path fill="#7d3773" d="M216.427 182.66l3.756-3.54 3.785-.477 11.466 3.852 2.068 1.844-12.972-2.45-8.103.77z"/></g><g><path fill="#a92f72" d="M201.816 179.95l-.485-2.39 11.683-10.483 16.49-7.06.7.427 2.575-1.994 6.835 1.35-2.7 5.812-12.416 10.217-22.68 4.12z"/></g><g><path fill="#8d3472" d="M201.816 179.95l11.197-12.873 16.49-7.06-2.26-1.404-19.095 5.732-7.345 10.086-8.264-11.905-3.926-3.706-7.444 3.332 20.646 17.798z"/></g><g><path fill="#a92f72" d="M150.203 177.882l17.315 1.33 24.957.746-22.728-18.066.584-6.798-27.406 19.696 7.28 3.092z"/></g><g><path fill="#8d3472" d="M142.924 174.79l-5.13-15.33 11.307-21.035-1.458 9.672-4.718 26.693z"/></g><g><path fill="#7d3773" d="M191.004 179.895l-21.257-18.004-.004-6.353 4.5 1.513 7.108 5.06 20.466 17.84-10.812-.054z"/></g><g><path fill="#a92f72" d="M170.052 155.653l-.312-10.895-5.27-7.613 2.32-6.887 2.212-3.68 4.33-2.898v-3.075h-7.65l-7.835 11.903-8.77 5.922-1.84 10.53 22.815 6.693z"/></g><g><path fill="#6e326a" d="M137.794 159.46l-6.934-19.117 1.94-13.712 2.887-6.024 9.842 6.118-1.36 2.992 1.497 4.943 3.433 3.765-11.306 21.035z"/></g><g><path fill="#6e326a" d="M149.1 138.425l5.287-11.942 5.602-5.877h5.69l-7.832 11.903-8.747 5.915z"/></g><g><path fill="#8d3472" d="M135.688 120.606h12.63l-3.307 7.22-9.323-7.22z"/></g><g><path fill="#3f3576" d="M239.452 159.98l-9.616-14.848-1.334-.215.396-2.153 1.304-1.474-3.067-4.26-11.61 15.52-5.623-.45-1.42-.183-6.402-12.923-5.354-1.22-.383 1.056 5.122 1.8 6.332 16.234 5.7 5.88 14.073-3.893 2.632 1.595 2.576-1.994 6.463 1.456.212.074z"/></g><g><path fill="#3f3576" d="M215.153 142.96l8.316-9.057 5.7.275-3.804 5.335-10.213 3.446z"/></g><g><path fill="#494090" d="M209.902 152.1l2.42-8.378 14.256-5.955-10.856 15.074-5.82-.74z"/></g><g><path fill="#3b316c" d="M226.58 137.767l2.59-3.59 3.05 4.828-2.017 2.285-3.624-3.523z"/></g><g><path fill="#948fc4" d="M249.792 195.84l-23.34-21.626 6.746-5.727 34.168 12.088.68 17.494-18.254-2.23z"/></g><g><path fill="#494090" d="M267.366 180.575l34.992-7.65 11.297 7.782-12.166 1.114-34.124-1.245z"/></g><g><path fill="#726aae" d="M301.623 173.753l5.55-13.827h17.443l-10.96 20.78-12.033-6.953z"/></g><g><path fill="#8e89bb" d="M244.644 164.923l-2.425-4.943 8.046-.054-5.622 4.997z"/></g><g><path fill="#3f3576" d="M302.398 146.683l8.194.375 14.023 12.868-9.515-15.628-4.446-5.276 6.177-3.603-3.682-9.16-6.464 1.92 2.555 5.39 1.843 1.058-9.574 4.637.888 7.418z"/></g><g><path fill="#726aae" d="M306.714 128.27l6.465-1.923-2.268-5.74H299.76l2.928 5.84 4.026 1.822z"/></g><g><path fill="#3f3576" d="M315.025 178.068l24.084-25.783 2.59-15.32 7.713-5.615 2.07-10.745h-8.194l.634 7.345-29.876 16.87 10.567 15.105-9.59 18.143z"/></g><g><path fill="#726aae" d="M343.924 127.95l7.435-7.345h-10.93l3.494 7.345z"/></g><g><path fill="#494090" d="M305.512 159.533l-3.104-13.472h8.065l14.142 13.866H307.17l-1.658-.393z"/></g><g><path fill="#494090" d="M279.15 146.06h14.814l.528 14.724-54.592.042-11.398-15.908 17.04-5.93 10.29-.565 10.28-10.79-3.406-7.027h9.385l-3.112 5.155-.973 7.185-1.847 4.937.025-.002 12.967 8.182z"/></g><g><path fill="#3f3576" d="M266.158 137.882l7.928-10.96-1.994-6.316-5.98 7.027.046 10.25z"/></g><g><path fill="#726aae" d="M242.22 160l-4.53-8.79-.143-16.55 15.384-5.953 6.733 1.485-2.667 7.023-3.99-2.984-7.998 3.133 3.373 9.93 9.33 13.047-15.49-.34z"/></g><g><path fill="#3b316c" d="M219.353 143.25l.415 3.972 2.68-3.72-3.095-.253z"/></g><g><path fill="#8d3472" d="M169.743 155.536l-.004-10.777 4.75 12.476-4.747-1.7z"/></g><g><path fill="#d27cb2" d="M184.84 213.055l-7.274-11.776-25.508-22.636-9.134-3.854 1.726 4.82 13.805 12.354 13.197 8.315 4.765 2.122 8.424 10.653z"/></g><g><path fill="#933f7a" d="M183.42 202.99l-16.855-24.315 24.02.826 8.277.073 2.953.377 4.49 23.04H183.42z"/></g><g><path fill="#b64282" d="M183.367 210.69l.212-6.23 6.35 5.183 16.564-5.287-.217-1.46-22.816-.218-16.544-23.994-17.165-1.023 2.308.983 25.508 22.635 5.8 9.41z"/></g><g><path fill="#b4568e" d="M142.924 174.79l26.82-19.254-22.383-7.457-4.436 26.71z"/></g><g><path fill="#726aae" d="M293.87 159.926V137.21l15.416-3.605 2.155.943-9.817 4.733 5.55 20.646H293.87z"/></g><g><path fill="#726aae" d="M244.644 164.923l-2.453-4.997-2.95-.02-2.514 5.867-3.528 2.714 5.23 1.954 6.217-5.517z"/></g><g><path fill="#948fc4" d="M244.644 164.923l5.622-4.997h-8.074l2.453 4.997z"/></g><g><path fill="#726aae" d="M268.045 198.07l-.68-17.495 46.29.132-22.326 6.797-23.285 10.565z"/></g><g><path fill="#b9b5da" d="M238.428 170.44l11.84-10.515h56.904l-5.55 13.828-34.256 6.822-28.938-10.135z"/></g><g><path fill="#726aae" d="M343.924 127.95l-2.25-1.63-2.856-5.715h5.09l.016 7.345z"/></g><g><path fill="#494090" d="M266.113 127.633l-1.728-1.374-2.33-5.654h4.192l-.134 7.027z"/></g><g><path fill="#726aae" d="M385.99 137.444c3.542 0 5.617 2.263 5.617 5.76 0 3.442-2.075 5.662-5.523 5.662h-5.806v-11.422h5.712zm-11.802 16.66h12.935c6.278 0 10.67-4.385 10.67-10.9 0-6.517-4.392-11.048-10.67-11.048h-6.845v-11.564h-6.09v33.512z"/></g><g><path fill="#726aae" d="M415.267 138.39c3.255 0 5.283 2.024 5.283 5.332 0 2.124-.8 3.82-2.643 4.58-.848.377-1.84.565-3.68.565h-4.44V138.39h5.48zM403.7 154.104h11.046c3.304 0 4.91-.28 6.324-.896 3.447-1.42 5.667-4.627 5.667-9.158 0-3.967-2.078-7.74-5.62-9.16v-.092s.425-.518 1.087-1.746l6.892-12.46h-6.845l-6.607 12.505h-5.855v-12.507h-6.09v33.512z"/></g><g><path fill="#726aae" d="M449.92 125.596c6.422 0 11.048 5.19 11.048 11.988 0 6.514-4.626 11.52-11.048 11.52-6.42 0-11.045-5.006-11.045-11.52 0-6.798 4.626-11.988 11.045-11.988m0 29.078c10.15 0 17.326-7.507 17.326-17.09 0-9.865-7.175-17.558-17.326-17.558-10.15 0-17.323 7.693-17.323 17.558 0 9.583 7.174 17.09 17.323 17.09"/></g><g><path fill="#373535" d="M476.764 122.6c0 11.52 16.842 13.017 16.842 21.878 0 3.595-2.705 6.298-6.81 6.298-3.08 0-5.786-1.913-7.374-4.476l-2.377 1.632c1.82 3.313 5.504 5.925 9.936 5.925 6.205 0 9.985-4.058 9.985-9.192 0-11.008-16.562-12.548-16.655-21.273h17.17v-2.89H476.95c-.093.744-.188 1.444-.188 2.097"/></g><g><path fill="#373535" d="M521.913 136.92c0 7.793-1.724 13.855-7.977 13.855-6.204 0-7.932-6.062-7.932-13.856 0-7.885 1.728-13.947 7.932-13.947 6.253 0 7.977 6.063 7.977 13.946m-19.268 0c0 9.425 2.8 16.936 11.29 16.936 8.538 0 11.337-7.51 11.337-16.937 0-9.47-2.8-16.98-11.336-16.98-8.49 0-11.29 7.51-11.29 16.98"/></g><g><path fill="#373535" d="M531.01 123.392h7.367v24.072c0 .937.048 1.822.048 1.822h-.095s-.327-.654-1.633-1.96l-3.5-3.453-2.05 2.055 7.418 7.367h2.984v-29.903h7.23v-2.89h-17.77v2.89z"/></g><g><path fill="#373535" d="M555.306 126.844c1.26-1.817 3.685-3.778 7.368-3.778 4.528 0 8.166 3.172 8.166 7.65 0 4.48-3.594 7.745-8.304 7.745-2.006 0-4.34-.697-5.97-1.817l-2.055.745 1.775 15.907h15.86v-2.892H559.13l-.977-8.397c-.14-1.164-.28-1.865-.28-1.865h.093c.886.56 3.03 1.262 4.944 1.262 6.578 0 11.288-4.81 11.288-10.685 0-6.067-4.99-10.775-11.38-10.775-3.78 0-7.42 1.677-9.612 4.618l2.1 2.284z"/></g><path fill="#373535" d="M374.168 194.43h3.214v-32.77h-3.214v32.77z"/><g><path fill="#373535" d="M389.13 194.43h3.123l16.732-23.586c1.12-1.63 2.704-4.427 2.704-4.427h.094s-.282 2.702-.282 4.427v23.586h3.217v-32.77h-3.125l-16.733 23.587c-1.118 1.632-2.705 4.428-2.705 4.428h-.09s.278-2.702.278-4.428V161.66h-3.215v32.77z"/></g><g><path fill="#373535" d="M422.01 194.43h3.45l9.087-24.89c.56-1.678 1.26-4.196 1.26-4.196h.092s.652 2.518 1.26 4.196l9.087 24.89h3.45l-12.12-32.77h-3.45l-12.118 32.77z"/></g><g><path fill="#373535" d="M457.408 194.43h18.412v-2.893h-15.196v-11.93h12.446v-2.89h-12.446v-12.165h16.08v-2.89H457.41v32.768z"/></g><g><path fill="#373535" d="M483.755 167.767c2.052-2.003 5.22-3.587 8.483-3.587 3.868 0 6.62 2.19 6.62 5.59 0 8.254-16.316 6.297-16.316 16.455 0 5.36 4.522 8.765 10.3 8.765 3.08 0 6.434-1.073 8.672-3.17l-1.586-2.704c-1.77 1.678-4.613 2.796-7.225 2.796-3.728 0-6.85-2.052-6.85-5.5 0-7.876 16.312-5.78 16.312-16.312 0-5.035-3.68-8.996-10.02-8.996-3.776 0-7.598 1.49-10.3 4.193l1.91 2.47z"/></g><g><path fill="#373535" d="M516.892 191.537h-11.747v2.893h26.757v-2.893h-11.795V161.66h-3.215v29.877z"/></g><g><path fill="#373535" d="M558.4 164.555c3.965 0 6.436 2.474 6.436 6.393 0 3.92-2.658 6.484-6.482 6.484h-8.35v-12.877h8.395zm-.42 15.676c3.312 0 5.553 2.337 5.553 5.74 0 3.358-2.148 5.6-5.648 5.6h-7.882v-11.34h7.977zm-11.196 14.23h11.196c5.133 0 8.863-3.125 8.863-8.258 0-3.402-1.63-5.876-4.15-7.136v-.093c3.357-.934 5.505-4.198 5.505-8.118 0-5.83-4.34-9.19-9.844-9.19h-11.57v32.796z"/></g><g><path fill="#373535" d="M593.068 174.914l-4.29 11.897c-.562 1.54-1.26 4.29-1.26 4.29h-.095s-.7-2.75-1.26-4.29l-4.338-11.896h11.243zm-7.326 19.547h3.453l12.037-32.796h-3.406l-3.78 10.45h-13.2l-3.735-10.45h-3.404l12.036 32.797z"/></g><g><path fill="#373535" d="M602.498 194.46v-2.89h11.756v-29.906h3.22v29.905l22.412-.002v-29.904h3.217v29.904h11.805v2.893h-52.41z"/></g><g><path fill="#373535" d="M661.15 194.46h3.22v-29.905h15.207v-2.89H661.15v32.796z"/></g><g><path fill="#373535" d="M683.212 194.46h18.428v-2.892h-15.208v-11.94h12.455v-2.894h-12.455v-12.18h16.095v-2.89h-19.315v32.797z"/></g></g></g></g></svg>',
MOEXLogo3:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 528 133" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Slice 1</title><defs><path d="M19.162 10.954l-7.943 7.94L.365 8.044 8.31.1l10.852 10.854" id="a"/><path d="M.22 8.895L8.16.955l10.853 10.85-7.942 7.943L.22 8.895" id="c"/></defs><g fill="none" fill-rule="evenodd"><path fill="#1A1918" d="M190.877 40.828L180.585 55.66l-10.23-14.832v19.857h-6.357V28.6h4.964l11.623 16.406L192.33 28.6h4.904v32.085h-6.357V40.828m28.755-6.72c-1.412 0-2.735.263-3.965.787-1.232.525-2.3 1.252-3.21 2.18-.907.93-1.614 2.038-2.118 3.33-.506 1.292-.758 2.724-.758 4.298 0 1.574.252 3.007.756 4.298.503 1.294 1.21 2.414 2.118 3.36.908.95 1.977 1.678 3.21 2.18 1.23.507 2.552.758 3.964.758 1.453 0 2.795-.26 4.025-.787 1.23-.523 2.3-1.25 3.21-2.18.907-.926 1.612-2.036 2.118-3.33.504-1.29.758-2.722.758-4.296 0-1.574-.253-3.006-.757-4.298-.506-1.292-1.21-2.4-2.12-3.33-.907-.928-1.977-1.655-3.208-2.18-1.23-.524-2.572-.787-4.025-.787zm0 27.365c-2.38 0-4.58-.424-6.598-1.272-2.02-.846-3.775-2.005-5.27-3.48-1.493-1.472-2.655-3.24-3.482-5.296-.827-2.058-1.24-4.3-1.24-6.72 0-2.422.413-4.662 1.24-6.72s1.99-3.823 3.483-5.298c1.494-1.472 3.25-2.633 5.27-3.48 2.017-.848 4.216-1.272 6.597-1.272 2.38 0 4.592.424 6.63 1.27 2.036.85 3.792 2.01 5.266 3.482 1.473 1.475 2.633 3.24 3.48 5.298.848 2.058 1.272 4.298 1.272 6.72 0 2.42-.424 4.662-1.27 6.72-.85 2.058-2.01 3.824-3.482 5.297-1.474 1.475-3.23 2.634-5.267 3.48-2.035.85-4.246 1.274-6.627 1.274zm52.548-8.9c-.726 1.413-1.595 2.664-2.603 3.754-1.01 1.09-2.058 1.998-3.148 2.724-1.334.89-2.707 1.515-4.12 1.88-1.412.362-2.986.544-4.72.544-2.22 0-4.37-.333-6.447-1-2.08-.666-3.987-1.886-5.723-3.662-1.29-1.29-2.38-2.955-3.267-4.994-.888-2.037-1.332-4.348-1.332-6.93 0-2.22.385-4.42 1.153-6.6.765-2.18 1.935-4.077 3.51-5.69.525-.525 1.16-1.06 1.908-1.605.747-.544 1.614-1.05 2.604-1.513.988-.463 2.117-.837 3.39-1.12 1.27-.282 2.694-.424 4.268-.424 1.736 0 3.33.192 4.783.575 1.453.385 2.744.92 3.875 1.606 1.007.565 1.998 1.3 2.966 2.21.97.907 1.836 1.927 2.604 3.057l-5.39 3.814c-.444-.727-.977-1.432-1.602-2.12-.627-.685-1.303-1.25-2.03-1.694-.644-.364-1.402-.666-2.27-.908-.868-.243-1.866-.364-2.995-.364-1.534 0-2.886.223-4.056.667-1.172.445-2.24 1.15-3.21 2.12-.766.766-1.462 1.795-2.087 3.087-.627 1.293-.94 2.907-.94 4.844 0 1.695.294 3.21.88 4.54.584 1.332 1.32 2.443 2.21 3.33.805.808 1.784 1.444 2.934 1.907 1.152.466 2.493.697 4.03.697 1.21 0 2.297-.16 3.266-.484.97-.322 1.897-.807 2.785-1.453.687-.524 1.365-1.16 2.03-1.907.667-.746 1.22-1.644 1.665-2.694l5.086 3.813m18.154-7.753l-5.507 4.662v11.2h-6.357V28.598h6.357v13.257L300.27 28.6h8.415l-13.622 11.986 14.47 20.1h-7.75L290.34 44.824m37.294-10.716c-1.412 0-2.735.263-3.965.787-1.234.525-2.303 1.252-3.21 2.18-.91.93-1.616 2.038-2.12 3.33-.504 1.292-.756 2.724-.756 4.298 0 1.574.252 3.007.756 4.298.505 1.294 1.212 2.414 2.12 3.36.908.95 1.977 1.678 3.21 2.18 1.23.507 2.552.758 3.964.758 1.453 0 2.795-.26 4.025-.787 1.23-.523 2.3-1.25 3.207-2.18.908-.926 1.613-2.036 2.12-3.33.503-1.29.757-2.722.757-4.296 0-1.574-.254-3.006-.758-4.298-.506-1.292-1.21-2.4-2.12-3.33-.907-.928-1.977-1.655-3.208-2.18-1.23-.524-2.573-.787-4.026-.787zm0 27.365c-2.38 0-4.58-.424-6.598-1.272-2.02-.846-3.775-2.005-5.267-3.48-1.497-1.472-2.657-3.24-3.483-5.296-.828-2.058-1.242-4.3-1.242-6.72 0-2.422.414-4.662 1.242-6.72.826-2.058 1.986-3.823 3.48-5.298 1.493-1.472 3.25-2.633 5.268-3.48 2.018-.848 4.217-1.272 6.598-1.272 2.38 0 4.592.424 6.63 1.27 2.036.85 3.792 2.01 5.266 3.482 1.472 1.475 2.632 3.24 3.48 5.298.847 2.058 1.27 4.298 1.27 6.72 0 2.42-.423 4.662-1.27 6.72-.85 2.058-2.01 3.824-3.48 5.297-1.475 1.475-3.23 2.634-5.268 3.48-2.037.85-4.248 1.274-6.63 1.274zm44.1-6.78c.77-.08 1.415-.344 1.943-.788.445-.363.79-.868 1.033-1.514.242-.643.365-1.27.365-1.874 0-.928-.164-1.624-.486-2.09-.326-.463-.55-.735-.67-.816-.445-.404-1.043-.687-1.793-.85-.748-.16-1.447-.24-2.096-.24h-13.057v8.293h12.572c.69 0 1.418-.04 2.187-.12zm-1.3-14.167c.587-.08 1.06-.242 1.426-.485.244-.16.506-.44.79-.845.285-.403.427-1.01.427-1.817 0-.322-.062-.715-.183-1.18-.122-.464-.465-.857-1.034-1.18-.242-.122-.515-.222-.82-.303-.305-.08-.607-.14-.912-.182-.303-.04-.576-.06-.818-.06h-12.337v6.174h11.85c.487 0 1.022-.04 1.61-.12zm.09-11.836c.823.06 1.64.18 2.444.363.806.182 1.592.454 2.357.817.766.364 1.45.848 2.055 1.454.885.888 1.45 1.816 1.69 2.784.242.97.363 1.817.363 2.543 0 .97-.102 1.798-.303 2.484-.2.687-.443 1.272-.727 1.756-.283.483-.574.867-.877 1.15-.302.282-.554.504-.757.665.57.242 1.17.596 1.806 1.06.633.464 1.236 1.16 1.81 2.088.448.808.766 1.604.95 2.392.184.787.275 1.604.275 2.45 0 1.737-.282 3.17-.846 4.3-.565 1.13-1.192 2.038-1.877 2.724-1.29 1.33-2.694 2.157-4.207 2.48-1.513.324-2.976.484-4.388.484h-19.676V28.6h17.58c.725 0 1.5.03 2.326.09zm47.716 23.883c-.727 1.413-1.596 2.664-2.604 3.754-1.01 1.09-2.06 1.998-3.15 2.724-1.33.89-2.704 1.515-4.116 1.88-1.412.362-2.986.544-4.72.544-2.22 0-4.37-.333-6.448-1-2.08-.666-3.986-1.886-5.723-3.662-1.293-1.29-2.38-2.955-3.27-4.994-.89-2.037-1.33-4.348-1.33-6.93 0-2.22.382-4.42 1.15-6.6.765-2.18 1.935-4.077 3.51-5.69.524-.525 1.16-1.06 1.907-1.605.746-.544 1.614-1.05 2.604-1.513.99-.463 2.118-.837 3.39-1.12 1.27-.282 2.695-.424 4.27-.424 1.733 0 3.327.192 4.78.575 1.453.385 2.744.92 3.875 1.606 1.008.565 1.998 1.3 2.967 2.21.97.907 1.836 1.927 2.604 3.057l-5.39 3.814c-.444-.727-.978-1.432-1.603-2.12-.627-.685-1.302-1.25-2.03-1.694-.643-.364-1.4-.666-2.268-.908-.87-.243-1.868-.364-2.997-.364-1.536 0-2.887.223-4.057.667-1.17.445-2.24 1.15-3.21 2.12-.766.766-1.46 1.795-2.086 3.087-.627 1.293-.94 2.907-.94 4.844 0 1.695.293 3.21.88 4.54.583 1.332 1.32 2.443 2.208 3.33.807.808 1.785 1.444 2.936 1.907 1.15.466 2.492.697 4.027.697 1.21 0 2.3-.16 3.268-.484.97-.322 1.896-.807 2.785-1.453.686-.524 1.363-1.16 2.03-1.907.665-.746 1.218-1.644 1.663-2.694l5.087 3.813m18.163-7.753l-5.508 4.662v11.2h-6.358V28.598h6.358v13.257L446.33 28.6h8.413l-13.62 11.986 14.468 20.1h-7.746L436.4 44.823m35.658 1.817h8.535l-4.297-8.597-4.238 8.597zm11.562 6.054h-14.59l-3.814 7.99h-7.022l15.74-32.085h4.784l15.86 32.084h-7.022l-3.936-7.99zm25.244-18.04c-.525 0-1.058.04-1.603.12-.543.08-1.06.3-1.543.66-.322.2-.615.53-.877.99-.265.46-.396 1.03-.396 1.71 0 1.2.383 2.123 1.15 2.763.768.64 1.977.96 3.634.96h11.683v-7.204h-12.045zm-4.177 26.03h-7.506l8.476-13.317c-.968-.203-1.937-.546-2.906-1.033-.97-.485-1.796-1.073-2.48-1.762-.93-.93-1.546-1.952-1.85-3.066-.302-1.114-.452-2.197-.452-3.25 0-1.052.15-2.176.453-3.37.305-1.195.98-2.32 2.03-3.37.726-.73 1.484-1.287 2.27-1.672.788-.384 1.575-.668 2.36-.85.79-.182 1.555-.294 2.303-.334.746-.04 1.44-.06 2.088-.06h17.8v32.085h-6.36V47.912h-8.23l-7.992 12.773zM183.007 98.97c.444 0 1.038-.052 1.786-.153.746-.1 1.402-.393 1.967-.878.404-.365.727-.83.97-1.394.24-.565.362-1.17.362-1.817 0-.645-.12-1.25-.363-1.817-.244-.565-.567-1.008-.97-1.33-.485-.404-1.05-.657-1.696-.758-.646-.1-1.25-.15-1.816-.15h-12.896v8.293h12.653zm8.354-26.034v6.054h-21.005v5.63h9.202c1.25 0 2.462.02 3.632.06 1.17.042 2.27.152 3.3.334 1.03.18 1.997.484 2.905.908.908.424 1.745 1 2.512 1.725 1.01.97 1.715 2.038 2.12 3.21.402 1.17.605 2.46.605 3.873 0 1.898-.323 3.442-.968 4.632-.646 1.19-1.332 2.13-2.058 2.815-.727.687-1.767 1.332-3.118 1.937-1.353.606-3.057.908-5.116.908H164V72.936h27.363zm14.123 32.086h-4.36V72.936h6.358v20.826l16.29-20.826h4.418v32.086h-6.356V84.196l-16.347 20.826m48.37-18.465c.447 0 1.003-.05 1.673-.152.666-.1 1.244-.356 1.73-.764.122-.12.356-.423.7-.912.344-.488.518-1.2.518-2.136 0-.813-.133-1.423-.397-1.83-.264-.407-.498-.71-.7-.915-.446-.408-.952-.652-1.52-.733-.567-.08-1.133-.122-1.7-.122h-11.607v7.567h11.302zm.564-13.62c2.137 0 3.842.302 5.113.907 1.272.605 2.23 1.232 2.875 1.877.646.607 1.24 1.465 1.786 2.575.545 1.11.817 2.573.817 4.388 0 1.817-.283 3.31-.85 4.48-.565 1.172-1.173 2.1-1.82 2.786-.607.645-1.255 1.15-1.943 1.513-.688.362-1.356.635-2.004.816-.647.18-1.274.302-1.88.362-.61.062-1.136.092-1.58.092H242.55v12.29h-6.357V72.936h18.223zm27.626 17.253l-8.78 14.832h-7.87l12.11-19.252-11.26-12.894h7.747l11.2 13.137V72.876h6.236v13.137l11.197-13.137h7.75l-11.26 12.894 12.108 19.252h-7.872l-8.777-14.832-3.148 3.39v11.442h-6.236V93.398l-3.148-3.208m44.738.787h8.535l-4.296-8.596-4.237 8.598zm11.563 6.054h-14.59l-3.815 7.993h-7.02l15.74-32.086h4.782l15.862 32.086h-7.024l-3.935-7.99z"/><path fill="#D12138" d="M0 .622h132.378V132.94H0V.622z"/><path fill="#FFF" d="M43.935 81.245v-28.62l14.32 14.297-14.32 14.323zM74.13 66.922l14.315-14.32v28.65L74.13 66.92zM32.71 42.98v46.924l11.225 7.236v-.02l22.25-22.25 22.26 22.264v.006l11.22-7.236V42.98l-11.22-6.257v.005l-22.26 22.265-22.25-22.246v-.024L32.71 42.98z"/><g transform="translate(51 52)"><mask id="b"><use xlink:href="#a"/></mask><path d="M19.162 10.954l-7.943 7.94L.365 8.044 8.31.1l10.852 10.854" mask="url(#b)"/></g><g transform="translate(62 62)"><mask id="d"><use xlink:href="#c"/></mask><path d="M.22 8.895L8.16.955l10.853 10.85-7.942 7.943L.22 8.895" mask="url(#d)"/></g><path fill="#FFF" d="M71.665 53.508l7.908 7.968L60.69 80.363l-7.933-7.944 18.908-18.913"/></g></svg>',"alarm-clock":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 21" width="21" height="21"><path stroke="null" d="M4.81.048C2.598.048.8 1.848.8 4.058c0 .754.225 1.445.59 2.05C2.82 3.82 5.095 2.113 7.77 1.413 7.033.593 5.992.046 4.81.046v.002zM16.152.046c-1.185 0-2.226.546-2.96 1.368 2.683.7 4.943 2.406 6.377 4.694.36-.605.59-1.294.59-2.05 0-2.208-1.8-4.01-4.01-4.01V.045zm-5.65 2.508c-5.087 0-9.203 4.16-9.203 9.248 0 1.987.61 3.827 1.68 5.33l-1.32 1.685a1.25 1.25 0 1 0 1.96 1.55l1.09-1.41c1.58 1.274 3.59 2.048 5.79 2.048 2.18 0 4.21-.74 5.78-2.004l1.05 1.37a1.25 1.25 0 1 0 1.954-1.55l-1.276-1.64c1.082-1.51 1.686-3.37 1.686-5.37 0-5.09-4.114-9.25-9.202-9.25zm0 2.368c3.785 0 6.835 3.095 6.835 6.88 0 1.8-.694 3.427-1.822 4.646a1.24 1.24 0 0 0-.092.092c-1.242 1.29-2.98 2.096-4.92 2.096-3.785 0-6.835-3.05-6.835-6.833 0-3.785 3.05-6.88 6.835-6.88zm-.09 1.185a.948.948 0 0 0-.138.044.948.948 0 0 0-.73.96v4.29l-1.822 1.91a.95.95 0 1 0 1.368 1.32l2.096-2.18.275-.274V7.11a.948.948 0 0 0-1.05-1z"/></svg>',"baloon-with-chart":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 15" width="16px" height="15px"><path fill-rule="evenodd" d="M1.6 0C.72 0 .008.675.008 1.5L0 15l3.2-3h11.2c.88 0 1.6-.675 1.6-1.5v-9c0-.825-.72-1.5-1.6-1.5H1.6zm4.823 6.36L8.73 8.37c.38.332 1.004.265 1.286-.138l2.856-4.082c.245-.35.128-.814-.26-1.035-.39-.22-.905-.115-1.15.235L9.15 6.648 6.907 4.693c-.362-.315-.95-.272-1.25.09l-2.492 3.02c-.275.332-.198.802.17 1.05.37.246.892.177 1.167-.156l1.92-2.338z"/></svg>',baloon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 14" width="15px" height="14px"><path d="M1.25 0C.562 0 .006.573.006 1.273L0 14l2.5-3h11.25c.688 0 1.25-.573 1.25-1.273V1.273C15 .573 14.437 0 13.75 0H1.25zM12 8H3V6h9v2zm0-3H3V3h9v2z"/></svg>',base:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="2 6 27.1 22" width="27.1" height="22"><path d="M12.1 24h-2v-1h.4c-.5-.3-.9-.7-1.4-1.2v.2H4v-1h4.3c-.3-.3-.5-.7-.7-1H4v-1h3c-.2-.3-.3-.7-.4-1H4v-1h2.3c-.2-.8-.3-1.6-.3-2.5 0-1.6.4-3.1 1-4.5H2v18h15v-3h-.5c-1.6 0-3.1-.4-4.4-1zM9 26H4v-1h5v1zm0-2H4v-1h5v1zm6 2h-5v-1h5v1zm8.5-6.6c1-1.4 1.5-3 1.5-4.9C25 9.8 21.2 6 16.5 6S8 9.8 8 14.5s3.8 8.5 8.5 8.5c1.8 0 3.5-.6 4.9-1.5l5.6 5.6 2.1-2.1-5.6-5.6zM22 18.1L20.1 20c-1 .7-2.3 1.1-3.6 1.1-3.6 0-6.5-2.9-6.5-6.5S12.9 8 16.5 8s6.5 2.9 6.5 6.5c0 1.3-.4 2.5-1 3.6z"/></svg>',"bug-report":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M23 11h-2.8c-.5-.8-1.1-1.5-1.8-2L20 7.4 18.6 6l-2.2 2.2C16 8.1 15.5 8 15 8c-.5 0-1 .1-1.4.2L11.4 6 10 7.4 11.6 9c-.7.5-1.3 1.2-1.8 2H7v2h2.1c-.1.3-.1.7-.1 1v1H7v2h2v1c0 .3 0 .7.1 1H7v2h2.8c1 1.8 3 3 5.2 3s4.2-1.2 5.2-3H23v-2h-2.1c.1-.3.1-.7.1-1v-1h2v-2h-2v-1c0-.3 0-.7-.1-1H23v-2zm-6 8h-4v-2h4v2zm0-4h-4v-2h4v2z"/></svg>',calendar:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22" width="22" height="22"><path d="M6.5 1C5.67 1 5 1.67 5 2.5v1C5 4.33 5.67 5 6.5 5S8 4.33 8 3.5v-1C8 1.67 7.33 1 6.5 1zm8 0c-.83 0-1.5.67-1.5 1.5v1c0 .83.67 1.5 1.5 1.5S16 4.33 16 3.5v-1c0-.83-.67-1.5-1.5-1.5zM1 4v16h19V4h-3.05c-.238 1.164-1.262 2-2.45 2-1.186-.002-2.208-.838-2.445-2H8.95C8.71 5.164 7.687 6 6.5 6c-1.186-.002-2.208-.838-2.445-2H1zm20 2v15H3v1h19V6h-1zM2 8h17v11H2V8zm3 1v3h3V9H5zm4 0v3h3V9H9zm4 0v3h3V9h-3zm-8 4v3h3v-3H5zm4 0v3h3v-3H9zm4 0v3h3v-3h-3z"/></svg>',"chart-smooth-arrow-up":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 17" width="24" height="17"><g fill-rule="evenodd"><path d="M1.826 16.913l4.088-6c.85-1.244 2.036-1.25 2.896-.018l2.718 3.897c1.698 2.436 4.46 2.235 5.79-.425l6.457-12.92-1.79-.894-6.456 12.92c-.65 1.302-1.53 1.366-2.365.175L10.45 9.75c-1.66-2.38-4.55-2.365-6.188.037l-4.088 6 1.652 1.126zM7 .7v6.1h1V.2H7v.5z"/><path d="M7.146.346l-2.8 2.8-.353.354.707.707.354-.353 2.8-2.8L8.207.7 7.5-.007l-.354.353z"/><path d="M7.146 1.054l2.8 2.8.354.353.707-.707-.353-.354-2.8-2.8L7.5-.007 6.793.7l.353.354z"/></g></svg>',"chart-smooth":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 17" width="24px" height="17px"><path fill-rule="evenodd" d="M1.826 16.913l4.088-6c.85-1.244 2.036-1.25 2.896-.018l2.718 3.897c1.698 2.436 4.46 2.235 5.79-.425l6.457-12.92-1.79-.894-6.456 12.92c-.65 1.302-1.53 1.366-2.363.175L10.45 9.75c-1.66-2.38-4.55-2.365-6.188.037l-4.088 6 1.652 1.126z"/></svg>',"chat-add-people":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 17"><circle cx="10" cy="6" r="3"/><path d="M10 10c-4.575 0-6 3.333-6 3.333V15h12v-1.667S14.575 10 10 10zM2 5v6h2V5zM6 7v2H0V7z"/></svg>',"chat-new-chat":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 34 34"><path d="M21.197 2.06c-7.07 0-12.8 5.83-12.8 13.027 0 7.14 5.644 12.934 12.638 13.024v5.544l8.747-8.902C32.372 22.355 34 18.89 34 15.03 34 7.832 28.267 2 21.197 2zM10.463 27.674v-1.58l-1.275-.017c-3.642-.046-6.606-3.1-6.606-6.806 0-3.053 1.986-5.644 4.71-6.505.16-.984.417-1.935.764-2.844C3.518 10.52 0 14.45 0 19.246c0 4.7 3.433 8.64 7.88 9.33V34l6.377-6.49c-.762-.445-1.48-.957-2.146-1.533l-1.644 1.674z"/></svg>',"chat-quote":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 24"><path d="M32 24V0L20 12v12zm-20 0V0L0 12v12z"/></svg>',chat:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="4 6 23 21" width="23" height="21"><path d="M22 6H5v12h1v4l4-4h3v-6h9V6zm-8 7v10h8l4 3v-3h1V13H14z"/></svg>',"close-cross":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 9 9"><path d="M2 1L1 2l2.5 2.5L1 7l1 1 2.5-2.5L7 8l1-1-2.5-2.5L8 2 7 1 4.5 3.5z"/></svg>',close:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="15" height="15" enable-background="new 0 0 24 24" version="1"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm4.9 13.5l-1.4 1.4-3.5-3.5-3.5 3.5-1.4-1.4 3.5-3.5-3.5-3.5 1.4-1.4 3.5 3.5 3.5-3.5 1.4 1.4-3.5 3.5 3.5 3.5z"/></svg>',comment:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M50.008 0C29.768 0 9.526.342 7.144 1.03.544 2.93.4 3.64.066 35.444-.097 50.977.04 65.6.374 67.94c.808 5.67 3.695 8.535 9.47 9.398 6.977 1.044 7.848 2.302 7.848 11.355 0 4.23.436 8.537.97 9.57 1.826 3.543 4.7 2.06 15.778-8.146 5.987-5.515 11.518-10.438 12.29-10.938.772-.5 11.54-1.13 23.93-1.397 25.646-.554 26.73-.85 28.54-7.83.665-2.57.923-14.208.738-33.35-.32-33.097-.434-33.663-7.068-35.575C90.488.34 70.248 0 50.008 0zM15.002 20.608h69.94v10.37h-69.94V20.61zm0 25.927h69.94v10.37h-69.94v-10.37z"/><path fill-opacity="0" d="M64.358-.26h52.402v6.945H64.358z"/></svg>',document:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="50" height="50"><title/><desc/><g fill="none" fill-rule="evenodd"><g fill="#929292"><path d="M19.5 3H9.003C7.897 3 7 3.898 7 5.007v22.986C7 29.1 7.89 30 8.997 30h15.006C25.106 30 26 29.102 26 28.01V10l-6-7h-.5zM19 4H8.996C8.446 4 8 4.455 8 4.995v23.01c0 .55.455.995 1 .995h15c.552 0 1-.445 1-.993V11h-4.002C19.894 11 19 10.113 19 8.994V4zm1 .5v4.49c0 .558.45 1.01.997 1.01H24.7L20 4.5zM10 10zm0-3zm0 6zm0 3zm0 3zm0 3zm0 3z"/></g></g></svg>',edit:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60"><path d="M0 46l35-35 14 14-35 35H0zM39 7l6-6c5-5 19 9 14 14l-6 6z"/></svg>',facebook:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 7 12"><path d="M4.09 12V6.526h1.857l.278-2.133H4.09V3.03c0-.617.173-1.037 1.068-1.037H6.3V.083C6.102.06 5.425 0 4.636 0 2.99 0 1.862.994 1.862 2.82v1.573H0v2.133h1.862V12H4.09z"/></svg>',"flag-ar":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fff" d="M0 0h16v11H0z"/><path fill="#74acdf" d="M0 8h16v3H0zM0 0h16v3H0z"/><circle fill="#f6b40e" fill-opacity=".5" cx="8" cy="5.5" r="2"/><circle fill="#f6b40e" cx="8" cy="5.5" r="1"/></svg>',"flag-at":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#df0000" d="M0 0h16v11H0z"/><path fill="#fff" d="M0 4h16v3H0z"/></svg>',"flag-au":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#00008b" d="M0 0h16v11H0z"/><path fill="#fff" d="M0 0v1.043l.5.357H0v2.2h.498L0 3.955V5h1.46l.94-.672V5h2.2v-.67l.94.67H7V3.957L6.5 3.6H7V1.4h-.5l.5-.357V0H5.537L4.6.67V0H2.4v.672L1.46 0H0zm12 5h1v1h-1z"/><path fill="red" d="M0 0v.307L1.67 1.5h.86L.43 0H0zm3 0v2H0v1h3v2h1V3h3V2H4V0H3zm3.57 0l-2.1 1.5h.86L7 .307V0h-.43zm-4.9 3.5L0 4.693V5h.43l2.1-1.5h-.86zm2.8 0L6.57 5H7v-.307L5.33 3.5h-.86z"/><circle fill="#fff" cx="12.5" cy="1.5" r="1"/><circle fill="#fff" cx="14.5" cy="3.5" r="1"/><circle fill="#fff" cx="9.5" cy="4.5" r="1"/><circle fill="#fff" cx="11.5" cy="9.5" r="1"/><path fill="#fff" d="M3 6.5l-1 1v1l1 1h1l1-1v-1l-1-1H3z"/></svg>',"flag-br":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#009b3a" d="M0 0h16v11H0z"/><path fill="#fedf00" d="M8 1l7 4.5L8 10 1 5.5z"/><circle fill="#002776" cx="8" cy="5.5" r="3"/><path fill="#fff" d="M5.424 3.97c-.114.19-.207.394-.276.606 2.325-.12 4.046.182 5.635 2.037.086-.218.147-.445.18-.677C9.39 4.156 7.72 3.89 5.423 3.97z"/></svg>',"flag-btc":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path fill="#f68f2d" d="M10.67 7.597c.617-.314 1.003-.868.913-1.79C11.463 4.547 10.375 4.12 9 4V2.258H8V4H7V2.258H6V4c-.23.005-.438.014-.66.014V4.01L3.873 4v1.144s.787-.015.774 0c.43 0 .572.25.612.466v4.787c-.02.135-.1.352-.4.352.013.01-.776 0-.776 0L3.874 12H6v1.793h1V12h1v1.793h1V12c1.79-.103 3.042-.524 3.197-2.204.126-1.352-.51-1.955-1.527-2.2zM7.013 5.22c.6 0 2.585-.19 2.585 1.063 0 1.202-1.984 1.06-2.585 1.06zm0 5.538V8.416c.722 0 3.08-.207 3.08 1.17 0 1.322-2.358 1.17-3.08 1.172z"/><path fill="#f68f2d" d="M8 0a8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8 8 8 0 0 0-8-8zm0 1.234A6.766 6.766 0 0 1 14.766 8 6.766 6.766 0 0 1 8 14.766 6.766 6.766 0 0 1 1.234 8 6.766 6.766 0 0 1 8 1.234z"/></svg>',"flag-ca":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fff" d="M0 0h16v11H0z"/><path fill="red" d="M0 0h4v11H0zm12 0h4v11h-4zM6.75 2.5l.25 2L5.5 4l-1 .75L5 6l1 .5V7h1.5v1.877h1V7H10v-.5l1-.5.5-1.25-1-.75-1.5.5.2-2L8 1.75z"/></svg>',"flag-ch":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#d52b1e" d="M0 0h16v11H0z"/><path fill="#fff" d="M7 2v2H5v3h2v2h3V7h2V4h-2V2H7z"/></svg>',"flag-cn":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#de2910" d="M0 0h16v11H0z"/><circle fill="#ffde00" cx="5.5" cy="1.5" r=".5"/><circle fill="#ffde00" cx="5.5" cy="4.5" r=".5"/><circle fill="#ffde00" cx="6.5" cy="2.5" r=".5"/><circle fill="#ffde00" cx="6.5" cy="3.5" r=".5"/><path fill="#ffde00" d="M2.97 1.047l.587 1.19 1.314.192-.95.925.225 1.31-1.175-.62-1.177.62.225-1.31-.95-.927 1.313-.192z"/></svg>',"flag-cz":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fff" d="M0 0h16v11H0z"/><path fill="#d7141a" d="M0 5.5h16V11H0z"/><path fill="#11457e" d="M8 5.5L0 11V0z"/><path fill="000" fill-opacity=".15" d="M0 0l6 .5h9.5l.5 5V0z" class="flag-shade"/></svg>',"flag-de":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#ffce00" d="M0 0h16v11H0z"/><path fill="#d00" d="M0 4h16v3H0z"/><path d="M0 0h16v4H0z"/></svg>',"flag-es":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#ffc400" d="M0 0h16v11H0z"/><path fill="#c60b1e" d="M0 8h16v3H0zm0-8h16v3H0zm7 5v2c0 .278-.446.5-1 .5S5 7.28 5 7V5z"/><path fill="#ffc400" fill-opacity=".5" d="M5 6h2v2H5z"/><path fill="#ccc" d="M6 5h1v1H6zM7.5 4.5H8v3h-.5zM4 4.5h.5v3H4z"/><path fill="#c60b1e" d="M6 4s-.9 0-1 .268c-.1.268.3.532 1 .632.7-.1 1.1-.364 1-.632C6.9 4 6 4 6 4z"/></svg>',"flag-eu":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#039" d="M0 0h16v11H0z"/><path fill="#fc0" d="M8 2h1v1H8zM6 3h1v1H6zM5 5h1v1H5zm1 2h1v1H6zm2 1h1v1H8zm2-1h1v1h-1zm1-2h1v1h-1zm-1-2h1v1h-1z"/></svg>',"flag-fa":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fff" d="M0 0h16v11H0z"/><path fill="#239f40" d="M0 0h16v3H0z"/><path fill="#da0000" d="M0 8h16v3H0zm7.7-1V4h.6v3zM8 7c-.7-.7-1.3-1.6-.8-3-.7 1-.8 2.7.8 3zM7 4c-.6.7-.6 1.8-.4 2.6-.7-1-.4-2 .4-2.6zm1 3c.7-.7 1.3-1.6.8-3 .7 1 .8 2.7-.8 3zm1-3c.6.7.6 1.8.4 2.6.7-1 .4-2-.4-2.6z"/></svg>',"flag-fr":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fff" d="M0 0h16v11H0z"/><path fill="#002395" d="M0 0h5v11H0z"/><path fill="#ed2939" d="M11 0h5v11h-5z"/></svg>',"flag-fx":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#333" d="M0 0v10h2.5V6H6V4H2.5V2H6V0zm15.5 0H13L6.5 10H9z"/><path fill="#333" d="M7 0h3l6 10h-3z"/></svg>',"flag-gr":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fff" d="M0 0h16v11H0z"/><path fill="#0d5eaf" d="M0 0v2h2V0H0zm4 0v2h2V1h10V0H4zm2 2.5v1h10v-1H6zM0 4v2h2V4H0zm4 0v2h12V5H6V4H4zM0 7.5v1h16v-1H0zM0 10v1h16v-1H0z"/></svg>',"flag-ie":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fff" d="M0 0h16v11H0z"/><path fill="#009A49" d="M0 0h5v11H0z"/><path fill="#FF7900" d="M11 0h5v11h-5z"/></svg>',"flag-il":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fff" d="M0 0h16v11H0z"/><path fill="#0038b8" d="M0 1h16v2H0zM0 8h16v2H0z"/><path fill="#0038b8" color="#000" d="M5.834 4.25L8 8l.217-.375 1.95-3.375H5.833zm.867.5h2.6L8 7 6.7 4.75z"/><path fill="#0038b8" d="M8 3l-.217.375-1.95 3.375h4.333L8 3zm0 1l1.3 2.25H6.7L8 4z"/></svg>',"flag-in":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fff" d="M0 0h16v11H0z"/><path fill="#f93" d="M0 0h16v3H0z"/><path fill="#128807" d="M0 8h16v3H0z"/><circle fill="#008" cx="8" cy="5.5" r="1.5"/><circle fill="#fff" cx="8" cy="5.5" opacity=".7" r="1.25"/><circle fill="#008" cx="8" cy="5.5" r=".4"/></svg>',"flag-it":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fff" d="M0 0h16v11H0z"/><path fill="#009246" d="M0 0h5v11H0z"/><path fill="#ce2b37" d="M11 0h5v11h-5z"/></svg>',"flag-jp":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fff" d="M0 0h16v11H0z"/><circle fill="#bc002d" cx="8" cy="5.5" r="3.25"/><path fill="#000" fill-opacity=".15" d="M0 0v11h16V0zm.5.5h15v10H.5z" class="flag-shade"/></svg>',"flag-ko":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fff" d="M0 0h16v11H0z"/><path fill="#c60c30" d="M9.27 2.782c-1.502-.7-3.287-.05-3.987 1.45-.35.752-.15 2.19.6 2.54l4.88-.1c.63-1.487-.03-3.207-1.493-3.89z"/><path fill="#003478" d="M6.73 8.218a3 3 0 0 0 3.987-1.45 1.5 1.5 0 0 0-.725-1.994 1.5 1.5 0 0 0-1.994.725 1.5 1.5 0 0 1-1.993.725 1.5 1.5 0 0 1-.767-1.896A3 3 0 0 0 6.73 8.217z"/><path fill-opacity=".5" d="M3.1 7.2l2 2-.8.8-2-2zM11.7 1l2 2-.8.8-2-2zM12.9 7.2l-2 2 .8.8 2-2zM4.3 1l-2 2 .8.8 2-2z"/><path fill-opacity=".15" d="M0 0v11h16V0zm.5.5l15 .1v9.9H.5z" class="flag-shade"/></svg>',"flag-nl":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fff" d="M0 0h16v11H0z"/><path fill="#ae1c28" d="M0 0h16v4H0z"/><path fill="#21468b" d="M0 7h16v4H0z"/></svg>',"flag-no":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#ef2b2d" d="M0 0h16v11H0z"/><path fill="#fff" d="M4.1 0h3.4v11H4.1z"/><path fill="#fff" d="M0 4.1h16v3.4H0z"/><path fill="#002868" d="M5 0h1.6v11h-1.6z"/><path fill="#002868" d="M0 5h16v1.6H0z"/></svg>',"flag-nz":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#00008b" d="M0 0h16v11H0z"/><path fill="#fff" d="M0 0v1.043l.5.357H0v2.2h.498L0 3.955V5h1.46l.94-.672V5h2.2v-.67l.94.67H7V3.957L6.5 3.6H7V1.4h-.5l.5-.357V0H5.537L4.6.67V0H2.4v.672L1.46 0H0z"/><path fill="red" d="M0 0v.307L1.67 1.5h.86L.43 0zm3 0v2H0v1h3v2h1V3h3V2H4V0zm3.57 0l-2.1 1.5h.86L7 .307V0zm-4.9 3.5L0 4.693V5h.43l2.1-1.5zm2.8 0L6.57 5H7v-.307L5.33 3.5z"/><circle fill="red" cx="12.5" cy="1.5" r="1"/><circle fill="red" cx="14.5" cy="3.5" r="1"/><circle fill="red" cx="9.5" cy="4.5" r="1"/><circle fill="red" cx="11.5" cy="9.5" r="1"/></svg>',"flag-pl":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fff" d="M0 0h16v11H0z"/><path fill="#dc143c" d="M0 6h16v5H0z"/><path fill-opacity=".15" d="M0 0v6L.5.5h15L16 6V0z" class="flag-shade"/></svg>',"flag-ro":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fcd116" d="M0 0h16v11H0z"/><path fill="#002b7f" d="M0 0h5v11H0z"/><path fill="#ce1126" d="M11 0h5v11h-5z"/></svg>',"flag-rounded-ar":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Argentina</title><defs><circle cx="8" cy="8" r="8" id="a"/></defs><g fill="none" fill-rule="evenodd"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#F5F7FA" xlink:href="#a"/><path fill="#8CBAE2" d="M0 0h16v4.44H0V0zM0 11.56h16V16H0v-4.44z" mask="url(#b)"/><path fill="#F6BB42" d="M9.964 8.678a.72.72 0 0 1 .08-.303l.138-.24a.313.313 0 0 0 0-.283l-.142-.248a.724.724 0 0 1-.084-.303v-.287a.305.305 0 0 0-.143-.242l-.24-.138a.687.687 0 0 1-.222-.222l-.14-.24a.306.306 0 0 0-.24-.142h-.29a.71.71 0 0 1-.302-.08l-.254-.143a.31.31 0 0 0-.28 0l-.24.14a.7.7 0 0 1-.302.082h-.28a.314.314 0 0 0-.244.14l-.142.25a.748.748 0 0 1-.223.222l-.25.143a.315.315 0 0 0-.136.244v.28a.718.718 0 0 1-.08.3l-.143.243a.313.313 0 0 0 0 .28l.147.25a.72.72 0 0 1 .08.303v.287a.33.33 0 0 0 .143.243l.245.138c.09.058.165.134.222.223l.138.242a.314.314 0 0 0 .244.14h.29a.71.71 0 0 1 .3.08l.25.143a.31.31 0 0 0 .28 0l.245-.14a.707.707 0 0 1 .302-.082h.28a.306.306 0 0 0 .24-.14l.146-.25a.694.694 0 0 1 .222-.222l.25-.144a.316.316 0 0 0 .136-.244v-.28.002z" mask="url(#b)"/></g></svg>',"flag-rounded-at":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Austria</title><defs><circle cx="8" cy="8" r="8" id="a"/></defs><g fill="none" fill-rule="evenodd"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#F5F7FA" xlink:href="#a"/><path fill="#ED5565" d="M0 0h16v5.333H0zM0 10.667h16V16H0z" mask="url(#b)"/></g></svg>',"flag-rounded-au":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><title>Australia</title><circle fill="#4758a9" cx="8" cy="8" r="8"/><path fill="#fff" d="M8 0a8 8 0 0 0-1.56.162L4.16 2.47V.99a8 8 0 0 0-1.348.93v.375l-.2-.2a8 8 0 0 0-.936 1.018l.164.166h-.29A8 8 0 0 0 .748 4.64h1.266L.14 6.537A8 8 0 0 0 0 8h.63l2.183-2.207V8H4.16V5.63L6.504 8H8v-.457l-2.87-2.9H8V3.28H5.293L8 .544V0zm3.393 1.914c-.028 0-.055.033-.075.098l-.15.535a.36.36 0 0 1-.31.24l-.49.016c-.132.003-.16.076-.056.166l.35.304a.452.452 0 0 1 .125.4l-.117.49c-.03.13.032.173.14.1l.407-.3a.388.388 0 0 1 .398-.014l.41.257c.11.07.173.023.137-.107l-.123-.43a.422.422 0 0 1 .113-.397l.383-.34c.098-.088.072-.163-.058-.163l-.503-.004a.368.368 0 0 1-.32-.235l-.188-.52c-.023-.064-.05-.095-.077-.095zm3.404 1.875l-.037.12a.35.35 0 0 1-.307.24l-.492.017c-.126.004-.155.076-.057.166l.35.307a.444.444 0 0 1 .13.397l-.12.49c-.03.13.036.176.142.098l.41-.293a.388.388 0 0 1 .4-.014l.4.252a8 8 0 0 0-.817-1.78zm-4.98 1.87c-.028 0-.053.034-.07.1l-.157.532a.35.35 0 0 1-.307.242l-.488.016c-.134.005-.16.077-.06.167l.355.308a.45.45 0 0 1 .123.4l-.115.485c-.032.13.03.173.136.098h.002l.407-.295a.388.388 0 0 1 .4-.016l.406.256c.113.07.177.023.137-.105l-.12-.43a.42.42 0 0 1 .114-.397l.38-.337c.1-.088.075-.162-.06-.162l-.5-.003a.374.374 0 0 1-.32-.235l-.185-.524c-.024-.065-.052-.097-.08-.096zm3.826 2.384c-.02 0-.04.024-.053.07l-.11.38c-.032.095-.118.165-.218.173l-.356.012c-.094 0-.11.054-.04.116l.253.223a.32.32 0 0 1 .09.284l-.088.347c-.022.094.024.126.104.07l.002-.002.29-.212a.274.274 0 0 1 .285-.01l.295.182c.08.05.123.016.097-.076L14.11 9.3a.3.3 0 0 1 .08-.284l.277-.243c.07-.063.05-.117-.045-.117l-.36-.004c-.1-.007-.192-.07-.232-.166l-.133-.375c-.015-.043-.035-.065-.054-.064zM3.51 10.43c-.036 0-.07.042-.096.125l-.2.685a.448.448 0 0 1-.396.31l-.63.018c-.175.004-.205.102-.077.215l.454.4a.572.572 0 0 1 .16.508l-.15.63c-.04.17.045.224.183.124v.002l.523-.38a.5.5 0 0 1 .515-.016l.527.33c.143.09.225.025.18-.142l-.16-.55a.55.55 0 0 1 .146-.51l.494-.436c.13-.114.094-.21-.074-.21l-.65-.007c-.184-.013-.344-.128-.414-.298l-.235-.676c-.03-.08-.066-.12-.1-.12z"/><path fill="#ed5565" d="M8 0a8 8 0 0 0-.977.07L4.16 2.967v.314h.64L8 .047V0zM3.822 1.186a8 8 0 0 0-.67.457V3.62h-1.84a8 8 0 0 0-.4.683h2.24V8h.67V4.303H8V3.62H3.822V1.187zM2.357 2.334a8 8 0 0 0-.466.502l.443.445h.48v-.484l-.455-.46zm.15 2.31L.05 7.126A8 8 0 0 0 0 8h.14l2.67-2.705v-.652h-.306zm1.653 0v.485L6.998 8h.96L4.642 4.643h-.48z"/></svg>',"flag-rounded-br":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Brazil</title><defs><ellipse cx="8.039" cy="8" rx="7.784" ry="8" id="a"/></defs><g fill="none" fill-rule="evenodd"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#52C162" xlink:href="#a"/><path fill="#F6D660" d="M-1.734 8.01L7.823.34l9.556 7.67-9.557 7.668-9.557-7.67z" mask="url(#b)"/><path fill="#4758A9" d="M7.823 2.724c2.014-.024 3.843 1.205 4.63 3.112.787 1.906.376 4.112-1.04 5.584-1.418 1.473-3.56 1.92-5.423 1.133C4.127 11.766 2.91 9.9 2.91 7.83c-.014-2.804 2.185-5.09 4.913-5.106z" mask="url(#b)"/><path fill="#F5F7FA" d="M12.078 10.212c.14-.305.25-.625.328-.953a6.703 6.703 0 0 0-3.89-3.763 6.463 6.463 0 0 0-5.325.41c-.112.25-.206.508-.28.773a6.465 6.465 0 0 1 5.343-.313 6.716 6.716 0 0 1 3.825 3.845z" mask="url(#b)"/></g></svg>',"flag-rounded-btc":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><title>Bitcoin</title><g fill="none" fill-rule="evenodd" transform="translate(1 1)"><circle stroke="#F88F17" cx="8" cy="8" r="8"/><path fill="#F88F17" d="M8 12v2h.827v-2h.695c.543 0 1.012-.04 1.408-.12.396-.082.722-.215.98-.403.256-.187.444-.436.566-.748.12-.312.18-.7.18-1.16 0-.602-.184-1.064-.555-1.387-.37-.323-.888-.513-1.555-.572.22-.043.425-.11.616-.197a1.72 1.72 0 0 0 .502-.347 1.53 1.53 0 0 0 .335-.51c.08-.2.12-.426.12-.683 0-.447-.07-.805-.208-1.072a1.48 1.48 0 0 0-.584-.615 2.47 2.47 0 0 0-.908-.286 8.854 8.854 0 0 0-1.17-.073h-.42V2H8v1.827H6.827V2H6v1.827H4.407v.98c.653 0 .98.168.98.505v5.28c0 .337-.327.506-.98.506V12H6v2h.827v-2H8zm-.38-3.817v2.64h1.418c.25 0 .456-.033.62-.1a.96.96 0 0 0 .398-.28c.1-.12.168-.263.21-.428.04-.166.06-.347.06-.545 0-.425-.1-.746-.298-.963-.198-.216-.528-.324-.99-.324h-1.42zm0-3.102V7.25H8.75c.403 0 .684-.1.84-.297.16-.197.238-.505.238-.923 0-.63-.36-.946-1.078-.946H7.62z"/></g></svg>',
"flag-rounded-ca":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><title>Canada</title><path fill="#f5f7fa" d="M8 0a8 8 0 0 0-4.1 1.14v13.72A8 8 0 0 0 8 16a8 8 0 0 0 4.1-1.14V1.14A8 8 0 0 0 8 0z"/><path fill="#ed5565" fill-rule="evenodd" d="M11.996 1.076v13.842A8 8 0 0 0 16 8a8 8 0 0 0-4.004-6.924zM4 1.084A8 8 0 0 0 0 8a8 8 0 0 0 4 6.92V1.084zM8.004 4.89c-.072 0-.143.053-.2.16l-.163.323c-.072.16-.17.31-.29.445a.89.89 0 0 1-.41-.125c-.11-.06-.167.085-.12.323l.146.834c.046.193.05.394.01.588-.04.086-.304-.13-.46-.315l-.142-.17c-.155-.183-.31-.237-.342-.12a1.7 1.7 0 0 1-.09.27 1.48 1.48 0 0 1-.55-.05l-.05-.01a.246.246 0 0 0-.317.328l.014.06c.06.233.13.487.153.567a.46.46 0 0 1-.25.275c-.09.046-.014.21.173.367l.88.755c.136.11.265.23.384.355a.88.88 0 0 1-.045.387c-.037.13.127.21.367.18l.675-.08a2.8 2.8 0 0 1 .498-.034c.05.17.067.348.047.523l-.037.836a.235.235 0 1 0 .23 0l-.017-.835a1.907 1.907 0 0 1 .027-.493 1.4 1.4 0 0 1 .516 0l.68.084c.234.03.405-.052.365-.18a1.444 1.444 0 0 1-.063-.322c.11-.16.246-.3.4-.42l.884-.755c.182-.157.262-.322.174-.366a.728.728 0 0 1-.213-.146c.008-.236.045-.47.11-.697l.015-.052a.246.246 0 0 0-.316-.33l-.043.01a2.213 2.213 0 0 1-.5.072.635.635 0 0 1-.144-.294c-.036-.117-.186-.063-.34.12l-.15.173c-.124.154-.27.286-.435.4-.085.035-.057-.44-.013-.677l.15-.834c.04-.24-.018-.387-.13-.326-.102.058-.21.11-.32.15-.17-.116-.3-.28-.377-.472l-.166-.318-.005-.004c-.055-.107-.127-.16-.2-.16z"/></svg>',"flag-rounded-ch":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><title>Switzerland</title><g fill="none" fill-rule="evenodd"><circle fill="#ED5565" cx="8" cy="8" r="8"/><path fill="#FFF" d="M7.333 4h1.334c.368 0 .666.298.666.667v6.67a.667.667 0 0 1-.666.666H7.333a.667.667 0 0 1-.666-.667V4.67A.667.667 0 0 1 7.333 4z"/><path fill="#FFF" d="M4.004 8.67V7.337c0-.368.3-.667.667-.667h6.66c.367 0 .666.3.666.667V8.67a.667.667 0 0 1-.667.667H4.67a.667.667 0 0 1-.666-.667z"/></g></svg>',"flag-rounded-cn":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><title>China</title><circle fill="#ed5565" cx="8" cy="8" r="8"/><path fill="#f6bb42" d="M7.52 1.36c-.023.002-.044.03-.06.087l-.13.477a.31.31 0 0 1-.26.215l-.418.01c-.114.003-.135.07-.05.15l.3.275a.42.42 0 0 1 .104.356l-.1.434c-.027.12.03.16.12.09l.347-.266a.31.31 0 0 1 .338-.01l.348.228c.095.064.147.02.117-.095l-.105-.38a.4.4 0 0 1 .096-.356l.326-.303c.085-.076.06-.144-.05-.144l-.428-.004c-.123-.01-.228-.09-.274-.206l-.154-.47c-.02-.057-.044-.083-.066-.083zM2.88 2.726c-.07 0-.135.086-.183.252l-.385 1.37a.896.896 0 0 1-.773.622l-.95.028a8 8 0 0 0-.226.62l.678.61a1.166 1.166 0 0 1 .314 1.02l-.293 1.254c-.077.337.08.448.348.25h.003l1.024-.756a.954.954 0 0 1 1.003-.033l1.027.656c.28.18.436.055.342-.277L4.504 7.24a1.1 1.1 0 0 1 .283-1.017l.956-.875c.25-.228.184-.416-.146-.42L4.34 4.916a.937.937 0 0 1-.807-.6l-.46-1.35c-.057-.163-.128-.243-.196-.24zm6.91.763c-.022 0-.045.03-.06.087l-.128.477a.31.31 0 0 1-.264.215l-.416.01c-.112.004-.136.07-.05.15l.3.274a.42.42 0 0 1 .105.358l-.1.434c-.026.12.03.16.12.09H9.3l.346-.264a.31.31 0 0 1 .336-.01l.346.225c.097.064.147.02.117-.096l-.103-.382a.4.4 0 0 1 .095-.356l.327-.302c.08-.08.06-.144-.05-.144l-.43-.006c-.122-.01-.227-.088-.272-.205l-.157-.47c-.02-.057-.04-.085-.064-.085zm0 2.43c-.022 0-.045.03-.06.09l-.128.473a.31.31 0 0 1-.264.217l-.416.013c-.112.003-.136.07-.05.148l.3.278a.42.42 0 0 1 .105.353l-.1.437c-.026.12.03.16.12.09l.346-.264a.312.312 0 0 1 .337-.012l.348.23c.097.065.147.02.117-.096l-.103-.383a.4.4 0 0 1 .095-.354l.327-.305c.08-.08.06-.143-.05-.143l-.43-.006c-.122-.007-.227-.09-.272-.206l-.157-.47c-.02-.056-.04-.084-.064-.083zM7.52 7.747c-.023 0-.044.03-.06.086l-.13.477a.31.31 0 0 1-.26.214l-.418.01c-.114.005-.135.073-.05.15l.3.276a.42.42 0 0 1 .104.356l-.1.436c-.027.117.03.156.12.086v.002l.347-.264a.312.312 0 0 1 .338-.012l.348.227c.095.066.147.02.117-.094l-.104-.383a.4.4 0 0 1 .097-.35l.326-.306c.085-.08.06-.144-.05-.144l-.428-.006c-.123-.01-.228-.09-.274-.207l-.153-.472c-.02-.056-.044-.083-.066-.082z"/></svg>',"flag-rounded-cz":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Czech Republic</title><defs><circle cx="8" cy="8" r="8" id="a"/></defs><g fill="none" fill-rule="evenodd"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#F5F7FA" xlink:href="#a"/><path fill="#ED5565" d="M0 8.004h16V16H0V8.004z" mask="url(#b)"/><path fill="#4758A9" d="M0 0l8.413 8.17L0 16V0z" mask="url(#b)"/></g></svg>',"flag-rounded-de":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Germany</title><defs><circle cx="8" cy="8" r="8" id="a"/></defs><g fill="none" fill-rule="evenodd"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#ED5565" xlink:href="#a"/><path fill="#434A54" d="M0-.003h16v4.89H0v-4.89z" mask="url(#b)"/><path fill="#F6BB42" d="M0 11.11h16V16H0v-4.89z" mask="url(#b)"/></g></svg>',"flag-rounded-es":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Spain</title><defs><circle cx="8" cy="8" r="8" id="a"/></defs><g fill="none" fill-rule="evenodd"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#FFCE54" xlink:href="#a"/><path fill="#ED5565" d="M-.444 0h16v3.556h-16zM0 12.444h16V16H0zM4.773 5.836a1.25 1.25 0 0 0-2 0 1.52 1.52 0 0 1-1-.416v2.72c.018 1.79 2 2.53 2 2.53s2-.74 2-2.53V5.422c-.27.258-.626.405-1 .414z" mask="url(#b)"/></g></svg>',"flag-rounded-eu":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><title>Euro</title><g fill="none" fill-rule="evenodd"><circle fill="#4758A9" cx="8" cy="8" r="8"/><path fill="#FFC84A" d="M8 4.915l-1.113.6.212-1.272-.9-.9 1.243-.186L8 2l.557 1.157 1.244.186-.9.9.213 1.272L8 4.915zM10.577 6.2L9.41 5.713l1.122-.635.133-1.267.927.852 1.25-.296-.55 1.16.64 1.085-1.267-.132-.854.965-.233-1.243zm.63 2.87l-.334-1.22 1.192.493 1.08-.675-.1 1.254 1.003.803-1.253.282-.46 1.17-.676-1.08-1.287-.078.835-.95zm-1.784 2.31l.737-1.027.367 1.236 1.204.414-1.036.712L10.7 14l-1.007-.796-1.2.38.415-1.205-.75-1.05 1.265.05zm-2.846 0l1.264-.05-.748 1.05.415 1.203-1.2-.38L5.3 14l.006-1.284-1.037-.712 1.203-.415.367-1.237.737 1.027zM4.792 9.07l.835.95-1.286.078-.674 1.08-.46-1.17-1.254-.283 1.002-.803-.1-1.254 1.08.675 1.193-.494-.335 1.22zm.63-2.87L5.19 7.443l-.855-.965-1.267.133.64-1.083-.55-1.16 1.25.295.927-.85.133 1.266 1.122.635-1.167.487z"/></g></svg>',"flag-rounded-forex":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16px" height="16px" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Forex</title><desc>Created with Sketch.</desc><defs/><g fill="none" fill-rule="evenodd" stroke="none" stroke-width="1" sketch:type="MSPage" id="Page-1"><g transform="translate(-187.000000, -249.000000)" sketch:type="MSArtboardGroup" id="Flags"><g transform="translate(187.000000, 249.000000)" sketch:type="MSLayerGroup" id="Forex"><circle fill="#F5F7FA" cx="8" cy="8" r="8" sketch:type="MSShapeGroup" id="Mask"/><path fill="#000000" fill-opacity="0.87" d="M2.22222222,4.44444444 L6.88084357,4.44444444 L6.88084357,6.01474932 L4.11478715,6.01474932 L4.11478715,7.2909336 L6.47737369,7.2909336 L6.47737369,8.76652167 L4.11478715,8.76652167 L4.11478715,11.7525935 L2.22222222,11.7525935 L2.22222222,4.44444444 Z M7.47564969,4.44444444 L9.55123188,4.44444444 L10.6326976,6.69272222 L11.6808874,4.44444444 L13.7356721,4.44444444 L11.8389477,7.98386178 L13.9145299,11.7525935 L11.7973529,11.7525935 L10.5952622,9.40461381 L9.38901203,11.7525935 L7.28431346,11.7525935 L9.38901203,7.94398102 L7.47564969,4.44444444 Z" sketch:type="MSShapeGroup" id="FX-Copy"/></g></g></g></svg>',"flag-rounded-fr":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><title>France</title><defs><circle cx="8" cy="8" r="8" id="a"/></defs><g fill="none" fill-rule="evenodd"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#F5F7FA" xlink:href="#a"/><path fill="#4758A9" d="M0 0h4.444v16H0z" mask="url(#b)"/><path fill="#ED5565" d="M11.55 0H16v16h-4.45V0z" mask="url(#b)"/></g></svg>',"flag-rounded-gb":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><title>United Kingdom</title><circle fill="#4758a9" cx="8" cy="8" r="8"/><path fill="#fff" d="M8 0a8 8 0 0 0-1.734.2v5.82L1.71 3.073A8 8 0 0 0 .687 4.768l2.328 1.505H.195A8 8 0 0 0 0 8a8 8 0 0 0 .2 1.734h3.573L.867 11.62a8 8 0 0 0 1.115 1.638l4.284-2.778v5.323A8 8 0 0 0 8 16a8 8 0 0 0 1.732-.2v-5.18l4.21 2.724a8 8 0 0 0 1.134-1.62l-3.074-1.99h3.8A8 8 0 0 0 16 8a8 8 0 0 0-.2-1.727h-3.044l2.5-1.62a8 8 0 0 0-1.04-1.686L9.73 5.87V.198A8 8 0 0 0 8 0z"/><path fill="#ed5565" d="M8 0a8 8 0 0 0-1.297.11v6.597H.115A8 8 0 0 0 0 8a8 8 0 0 0 .11 1.303h6.593v6.582A8 8 0 0 0 8 16a8 8 0 0 0 1.297-.11V9.745l4.97 3.215a8 8 0 0 0 .557-.804L11.08 9.734H9.297v-.43h6.588A8 8 0 0 0 16 8a8 8 0 0 0-.11-1.293H9.298V.115A8 8 0 0 0 8 0zm6.512 3.37l-4.48 2.903h1.802L15.03 4.2a8 8 0 0 0-.518-.83zm-13.108.103a8 8 0 0 0-.498.84l3.028 1.96H5.73l-4.326-2.8zm3.287 6.26l-3.576 2.32a8 8 0 0 0 .547.818l4.837-3.135H4.69z"/></svg>',"flag-rounded-gr":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Grecee</title><defs><circle cx="8" cy="8" r="8" id="a"/></defs><g fill="none" fill-rule="evenodd"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#F5F7FA" xlink:href="#a"/><path fill="#4A89DC" d="M0 3.556h16v1.777H0V3.556zM0 .004h16V1.77H0V.005zm0 7.108h16V8.89H0V7.112zm0 3.55h16v1.78H0v-1.78zm0 3.564h16v1.767H0v-1.767z" mask="url(#b)"/><path fill="#4A89DC" d="M0 .007h8.893v8.885H0V.007z" mask="url(#b)"/><path fill="#FFF" d="M3.55.007h1.783v8.885H3.55V.007zM0 5.337v-1.78h8.893v1.78H0z" mask="url(#b)"/></g></svg>',"flag-rounded-il":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Israel</title><defs><circle cx="8" cy="8" r="8" id="a"/></defs><g fill="none" fill-rule="evenodd"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#F5F7FA" xlink:href="#a"/><path fill="#4A89DC" d="M11.107 6.37a.154.154 0 0 0-.147-.253H9.347a.582.582 0 0 1-.45-.252L8.085 4.52a.16.16 0 0 0-.302 0l-.79 1.34a.573.573 0 0 1-.445.255H4.93a.153.153 0 0 0-.143.253L5.6 7.74a.537.537 0 0 1 0 .506l-.818 1.37a.155.155 0 0 0 .147.255h1.617c.18.01.344.105.444.254l.792 1.343a.158.158 0 0 0 .298 0l.79-1.343a.58.58 0 0 1 .45-.253h1.64a.154.154 0 0 0 .147-.253l-.818-1.37a.564.564 0 0 1 0-.507l.817-1.37zm-3.23-.363a.065.065 0 0 1 .123 0c.04.06.013.11-.053.11a.07.07 0 0 1-.07-.11zm-1.65 3.037c-.076 0-.107-.05-.07-.11a.078.078 0 0 1 .14 0c.036.06.005.11-.07.11zm.07-1.988a.078.078 0 0 1-.14 0c-.037-.06-.006-.11.07-.11.075 0 .106.05.07.11zM8 9.983a.065.065 0 0 1-.124 0 .07.07 0 0 1 .07-.11c.067 0 .094.05.054.11zm.698-1.194a.58.58 0 0 1-.45.254h-.604a.59.59 0 0 1-.453-.252l-.332-.546a.548.548 0 0 1-.01-.506l.32-.54c.1-.15.265-.244.445-.254h.636a.58.58 0 0 1 .448.254l.315.54c.08.16.08.35 0 .51l-.315.54zm.97.254c-.08 0-.112-.05-.072-.11a.075.075 0 0 1 .137 0c.04.06.01.11-.066.11zm.065-1.988a.075.075 0 0 1-.137 0c-.04-.06-.01-.11.07-.11s.107.05.067.11zM0 0h16v1.778H0zM0 14.222h16V16H0z" mask="url(#b)"/></g></svg>',"flag-rounded-in":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><title>India</title><defs><circle cx="8" cy="8" r="8" id="a"/></defs><g fill="none" fill-rule="evenodd"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#F5F7FA" xlink:href="#a"/><path fill="#FC6E51" d="M0-.003h16v4.89H0v-4.89z" mask="url(#b)"/><path fill="#57A863" d="M0 11.11h16V16H0v-4.89z" mask="url(#b)"/><path fill="#4758A9" d="M10.178 7.853l-.144-.248a.718.718 0 0 1-.082-.302v-.287a.31.31 0 0 0-.14-.242l-.243-.138a.71.71 0 0 1-.223-.222l-.14-.24a.31.31 0 0 0-.243-.14h-.287a.728.728 0 0 1-.303-.08l-.25-.143a.31.31 0 0 0-.28 0l-.24.14a.713.713 0 0 1-.303.082h-.278a.31.31 0 0 0-.243.14l-.145.248a.717.717 0 0 1-.222.223l-.248.144a.31.31 0 0 0-.14.244v.278a.71.71 0 0 1-.08.303l-.14.24a.31.31 0 0 0 0 .282l.144.248a.71.71 0 0 1 .08.302v.286c.007.1.06.19.142.243l.242.14a.71.71 0 0 1 .222.22l.14.242a.31.31 0 0 0 .243.14h.286c.105.004.21.032.303.08l.248.143a.31.31 0 0 0 .28 0l.242-.14a.71.71 0 0 1 .302-.082h.278a.31.31 0 0 0 .244-.14l.144-.25a.732.732 0 0 1 .222-.22l.248-.145a.31.31 0 0 0 .14-.243v-.278a.702.702 0 0 1 .08-.302l.14-.24a.31.31 0 0 0 0-.282zm-.864.226l-.085.144a.43.43 0 0 0-.05.183v.168a.187.187 0 0 1-.083.147l-.15.09a.436.436 0 0 0-.134.132l-.086.15a.19.19 0 0 1-.147.085h-.17a.43.43 0 0 0-.182.048l-.145.085a.19.19 0 0 1-.17 0l-.15-.086a.44.44 0 0 0-.184-.05h-.175a.19.19 0 0 1-.147-.084l-.084-.145a.438.438 0 0 0-.134-.133l-.146-.083a.188.188 0 0 1-.085-.147v-.173a.43.43 0 0 0-.05-.183l-.087-.15a.188.188 0 0 1 0-.17l.084-.146a.43.43 0 0 0 .048-.183v-.167a.188.188 0 0 1 .084-.147l.15-.09c.053-.033.1-.08.133-.132l.087-.15a.19.19 0 0 1 .147-.085h.168a.43.43 0 0 0 .183-.05l.146-.085a.19.19 0 0 1 .17 0l.15.086c.057.03.12.047.184.05h.173a.19.19 0 0 1 .148.085l.084.145c.035.054.08.1.134.133l.146.084a.19.19 0 0 1 .086.146v.173a.44.44 0 0 0 .05.183l.088.15a.19.19 0 0 1 0 .17h-.002z" mask="url(#b)"/></g></svg>',"flag-rounded-ir":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Iran</title><defs><circle cx="8" cy="8" r="8" id="a"/></defs><g fill="none" fill-rule="evenodd"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#F5F7FA" xlink:href="#a"/><path fill="#57A863" d="M-4-.003h23.556v4.89H-4v-4.89z" mask="url(#b)"/><path fill="#ED5565" d="M-4 11.11h23.556V16H-4v-4.89zM10.178 7.853l-.147-.248a.716.716 0 0 1-.08-.302v-.287a.33.33 0 0 0-.14-.242l-.246-.138a.732.732 0 0 1-.222-.222l-.138-.24a.314.314 0 0 0-.244-.14h-.284a.756.756 0 0 1-.307-.08l-.25-.143a.31.31 0 0 0-.28 0l-.24.14a.706.706 0 0 1-.302.082h-.28a.306.306 0 0 0-.24.14l-.147.248a.692.692 0 0 1-.22.223l-.246.144a.307.307 0 0 0-.142.244v.278a.658.658 0 0 1-.08.303l-.138.24a.31.31 0 0 0 0 .282l.143.248a.72.72 0 0 1 .084.302v.286c.006.1.06.19.143.243l.24.14c.09.055.167.13.223.22l.142.242a.306.306 0 0 0 .24.14h.29c.104.004.207.032.3.08l.25.143a.31.31 0 0 0 .28 0l.244-.14a.707.707 0 0 1 .302-.082h.276c.1-.006.19-.058.244-.14l.143-.25a.744.744 0 0 1 .222-.22l.248-.145a.315.315 0 0 0 .138-.243v-.28a.714.714 0 0 1 .08-.3l.142-.24a.31.31 0 0 0 0-.282zm-.867.226l-.083.144a.437.437 0 0 0-.05.183v.168a.183.183 0 0 1-.084.147l-.146.09a.408.408 0 0 0-.134.132l-.09.15a.188.188 0 0 1-.145.085h-.17a.422.422 0 0 0-.18.048l-.148.085a.187.187 0 0 1-.17 0l-.15-.086a.444.444 0 0 0-.182-.05h-.174a.188.188 0 0 1-.146-.084l-.085-.145a.422.422 0 0 0-.137-.133l-.143-.083a.186.186 0 0 1-.09-.147v-.173a.437.437 0 0 0-.047-.183l-.09-.15a.19.19 0 0 1 0-.17l.085-.146a.437.437 0 0 0 .05-.183v-.167a.195.195 0 0 1 .084-.147l.152-.09c.053-.034.098-.08.133-.132l.088-.15a.188.188 0 0 1 .146-.085h.17a.44.44 0 0 0 .182-.05l.142-.085a.196.196 0 0 1 .173 0l.152.086c.057.03.12.047.182.05h.174c.06.003.114.035.146.085l.085.145c.033.053.08.1.132.133l.147.084a.18.18 0 0 1 .083.146v.173c.002.065.02.128.054.183l.084.15a.19.19 0 0 1 0 .17z" mask="url(#b)"/><path fill="#F5F7FA" d="M.444 3.11h.89V4h-.89v-.89zm1.778 0h.89V4h-.89v-.89zM4 3.11h.89V4H4v-.89zm1.778 0h.89V4h-.89v-.89zm1.778 0h.888V4h-.888v-.89zm1.777 0h.89V4h-.89v-.89zm1.778 0H12V4h-.89v-.89zm1.78 0h.888V4h-.89v-.89zm1.777 0h.89V4h-.89v-.89zM.444 12h.89v.89h-.89V12zm1.778 0h.89v.89h-.89V12zM4 12h.89v.89H4V12zm1.778 0h.89v.89h-.89V12zm1.778 0h.888v.89h-.888V12zm1.777 0h.89v.89h-.89V12zm1.778 0H12v.89h-.89V12zm1.78 0h.888v.89h-.89V12zm1.777 0h.89v.89h-.89V12z" mask="url(#b)"/></g></svg>',"flag-rounded-it":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Italy</title><defs><circle cx="8" cy="8" r="8" id="a"/></defs><g fill="none" fill-rule="evenodd"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#F5F7FA" xlink:href="#a"/><path fill="#ED5565" d="M11.556 0H16v16h-4.444z" mask="url(#b)"/><path fill="#57A863" d="M0 0h4.444v16H0z" mask="url(#b)"/></g></svg>',"flag-rounded-jp":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><title>Japan</title><g fill="none" fill-rule="evenodd"><circle fill="#F5F7FA" cx="8" cy="8" r="8"/><circle fill="#ED5565" cx="8" cy="8" r="3.556"/></g></svg>',"flag-rounded-kr":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><title>Korea</title><g fill="none" fill-rule="evenodd"><circle fill="#F5F7FA" cx="8" cy="8" r="8"/><path fill="#ED5565" d="M11.103 7.356c.052.318-.272-.66-1.195-.826a1.7 1.7 0 0 0-1.996 1.242 1.524 1.524 0 0 1-1.788 1.11 1.416 1.416 0 0 1-1.207-1.647 3.136 3.136 0 0 1 3.68-2.29 3.012 3.012 0 0 1 2.506 2.41z"/><path fill="#4758A9" d="M7.4 11.053a3.01 3.01 0 0 1-2.505-2.41c-.052-.317.272.66 1.195.826a1.7 1.7 0 0 0 1.996-1.242c.203-.79.99-1.278 1.788-1.11a1.416 1.416 0 0 1 1.206 1.647 3.136 3.136 0 0 1-3.68 2.29v-.002z"/><path fill="#434A54" d="M11.342 3.726l1.69 2.948-.522.267-1.69-2.948.522-.266zM12.384 3.194l1.69 2.95-.522.265-1.688-2.95.52-.266zM4.51 3.63L2.82 6.482l.522.257 1.69-2.853-.523-.257zM3.467 3.116l-1.69 2.852.522.257 1.688-2.852-.52-.257zM11.46 12.262l1.71-3.01-.527-.27-1.71 3.01.527.27zM12.514 12.804l1.71-3.01-.528-.27-1.71 3.01.528.27zM4.54 12.36L2.83 9.45l.527-.264 1.71 2.91-.527.264zM3.486 12.884l-1.708-2.91.526-.263 1.71 2.912-.528.262z"/></g></svg>',"flag-rounded-nl":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Netherlands</title><defs><circle cx="8" cy="8" r="8" id="a"/></defs><g fill="none" fill-rule="evenodd"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#F5F7FA" xlink:href="#a"/><path fill="#ED5565" d="M0 0h16v5.333H0z" mask="url(#b)"/><path fill="#4A89DC" d="M0 10.667h16V16H0z" mask="url(#b)"/></g></svg>',"flag-rounded-nz":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><title>New Zealand</title><circle fill="#4758a9" cx="8" cy="8" r="8"/><path fill="#fff" d="M8 0a8 8 0 0 0-1.56.162L4.16 2.47V.99a8 8 0 0 0-1.348.93v.375l-.2-.2a8 8 0 0 0-.936 1.018l.164.166h-.29a8 8 0 0 0-.802 1.36h1.266L.14 6.536A8 8 0 0 0 0 8h.63l2.183-2.207V8H4.16V5.63L6.504 8H8v-.457l-2.87-2.9H8V3.28H5.293L8 .544V0z"/><path fill="#ed5565" d="M8 0a8 8 0 0 0-.977.07L4.16 2.967v.314h.64L8 .05V0zM3.822 1.186a8 8 0 0 0-.67.457V3.62h-1.84a8 8 0 0 0-.4.683h2.24V8h.67V4.303H8V3.62H3.822V1.187zM2.357 2.334a8 8 0 0 0-.466.502l.445.445h.48V2.8l-.455-.46zm.15 2.31L.05 7.126A8 8 0 0 0 0 8h.14l2.67-2.705v-.652h-.306zm1.653 0v.485L6.998 8h.96L4.642 4.643h-.48zM9.476 7.375c-.107.077-.17.033-.14-.098l.117-.49a.444.444 0 0 0-.125-.4l-.35-.307c-.1-.09-.075-.163.057-.166l.49-.014a.356.356 0 0 0 .31-.242l.153-.534c.037-.128.104-.13.15-.004l.184.525a.372.372 0 0 0 .32.234l.502.002c.134 0 .16.074.06.163l-.383.34a.425.425 0 0 0-.11.395l.12.43c.038.13-.024.178-.136.108l-.407-.257a.388.388 0 0 0-.4.015l-.41.3zm4.038 1.36c-.107.08-.17.035-.138-.096l.116-.49a.444.444 0 0 0-.126-.4l-.35-.308c-.1-.09-.075-.163.057-.167l.49-.013a.356.356 0 0 0 .31-.242l.153-.533c.037-.13.104-.13.15-.004l.184.525a.372.372 0 0 0 .32.232l.503.006c.133 0 .157.074.058.163l-.38.34a.424.424 0 0 0-.112.394l.122.43c.035.128-.026.177-.14.106l-.406-.254a.388.388 0 0 0-.4.013l-.41.294zM7.457 11.12c-.107.077-.17.033-.14-.098l.117-.49a.444.444 0 0 0-.125-.396l-.354-.31c-.1-.088-.074-.162.058-.166l.49-.014a.356.356 0 0 0 .31-.242l.152-.533c.038-.126.105-.13.15 0l.185.524a.372.372 0 0 0 .32.233l.503.005c.134 0 .16.076.06.164l-.383.34a.424.424 0 0 0-.113.396l.122.428c.035.13-.027.178-.14.107l-.406-.256a.388.388 0 0 0-.4.013l-.41.296zm4.88 1.712c-.077.056-.122.024-.1-.07l.083-.347a.318.318 0 0 0-.088-.284l-.252-.22c-.072-.062-.054-.116.04-.12l.353-.01a.255.255 0 0 0 .223-.17l.11-.38c.027-.094.075-.096.107-.005l.133.375c.038.094.128.16.23.166l.36.003c.095 0 .114.052.042.115l-.274.243a.303.303 0 0 0-.08.28l.088.308c.026.092-.018.127-.1.076l-.29-.182a.28.28 0 0 0-.288.01l-.297.212z"/></svg>',"flag-rounded-pl":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Poland</title><defs><circle cx="8" cy="8" r="8" id="a"/></defs><g fill="none" fill-rule="evenodd"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#F5F7FA" xlink:href="#a"/><path fill="#ED5565" d="M0 8h16v8H0z" mask="url(#b)"/></g></svg>',"flag-rounded-ro":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Romania</title><defs><circle cx="8" cy="8" r="8" id="a"/></defs><g fill="none" fill-rule="evenodd"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#FFCE54" xlink:href="#a"/><path fill="#ED5565" d="M11.552 0H16v16h-4.448V0z" mask="url(#b)"/><path fill="#4A89DC" d="M0 0h4.444v16H0z" mask="url(#b)"/></g></svg>',"flag-rounded-ru":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Russia</title><defs><circle cx="8" cy="8" r="8" id="a"/></defs><g fill="none" fill-rule="evenodd"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#4A89DC" xlink:href="#a"/><path fill="#F5F7FA" d="M-8-2.667h31.11v7.11H-8z" mask="url(#b)"/><path fill="#ED5565" d="M-8 11.11h31.11v7.112H-8z" mask="url(#b)"/></g></svg>',"flag-rounded-sa":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Saudi Arabia</title><defs><circle cx="8" cy="8" r="8" id="a"/></defs><g fill="none" fill-rule="evenodd"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#57A863" xlink:href="#a"/><path fill="#FFF" d="M2.67 10.67h11.108a.756.756 0 0 1-.436.444H3.105a.756.756 0 0 1-.436-.444z" mask="url(#b)"/><path fill="#FFF" d="M11.552 9.778H12V12h-.448V9.778zM2.125 6.35c.4.04.178-.67.324-.8.027-.062.082.618.082.618.313.262.492 1.428.492 1.428s.244.068.255-.584a6.08 6.08 0 0 1-.026-.78c.87-.474.83-.654.763-.824-.697-.466-.725-.48-.754-.48a.69.69 0 0 0-.058.652c-.108-.567-.154-.755-.244-.922-.112.69-.07.92-.048 1.153-.14-.225-.14-.438-.188-.642-.443.463-.462.556-.475.65-.254-.222-.29-.715-.392-.6-.03.386-.063 1.063.267 1.133zm.82.448c-.354.17-.694.33-1.04.495.136-.352.45-.604.824-.66.213.005.16.08.216.167v-.002zm-1.005.99c-.178.27-.216.607-.105.908a.23.23 0 0 0 .222.073.4.4 0 0 0 .147-.39c-.04-.064-.073-.074-.114-.02-.09.174-.122.055-.13-.044a2.196 2.196 0 0 1 .024-.49c.02-.134 0-.093-.044-.037zm8.373-.492c-.19-.404-.452-.8-.533-.955a16.877 16.877 0 0 0-.807-1.157c-.204-.24.333.1-.068-.378-.152-.13-.16-.137-.288-.242-.064-.045-.222-.127-.247.01a.78.78 0 0 0 .014.283c.042.088.096.17.16.242A18.016 18.016 0 0 1 10.3 7.883a.858.858 0 0 0 .013-.587h.003zM9.48 8.644a.25.25 0 0 0 .26.218.986.986 0 0 0 .757-.6c.092-.136.15-.294.172-.458a9.946 9.946 0 0 0-.19-2.33.386.386 0 0 1 .008-.16.228.228 0 0 0 .113-.054 1.344 1.344 0 0 0-.227-.604c-.035-.07-.047-.115-.106.008a.86.86 0 0 0-.1.438c.135.917.177 1.72.264 2.636a.36.36 0 0 1-.065.27c-.246.27-.548.488-.884.636zm3.796-.005c-.202.114-.202.247-.04.252a1.01 1.01 0 0 0 .843-.397c.08-.16.126-.335.136-.514.04-.77-.013-1.54-.154-2.298a1.258 1.258 0 0 1-.027-.236c.018-.045.11.005.143-.048a1.93 1.93 0 0 0-.338-.565c-.035-.07-.048-.115-.106.008a.71.71 0 0 0-.06.44 20.5 20.5 0 0 1 .284 2.625.92.92 0 0 1-.056.235 1.88 1.88 0 0 1-.277.318c-.09.067-.286.13-.35.18zm.15-.893c0-.233.004-.435-.004-.608a1.076 1.076 0 0 0-.1-.44 1.57 1.57 0 0 1-.048-.38c-.027-.14-.02-.35-.06-.517a1.768 1.768 0 0 1-.036-.294c.017-.048.08 0 .11-.054a1.86 1.86 0 0 0-.266-.73c-.038-.07-.106-.045-.19.065a.476.476 0 0 0-.02.396c.22.975.326 1.97.32 2.97a.602.602 0 0 0 .295-.41zm-1.488-1.29a.905.905 0 0 1-.47-.385.257.257 0 0 1 .015-.206.178.178 0 0 1 .173-.032c.022.026.037.057.045.09.07.032.1.013.107-.015.004-.05-.02-.08-.02-.132a.148.148 0 0 1 .26-.076.54.54 0 0 1 .07.258c0 .042-.07-.007-.107.003a.092.092 0 0 0-.05.094c-.008.103-.02.272-.022.4zM9.6 8.005c.015-.355.01-.71-.016-1.066-.013-.442-.086-1.293-.12-1.435-.04-.267.11.03.088-.127a1.707 1.707 0 0 0-.376-.695c-.056-.08-.055-.095-.143.02a.8.8 0 0 0 .012.54c.12.514.2 1.04.237 1.567.038.525.042 1.053.014 1.58a.458.458 0 0 0 .304-.383zm4.26-.506c-.222-.37-.56-.772-.65-.922-.09-.15-.853-1.12-.95-1.218-.28-.29.128-.047-.054-.27a2.12 2.12 0 0 0-.33-.32c-.064-.044-.104-.122-.126.015-.01.12-.014.24-.01.36a.48.48 0 0 0 .11.222 18.54 18.54 0 0 1 2.007 2.71.844.844 0 0 0 0-.577h.003zM5.488 6.43l-.023.15a.058.058 0 0 1-.11-.012c-.044-.19-.22-.216-.325.08-.072.058-.202.07-.215-.016.017-.2-.064-.226-.227-.134l-.156-1.164a.18.18 0 0 0 .192-.03 2.12 2.12 0 0 0-.29-.666c-.04-.044-.072-.017-.122-.006a.196.196 0 0 0-.14.24c.1.606.166 1.068.267 1.67a.128.128 0 0 1-.124.156.578.578 0 0 0-.388-.258.435.435 0 0 0-.372.344.834.834 0 0 0 0 .396.33.33 0 0 0 .372.092.725.725 0 0 1 .215-.115c.023.028.006.35-.464.596-.286.127-.512.155-.634-.074-.075-.144.006-.69-.178-.563-.55 1.4 1.287 1.595 1.492.057.02-.063.097-.126.11-.023-.044 1.393-1.42 1.49-1.654 1.05a1.327 1.327 0 0 1-.08-.47c-.036-.273-.18-.168-.204.104a1.686 1.686 0 0 0-.018.338c.074 1.1 1.848.628 2.136-.28.153-.504-.025-.875.058-.873a.335.335 0 0 0 .476-.04.08.08 0 0 1 .122-.012.288.288 0 0 0 .43-.12 3.8 3.8 0 0 0 .058-.523.288.288 0 0 0-.207.108V6.43zm-1.625.513a.133.133 0 0 1-.098.013.094.094 0 0 1-.09-.045.14.14 0 0 1 .04-.1.096.096 0 0 1 .165.025.105.105 0 0 1-.02.11l.003-.002zM5.87 4.9c-.204.573.116 1.202.338 1.14.16.067.262-.234.328-.564.044-.093.078-.103.1-.055a.82.82 0 0 0 .148.668.37.37 0 0 0 .48.008l.2-.196a.12.12 0 0 1 .164-.008c.042.085.105.16.182.213a.403.403 0 0 0 .396-.082c.073-.123.09-.166.124-.213a.09.09 0 0 1 .14-.016.155.155 0 0 0-.024.145c.03.028.078.03.112.005a.727.727 0 0 0 .226-.34c.006-.102-.052-.093-.088-.072-.05.03-.053.04-.103.07a.225.225 0 0 1-.246-.043 3.656 3.656 0 0 1-.11-.38c0-.007-.082-.176-.005-.187.038.007.12.03.133-.04a.512.512 0 0 0-.173-.35.19.19 0 0 0-.28-.008.298.298 0 0 0-.076.204c-.023.096.002.2.067.276a.844.844 0 0 1 .157.563.23.23 0 0 1-.207.1c-.054-.01-.143-.033-.19-.378a2.49 2.49 0 0 0-.103-.8c-.04-.103-.07-.203-.17-.026a.405.405 0 0 0-.057.39c.076.195.098.406.064.61a1.196 1.196 0 0 1-.118.167.197.197 0 0 1-.253.034.267.267 0 0 1-.15-.21c.02-.224.012-.45-.023-.673a.124.124 0 0 0-.206-.04 1.53 1.53 0 0 0-.375.758c-.057.184-.12.133-.162.057-.11-.092-.115-.854-.243-.73h.002zm-2.508.005c.137.064.395.037.384-.18 0-.02-.005-.086-.007-.104a.063.063 0 0 0-.123.02.103.103 0 0 1-.01.067c-.01.012-.055.005-.054-.055A.105.105 0 0 0 3.53 4.6a.048.048 0 0 0-.03-.008.03.03 0 0 0-.03.022.183.183 0 0 0-.01.05.03.03 0 0 1-.026.032c-.01.003-.02 0-.028-.007a.04.04 0 0 1-.02-.03.173.173 0 0 0-.008-.053.057.057 0 0 0-.034-.02.092.092 0 0 0-.076.118.2.2 0 0 0 .092.203l.002-.003zm4.02 1.682c.138.065.465.028.386-.18 0-.02-.006-.086-.008-.104a.063.063 0 0 0-.12.018.1.1 0 0 1-.012.07c-.01.01-.055.004-.053-.056a.104.104 0 0 0-.023-.052.044.044 0 0 0-.03-.007.028.028 0 0 0-.03.02.187.187 0 0 0-.01.05.03.03 0 0 1-.026.034c-.01 0-.02-.002-.03-.008a.04.04 0 0 1-.018-.03.172.172 0 0 0-.01-.053.06.06 0 0 0-.033-.02.092.092 0 0 0-.075.118.2.2 0 0 0 .09.202l.003-.003zM9.73 5.89c.137.066.395.038.384-.18 0-.02-.004-.086-.007-.103a.063.063 0 0 0-.12.018.1.1 0 0 1-.012.068c-.01.01-.055.005-.053-.056a.1.1 0 0 0-.023-.052.044.044 0 0 0-.03-.007.03.03 0 0 0-.03.022.187.187 0 0 0-.01.05.033.033 0 0 1-.055.025.04.04 0 0 1-.02-.028.165.165 0 0 0-.008-.055.058.058 0 0 0-.033-.017.092.092 0 0 0-.075.117.2.2 0 0 0 .09.2h.003zm1.215 1.75a.815.815 0 0 0-.08.8c.055.143.16.26.296.332a.208.208 0 0 0 .307-.033c.092-.187.162-.383.21-.585a.124.124 0 0 1 .218-.052c.05.073.12.132.2.17a.34.34 0 0 0 .442.032.51.51 0 0 0 .236-.284c.05-.503.055-1.01.016-1.514-.006-.04-.137-.683-.137-.69 0-.007-.017-.328-.032-.405 0-.03-.01-.04.024-.035a.18.18 0 0 0 .06.04c.037.007.068-.053.046-.107l-.328-.597c-.026-.024-.06-.053-.102.008a.234.234 0 0 0-.08.178c.01.14.035.285.044.427.044.24.088.483.13.725.042.518.053.942.094 1.46a.595.595 0 0 1-.14.437.15.15 0 0 1-.164-.006 1.96 1.96 0 0 1-.24-.317.146.146 0 0 0-.232 0c-.172.234-.31.492-.41.765a.144.144 0 0 1-.236-.004 1.064 1.064 0 0 1-.145-.74l.003-.004zM9.79 4.62c.132.097.2.257.18.42a.345.345 0 0 1-.135.287c-.05-.02.034-.148-.015-.283a2.208 2.208 0 0 1-.177-.297c-.036-.097.07-.14.145-.125h.002zm1.548 3.165c.012-.216.003-.433-.025-.65-.008-.172-.2-1.498-.237-1.63-.047-.247.185-.032.16-.177-.08-.182-.28-.447-.344-.605-.037-.068-.022-.13-.106-.018-.074.197-.1.41-.076.618.237.947.363 1.917.375 2.893a.55.55 0 0 0 .25-.428l.003-.003zm2.1-2.745a.622.622 0 0 1 .166.452.396.396 0 0 1-.125.31 1.194 1.194 0 0 1-.014-.306 2.533 2.533 0 0 1-.16-.32.105.105 0 0 1 .13-.133l.002-.003zM5.11 7.227c.104.08.163.202.16.332a.27.27 0 0 1-.12.228.676.676 0 0 1-.012-.225.94.94 0 0 0-.155-.236c-.03-.094.06-.11.128-.098v-.003zm-2.864-2.68a.32.32 0 0 1 .156.345.283.283 0 0 1-.117.238.69.69 0 0 1-.023-.234 1.6 1.6 0 0 1-.142-.244c-.03-.08.058-.116.124-.1l.002-.004zM5.37 5.632a.278.278 0 0 0-.094.372c.047.06.125.084.197.062a.294.294 0 0 0 .19-.222c.02-.102.003-.066-.138.06a.058.058 0 0 1-.08-.046.287.287 0 0 1 .017-.183c.02-.054-.026-.08-.094-.04v-.002zm.91-1.17a.436.436 0 0 0-.187.307c-.004.08-.02.08.035.133.04.056.077.05.156.01a.165.165 0 0 0 .075-.11c.017-.09-.1.046-.115-.057a.264.264 0 0 1 .12-.226c0-.06 0-.106-.088-.055l.002-.003zm.732.128c-.028.117-.046.236-.052.356-.02.088.095.127.147.012a1.08 1.08 0 0 0 .084-.39c-.025-.13-.118-.126-.18.025l.002-.002zm4.623 2.325c.016-.016.65-.462.65-.462.066-.022.052.23.022.23a2.52 2.52 0 0 1-.672.46.193.193 0 0 1-.002-.224l.002-.003zm.58-.004c.107.13.16.298.144.466.02.12-.042.236-.152.286a.963.963 0 0 1-.018-.28 1.488 1.488 0 0 1-.104-.326.108.108 0 0 1 .127-.144l.002-.003zm-3.78 1.394a.822.822 0 0 1 .183-.156.124.124 0 0 1 .12.02c-.01.068-.02.136-.024.204a.065.065 0 0 0 .086.057.462.462 0 0 1 .296-.09c.077.004.08.133.03.133a2.24 2.24 0 0 0-.402.14.094.094 0 0 1-.117-.015.12.12 0 0 1-.01-.118c.003-.066-.023-.103-.08-.095-.04.023-.078.037-.1-.01a.056.056 0 0 1 .015-.068l.002-.003zm4.448.175a.08.08 0 0 1 0 .12c-.044.04-.076.064-.12.104-.02.035-.035.088.03.106a.768.768 0 0 0 .393-.146.085.085 0 0 0 .026-.096.205.205 0 0 0-.124-.017c-.018 0-.08-.008-.05-.062.02-.03.037-.06.05-.095.018-.04.002-.067-.065-.09a.54.54 0 0 0-.17 0 .072.072 0 0 0-.063.077c0 .076.044.072.09.1h.003zM9.24 7.27l-.062-.035-1.192-.005c-.062-.024-.045-.045 0-.06.284-.04.79-.12.824-.6a.4.4 0 1 0-.784.016c-.01.065.022.192-.045.207-.436.04-.914.31-.932.504-.027.016-.086-.036-.08-.12a2.304 2.304 0 0 0-.3-1.002c-.14-.137-.096-.092-.19-.027a.29.29 0 0 0-.066.25c0 .004.112.31.206.528.08.228.106.47.08.71-.162.32-.416.582-.73.754a.372.372 0 0 1-.303-.003.18.18 0 0 1-.08-.174c.316-.166.572-.427.73-.747a.756.756 0 0 0 .02-.538.51.51 0 0 0-.124-.25.39.39 0 0 0 .167.01.783.783 0 0 0-.21-.384.178.178 0 0 0-.257-.015.35.35 0 0 0-.065.376c.103.11.192.233.267.365a.428.428 0 0 1-.014.24c-.16.192-.345.363-.55.508-.013.016-.007-.01-.008-.07-.004-.077.03-.258.02-.26a.93.93 0 0 0-.238.502c-.392.217-.764.47-1.11.752-.137.21.936-.24 1.06-.295.028.07.06.136.1.2a.57.57 0 0 0 .578.184c.342-.14.634-.38.838-.688a.092.092 0 0 1 .13-.045c.254.406.71.642 1.188.615.133-.162.07-.24.015-.274a.844.844 0 0 1-.33-.223.226.226 0 0 1 .167-.247 5.92 5.92 0 0 0 1.096-.207.944.944 0 0 1 .12-.37c.028-.023.05-.05.064-.082l.002-.002zm-.982-.735c.04-.03.096-.03.134.004a.1.1 0 0 1 .068.112.104.104 0 0 1-.134-.004.1.1 0 0 1-.07-.108l.002-.003zm-.48 1.19a.267.267 0 0 0-.25.26c.047.255-.066.168-.134.134a.667.667 0 0 1-.332-.48.124.124 0 0 1 .138-.128c.165.03.332.05.5.056.137.01.206.117.078.163V7.73zm-2.127-2.8a.203.203 0 0 0 .02-.31.318.318 0 0 0-.28.003.232.232 0 0 0-.04.31c.07.033.138.103.092.14-.214.227-.8.616-.73.63.127.018.257.018.384 0 .23-.193.44-.404.633-.632l-.08-.063a.044.044 0 0 1 0-.076v-.002zm-.093 0a.098.098 0 0 1-.096-.064.06.06 0 0 1 .025-.094.1.1 0 0 1 .096.065.062.062 0 0 1-.024.094v-.002z" mask="url(#b)"/></g></svg>',
"flag-rounded-th":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Thailand</title><defs><circle cx="8" cy="8" r="8" id="a"/></defs><g fill="none" fill-rule="evenodd"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#ED5565" xlink:href="#a"/><path fill="#FFF" d="M-.444 3.11H16v9.783H-.444V3.11z" mask="url(#b)"/><path fill="#4758A9" d="M-.444 4.003H16v8.003H-.444V4.003z" mask="url(#b)"/></g></svg>',"flag-rounded-tr":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><title>Turkey</title><g fill="none" fill-rule="evenodd"><circle fill="#ED5565" cx="8" cy="8" r="8"/><path fill="#FFF" d="M9.964 9.903c-.19.13-.297.05-.235-.178l.234-.845a.783.783 0 0 0-.19-.704l-.596-.563c-.17-.16-.12-.29.11-.288l.863.007c.25-.01.467-.17.552-.405l.307-.923c.07-.222.19-.222.257 0l.293.933a.64.64 0 0 0 .542.43l.88.04c.227.01.27.14.09.29l-.69.57a.76.76 0 0 0-.226.686l.186.76c.058.228-.053.31-.244.177l-.698-.473a.68.68 0 0 0-.702 0l-.734.486zm.338 1.56l-.013.008a3.66 3.66 0 0 1-5.17-2.333 3.86 3.86 0 0 1-.138-1.16 3.79 3.79 0 0 1 4.88-3.6c.2.066.393.15.578.25a.127.127 0 0 0 .178-.076.13.13 0 0 0-.05-.146 4.49 4.49 0 0 0-1.595-.922 4.68 4.68 0 0 0-5.89 3.067 4.8 4.8 0 0 0-.06 2.8 4.595 4.595 0 0 0 7.386 2.344.127.127 0 0 0 .048-.143.124.124 0 0 0-.156-.083v-.003z"/></g></svg>',"flag-rounded-tw":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Taiwan</title><defs><circle cx="8" cy="8" r="8" id="a"/></defs><g fill="none" fill-rule="evenodd"><mask fill="#fff" id="b"><use xlink:href="#a"/></mask><use fill="#ED5565" xlink:href="#a"/><path fill="#4758A9" d="M0 0h8v8.004H0V0z" mask="url(#b)"/><path fill="#F5F7FA" d="M6.41 5.123a.718.718 0 0 1 .08-.302l.14-.24a.31.31 0 0 0 0-.28l-.146-.25a.715.715 0 0 1-.08-.302V3.46a.316.316 0 0 0-.142-.24l-.244-.14a.727.727 0 0 1-.222-.22l-.138-.242a.315.315 0 0 0-.245-.14h-.29a.718.718 0 0 1-.3-.08l-.254-.143a.31.31 0 0 0-.28 0l-.246.14a.707.707 0 0 1-.302.08h-.28a.322.322 0 0 0-.244.14l-.142.25a.694.694 0 0 1-.223.222l-.25.145a.315.315 0 0 0-.136.243v.278a.715.715 0 0 1-.08.303l-.143.24a.31.31 0 0 0 0 .28l.147.25c.05.094.077.197.08.302v.287a.33.33 0 0 0 .143.243l.245.138c.09.057.165.132.222.222l.138.24a.32.32 0 0 0 .244.14h.29a.75.75 0 0 1 .306.082l.25.142a.31.31 0 0 0 .28 0l.243-.14a.707.707 0 0 1 .303-.082h.28c.1-.006.19-.058.245-.14l.142-.25a.74.74 0 0 1 .222-.22l.25-.146a.32.32 0 0 0 .14-.244l-.003-.277z" mask="url(#b)"/></g></svg>',"flag-rounded-us":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><title>United States of America</title><circle fill="#f5f7fa" cx="8" cy="8" r="8"/><path fill="#ed5565" d="M8.1 0a8 8 0 0 1 .79.053V3.11h5.436A8 8 0 0 0 8.1 0zm.79 6.66v3.115H.21a8 8 0 0 0 0 .004h15.58A8 8 0 0 0 16 8a8 8 0 0 0-.115-1.34H8.89zm-7.22 6.225A8 8 0 0 0 8 16a8 8 0 0 0 6.324-3.115H1.67z"/><path fill="#4a89dc" d="M8 0a8 8 0 0 0-4.633 1.484 8 8 0 0 1 .666-.42c.06.098.154.17.27.176l.474.004c.124 0 .15.07.06.152l-.366.317a.392.392 0 0 0-.105.37l.115.4c.036.12-.02.164-.128.1l-.387-.24a.38.38 0 0 0-.383.014l-.385.272h-.002c-.103.073-.158.03-.132-.09l.11-.454a.41.41 0 0 0-.112-.367 8 8 0 0 0-2.103 2.5c.06.07.136.127.232.132l.478.003c.124 0 .15.07.057.153l-.366.314a.392.392 0 0 0-.106.37l.115.402c.033.12-.025.165-.132.1l-.386-.24a.38.38 0 0 0-.38.013l-.066.047A8 8 0 0 0 0 8a8 8 0 0 1 .025-.516l.11-.002c.133-.01.246-.1.29-.224L.57 6.76c.017-.06.043-.09.07-.092.024 0 .05.03.07.088l.18.49c.05.124.166.21.3.217l.478.006c.124 0 .15.067.057.15l-.366.316a.392.392 0 0 0-.106.37l.115.4c.033.12-.025.166-.132.1l-.386-.24a.38.38 0 0 0-.38.012l-.388.274c-.013.01-.018 0-.03.005a8 8 0 0 0 .155.918h8.68V.053A8 8 0 0 0 8 0zM.055 8.857a8 8 0 0 1-.014-.14 8 8 0 0 0 .015.14zM6.86.447c.027 0 .054.027.074.086l.177.49c.05.124.17.21.304.217l.477.004c.124 0 .15.07.057.152l-.365.317a.392.392 0 0 0-.105.37l.115.4c.037.12-.02.164-.13.1l-.386-.24a.38.38 0 0 0-.383.014l-.384.272h-.003c-.103.073-.16.03-.133-.09l.11-.454a.41.41 0 0 0-.114-.37l-.334-.288c-.098-.082-.072-.152.053-.155l.464-.013c.132-.01.247-.1.29-.225l.145-.498c.018-.06.045-.09.07-.09zm-3.11 3.11c.026 0 .052.03.072.088l.178.49c.05.124.17.21.303.217l.474.003c.124 0 .15.07.06.153l-.366.314a.392.392 0 0 0-.105.37l.115.402c.036.12-.02.165-.128.1l-.387-.24a.38.38 0 0 0-.383.013l-.385.27-.002.003c-.103.073-.158.032-.132-.088l.11-.455a.41.41 0 0 0-.114-.37l-.335-.288c-.097-.084-.072-.153.052-.157l.467-.014c.133-.01.246-.098.29-.224l.146-.498c.018-.06.044-.09.07-.09zm3.11 0c.026 0 .052.03.072.088l.177.49c.05.124.17.21.302.217l.477.003c.122 0 .148.07.055.153l-.365.314a.392.392 0 0 0-.105.37l.115.402c.037.12-.02.165-.127.1l-.387-.24a.38.38 0 0 0-.383.013l-.386.27v.003c-.103.073-.16.032-.133-.088l.11-.455a.41.41 0 0 0-.114-.37l-.334-.288c-.098-.084-.072-.153.053-.157l.464-.014c.132-.01.247-.098.29-.224l.145-.498c.018-.06.043-.09.07-.09zm-5.94.728a8 8 0 0 0-.248.527 8 8 0 0 1 .248-.527zm-.318.684a8 8 0 0 0-.168.458 8 8 0 0 1 .168-.46zM3.75 6.667c.026 0 .052.03.072.088l.178.49c.05.124.17.21.303.217l.474.006c.124 0 .15.067.06.15l-.366.316a.392.392 0 0 0-.105.37l.115.4c.036.12-.02.166-.128.1l-.387-.24a.38.38 0 0 0-.383.012l-.385.274h-.002c-.103.072-.158.03-.132-.09l.11-.453a.41.41 0 0 0-.114-.373l-.335-.287c-.097-.082-.072-.15.052-.156l.467-.012c.133-.01.246-.1.29-.224l.146-.498c.018-.06.044-.09.07-.092zm3.11 0c.026 0 .052.03.072.088l.177.49c.05.124.17.21.302.217l.477.006c.122 0 .148.067.055.15l-.365.316a.392.392 0 0 0-.105.37l.115.4c.037.12-.02.166-.127.1l-.387-.24a.38.38 0 0 0-.383.012l-.386.274c-.103.072-.16.03-.133-.09l.11-.453a.41.41 0 0 0-.114-.373l-.334-.287c-.098-.082-.072-.15.053-.156l.464-.012c.132-.01.247-.1.29-.224l.145-.498c.018-.06.043-.09.07-.092zM0 8.002a8 8 0 0 0 .025.457l.037-.15A.41.41 0 0 0 0 8z"/></svg>',"flag-rounded-vn":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><title>Vietnam</title><g fill="none" fill-rule="evenodd"><circle fill="#ED5565" cx="8" cy="8" r="8"/><path fill="#F6D660" d="M6.59 10.54c-.248.166-.386.064-.306-.227l.294-1.083c.066-.324-.03-.66-.258-.898l-.778-.714c-.222-.203-.155-.37.142-.37H6.8a.8.8 0 0 0 .71-.52l.383-1.182c.094-.286.245-.286.338 0l.388 1.188c.114.302.39.512.71.542l1.134.045c.298.012.356.18.125.37l-.885.734a.94.94 0 0 0-.284.88l.25.967c.074.293-.068.397-.32.232l-.908-.6a.89.89 0 0 0-.907.004l-.942.634z"/></g></svg>',"flag-ru":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#0039a6" d="M0 0h16v11H0z"/><path fill="#d52b1e" d="M0 8h16v3H0z"/><path fill="#fff" d="M0 0h16v4H0z"/><path fill-opacity=".15" d="M0 0v4L.5.5h15L16 4V0z" class="flag-shade"/></svg>',"flag-se":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><rect width="16" height="10" fill="#006aa7"/><rect width="2" height="10" fill="#fecc00" x="5"/><rect width="16" height="2" fill="#fecc00" y="4"/></svg>',"flag-th":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fff" d="M0 0h16v11H0z"/><path fill="#ed1c24" d="M0 0v2h16V0H0zm0 9v2h16V9H0z"/><path fill="#241d4f" d="M0 4h16v3H0z"/></svg>',"flag-tr":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#e30a17" d="M0 0h16v11H0z"/><path fill="#fff" d="M5.1 2a3.5 3.5 0 0 0-3.5 3.5A3.5 3.5 0 0 0 5.1 9a3.5 3.5 0 0 0 2.79-1.393A2.9 2.9 0 0 1 5.9 8.4 2.9 2.9 0 0 1 3 5.5a2.9 2.9 0 0 1 2.9-2.9 2.9 2.9 0 0 1 2 .804A3.5 3.5 0 0 0 5.1 2zM7.9 5.5l1.155-.373-.002-1.214.71.984 1.155-.378-.716.98.716.98-1.154-.377-.71.984V5.873z"/></svg>',"flag-tw":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fe0000" d="M0 0h16v11H0z"/><path fill="#000095" d="M0 0h8v6H0z"/><circle fill="#fff" cx="4" cy="3" r="1"/><circle fill="#fff" fill-opacity=".3" cx="4" cy="3" r="2"/></svg>',"flag-uk":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#00247d" d="M0 0h16v11H0z"/><path fill="#fff" d="M0 0v1.518L3.61 4H0v3h3.61L0 9.482V11h2.207L6 8.393V11h4V8.393L13.793 11H16V9.482L12.39 7H16V4h-3.61L16 1.518V0h-2.207L10 2.607V0H6v2.607L2.207 0H0z"/><path fill="#cf142b" d="M0 0v.91L4.494 4h1.324L0 0zm7 0v5H0v1h7v5h2V6h7V5H9V0H7zm7.676 0L10 3.215V4h.182L16 0h-1.324zM5.818 7L0 11h1.324L6 7.785V7h-.182zm4.364 0L16 11v-.91L11.506 7h-1.324z"/></svg>',"flag-us":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#fff" d="M0 0h16v11H0z"/><path fill="#b22234" d="M0 0v1h16V0H0zm0 2v1h16V2H0zm0 2v1h16V4H0zm0 2v1h16V6H0zm0 2v1h16V8H0zm0 2v1h16v-1H0z"/><path fill="#3c3b6e" d="M0 0h9v7H0z"/><path fill="#fff" d="M1 1v1h1V1H1zm2 0v1h1V1H3zm2 0v1h1V1H5zm2 0v1h1V1H7zM2 3v1h1V3H2zm2 0v1h1V3H4zm2 0v1h1V3H6zM1 5v1h1V5H1zm2 0v1h1V5H3zm2 0v1h1V5H5zm2 0v1h1V5H7z"/></svg>',"flag-vi":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 11" width="16" height="11"><path fill="#da251d" d="M0 0h16v11H0z"/><path fill="#ff0" d="M8 .8L9 4h3.4L9.7 6l1 3.3-2.7-2-2.7 2 1-3.2L3.6 4H7z"/></svg>',gift:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 144 133" width="144" height="133"><g fill="none" fill-rule="evenodd"><path fill="#B8C6D5" d="M6 49v72c0 6.6 5.37 12 12 12h108c6.63 0 12-5.4 12-12V49H6"/><path fill="#E9EFF2" d="M6 43v72c0 6.6 5.37 12 12 12h108c6.63 0 12-5.4 12-12V43H6M12 31C5.37 31 0 36.4 0 43v12h144V43c0-6.6-5.37-12-12-12H12"/><path fill="#3BB3E4" d="M54 25h36v107.64H54V25z"/><path fill="#2B90BA" d="M47.31 1C41.316.4 35.466 3.4 32.262 8.2c-4.668 7.2-1.878 16.2 6.204 20.4 2.598 1.8 5.382 2.4 8.184 2.4h50.682c2.802 0 5.652-.6 8.25-2.4 8.082-4.2 10.806-13.2 6.138-20.4-4.662-7.2-14.952-9.6-23.034-5.4-2.598 1.2-4.638 3-6.066 5.4h-.132c-.192.6-.36.6-.528 1.2l-9.966 15-9.966-15c-.168-.6-.336-.6-.528-1.2h-.132C59.934 5.8 57.96 4 55.362 2.8A18.914 18.914 0 0 0 47.31 1zm-.99 7.2c1.62 0 3.3.6 4.818 1.2.504 0 .966.6 1.386.6.294.6.54.6.792 1.2h.198c.132 0 .276.6.396.6h.264c.096.6.246.6.33.6L61.5 23.2H45.396c-.384 0-.744 0-1.122-.6-.54 0-1.074 0-1.584-.6-1.014 0-1.914-1.2-2.574-1.8-1.986-2.4-2.28-5.4-.528-8.4 1.458-1.8 4.026-3.6 6.732-3.6zm51.408 0c2.706 0 5.274 1.8 6.732 3.6 1.752 3 1.392 6-.594 8.4-.66.6-1.494 1.8-2.508 1.8-.504.6-1.044.6-1.584.6-.372.6-.804.6-1.188.6H82.488l6.99-10.8c.084 0 .234 0 .33-.6h.066c.018 0-.012 0 0 0h.198c.12 0 .264-.6.396-.6h.198c.252-.6.564-.6.858-1.2.426 0 .882-.6 1.386-.6 1.518-.6 3.198-1.2 4.818-1.2z"/><path fill="#B8C6D5" d="M6 55h132v6H6v-6z"/><path fill="#2B90BA" d="M54 55h36v6H54v-6zm0 72h36v5.64H54V127z"/></g></svg>',googleplus:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path d="M11.358 12.558l-1.04-.8c-.315-.26-.747-.606-.747-1.234 0-.632.44-1.034.81-1.405 1.22-.95 2.42-1.96 2.42-4.08 0-2.18-1.38-3.33-2.04-3.88h1.79L14.42 0h-5.68C7.173 0 4.93.367 3.28 1.714 2.04 2.776 1.44 4.24 1.44 5.56c0 2.236 1.725 4.505 4.783 4.505.287 0 .603-.03.92-.06-.142.35-.288.635-.288 1.122 0 .89.46 1.433.862 1.95-1.296.09-3.72.232-5.507 1.323C.513 15.4 0 16.866 0 17.896 0 20.022 2.013 22 6.196 22c4.96 0 7.583-2.724 7.583-5.42 0-1.983-1.15-2.957-2.42-4.022zM7.58 9.262c-2.48 0-3.603-3.183-3.603-5.107 0-.747.143-1.52.634-2.12.46-.576 1.27-.95 2.03-.95 2.39 0 3.63 3.215 3.63 5.28 0 .515-.052 1.433-.72 2.094-.46.46-1.24.8-1.96.8zM7.61 20.8c-3.087 0-5.075-1.465-5.075-3.503 0-2.04 1.844-2.728 2.48-2.957 1.212-.404 2.768-.46 3.027-.46.29 0 .432 0 .662.03 2.193 1.55 3.145 2.322 3.145 3.788 0 1.776-1.47 3.1-4.24 3.1zM17 7v3h-3v1h3v3h1v-3h3v-1h-3V7h-1z"/></svg>',hotlists:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="6 6 21 23" width="21" height="23"><path d="M22 14s-.8 1.8-1 4c0 0-1.6-8.8-8.3-13 0 0 2.8 4.5.9 6.5 0 0-1.2 1.4-1.6 3.5 0 0-.4 1.5 0 3 .3 1-2-.6-2-3 0 0-1.4 1.7 1 6 0 0 1.3 1.7 1 3 0 0-2.7-.6-4-4 0 0 .1 4.2 2 6 2 1.8 4.5 2 6 2 0 0 6.6 0 7-5 .5-5.2-1.6-6.5-1-9z"/></svg>',"ideas-stream":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 35 27" width="35" height="27"><g fill-rule="evenodd"><path d="M17.5 5.167c-4.143 0-7.5 3.232-7.5 7.22 0 2.644 2.515 5.448 3.43 7.91 1.366 3.672 1.215 5.87 4.07 5.87 2.898 0 2.703-2.188 4.07-5.855.918-2.467 3.43-5.3 3.43-7.926 0-3.987-3.36-7.22-7.5-7.22zm1.767 17.835l-3.38.406c-.12-.336-.25-.73-.408-1.243-.003-.006-.006-.013-.007-.02l4.22-.507c-.06.193-.125.397-.18.58-.09.294-.17.55-.246.784zm-3.992-1.49c-.125-.394-.264-.81-.42-1.25h5.295c-.084.235-.167.47-.24.694l-4.635.557zm2.225 3.343c-.69 0-1.008-.077-1.362-.82l2.89-.35c-.42 1.086-.723 1.17-1.528 1.17zm-4.532-12.47c0 .427.353.767.782.767.43 0 .782-.34.782-.766 0-1.565 1.33-2.844 2.968-2.844.43 0 .782-.34.782-.765a.774.774 0 0 0-.782-.766c-2.497 0-4.532 1.96-4.532 4.376zM5.48.646c-6.64 6.64-6.64 17.403 0 24.042l.706-.707c-6.248-6.247-6.248-16.378 0-22.626L5.48.646zm24.04 24.042c6.64-6.64 6.64-17.403 0-24.042l-.706.708c6.248 6.248 6.248 16.38 0 22.627l.707.708z"/><path d="M7.6 2.768c-5.467 5.467-5.467 14.33 0 19.8l.708-.708c-5.077-5.077-5.077-13.308 0-18.385L7.6 2.768zm19.8 19.8c5.467-5.47 5.467-14.333 0-19.8l-.708.707c5.077 5.077 5.077 13.308 0 18.385l.707.707z"/><path d="M9.722 4.89c-4.296 4.295-4.296 11.26 0 15.555l.707-.707c-3.906-3.905-3.906-10.237 0-14.142L9.72 4.89zm15.556 15.555c4.296-4.295 4.296-11.26 0-15.556l-.707.706c3.906 3.905 3.906 10.237 0 14.142l.708.707z"/></g></svg>',iphone:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 148 300" xmlns:xlink="http://www.w3.org/1999/xlink"><g fill="none" stroke="#3bb3e4"><rect width="144" height="298" stroke-width="2" rx="22" x="2" y="1"/><path d="M10.5 39.5h127v223h-127z"/><circle stroke-width="2" cx="74" cy="280" r="10.5"/></g><g fill="#fff"><path d="M2 24h2v4H2z" id="a"/><use x="142" xlink:href="#a"/><use y="248" xlink:href="#a"/><use x="142" y="248" xlink:href="#a"/></g><g fill="#3bb3e4"><path d="M0 42h2v12H0z"/><path d="M0 66h2v22H0z" id="b"/><use y="28" xlink:href="#b"/><use x="146" xlink:href="#b"/><circle cx="53" cy="18.5" r="2.5"/><rect width="23" height="3" rx="1.5" x="64" y="17"/></g><g fill="none" stroke="#dadde1"><circle cx="74" cy="222" r="10.5" id="c"/><g id="d"><use y="-28" xlink:href="#c"/><use y="-56" xlink:href="#c"/><use y="-84" xlink:href="#c"/></g><use x="-30" xlink:href="#d"/><use x="30" xlink:href="#d"/></g></svg>',"legend-hide":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13" width="13" height="13"><g><path d="M1 0v1h11V0H1zm11 1v11h1V1h-1zm0 11H1v1h11v-1zM1 12V1H0v11h1zM6 2v4H2v1h4v4h1V7h4V6H7V2H6z"/></g></svg>',"legend-show":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13" width="13" height="13"><g><path d="M1 0v1h11V0H1zm11 1v11h1V1h-1zm0 11H1v1h11v-1zM1 12V1H0v11h1zm1-6v1h9V6H2z"/></g></svg>',"like-cornered":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 15" width="16px" height="15px"><path fill-rule="evenodd" d="M0 14.66h2.91V5.864H0v8.796zm16-8.063c0-.806-.655-1.466-1.455-1.466h-4.59l.692-3.35.022-.232c0-.3-.126-.58-.32-.777L9.576 0 4.793 4.83c-.27.264-.43.63-.43 1.034v7.33c0 .806.655 1.466 1.455 1.466h6.546c.603 0 1.12-.367 1.338-.895l2.196-5.167c.066-.17.102-.345.102-.535v-1.4l-.007-.008.007-.058z"/></svg>',like:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 670 745"><path d="M417.91 738.04c-118.64-22.82-190.57-47.072-218.92-73.807-22.734-21.44-24.27-32.633-24.27-176.81 0-88.1 1.86-140.31 5.373-150.86 11.138-33.44 36.66-57.735 133.93-127.5 67.296-48.267 90.59-69.93 140.55-130.72C509.177 11.903 521.965.078 539.24.046c16.013-.03 25.43 13.07 32.622 45.373 7.83 35.164-3.512 82.774-30.952 129.93-40.764 70.052-39.008 75.19 31.705 92.733 49.08 12.178 81.767 30 91.884 50.097 8.98 17.844 7.335 39.84-7.633 102.04-7.523 31.264-15.156 66.454-16.962 78.203-1.806 11.748-11.588 46.504-21.738 77.236s-18.454 58.25-18.454 61.152c0 8.677-33.212 71.96-44.153 84.13-22.217 24.715-68.287 30.435-137.65 17.093zm-345.68-25.9c-5.722-2.5-22.273-14.2-36.78-26.03-14.506-11.88-28.418-21.59-30.914-21.59-2.82 0-4.538-65.6-4.538-173.26 0-95.29 1.752-173.25 3.893-173.25 2.144 0 17.104-11.498 33.248-25.552 30.614-26.65 49.608-34.114 68.466-26.907 16.703 6.386 18.065 16.296 7.704 56.06-8.34 32-9.423 51.51-9.423 169.55 0 131.23.62 138.49 16.636 194.72 5.75 20.178-24.144 36.41-48.29 26.22z"/></svg>',link:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 80"><path d="M29.298 63.47l-4.048 4.02c-3.51 3.48-9.216 3.482-12.723 0-1.686-1.672-2.612-3.894-2.612-6.256s.927-4.585 2.61-6.258l14.9-14.783c3.09-3.062 8.898-7.57 13.132-3.372 1.943 1.93 5.08 1.92 7.01-.02 1.93-1.942 1.918-5.08-.025-7.01-7.197-7.14-17.834-5.82-27.098 3.37l-14.9 14.785C1.967 51.49 0 56.21 0 61.235s1.968 9.743 5.544 13.292C9.224 78.177 14.054 80 18.887 80c4.834 0 9.667-1.824 13.348-5.476l4.05-4.02c1.943-1.93 1.954-5.067.024-7.01-1.93-1.94-5.07-1.952-7.016-.023zM74.454 6.045c-7.73-7.67-18.538-8.086-25.694-.986l-5.046 5.01c-1.943 1.924-1.955 5.06-.025 7.004 1.93 1.943 5.063 1.954 7.01.025l5.04-5.005c3.707-3.68 8.56-2.155 11.727.986 1.69 1.675 2.615 3.898 2.615 6.26 0 2.363-.928 4.586-2.613 6.26L51.575 41.37c-7.27 7.213-10.68 3.828-12.134 2.384-1.943-1.928-5.08-1.916-7.01.026-1.93 1.942-1.918 5.08.025 7.01 3.337 3.31 7.146 4.953 11.14 4.953 4.888 0 10.052-2.463 14.962-7.338l15.892-15.77C78.03 29.082 80 24.362 80 19.338c0-5.022-1.97-9.743-5.546-13.294z"/></svg>',linkedin:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 12"><path d="M3.344 11.996V3.898H.664v8.098h2.68zm-1.34-9.204c.935 0 1.516-.62 1.516-1.4C3.503.6 2.94-.005 2.022-.005 1.105-.005.506.6.506 1.395c0 .776.58 1.397 1.48 1.397h.018zm2.823 9.204h2.68V7.474c0-.242.017-.484.088-.657.194-.484.635-.984 1.375-.984.97 0 1.358.742 1.358 1.83v4.333h2.68V7.353c0-2.488-1.323-3.645-3.086-3.645-1.446 0-2.08.812-2.433 1.364h.01V3.898H4.82c.035.76 0 8.098 0 8.098z"/></svg>',"logo-sad":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 82"><g fill="none" fill-rule="evenodd"><path fill="#E9EFF2" d="M81.387 15.092c3.366-1.9 7.247-2.983 11.38-2.983 12.882 0 23.326 10.526 23.326 23.513 0 2.217-.304 4.362-.873 6.395 6.777 2.378 11.64 8.874 11.64 16.516 0 9.657-7.766 17.485-17.346 17.485-.2 0-.4-.003-.598-.01v.01h-86.13v-.007c-12.61-.32-22.73-10.72-22.73-23.506 0-12.833 10.196-23.264 22.867-23.51C24.43 12.757 37.983.05 54.486.05c11.346 0 21.3 6.01 26.9 15.042z"/><path fill="#3BB3E4" d="M52.55 37.342c-4.196 7.27-11.227 7.424-13.8 5.938-3.36-1.94-6.016-7.547-1.76-14.922 5.175-8.96 17.15-11.734 17.15-11.734s3.585 11.756-1.59 20.718zM83.873 15.26c-2.48 4.298-6.64 4.39-8.16 3.51-1.986-1.145-3.557-4.46-1.04-8.822 3.06-5.298 10.14-6.938 10.14-6.938s2.12 6.95-.94 12.25zm17.04 7.56c-1.632 2.827-4.368 2.888-5.37 2.31-1.306-.755-2.34-2.937-.683-5.806 2.013-3.486 6.67-4.565 6.67-4.565s1.396 4.572-.617 8.06zM91.13 62.46c-3.503 6.07-9.373 6.198-11.52 4.958-2.805-1.62-5.023-6.3-1.47-12.458 4.32-7.48 14.317-9.796 14.317-9.796S95.45 54.98 91.13 62.46zM60.482 73.702c-4.81 8.332-12.87 8.51-15.82 6.807-3.85-2.225-6.894-8.653-2.014-17.105 5.93-10.27 19.654-13.45 19.654-13.45s4.11 13.475-1.82 23.746z"/></g></svg>',messages:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="4 6 23 21" width="23" height="21"><path d="M16 18h3v-3h-3v3zm-2-5v10h9l3 3v-3h1V13H14zm6 2v4h-4v3h-1v-8h5v1zm6 0v7h-1v-6h-1v1h-1v-1h-1v6h-1v-8h1v1h1v1h1v-1h1v-1h1v1zm-4-9H5v12h1v4l4-4h3v-6h9V6z"/></svg>',notes:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 21" width="15" height="21"><path fill-rule="evenodd" d="M7.5 0C3.357 0 0 3.23 0 7.22c0 2.644 2.515 5.448 3.43 7.91C4.796 18.802 4.645 21 7.5 21c2.898 0 2.703-2.188 4.07-5.855.918-2.468 3.43-5.3 3.43-7.926C15 3.23 11.64 0 7.5 0zm1.767 17.834l-3.38.406c-.12-.336-.25-.73-.408-1.242-.003-.006-.006-.014-.007-.02l4.22-.507c-.06.194-.125.398-.18.58-.09.295-.17.55-.246.784zm-3.992-1.488c-.125-.395-.264-.81-.42-1.252h5.295c-.084.235-.168.472-.24.695l-4.635.556zM7.5 19.687c-.69 0-1.008-.076-1.362-.82l2.89-.348c-.42 1.084-.723 1.168-1.528 1.168zM2.968 7.22c0 .424.353.764.782.764.43 0 .782-.34.782-.765 0-1.566 1.33-2.845 2.968-2.845.43 0 .782-.34.782-.766a.774.774 0 0 0-.782-.766c-2.497 0-4.532 1.96-4.532 4.375z"/></svg>',notifications:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="5 6 21 21" width="21" height="21"><path d="M15.5 27c1.2 0 2.2-.9 2.4-2H13c.3 1.1 1.3 2 2.5 2zm6.5-7v-6c-.2-2.9-2.3-5.3-5.1-5.9 0-.2.1-.4.1-.6 0-.8-.7-1.5-1.5-1.5S14 6.7 14 7.5c0 .2.1.4.2.6-2.8.6-4.9 3-5.1 5.9v5.9C9 22.7 7 23 7 23v1h17v-1s-2-.3-2-3z"/></svg>',"publish-idea-intro":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 216 320" width="216" height="320"><g fill="none" fill-rule="evenodd"><g fill="#3BB3E4"><g><path d="M2 2.002v315.996c0 .005-.003.002 0 .002h212V2.002c0-.005.003-.002 0-.002H2v.002zm-2 0C0 .896.893 0 2 0h212c1.104 0 2 .89 2 2.002v315.996c0 1.106-.893 2.002-2 2.002H2c-1.104 0-2-.89-2-2.002V2.002z" id="Shape"/><g><path d="M49 207h124v-2H48v2h1zM49 285h124v-2H48v2h1zM49 188h124v-2H48v2h1zM49 264h124v-2H48v2h1zM49 169h124v-2H48v2h1zM49 245h124v-2H48v2h1zM49 150h124v-2H48v2h1zM49 226h124v-2H48v2h1z" id="Shape"/></g><path d="M111 88c13.807 0 25-11.193 25-25s-11.193-25-25-25-25 11.193-25 25 11.193 25 25 25zm0 2c-14.912 0-27-12.088-27-27s12.088-27 27-27 27 12.088 27 27-12.088 27-27 27z" id="Shape"/><path d="M109.94 61.92l3.01 3.184c.17-.067.356-.104.55-.104h.062l5.49-5.587C118.316 58.55 117.22 58 116 58c-.69 0-1.337.174-1.902.48-.984-1.494-2.676-2.48-4.598-2.48-2.87 0-5.225 2.197-5.478 5H104c-2.21 0-4 1.79-4 4 0 .732.197 1.42.54 2.01l6.46-5.46v-.05c0-.828.672-1.5 1.5-1.5s1.5.672 1.5 1.5c0 .146-.02.287-.06.42zm-1.185 1.058L112 66.454v.046c0 .81.64 1.47 1.443 1.5h.057c.483 0 .912-.228 1.186-.582l.314-.147-.137-.143c.088-.19.137-.403.137-.627 0-.194-.037-.38-.104-.55l5.055-4.58c.033.205.05.415.05.63 0 .39-.055.764-.16 1.12 1.25.363 2.16 1.515 2.16 2.88 0 1.657-1.343 3-3 3h-15c-1.09 0-2.08-.436-2.8-1.143l6.59-5.035c.212.114.454.178.71.178.087 0 .172-.007.255-.022z"/><path d="M89.576 75.892c.198.328.404.652.616.97l-15.875 27.5-1.48.172-.495-.753.745-1.29 10.904-1.276 1.48-.173.59 1.37 4.347 10.08-.745 1.29-.9-.052-.59-1.367 14.822-25.67c.163.056.327.11.492.16l.73 1.72-.284.495c-6.736-1.823-12.497-6.21-16.077-12.154l.597-1.033 1.124.015zm-.564-.985c3.306 6.09 9.068 10.655 15.958 12.36l-15.81 27.384-4.936-11.45-12.384 1.45 17.172-29.743zM118.514 86.85c.165-.05.33-.104.492-.16l14.82 25.67-.59 1.368-.898.053-.745-1.29 4.346-10.08.59-1.37 1.48.174 10.903 1.277.745 1.29-.495.754-1.48-.173-15.875-27.497c.212-.32.418-.643.616-.97l1.124-.016.597 1.034c-3.58 5.946-9.34 10.332-16.077 12.155l-.285-.494.73-1.72zm-1.484.418c6.89-1.706 12.652-6.27 15.958-12.36l17.172 29.743-12.384-1.45-4.936 11.45-15.81-27.382z"/></g></g></g></svg>',"report-flag":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12"><path d="M10.37.6c-.43.053-.97.13-1.55.13C7.918.73 7.1.52 6.273.35 5.433.175 4.566 0 3.648 0 1.816 0 1.195.38 1.133.42L1 .51V12h.625V6.626c.234-.094.85-.26 2.027-.26.852.002 1.65.313 2.496.49.86.175 1.75.36 2.715.36.574 0 1.082-.076 1.512-.125.234-.024.44-.05.625-.08V.505c-.184.035-.395.065-.63.095z"/></svg>',"settings-gear":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 42 42"><path d="M38.626 17.554h-2.81c-.354-1.755-1.055-3.157-1.756-4.566l1.756-1.755c1.4-1.4 1.4-3.51 0-4.912s-3.51-1.4-4.912 0l-1.756 1.76c-1.4-.7-2.81-1.4-4.565-1.753V3.51c0-2.11-1.402-3.51-3.51-3.51s-3.52 1.41-3.52 3.51v2.81c-1.754.355-3.156 1.056-4.565 1.756L11.233 6.32c-1.4-1.4-3.51-1.4-4.912 0s-1.4 3.512 0 4.913l1.76 1.755c-.7 1.402-1.4 2.81-1.754 4.566H3.51c-2.1 0-3.51 1.41-3.51 3.51s1.4 3.512 3.51 3.512h2.81c.355 1.755 1.056 3.156 1.756 4.565L6.32 30.9c-1.4 1.402-1.4 3.51 0 4.913s3.512 1.4 4.913 0l1.755-1.756c1.402.7 2.81 1.402 4.566 1.756v2.815c0 2.11 1.4 3.51 3.51 3.51s3.51-1.4 3.51-3.51v-2.81c1.757-.354 3.158-1.055 4.567-1.756l1.76 1.754c1.4 1.4 3.51 1.4 4.914 0s1.4-3.51 0-4.912l-1.756-1.756c.7-1.4 1.402-2.81 1.756-4.565h2.81c2.107 0 3.51-1.4 3.51-3.51.006-2.11-1.403-3.52-3.505-3.52zm-17.56 14.05c-5.968 0-10.534-4.565-10.534-10.532s4.566-10.54 10.533-10.54 10.532 4.566 10.532 10.533-4.558 10.54-10.532 10.54zm0-14.05c-2.11 0-3.512 1.4-3.512 3.51s1.4 3.512 3.51 3.512 3.51-1.402 3.51-3.51-1.4-3.512-3.51-3.512z"/></svg>',stocktwits:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.8 9.4"><path d="M3.9 4c-.7-.3-1.1-.5-1.3-.6L2.2 3c-.1-.1-.1-.3-.1-.5 0-.3.1-.5.3-.7.2-.2.5-.3.9-.3.3 0 .7 0 1 .1.3.2.7.4 1.2.5L6.2.6C5.7.4 5.2.2 4.8.1L3.4 0C2.3 0 1.5.2 1 .7S.1 1.8.1 2.6c0 .4.1.8.3 1.1s.4.6.7.8c.3.2.7.5 1.3.8l1.2.6c.2.2.4.3.5.4.1.1.2.3.2.5 0 .3-.1.6-.4.7-.2.2-.6.2-1 .2s-.8-.1-1.2-.2C1.2 7.5.6 7.3 0 7v1.8c.8.4 1.7.6 2.7.6 1.1 0 2-.2 2.6-.7.7-.5 1-1.2 1-2 0-.6-.2-1.1-.5-1.5-.4-.4-1-.8-1.9-1.2zM7 0v1.6h3.1v7.8h1.6V1.6h3.1V0H7z"/></svg>',twitter:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 11.6"><path d="M15 1.4c-.3.1-1 .4-1.7.5.4-.2 1.1-1 1.3-1.6-.4.3-1.4.7-1.9.7-.6-.7-1.4-1-2.3-1-1.7 0-3.1 1.3-3.1 3 0 .2 0 .4.1.7C5.1 3.6 2.4 2.5.9.6 0 2.1.8 3.9 1.8 4.5c-.4 0-1 0-1.3-.3 0 1 .5 2.4 2.4 2.9-.4.2-1 .1-1.3.1.1.9 1.4 2 2.8 2-.6.5-2.3 1.4-4.4 1.1 1.4.8 3.1 1.3 4.8 1.3 5 0 8.8-3.9 8.6-8.6.5-.4 1.1-.9 1.6-1.6z"/></svg>',user:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 15" width="12px" height="15px"><path fill-rule="evenodd" d="M6.2 0c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zM6 14.3a7.2 7.2 0 0 1-6-3.22C.03 9.09 4 8 6 8c1.99 0 5.97 1.09 6 3.08a7.2 7.2 0 0 1-6 3.22z"/></svg>',view:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 16"><path clip-rule="evenodd" d="M12 0C4.07 0 0 8 0 8s3.072 8 12 8c8.087 0 12-7.97 12-7.97S20.057 0 12 0zm.02 13c-2.9 0-4.996-2.188-4.996-5 0-2.813 2.096-5 4.995-5s4.993 2.187 4.993 5c0 2.812-2.096 5-4.995 5zm0-8c-1.658 0-3 1.393-3 3 0 1.606 1.34 3 2.997 3 1.656 0 2.996-1.395 2.996-3 0-1.608-1.34-3.003-2.997-3z"/></svg>',yahoo:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 13"><path d="M19.502 12.2l-1.5-.184.16-1.33 1.503.183-.163 1.33zM18.44 3.9l.01 5.95 1.102.136 1.445-5.763L18.44 3.9zm.997-1.39c-.33.035-1.707.34-2.168.438-.5.132-5.03 3.61-5.32 4.465-.07.297-.1.75-.1 1.177l-.03.69c0 .493.13 1.286.2 1.716.29.064 2.45.007 2.84.073l-.05.88c-.39-.03-3.12-.02-4.68-.02-.8 0-3.34.08-4.13.06l.15-.84c.43-.04 2.206.07 2.597-.34.194-.208.133-.425.133-1.608v-.56c0-.264 0-.755-.065-1.214-.167-.49-4.15-5.44-5.175-6.23-.294-.1-2.16-.284-2.62-.38L1 .07c.23-.12 2.3.025 4.31-.05 1.327-.042 4.34 0 4.71.048l-.09.66c-.4.1-2.305.135-2.802.267 1.288 1.9 3.327 4.354 3.985 5.31.363-.528 3.557-2.71 3.657-3.468-.497-.1-2.138-.34-2.4-.34l-.158-.86c.45-.07 2.815 0 3.99 0 1.014 0 3.182 0 3.797.05l-.57.81z"/></svg>'})}).call(e,i(26))},function(t,e,i){(function(t){"use strict";var e,i="tvxwevents.",o={},n=$.browser.msie||/\btrident\b/i.test(navigator.userAgent);$(window).on("storage",function(t){if(null!==t.originalEvent.newValue){var s=t.originalEvent.key;if(s.startsWith(i))return s=s.substr(i.length),n&&e._emitting?void(e._emitting=!1):void(o[s]&&o[s].forEach(function(e){e.call(t.originalEvent.newValue,t.originalEvent.newValue)}))}}),e=window.TVXWindowEvents={on:function(t,e){o[t]||(o[t]=[]),o[t].push(e)},off:function(t,e){if(o[t]){var i=o[t].indexOf(e);i!==-1&&(1===o[t].length?delete o[t]:o[t].splice(i,1))}},current:function(t){return TVLocalStorage.getItem(i+t)},emit:function(t,o){void 0===o&&(o=+new Date),o!=TVLocalStorage.getItem(i+t)&&(n&&(e._emitting=!0),TVLocalStorage.setItem(i+t,o))}},void 0!==t&&t&&t.exports&&(t.exports=e)}).call(e,i(2)(t))},function(t,e,i){(function(t){TradingView.cleanButAmpersand=function(t,e){var i=e?["&amp;"]:["&"];return TradingView.clean(t,e,i)},TradingView.strip_tags=function(t){return t&&t.replace?t.replace(/(<([^>]+)>)/gi,""):t},TradingView.encodeSpread=function(t){return encodeURIComponent(t)},TradingView.clean=function(t,e,i){var o,n,s,r=[["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#039;"]],a=t;if(!t||!t.replace)return a;for(o=0;o<r.length;o++)n=r[o][0],s=r[o][1],i&&i.indexOf&&i.indexOf(e?s:n)!==-1||(a=e?a.replace(RegExp(s,"g"),n):a.replace(RegExp(n,"g"),s));return a},void 0!==t&&t&&t.exports&&(t.exports={clean:TradingView.clean,cleanButAmpersand:TradingView.cleanButAmpersand})}).call(e,i(2)(t))},function(module,exports,__webpack_require__){(function(Featuresets,Delegate,Mustache,ZeroClipboard,moment,process,PineJsCalendar,Spinner){"use strict";function loginUser(t){function e(){"function"==typeof TVDialogs.onSigninSuccess&&(TVDialogs.onSigninSuccess(),TVDialogs.onSigninSuccess=void 0)}window.iframeAuthWidget&&t.is_first_login&&(window.iframeAuthWidget.preventClose=!0),user=$.extend(!0,{},t),TradingView.changeLoginState(!0),TVDialogs.modalDialog&&"Log in"==TVDialogs.modalDialog.data("title")&&TVDialogs.destroy(),t.is_first_login?setTimeout(function(){var t={user:user,afterLoginFunction:e};TradingView.phoneVerification.isRequired()&&(t.buttonCaption=$.t("Next")),window.iframeAuthWidget&&(window.iframeAuthWidget.preventClose=!1,t.onDestroy=window.iframeAuthWidget.postClose),TradingView.trackRegistrationEvent("Social"),TVDialogs.showAfterSocialSign(t)},0):e()}function showDisabledAccountError(){TVDialogs.showError($.t("Error: Account is disabled"))}function followButtonsHandler(t){t.on("click",".follow-big",function(){var t=$(this);t.hasClass("unfollow")?window.relationChange(t,0,t.data("userid")):(window.relationChange(t,1,t.data("userid")),t.hover())}).on("mouseenter",".follow-big",function(){$(this).hasClass("unfollow")&&$(this).text($.t("Unfollow"))}).on("mouseleave",".follow-big",function(){$(this).hasClass("unfollow")&&$(this).text($.t("Following"))})}function updateSuggestedView(t,e){var i=$(".chart-"+t+"-suggested-button");i.toggleClass("active",!!e)}function onLoginStateChange(is_initial){$("html").toggleClass("is-authenticated",is_authenticated).toggleClass("is-not-authenticated",!is_authenticated).toggleClass("is-pro",is_authenticated&&user&&!!user.is_pro).toggleClass("is-not-pro",!(is_authenticated&&user&&user.is_pro)).toggleClass("is-trial",is_authenticated&&user&&"pro_realtime_trial"===user.pro_plan).toggleClass("is-not-trial",!(is_authenticated&&user&&"pro_realtime_trial"===user.pro_plan)).toggleClass("is-mobile",!!TradingView.isMobileView),TVSettings.sync(user.settings),is_initial||TradingView.dropPrerenderCache(),is_authenticated?(is_initial||($(".header-item-profile strong.user-badge").remove(),$(".header-item-profile > a").append(TradingView.userBadge(user,!0,"strong"))),$(".user-info-username").html(user.username),$(".following_count").html(user.following),$(".followers_count").html(user.followers),$(".saved_charts_count").html(user.saved_charts),$(".published_charts_count").html(user.published_charts),$(".treated_charts_count").html(user.treated_charts_count),$("img.user-picture, .user-picture img").attr("src",user.userpic),$(".trial-days-left").html(user.trial_days_left||""),$(".header-item-profile").find("a").each(function(t,e){e=$(e);var i=e.attr("rel");i&&e.attr("href",i.replace("%u",user.username))}),user.fastpass_script&&eval(user.fastpass_script),user.is_first_login&&(TradingView.trackEvent("Conversion","First login"),user.prort_trial_started&&(TVDialogs.showTrialMessageSuccess(),delete user.prort_trial_started),delete user.is_first_login),TradingView.setTrialAvailiable(user.trial_availiable)):(user={username:"Guest",following:"0",followers:"0",ignore_list:{}},$(".user-info-username").html(user.username),TVLocalStorage.removeItem("trial_availiable")),window.studyTemplates&&(window.studyTemplates.refreshStudyTemplateList(),window.studyTemplates.refreshFavoriteDropdownMenu())}function userlink(t,e){var i=__webpack_require__(48);return Mustache.render(i.userlink,{username:t,is_pro:function(){return!!e},is_realtime:function(){return"pro_realtime"==e},is_premium:function(){return"pro_premium"==e},is_trial:function(){return"pro_realtime_trial"==e}},i)}function proBadge(t,e){var i=__webpack_require__(48);return void 0===t||t?Mustache.render(i.proBadge,{is_realtime:"pro_realtime"==t,is_premium:"pro_premium"==t,is_trial:"pro_realtime_trial"==t,large_badge:!!e}):""}var loginStateChange,assert,availableTimezones,i,ChartingLibraryBackend=__webpack_require__(40);$(document).ajaxSend(function(t,e,i){
"POST"==i.type&&(e.setRequestHeader("X-CSRFToken",$.cookie("csrftoken")),e.setRequestHeader("sessionid",$.cookie("sessionid"))),i.crossDomain&&!i.forceLanguageHeader||(window.language?e.setRequestHeader("X-Language",window.language):console.warn("window.language is not defined"))}),String.prototype.format||(String.prototype.format=function(){var t=arguments;return this.replace(/{(\d+)}/g,function(e,i){return void 0!==t[i]?t[i]:e})}),"string"==typeof $.cookie("csrftoken")&&""!==$.cookie("csrftoken")?$("#update-status-li").append('<a href="#" onclick="TradingView.showChangeUserStatusDialog(); return false;">'+$.t("Update Status")+"</a>"):$("#update-status-li").empty(),$(document).ready(function(){$(".tv-select").selectbox({speed:100,classHolder:"tv-select-container"}),Modernizr.canvas&&Modernizr.canvastext||"undefined"!=typeof FlashCanvas||TVDialogs.showNotice($.t("Oops, your browser can't display our charts!"),{html:$.t("It appears that your browser does not support <strong>Canvas</strong> technology, which is needed for TradingView to work.<br/>")+$.t("Please use one of the following browsers:")+'<ul><li><a href="http://www.google.com/chrome/" target="_blank">Chrome</a></li><li><a href="http://www.mozilla.com" target="_blank">Firefox</a></li><li><a href="http://www.apple.com/safari/" target="_blank">Safari</a></li><li><a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home" target="_blank">Internet Explorer 9+</a></li></ul>',classSuffix:"slim",doNotCloseOnBgClick:!0}),!Featuresets.enabled("websocket_connection")||"WebSocket"in window||swfobject.hasFlashPlayerVersion("9.0.0")||TVDialogs.showNotice($.t("TradingView Notice"),{html:$.t("It appears that your browser does not support <strong>WebSocket</strong> technology and does not have <strong>Adobe Flash</strong> plugin installed, one of which is essential for our portal.<br/>")+$.t('Please, <a href="http://get.adobe.com/flashplayer/" target="_blank">install Flash plugin</a> or consider updating to one of these modern browsers with WebSocket support:')+'<ul><li><a href="http://www.google.com/chrome/" target="_blank">Chrome</a></li><li><a href="http://www.apple.com/safari/" target="_blank">Safari</a></li></ul>',classSuffix:"slim",doNotCloseOnBgClick:!0}),TradingView.onWidget()||$(".chart-description").TVEmbeds()}),loginStateChange=window.loginStateChange=new Delegate,loginStateChange.subscribe(null,onLoginStateChange),TVXWindowEvents.on("loginStateChange",function(){var t=JSON.parse(this);window.user=t.user,window.is_authenticated=!!t.is_authenticated,loginStateChange.fire()}),function(){var t="user-obj-changed",e={};window.crossTabSyncUserAttr=function(e){var i={};e instanceof Array?e.forEach(function(t){i[t]=window.user[t]}):i[e]=window.user[e],TVXWindowEvents.emit(t,JSON.stringify(i))},window.onChangeUserAttrInAnotherTab=function(t){var i=new Delegate;return e[t]||(e[t]=[]),e[t].push(i),i},TVXWindowEvents.on(t,function(t){var i,o;t=JSON.parse(t);for(i in t)if(window.user[i]=t[i],e[i])for(o=0;o<e[i].length;o++)e[i][o].fire(t[i])})}(),TradingView.trackEvent=function(t,e,i){if(!window._UNIT_TESTS&&"undefined"!=typeof _gaq){var o=["_trackEvent",t,e];void 0!==i&&o.push(i),_gaq.push(o)}},TradingView.trackRegistrationEvent=function(t){var e,i;t&&TradingView.signupSource&&(e="Registration",i=TradingView.signupSourceParameters,i&&(i.additionalCategories&&i.additionalCategories.forEach(function(t){TradingView.trackEvent(t+" "+e,TradingView.signupSource)}),TradingView.signupSourceParameters=null),TradingView.trackEvent(e,TradingView.signupSource),TradingView.trackEvent("Registration medium",t),TradingView.signupSource=null)},TradingView.eventsTracking={filterNamesMap:{script_type:"Indicators and Strategies","script_type-indicators":"Indicators","script_type-strategies":"Strategies",stream:"All Markets","stream-stocks":"Stocks","stream-indices":"Indices","stream-commodities":"Commodities","stream-currencies":"Currencies","stream-bitcoin":"Bitcoin","interval-all":"All Intervals","interval-m":"Short Term","interval-h":"Medium Term","interval-dwm":"Long Term","sort-unmoderated":"Unmoderated","sort-trending":"Trending","sort-discussed":"Most Discussed","sort-viewed":"Most Viewed","sort-agreed":"Most Agreed","sort-suggested":"Suggested","sort-recent":"All Ideas","time-day":"Today","time-week":"This Week","time-month":"This Month","time-all":"All Time","by-everyone":"Everyone","by-following":"Following","by-me":"My Ideas"},goProFeaturesMap:{customIntervals:"Add Custom Interval",intradaySpread:"Inraday Spread",kagiRenko:"Japanese Intraday Chart",extendedHours:"Timezones Extended Hours",alerts:{prefix:"New Alerts Limit",widget:"Widget",chart:"Chart Header"},multipleCharts:"Multiple Charts Layout",savedChartsLimit:"Save Chart Limit",studyLimit:"Studies Limit",multipleWatchLists:{prefix:"Watchlists","new":"Create New List",rename:"Rename List",saveAs:"Save List As"},importWatchlist:"Watchlists Import Watchlist",exportWatchlist:"Watchlists Export Watchlist",BATSExchangePopup:"BATS Exchange Popup",DataQualityPopup:"Data Quality Popup",CHXEURExchangePopup:"CHXEUR Exchange Popup",proRTProduct:"Volume Profile"},trackFeature:{savedChartsLimit:!0,BATSExchangePopup:!0,CHXEURExchangePopup:!0,DataQualityPopup:!0,intradaySpread:!0},trackGoPro:function(t,e,i){i&&!e&&(e=i,i=null);var o=TradingView.eventsTracking.goProFeaturesMap[e];if(o){if(i){if("string"==typeof o)return;o="{0} {1}".format(o.prefix,o[i])}TradingView.trackEvent(t,o)}}},TradingView.trackStreamFilterChangeEvent=function(t,e,i){var o,n,s=t+(e?"-"+e:"");s in TradingView.eventsTracking.filterNamesMap&&(o=i?"Script Filters":"Idea Filters",n=TradingView.eventsTracking.filterNamesMap[s],"sort-recent"==s&&i&&(n="All Scripts"),"by-me"==s&&i&&(n="My Scripts"),TradingView.trackEvent(o,n))},TradingView.tryTrackGoProFeature=function(t,e){t in TradingView.eventsTracking.trackFeature&&TradingView.trackGoProFeature(t,e)},TradingView.trackGoProFeature=function(t,e){TradingView.eventsTracking.trackGoPro("Gopro Features",t,e)},TradingView.trackGoProPageTransition=function(t,e){TradingView.eventsTracking.trackGoPro("Gopro",t,e)},assert=function(t,e){if(!t)throw Error("Assertion failed"+(e?": "+e:""))},window.assert=assert,TradingView.changeLoginState=function(t){is_authenticated=!!t,TVXWindowEvents.emit("loginStateChange",JSON.stringify({is_authenticated:is_authenticated,user:user})),loginStateChange.fire()},window.loginUser=loginUser,window.showDisabledAccountError=showDisabledAccountError,TradingView.signOut=function(){$.ajax({type:"POST",url:"/accounts/logout/",dataType:"html"}).done(function(){TradingView.changeLoginState(!1)})},window.runOrSignIn=function(t,e){if(e||(e={}),e.verifiedPhoneRequired===!0){var i=t;t=function(){TradingView.phoneVerification.whenVerified({showDialog:!0,source:e.source,verifyPhoneByFeature:!0,verifyPhoneMessage:e.verifyPhoneMessage,noVerifyDelay:e.noVerifyDelay}).done(i)}}is_authenticated||Featuresets.enabled("charting_library_base")?t():TVDialogs.showSignInDialog(t,{source:e.source,sourceMeta:e.sourceMeta,feature:e.feature})},TradingView.runOrGoPro=function(t,e){user&&user.is_pro?t():TVDialogs.showGoProDialog(e)},TradingView.handleIfNotError=function(t,e){t.error?console.log(t.error):e(t)},TradingView.handleIfNotErrorFunc=function(t){return function(e){TradingView.handleIfNotError(e,t)}},window.relationChange=function(t,e,i){var o=$(t);runOrSignIn(function(){var t;t=void 0===o.data("type")?e:o.data("type"),$.post("/social/follow-the-user/",{targetId:i,follow:t},function(e){t?(o.addClass("unfollow").removeClass("follow"),user.following++):(o.removeClass("unfollow").addClass("follow"),user.following--),o.mouseleave(),o.hasClass("follow-big")||window.followButtonTooltip(o),$(".following_count").text(user.following),o.data("type",1-t)},"json")},{source:"Follow user"})},window.followButtonsHandler=followButtonsHandler,TradingView.bindIdeasStreamFilter=function(t,e){e=e||{};var i=t.find(".filter").map(function(){function t(t,s){var l,h,c,d,p,g,v=$(this),y=v.data("name");return a===!0||a[y]?void(t&&t.preventDefault()):(f&&r.find(".temp").remove(),!is_authenticated&&v.hasClass("authorization-required")?(TVDialogs.showSignInDialog(null,{source:"Ideas stream filter"}),!1):(l=y?u.filter("[name="+y+"]"):u,h=v.data("value"),(l&&l.val()!=h||e.forceChange)&&(c=n.filter(".active").filter(y?"[data-name="+y+"]":"*").removeClass("active"),c.find(".active-underline").remove(),d=v.addClass("active"),l.val(h).change(),s||"function"!=typeof e.onChange||setTimeout(function(){e.onChange(t,l.attr("name"),h)},0)),p=v.data("hook"),p&&Object.keys(p).forEach(function(t){i.forEach(function(e){e.inputs.indexOf(t)>-1&&e.obj.setValue(p[t],t)})}),f&&0===r.find("a[data-value="+h+"]").length&&v.clone(!0).addClass("temp item").append('<span class="active-underline"></span>').appendTo(r),!e.notPreventDefault&&e.onChange&&t&&t.preventDefault(),f||(g=n.filter(".active[data-filter-title]:first").data("filter-title")||m,g?n.filter(".active").each(function(){g=g.replace("%"+$(this).data("name")+"%",$(this).contents(":first").text())}):g=v.contents(":first").text(),_.text(g)),void o(!0)))}function o(t){"boolean"!=typeof t&&(t=p),t?(d.stop(!0,!1).fadeOut(g),c.unbind("clickoutside").removeClass("active"),p=!1):(d.stop(!0,!1).fadeIn(g),c.one("clickoutside",o).addClass("active"),p=!0)}var n,s,r,a,l,h,c=$(this),d=c.find(".dropdown"),p=!1,u=c.find("input"),_=c.find(".selected"),f=!1,g=void 0===e.speed?50:e.speed,m=c.data("filter-title");return c.find(".selected").on("click",o),d.on("click","a",t),n=d.find("a"),s=c.parent(".filter-tabbed"),s.length&&(f=!0,r=s.find(".tabs"),n=n.add(r.find("a:not(.temp)")),r.on("click","a",t)),a={},c.find(".sub-group.inactive").find("a:first").each(function(t,e){a[$(e).data("name")]=!0}.bind(this)),l=this,l=this,h={setValue:function(e,i){var o=n.filter("a[data-value="+e+"]"+(u.length>1&&i?"[data-name="+i+"]":""));t.apply(o,[void 0,!0])},getActiveTitle:function(){return _.text()},disabled:function(t,e){e?$("[data-name="+e+"]",c).closest(".sub-group").addClass("inactive"):f?s.addClass("inactive "):c.addClass("inactive "),t||(e?("object"!=typeof a&&(a={}),a[e]=!0):a=!0)},enabled:function(t){t?($("[data-name="+t+"]",c).closest(".sub-group").removeClass("inactive"),"object"==typeof a&&(a[t]=!1)):(f?s.removeClass("inactive "):c.removeClass("inactive "),a=!1)}},c.data("interface",h),{inputs:u.map(function(t,e){return $(e).attr("name")}).get(),obj:h}}).get()},TradingView.bindIdeasStreamFilter.noTimePeriodsFilters=["suggested","recent","best","unmoderated"],TradingView.bindProfileTabsFilter=TradingView.bindIdeasStreamFilter,TradingView.GoToChartField=function(t,e){function i(t,e){var i,n={};(t||o.options&&o.options.defaultSymbol)&&(n.symbol=((t||o.options.defaultSymbol)+"").toUpperCase()),e&&(n.interval=e),i="/chart/",Object.keys(n).length&&(i+="?"+$.param(n)),location.href=i}var o,n=__webpack_require__(41);this.$element=t,this.$field=this.$element.find("input"),this.$button=this.$element.find("span"),this.options=e,this.$button.on("click",function(){if(!this.$field.val()){var t=(o.options||{}).defaultSymbol||"";t&&this.$field.val((t+"").toUpperCase())}this.symbolSearch.acceptTypeIn()}.bind(this)),this.$element.on("keyup",function(){this.$element.toggleClass("not-empty",!!this.$field.val().length)}.bind(this)),this.symbolSearch=n.bindToInput(this.$field,$.extend((this.options||{}).symbolSearch,{callback:i,onEmptyApply:i})),o=this},TradingView.GoToChartField.prototype.updateOptions=function(t){$.extend(this.options,t)},TradingView.SearchChartField=function(t){function e(t){t&&(t=t.toUpperCase(),location.href="/chart/"+TradingView.encodeSpread(t)+"/")}var i=__webpack_require__(41);this.$element=t,this.$field=this.$element.find("input"),this.$button=this.$element.find(".button"),this.symbolSearch=i.bindToInput(this.$field,{callback:e}),this.$field.placeholder(),this.$field.on("focus",function(){this.$element.addClass("active")}.bind(this)).on("blur",function(){this.$element.removeClass("active")}.bind(this)).on("keyup",function(){this.$element.toggleClass("not-empty",!!this.$field.val().length)}.bind(this)),this.$button.on("click",function(){this.symbolSearch.acceptTypeIn()}.bind(this))},TradingView.applyReadMoreToChart=function(t){var e=111,i=!1,o=t.find(".desc");o.html(o.html().replace(/<br>/g," ")).ellipsis(e,i,function(e){var i=t.find(".chart-read-more-container");i.css("display","block"),i.is(i.parent().children(":visible").last())&&t.css("padding-bottom","0px")})},window.chartWithCover=function(t){t.find(".date").each(function(){var t=$(this),e=new Date(t.text());TradingView.agoDateFormatter(t,e)}),t.find(".desc").each(function(){var t=$(this);t.height(t.parent().outerHeight()-t.position().top-5)}).ellipsis()},TradingView.deleteChart=function(t,e){var i=[t];TVDialogs.showConfirm($.t("Confirmation"),$.t("Are you sure you want to delete this chart?"),function(){return Featuresets.enabled("saveload_storage_customization")?ChartingLibraryBackend.removeChart(t,e):(TradingView.dropPrerenderCache(),void $.post("/deletechart/",{uid:i},function(t){t.error||("string"==typeof e?document.location=e:"function"==typeof e?e():window.location.reload())}))},null,{addClass:"delete-chart-dialog"})},TradingView.saveChart=function(t,e,i,o,n){var n=n||{};return Featuresets.enabled("saveload_storage_customization")?ChartingLibraryBackend.saveChart(t.name,t.short_name,t.resolution,t,e.id.value(),function(t){e.id.value()||(e.id.setValue(t),e.uid.setValue(t)),"function"==typeof i&&i()},o):void $.post("/savechart/",t,function(t){var s,r;if("ok:"===t.substr(0,3))s=t.substr(3),r=JSON.parse(s),e.id.value()||(e.id.setValue(r.id),e.uid.setValue(r.uid)),"function"==typeof i&&i({uid:e.uid.value()},r.count||0);else if("saved_chart_limit_reached"==t||""===t){if("function"==typeof o&&o(),n.noDefaultOnFail)return;TVDialogs.showGoProDialog({feature:"savedChartsLimit"})}else"function"==typeof o&&o(),$("#error").html(t);$(window).off("beforeunload.savechart")})},TradingView.openSavedChart=function(t){Featuresets.enabled("saveload_storage_customization")?ChartingLibraryBackend.loadChart(t):open("/chart/"+t.url+"/"+(TradingView.isMobileView?"?mobile=1":""),"_blank")},TradingView.deletePublishedChart=function(t,e){var i;i=e.isScript?$.t("Are you sure you want to delete this script?"):$.t("Are you sure you want to delete this chart?"),TVDialogs.showConfirm($.t("Confirmation"),i,function(){e.onConfirm&&e.onConfirm(),$.post("/idea-delete/",{id:t},function(i){i.error?(e.onError&&e.onError(),TVDialogs.showNotice($.t("Error"),i.error)):(e.onSuccess&&e.onSuccess(),e.trigger&&$(window).trigger("delete-private-idea",[t]))})})},window.recommendChart=function(t,e){var i=e?$(e):$("#chart-recommend-button");i.hasClass("active")?i.removeClass("active"):i.addClass("active"),$.post("/recommend/",{id:t,type:"recommend"},function(e){i.toggleClass("active",!!e.state),$("#chart-"+t).toggleClass("hidden-idea",!e.state)})},window.suggestChart=function(t,e){var i=!$(e).hasClass("active");updateSuggestedView(t,i),$.post("/recommend/",{id:t,type:"hot",state:""+!!i},function(e){updateSuggestedView(t,e.state)})},window.chartTogglePublic=function(t,e){var i=e?$(e):$("#chart-public-button");i.toggleClass("active"),$.post("/togglepublic/",{id:t},function(t){i.toggleClass("active",!!t.state)})},window.chartRepostSTTW=function(t,e){var i=$(e);i.addClass("active"),$.post("/repoststtw/",{id:t},function(t){i.toggleClass("active",!!t.state)})},window.chartToggleIOTD=function(t,e){function i(){s.toggleClass("active",o)}var o,n,s=e?$(e):$("#chart-iotd-button");s.is(".disabled")||(o=s.hasClass("active"),s.toggleClass("active",!o),n=$.post("/toggle-iotd/",{id:t},function(e){e.state&&updateSuggestedView(t,!0)}).done(function(t){return t.error?(TVDialogs.showNotice($.t("Error"),t.error),i()):void s.toggleClass("active",!!t.state).toggleClass("disabled",!!t.disabled)}).fail(i))},TradingView.highlightChart=function(t,e){function i(t,i){return i&&i.length>300?(r.removeClass("process"),TVDialogs.showError($.t("Maximum length of comment is 300 characters")),void l.focus()):void $.post("/highlight/",{id:t,comment:i||""},function(t){""!==t.error?(r.removeClass("process"),TVDialogs.showError(t.error)):($(".button-set .hl-button").removeClass("active"),$(e).addClass("active"),TVDialogs.destroy())})}var o=__webpack_require__(48),n=$.t("Comment:"),s=TVDialogs.createModalDialog(n,{addClass:"dialog-highlight"}),r=(s.find("._tv-dialog-content").append(Mustache.render(o.dialogs.highlightCommentDialog)),s.find(".dialog-buttons ._tv-button.ok")),a=s.find(".dialog-buttons ._tv-button.cancel"),l=s.find(".message textarea");a.on("click",function(e){i(t)}),r.on("click",function(e){var o=l.val().trim();o.length>0?(r.addClass("process"),i(t,o)):(TVDialogs.showError($.t("Comment required")),l.focus())}),TVDialogs.positionDialog(),TVDialogs.applyHandlers(null,{doNotCloseOnBgClick:!0})},window.trendingPeople=function(t){t.on("click",".column-trending-people .tabs a",function(e){var i=$(this);return!i.hasClass("active")&&(i.addClass("active").siblings("a").removeClass("active"),t.find(".top-user-group").hide().filter("."+i.attr("href").slice(1)).show(),void e.preventDefault())})},$.fn.TVTicker=function(t){function e(t){var e,i;return t=Math.abs(t),e=1,!TradingView.isInteger(t)&&t>1&&(t=parseFloat((""+t).replace(/^.+\./,"0."))),0<t&&t<1&&(i=(""+t).length-2,e=Math.pow(10,i)),e}return t=t||{},this.each(function(){function i(t){var i,o,n,s,r,a;h.trigger("tvticker-beforechange"),i=h.data("TVTicker"),o=i&&i.step,n=i.parser?i.parser(h.val()):TradingView.isInteger(o)?parseInt(h.val(),10):parseFloat(h.val()),isNaN(n)&&(n=0),s=e(n),r=e(o),s=Math.max(r,s),a=t(n,s),i.formatter&&(a=i.formatter(a)),h.val(a),h.change()}function o(){var t=h.data("TVTicker"),e=t&&t.step,o=t&&t.max;i(function(t,i){var n=(Math.round(t*i)+Math.round(e*i))/i;return void 0!==o&&null!==o&&o<n&&(n=t),n})}function n(){var t=h.data("TVTicker"),e=t&&t.step,o=t&&t.min;i(function(t,i){var n=(Math.round(t*i)-Math.round(e*i))/i;return void 0!==o&&null!==o&&n<o&&(n=t),n})}var s,r,a,l=!1,h=$(this),c=h.data("TVTicker");c?l=!0:c={step:+h.data("step")||1},"step"in t&&(c.step=+t.step||c.step),"min"in t&&(c.min=t.min),"max"in t&&(c.max=t.max),"formatter"in t&&(c.formatter=t.formatter),"parser"in t&&(c.parser=t.parser),h.data("TVTicker",c),l||(s=$('<div class="tv-ticker">').appendTo(h.parent()),r=$('<div class="icon up">').appendTo(s),a=$('<div class="icon down">').appendTo(s),h.next().find(".up, .down").on("mousedown",function(t){t.preventDefault(),h.focus()}),h.next().find(".up").click(function(){h.is(":disabled")||o()}),h.next().find(".down").click(function(){h.is(":disabled")||n()}),h.keydown(function(t){h.is(":disabled")||(38==t.keyCode?h.next().find(".up").addClass("active"):40==t.keyCode&&h.next().find(".down").addClass("active"))}),h.keyup(function(t){h.is(":disabled")||(38==t.keyCode?(o(),h.next().find(".up").removeClass("active")):40==t.keyCode&&(n(),h.next().find(".down").removeClass("active")))}),h.mousewheel(function(t,e){e>0?h.next().find(".up").click():h.next().find(".down").click()}))}),this},function(){function t(t){var e=0;t===!0&&(ChartApiInstance.disconnect(),e=500),setTimeout(ChartApiInstance.connect.bind(ChartApiInstance),e)}function e(e,i){var o=$('<div class="buttons">').appendTo(e.find("._tv-dialog-content .main"));$('<input type="button" class="_tv-button ok" value="'+$.t("Report a data issue")+'">').css("margin-right",15).click(function(){TVDialogs.destroy(),runOrSignIn(function(){new TradingView.UserBugReportDialog({modal:!0}).show().on("destroy",function(){t(i)})},{source:"Report data issue from disconnect dialog"})}).appendTo(o),$('<input type="button" class="_tv-button ok" value="'+$.t("Reconnect")+'">').click(function(){TVDialogs.destroy(),t(i)}).appendTo(o)}function i(){TradingView.trackEvent("System","Disconnect");var t="<p>"+$.t("Connection to server was lost")+"</p><p>"+$.t("How to fix:")+"</p><ol><li>"+$.t("Check firewall settings and make sure access to websocket ({0} port {1}) is open. Then click Reconnect or press F5.").format(window.WEBSOCKET_HOST,window.WEBSOCKET_PORT)+"</li><li>"+$.t('Your browser doesnt support <strong>WebSocket</strong> technology and does not have <strong>Adobe Flash</strong> plugin installed.<br>Please, <a href="http://get.adobe.com/flashplayer/" target="_blank">install Flash plugin</a> or consider updating to one of these modern browsers with WebSocket support:')+'<ul><li><a href="http://www.google.com/chrome/" target="_blank">Chrome</a></li><li><a href="https://www.mozilla.org/en-US/firefox/new/" target="_blank">Firefox</a></li></ul></li><li>'+$.t("Server broke the connection. Click Reconnect or press F5.")+"</li></ol>";e(TVDialogs.showNotice($.t("Connection is lost"),{html:t,classSuffix:"disconnect",removeOkButton:!0,doNotCloseOnBgClick:!0,width:"500px"}))}window.showDisconnectedMessage=function(){"MozWebSocket"in window&&TradingView.WEB_SOCKET_WAS_CONNECTED?setTimeout(i,15e3):i()},window.showCriticalErrorMessage=function(){TradingView.trackEvent("System","Critical Error"),e(TVDialogs.showNotice($.t("Oops, something went wrong"),{html:$.t("Please report the issue or click Reconnect."),classSuffix:"critical",removeOkButton:!0,doNotCloseOnBgClick:!0,width:"500px"}),!0)}}(),window.toggleUserSavedCharts=function t(e){var i=$(e).toggleClass("active");$(".my-saved-charts").toggle(),i.is(".active")?$(document).bind("click.toggleUserSavedCharts",function(i){$(i.target).is(".saved-charts-button")||t(e)}):$(document).unbind("click.toggleUserSavedCharts")},window.makeDirectionName=function(){return function(t,e){var i=e(t);return"0"==i?$.t("Neutral"):"1"==i?$.t("Long"):$.t("Short")}},window.gotochart=function(t){location.href="/v/"+t+"/"},$.fn.ellipsis=function(){return this.each(function(t,e,i){var o,n,s,r=$(this),a=r.text(),l=a,h=$(this.cloneNode(!0)).hide().css({position:"absolute",overflow:"visible",height:"auto",width:r.width()});for(t=t||r.height(),r.after(h),o=h.height()-t,s=0;o>0;)if(l=l.substr(0,l.length-o/2),h.text(l+""),o=h.height()-t,n=!0,s++>500){console.warn($.t("Error: too long text"));break}r.text(h.text()),n&&"function"==typeof i&&i(r),e&&a!=h.text()&&r.attr("title",a),h.remove()},arguments)},function(t){var e=t('<div class="blue-tooltip-icon icon" />'),i=t('<div class="blue-tooltip-text" />'),o=t('<div class="blue-tooltip blue-tooltip-hidden" />').append(e).append(i);t.fn.blueTooltip=function(n,s,r){return o.parent().length||o.appendTo(document.body),this.each(function(){var a=t(this);a.data("tooltip",n),a.off("mouseenter.tooltip").on("mouseenter.tooltip",function(){var n,l,h,c,d,p,u,_,f;Modernizr.touch||(n=5,r=r||"",i.html(a.data("tooltip")),o.attr("class","blue-tooltip"),o.addClass("blue-tooltip-"+s).addClass(r),l=(a.outerWidth()-o.outerWidth())/2,h=0,c=l+a.offset().left+o.outerWidth(),d=l+a.offset().left,p=t(window).width()-n,d<n?h=n-d:c>p&&(h=p-c),u=a.offset().left+l+h,_=0,f="","top"===s?(_=a.offset().top-o.outerHeight()-10,f="-=10"):"bottom"==s&&(_=a.offset().top+a.outerHeight()+10,f="+=10"),o.css({left:u,top:_,opacity:0}),e.css({left:Math.round(o.width()/2)-h}),o.stop().animate({top:f,opacity:1},200))}).off("mouseleave.tooltip").on("mouseleave.tooltip",function(t){o.addClass("blue-tooltip-hidden").removeClass(r)})})}}(jQuery),TradingView.Tooltip=function(){function t(){clearTimeout(r),clearTimeout(a),jQuery.contains(document.body,c[0])&&(c.css("opacity","0"),a=setTimeout(c.detach.bind(c),l/2))}function e(t,e){var i,o=t.data("commonTooltipText")||"",n=t.attr("title");if(o||n||e)return n&&(o=n,t.data("commonTooltipText",o),t.removeAttr("title")),i={y:t.offset().top-$(window).scrollTop(),x:t.offset().left-$(window).scrollLeft(),w:t.outerWidth(),h:t.outerHeight()},{text:o,rect:i,vertical:t.hasClass("common-tooltip-vertical"),otl:t.hasClass("common-tooltip-otl"),otr:t.hasClass("common-tooltip-otr"),below:t.hasClass("common-tooltip-below"),above:t.hasClass("common-tooltip-above")}}function i(t,i){var n,s=$(t);return i=i||{},0!==s.size()&&(n=!(!i.text&&!i.$inner),i=$.extend({},e(s,n),i),void($.isEmptyObject(i)||o(i)))}function o(t){var e=jQuery.contains(document.body,c[0]);return clearTimeout(r),clearTimeout(a),e?(t.$inner?d.empty().append(t.$inner):d.text(t.text),s(t),n(t.colorTheme||"default"),c.addClass(t.addClass),void c.css("opacity","1")):void(r=setTimeout(function(){c.appendTo(document.body),o(t)},l))}function n(t){var e={white:"theme-white","default":""},i=Object.keys(e),o=i.indexOf(t)!==-1?e[t]:"";c.removeClass(i.filter(function(t){return!!t}).map(function(t){return e[t]}).join(" ")),o&&!c.hasClass(o)&&c.addClass(o)}function s(t){var e,i,o,n,s=t.rect;c.attr("class","common-tooltip-wrapper").css({top:"auto",right:"auto",bottom:"auto",left:"auto"}),Modernizr.pointerevents||c.addClass("no-pointer-events"),d.css({left:"0",width:"auto"}),d.width(d.width()+2),e=$(window).width(),i=$(window).height(),o=t.vertical,(o&&s.w<20||!o&&s.h<20)&&c.addClass("farther"),o?(c.addClass("vertical").css({left:s.x+s.w,top:s.y-(c.outerHeight()-s.h)/2}),n=t.otr?"otr":t.otl||d.offset().left+d.outerWidth()+h>e?"otl":"otr","otl"==n?c.addClass("otl").css({left:"auto",right:e-s.x}):c.addClass("otr")):(c.css({bottom:i-s.y,left:s.x-(c.outerWidth()-s.w)/2}),n=t.above?"above":t.below||d.offset().top-$(window).scrollTop()<h?"below":"above","below"==n?c.addClass("below").css({bottom:"auto",top:s.y+s.h}):c.addClass("above"),d.offset().left-h<0?d.css("left",Math.abs(d.offset().left)+h):d.offset().left+d.outerWidth()+h>e&&d.css("left",e-(d.offset().left+d.outerWidth()+h)))}var r,a,l=500,h=10,c=$("<div />").css("opacity","0"),d=$('<div class="common-tooltip-body" />').appendTo(c);return Modernizr.touch||$(document).on("mouseenter",".apply-common-tooltip",function(e){function o(){n.off("mouseleave mousedown",o),t()}if("buttons"in e){if(1&e.buttons)return}else if(1==e.which)return;var n=$(this);i(n),n.on("mouseleave mousedown",o)}),{show:o,showOnElement:i,hide:t}}(),$(function(){function t(t){$(t).attr("title")||t.offsetWidth+e>=t.scrollWidth||$(t).attr("title",$(t).text())}var e=$.browser.msie||/\btrident\b/i.test(navigator.userAgent)?1:0;$(document).on("mouseenter",".apply-overflow-title",function(){t(this)}),$(document).on("mouseenter",".apply-overflow-tooltip",function(){function t(){TradingView.Tooltip.hide(),i.off("mouseleave mousedown",t)}var i=$(this);i[0].offsetWidth+e>=i[0].scrollWidth||(TradingView.Tooltip.showOnElement(i[0],{text:i.text()}),i.on("mouseleave mousedown",t))})}),TradingView.GlobalNotification=function(t,e){var i,o,n=__webpack_require__(48);return this._options=e||{},i=this,this.id=t.id,(o=this._lastId())?void(this.id<=o||(i=this,this.container=$(Mustache.render(n.globalNotification,t)).prependTo($("body")),i.container.show(),this._options.addClass&&this.container.addClass(this._options.addClass),i.container.css("top",0),this._options.notShiftBody||$("body").addClass("padding-animate").css({paddingTop:i.container.outerHeight()}),TradingView.trackEvent("Global notification","Show notification "+t.id),this.container.find(".global-notification-close").on("click",function(){i.close()}),$.browser.msie||TVXWindowEvents.on(this.KEY+"-close",this._onCloseInAnotherTab.bind(this)))):void this._setLastId(this.id)},TradingView.GlobalNotification.prototype.KEY="globalNotification",TradingView.GlobalNotification.prototype._lastId=function(){var t=TVSettings.getInt(this.KEY,0,!0),e=TVSettings.getInt(this.KEY,0),i=Math.max(e,t);return t!=e&&TVSettings.setValue(this.KEY,i),!i&&$.cookie("notification_id")&&(i=~~$.cookie("notification_id"),TVSettings.setValue(this.KEY,i),$.cookie("notification_id",0,{expires:-1,path:"/"})),i},TradingView.GlobalNotification.prototype._setLastId=function(t){TVSettings.setValue(this.KEY,t)},TradingView.GlobalNotification.prototype.close=function(t){var e=this;this.container&&(t?(this.container.remove(),this.container=null):(e.container.css("top",-1*this.container.outerHeight()+"px"),setTimeout(function(){e.container.remove(),e.container=null,$(window).resize(),e._options.notShiftBody||$("body").removeClass("padding-animate")},1500),TVXWindowEvents.emit(e.KEY+"-close",JSON.stringify([e.id,+new Date])),this._setLastId(e.id)),this._options.notShiftBody||$("body").css({paddingTop:0}))},TradingView.GlobalNotification.prototype._onCloseInAnotherTab=function(t){t=JSON.parse(t),this.id<=t[0]&&this.close(!0)},window.closeGlobalNotification=function(t){$.cookie("notification_id",t,{expires:365,path:"/"}),$(".tv-global-notification").slideUp(400,function(){$(window).resize()})},TradingView.RequestCache=function(t){function e(t){return"function"==typeof t&&t([]),t}function e(e){return o||n||(n=!0,$.getJSON(t,function(t){n=!1,o=!0,i=t,"function"==typeof e&&e(t)})),i&&"function"==typeof e&&e(i),i}var i,o,n;return e.invalidate=function(){},Featuresets.enabled("charting_library_base")?e:(o=!1,n=!1,e.invalidate=function(){i=null,o=!1},e)},Featuresets.enabled("charting_library_base")?void 0!==ChartingLibraryBackend?(TradingView.getStudyTemplatesList=ChartingLibraryBackend.getStudyTemplatesList,TradingView.getStudyTemplatesList.invalidate=ChartingLibraryBackend.clearStudyTemplatesListCache):(TradingView.getStudyTemplatesList=function(){},TradingView.getStudyTemplatesList.invalidate=function(){}):(TradingView.getStudyTemplatesList=new TradingView.RequestCache("/study-templates-ext/"),TradingView.getThemesList=new TradingView.RequestCache("/themes/")),TradingView.showThemeSaveDialog=function(t){var e=__webpack_require__(50).showChartNameDialog;e(function(e){e&&$.get("/theme/"+e+"/").success(function(i){var o,n=!!i.content;i={name:e,content:JSON.stringify(t.model().theme())},n?(o=$.t("Do you realy want to replace")+' "'+e+'"?',TVDialogs.showConfirm($.t("Confirm replacing"),o,function(){$.post("/save-theme/",i).error(function(t){console.error(t.responseText)}),t._lastLoadedTheme=e})):($.post("/save-theme/",i).error(function(t){console.error(t.responseText)}),TradingView.getThemesList.invalidate(),t._lastLoadedTheme=e)})},{title:$.t("Save theme as..."),label:$.t("Theme name"),error:$.t("Please enter theme name")},128)},TradingView.applySearchResetHandler=function(t){return t.on("change keyup",function(){$(this).val()?$(this).siblings(".input-reset").show():$(this).siblings(".input-reset").hide()}).change().siblings(".input-reset").on("click",function(){t.val("").change()})},TradingView.getImageOfChart=function(t,e,i){function o(i){var o,n,s;n=Featuresets.enabled("charting_library_base")?(e.snapshotUrl?"":"https://www.tradingview.com/x/")+i:window.location.protocol+"//"+window.location.host+"/x/"+i+"/",l.attr({href:n}),h.attr("data-clipboard-text",n),c.val(n),r.stop(),a.css({visibility:"visible"}),setTimeout(function(){var t=c.get(0);t.focus&&t.focus(),t.select&&t.select()},0),o=TradingView.ShareTwitterSnapshot.getStatus(t.activeChartWidget.value().symbolProperty().value(),n),$('<a class="twitter-share-button _tv-dialog-social _tv-dialog-social-twitter"></a>').attr({href:"https://twitter.com/share?count=none&text="+encodeURIComponent(o)+"&url=%20",rel:"nofollow"}).appendTo(p),$('<script src="//platform.twitter.com/widgets.js"></script>').appendTo(p),s=new ZeroClipboard(h),s.on("ready",function(t){s.on("aftercopy",function(t){TradingView.trackEvent("GUI","Copied Image Link"),TVDialogs.showMessage($.t("Copied to clipboard"))})})}var n,s,r,a,l,h,c,d,p,u;return e=e||{},TVDialogs.createModalDialog($.t("Image URL"),{addClass:"_tv-dialog-min-width"}),n=TVDialogs.modalDialog,s=n.find("._tv-dialog-content"),r=TradingView.unifiedSpinner("mini").spin(s.get(0)),a=$('<div class="main">').css({visibility:"hidden"}).appendTo(s),l=$("<a>").text($.t("Save image")).attr({target:"_blank"}).css("text-decoration","underline"),h=$('<span class="copy-clipboard-button _tv-button">'+$.t("Copy link")+"</span>"),c=$("<input>").attr({type:"text",readonly:!0}).bind("click focus",function(){this.select&&this.select()}),$("<p>").appendTo(a).append(l," "+$.t("or copy url:")),d=$('<form class="copy-image-url">').append(h,c),$("<p>").css({
position:"relative"}).appendTo(a).append(d),ZeroClipboard.isFlashUnusable()&&d.addClass("copy-unavailable"),p=$('<p class="_tv-dialog-socials">').appendTo(a),TVDialogs.positionDialog(),TVDialogs.applyHandlers(),TradingView.trackEvent("GUI","Get image button"),ZeroClipboard.config({swfPath:TradingView.wrapUrl("images/ZeroClipboard.swf")}),u=__webpack_require__(55).takeSnapshot,u(t,function(t){i&&i(t),o(t)},function(){r.stop(),TVDialogs.showError($.t("URL cannot be received"),n)},{snapshotUrl:e.snapshotUrl}),!1},TradingView.getImageOfChartSilently=function(t,e,i){var o=__webpack_require__(55).takeSnapshot;return o(t,function(t){i&&i(t)},function(){console.warn($.t("Error while trying to create snapshot."))},{snapshotUrl:e.snapshotUrl}),!1},TradingView.dropPrerenderCache=function(){$('link[rel="prerender"]').remove()},window.onLoginStateChange=onLoginStateChange,window.markNewsAsRead=function(){$(".user-picture .notifications-counter").hide().addClass("hide"),$(".notifications-counter.counter").removeClass("new").text("0"),TVXWindowEvents.emit("zero-notification-counter")},window.followButtonTooltip=function(t){var e=t.hasClass("unfollow")?$.t("Unfollow"):$.t("Follow");t.attr("title",e)},TradingView.followButtonToolipAll=function(){$(".follow-link").each(function(t,e){e=$(e),e.data("tv_tooltip")||window.followButtonTooltip(e)})},TradingView.getSavedChartsList=function(t){return Featuresets.enabled("charting_library_base")?ChartingLibraryBackend.getCharts(t):$.getJSON("/my-charts/",t)},window.isOnChartEditPage=function(){var t=RegExp(TradingView.urlRegExp.publishedChartOld),e=RegExp(TradingView.urlRegExp.publishedChart),i=RegExp(TradingView.urlRegExp.publishedScript);return t.test(location.pathname)||e.test(location.pathname)||i.test(location.pathname)},window.refreshChartMenuState=function(){function t(){s.hide(),n.show()}function e(){n.hide(),s.show()}function i(){is_authenticated&&user.saved_charts?e():t()}function o(e){var i,o=__webpack_require__(48),n=__webpack_require__(56).SidebarCustomScroll;return e={charts:e},e.charts&&e.charts.length?(r.empty(),r.append(Mustache.render(o.lists.savedCharts,e)),i=new n(r,r.find("ul").eq(0),{additionalClass:"gray",alwaysVisible:!0}),r.parent().one("hover",function(){i.updateScrollBar()}),void r.find("li").each(function(e,i){i=$(i);var o=i.find(".name").text();o.length>20&&i.attr("title",o),$("span.icon",i).click(function(e){var i=$(this).data("id");return r.mouseleave(),TradingView.deleteChart(i,function(){user.saved_charts--;var i=$(e.target).parent().attr("href");$(e.target).parent().parent().remove(),user.saved_charts||t(),!window.isOnChartEditPage()||user.saved_charts&&"/chart/"+chartWidget.metaInfo().uid+"/"!=i||(location.href="/chart/")}),!1})})):void t()}var n=$(".header-button.header-item-chart"),s=$(".header-menu.header-item-chart"),r=s.find(".popup-subblock");s.length&&r.length&&(s.on("closeMenu",function(){r.empty()}),s.on("openMenu",function(){TradingView.getSavedChartsList(o)}),i())},function(t){jQuery.fn.putCursorAtEnd=function(){return this.each(function(){if(t(this).focus(),this.setSelectionRange){var e=2*t(this).val().length;this.setSelectionRange(e,e)}else t(this).val(t(this).val());this.scrollTop=999999})},jQuery.fn.putCursorAtPosition=function(e){return this.each(function(){t(this).focus(),this.setSelectionRange&&this.setSelectionRange(e,e)})}}(jQuery),TradingView.ShareTwitterSnapshot=function(t){function e(t){return window.location.protocol+"//"+window.location.host+"/x/"+t+"/"}function i(t,i){return"https://twitter.com/intent/tweet?&status="+encodeURIComponent(TradingView.ShareTwitterSnapshot.getStatus(t,e(i)))}var o,n,s,r=__webpack_require__(57);TradingView.winMobileMode?(this.onSuccess=function(e){try{r.sendEvent(i(t,e),"sharing_ready")}catch(o){}},this.onFailure=function(){try{r.sendEvent("sharing_error")}catch(t){}}):(o=550,n=420,s=open("about:blank","snapshot_tweet","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width="+o+",height="+n+",left="+Math.round(screen.width/2-o/2)+",top="+Math.round(screen.height/2-n/2)),this.onSuccess=function(e){s.location.href=i(t,e)},this.onFailure=function(){s.close()})},TradingView.ShareTwitterSnapshot.getStatus=function(t,e){var i;return i=TradingView.isCmeWidget?e+" from cmegroup.com via @tradingview $"+t:"$"+t+" chart "+e+" via http://www.tradingview.com"},TradingView.ShareStocktwitsSnapshot=function(t){function e(t){return window.location.protocol+"//"+window.location.host+"/x/"+t+"/"}function i(t,i){return"https://stocktwits.com/widgets/share?body="+encodeURIComponent(TradingView.ShareStocktwitsSnapshot.getStatus(t,e(i)))}var o,n,s,r=__webpack_require__(57);TradingView.winMobileMode?(this.onSuccess=function(e){try{r.sendEvent(i(t,e),"sharing_ready")}catch(o){}},this.onFailure=function(){try{r.sendEvent("sharing_error")}catch(t){}}):(o=550,n=420,s=open("about:blank","snapshot_tweet","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width="+o+",height="+n+",left="+Math.round(screen.width/2-o/2)+",top="+Math.round(screen.height/2-n/2)),this.onSuccess=function(e){s.location.href=i(t,e)},this.onFailure=function(){s.close()})},TradingView.ShareStocktwitsSnapshot.getStatus=function(t,e){return"$"+t+" chart "+e+" via http://www.tradingview.com"},TradingView.authInStocktwits=function(t){runOrSignIn(function(){if(user.has_stocktwits)"function"==typeof t&&t();else{"function"==typeof t&&(user.on_stocktwits_auth_success=function(){var e=this;t.apply(e,Array.prototype.slice.call(arguments)),e.user.on_stocktwits_auth_success&&delete e.user.on_stocktwits_auth_success}.bind(window));var e=window.open("https://api.stocktwits.com/api/2/oauth/authorize?client_id="+window.stocktwits_consumer_key+"&response_type=code&redirect_uri="+location.protocol+"//"+location.host+"/accounts/return/stocktwits/&scope=publish_messages","stocktwits_permission_request","scrollbars=yes,height=400,width=700");e.focus()}},{source:"StockTwits auth"})},TradingView.agoDateFormatter=function(t,e,i){var o,n,s,r,a;i?(s=i(new Date-e),o=s.text,n=s.timeout):(r=moment(new Date).diff(e),o=moment(e).fromNow(),n=TradingView.agoDateFormatter.getUpdateTimeout(r),t.parent().toggleClass("just-now",r<45e3)),t.attr("title",e.toLocaleString()).text(o),a=null,n&&(t.attr("data-ago-date-timer")&&clearTimeout(+t.attr("data-ago-date-timer")),a=setTimeout(function(){TradingView.agoDateFormatter(t,e,i)},n)),t.attr("data-ago-date-timer",a)},TradingView.agoDateFormatter.destroy=function(t){$(t).find("*").andSelf().filter("[data-ago-date-timer]").each(function(){clearTimeout(+$(this).attr("data-ago-date-timer"))})},TradingView.agoDateFormatter.nextMinuteThrough=function(t){var e=6e4;return e-t%e},TradingView.agoDateFormatter.nextHourThrough=function(t){var e=36e5;return e-t%e},TradingView.agoDateFormatter.nextDayThrough=function(t){var e=864e5;return e-t%e},TradingView.agoDateFormatter.getUpdateTimeout=function(t){var e=200;if(t=Math.floor(t/6e4),t<60)e+=TradingView.agoDateFormatter.nextMinuteThrough(t);else if(t<1440)e+=TradingView.agoDateFormatter.nextHourThrough(t);else{if(!(t<43200))return!1;e+=TradingView.agoDateFormatter.nextDayThrough(t)}return e},TradingView.agoDateFormatter.fullFormat=function(t){var e,i=Math.floor(t/6e4),o=!1;return i<60?o=TradingView.agoDateFormatter.nextMinuteThrough(t):i<1440?o=TradingView.agoDateFormatter.nextHourThrough(t):i<43200&&(o=TradingView.agoDateFormatter.nextDayThrough(t)),o&&(o+=200),e=new Date-t,{text:moment(e).fromNow(),timeout:o}},TradingView.agoDateFormatter.shortFormat=function(t){var e=Math.floor(t/6e4),i="",o=!1;return e<60?(i=(e<1?0:e)+$.t("m"),o=TradingView.agoDateFormatter.nextMinuteThrough(t)):e<1440?(e=Math.floor(e/60),i=e+$.t("h"),o=TradingView.agoDateFormatter.nextHourThrough(t)):e<43200?(e=Math.floor(e/1440),i=e+$.t("d"),o=TradingView.agoDateFormatter.nextDayThrough(t)):e<15768e3?(e=Math.floor(e/43200),i=e+$.t("mn")):(e=Math.floor(e/15768e3),i=e+$.t("y")),o&&(o+=200),{text:i,timeout:o}},window.userlink=userlink,window.proBadge=proBadge,TradingView.userBadge=function(t,e,i){var o="",n="",s=__webpack_require__(48);if(t.top_user_info){if(o=t.top_user_info.badge?t.top_user_info.badge.title:"",n=t.top_user_info.badge?t.top_user_info.badge["class"]:"",t.is_pro)switch(o+=" | ",t.pro_plan){case"pro_realtime_trial":o+=$.t("Pro Trial");break;case"pro_premium":o+=$.t("Premium");break;case"pro_realtime_trial":o+=$.t("Pro Plus");break;default:o+=$.t("Pro")}t.is_moderator&&(o+=" | "+$.t("Moderator"))}return Mustache.render(t.userBadgeTmpl||s.userBadge,{is_moderator:t.is_moderator,is_pro:t.is_pro,is_realtime:"pro_realtime"==t.pro_plan,is_premium:"pro_premium"==t.pro_plan,is_trial:"pro_realtime_trial"==t.pro_plan,is_top:!!t.top_user_info,badge_class:n,badge_title:o,large_badge:!!e,badge_tag:i},s)},function(){function t(){var t=$(".publish-chart-button");t.size()&&(t.addClass("process"),o=setTimeout(e,3e4))}function e(){clearTimeout(o),$(".publish-chart-button").removeClass("process")}function i(i,o){function n(){o===!0?window.saver.publishChart(i):TVDialogs.showPublishIntroDialog().done(window.saver.publishChart.bind(window.saver,i))}runOrSignIn(function(){var i=function(){var t=TradingView.getUrlParams();return!(!t.publishsource||!~t.publishsource.toLowerCase().indexOf("dailyfx"))}();i?n():(t(),TradingView.phoneVerification.whenVerified({showDialog:!0,source:"Publish chart"}).done(n).always(e))},{source:"Publish chart",sourceMeta:"Chart"})}var o;TradingView.Common={publishChartWidget:function(t){i(t,!0)},publishChart:i}}(),TradingView.symbol2id=function(t){return t.replace(/[^a-z0-9]/gi,"_")},TradingView.isPro=function(){return is_authenticated&&user.is_pro},TradingView.isProRealtime=function(){return this.isPro()&&("pro_realtime"==user.pro_plan||"pro_realtime_trial"==user.pro_plan)},window.updateChartActiveLabel=function(t,e){null==t&&(t=$(".chart-activity-label")),t=$(t),t.each(function(){var t,i=$(this);null==e?t=i.hasClass("chart-activity-label-active"):(t=e,i.toggleClass("chart-activity-label-active",t)),i.find(".chart-activity-label-plate").text(t?$.t("Active"):$.t("Closed"))})},TradingView.centerBlock=function(t){var e=$(window),i=t.width(),o=t.height(),n=e.width(),s=e.height();t.css({left:Math.round((n-i)/2)+"px",top:Math.round((s-o)/2)+"px"})},TradingView.visitPaymentPageSwreg=function(t,e){if(!t.product_ids.hasOwnProperty(e))throw new TypeError("Unknown product");runOrSignIn(function(){var i,o;e in{pro:1,pro_yearly:1,pro_realtime:1,pro_realtime_yearly:1}&&user.is_pro&&user.pro_plan==e||(i={s:t.shop_id,q:1,d:0,v:0,bb:1,clr:1,clro:1,a:user.id,fn:user.first_name,sn:user.last_name,em:user.email,p:t.product_ids[e]},o=Object.keys(i).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(i[t])}),location.href=t.shop_url.replace(/(\?.*|$)/,"?"+o.join("&")))},{source:"Swreg payment"})},TradingView.visitPaymentPage=function(t,e,i){e=e||"y",i=i||{};var o="/order/";"bitcoin"==i.paymentMethod&&(o="/coinbase/begin/"),runOrSignIn(function(){var n=$('<form action="'+o+'" method="post"'+(i.newWindow?' target="_blank"':"")+'><input type="hidden" name="product" value="'+t+'"/><input type="hidden" name="billing_cycle" value="'+e+'"/><input type="hidden" name="fixed_billing_cycle" value="'+(i.fixedCycle?"true":"")+'"/><input type="hidden" name="exchanges_only" value="'+(i.exchangesOnly?"true":"")+'"/><input type="hidden" name="is_upgrade_from_m" value="'+(i.upgradeFromM?"true":"")+'"/></form>').appendTo(document.body);n.submit()},{source:"Paypal payment"})},TradingView.hash=function(t){var e,i,o=0;if(0===t.length)return o;for(i=0;i<t.length;i++)e=t.charCodeAt(i),o=(o<<5)-o+e,o&=o;return o},TradingView.uniq=function(t){return t.reduce(function(t,e,i){return~t.indexOf(e)?null:t.push(e),t},[])},window.bindLate=function(t,e){return function(){return t[e].apply(t,arguments)}},TradingView.memoize=function(t,e){var i=function(o){var n=i.cache,s=""+(e?e.apply(this,arguments):o);return n.hasOwnProperty(s)||(n[s]=t.apply(this,arguments)),n[s]};return i.cache={},i},TradingView.debounce=function(t,e){var i;return function(){clearTimeout(i),i=setTimeout(t.bind.apply(t,[this].concat(Array.prototype.slice.call(arguments))),e)}},TradingView.throttle=function(t,e,i){var o,n,s,r,a=null,l=0;return i||(i={}),r=function(){l=i.leading===!1?0:Date.now(),a=null,s=t.apply(o,n),a||(o=n=null)},function(){var h,c=Date.now();return l||i.leading!==!1||(l=c),h=e-(c-l),o=this,n=arguments,h<=0||h>e?(a&&(clearTimeout(a),a=null),l=c,s=t.apply(o,n),a||(o=n=null)):a||i.trailing===!1||(a=setTimeout(r,h)),s}},TradingView.isLatin=function(t){return!/[^\u0000-\u00FF\u00A0\u2013-\u2122\u2200-\u23FF]/g.test(t)},TradingView.isASCII=function(t,e){return(e?/^[\x00-\xFF]*$/:/^[\x00-\x7F]*$/).test(t)},TradingView.RegExpEscape=function(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},window.follow=function(t){runOrSignIn(function(){var e,i=$(t.currentTarget),o=i.data("id");i.is(".self")||(e=i.is(".active")?0:1,$.ajax({url:"/social/follow-the-user/",type:"POST",data:{targetId:o,follow:e}}).done(function(t){return!t||t.error?void TVDialogs.showNotice($.t("Oops, something went wrong"),t.error):void $(".follow-user-"+o).toggleClass("active").attr("title",e?$.t("Unfollow"):$.t("Follow"))}))},{source:"Follow user",verifiedPhoneRequired:!0,verifyPhoneMessage:$.t("Verified phone number required to follow users.")})},$("body").on("click","button.follow-user",window.follow),TradingView.keyboardBinder=function(){function t(t){n.forEach(function(e,i){e.name===t&&n.splice(i,1)})}function e(t){for(var e=0;e<n.length;e++)if(n[e].name===t)return e}function i(t){var i=e(t.name);i?n[i]=t:n.push(t)}function o(t){var i=e(t.name);i&&n.splice(i,1),n.unshift(t)}var n=[];return $(window).on("keypress",function(t){for(var e=n.length-1;e>=0&&n[e].func(t)!==!0;e--);}),{registerListener:function(t,e){i({name:t,func:e})},removeListener:function(e){t(e)},pushBackListener:function(t,e){o({name:t,func:e})}}}(),window.chartRelationButtons=function(t){var e=t.closest("[data-chart-id]").data("chart-id");if(!e)throw Error("chartRelationButtons can`t find data-chart-id attribute");t.on("click",".agree",function(t){function i(){o.toggleClass("active",n)}var o,n;t.preventDefault(),o=$(this),n=o.hasClass("active"),runOrSignIn(function(){o.toggleClass("active",!n),$.post("/vote-for-chart/",{id:e,vote:1}).done(function(t){return t.error?(TVDialogs.showNotice("Error",t.error),i()):void(void 0!==t.result_score&&o.text(t.result_score||"").toggleClass("with-counter",0!==t.result_score))}).fail(i)},{source:"Chart agree"})}),t.on("click",".fav",function(t){function i(){o.toggleClass("active",n)}var o,n;t.preventDefault(),o=$(this),n=o.hasClass("active"),runOrSignIn(function(){o.toggleClass("active",!n);var t=n?"/remove-from-favorites/":"/add-to-favorites/";$.post(t,{id:e}).done(function(t){return t.error?i():void(void 0!==t.followers&&o.text(t.followers||"").toggleClass("with-counter",0!==t.followers))}).fail(i)},{source:"Chart favorite"})})},TradingView.makeTextContainerEditable=function(t,e,i){function o(e){t.removeClass("tv-editable-active").on("click",function(){a(i)}).off("mousedownoutside"),e&&t.empty().text(e)}function n(e){var e=e;t.addClass("tv-editable-active").off("click").on("mousedownoutside",function(){o(e)})}function s(){l&&l.remove()}function r(e){s(),e&&(l=$('<div class="settings"><div class="error"><p></p></div></div>').find("p").text(e).end(),t.before(l))}function a(i){var a,l,h,c,d,p,u,_,f={okButtonText:$.t("OK"),okButtonClass:"_tv-button ok",cancelButtonText:$.t("Cancel"),cancelButtonClass:"_tv-button cancel"};i=$.extend({},f,i),a=t.text(),l=Modernizr.touch?"":a,h="textarea"===i.replaceWith?$("<textarea "+(i.inputClass?'class="'+i.inputClass+'" ':"")+(i.maxLength?'maxlength="'+i.maxLength+'" ':"")+"></textarea>"):$('<input type="text" '+(i.inputClass?'class="'+i.inputClass+'" ':"")+(i.maxLength?'maxlength="'+i.maxLength+'" ':"")+'value="">'),h.val(l),c=$('<div class="buttons"></div>'),d=$('<div class="'+i.okButtonClass+'">'+i.okButtonText+"</div>").appendTo(c),p=$('<div class="'+i.cancelButtonClass+'">'+i.cancelButtonText+"</div>").appendTo(c),n(a),u="function"==typeof i.onCancel?function(){i.onCancel(),o()}:function(){o(a)},_=function(t,i,n){/^\s+$/.test(i)&&(i=""),h.attr("disabled","disabled"),d.addClass("process"),e(t,i,n,function(){o()},s,r)},d.click(function(e){e.preventDefault(),e.stopPropagation(),_(t,h.val(),a)}),p.click(function(t){t.preventDefault(),t.stopPropagation(),u()}),h.keyup(function(e){e.preventDefault(),e.stopPropagation(),13!=e.keyCode||e.shiftKey?27==e.keyCode&&u():_(t,h.val(),a)}),t.empty().append(h,c),h.select()}var l;return!t instanceof $?void console.error("$container should be jQuery object"):e?"function"!=typeof e?void console.error("onOk should be function"):(t.addClass("tv-editable"),void o()):void console.error("onOk required")},TradingView.changeUserProfileField=function(t){function e(t){var e=Array.prototype.slice.call(arguments);e.shift(),"function"==typeof t&&t.apply(this,e)}var i,o;return t&&t.name&&void 0!==t.value?(i={},i[t.name]=t.value,o="status"!=t.name?"/accounts/change_data_json/":"/accounts/change_status/",void $.post(o,i,function(i){if(!i.errors||$.isEmptyObject(i.errors)){var o=i[t.name];user[t.name]=o,e(t.onSuccess,o)}else e(t.onError,i.errors[t.name])}).error(function(i){var o=__webpack_require__(58);403===i.status?e(t.onError,$.t("Please, try to reload page to edit user data")):e(t.onError,o.isProd()?$.t("Sorry, an error has occurred"):i.responseText)}).always(function(){e(t.onComplete)})):void console.warn("Required options.name and options.value")},TradingView.inputOnTyping=function(t,e,i){function o(){var t=$(this),o=t.val(),n=e(o);t.removeClass("_tv-dialog-text-input-error"),"function"==typeof i&&i(o),o!==n&&t.val(n)}function n(t){if(t.ctrlKey)return!1;if(t.metaKey)return!1;if(!t.charCode)return!1;var e=t.keyCode||t.which;return 9!=e&&(13!=e&&(16!=e&&(17!=e&&(18!=e&&(19!=e&&(20!=e&&(27!=e&&!(33<=e&&e<=40))))))))}return t instanceof $?("function"!=typeof e&&(e=function(t){return t}),void t.each(function(t,e){var i=$(e);i.on("keypress",function(t){if(n(t)){var e=function(){o.call(this),$(this).off("keyup",e)}.bind(this);$(this).on("keyup",e)}}),i.change(o)})):void console.warn("'$inputs' should be instance of jQuery")},TradingView.makeInputNumberOnly=function(t,e){var i,o;e=e||{},i=e.integerOnly,o=e.positiveOnly,TradingView.inputOnTyping(t,function(t){var n=t.replace(/\,/g,".").replace(/[^0-9\.-]/g,"").replace(/^-/,o?"":"__minus__").replace(/\./,"__point__").replace(/^__point__/,"0__point__").replace(/[\.-]/g,"").replace("__minus__","-").replace("__point__",".").replace(/^0+/,"0");return i&&/\d+/.test(n)&&(n=parseInt(n),TradingView.isInteger(e.minValue)&&(n=Math.max(e.minValue,n)),TradingView.isInteger(e.maxValue)&&(n=Math.min(e.maxValue,n))),!i&&/^0\d/.test(n)&&(n=""+n,n=n.substring(0,1)+"."+n.substring(1,n.length)),n},e.inputOnTypingCallback)},TradingView.makeInputDateOnly=function(t,e){function i(t){return 4!=t.length&&7!=t.length||(t+="-"),t=t.substr(0,10)}var e=e||{};TradingView.inputOnTyping(t,i,e.inputOnTypingCallback)},TradingView.makeInputTimeOnly=function(t,e){function i(t){return 2==t.length&&(t+=":"),t=t.substr(0,5)}var e=e||{};TradingView.inputOnTyping(t,i,e.inputOnTypingCallback)},TradingView.timezoneIsAvailable=function(t){var e,i=__webpack_require__(47).availableTimezones;for(e=0;e<i.length;e++)if(t===i[e].id)return!0;return!1},TradingView.parseSessionHours=function(t,e){function i(t,i,n){var s,r,a,l,h,c,d,p,u,_,f,g=[];if(n.openEveryDay)g=[0,1,2,3,4,5,6];else if(n.openOnDays)for(s=n.openOnDays,r=0;r<s.length;r++)g.push(parseInt(s[r])-1);else g=[1,2,3,4,5];for(a=function(t){return 60*parseInt(t[0],10)+parseInt(t[1],10)},l=a(t),h=a(i),c=l&&l>=h,c&&0!==g[0]&&g.unshift(0),d="",p=[],u=g[0]-1,_=g.length,r=0;r<_;r++)u+1<g[r]||r+1==_?(d+=o+moment.weekdaysMin(g[r]),p.push(d),d=""):d||(d=moment.weekdaysMin(g[r])),u=g[r];return f="{0}:{1}{2}{3}:{4}".format(t[0],t[1],o,i[0],i[1]),p.map(function(t){return t+e+f})}var o,n,s,r,a;return e=e||"",o="-",t?"24x7"==t?i(["00","00"],["00","00"],{openEveryDay:!0}):(n=/([0-2]\d)([0-5]\d)-([0-2]\d)([0-5]\d)(?:\:(\d+))?/,(s=n.exec(t))?(r=[s[1],s[2]],a=[s[3],s[4]],i(r,a,{openOnDays:s[5]})):{}):{}},TradingView.parseTzOffset=function(t){var e=PineJsCalendar.get_timezone(t).offset_utc(Date.now()),i="",o=e/1e3/60/60;return o%1&&(i=":"+60*(o%1)),o=o>0?"+"+(o-o%1)+i:0===o?"":""+(o-o%1)+i,{offset:e,string:"UTC"+o}},TradingView.getTzByObsoleteName=function(t){return{UTC:"Etc/UTC",EST:"America/New_York",CST:"America/Chicago",PST:"America/Los_Angeles"}[t]||"exchange"},availableTimezones=__webpack_require__(47).availableTimezones;for(i=0;i<TradingView.availableTimezones.length;i++)["Etc/UTC","exchange"].indexOf(TradingView.availableTimezones[i].id)===-1&&(TradingView.availableTimezones[i].title="("+TradingView.parseTzOffset(TradingView.availableTimezones[i].id).string+") "+TradingView.availableTimezones[i].title);TradingView.showChangeUserStatusDialog=function(){return runOrSignIn(function(){TVDialogs.showChangeUserStatusDialog()},{source:"Change status"}),!1},TradingView.getUrlParams=function(){for(var t=/\+/g,e=/([^&=]+)=?([^&]*)/g,i=function(e){return decodeURIComponent(e.replace(t," "))},o=window.location.search.substring(1),n={},s=e.exec(o);s;)n[i(s[1])]=i(s[2]),s=e.exec(o);return n},TradingView.createUrlParams=function(t){var e,i=[];for(e in t)t.hasOwnProperty(e)&&null!=t[e]&&i.push(encodeURIComponent(e)+"="+encodeURIComponent(t[e]));return i.join("&")},TradingView.setTrialAvailiable=function(t){TVLocalStorage.setItem("trial_availiable",t?1:0)},TradingView.translatedIntervalString=function(t){var e=(""+t).match(/(.*)([DWM])/);return e?e[1]+$.t(e[2],{context:"dates"}):t},TradingView.capitalizeFirstLetter=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},TradingView.generateColor=function(t,e,i){var o,n,s=__webpack_require__(59).RGBColor;if(!TradingView.isHexColor(t))return i?(e=e||0,TradingView.rgbaComp(TradingView.rgbDecomp(t),1-e/100)):t;if(e>=0&&e<=100)return o=new s(t),n=1-e/100,"rgba("+o.r+", "+o.g+", "+o.b+", "+n.toFixed(2)+")";throw"invalid transparency"},TradingView.decompNamedColor=function(t){switch(t){case"white":return[255,255,255];case"black":return[0,0,0];case"red":return[255,0,0];case"blue":return[0,255,0];case"green":return[0,0,255]}},TradingView.rgbComp=function(t,e,i){return 2 in arguments||(i=t[2],e=t[1],t=t[0]),"rgb("+[~~t,~~e,~~i].join(", ")+")"},TradingView.resetTransparency=function(t){return TradingView.isHexColor(t)?t:TradingView.rgbaComp(TradingView.rgbDecomp(t),1)},TradingView.rgbDecomp=function(t){return TradingView.decompNamedColor(t)||t.match(/[0-9]+/g).splice(0,3)},TradingView.isHexColor=function(t){return!!~t.indexOf("#")},TradingView.hexRgbDecomp=function(t){return 7===t.length?[parseInt(t.slice(1,3),16),parseInt(t.slice(3,5),16),parseInt(t.slice(5,7),16)]:4===t.length?[parseInt(t.slice(1,2)+t.slice(1,2),16),parseInt(t.slice(2,3)+t.slice(2,3),16),parseInt(t.slice(3,4)+t.slice(3,4),16)]:void 0},TradingView.rgbaComp=function(t,e,i,o){return 2 in arguments||(o=e,i=t[2],e=t[1],t=t[0]),null==o&&(o=1),"rgba("+[~~t,~~e,~~i,o].join(", ")+")"},TradingView.generateLowBrightnessColor=function(t){var e,i;return e=TradingView.isHexColor(t)?TradingView.hexRgbDecomp(t):TradingView.rgbDecomp(t),i=e.map(function(t){return t>50?t-50:0}),TradingView.rgbComp(i)},TradingView.defaultColorPickersBorder="#727272",TradingView.pow10Increment=function(t,e,i){var o,n=1;return t<0&&(n=-1,e=!e),i=Math.abs(i),isFinite(i)||(i=1),t=Math.abs(t),o=Math.pow(10,Math.floor(Math.log(t)/Math.LN10))||i||0,10*o<=t&&(o*=10),e&&t===o&&(o/=10),o<i&&(o=i),e?Math.ceil(t/o-1)*o*n:Math.floor(t/o+1)*o*n},TradingView.abbreviatedNumber=function(t){var e,i=0,o=+t;if(isFinite(o))for(;o>=1e3&&o%100===0;)i++,o/=1e3;return e=["","K","M","G","T","Y"][i],null==e&&(e="e"+3*i),o+e},TradingView.makeFont=function(t,e,i){return i&&(i+=" "),i+t+"px "+e},$.fn.appendUtm=function(t,e){return this.each(function(){var i,o,n=$(this);null!=t&&(i=$("<input>").attr("type","hidden").attr("name","utm_source").val(t).appendTo(n),o=$("<input>").attr("type","hidden").attr("name","utm_medium").val(e).appendTo(n))}),this},$.fn.filterByData=function(t,e){return this.filter(function(){return $(this).data(t)==e})},$.fn.reverse=[].reverse,window.showExtensionPopup=function(){$(function(){function t(t){TVDialogs.modalDialog?TVDialogs.modalDialog.find("._tv-dialog").on("destroy",function(){setTimeout(t,0)}):t()}var e,i,o;window.is_authenticated&&TradingView.isFeatureEnabled("show_extension_popup")&&Featuresets.enabled("show_extension_popup")&&!TradingView.isOnFeaturePage&&(i=function(){var t=window.chrome,e=window.navigator.vendor;return null!==t&&void 0!==t&&"Google Inc."===e}(),i&&(e="chrome"),e&&(o="notShowExtensionPopup."+e,TVSettings.getBool(o,!1)||t(function(){var t=TVDialogs.showBrowserExtensionDialog(e);t.find("._tv-dialog").on("destroy",function(){TVSettings.setValue(o,!0)})})))})},$.fn.TVEmbeds=function(){return this},TradingView.removeBBCodes=function(t){return t.replace(RegExp(TradingView.quotesRe.openingTag,"gi"),$.t("@$1 wrote")+":\n").replace(RegExp(TradingView.quotesRe.closingTag,"gi"),"")},TradingView.quotesRe={openingTag:'\\[quote=(?:"|&quot;)([a-z0-9\\._\\-\\u00A0]+)(?:"|&quot;)\\]',closingTag:"\\[\\/quote\\]"},TradingView.quotesRe.quotedArea=TradingView.quotesRe.openingTag+"([^]*)"+TradingView.quotesRe.closingTag,TradingView.removeQuotes=function(t){return t.replace(RegExp(TradingView.quotesRe.quotedArea,"ig"),"").trim()},TradingView.parseQuotes=function(t){function e(t){var e,i=RegExp(TradingView.quotesRe.openingTag,"ig"),o=RegExp(TradingView.quotesRe.closingTag,"ig"),n=i.exec(t),s=o.exec(t);return!n||!s||s.index<n.index?null:(e='<div class="ch-item-quote">'+$.t("@__username__ wrote",{username:n[1]})+":<br/>"+TradingView.removeQuotes(t.substring(i.lastIndex,s.index))+"</div>",{start:n.index,end:o.lastIndex,converted:e})}function i(t){var o=e(t);return o?t.substring(0,o.start)+o.converted+i(t.substring(o.end).trim()):t}return i(t)},TradingView.getInnerTextContent=function(t){var e=function(t){return t.childElementCount?$.map(t.childNodes,e).join("")+("DIV"==t.tagName?"\n":""):"BR"==t.tagName?"\n":t.textContent};return e(t)},TradingView.trimWords=function(t,e){var i,o,n,s;if(t.length<e)return t.trim();for(t+=" ",i=/\s+/g,n="",s=0;null!=(o=i.exec(t));){if(o.index>=e){n=t.substring(0,s).trim()+"...";break}s=o.index}return n||t.substring(0,e)+"..."},TradingView.urlRegExp={imageUrl:"^[0-9a-zA-Z]{8}$",publishedImage:"/(?:i|x)/([0-9a-zA-Z]{8})/?",publishedChartOld:"/v/([0-9a-zA-Z]{8})/?",publishedChart:"/chart/([0-9a-zA-Z!_:+*()-]+?)/([0-9a-zA-Z]{8})(?:-([^/]+))?/?",publishedScript:"/script/([0-9a-zA-Z]{8})(?:-([^/]+))?/?",amazonawsLinks:"(?:https://|http://)(s3\\.amazonaws\\.com\\/tradingview?(\\w*?)\\/snapshots)\\/(?:\\S*?)\\.(png|bmp|jpg|jpeg)"},TradingView.createPublishedChartUrl=function(t,e,i){return t&&/[0-9a-zA-Z]{8}/.test(t)?t&&e?"/chart/"+e+"/"+t+(i?"-"+i:"")+"/":"/v/"+t+"/":""},TradingView.parsePublishedChartUrl=function(t){var e,i={},o=RegExp(TradingView.urlRegExp.publishedChartOld),n=RegExp(TradingView.urlRegExp.publishedChart),s=RegExp(TradingView.urlRegExp.publishedScript),r=RegExp(TradingView.urlRegExp.imageUrl);return o.test(t)?(e=t.match(o)||{},i={image_url:e[1]}):n.test(t)?(e=t.match(n)||{},i={symbol:e[1],image_url:e[2],title:e[3]}):s.test(t)?(e=t.match(s)||{},i={image_url:e[1],title:e[2]}):r.test(t)&&(i={image_url:t}),i},TradingView.createPublishedChartImageUrl=function(t){var e,i;return t&&/[0-9a-zA-Z]{8}/.test(t)?TradingView.Environment()in{battle:1,staging:1}?(e=t.charAt(0).toLowerCase(),i="battle"==TradingView.Environment()?"tradingview":"tradingview_staging","https://s3.amazonaws.com/"+i+"/"+e+"/"+t+".png"):"/i/"+t+"/":""},TradingView.createSnapshotImageUrls=function(t){var e,i,o;return t&&/[0-9a-zA-Z]{8}/.test(t)?TradingView.Environment()in{battle:1,staging:1}?(e=t.charAt(0).toLowerCase(),i="battle"==TradingView.Environment()?"tradingview":"tradingview_staging",o="https://s3.amazonaws.com/"+i+"/snapshots/"+e,{url:o+"/"+t+".png",preview:o+"/"+t+"_thumb.png"}):(o=window.location.protocol+"//"+window.location.host,{url:o+"/x/"+t+"/",preview:o+"/x/"+t+"/s/"}):""},TradingView.openNewChart=function(t){var e,i,o;t=t||{},is_authenticated?(e='<form method="POST" target="_blank" action="/chart/" style="display: none;"><input type="text" name="new" value="1">',Object.keys(t).forEach(function(i){e+='<input type="text" name="'+i+'" value="'+t[i]+'">'}),e+='<input type="submit"></form>',i=$(e),$("body").append(i),i.submit()):(o=$.param(t),window.open("/chart/"+(o?"?"+o:""),"_blank"))},TradingView.checkUserLanguage=function(){is_authenticated||$.post("/",{check_language:1},function(t){t&&TVDialogs.showLanguagePopup(t)})},TradingView.unifiedSpinner=function(t,e){var i,o={lines:17,length:0,width:3,radius:20,corners:1,color:"#00A2E2",opacity:.3,rotate:0,direction:1,speed:1.5,trail:60,fps:20,className:"spinner",zIndex:2e9,top:"50%",left:"50%",shadow:!1,hwaccel:!1},n=TradingView.unifiedSpinner.presets[t];return n&&(o=$.extend(o,n)),i=$.extend({},o,e),new Spinner(i)},TradingView.unifiedSpinner.presets={mini:{radius:8,width:2,lines:14},micro:{radius:4,width:2,lines:12}},TradingView.parseJSONorNot=function(t){return"string"==typeof t?JSON.parse(t):t},$(window).load(function(){window.loaded=!0}),window.setCookie=function(t,e,i,o){var n,s;o=o?"; path="+o:"",i?(s=new Date,s.setTime(s.getTime()+24*i*60*60*1e3),n="; expires="+s.toGMTString()):n="",document.cookie=t+"="+e+n+o},window.getCookie=function(t){var e,i,o,n=t+"=",s=document.cookie.split(";");for(e=0,i=s.length;e<i;e++){for(o=s[e];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(n))return o.substring(n.length,o.length)}return null},TradingView.goRegistrateAfterThreeClicks=function(){var t=window.getCookie("unregistrateClicksOnIdeas");null===t&&(t=0),t++,t>=3?(TVDialogs.goRegistrate({from:"ideas"}),window.setCookie("unregistrateClicksOnIdeas",0)):window.setCookie("unregistrateClicksOnIdeas",t)},jQuery.event.special.middleclick={setup:function(t,e){$(this).bind("mousedown mouseup mouseout",jQuery.event.special.middleclick.handler)},teardown:function(t){$(this).unbind("mousedown mouseup mouseout",jQuery.event.special.middleclick.handler)},handler:function(t){var e=$(this);"mousedown"==t.type&&2==t.which?e.data("mouseTrigger",1):"mouseout"==t.type?e.data("mouseTrigger",0):"mouseup"==t.type&&(2==t.which&&e.data("mouseTrigger")&&(t.type="middleclick",jQuery.event.handle.apply(this,arguments)),e.data("mouseTrigger",0))}},TradingView.handleClickOnLogo=function(t,e){if(TradingView.isFeatureEnabled("advertisement-rotation")){var i=+new Date;$(this).data("lastClick")&&i-$(this).data("lastClick")<300||($(this).data("lastClick",i),$.post("/advertisement/click-on-logo/",{target:t,sponsor_name:e}))}},$(function(){TradingView.isFeatureEnabled("test_new_design")&&($.cookie("backend","prod"),"undefined"!=typeof _gaq&&_gaq.push(["_setCustomVar",4,"design","old",1]),$(".js-try-new-design-link").click(function(t){TradingView.trackEvent("design","try_new"),$.cookie("backend","test_backend"),location.reload()}))})}).call(exports,__webpack_require__(1),__webpack_require__(32),__webpack_require__(33),__webpack_require__(35),__webpack_require__(6),__webpack_require__(36),__webpack_require__(37),__webpack_require__(39))},function(t,e,i){(function(t){"use strict";function e(){this._listeners=[]}e.prototype.subscribe=function(t,e,i){var o={object:t,member:e,singleshot:!!i};this._listeners.push(o)},e.prototype.unsubscribe=function(t,e){var i,o;for(i=0;i<this._listeners.length;++i)if(o=this._listeners[i],o.object===t&&o.member.prototype===e.prototype){this._listeners.splice(i,1);break}},e.prototype.fire=function(){var t,e,i=this._listeners.slice();for(t=0;t<i.length;++t)e=i[t],e.member.apply(e.object||null,arguments);for(t=this._listeners.length-1;t>=0;t--)this._listeners[t].singleshot&&this._listeners.splice(t,1)},"undefined"!=typeof window&&(window.Delegate=e),void 0!==t&&t&&t.exports&&(t.exports=e);
}).call(e,i(2)(t))},,,,,function(t,e,i){"use strict";function o(t){var e,i,o,n,s,r;if(this._name=t,e=d[t],e||("UTC"!==t&&"Etc/UTC"!==t&&TradingView.logError("unknown timezone: "+t),e={time:[],offset:[]},this._invalid=!0),e.time.length!==e.offset.length&&(TradingView.logError("timezone transition table doesn't match offset table"),e={time:[],offset:[]},this._invalid=!0),!e.time_utc){for(i=e.time,o=e.offset,n=i.length,s=Array(n),r=0;r<n;r++)i[r]*=1e3,o[r]*=1e3,s[r]=i[r]-o[r];e.time_utc=s}this.tz=e}function n(t,e){var i,o,n,r=t.length;if(0===r)return-1;if(isNaN(e))throw"Key is NaN";for(i=0,o=r-1,n=s((i+o)/2);;){if(t[n]>e){if(o=n-1,o<i)return n}else if(i=n+1,o<i)return n<r-1?n+1:-1;n=s((i+o)/2)}}var s,r,a,l,h,c,d=i(38);o.prototype.offset_utc=function(t){return o._offset(this.tz.time_utc,this.tz.offset,t)},o.prototype.offset_loc=function(t){return o._offset(this.tz.time,this.tz.offset,t)},o.prototype.is_valid=function(){return!this._invalid},o._offset=function(t,e,i){var o=n(t,i);return o===-1?0:e[o]},s=function(t){return 0|t},r=function(t){return 60*t*1e3},a=function(t){return 1e3*t},l=function(t,e){return s((s(t/1e3)-s(e/1e3))/60)},h=function(t,e){return s(s(t/1e3)-s(e/1e3))},c={SUNDAY:1,MONDAY:2,TUESDAY:3,WEDNESDAY:4,THURSDAY:5,FRIDAY:6,SATURDAY:7,JANUARY:0,DECEMBER:11,YEAR:1,MONTH:2,WEEK_OF_YEAR:3,DAY_OF_MONTH:5,DAY_OF_YEAR:6,DAY_OF_WEEK:7,HOUR_OF_DAY:11,MINUTE:12,SECOND:13,minutesPerDay:1440,secondsPerDay:r(1440),get_year:function(t){return t.getUTCFullYear()},get_month:function(t){return t.getUTCMonth()},get_hours:function(t){return t.getUTCHours()},get_minutes:function(t){return t.getUTCMinutes()},get_seconds:function(t){return t.getUTCSeconds()},get_day_of_month:function(t){return t.getUTCDate()},get_day_of_week:function(t){return t.getUTCDay()+1},get_day_of_year:function(t){var e=Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0);return s((t.getTime()-e)/c.secondsPerDay)+1},get_week_of_year:function(t){var e=Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0),i=c.clone(t);return c.set_hms(i,0,0,0,0),i.setUTCDate(i.getUTCDate()+4-(i.getUTCDay()||7)),s(((i.getTime()-e)/c.secondsPerDay+1)/7)},get_minutes_from_midnight:function(t){return 60*c.get_hours(t)+c.get_minutes(t)},set_hms:function(t,e,i,o,n){t.setUTCHours(e),t.setUTCMinutes(i),t.setUTCSeconds(o),t.setUTCMilliseconds(n)},add_days_considering_dst:function(t,e,i){var o,n=t.offset_utc(e),s=this.clone(e);return this.add_date(s,i),o=t.offset_utc(s),s.setTime(s.getTime()+n-o),s},add_date:function(t,e){t.setTime(t.getTime()+e*c.secondsPerDay)},clone:function(t){return new Date(t.getTime())},get_days_per_year:function(t){var e=t.getUTCFullYear();return this.days_per_year(e)},days_per_year:function(t){return t%4!==0||t%100===0&&t%400!==0?365:366},get_part:function(t,e){switch(e){case c.YEAR:return c.get_year(t);case c.MONTH:return c.get_month(t);case c.DAY_OF_MONTH:return c.get_day_of_month(t);case c.WEEK_OF_YEAR:return c.get_week_of_year(t);case c.DAY_OF_WEEK:return c.get_day_of_week(t);case c.HOUR_OF_DAY:return c.get_hours(t);case c.MINUTE:return c.get_minutes(t);case c.DAY_OF_YEAR:return c.get_day_of_year(t);case c.SECOND:return c.get_seconds(t);default:return t.getTime()}},time_minutes:r,time_seconds:a,time_minutes_diff:l,time_seconds_diff:h,utc_to_cal:function(t,e){var i=t.offset_utc(e);return new Date(e+i)},get_cal:function(t,e,i,o){var n=new Date(Date.UTC(e,i,o)),s=t.offset_utc(+n);return new Date(n.valueOf()-s)},get_cal_utc:function(t,e,i){return new Date(Date.UTC(t,e,i))},cal_to_utc:function(t,e){var i=e.getTime(),o=t.offset_loc(i);return i-o},get_timezone:function(t){return new o(t)},shift_day:function(t,e){var i=t-1;return i+=e,i>6?i%=7:i<0&&(i=(7+i%7)%7),i+1}},t.exports=c},function(t,e){!function(){var e={"America/New_York":{time:[-2717668562,-1633298400,-1615154400,-1601848800,-1583704800,-1570399200,-1551650400,-1536530400,-1523224800,-1504476e3,-1491775200,-1473026400,-1459720800,-1441576800,-1428271200,-1410127200,-1396821600,-1378677600,-1365372e3,-1347228e3,-1333922400,-1315173600,-1301868e3,-1283724e3,-1270418400,-1252274400,-1238968800,-1220824800,-1207519200,-1189375200,-1176069600,-1157320800,-114462e4,-1125871200,-1112565600,-1094421600,-1081116e3,-1062972e3,-1049666400,-1031522400,-1018216800,-1000072800,-986767200,-968018400,-955317600,-936568800,-923263200,-905119200,-891813600,-880236e3,-76941e4,-765410400,-747266400,-733960800,-715816800,-702511200,-684367200,-671061600,-652917600,-639612e3,-620863200,-608162400,-589413600,-576108e3,-557964e3,-544658400,-526514400,-513208800,-495064800,-481759200,-463615200,-447285600,-431560800,-415836e3,-400111200,-384386400,-368661600,-352936800,-337212e3,-321487200,-305762400,-289432800,-273708e3,-257983200,-242258400,-226533600,-210808800,-195084e3,-179359200,-163634400,-147909600,-13158e4,-11646e4,-100130400,-84405600,-68680800,-52956e3,-37231200,-21506400,-5781600,9943200,25668e3,41392800,57722400,73447200,89172e3,104896800,120621600,126669600,152071200,162352800,183520800,199245600,215575200,230695200,247024800,262749600,278474400,294199200,309924e3,325648800,341373600,357098400,372823200,388548e3,404877600,419997600,436327200,452052e3,467776800,483501600,499226400,514951200,530676e3,544586400,562125600,576036e3,59418e4,607485600,625629600,638935200,657079200,670989600,688528800,702439200,719978400,733888800,752032800,765338400,783482400,796788e3,814932e3,828842400,846381600,860292e3,877831200,891741600,909280800,923191200,941335200,954640800,972784800,986090400,1004234400,1018144800,1035684e3,1049594400,1067133600,1081044e3,1099188e3,1112493600,1130637600,1143943200,1162087200,1173578400,1194141600,1205028e3,1225591200,1236477600,1257040800,1268532e3,1289095200,1299981600,1320544800,1331431200,1351994400,1362880800,1383444e3,1394330400,1414893600,142578e4,1446343200,1457834400,1478397600,1489284e3,1509847200,1520733600,1541296800,1552183200,1572746400,1583632800,1604196e3,1615687200,1636250400,1647136800,16677e5,1678586400,1699149600,1710036e3,1730599200,1741485600,1762048800,1772935200,1793498400,1804989600,1825552800,1836439200,1857002400,1867888800,1888452e3,1899338400,1919901600,1930788e3],offset:[-17762,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3]},"America/Los_Angeles":{time:[-2717668378,-1633298400,-1615154400,-1601848800,-1583704800,-880236e3,-769420800,-765410400,-687996e3,-662680800,-620863200,-608162400,-589413600,-576108e3,-557964e3,-544658400,-526514400,-513208800,-495064800,-481759200,-463615200,-450309600,-431560800,-418255200,-400111200,-386805600,-368661600,-355356e3,-337212e3,-323906400,-305762400,-292456800,-273708e3,-261007200,-242258400,-226533600,-210808800,-195084e3,-179359200,-163634400,-147909600,-13158e4,-11646e4,-100130400,-84405600,-68680800,-52956e3,-37231200,-21506400,-5781600,9943200,25668e3,41392800,57722400,73447200,89172e3,104896800,120621600,126669600,152071200,162352800,183520800,199245600,215575200,230695200,247024800,262749600,278474400,294199200,309924e3,325648800,341373600,357098400,372823200,388548e3,404877600,419997600,436327200,452052e3,467776800,483501600,499226400,514951200,530676e3,544586400,562125600,576036e3,59418e4,607485600,625629600,638935200,657079200,670989600,688528800,702439200,719978400,733888800,752032800,765338400,783482400,796788e3,814932e3,828842400,846381600,860292e3,877831200,891741600,909280800,923191200,941335200,954640800,972784800,986090400,1004234400,1018144800,1035684e3,1049594400,1067133600,1081044e3,1099188e3,1112493600,1130637600,1143943200,1162087200,1173578400,1194141600,1205028e3,1225591200,1236477600,1257040800,1268532e3,1289095200,1299981600,1320544800,1331431200,1351994400,1362880800,1383444e3,1394330400,1414893600,142578e4,1446343200,1457834400,1478397600,1489284e3,1509847200,1520733600,1541296800,1552183200,1572746400,1583632800,1604196e3,1615687200,1636250400,1647136800,16677e5,1678586400,1699149600,1710036e3,1730599200,1741485600,1762048800,1772935200,1793498400,1804989600,1825552800,1836439200,1857002400,1867888800,1888452e3,1899338400,1919901600,1930788e3],offset:[-28378,-28800,-25200,-28800,-25200,-28800,-25200,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800]},"America/Chicago":{time:[-2717668236,-1633298400,-1615154400,-1601848800,-1583704800,-1563746400,-1551650400,-1538949600,-1520200800,-1504476e3,-1491775200,-1473026400,-1459720800,-1441576800,-1428271200,-1410127200,-1396821600,-1378677600,-1365372e3,-1347228e3,-1333922400,-1315173600,-1301868e3,-1283724e3,-1270418400,-1252274400,-1238968800,-1220824800,-1207519200,-1189375200,-1176069600,-1157320800,-114462e4,-1125871200,-1112565600,-1094421600,-1081116e3,-1067810400,-1045432800,-1031522400,-1018216800,-1000072800,-986767200,-968018400,-955317600,-936568800,-923263200,-905119200,-891813600,-880236e3,-769413600,-765410400,-747266400,-733960800,-715816800,-702511200,-684367200,-671061600,-652917600,-639612e3,-620863200,-608162400,-589413600,-576108e3,-557964e3,-544658400,-526514400,-513208800,-495064800,-481759200,-463615200,-447285600,-431560800,-415836e3,-400111200,-384386400,-368661600,-352936800,-337212e3,-321487200,-305762400,-289432800,-273708e3,-257983200,-242258400,-226533600,-210808800,-195084e3,-179359200,-163634400,-147909600,-13158e4,-11646e4,-100130400,-84405600,-68680800,-52956e3,-37231200,-21506400,-5781600,9943200,25668e3,41392800,57722400,73447200,89172e3,104896800,120621600,126669600,152071200,162352800,183520800,199245600,215575200,230695200,247024800,262749600,278474400,294199200,309924e3,325648800,341373600,357098400,372823200,388548e3,404877600,419997600,436327200,452052e3,467776800,483501600,499226400,514951200,530676e3,544586400,562125600,576036e3,59418e4,607485600,625629600,638935200,657079200,670989600,688528800,702439200,719978400,733888800,752032800,765338400,783482400,796788e3,814932e3,828842400,846381600,860292e3,877831200,891741600,909280800,923191200,941335200,954640800,972784800,986090400,1004234400,1018144800,1035684e3,1049594400,1067133600,1081044e3,1099188e3,1112493600,1130637600,1143943200,1162087200,1173578400,1194141600,1205028e3,1225591200,1236477600,1257040800,1268532e3,1289095200,1299981600,1320544800,1331431200,1351994400,1362880800,1383444e3,1394330400,1414893600,142578e4,1446343200,1457834400,1478397600,1489284e3,1509847200,1520733600,1541296800,1552183200,1572746400,1583632800,1604196e3,1615687200,1636250400,1647136800,16677e5,1678586400,1699149600,1710036e3,1730599200,1741485600,1762048800,1772935200,1793498400,1804989600,1825552800,1836439200,1857002400,1867888800,1888452e3,1899338400,1919901600,1930788e3],offset:[-21036,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600]},"America/Phoenix":{time:[-2717670498,-1633298400,-1615154400,-1601848800,-1583704800,-880236e3,-820540740,-812678340,-796867140,-84405600,-68680800,1924966800],offset:[-26898,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200]},"America/Toronto":{time:[-2366755200,-1632088800,-1615154400,-1601771400,-1583712e3,-1567375200,-1554681600,-1534716e3,-1524088800,-1503266400,-149238e4,-1471816800,-1460930400,-1440972e3,-1428876e3,-1409522400,-1397426400,-1378072800,-1365976800,-1346623200,-1333922400,-1315173600,-1301868e3,-1283724e3,-1270418400,-1252274400,-1238968800,-1220824800,-1207519200,-1188770400,-1176069600,-1157320800,-1144015200,-1125871200,-1112565600,-1094421600,-1081116e3,-1062972e3,-1049666400,-1031522400,-1018216800,-1000072800,-986767200,-968018400,-955317600,-936568800,-880232400,-76941e4,-765410400,-747266400,-733960800,-715824e3,-702518400,-684374400,-671068800,-652924800,-634176e3,-620863200,-602719200,-589413600,-576108e3,-557964e3,-544658400,-526514400,-513208800,-495064800,-481759200,-463615200,-450309600,-431560800,-418255200,-400111200,-384386400,-368661600,-352936800,-337212e3,-321487200,-305762400,-289432800,-273708e3,-257983200,-242258400,-226533600,-210808800,-195084e3,-179359200,-163634400,-147909600,-13158e4,-11646e4,-100130400,-84405600,-68680800,-52956e3,-37231200,-21506400,-5781600,9943200,25668e3,41392800,57722400,73447200,89172e3,104896800,120621600,136346400,152071200,167796e3,183520800,199245600,215575200,230695200,247024800,262749600,278474400,294199200,309924e3,325648800,341373600,357098400,372823200,388548e3,404877600,419997600,436327200,452052e3,467776800,483501600,499226400,514951200,530676e3,544586400,562125600,576036e3,59418e4,607485600,625629600,638935200,657079200,670989600,688528800,702439200,719978400,733888800,752032800,765338400,783482400,796788e3,814932e3,828842400,846381600,860292e3,877831200,891741600,909280800,923191200,941335200,954640800,972784800,986090400,1004234400,1018144800,1035684e3,1049594400,1067133600,1081044e3,1099188e3,1112493600,1130637600,1143943200,1162087200,1173578400,1194141600,1205028e3,1225591200,1236477600,1257040800,1268532e3,1289095200,1299981600,1320544800,1331431200,1351994400,1362880800,1383444e3,1394330400,1414893600,142578e4,1446343200,1457834400,1478397600,1489284e3,1509847200,1520733600,1541296800,1552183200,1572746400,1583632800,1604196e3,1615687200,1636250400,1647136800,16677e5,1678586400,1699149600,1710036e3,1730599200,1741485600,1762048800,1772935200,1793498400,1804989600,1825552800,1836439200,1857002400,1867888800,1888452e3,1899338400,1919901600,1930788e3],offset:[-19052,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-14400,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3]},"America/Vancouver":{time:[-2713910400,-1632088800,-1615154400,-880236e3,-769420800,-765410400,-747266400,-732751200,-715816800,-702511200,-684367200,-671061600,-652917600,-639612e3,-620863200,-608162400,-589413600,-576108e3,-557964e3,-544658400,-526514400,-513208800,-495064800,-481759200,-463615200,-450309600,-431560800,-418255200,-400111200,-386805600,-368661600,-355356e3,-337212e3,-323906400,-305762400,-292456800,-273708e3,-261007200,-242258400,-226533600,-210808800,-195084e3,-179359200,-163634400,-147909600,-13158e4,-11646e4,-100130400,-84405600,-68680800,-52956e3,-37231200,-21506400,-5781600,9943200,25668e3,41392800,57722400,73447200,89172e3,104896800,120621600,136346400,152071200,167796e3,183520800,199245600,215575200,230695200,247024800,262749600,278474400,294199200,309924e3,325648800,341373600,357098400,372823200,388548e3,404877600,419997600,436327200,452052e3,467776800,483501600,499226400,514951200,530676e3,544586400,562125600,576036e3,59418e4,607485600,625629600,638935200,657079200,670989600,688528800,702439200,719978400,733888800,752032800,765338400,783482400,796788e3,814932e3,828842400,846381600,860292e3,877831200,891741600,909280800,923191200,941335200,954640800,972784800,986090400,1004234400,1018144800,1035684e3,1049594400,1067133600,1081044e3,1099188e3,1112493600,1130637600,1143943200,1162087200,1173578400,1194141600,1205028e3,1225591200,1236477600,1257040800,1268532e3,1289095200,1299981600,1320544800,1331431200,1351994400,1362880800,1383444e3,1394330400,1414893600,142578e4,1446343200,1457834400,1478397600,1489284e3,1509847200,1520733600,1541296800,1552183200,1572746400,1583632800,1604196e3,1615687200,1636250400,1647136800,16677e5,1678586400,1699149600,1710036e3,1730599200,1741485600,1762048800,1772935200,1793498400,1804989600,1825552800,1836439200,1857002400,1867888800,1888452e3,1899338400,1919901600,1930788e3],offset:[-29548,-28800,-25200,-28800,-25200,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800]},"America/Argentina/Buenos_Aires":{time:[-2372112e3,-1567468800,-1233446400,-1222992e3,-1205971200,-1194048e3,-117288e4,-1162512e3,-1141344e3,-1130976e3,-1109808e3,-109944e4,-1078272e3,-1067817600,-1046649600,-1036281600,-1015113600,-1004745600,-983577600,-973209600,-952041600,-941587200,-931046400,-900892800,-890352e3,-83376e4,-82728e4,-752284800,-733795200,-197337600,-190857600,-184204800,-164505600,-152668800,-132969600,-121132800,-101433600,-86832e3,-71107200,-54777600,-39052800,-23328e3,-7603200,128131200,136598400,596937600,605059200,624412800,636508800,656467200,667958400,687916800,699408e3,719366400,731462400,938912400,952041600,1198972800,1205625600,1224374400,1237075200,1924981200],offset:[-14028,-15408,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-10800,-10800,-7200,-10800,-7200,-10800]},"America/El_Salvador":{time:[-1546300800,546998400,559699200,578448e3,591148800,1924970400],offset:[-21408,-21600,-18e3,-21600,-18e3,-21600]},"America/Sao_Paulo":{time:[-1767225600,-1206968400,-1191369600,-1175385600,-1159833600,-633830400,-622076400,-602294400,-59184e4,-570758400,-560217600,-539136e3,-53136e4,-195436800,-184204800,-155174400,-150076800,-128908800,-121132800,-99964800,-89596800,-68428800,-57974400,499737600,511228800,530582400,540259200,562118400,571190400,592963200,602035200,624412800,634694400,656467200,666748800,687916800,697593600,719971200,728438400,750816e3,761702400,782265600,793152e3,813715200,823996800,84456e4,856051200,876096e3,888710400,908064e3,919555200,938908800,951609600,970963200,982454400,1003017600,1013904e3,1036281600,1045353600,1066521600,1076803200,1099353600,1108857600,1129420800,1140307200,1162684800,1172361600,119232e4,1203206400,1224374400,1234656e3,1255824e3,1266710400,1287273600,129816e4,1318723200,1330214400,1350777600,1361059200,1382227200,1392508800,1413676800,1424563200,1445126400,1456012800,1476576e3,1487462400,1508025600,1518912e3,154008e4,1550361600,1571529600,1581811200,1602979200,1613865600,1634428800,1645315200,1665878400,1677369600,1697328e3,1708214400,1729382400,1739664e3,1760832e3,1771718400,1792281600,1803168e3,1823731200,1834617600,1855180800,1866067200,1887235200,1897516800,1918684800,1928966400],offset:[-11188,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200]},"America/Bogota":{time:[-2707689600,-1739059200,704851200,733881600,1924974e3],offset:[-17776,-17776,-18e3,-14400,-18e3]},"Europe/Moscow":{time:[-2840140800,-1688256e3,-165681e4,-1641340800,-1627956e3,-1618700400,-1596416400,-1593813600,-1589846400,-1542416400,-1539478800,-1525305600,-1522713600,-1491177600,-1247529600,354931200,370742400,386467200,402278400,418003200,433814400,449625600,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670388400,686113200,695786400,701823600,717548400,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1414288800,1925002800],offset:[9017,9017,9079,12679,9079,16279,12679,16279,14400,10800,14400,18e3,14400,10800,7200,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,10800,7200,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800]},"Europe/Athens":{time:[-2344636800,-1686095940,-1182988800,-1178150400,-906854400,-904867200,-85725e4,-844473600,-828230400,-812419200,-552355200,-541641600,166492800,186195600,198036e3,213764400,228880800,244090800,260330400,275457600,291805200,307418400,323395200,338947200,354682800,370411200,386132400,401860800,417582e3,433310400,449031600,465364800,481086e3,496814400,512535600,528264e3,543985200,559713600,575434800,591163200,606884400,622612800,638334e3,654667200,670388400,686116800,701838e3,717566400,733287600,749016e3,764737200,780465600,796186800,811915200,828241200,846388800,859690800,877838400,891140400,909288e3,92259e4,941342400,954039600,972792e3,985489200,1004241600,1017543600,1035691200,1048993200,1067140800,1080442800,1099195200,1111892400,1130644800,1143342e3,1162094400,1174791600,1193544e3,1206846e3,1224993600,1238295600,1256443200,1269745200,1288497600,1301194800,1319947200,1332644400,1351396800,1364698800,1382846400,1396148400,1414296e3,1427598e3,1445745600,1459047600,14778e5,1490497200,1509249600,1521946800,1540699200,1554001200,1572148800,1585450800,1603598400,1616900400,1635652800,164835e4,1667102400,1679799600,1698552e3,1711854e3,1730001600,1743303600,1761451200,1774753200,1792900800,1806202800,1824955200,1837652400,1856404800,1869102e3,1887854400,1901156400,1919304e3,1932606e3],offset:[5692,5692,7200,10800,7200,10800,7200,3600,7200,3600,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200]},"Europe/Berlin":{time:[-2422051200,-1693702800,-1680476400,-1663452e3,-1650142800,-1632002400,-1618693200,-938901600,-85725e4,-844552800,-828219600,-812498400,-79677e4,-781048800,-776552400,-765925200,-761173200,-748476e3,-733266e3,-717627600,-714603600,-71037e4,-701902800,-684972e3,-670453200,-654127200,-639003600,323834400,338958e3,354679200,370407600,386128800,401857200,417578400,433306800,449028e3,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],offset:[3208,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,10800,7200,3600,7200,3600,7200,10800,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Europe/London":{time:[-3852662400,-1691964e3,-1680469200,-1664143200,-1650142800,-1633903200,-1617483600,-1601848800,-1586034e3,-1570399200,-1552165200,-1538344800,-152253e4,-15075e5,-1490562e3,-1473631200,-1460926800,-1442786400,-1428872400,-1410732e3,-1396213200,-1379282400,-1364763600,-1348437600,-1333314e3,-1315778400,-1301259600,-1284328800,-126981e4,-1253484e3,-1238360400,-1221429600,-1206910800,-118998e4,-1175461200,-1159135200,-1143406800,-1126476e3,-1111957200,-1095631200,-1080507600,-1063576800,-1049058e3,-1032127200,-1017608400,-1001282400,-986158800,-969228e3,-950475600,-942012e3,-904514400,-896043600,-875484e3,-864594e3,-844034400,-832539600,-812584800,-798066e3,-781048800,-772059600,-764802e3,-748476e3,-733352400,-719445600,-717026400,-706741200,-699483600,-687996e3,-668034e3,-654732e3,-636584400,-622072800,-605739600,-590623200,-57429e4,-558568800,-542235600,-527119200,-512600400,-496274400,-481150800,-46422e4,-449701200,-432165600,-417646800,-401320800,-386197200,-369266400,-354747600,-337816800,-323298e3,-306972e3,-291848400,-276732e3,-257979600,-245282400,-22653e4,-213228e3,-195080400,-182383200,-163630800,-150933600,-132181200,-119484e3,-100731600,-88034400,-68677200,-59004e3,57726e3,69818400,89175600,101268e3,120625200,132717600,152074800,164167200,183524400,196221600,214974e3,227671200,246423600,259120800,278478e3,290570400,309927600,32202e4,341377200,354675600,372823200,386125200,404272800,417574800,435722400,449024400,467776800,481078800,499226400,512528400,530676e3,543978e3,562125600,575427600,593575200,606877200,625629600,638326800,657079200,670381200,688528800,701830800,719978400,733280400,751428e3,76473e4,782877600,796179600,814327200,828234e3,846381600,859683600,877831200,891133200,909280800,922582800,941335200,954032400,972784800,985482e3,1004234400,1017536400,1035684e3,1048986e3,1067133600,1080435600,1099188e3,1111885200,1130637600,1143334800,1162087200,1174784400,1193536800,1206838800,1224986400,1238288400,1256436e3,1269738e3,1288490400,1301187600,131994e4,1332637200,1351389600,1364691600,1382839200,1396141200,1414288800,1427590800,1445738400,1459040400,1477792800,149049e4,1509242400,1521939600,1540692e3,1553994e3,1572141600,1585443600,1603591200,1616893200,1635645600,1648342800,1667095200,1679792400,1698544800,1711846800,1729994400,1743296400,1761444e3,1774746e3,1792893600,1806195600,1824948e3,1837645200,1856397600,1869094800,1887847200,1901149200,1919296800,1932598800],
offset:[-75,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,0,3600,0,3600,7200,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0]},"Europe/Madrid":{time:[-2177452800,-1661734800,-1648425600,-1631926800,-1616889600,-1601254800,-1585353600,-1442451600,-1427673600,-1379293200,-1364774400,-1348448400,-1333324800,-1316394e3,-1301270400,-1284339600,-1269820800,-1029114e3,-1017619200,-1002848400,-986169600,-969238800,-954115200,-940208400,-873075600,-862531200,-842835600,-828230400,-811386e3,-796003200,-779936400,-765414e3,-748486800,-733881600,-652323600,-639183600,135126e3,150253200,167180400,181702800,196815600,212547600,22887e4,243997200,260406e3,276051600,29178e4,307508400,323834400,338958e3,354679200,370407600,386128800,401857200,417578400,433306800,449028e3,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],offset:[-884,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Europe/Paris":{time:[-2486678340,-1855958340,-1689814800,-1680393600,-1665363600,-1648339200,-1635123600,-1616889600,-1604278800,-158544e4,-1574038800,-1552262400,-1539997200,-1520553600,-1507510800,-1490572800,-1470618e3,-1459123200,-1444006800,-1427673600,-1411952400,-1396224e3,-1379293200,-1364774400,-1348448400,-1333324800,-1316394e3,-1301270400,-1284339600,-1269820800,-1253494800,-1238371200,-1221440400,-1206921600,-1191200400,-1175472e3,-1160355600,-1143417600,-1127696400,-1111968e3,-1096851600,-1080518400,-1063587600,-1049068800,-1033347600,-1017619200,-1002502800,-986169600,-969238800,-950486400,-942012e3,-932432400,-85725e4,-844552800,-828219600,-812498400,-800064e3,-796258800,-781048800,-766616400,196822800,212547600,228880800,244004400,260330400,276058800,29178e4,307508400,323834400,338958e3,354679200,370407600,386128800,401857200,417578400,433306800,449028e3,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],offset:[561,561,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,7200,3600,7200,3600,7200,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Europe/Warsaw":{time:[-2840140800,-1717027200,-1693702800,-1680476400,-1663452e3,-1650142800,-1632002400,-1618693200,-1600466400,-1587157200,-1501718400,-931730400,-85725e4,-844552800,-828219600,-812498400,-796600800,-778723200,-762652800,-748483200,-733266e3,-715212e3,-701902800,-684972e3,-670453200,-654127200,-639003600,-397090800,-386805600,-371084400,-355356e3,-334191600,-323301600,-307580400,-291852e3,-271292400,-260402400,-239842800,-228952800,-208393200,-197503200,-176338800,-166053600,228877200,244000800,260326800,276055200,291776400,307504800,323830800,338954400,354675600,370404e3,386125200,401853600,417574800,433303200,449024400,465357600,481078800,496807200,512528400,528256800,543978e3,559706400,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],offset:[5040,5040,3600,7200,3600,7200,3600,7200,7200,10800,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Australia/Sydney":{time:[-2364076800,-1672531140,-1665352800,-883605600,-876088800,-860364e3,-844639200,-828309600,-813189600,57722400,68007600,89172e3,100062e3,120621600,131511600,152071200,162961200,183520800,195015600,215575200,226465200,247024800,257914800,278474400,289364400,309924e3,320814e3,341373600,352263600,372823200,386737200,404877600,415767600,436327200,447217200,467776800,478666800,499226400,511326e3,530071200,542775600,562125600,57483e4,59418e4,606279600,625629600,636519600,657079200,667969200,688528800,699418800,719978400,731473200,752032800,762922800,783482400,794372400,814932e3,828241200,846381600,859690800,877831200,891140400,909280800,92259e4,941335200,954039600,967341600,985489200,1004234400,1017543600,1035684e3,1048993200,1067133600,1080442800,1099188e3,1111892400,1130637600,1143946800,1162087200,1174791600,1193536800,1207450800,1223172e3,1238900400,1254621600,127035e4,1286071200,1301799600,1317520800,1333249200,1349575200,1365303600,1381024800,1396753200,1412474400,1428202800,1443924e3,1459652400,1475373600,1491102e3,1506823200,1522551600,1538877600,1554606e3,1570327200,1586055600,1601776800,1617505200,1633226400,1648954800,1664676e3,1680404400,1696125600,1712458800,172818e4,1743908400,1759629600,1775358e3,1791079200,1806807600,1822528800,1838257200,1853978400,1869706800,1886032800,1901761200,1917482400,1933210800],offset:[36292,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600]},"Australia/Brisbane":{time:[-2366755200,-1672531140,-1665352800,-883605600,-876088800,-860364e3,-844639200,-828309600,-813189600,57722400,68007600,625629600,636519600,657079200,667969200,688528800,699418800,1925028e3],offset:[36728,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3]},"Australia/Adelaide":{time:[-2364076800,-2230156800,-1672531140,-1665352800,-883605600,-876088800,-860364e3,-844639200,-828309600,-813189600,57722400,68007600,89172e3,100062e3,120621600,131511600,152071200,162961200,183520800,195015600,215575200,226465200,247024800,257914800,278474400,289364400,309924e3,320814e3,341373600,352263600,372823200,384318e3,404877600,415767600,436327200,447217200,467776800,478666800,499226400,511326e3,530071200,542775600,562125600,57483e4,59418e4,606279600,625629600,637729200,657079200,667969200,688528800,701233200,719978400,731473200,752032800,764132400,783482400,796186800,814932e3,828241200,846381600,859690800,877831200,891140400,909280800,92259e4,941335200,954039600,972784800,985489200,1004234400,1017543600,1035684e3,1048993200,1067133600,1080442800,1099188e3,1111892400,1130637600,1143946800,1162087200,1174791600,1193536800,1207450800,1223172e3,1238900400,1254621600,127035e4,1286071200,1301799600,1317520800,1333249200,1349575200,1365303600,1381024800,1396753200,1412474400,1428202800,1443924e3,1459652400,1475373600,1491102e3,1506823200,1522551600,1538877600,1554606e3,1570327200,1586055600,1601776800,1617505200,1633226400,1648954800,1664676e3,1680404400,1696125600,1712458800,172818e4,1743908400,1759629600,1775358e3,1791079200,1806807600,1822528800,1838257200,1853978400,1869706800,1886032800,1901761200,1917482400,1933210800],offset:[33260,32400,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800]},"Australia/ACT":{time:[-2364076800,-1672531140,-1665352800,-883605600,-876088800,-860364e3,-844639200,-828309600,-813189600,57722400,68007600,89172e3,100062e3,120621600,131511600,152071200,162961200,183520800,195015600,215575200,226465200,247024800,257914800,278474400,289364400,309924e3,320814e3,341373600,352263600,372823200,386737200,404877600,415767600,436327200,447217200,467776800,478666800,499226400,511326e3,530071200,542775600,562125600,57483e4,59418e4,606279600,625629600,636519600,657079200,667969200,688528800,699418800,719978400,731473200,752032800,762922800,783482400,794372400,814932e3,828241200,846381600,859690800,877831200,891140400,909280800,92259e4,941335200,954039600,967341600,985489200,1004234400,1017543600,1035684e3,1048993200,1067133600,1080442800,1099188e3,1111892400,1130637600,1143946800,1162087200,1174791600,1193536800,1207450800,1223172e3,1238900400,1254621600,127035e4,1286071200,1301799600,1317520800,1333249200,1349575200,1365303600,1381024800,1396753200,1412474400,1428202800,1443924e3,1459652400,1475373600,1491102e3,1506823200,1522551600,1538877600,1554606e3,1570327200,1586055600,1601776800,1617505200,1633226400,1648954800,1664676e3,1680404400,1696125600,1712458800,172818e4,1743908400,1759629600,1775358e3,1791079200,1806807600,1822528800,1838257200,1853978400,1869706800,1886032800,1901761200,1917482400,1933210800],offset:[36292,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600]},"Asia/Almaty":{time:[-1441152e3,-1247529600,354931200,370742400,386467200,402278400,418003200,433814400,449625600,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,701823600,717548400,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1925013600],offset:[18468,18e3,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600]},"Asia/Ashkhabad":{time:[-1441152e3,-1247529600,354931200,370742400,386467200,402278400,418003200,433814400,449625600,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670388400,686113200,688521600,695786400,192501e4],offset:[14012,14400,18e3,21600,18e3,21600,18e3,21600,18e3,21600,18e3,21600,18e3,21600,18e3,21600,18e3,21600,18e3,21600,18e3,21600,18e3,18e3,14400,14400,18e3]},"Asia/Tokyo":{time:[-2587678861,-2335219200,-1017792e3,-683762400,-672357600,-654732e3,-640908e3,-620258400,-609458400,-588808800,-578008800,1925024400],offset:[33539,32400,32400,32400,36e3,32400,36e3,32400,36e3,32400,36e3,32400]},"Asia/Taipei":{time:[-2335219200,-1017792e3,-766191600,-745804800,-733795200,-716860800,-699580800,-683856e3,-670636800,-65232e4,-639100800,-620784e3,-607564800,-589248e3,-576028800,-562896e3,-541728e3,-528681600,-510192e3,-497145600,-478656e3,-465609600,-449798400,-433987200,-418176e3,-402451200,-38664e4,-370915200,-355104e3,-339379200,-323568e3,-302486400,-291945600,-270950400,-260409600,134006400,149817600,165542400,181353600,299635200,307584e3,1925020800],offset:[29160,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800]},"Asia/Singapore":{time:[-2177452800,-2038176e3,-1167609600,-1073001600,-894153600,-879638400,-766972800,-138758400,378691200,1925020800],offset:[24925,24925,25200,26400,26400,27e3,32400,27e3,27e3,28800]},"Asia/Shanghai":{time:[-2177452800,-933465600,-923097600,-908755200,-891561600,515548800,52704e4,545184e3,558489600,576633600,589939200,608688e3,621993600,640137600,653443200,671587200,684892800,1925020800],offset:[29143,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800]},"Asia/Seoul":{time:[-1948752e3,-1830384e3,-1017792e3,-767318400,-498096e3,-462672e3,-451699200,-429753600,-418262400,-399513600,-387417600,-368064e3,-355968e3,-336614400,-324518400,-305164800,-293068800,-264902400,547610400,560919600,57906e4,592369200,1925024400],offset:[30472,30600,32400,32400,32400,30600,34200,30600,34200,30600,34200,30600,34200,30600,34200,30600,34200,30600,32400,36e3,32400,36e3,32400]},"Asia/Tehran":{time:[-1704153600,-757382400,247190400,259286400,277776e3,283996800,290822400,306547200,322444800,338515200,673228800,685497600,701222400,71712e4,732758400,748656e3,764294400,780192e3,795830400,811728e3,827366400,843264e3,858988800,874886400,890524800,906422400,922060800,937958400,953596800,969494400,985219200,1001116800,1016755200,1032652800,1048291200,1064188800,1079827200,1095724800,1111449600,1127347200,1206057600,1221955200,123768e4,1253577600,1269216e3,1285113600,1300752e3,1316649600,1332288e3,1348185600,1363910400,1379808e3,1395446400,1411344e3,1426982400,144288e4,1458518400,1474416e3,1490140800,1506038400,1521676800,1537574400,1553212800,1569110400,1584748800,1600646400,1616371200,1632268800,1647907200,1663804800,1679443200,1695340800,1710979200,1726876800,1742601600,1758499200,1774137600,1790035200,1805673600,1821571200,1837209600,1853107200,1868745600,1884643200,1900368e3,1916265600,1931904e3],offset:[12344,12344,12600,14400,18e3,14400,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600]},"Asia/Dubai":{time:[-1577923200,1925006400],offset:[13272,14400]},"Asia/Kolkata":{time:[-2840140800,-891561600,-872035200,-862617600,-764121600,1925011800],offset:[21208,21200,23400,19800,23400,19800]},"Asia/Hong_Kong":{time:[-2056665600,-907360200,-891635400,-884217600,-766713600,-747952200,-728512200,-717021e3,-694470600,-683757e3,-668032200,-654726600,-636582600,-623277e3,-605133e3,-591827400,-573683400,-559773e3,-542320200,-528323400,-510179400,-498083400,-478729800,-466633800,-446675400,-435184200,-415225800,-403129800,-383776200,-371680200,-352326600,-340230600,-320877e3,-308781e3,-288822600,-277331400,-257373e3,-245881800,-225923400,-213827400,-194473800,-182377800,-163024200,-148509e3,-132784200,-117059400,-101334600,-85609800,-69280200,-53555400,-37830600,-22105800,-6381e3,9343800,25068600,40793400,56518200,72243e3,88572600,104297400,120022200,126070200,151471800,167196600,182921400,198646200,214371e3,295414200,309324600,1925020800],offset:[27402,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800]},"Asia/Bangkok":{time:[-2840140800,-1570060800,1925017200],offset:[24124,24124,25200]},"Pacific/Auckland":{time:[-3192393600,-1330293600,-1320012e3,-1300658400,-1287352800,-1269208800,-1255903200,-1237759200,-1224453600,-1206309600,-1192399200,-117486e4,-1160949600,-1143410400,-1125871200,-1112565600,-1094421600,-1081116e3,-1062972e3,-1049666400,-1031522400,-1018216800,-1000072800,-986767200,-968018400,-955317600,-936568800,-923263200,152676e3,162356400,183520800,195015600,215575200,226465200,247024800,257914800,278474400,289364400,309924e3,320814e3,341373600,352263600,372823200,384318e3,404877600,415767600,436327200,447217200,467776800,478666800,499226400,510116400,530676e3,541566e3,562125600,573620400,59418e4,60507e4,623815200,637729200,655264800,669178800,686714400,700628400,718164e3,732682800,749613600,764132400,781063200,795582e3,812512800,827031600,844567200,858481200,876016800,889930800,907466400,921985200,938916e3,953434800,970365600,984884400,100242e4,1016334e3,1033869600,1047783600,1065319200,1079838e3,1096768800,1111287600,1128218400,1142737200,1159668e3,1174186800,1191117600,1207450800,1222567200,1238900400,1254016800,127035e4,1285466400,1301799600,1316916e3,1333249200,1348970400,1365303600,138042e4,1396753200,1411869600,1428202800,1443319200,1459652400,1474768800,1491102e3,1506218400,1522551600,1538272800,1554606e3,1569722400,1586055600,1601172e3,1617505200,1632621600,1648954800,1664071200,1680404400,1695520800,1712458800,1727575200,1743908400,1759024800,1775358e3,1790474400,1806807600,1821924e3,1838257200,1853373600,1869706800,1885428e3,1901761200,1916877600,1933210800],offset:[41944,41400,45e3,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800]},"Pacific/Chatham":{time:[-3192393600,-757382400,152678700,162359100,183523500,195018300,215577900,226467900,247027500,257917500,278477100,289367100,309926700,320816700,341376300,352266300,372825900,384320700,404880300,415770300,436329900,447219900,467779500,478669500,499229100,510119100,530678700,541568700,562128300,573623100,594182700,605072700,623817900,637731900,655267500,669181500,686717100,700631100,718166700,732685500,749616300,764135100,781065900,795584700,812515500,827034300,844569900,858483900,876019500,889933500,907469100,921987900,938918700,953437500,970368300,984887100,1002422700,1016336700,1033872300,1047786300,1065321900,1079840700,1096771500,1111290300,1128221100,1142739900,1159670700,1174189500,1191120300,1207453500,1222569900,1238903100,1254019500,1270352700,1285469100,1301802300,1316918700,1333251900,1348973100,1365306300,1380422700,1396755900,1411872300,1428205500,1443321900,1459655100,1474771500,1491104700,1506221100,1522554300,1538275500,1554608700,1569725100,1586058300,1601174700,1617507900,1632624300,1648957500,1664073900,1680407100,1695523500,1712461500,1727577900,1743911100,1759027500,1775360700,1790477100,1806810300,1821926700,1838259900,1853376300,1869709500,1885430700,1901763900,1916880300,1933213500],offset:[44028,44100,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500]},"Pacific/Fakaofo":{time:[-2177452800,1325203200,1925038800],offset:[-41096,-39600,46800]},"Pacific/Honolulu":{time:[-2334139200,-1157320800,-1155470400,-880236e3,-765410400,-712188e3,1924956e3],offset:[-37886,-37800,-34200,-37800,-34200,-37800,-36e3]},"America/Mexico_City":{time:[-1514763396,-1343091600,-1234828800,-1220317200,-1207180800,-1191369600,-975283200,-963187200,-917136e3,-907372800,-821923200,-810086400,-627523200,-613008e3,828842400,846381600,860292e3,877831200,891741600,909280800,923191200,941335200,954640800,972784800,989114400,1001815200,1018144800,1035684e3,1049594400,1067133600,1081044e3,1099188e3,1112493600,1130637600,1143943200,1162087200,1175392800,1193536800,1207447200,1224986400,1238896800,1256436e3,1270346400,1288490400,1301796e3,131994e4,1333245600,1351389600,13653e5,1382839200,1396749600,1414288800,1428199200,1445738400,1459648800,1477792800,1491098400,1509242400,1522548e3,1540692e3,1554602400,1572141600,1586052e3,1603591200,1617501600,1635645600,1648951200,1667095200,1680400800,1698544800,1712455200,1729994400,1743904800,1761444e3,1775354400,1792893600,1806804e3,1824948e3,1838253600,1856397600,1869703200,1887847200,1901757600,1919296800,1933207200],offset:[-23796,-25200,-21600,-25200,-21600,-25200,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600]},"Africa/Johannesburg":{time:[-2458166400,-2109283200,-860968800,-845244e3,-829519200,-813794400,1924999200],offset:[6720,5400,7200,10800,7200,10800,7200]},"Asia/Kathmandu":{time:[-1577923200,504921600,1925012700],offset:[20476,19800,20700]},"US/Mountain":{time:[-2717668796,-1633298400,-1615154400,-1601848800,-1583704800,-1570399200,-1551650400,-1538949600,-1534111200,-880236e3,-769417200,-765410400,-147909600,-13158e4,-11646e4,-100130400,-84405600,-68680800,-52956e3,-37231200,-21506400,-5781600,9943200,25668e3,41392800,57722400,73447200,89172e3,104896800,120621600,126669600,152071200,162352800,183520800,199245600,215575200,230695200,247024800,262749600,278474400,294199200,309924e3,325648800,341373600,357098400,372823200,388548e3,404877600,419997600,436327200,452052e3,467776800,483501600,499226400,514951200,530676e3,544586400,562125600,576036e3,59418e4,607485600,625629600,638935200,657079200,670989600,688528800,702439200,719978400,733888800,752032800,765338400,783482400,796788e3,814932e3,828842400,846381600,860292e3,877831200,891741600,909280800,923191200,941335200,954640800,972784800,986090400,1004234400,1018144800,1035684e3,1049594400,1067133600,1081044e3,1099188e3,1112493600,1130637600,1143943200,1162087200,1173578400,1194141600,1205028e3,1225591200,1236477600,1257040800,1268532e3,1289095200,1299981600,1320544800,1331431200,1351994400,1362880800,1383444e3,1394330400,1414893600,142578e4,1446343200,1457834400,1478397600,1489284e3,1509847200,1520733600,1541296800,1552183200,1572746400,1583632800,1604196e3,1615687200,1636250400,1647136800,16677e5,1678586400,1699149600,1710036e3,1730599200,1741485600,1762048800,1772935200,1793498400,1804989600,1825552800,1836439200,1857002400,1867888800,1888452e3,1899338400,1919901600,1930788e3],offset:[-25196,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200]}};void 0!==t&&t.exports?t.exports=e:window.TzData=e}()},function(t,e,i){var o,n;!function(s,r){"object"==typeof t&&t.exports?t.exports=r():(o=r,n="function"==typeof o?o.call(e,i,e,t):o,!(void 0!==n&&(t.exports=n)))}(this,function(){"use strict";function t(t,e){var i,o=document.createElement(t||"div");for(i in e)o[i]=e[i];return o}function e(t){for(var e=1,i=arguments.length;e<i;e++)t.appendChild(arguments[e]);return t}function i(t,e,i,o){var n=["opacity",e,~~(100*t),i,o].join("-"),s=.01+i/o*100,r=Math.max(1-(1-t)/e*(100-s),t),a=h.substring(0,h.indexOf("Animation")).toLowerCase(),l=a&&"-"+a+"-"||"";return u[n]||(c.insertRule("@"+l+"keyframes "+n+"{0%{opacity:"+r+"}"+s+"%{opacity:"+t+"}"+(s+.01)+"%{opacity:1}"+(s+e)%100+"%{opacity:"+t+"}100%{opacity:"+r+"}}",c.cssRules.length),u[n]=1),n}function o(t,e){var i,o,n=t.style;if(e=e.charAt(0).toUpperCase()+e.slice(1),void 0!==n[e])return e;for(o=0;o<p.length;o++)if(i=p[o]+e,void 0!==n[i])return i}function n(t,e){for(var i in e)t.style[o(t,i)||i]=e[i];return t}function s(t){var e,i,o;for(e=1;e<arguments.length;e++){i=arguments[e];for(o in i)void 0===t[o]&&(t[o]=i[o])}return t}function r(t,e){return"string"==typeof t?t:t[e%t.length]}function a(t){this.opts=s(t||{},a.defaults,_)}function l(){function i(e,i){return t("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',i)}c.addRule(".spin-vml","behavior:url(#default#VML)"),a.prototype.lines=function(t,o){function s(){return n(i("group",{coordsize:c+" "+c,coordorigin:-h+" "+-h}),{width:c,height:c})}function a(t,a,l){e(p,e(n(s(),{rotation:360/o.lines*t+"deg",left:~~a}),e(n(i("roundrect",{arcsize:o.corners}),{width:h,height:o.scale*o.width,left:o.scale*o.radius,top:-o.scale*o.width>>1,filter:l}),i("fill",{color:r(o.color,t),opacity:o.opacity}),i("stroke",{opacity:0}))))}var l,h=o.scale*(o.length+o.width),c=2*o.scale*h,d=-(o.width+o.length)*o.scale*2+"px",p=n(s(),{position:"absolute",top:d,left:d});if(o.shadow)for(l=1;l<=o.lines;l++)a(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=o.lines;l++)a(l);return e(t,p)},a.prototype.opacity=function(t,e,i,o){var n=t.firstChild;
o=o.shadow&&o.lines||0,n&&e+o<n.childNodes.length&&(n=n.childNodes[e+o],n=n&&n.firstChild,n=n&&n.firstChild,n&&(n.opacity=i))}}var h,c,d,p=["webkit","Moz","ms","O"],u={},_={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};return a.defaults={},s(a.prototype,{spin:function(e){var i,o,s,r,a,l,c,d,p,u;return this.stop(),i=this,o=i.opts,s=i.el=t(null,{className:o.className}),n(s,{position:o.position,width:0,zIndex:o.zIndex,left:o.left,top:o.top}),e&&e.insertBefore(s,e.firstChild||null),s.setAttribute("role","progressbar"),i.lines(s,i.opts),h||(r=0,a=(o.lines-1)*(1-o.direction)/2,c=o.fps,d=c/o.speed,p=(1-o.opacity)/(d*o.trail/100),u=d/o.lines,function _(){r++;for(var t=0;t<o.lines;t++)l=Math.max(1-(r+(o.lines-t)*u)%d*p,o.opacity),i.opacity(s,t*o.direction+a,l,o);i.timeout=i.el&&setTimeout(_,~~(1e3/c))}()),i},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this},lines:function(o,s){function a(e,i){return n(t(),{position:"absolute",width:s.scale*(s.length+s.width)+"px",height:s.scale*s.width+"px",background:e,boxShadow:i,transformOrigin:"left",transform:"rotate("+~~(360/s.lines*c+s.rotate)+"deg) translate("+s.scale*s.radius+"px,0)",borderRadius:(s.corners*s.scale*s.width>>1)+"px"})}for(var l,c=0,d=(s.lines-1)*(1-s.direction)/2;c<s.lines;c++)l=n(t(),{position:"absolute",top:1+~(s.scale*s.width/2)+"px",transform:s.hwaccel?"translate3d(0,0,0)":"",opacity:s.opacity,animation:h&&i(s.opacity,s.trail,d+c*s.direction,s.lines)+" "+1/s.speed+"s linear infinite"}),s.shadow&&e(l,n(a("#000","0 0 4px #000"),{top:"2px"})),e(o,e(l,a(r(s.color,c),"0 0 1px rgba(0,0,0,.1)")));return o},opacity:function(t,e,i){e<t.childNodes.length&&(t.childNodes[e].style.opacity=i)}}),"undefined"!=typeof document&&(c=function(){var i=t("style",{type:"text/css"});return e(document.getElementsByTagName("head")[0],i),i.sheet||i.styleSheet}(),d=n(t("group"),{behavior:"url(#default#VML)"}),!o(d,"transform")&&d.adj?l():h=o(d,"animation")),a})},function(t,e){"use strict";var i=function(){var t,e,i,o,n={};return n.initialize=function(n,s,r,a){t=n,e=s,i=r,o=a},n.updateUser=function(t){e=t},n.getCharts=function(n){var s=$.ajax({url:"{0}/{1}/charts?client={2}&user={3}".format(i,encodeURIComponent(o),encodeURIComponent(t),encodeURIComponent(e)),type:"GET",crossDomain:!0}).done(function(t){var e,i=JSON.parse(t);"ok"!=i.status&&console.warn("Charts list request failed: "+i.message),e=i.data.map(function(t){return{id:t.id,name:t.name,image_url:t.id,modified_iso:t.timestamp,short_symbol:t.symbol,interval:t.resolution}}),n(e)});return s},n.removeChart=function(n,s){$.ajax({url:"{0}/{1}/charts?client={2}&user={3}&chart={4}".format(i,encodeURIComponent(o),encodeURIComponent(t),encodeURIComponent(e),encodeURIComponent(n)),type:"DELETE",crossDomain:!0}).done(function(t){var e=JSON.parse(t);"ok"!=e.status&&console.warn("Chart delete request failed: "+e.message),s()})},n.saveChart=function(n,s,r,a,l,h,c){var d,p="{0}/{1}/charts?client={2}&user={3}".format(i,encodeURIComponent(o),encodeURIComponent(t),encodeURIComponent(e));void 0!==l&&(p+="&chart="+encodeURIComponent(l)),d=$.ajax({url:p,data:{name:n,content:JSON.stringify(a),symbol:s,resolution:r},type:"POST",crossDomain:!0}).done(function(t){var e=JSON.parse(t);return"ok"!=e.status?(console.warn("Chart save request failed: "+e.message),void c()):void h(e.id)}).fail(function(){c()})},n.loadChart=function(n){$.ajax({url:"{0}/{1}/charts?client={2}&user={3}&chart={4}".format(i,encodeURIComponent(o),encodeURIComponent(t),encodeURIComponent(e),encodeURIComponent(n.id)),type:"GET",crossDomain:!0}).done(function(t){var e,i=JSON.parse(t);return"ok"!=i.status?void console.warn("Chart load request failed: "+i.message):(e=JSON.parse(i.data.content),e.uid=n.id,void TradingView.GlobalEventsStorage.emit("chart_load_requested",e))}).fail(function(){console.warn("Error loading chart")})},n.removeStudyTemplate=function(n,s){$.ajax({url:"{0}/{1}/study_templates?client={2}&user={3}&template={4}".format(i,encodeURIComponent(o),encodeURIComponent(t),encodeURIComponent(e),encodeURIComponent(n)),type:"DELETE",crossDomain:!0}).done(function(t){var e=JSON.parse(t);"ok"!=e.status&&console.warn("Chart delete request failed: "+e.message),s()})},n.getStudyTemplateContent=function(n,s){$.ajax({url:"{0}/{1}/study_templates?client={2}&user={3}&template={4}".format(i,encodeURIComponent(o),encodeURIComponent(t),encodeURIComponent(e),encodeURIComponent(n)),type:"GET",crossDomain:!0}).done(function(t){s(JSON.parse(t).data)})},n.saveStudyTemplate=function(n,s){$.ajax({url:"{0}/{1}/study_templates?client={2}&user={3}".format(i,encodeURIComponent(o),encodeURIComponent(t),encodeURIComponent(e)),type:"POST",crossDomain:!0,data:{name:n.name,content:n.content}}).done(function(t){var e=JSON.parse(t);"ok"!=e.status&&console.warn("Template save request failed: "+e.message),s({error:"ok"==e.status?"":e.status})})},n._templatesCache=null,n.getStudyTemplatesList=function(s){if(n._templatesCache)return void s(n._templatesCache);n._templatesCache=[];$.ajax({url:"{0}/{1}/study_templates?client={2}&user={3}".format(i,encodeURIComponent(o),encodeURIComponent(t),encodeURIComponent(e)),type:"GET",crossDomain:!0}).done(function(t){var e,i;if(null!==n._templatesCache){if(e=JSON.parse(t),"ok"!=e.status)return void console.warn("Templates list request failed: "+e.message);i=e.data.map(function(t){return{is_default:!1,name:t.name}}),n._templatesCache=i,s(i)}})},n.clearStudyTemplatesListCache=function(t){n._templatesCache=null},n}();t.exports=i},function(t,e,i){(function(e,o){"use strict";var n=i(42),s=i(44),r=function(){function t(i){var o,n,s;if(!(this instanceof t))throw new TypeError("SymbolSearch is a constructor");if(this._inputParserMixin=e.enabled("symbol_search_parser_mixin")&&t.canShowSpreadActions()?new SymbolSearchInputParserMixin(this):void 0,i=i||{},this._inputElement=$(i.input).get(0),!this._inputElement)throw new TypeError("options.input must be a DOM element, jQuery object or selector");if(this.$list=$(i.list).eq(0),0===this.$list.size()&&delete this.$list,void 0!==i.callback){if("function"!=typeof i.callback)throw new TypeError("options.callback must be function");this._callback=i.callback}if(void 0!==i.onValueChanged){if("function"!=typeof i.onValueChanged)throw new TypeError("options.onValueChanged must be function");this._onValueChanged=i.onValueChanged}if(void 0!==i.onEmptyApply){if("function"!=typeof i.onEmptyApply)throw new TypeError("options.onEmptyApply must be function");this._onEmptyApply=i.onEmptyApply}if(i.ignoreInterval&&(this._ignoreInterval=!0),t.resetStoredInterval(),i.hidePro&&(this._hidePro=!0),i.allowMultipleSymbols&&(this._allowMultipleSymbols=!0),void 0!==i.onParse){if("function"!=typeof i.onParse)throw new TypeError("options.onParse must be function");this._onParse=i.onParse}for(this._state={},$(this._inputElement).data("symbol-search-instance",this),o=this._boundListener=this._eventListener.bind(this),n=this.boundTimeoutListener=function(t){setTimeout(function(){o(t)},0)},s=0;s<u.length;s++)u[s].immediate?$(this._inputElement).on(u[s].name,o):$(this._inputElement).on(u[s].name,n);this._boundOnKeyDown=this._onKeyDown.bind(this),this._boundOnKeyPress=this._onKeyPress.bind(this),$(this._inputElement).on("keydown",this._boundOnKeyDown).on("keypress",this._boundOnKeyPress),this._eventListener(),i.autoFocus&&t.registerAutoFocus(this)}function r(t,e){var i=ChartApiInstance.supportedSymbolsTypes(),o=TVSettings.getValue("symboledit.filter");return!i.some(function(t){return t.value===o})&&i.length>0&&(o=i[0].value),0!==i.length&&(i.forEach(function(i){var n=i.value,s=$('<a class="type-filter">').attr("href","#"+n).text($.t(i.name));n===o&&s.addClass("active"),s.on("click",function(i){i.preventDefault(),e.find(".type-filter").removeClass("active"),$(this).addClass("active"),t.typeFilter(n),TVSettings.setValue("symboledit.filter",n)}),s.appendTo(e)}),t.typeFilter(o),!0)}function a(){var t=ChartApiInstance.supportedExchangesList(),e={BMFBOVESPA:"brasil"};return t.filter(function(t){return t.flag}).forEach(function(t){e[t.value]=t.flag,t.value!=t.name&&(e[t.name]=t.flag)}),e}function l(t,e){function i(t){var e=o[t];e&&(n=n.concat(e.sort(function(t,e){return t.name.localeCompare(e.name)})),delete o[t])}var o,n,s=RegExp("country-([a-z*]+)","i"),r=Object.keys(f).filter(function(t){return"forex"!=t&&"bitcoin"!=t}).sort(),a=["forex","country-usa","country-canada","country-uk","country-europe","country-austria","country-germany","country-ireland","country-italy","country-norway","country-spain","country-sweden","country-switzerland","country-turkey","country-brasil","country-*","country-japan","country-russia","bitcoin"];return e&&e.order&&(a=e.order),o={},$.each(f,function(t){o[t]=[]}),n=[],t.forEach(function(t){t.flag&&o[t.flag].push(t),t.value||n.push(t)}),a.forEach(function(t){var e,o;"forex"==t||"bitcoin"==t?i(t):(e=s.exec(t),o=e&&e[1],"*"==o?r.forEach(function(t){i(t)}):i(o))}),$.each(o,function(t){i(t)}),n}function h(t,i){var n,s,r,a=e.enabled("symbol_search_flags")?l(ChartApiInstance.supportedExchangesList()):ChartApiInstance.supportedExchangesList();if(e.enabled("symbol_search_limited_exchanges")&&(a=a.filter(function(t){return!("bitcoin"===t.flag||t.hideInSymbolSearch)})),n=TVSettings.getValue("symboledit.exchangefilter"),"bovespa"!==TradingView.widgetCustomer)return!a.some(function(t){return t.value===n})&&a.length>0&&(n=a[0].value),0!==a.length&&(s=$('<div id="exchange-filter" class="exchange-filter">').appendTo(i),r=$("<select>").appendTo(s),a.forEach(function(t){var e=t.value,i=t.name||e,s=t.desc||i,a=$("<option>").addClass("filter-item").attr("value",e).text($.t(i)).data("custom-option-text",$.t(s)).appendTo(r),l=f[t.flag];l&&a.data("custom-option-prepend",o(f[t.flag],{"class":"flag sbIcon"})),t.value===n&&a.attr("selected",!0)}),r.change(function(){var e=$(this).val()||"";TVSettings.setValue("symboledit.exchangefilter",e),t.setExchangeFilter(e)}),r.selectbox({speed:0,useCustomPrependWithSelector:"after",customPrependSelectorClass:"exchange-with-flag",classHolder:"tv-unstyled-select-container tv-symbol-select",classOptions:e.enabled("symbol_search_three_columns_exchanges")?"sbOptions three-column-filter":"sbOptions"}),t.setExchangeFilter(n),!0)}function c(t){var e=h(t,t.$filterContainer);return t.selectExchangeFilter(),e}function d(t){var e,i,o,n,s,a,l,h,d,p,u=$('<div class="symbol-edit-popup">').appendTo(document.body),_=$('<div class="filter">').appendTo(u);return t.$filterContainer=_,r(t,_),c(t,_),e=$('<div class="table-wrapper">').appendTo(u),i=$(t._inputElement),o=i.offset(),n=0,s=Math.max(0,Math.min(o.left+n,$(window).width()-u.outerWidth())),u.css("left",s+"px"),u.css("top",o.top+i.outerHeight()+1),a=parseInt($(window).height(),10),l=_.outerHeight(),h=$(window).scrollTop(),d=i.height(),p=a-(o.top-h)-d/2,e.css("maxHeight",p-d-l+"px"),{popup:u,listWrapper:e}}function p(t){return!t.ctrlKey&&(!t.metaKey&&(!!t.charCode&&(!(!t.which||t.which<=32)&&(!/^(input|textarea)$/i.test(t.target.tagName)&&!TVDialogs.modalDialog))))}var u=[{name:"input",immediate:!0},{name:"sync",immediate:!0},{name:"keypress"},{name:"keydown"},{name:"keyup"},{name:"mousedown"},{name:"mouseup"},{name:"cut"},{name:"paste"}],_=[/^e\-m/i],f={canada:"flag-ca",bitcoin:"flag-btc",uk:"flag-uk",usa:"flag-us",europe:"flag-eu",russia:"flag-ru",japan:"flag-jp",india:"flag-in",forex:"flag-fx",brasil:"flag-br",germany:"flag-de",switzerland:"flag-ch",turkey:"flag-tr",italy:"flag-it",spain:"flag-es",ireland:"flag-ie",sweden:"flag-se",norway:"flag-no",austria:"flag-at"},g=null;return t.registerAutoFocus=function(e){if(e instanceof jQuery&&(e=e.data("symbol-search-instance")),!(e instanceof t))throw new TypeError("arg must be an SymbolSearch instance of jQuery input with bound SymbolSearch object");TradingView.keyboardBinder.registerListener("symbolEdit",function(t){if(p(t)){t.preventDefault(),this.resetState(),this._skipAutoFocus=!0,this._inputElement.focus();var e=String.fromCharCode(t.charCode);"function"==typeof this._setInputValue?this._setInputValue(e):this._inputElement.value=e,this._eventListener()}}.bind(e))},t.prototype.serachRequestDelay=0,t.setSearchRequestDelay=function(e){t.prototype.serachRequestDelay=e},t.prototype.resetState=function(){this._state={}},t.prototype.typeFilter=function(t){return arguments.length>0?void(t!==this._state.typeFilter&&(null==t?delete this._state.typeFilter:this._state.typeFilter=t+"",delete this._state.keepListFor,this._onSelectionChanged(),this.selectExchangeFilter())):this._state.typeFilter},t.prototype.setExchangeFilter=function(t){t!==this._state.exchangeFilter&&(null==t?delete this._state.exchangeFilter:this._state.exchangeFilter=t+"",delete this._state.keepListFor,this._onSelectionChanged())},t.prototype.getExchangeFilter=function(){return this._state.exchangeFilter},t.prototype._moveSelection=function(t,e){var i,o,n,s,r,a,l;this._state.suggestOptions&&0!==this._state.suggestOptions.length&&(i=this.$list.find("tbody tr:not(.group-close):not(.hidden)"),o=this.$list.find("tr.symbol-edit-popup-active"),n=-1,o.size()?(n=i.index(o),s=Math.max(0,Math.min(n+t,i.size()-1))):s=0,n!=s&&(r=i.eq(s),a=r.data("item"),o.length&&o.removeClass("symbol-edit-popup-active"),a.groupTitle?(r.addClass("symbol-edit-popup-active"),this._selectedGroupItem=a,delete this._state.highlightIndex,this._scrollHighlightIntoView()):(this._selectedGroupItem&&(this._selectedGroupItem=null),l=this._state.suggestOptions.indexOf(a),this._highlightOption(~l&&l||0,!0,e))))},t.prototype._groupSetCollapsed=function(t,e){t.groupTitle&&this._groupListHandler&&this._groupListHandler.setCollapsed(t.root,e)},t.prototype._onKeyDown=function(t){40!==t.keyCode&&38!==t.keyCode||(this._moveSelection(40===t.keyCode?1:-1,!0),t.preventDefault()),!this._selectedGroupItem||37!==t.keyCode&&39!==t.keyCode||(this._groupSetCollapsed(this._selectedGroupItem,37===t.keyCode),t.preventDefault())},t.prototype._onKeyPress=function(t){if(40===t.keyCode||38===t.keyCode){if(t.charCode)return;if(this._boundOnKeyDown)return $(this._inputElement).off("keydown",this._boundOnKeyDown),delete this._boundOnKeyDown,void t.preventDefault();this._moveSelection(40===t.keyCode?1:-1),t.preventDefault()}13===t.keyCode&&(this._selectedGroupItem?(this._groupSetCollapsed(this._selectedGroupItem,!1),t.preventDefault()):this.acceptTypeIn())},t.prototype._eventListener=function(t,e){var i,o,n,s=this._inputElement,r=this._getInputValue().toUpperCase(),a=!1,l=!1;this._state.value!==r&&(ChartApiInstance._symbolSearchRequest&&ChartApiInstance._symbolSearchRequest.abort(),this._state.hasOwnProperty("value")&&this._onValueChanged&&this._onValueChanged(r),this._state.value=r,a=!0,this._inputParserMixin&&this._inputParserMixin.parse()),this._fixIntervalCase(),i=this._limitInputSelectionValue("selectionStart"),this._state.selectionStart!==i&&(this._state.selectionStart=i,l=!0),o=this._limitInputSelectionValue("selectionEnd"),this._state.selectionEnd!==o&&(this._state.selectionEnd=o,l=!0),this._state.selectionDirection!==s.selectionDirection&&(this._state.selectionDirection=s.selectionDirection,l=!0),(a||l&&this._inputParserMixin)&&(this._onSelectionChanged(void 0,e),n=!1,this._getInputValue()!==this._state.value&&(this._setInputValue(this._state.value),n=!0),(n||this._state.selectionStart!==this._limitInputSelectionValue("selectionStart")||this._state.selectionEnd!==this._limitInputSelectionValue("selectionEnd"))&&s.setSelectionRange&&s.setSelectionRange(this._state.selectionStart,this._state.selectionEnd,this._state.selectionDirection))},t.prototype._fixIntervalCase=function(){if(this._selectionInsideInterval()){var e=t.detachInterval(this._inputElement.value);/[a-z]/.test(e.detached)&&(this._inputElement.value=e.rest+e.detached.toUpperCase())}},t.prototype._selectionInsideInterval=function(e){if(this._ignoreInterval)return!1;var i=t.detachInterval(this._inputElement.value);return!!i&&("string"==typeof e?this._inputElement[e]>i.rest.length:this._inputElement.selectionStart>i.rest.length&&this._inputElement.selectionEnd>i.rest.length)},t.prototype._limitInputSelectionValue=function(e){return this._selectionInsideInterval(e)?t.detachInterval(this._inputElement.value).rest.length:e in this._inputElement?this._inputElement[e]:this._inputElement.value.length},t.prototype._getInputValue=function(){if(this._ignoreInterval)return this._inputElement.value;var e=t.detachStoreInterval(this._inputElement.value);return $(this._inputElement).toggleClass("interval-error",t.intervalError()),e},t.prototype._setInputValue=function(e){this._ignoreInterval?this._inputElement.value=e:this._inputElement.value=t.recallAttachInterval(e)},t.prototype._onSelectionChanged=function(t,e){function i(t,e,i,o){n._state.contextTicker=t,n._state.contextExchange=e,n._state.contextType=i,n._state.keepListFor&&n._state.keepListFor===o||(n._getSuggestList(),delete n._state.keepListFor)}var o,n=this,s=_.some(function(t){return t.test(n._state.value)});!s&&this._inputParserMixin&&e!==!0?this._inputParserMixin.onSelectionChanged(i):this.$list&&(o=this._state.value,i(o,this.getExchangeFilter(),this._state.typeFilter,this._state._selectedTicker||o))},t.prototype._clearSelectionState=function(){delete this._state.contextTicker,delete this._state.contextExchange,delete this._state.contextType,delete this._state.contextToken,delete this._state.keepListFor},t.prototype._clearSearchTimeout=function(){this._searchTimeout&&(clearTimeout(this._searchTimeout),this._searchTimeout=null)},t.prototype._doGetSuggestList=function(){var e,i,o,n;this._clearSearchTimeout(),e=this._state.contextTicker||"",i=this._state.contextExchange||this.getExchangeFilter()||"",o=this._state.typeFilter||"",this._showLoading(),n=this,ChartApiInstance.searchSymbols(e,i,o,"undefined"!=typeof chartWidget?chartWidget:void 0,function(s){var r=e!==(n._state.contextTicker||"")||i!==(n._state.contextExchange||n.getExchangeFilter()||"")||o!==(n._state.typeFilter||"");r||(o==t.QUANDL&&(s=n._processQuandlResponse(s)),n._renderSuggestList(s),n._onResponse(s))})},t.prototype._getSuggestList=function(){this._clearSearchTimeout(),this._searchTimeout=setTimeout(this._doGetSuggestList.bind(this),t.prototype.serachRequestDelay)},t.prototype._showLoading=function(){if(this.$list){this._clearSuggestList();var t=$('<div class="symbol-search-loading">').appendTo(this.$list);this._spinner=TradingView.unifiedSpinner("mini").spin(t.get(0))}},t.prototype._renderSuggestList=function(i){var o,n,s,r,a,l,h,c,d,p,u,_;if(this.$list){if(o=this,n=this._state,this._clearSuggestList(),s=n.suggestOptions=[],r=TradingView.RegExpEscape(n.contextTicker).trim(),a=RegExp(r.replace(" ","|"),"i"+(r.length>1?"g":"")),delete n.highlightIndex,this._hidePro&&(i=i.filter(function(t){return!t.params||t.params.indexOf("pro")===-1})),0===i.length)return void this.$list.html('<div style="text-align: center; padding: 7px 0; font-style: italic;">'+$.t("No symbols matched your criteria")+"</div>");for(l=$('<table class="symbol-edit-popup">'),h=new t.GroupListHandler(l,a),i.forEach(function(t){var e,i,n,s;switch(t.ticker||(t.ticker=t.full_name),e=$('<tr class="symbol-edit-popup">'),i=$('<td class="symbol-edit-popup-td name apply-overflow-tooltip">'),i.html(t.symbol.replace(a,"<strong>$&</strong>")),i.appendTo(e),$('<td class="symbol-edit-popup-td desc apply-overflow-tooltip">').html(a.test(t.symbol)?t.description:t.description.replace(a,"<strong>$&</strong>")).appendTo(e),n=$('<td class="symbol-edit-popup-td type apply-overflow-tooltip">').appendTo(e),void 0!==t.params&&~t.params.indexOf("eod")&&($("<i>").text("eod").addClass("eod").prependTo(n),n.append("&nbsp;")),t.type){case"index":n.append($.t(t.type));break;default:n.append($.t(t.type)+" - "+t.exchange)}n.appendTo(e),s=$('<td class="symbol-edit-popup-td flag apply-overflow-tooltip">').html(o._getItemFlag(t)).appendTo(e),"futures"==t.type?h.append(t,e):e.appendTo(l),t._$tr=e,e.data("item",t)}),e.enabled("expand_symbolsearch_items")||h.collapse(),this._groupListHandler=h,c=0,d=l.find("tr:not(.group-close)");c<d.size();c++)p=d.eq(c),u=p.data("item"),s.push(u),u.ticker===n.contextTicker&&u.exchange===n.contextExchange&&void 0===_&&(_=c);"number"==typeof _&&this._highlightOption(_),l.on("click","tr",function(t){if(!t.isDefaultPrevented()&&(t.preventDefault(),o._state.suggestOptions)){var e=$(this).data("item");e&&e.full_name&&o.accept(e.full_name,e.ticker)}}),l.appendTo(this.$list)}},t.prototype._highlightOption=function(t,e,i){var o,n=this._state;n.highlightIndex!==t&&(void 0!==n.highlightIndex&&n.suggestOptions[this._state.highlightIndex]._$tr&&n.suggestOptions[this._state.highlightIndex]._$tr.removeClass("symbol-edit-popup-active"),n.highlightIndex=t,o=n.suggestOptions[t]._$tr,o&&o.addClass("symbol-edit-popup-active"),this._scrollHighlightIntoView(),e&&this._replaceCurrentSymbol(i))},t.prototype._scrollHighlightIntoView=function(){var t=this.$list.find("tr.symbol-edit-popup-active");t.length&&(t.offset().top<this.$list.offset().top?this.$list.scrollTop(this.$list.scrollTop()-(this.$list.offset().top-t.offset().top)):t.offset().top+t.outerHeight()>this.$list.offset().top+this.$list.outerHeight()&&this.$list.scrollTop(this.$list.scrollTop()+(t.offset().top+t.outerHeight()-(this.$list.offset().top+this.$list.outerHeight()))))},t.prototype._clearSuggestList=function(){delete this._state.suggestOptions,this._spinner&&(this._spinner.stop(),delete this._spinner),this.$list&&this.$list.empty()},t.prototype._showErrorNotice=function(){this.$list&&(this._clearSuggestList(),this.$list.text("Invalid expression"))},t.prototype._getItemFlag=function(t){var e="";return"forex"==t.type||"FXCM"==t.exchange?e="forex":(g=g||a(),e=g[t.full_name.split(":")[0]]),e?o(f[e],{"class":e}):""},t.prototype._replaceCurrentSymbol=function(t){var e,i,o,n,s=this._state;if(s.suggestOptions&&void 0!==s.highlightIndex){if(e=s.suggestOptions[s.highlightIndex],i="",o=0,this._inputParserMixin&&t!==!0){if(n=this._inputParserMixin.replaceCurrentSymbol(e),!n.ok)return;i=n.newValue,o=n.newCaretPos,s.keepListFor=n.keepListFor}else i=t===!0&&e.full_name&&this._inputParserMixin?e.full_name:e.symbol,o=i.length,this._state._selectedTicker=s.keepListFor=e.ticker||e.symbol;this._setInputValue(i),this._inputElement.setSelectionRange?this._inputElement.setSelectionRange(o,o):this._inputElement.select(),this._eventListener(void 0,t)}},t.prototype.splitAndAcceptUserInput=function(){var t,e=this._getInputValue().split(",");for(t=0;t<e.length;t++)this.acceptSymbolIn(e[t])},t.prototype.acceptSymbolIn=function(t){var e,i;this._inputParserMixin?e=this._inputParserMixin.parseSymbol(t):(e=t,i=this._state._selectedTicker||t),this.accept(e,i)},t.prototype.acceptTypeIn=function(){this._allowMultipleSymbols?this.splitAndAcceptUserInput():this.acceptSymbolIn(this._getInputValue())},t.prototype.accept=function(e,i){if(i=i||e){delete this._state.keepListFor;var o=this._ignoreInterval?void 0:t.getInterval(!0);this._inputElement.value=e,this._eventListener(),this._callback&&this._callback(i,o),$(this._inputElement).trigger("accept-symbol",[i])}},t.prototype.bindListWrapper=function(t){if(t=$(t).eq(0),0===t.size())throw new TypeError("element must be a DOM element, jQuery object or selector");this.$list=t,this._clearSelectionState(),this._eventListener()},t.prototype.removeListWrapper=function(){delete this.$list,this._clearSuggestList(),this._clearSelectionState(),this._eventListener()},t.prototype.selectExchangeFilter=function(){this.$filterContainer.find(".exchange-filter").hide(),this._state.typeFilter==t.QUANDL?this.$filterContainer.find("#quandl-filter").show():this._state.typeFilter!=t.ECONOMIC&&this.$filterContainer.find("#exchange-filter").show()},t.prototype._onResponse=function(e){if(e.length>0){var i=this._state.typeFilter;i==t.QUANDL&&this._showNotification()}},t.prototype._showNotification=function(){var t,e,i;TVSettings.getBool("symboledit.show_quandl_notification",!0)&&(t=$.t("Quandl is a huge financial database that we have connected to TradingView. Most of its data is EOD and is not updated in real-time, however the information may be extremely useful for fundamental analysis.")+' <a target="_blank" href="'+("ru"===window.language?"http://blog.tradingview.com/?p=1530&lang=ru":"http://blog.tradingview.com/?p=1530")+'">'+$.t("Read our blog for more info!")+"</a>",e=$('<div class="symbol-edit-notification">').prependTo(this.$list),e.html(t),e.find("a").click(function(t){t.preventDefault();var e=$(this).attr("href");window.open(e,"_blank")}),i=$('<a class="close">').appendTo(e),i.click(function(){TVSettings.setValue("symboledit.show_quandl_notification",!1),e.remove()}))},t.prototype._processQuandlResponse=function(t){return t.datasets.filter(function(t){return!t.premium}).map(function(t){return{description:t.name,exchange:t.database_code,full_name:"QUANDL:"+t.database_code+"/"+t.dataset_code,params:["eod"],symbol:t.dataset_code,type:"quandl"}})},t.showDialog=function(e){var o,n,s,a,l,h,d,p,u,_,f,g,m=i(48);if(e=e||{},o="Symbol Search",!TVDialogs.get(o))return n=TVDialogs.createDialog(o,{hideTitle:!0,hideCloseCross:!0,dragHandle:".filter",width:"750px",dragOptions:{cancel:".sbOptions"},content:m.dialogs.symbolSearch}),TVDialogs.positionDialog(n),s=n.find("._tv-dialog-content").addClass("symbol-search-dialog"),a=s.find(".results"),a.mousewheel(function(t,e){var i=$(this);e>0?i.scrollTop(i.scrollTop()-15):i.scrollTop(i.scrollTop()+15)}),l=s.find("input").get(0),e.initialValue&&(l.value=e.initialValue),"selectionStart"in l&&(l.selectionStart=l.selectionEnd=l.value.length),l.focus(),this.canShowSpreadActions()&&(e.ignoreInterval||(d=t.getInputValueGetter(l),p=t.getInputValueSetter(l)),h=SymbolSearchInputParserMixin.addSpreadActions(s.find(".spread-actions"),l,d,p)),u=new t({input:l,list:s.find(".results").get(0),callback:function(t,i){e.callback&&e.callback(t,i),TVDialogs.destroy(o)},onParse:h,ignoreInterval:e.ignoreInterval}),_=s.find(".filter"),u.$filterContainer=_,f=r(u,_),g=c(u,_),f||g||_.attr("style","display: none"),TVDialogs.resizeContent(n.height(),a),TVDialogs.applyHandlers(n),TVDialogs.positionDialog(n),n.on("destroy",function(){TVSettings.setValue("symboledit.dialog_last_entry",l.value)}),n},t.bindToInput=function(i,o){function n(){_&&(y.removeListWrapper(),_.off(),_.remove(),_=null,TradingView.Tooltip.hide())}function r(t){t.preventDefault()}function a(){var t,i,o,n;if(_||(t=d(y),_=t.popup,y.bindListWrapper(t.listWrapper),_.on("focus","*",r),_.on("click","*",r),_.on("mousedown","*",r)),e.enabled("charting_library_base")&&(i=this._state,i.keepListFor)){if(!i.suggestOptions||void 0===i.highlightIndex)return void delete this._state.keepListFor;o=i.suggestOptions[i.highlightIndex],n=this._getInputValue().toUpperCase(),o.symbol!=n&&delete this._state.keepListFor}}function l(e,i){var o;return i?(RegExp("^"+t.QUANDL,"i").test(e)?(o=e.split(/\//),o.length&&(e=o[o.length-1])):e=s.seriesShortSymbol.value()||e,e):e}function h(t){var e=s.symbol.value()||"";e=l(e,t),i.val(e),y.resetState()}var c,p,u,_,f,g,m,v,y,w,b;return o=o||{},i=$(i).eq(0),c=o.callback,p=null,u=null,_=null,g=o.spreadActions&&$(o.spreadActions).eq(0),g&&g.size()&&this.canShowSpreadActions()&&(o.ignoreInterval||(m=t.getInputValueGetter(i.get(0)),v=t.getInputValueSetter(i.get(0))),f=SymbolSearchInputParserMixin.addSpreadActions(g,i.get(0),m,v)),y=new t({input:i,onValueChanged:a,callback:function(t,e){n(),"function"==typeof u&&u(t,e)||("function"==typeof c&&c(t,e),"function"==typeof p&&p(t,e)),o.clearAfterAccept&&i.val(""),o.keepFocus?i.get(0).focus():i.get(0).blur(),y.resetState()},hidePro:o.hidePro,autoFocus:o.autoFocus,onEmptyApply:o.onEmptyApply,onParse:f,allowMultipleSymbols:o.allowMultipleSymbols,ignoreInterval:o.ignoreInterval}),w=!1,i.on("focus",function(t,e){w=!0,y._skipAutoFocus?delete y._skipAutoFocus:setTimeout(function(){w&&i.get(0).select()},0)}),i.on("blur",function(t){var e,o,s,r;return _&&(e=document.activeElement,o=_.is(e),s=_.has(e).length>0,r=navigator.userAgent.indexOf("Trident")!=-1||navigator.userAgent.indexOf("MSIE")!=-1,r&&(o||s))?(t.preventDefault(),t.stopImmediatePropagation(),void setTimeout(function(){i.focus()},0)):(w=!1,void setTimeout(function(){w||n()},0))}),o.syncWithChartWidget&&(h(!0),s.seriesShortSymbol.subscribe(function(){h(!0)}),p=function(t,e){t&&s.symbol.setValue(t),e&&s.interval.setValue(e)},u=function(t,e){return!e&&(t===s.symbol.value()||(t===s.seriesShortSymbol.value()||void 0))},b=function(){i.get(0).blur(),h(!1)},i.on("keypress",function(t){27===t.keyCode&&b()}),i.on("keydown",function(t){27===t.keyCode&&b()})),y},t.GroupListHandler=function(t,e){this._$container=t,this._tickerRegExp=e,this._roots={}},t.GroupListHandler.prototype.addRoot=function(t,e,i,o){var n,s=this,r=o.clone().addClass("group-title").click(function(e){e.preventDefault(),s[r.hasClass("collapsed")?"expand":"collapse"](t)});r.find("td.name").html("<div>"+e.replace(this._tickerRegExp,"<strong>$&</strong>")+"</div>"),r.find("td.type").html(i.type+(i.exchange&&" - "+i.exchange||"")),r.appendTo(this._$container),r.data("item",{groupTitle:!0,root:t}),n=$('<tr class="group-close"><td colspan="3"></td></tr>').appendTo(this._$container),this._roots[t]={titleRow:r,closeRow:n}},t.GroupListHandler.prototype.append=function(t,e){var i,o,n=ChartApiInstance.futuresRegex(),s=n.exec(t.symbol+"");return s?(i=s[1],o=(t.exchange||"unknown")+"_"+i,this._roots[o]||this.addRoot(o,i,t,e),void e.addClass("root-"+o).insertBefore(this._roots[o].closeRow)):void e.appendTo(this._$container)},t.GroupListHandler.prototype.setCollapsed=function(t,e){var i;if(t)this._roots[t]&&(i=e===!0?"addClass":"removeClass",this._roots[t].titleRow[i]("collapsed"),this._$container.find("tr.root-"+t)[i]("hidden"));else for(t in this._roots)this.setCollapsed(t,e)},t.GroupListHandler.prototype.collapse=function(t){this.setCollapsed(t,!0)},t.GroupListHandler.prototype.expand=function(t){this.setCollapsed(t,!1)},t.isIntervalInit=function(t){return/[\d,]/.test(t)&&e.enabled("show_interval_dialog_on_key_press")},t.isIntervalChar=function(t){return e.enabled("seconds_resolution")?/[\dhdwms]/i.test(t):/[\dhdwm]/i.test(t)},t.parseIntervalValue=function(t){var e=/^[,\s]*(\d*)\s*([hdwms]?)\s*$/i.exec(t)||[],i=~~e[1],o=e[2]&&e[2].toUpperCase(),n={qty:!i&&o?1:i,unit:o||null};return n.error=!i&&!o,n.intraday=!(n.error||n.unit&&"H"!=n.unit),n},t.sanitizeIntervalValue=function(e){var i=t.parseIntervalValue(e),o=i.qty,n=i.unit;return i.error?null:("H"==n&&(o*=60,n=null),o&&!n?o+"":n&&(!o||1==o&&"S"!==n)?n:o+n)},t.detachInterval=function(t){var e=/,[^,]*$/i.exec(t)||[];if(e[0])return{rest:t.substr(0,t.length-e[0].length),detached:e[0]}},t.intervalIsSupported=function(i){var o,r,a;return e.enabled("allow_supported_resolutions_set_only")?(o=this.sanitizeIntervalValue(i),null!==o&&n.isAvailable(o)):(r=t.parseIntervalValue(i),!r.error&&(r.intraday?s.intraday.value():(a=s.supportedResolutions.value(),!a||!!~a.indexOf(r.unit))))},function(){var e="",i=null;t.resetStoredInterval=function(){e="",i=null},t.detachStoreInterval=function(o){var n=t.detachInterval(o);return n?(e=n.detached,i=t.sanitizeIntervalValue(e),n.rest):(t.resetStoredInterval(),o)},t.recallAttachInterval=function(t){return t+e},t.getInterval=function(e){var o=i;return e===!0&&t.resetStoredInterval(),o},t.getInputValueGetter=function(e){return function(){return t.detachStoreInterval(e.value)}},t.getInputValueSetter=function(e){return function(i){e.value=t.recallAttachInterval(i)}},t.intervalError=function(){return!(!e||/^,\s*$/.test(e))&&!i}}(),t.registerDialogKeypressHandler=function(e){if(!e)throw new TypeError("chartWidget is required");TradingView.keyboardBinder.pushBackListener("symbolEdit",function(e){var o,n=i(49);p(e)&&(e.preventDefault(),o=String.fromCharCode(e.charCode),t.isIntervalInit(o)?new n({callback:function(t){s.interval.setValue(t);
}}).show(o):t.showDialog({initialValue:o,callback:function(t,e){s.symbol.setValue(t),e&&s.interval.setValue(e)}}))})},t.canShowSpreadActions=function(){return"undefined"!=typeof SymbolSearchInputParserMixin&&"cme"!==TradingView.widgetCustomer&&"bovespa"!==TradingView.widgetCustomer},t.QUANDL="quandl",t.ECONOMIC="economic",t.QUANDL_API_KEY="qehT7XPzZvLj-wmBB7Gk",t}();t.exports=r}).call(e,i(1),i(26))},function(t,e,i){"use strict";function o(){}var n=i(43),s=i(44);o.isAvailable=function(t){var e,i=s.supportedResolutions.value(),o=!1;return o=void 0===i||i.indexOf(t)!=-1,e=s.intraday.value(),e?o:n.isDWM(t)&&o},t.exports=o},function(t,e){(function(e){"use strict";function i(t,e){return void 0===e&&t!=i.INVALID?i.parse(t):(this._kind=t,void(this._multiplier=e))}"undefined"==typeof window&&(e.TradingView={}),i.SECONDS="seconds",i.MINUTES="minutes",i.HOURS="hours",i.DAYS="days",i.WEEKS="weeks",i.MONTHS="months",i.INVALID="invalid",i.IntadayRegExp=RegExp("^([0-9]*)$"),i.DWMSRegExp=RegExp("^(\\d*)([DWMS])$"),i.prototype.kind=function(){return this._kind},i.prototype.multiplier=function(){return this._multiplier},i.prototype.isValid=function(){return this.kind()!==i.INVALID},i.prototype.isDWM=function(){return this.isValid()&&!this.isIntraday()},i.prototype.isIntraday=function(){return[i.SECONDS,i.MINUTES,i.HOURS].indexOf(this.kind())!==-1},i.prototype.letter=function(){return this.isValid()&&this.kind()!==i.MINUTES?this.kind()[0].toUpperCase():""},i.prototype.value=function(){return this.isValid()?this.kind()===i.MINUTES?this.multiplier()+"":this.multiplier()+this.letter():""},i.prototype.isEqualTo=function(t){if(!(t instanceof i))throw"Argument is not an Interval";return this.kind()!=i.INVALID&&t.kind()!=i.INVALID&&(this.kind()==t.kind()&&this.multiplier()==t.multiplier())},i.isEqual=function(t,e){return i.parse(t).isEqualTo(i.parse(e))},i.parse=function(t){var e,o;return t=(t+"").toUpperCase(),e={D:i.DAYS,W:i.WEEKS,M:i.MONTHS,H:i.HOURS,S:i.SECONDS},(o=i.IntadayRegExp.exec(t))?new i(i.MINUTES,parseInt(t,10)):(o=i.DWMSRegExp.exec(t),o?new i(e[o[2]],parseInt(o[1],10)?parseInt(o[1],10):1):new i(i.INVALID))},i.isDWM=function(t){return i.parse(t).isDWM()},i.kind=function(t){return i.parse(t).kind()},i.isValid=function(t){return i.parse(t).isValid()},t.exports=i}).call(e,function(){return this}())},function(t,e,i){(function(e,o){"use strict";var n=(i(46),function(){function t(t,e){function i(n){function u(i){(o.enabled("same_data_requery")||b.value()!==i)&&(e?e.setSymbol(i):t.setSymbol(i))}function _(){s.setValue(b.value())}function f(t){a.setValue(t.pro_name||window.tradingController&&(t.full_name||t.name))}function g(){r.setValue(w.shortName.value());var t=y.symbolInfo();t?(f(t),t.hasOwnProperty("supported_resolutions")?c.setValue(t.supported_resolutions):c.setValue(void 0),h.setValue(!!t.has_intraday)):(h.deleteValue(),a.deleteValue())}function m(i){(o.enabled("same_data_requery")||S.value()!==i)&&(e?e.setResolution(i):t.setResolution(i))}function v(){l.setValue(S.value())}var y,w,b,S;t.modelCreated().unsubscribe(null,i),y=t.model().mainSeries(),w=y.properties(),b=w.symbol,b.subscribe(null,_),s.setValue(b.value()),s.subscribe(u),y.onSymbolResolved().subscribe(null,f),s.hook=function(t){return y.symbolSameAsCurrent(t)&&(t=y.actualSymbol()),t},y.onSymbolResolved().subscribe(null,g),y.onSymbolError().subscribe(null,g),g(),S=w.interval,S.subscribe(null,v),l.setValue(S.value()),l.subscribe(m),t.readOnly()&&(s.writeLock=!0),d=function(){b.unsubscribe(null,_),s.unsubscribe(u),y.onSymbolResolved().unsubscribe(null,g),y.onSymbolError().unsubscribe(null,g),S.unsubscribe(null,v),l.unsubscribe(m),delete s.hook,delete s.writeLock,d=function(){},p=function(){}}}var n,u;d(),p=function(){return t},n=t.model(),n?i(n):(t.modelCreated().subscribe(null,i),d=function(){t.modelCreated().unsubscribe(null,i),d=function(){},p=function(){}},u=t.properties().mainSeriesProperties,s.setValue(u.symbol.value()),l.setValue(u.interval.value()))}function i(t){function e(t){o=!0,s.setValue(t.resolved_symbol),o=!1}function i(e){o||t.search(e)}u();var o=!1;t.onSearchBySymbol.subscribe(null,e),s.subscribe(i),u=function(){t.onSearchBySymbol.unsubscribe(null,e),s.unsubscribe(i),u=function(){}}}function n(e){d(),e.activeChartWidget.subscribe(function(i){d(),t(i,e)},{callWithLast:!0})}var s=new e,r=new e,a=new e,l=new e,h=new e,c=new e,d=function(){},p=function(){},u=function(){};return{symbol:s,proSymbol:a,seriesShortSymbol:r.readonly(),interval:l,intraday:h.readonly(),supportedResolutions:c.readonly(),bindToChartWidget:t,unbindFromChartWidget:function(){d()},getChartWidget:function(){return p()},bindToSearchCharts:i,unbindFromSearchCharts:function(){u()},bindToChartWidgetCollection:n}}());TradingView.Linking=n,t.exports=n}).call(e,i(45),i(1))},function(t,e,i){(function(t){"use strict";function e(){}function i(t){return this instanceof i?(arguments.length>0&&(this._value=t),void(this._listeners=[])):new i(t)}i.prototype.value=function(){return this._owner?this._owner._value:this._value},i.prototype.setValue=function(t,e){var i,o,n,s=this._owner?this._owner:this;if("function"==typeof s.hook&&(t=s.hook(t)),s.writeLock)return s._value;if(!e&&s._value===t&&s.hasOwnProperty("_value"))return t;for(s._value=t,i=s._listeners.slice(),o=0,n=0;n<i.length;n++)i[n].once&&(s._listeners.splice(n-o,1),o++),i[n].cb(t);return t},i.prototype.deleteValue=function(){var t,e,i,o=this._owner?this._owner:this;if(o.hasOwnProperty("_value")){if(o.writeLock)return o._value;for(delete o._value,t=o._listeners.slice(),e=0,i=0;i<t.length;i++)t[i].once&&(o._listeners.splice(i-e,1),e++),t[i].cb()}},i.prototype.subscribe=function(t,e){var i,o,n;if("function"!=typeof t)throw new TypeError("callback must be a function");i=!!e&&!!e.once,o=!!e&&!!e.callWithLast,n=this._owner?this._owner:this,o&&n.hasOwnProperty("_value")&&(t(n._value),i)||n._listeners.push({cb:t,owner:this,once:!!e&&!!e.once})},i.prototype.unsubscribe=function(t){var e,i,o=this._owner?this._owner:this;for(void 0===t&&(t=null),e=o._listeners,i=e.length;i--;)e[i].owner!==this&&o!==this||e[i].cb!==t&&null!==t||e.splice(i,1)},i.prototype.readonly=function(){if(this._readonlyInstance)return this._readonlyInstance;var t=this._readonlyInstance=new e;return t.subscribe=this.subscribe.bind(this),t.unsubscribe=this.unsubscribe.bind(this),t.value=this.value.bind(this),t.when=this.when.bind(this),t},i.prototype.spawn=function(){var t=new i;return delete t._listeners,t._owner=this._owner||this,t.destroy=function(){this.unsubscribe(),delete this._owner},t},i.prototype.when=function(t){var e,i=this;return this.value()?void t():(e=function(o){o&&(i.unsubscribe(e),t())},void i.subscribe(e))},i.prototype.opposite=function(){var t,e;return this._opposite||(t=this,e=new i((!this.value())),this.subscribe(function(t){e.setValue(!t)}),e.subscribe(function(e){t.setValue(!e)}),this._opposite=e),this._opposite},"undefined"!=typeof window&&(window.WatchedValue=i),void 0!==t&&t&&t.exports&&(t.exports=i)}).call(e,i(2)(t))},function(t,e,i){(function(e){"use strict";var o=i(47).futuresRoots,n=function(){function t(t,e){var i=function(){};return i.prototype=e.prototype,t.prototype=new i,t}function i(t){return t.replace(/[\^\$\(\)\[\]\{\}\*\+\?\|\\]/g,"\\$&")}function n(){}function s(t){this.value=t}function r(){}function a(){}function l(){}function h(){}function c(){}function d(){}function p(){}function u(){}function _(t){this.value=t}function f(t){this.value=t}function g(t){this.value=t}function m(){_.apply(this,arguments)}function v(){f.apply(this,arguments)}function y(t,e){var i,o,n,r,a,l,h,c,d=[];t:for(;i=O.exec(t);){for(o=R.length;o--;)if(i[o+1]){R[o].ctor&&(n=new R[o].ctor(i[o+1]),n._offset=i.index,d.push(n));continue t}r=new g(i[0]),r._offset=i.index,d.push(r)}if(e&&e.recover)for(o=d.length;o--;)l=d[o],l instanceof f||l instanceof _?(void 0!==a&&(h=new _(""),c=d.splice(o,a-o+1,h),h.value=c.map(function(t){return t.value}).join("")),a=o):l instanceof s||(a=void 0);return d}function w(t){var i,o,n,h,c,d,p,u,m,v;if(e.enabled("charting_library_base"))return{currentState:"var"};for(i="init",o="var",n="operator",h=i,c={warnings:[],errors:[],isEmpty:!0},d=[],p=0;p<t.length;p++)if(u=t[p],!(u instanceof s))if(delete c.isEmpty,u.isIncomplete&&(m={status:"incomplete",reason:"incomplete_token",offset:u._offset,token:u},u.incompleteSuggest&&(m.recover={append:u.incompleteSuggest()}),c.warnings.push(m),p!==t.length-1))m.status="error";else if(u instanceof _||u instanceof f){if(h==o){c.errors.push({status:"error",reason:"unexpected_token",offset:u._offset,token:u});continue}h=o}else if(u instanceof l){if(h!=o){c.errors.push({status:"error",reason:"unexpected_token",offset:u._offset,token:u});continue}h=n}else if(u instanceof r){if(h==o){c.errors.push({status:"error",reason:"unexpected_token",offset:u._offset,token:u});continue}d.push(u),h=i}else if(u instanceof a){if(h!=o){c.errors.push({status:"error",reason:"unexpected_token",offset:u._offset,token:u});continue}v=d.pop(),v||c.errors.push({status:"error",reason:"unbalanced_brace",offset:u._offset,token:u,recover:{prepend:new r}}),h=o}else u instanceof g&&c.errors.push({status:"error",reason:"unparsed_entity",offset:u._offset,token:u});for(c.braceBalance=d.length,h!==o&&c.warnings.push({status:"incomplete"}),v=null;d.length;)u=d.pop(),m={status:"incomplete",reason:"unbalanced_brace",offset:u._offset,token:u},h==o&&(m.recover={append:new a}),c.warnings.push(m);return c.currentState=h,0===c.warnings.length&&delete c.warnings,0===c.errors.length&&delete c.errors,c}function b(t){var e,i=[];for(e=0;e<t.length;e++)t[e]instanceof s||i.push(t[e]);return i}function S(t){var e,i,o,n,s,h,c;for(t=b(t),e=[],i=[],n=0;n<t.length;n++)s=t[n],s instanceof l?i.length&&i[i.length-1].minPrecedence>s.precedence&&(i[i.length-1].minPrecedence=s.precedence):s instanceof r?i.push(o={minPrecedence:1/0,openBraceIndex:n}):s instanceof a&&(o=i.pop(),h=t[o.openBraceIndex-1],c=t[n+1],c instanceof l&&!(c.precedence<=o.minPrecedence)||!(!(h instanceof l)||h.precedence<o.minPrecedence||h.precedence===o.minPrecedence&&h.commutative)||(e.unshift(o.openBraceIndex),e.push(n),i.length&&i[i.length-1].minPrecedence>o.minPrecedence&&(i[i.length-1].minPrecedence=o.minPrecedence)));for(n=e.length;n--;)t.splice(e[n],1);return t}function T(t){for(var e=0;e<t.length;e++)t[e].parse&&t[e].parse();return t}function C(t){var e=x(t);return S(e?e:[new f("1"),new p,new r].concat(t).concat(new a))}function x(t){var e,i,o,n=0,h=1,c=2,d=3,u=n,_=0;for(i=0;i<t.length;i++)if(o=t[i],!(o instanceof s))switch(u){case n:if(!(o instanceof f&&1===+o.value))return!1;u=h;break;case h:if(!(u===h&&o instanceof p))return!1;u=c,e=i+1;break;case c:if(o instanceof r)u=d,_=1;else if(o instanceof l)return!1;break;case d:o instanceof r?_++:o instanceof a&&(_--,_<=0&&(u=c))}return t.slice(e)}function P(t){return new _(t).ticker()}function L(t){if("string"==typeof t)t=y(t);else if(!Array.isArray(t))throw new TypeError("expression must be a string or token array");return t.some(function(t){return t instanceof _&&"BATS"===(t.exchange()||"").toUpperCase()})}function k(t){if("string"==typeof t)t=y(t);else if(!Array.isArray(t))throw new TypeError("expression must be a string or token array");return t.some(function(t){return t instanceof _&&(t.exchange()||"").toUpperCase().indexOf("_EOD")!==-1})}function E(t){if("string"==typeof t)t=y(t);else if(!Array.isArray(t))throw new TypeError("expression must be a string or token array");return t.some(function(t){return t instanceof _&&"CHXEUR"===(t.exchange()||"").toUpperCase()})}function I(t){var e=["MOEX_DLY","LSE_DLY","LSIN_DLY"];if("string"==typeof t)t=y(t);else if(!Array.isArray(t))throw new TypeError("expression must be a string or token array");return t.some(function(t){return t instanceof _&&e.indexOf((t.exchange()||"").toUpperCase())!==-1})}function A(t,e){if("string"!=typeof t)throw new TypeError("expression must be a string");return t=y(t),1===t.length&&t[0].exchange().substr(0,e.length)===e}function V(t){if("string"!=typeof t)throw new TypeError("expression must be a string");var e=S(b(y(t)));return e.forEach(function(t){t instanceof _&&t.exchange(null)}),$(e)}function M(t){if("string"!=typeof t)throw new TypeError("expression must be a string");var e=S(b(y(t)));return $(e)}function $(t){return t.join("")}var D,B,O,R=[{pattern:"(",ctor:r},{pattern:")",ctor:a},{pattern:"+",ctor:h},{pattern:"-",ctor:c},{pattern:"*",ctor:d},{pattern:"/",ctor:p},{pattern:"^",ctor:u},{pattern:/\d+(?:\.\d*|(?![a-zA-Z0-9_!:\.&]))|\.\d+/,ctor:f},{pattern:/\./,ctor:v},{pattern:e.enabled("charting_library_base")?/[a-zA-Z0-9_\u4e00-\u9fa5^][a-zA-Z0-9_\u4e00-\u9fa5_!:\.&]*|'.+?'/:/[a-zA-Z0-9][a-zA-Z0-9_!|:\.&]*|'.+?'/,ctor:_},{pattern:/'[^']*/,ctor:m},{pattern:/[\0-\x20\s]+/,ctor:s}];return n.prototype.toString=function(){return this.value},t(s,n),t(r,n),r.prototype.value="(",t(a,n),a.prototype.value=")",t(l,n),t(h,l),h.prototype.value="+",h.prototype.precedence=0,h.prototype.commutative=!0,t(c,l),c.prototype.value="-",c.prototype.precedence=0,c.prototype.commutative=!1,t(d,l),d.prototype.value="*",d.prototype.precedence=1,d.prototype.commutative=!0,t(p,l),p.prototype.value="/",p.prototype.precedence=1,p.prototype.commutative=!1,t(u,l),u.prototype.value="^",u.prototype.precedence=2,u.prototype.commutative=!1,D=/^'?(?:([A-Z0-9_]+):)?(.*?)'?$/i,B=/[\+\-\/\*]/,t(_,n),_.prototype.toString=function(){if(this.hasOwnProperty("_ticker")){var t=B.test(this._ticker)?"'":"";return t+(this._exchange?this._exchange+":":"")+this._ticker+t}return this.value},_.prototype.parse=function(){var t=D.exec(this.value);t[1]&&(this._exchange=t[1]),this._ticker=t[2]},_.prototype.parseAsFutures=function(){var t,e,i;if(o)for(this.hasOwnProperty("_ticker")||this.parse(),t=function(t){return o.some(function(e){return e.t===t})},e=2;e>=1;--e)if(i=this._ticker.slice(0,e),t(i)){this._root=i,this._contract=this._ticker.slice(e);break}},_.prototype.exchange=function(t){return this.hasOwnProperty("_ticker")||this.parse(),arguments.length>0?void(null===t||void 0===t?delete this._exchange:this._exchange=t+""):this._exchange},_.prototype.ticker=function(t){return this.hasOwnProperty("_ticker")||this.parse(),arguments.length>0?(null===t||void 0===t?delete this._ticker:this._ticker=t+"",delete this._root,delete this._contract,void 0):this._ticker},_.prototype.root=function(t){return this.hasOwnProperty("_root")||this.parseAsFutures(),arguments.length>0?void(null===t||void 0===t?delete this._root:(this._root=t+"",this._root&&(this._ticker=this._root+(this._contract||"")))):this._root},_.prototype.contract=function(t){return this.hasOwnProperty("_contract")||this.parseAsFutures(),arguments.length>0?void(null===t||void 0===t?delete this._contract:(this._contract=t+"",this._root&&(this._ticker=this._root+this._contract))):this._root},t(f,n),f.prototype.toString=function(){return this.hasOwnProperty("_normalizedValue")?this._normalizedValue:this.value},f.prototype.parse=function(){this._normalizedValue=this.value.replace(/^0+|\.0*$/g,"").replace(/(\.\d*?)0+$/,"$1").replace(/^(\.|$)/,"0$1")},g.prototype.toString=function(){return this.value},t(m,_),m.prototype.isIncomplete=!0,m.prototype.incompleteSuggest=function(){if("'"!==this.value)return new String("'")},t(v,f),v.prototype.isIncomplete=!0,O=RegExp(R.map(function(t){return"("+("string"==typeof t.pattern?i(t.pattern):t.pattern.source)+")"}).concat(".").join("|"),"g"),{tokenize:y,validate:w,factorOutBraces:S,normalizeTokens:T,flip:C,hasBatsSymbols:L,hasEodSymbols:k,hasChxeurSymbols:E,hasFreeDelaySymbols:I,isExchange:A,SymbolToken:_,IncompleteSymbolToken:m,NumberToken:f,BinaryOperatorToken:l,OpenBraceToken:r,CloseBraceToken:a,ticker:P,shortName:V,normalize:M}}();t.exports=n}).call(e,i(1))},function(t,e){"use strict";e.availableTimezones=TradingView.availableTimezones=[{id:"Etc/UTC",title:$.t("UTC")},{id:"exchange",title:$.t("Exchange")},{id:"Pacific/Honolulu",title:$.t("Honolulu")},{id:"America/Vancouver",title:$.t("Vancouver")},{id:"America/Los_Angeles",title:$.t("Los Angeles")},{id:"America/Phoenix",title:$.t("Phoenix")},{id:"America/Chicago",title:$.t("Chicago")},{id:"America/El_Salvador",title:$.t("San Salvador")},{id:"America/Toronto",title:$.t("Toronto")},{id:"America/New_York",title:$.t("New York")},{id:"America/Bogota",title:$.t("Bogota")},{id:"America/Argentina/Buenos_Aires",title:$.t("Buenos Aires")},{id:"America/Sao_Paulo",title:$.t("Sao Paulo")},{id:"Europe/London",title:$.t("London")},{id:"Europe/Madrid",title:$.t("Madrid")},{id:"Europe/Paris",title:$.t("Paris")},{id:"Europe/Berlin",title:$.t("Berlin")},{id:"Europe/Warsaw",title:$.t("Warsaw")},{id:"Europe/Athens",title:$.t("Athens")},{id:"Europe/Moscow",title:$.t("Moscow")},{id:"Asia/Tehran",title:$.t("Tehran")},{id:"Asia/Dubai",title:$.t("Dubai")},{id:"Asia/Ashkhabad",title:$.t("Ashkhabad")},{id:"Asia/Kolkata",title:$.t("Kolkata")},{id:"Asia/Almaty",title:$.t("Almaty")},{id:"Asia/Bangkok",title:$.t("Bangkok")},{id:"Asia/Taipei",title:$.t("Taipei")},{id:"Asia/Singapore",title:$.t("Singapore")},{id:"Asia/Shanghai",title:$.t("Shanghai")},{id:"Asia/Hong_Kong",title:$.t("Hong Kong")},{id:"Asia/Seoul",title:$.t("Seoul")},{id:"Asia/Tokyo",title:$.t("Tokyo")},{id:"Australia/Brisbane",title:$.t("Brisbane")},{id:"Australia/Adelaide",title:$.t("Adelaide")},{id:"Australia/Sydney",title:$.t("Sydney")},{id:"Pacific/Auckland",title:$.t("New Zealand")},{id:"Pacific/Fakaofo",title:$.t("Tokelau")},{id:"Pacific/Chatham",title:$.t("Chatham Islands")}],e.monthsShort=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],e.futuresRoots=[{d:"E-Mini S&P 500",t:"ES"},{d:"E-Mini Nasdaq 100",t:"NQ"},{d:"Gold",t:"GC"},{d:"Silver",t:"SI"},{d:"Crude Oil WTI",t:"CL"},{d:"Natural Gas",t:"NG"},{d:"Australian Dollar",t:"6A"},{d:"Australian Dollar (Floor)",t:"AD"},{d:"Euro FX",t:"6E"},{d:"Euro FX (Floor)",t:"EC"},{d:"Corn",t:"ZC"},{d:"Corn (Floor)",t:"C"},{d:"Eurodollar",t:"GE"},{d:"Eurodollar (Floor)",t:"ED"}]},function(t,e,i){(function(e){"use strict";t.exports=TradingView.templates={index:{chartsSection:'<div class="index-charts-tab active" id="index-charts-tab-{{index}}"><div class="index-charts-tab-sizer"><div class="index-charts-tab-container"><div class="clear"></div></div><div class="index-charts-spinner"></div></div><div class="show-more"><a href="/chart/?q=&sort={{url}}" id="show-more-button">'+$.t("More {{sectionName}} Ideas")+"</a></div></div>",chartsSectionItem:'<div class="item" id="chart-{{id}}"><a href="{{published_chart_url}}"><img class="chart-img" src="{{image_mid_url}}" alt="" /></a><div class="caption">{{>iconedFollowSymbolButton}} <a href="/chart/{{short_name}}/{{#full_name_required}}?exg={{exchange}}{{/full_name_required}}" class="symbol" data-symbol="{{symbol}}">{{short_name}}</a>, <span class="interval">{{interval}}</span> <span class="count views"><span class="icon icon-eye" title="'+$.t("Views")+'"></span> {{views_count}}</span><span class="count comments"><span class="icon icon-comment" title="'+$.t("Comments")+'"></span> {{comment_count}}</span></div><a class="cover{{#is_online}} online{{/is_online}}" href="{{published_chart_url}}"><img class="avatar-pic" src="{{user_picture}}" alt="{{full_name}}"/><div class="user-info">{{full_name}}{{#is_moderator}}<sup class="user-badge mod" title="'+$.t("Moderator")+'}">'+$.t("mod")+'</sup>{{/is_moderator}} {{^is_moderator}}{{#is_pro}}<sup class="user-badge pro{{#is_realtime}} realtime{{/is_realtime}}{{#is_trial}} trial{{/is_trial}}" title="'+$.t("Pro")+"{{#is_realtime}} "+$.t("Realtime")+"{{/is_realtime}}{{#is_trial}} "+$.t("Trial")+'{{/is_trial}}">'+$.t("Pro")+'</sup>{{/is_pro}} {{/is_moderator}}<br/><span class="icon icon-charts" title="'+$.t("Charts")+'"></span> {{user_charts}} <span class="icon icon-rating-small" title="'+$.t("Rating")+'"></span> {{followers_count}}</div><div class="clear"></div><div class="name">{{name}}</div><div class="desc">{{desc}}</div><div class="date">{{created_time}}</div><div class="icons">{{> chartBadges}}<span class="chart-direction-label direction-{{direction}}">{{#direction_name}}{{direction}}{{/direction_name}}</span></div></a></div>'},addressInputsRows:'<tr><td colspan="12"><p>'+$.t("Address")+'</p><input class="address-autocomplete" type="text" value="" placeholder="{{#addressPlaceholder}}{{addressPlaceholder}}{{/addressPlaceholder}}{{^addressPlaceholder}}'+$.t("Enter your ZIP code")+'{{/addressPlaceholder}}"/></td></tr><tr><td colspan="12"><input type="text" autocomplete-name="route" name="STREET" value="{{#reference_transaction_billing_address.STREET}}{{reference_transaction_billing_address.STREET}}{{/reference_transaction_billing_address.STREET}}{{^reference_transaction_billing_address.STREET}}{{ user.billing_street }}{{/reference_transaction_billing_address.STREET}}" placeholder="'+$.t("Street")+'" disabled="true"/></td></tr><tr><td colspan="6"><input type="text" autocomplete-name="locality" name="CITY" value="{{#reference_transaction_billing_address.CITY}}{{reference_transaction_billing_address.CITY}}{{/reference_transaction_billing_address.CITY}}{{^reference_transaction_billing_address.CITY}}{{ user.billing_city }}{{/reference_transaction_billing_address.CITY}}" placeholder="'+$.t("City")+'" disabled="true"/></td><td colspan="6"><input type="text" autocomplete-name="administrative_area_level_1" name="STATE" value="{{#reference_transaction_billing_address.STATE}}{{reference_transaction_billing_address.STATE}}{{/reference_transaction_billing_address.STATE}}{{^reference_transaction_billing_address.STATE}}{{ user.billing_state }}{{/reference_transaction_billing_address.STATE}}" placeholder="'+$.t("State/Region")+'" disabled="true"/></td></tr><tr><td colspan="6"><input type="text" autocomplete-name="country" name="COUNTRY" value="{{#reference_transaction_billing_address.COUNTRY}}{{reference_transaction_billing_address.COUNTRY}}{{/reference_transaction_billing_address.COUNTRY}}{{^reference_transaction_billing_address.COUNTRY}}{{ user.billing_country }}{{/reference_transaction_billing_address.COUNTRY}}" placeholder="'+$.t("Country")+'" disabled="true"/><input type="hidden" autocomplete-name="country_code" name="COUNTRYCODE" value="{{#reference_transaction_billing_address.COUNTRYCODE}}{{reference_transaction_billing_address.COUNTRYCODE}}{{/reference_transaction_billing_address.COUNTRYCODE}}{{^reference_transaction_billing_address.COUNTRYCODE}}{{ user.billing_countrycode }}{{/reference_transaction_billing_address.COUNTRYCODE}}" /></td><td colspan="6"><input type="text" autocomplete-name="postal_code" name="ZIP" value="{{#reference_transaction_billing_address.ZIP}}{{reference_transaction_billing_address.ZIP}}{{/reference_transaction_billing_address.ZIP}}{{^reference_transaction_billing_address.ZIP}}{{ user.billing_zip }}{{/reference_transaction_billing_address.ZIP}}" placeholder="'+$.t("Zip Code")+'" disabled="true"/></td></tr>',dialogs:{},lists:{savedCharts:"<ul>{{#charts}}<li><a href='/chart/{{url}}/'><span class='name'>{{name}}</span> <span class='subscript'>{{modified}}{{#short_symbol}} | {{short_symbol}}{{#interval}}, {{interval}}{{/interval}}{{/short_symbol}}</span> <span class='icon icon-carousel-item-delete-dark' title='"+$.t("Delete")+"' data-id='{{url}}'></span></a></li>{{/charts}}</ul>"},billingUpgradeForYear:'<div class="tv-billing-upgrade tv-profile-area"><h3 class="no-border billing-upgrade-header">'+$.t("GET 6 MONTHS FREE")+'</h3><div class="tv-billing-upgrade-body"><span>'+$.t("You already spent ${0}, and if you continue to pay every month, the year will cost you ${1}. Don't let your money go to waste - upgrade now to an annual plan for just ${2}. It's time to stop spending and start investing, get 6 months free!").format("{{spent}}","{{year_cost}}","{{cost}}")+'</span><p><input type="button" class="btn light-blue js-upgrade-for-year tv-upgrade-for-year" value="'+$.t("GET 6 MONTHS FREE!")+'"</p></div></div>',userlink:"<a href='/u/{{username}}/' class='userlink'>{{username}}</a>{{> userBadge}}",userBadge:"{{#is_top}}{{> topBadge}}{{/is_top}}{{^is_top}}{{#is_moderator}}{{> modBadge}}{{/is_moderator}}{{^is_moderator}}{{#is_pro}}{{> proBadge}}{{/is_pro}}{{/is_moderator}}{{/is_top}}",userBadgeChat:"{{#is_top}}{{#is_moderator}}{{> modBadge}}{{/is_moderator}}{{^is_moderator}}{{> topBadge}}{{/is_moderator}}{{/is_top}}{{^is_top}}{{#is_moderator}}{{> modBadge}}{{/is_moderator}}{{^is_moderator}}{{#is_pro}}{{> proBadge}}{{/is_pro}}{{/is_moderator}}{{/is_top}}",proBadge:'<{{badge_tag}}{{^badge_tag}}a href="/gopro/"{{/badge_tag}} class="apply-common-tooltip user-badge pro{{#is_realtime}} realtime{{/is_realtime}}{{#is_premium}} premium{{/is_premium}}{{#is_trial}} trial{{/is_trial}}{{#large_badge}} large{{/large_badge}}" title="{{#is_realtime}}'+$.t("Pro Realtime")+"{{/is_realtime}}{{#is_premium}}"+$.t("Premium")+"{{/is_premium}}{{#is_trial}}"+$.t("Pro Trial")+'{{/is_trial}}{{^is_realtime}}{{^is_premium}}{{^is_trial}}Pro{{/is_trial}}{{/is_premium}}{{/is_realtime}}">'+$.t("pro")+"</{{badge_tag}}{{^badge_tag}}a{{/badge_tag}}>",modBadge:"<{{badge_tag}}{{^badge_tag}}a href='/house-rules/'{{/badge_tag}} class='user-badge mod{{#large_badge}} large{{/large_badge}} apply-common-tooltip' title='"+$.t("Moderator")+"'>mod</{{badge_tag}}{{^badge_tag}}a{{/badge_tag}}>",topBadge:"<{{badge_tag}}{{^badge_tag}}a href='/people/'{{/badge_tag}} class='user-badge top{{#large_badge}} large{{/large_badge}} {{badge_class}} apply-common-tooltip' title='{{badge_title}}'>top</{{badge_tag}}{{^badge_tag}}a{{/badge_tag}}>",chartBadges:"",iconedFollowSymbolButton:'{{#pro_symbol}}<button class="follow-symbol iconed{{#current_user_follows_symbol}} active{{/current_user_follows_symbol}}" data-symbol="{{pro_symbol}}" title="'+$.t("Follow {{pro_symbol}}")+'"></button>{{/pro_symbol}}',globalNotification:'<div class="tv-global-notification" id="global-notification-{{ id }}"><div class="tv-layout-width"><span class="icon icon-notification-info"></span>{{{ text }}}</div><span class="global-notification-close"><i class="icon icon-notification-close"></i></span></div>',actionsLog:'<div class="entry"><b>{{#is_system}}<img src="images/small-logo.png" class="log-system-message"/>system{{/is_system}}{{^is_system}}<a href="/u/{{username}}" target="_blank">{{username}}</a>{{/is_system}}</b><div class="entry-time time-upd">{{ created_timestamp }}</div> <div class="message">{{{text}}}</div></div>',onChartMessage:'<div class="onchart-message"><span class="onchart-message-close"></span><div class="onchart-message-top"><div class="onchart-message-copy"></div></div><div class="onchart-message-bottom"><div class="onchart-message-ear"></div></div></div>',userlinkPopup:'<div class="msg-userlink-popup" data-id="{{ id }}"><div class="msg-userlink-popup-container"><a class="userpic" href="/u/{{ username }}/"><img class="userpic" src="{{#has_picture}}{{big_picture_url}}{{/has_picture}}{{^has_picture}}{{mid_picture_url}}{{/has_picture}}"/></a><div class="content"><div class="username">{{> userlink}}<span class="btc-tip"></span></div><div class="user-stats-small"><span class="user-stats-followers" title="'+$.t("Followers")+'">{{followers_count}}</span><span class="user-stats-charts" title="'+$.t("Charts")+'">{{charts_count}}</span><span class="user-stats-reputation" title="'+$.t("Reputation")+'">{{reputation}}</span></div>{{^is_self}}{{#show_buttons}}<div class="action-buttons"><button class="follow-user follow-user-{{ id }}{{#follow_status}} active{{/follow_status}}" title="{{#follow_status}}'+$.t("Unfollow")+"{{/follow_status}}{{^follow_status}}"+$.t("Follow")+'{{/follow_status}}" data-id="{{ id }}"><span class="follow">'+$.t("Follow")+'</span><span class="following">'+$.t("Followed")+'</span><span class="unfollow">'+$.t("Unfollow")+'</span></button> <button class="message-user message active" title="'+$.t("Send message")+'" data-username="{{ username }}" data-id="{{ id }}"><span class="message">'+$.t("Message")+'</span></button></div>{{/show_buttons}}{{/is_self}}</div><div class="clear"></div>{{#status}}<div class="user-status">{{status}}</div>{{/status}}<div class="send-form"><p>'+$.t("To:")+' <strong>{{ username }}</strong></p><p><textarea name="message-text"></textarea></p><p class="actions"><button class="message-user active send">'+$.t("Send")+'</button><button class="message-user cancel">'+$.t("Cancel")+"</button></p></div></div></div>",miniWidgetWizardAddSymbol:'<tr class="symbol-item"><td>{{symbol}}</td><td>{{description}}</td><td>{{timeframe}}</td><td><div class="remove-symbol"></div></td></tr>',userInfoWidgetButtons1:'<div class="buttons layout-2-buttons"><button class="profile-action profile-edit" data-id="{{ id }}" data-username="{{ username }}" title="'+$.t("Edit profile")+'"><span class="">'+$.t("Edit")+'</span></button><button class="profile-action profile-signout" title="'+$.t("Sign out")+'" onclick="TradingView.signOut(); return false;"><span class="">'+$.t("Sign out")+'</span></button><div class="clear"></div></div>',userInfoWidgetButtons2:'<div class="buttons layout-1-buttons"><button class="follow-user {{ is_followed_css }} follow-user-{{ id }}" data-id="{{ id }}"><span class="follow" title="'+$.t("Follow")+'"></span><span class="following" title="'+$.t("Following")+'"></span><span class="unfollow" title="'+$.t("Unfollow")+'"></span></button><div class="clear"></div></div>',userInfoWidgetButtons3:'<div class="buttons layout-1-buttons"><button class="profile-action profile-signin" title="'+$.t("Sign in")+'" onclick="runOrSignIn(function() {}, { source: "User info widget sign in" }); return false;"><span class="">'+$.t("Sign in")+'</span></button><div class="clear"></div></div>',textNotesWidgetLayout:'<div class="notes-block"><div class="textnotes-search-header"><div class="search-input-block">'+e.code("chat-search")+'<div class="search-clean"></div><input type="text" class="search-input" placeholder="'+$.t("Search Note")+'" maxlength="1000" autocomplete="off"></div><div class="new-note-btn">'+e.code("add-note")+$.t("NEW")+'</div></div><div class="notes-wrapper"><div class="notes"></div></div></div><div class="notes-desc-block"><div class="notes-desc-wrapper"><div class="notes-desc-inner"><div class="remove-note-btn">'+e.code("removenote")+'</div><div class="title-wrap"><input type="text" maxlength="40" value="" class="title"></div><div class="date"><span class="created">'+$.t("Created ")+'<span class="created-val"></span>. </span><span class="modified">'+$.t("Last edited ")+'<span class="modified-val"></span></span></div><textarea></textarea></div></div></div>',textNotesWidgetItem:'<div class="note"><div class="note-header"><div {{#symbol}}title="'+$.t("Open")+" {{symbol}} "+$.t("Text Note")+'"{{/symbol}} class="title {{#symbol}}title_with-badge{{/symbol}}">{{title}}</div>{{#symbol}}<div class="symbol-badge">'+e.code("badge")+'<span class="symbol">{{symbol}}</span></div>{{/symbol}}</div><div class="note-desc">{{description}}</div><span class="favorite"></span></div>',tvDataTable:'<table class="tv-data-table {{className}}"><thead class="tv-data-table__thead"><tr class="tv-data-table__stroke">{{#columns}}<th class="tv-data-table__cell tv-data-table__cell--bold {{className}}">{{#notSortable}}{{label}}{{/notSortable}}{{^notSortable}}<span class="tv-data-table__cell-text tv-data-table__sortable {{#help}}apply-common-tooltip{{/help}}" {{#help}}title="{{help}}"{{/help}}>{{label}}</span>{{/notSortable}}</th>{{/columns}}</tr></thead>{{#bodys}}<tbody class="tv-data-table__tbody {{className}}">{{#strokes}}<tr class="tv-data-table__stroke">{{#cells}}<td class="tv-data-table__cell {{className}}"{{#colspan}}colspan="{{colspan}}"{{/colspan}}>{{#contain}}{{{contain}}}{{/contain}}</td>{{/cells}}</tr>{{/strokes}}</tbody>{{/bodys}}</table>',tvDataTableRow:'<tr class="tv-data-table__stroke">{{#columns}}<td class="tv-data-table__cell {{className}}">{{#contain}}{{{contain}}}{{/contain}}</td>{{/columns}}</tr>',tvDataTableCell:'<td class="tv-data-table__cell {{className}}">{{#contain}}{{{contain}}}{{/contain}}</td>',tvWidgetChartLikeButton:'<div data-id="{{chartId}}" class="tv-widget-chart-like-button {{typeClass}}"><span class="tv-widget-chart-like-button__icon-place">'+e.code("like")+'</span><span class="js-likes-counter"></span></div>',
widgetReferrals:{features:{alerts:$.t("Stay on top of market moves! Alerts are immediate notifications when markets meet your custom criteria. Pick from visual popups, audio signals & email alerts."),pinescript:$.t("Create your own indicators and strategies! Pine Script is a flexible and efficient language for doing just that."),saveload:$.t("Save the analysis you do! Your custom settings, indicator setups and so on are saved onsite as individual charts for later access from anywhere."),customIntervals:$.t("Customize how you look at the markets! View charts in custom timeframes, such as 7 minutes, 12 minutes, or even 8 hours per bar."),kagiRenko:$.t("Get a new look at the markets with advanced chart types! Use Kagi and Renko charts with intraday resolutions for a complete picture.")}}}}).call(e,i(26))},function(t,e,i){"use strict";function o(t){this._options=t||{},this._setInput(),this._caption=$('<i class="interval-caption">').html("&nbsp;"),this._helpTooltipTrigger=$('<i class="help-tooltip-trigger apply-common-tooltip common-tooltip-below">').text("?").attr("title",$.t("interval_dialog_description")),this._dialogTitle=$.t("Change Interval")}var n=i(44),s=i(41);o.prototype._setInput=function(){this._input=$('<input type="text" class="change-interval-input" autocomplete="off" maxlength="4">'),this._input.on("keypress",this._handleInput.bind(this)).on("input",function(){this._validate(),this._updateCaption()}.bind(this)).on("blur",function(){setTimeout(this._submit.bind(this),0)}.bind(this))},o.prototype._validate=function(){var t,e=this._input.val();this._parsed=s.parseIntervalValue(e),this._valid=!this._parsed.error,this._supported=!this._parsed.error&&s.intervalIsSupported(e),!this._supported||this._parsed.unit&&"H"!=this._parsed.unit||(t=this._parsed.qty*("H"==this._parsed.unit?60:1),t>1440&&(this._supported=!1))},o.prototype._updateCaption=function(){var t,e,i;this._valid&&this._supported?(e=this._parsed.qty||1,i=this._parsed.unit?{H:"hour",D:"day",W:"week",M:"month",S:"second"}[this._parsed.unit]:"minute",t=e+" "+$.t(i,{count:e}),this._input.add(this._caption).removeClass("error")):(t=this._parsed.error?"&nbsp;":$.t("Not applicable"),this._input.add(this._caption).addClass("error")),this._caption.html(t)},o.prototype._handleInput=function(t){return 13===t.which?void this._submit():void(t.ctrlKey||t.metaKey||!t.charCode||!t.which||t.which<=32||s.isIntervalChar(String.fromCharCode(t.charCode))||t.preventDefault())},o.prototype._submit=function(){var t,e;TVDialogs.isOpen(this._dialogTitle)&&(this._valid&&this._supported&&(t=s.sanitizeIntervalValue(this._input.val()),e=n.interval.value(),t&&e!=t&&"function"==typeof this._options.callback&&this._options.callback(t)),TVDialogs.destroy(this._dialogTitle))},o.prototype._setInitialValue=function(t){var e,i;t=t||this._options.initialValue,e="",i=!1,t&&","!=t?e=s.sanitizeIntervalValue(t)||"":(t=n.interval.value(),e=t,i=!0),this._input.val(e),i&&this._input.select()},o.prototype.isValid=function(){return!!this._valid},o.prototype.show=function(t){var e=TVDialogs.createDialog(this._dialogTitle,{hideCloseCross:!0,addClass:"change-interval-dialog"}),i=e.find("._tv-dialog-content");return e.css("min-width",0),i.css("min-width",0).mousedown(function(t){this._input.is(t.target)||t.preventDefault()}.bind(this)).append(this._input.add(this._caption).add(this._helpTooltipTrigger)),TVDialogs.applyHandlers(e),TVDialogs.positionDialog(e),this._setInitialValue(t),this._validate(),this._updateCaption(),e},t.exports=o},function(t,e,i){(function(t,o,n){"use strict";var s,r,a,l,h,c,d,p,u,_,f,g,m,v,y,w,b,S,T,C,x,P,L,k,E,I,A,V,M,D,B,O,R,z;"undefined"!=typeof FlashCanvas&&FlashCanvas.setOptions({disableContextMenu:!0}),s=function(t,e){if(t.width=e.w,t.height=e.h,"undefined"==typeof FlashCanvas){var i=t.getContext("2d");i.translate(.5,.5)}},e.setCanvasSize=s,r=function(t,e,i,o,n,s){t.save(),"undefined"==typeof FlashCanvas&&t.translate(-.5,-.5),t.fillStyle=s,t.fillRect(e,i,o,n),t.restore()},e.clearRect=r,a=function(t,e){var i=document.createElement("canvas");return t.append(i),"undefined"!=typeof FlashCanvas&&FlashCanvas.initElement(i),s(i,e),i},e.addCanvasTo=a,l=function(t,e,i,o){this.x=t,this.y=e,this.w=i,this.h=o},e.Rect=l,h=function(t,e){this.w=t,this.h=e},e.Size=h,h.prototype.equals=function(t){return this.w===t.w&&this.h===t.h},c=function(t,e){this.x=t,this.y=e},e.Point=c,d=function(t,e){t.css("position","absolute"),t.css("left",e.x+"px"),t.css("top",e.y+"px"),t.width(e.w),t.height(e.h)},e.setAbsoluteRect=d,p=function(t,e){t.css("position","absolute"),t.css("left",e.x+"px"),t.css("top",e.y+"px")},e.setAbsolutePos=p,u=function(t,e){var i=t.offset();e.localX=e.pageX-i.left,e.localY=e.pageY-i.top},e.addLocalCoordsToMouseEvent=u,_=function(t,e,i,o,n){o&&(n||u(e,t),o.call(i,t,e))},e.processEvent=_,f=2,g=function(t,e,i){var o,n,s,r,a,l,h,c,d,p,u,g,m,v,y=function(o){t.off("mousemove.chartgui");var n=function(o){TradingView.mousePressed&&!Modernizr.touch||(_(o,t,e,e.mouseMoveEvent),i&&o.preventDefault())};t.on("mousemove.chartgui",n),Modernizr.touch&&n(o),_(o,t,e,e.mouseEnterEvent),i&&o.preventDefault()};t.mouseenter(y),o=0,n=null,s=500,r=function(){window.clearTimeout(n),o=0,n=null},a={x:0,y:0},l=null,h=500,c=function(c){var d,p;if(void 0===c.button&&(c.button=0),(Modernizr.touch||c.originalEvent.touches)&&(c.pageX=c.originalEvent.touches[0].pageX,c.pageY=c.originalEvent.touches[0].pageY,c.localX=c.originalEvent.touches[0].pageX,c.localY=c.originalEvent.touches[0].pageY,y(c)),d=function(o){void 0===o.button&&(o.button=0),(Modernizr.touch||o.originalEvent.touches)&&(o.pageX=o.originalEvent.touches[0].pageX,o.pageY=o.originalEvent.touches[0].pageY,o.localX=o.originalEvent.touches[0].pageX,o.localY=o.originalEvent.touches[0].pageY,o.clientX=o.originalEvent.touches[0].pageX,o.clientY=o.originalEvent.touches[0].pageY,a.x=o.pageX,a.y=o.pageY,clearTimeout(l)),o.button!==f&&_(o,t,e,e.pressedMouseMoveEvent),i&&o.preventDefault()},p=function(s){void 0===s.button&&(s.button=0),(Modernizr.touch||s.originalEvent.touches)&&(s.pageX=a.x,s.pageY=a.y,s.localX=a.x,s.localY=a.y,clearTimeout(l)),TradingView.mousePressed=!1,$(document.body).off("mousemove.chartgui"),$(document.body).off("mouseup.chartgui"),Modernizr.touch||s.originalEvent.touches?($(document.body).off("touchmove.chartgui"),$(document.body).off("touchend.chartgui"),m(s)):($(document.body).off("mousemove.chartgui touchmove.chartgui"),$(document.body).off("mouseup.chartgui touchend.chartgui")),s.button!==f&&(_(s,t,e,e.mouseUpEvent),++o,n&&o>1?(_(s,t,e,e.mouseDoubleClickEvent),r()):_(s,t,e,e.mouseClickEvent)),i&&s.preventDefault(),Modernizr.touch&&m(s)},Modernizr.touch?($(document.body).off("touchmove.chartgui"),$(document.body).off("touchend.chartgui"),$(document.body).on("touchmove.chartgui",d),$(document.body).on("touchend.chartgui",p),l=setTimeout(function(){v(c)},h)):($(document.body).off("mousemove.chartgui touchmove.chartgui"),$(document.body).off("mouseup.chartgui touchend.chartgui"),$(document.body).on("mousemove.chartgui touchmove.chartgui",d),$(document.body).on("mouseup.chartgui touchend.chartgui",p)),TradingView.mousePressed=!0,c.button!==f&&(_(c,t,e,e.mouseDownEvent),n||(o=0,n=window.setTimeout(r,s))),i){c.preventDefault();try{window.focus()}catch(u){}}},t.on("touchcancel",function(){clearTimeout(l)}),Modernizr.touch?(t.on("touchstart.chartgui",c),t.on("touchstartoutside mousedownoutside",function(i){_(i,t,e,e.mouseDownOutsideEvent,!0)}),t.on("gesturestart",function(i){_(i,t,e,e.gestureStartEvent),clearTimeout(l)}),t.on("gesturechange",function(i){i.scale=i.originalEvent.scale,_(i,t,e,e.gestureChangeEvent)}),t.on("gestureend",function(i){_(i,t,e,e.gestureEndEvent)})):(t.on("mousedown.chartgui touchstart.chartgui",c),t.on("touchstartoutside  mousedownoutside",function(i){_(i,t,e,e.mouseDownOutsideEvent,!0)}),navigator.msPointerEnabled&&window.MSGesture&&(d=new MSGesture,p=!1,u=1,g=t.get(0),d.target=g,g.gesture=d,g.gesture.pointerType=null,g.pointers=[],d.pointerType=null,t.on("pointerdown",function(t){if(t.target===this)if(null===this.gesture.pointerType)this.gesture.target=g,this.gesture.addPointer(t.originalEvent.pointerId),this.gesture.pointerType=t.originalEvent.pointerType;else if(t.originalEvent.pointerType===this.gesture.pointerType)this.gesture.addPointer(t.originalEvent.pointerId);else{var e=new MSGesture;e.target=t.originalEvent.target,t.originalEvent.target.gesture=e,t.originalEvent.target.gesture.pointerType=t.originalEvent.pointerType,t.originalEvent.target.gesture.addPointer(t.originalEvent.pointerId)}}),t.on("MSGestureChange",function(i){var o=1*(i.originalEvent.scale-1)+1;i.scale=u*=o,p||1===i.originalEvent.scale||(p=!0,_(i,t,e,e.gestureStartEvent)),p&&_(i,t,e,e.gestureChangeEvent)}),t.on("MSGestureEnd",function(i){p=!1,u=1,_(i,t,e,e.gestureEndEvent)}))),m=function(o){t.off("mousemove.chartgui touchmove.chartgui"),_(o,t,e,e.mouseLeaveEvent),i&&o.preventDefault()},t.mouseleave(m),v=function(o){_(o,t,e,e.contextMenuEvent),i&&o.preventDefault()},t.contextMenu&&t.contextMenu(v)},e.setMouseEventHandler=g,m=function(t){var e=t.offset(),i=t.width(),o=t.height(),n=new l(e.left,e.top,i,o);return n},e.clientRect=m,v=function(t){var e=0,i=0;do e+=t.offsetLeft,i+=t.offsetTop,t=t.offsetParent;while(t);return{left:e,top:i}},e.offsetPosition=v,y=function(t){var e=$("<span class='tvcolorpicker-container'>").appendTo(t),i=($("<div class='tvcolorpicker-transparency'>").appendTo(e),$("<input>").appendTo(e).tvcolorpicker());return i.on("change",function(){$(this).css("border-color",TradingView.generateLowBrightnessColor($(this).val()||TradingView.defaultColorPickersBorder))}),TVSettings&&(i.tvcolorpicker.setCustomColors=TVSettings.setJSON("pickerCustomColors",[]),i.bind("customcolorchange",function(t,e){TVSettings.setJSON("pickerCustomColors",e)})),e},e.addColorPicker=y,w=function(){var t=i(51).Combobox;return new t([{value:CanvasEx.LINESTYLE_SOLID,html:'<div class="linestyle solidline"/>'},{value:CanvasEx.LINESTYLE_DOTTED,html:'<div class="linestyle dottedline"/>'},{value:CanvasEx.LINESTYLE_DASHED,html:'<div class="linestyle dashedline"/>'}])},e.createLineStyleEditor=w,b=function(){return $('<select><option value="'+CanvasEx.MARKLOC_ABOVEBAR+'">'+$.t("Above Bar")+'</option><option value="'+CanvasEx.MARKLOC_BELOWBAR+'">'+$.t("Below Bar")+'</option><option value="'+CanvasEx.MARKLOC_TOP+'">'+$.t("Top")+'</option><option value="'+CanvasEx.MARKLOC_BOTTOM+'">'+$.t("Bottom")+'</option><option value="'+CanvasEx.MARKLOC_ABSOLUTE+'">'+$.t("Absolute")+"</option></select>")},e.createShapeLocationEditor=b,S=function(){var t,e,o,n=i(54).StudyPlotShapes,s="<select>",r=Object.keys(n.Data);for(t=0;t<r.length;++t)e=r[t],o=n.Data[e],s+='<option value="'+o.id+'">'+o.guiName+"</option>";return s+="</select>",$(s)},e.createShapeStyleEditor=S,T=function(){return $('<div class="linewidth-slider">').slider({min:1,max:4,step:1})},e.createLineWidthEditor=T,C=function(){var t=$("<input type='checkbox' class='visibility-switch'/>");return t},e.createVisibilityEditor=C,x=function(){var t=$("<input/>");return t.attr("type","text"),t},e.createTextEditor=x,P=function(){var t=i(51).Combobox;return new t([{value:CanvasEx.TEXTPOS_TOPLEFT,html:$.t("Top Left")},{value:CanvasEx.TEXTPOS_TOPCENTER,html:$.t("Top Center")},{value:CanvasEx.TEXTPOS_TOPRIGHT,html:$.t("Top Right")},{value:CanvasEx.TEXTPOS_MIDDLELEFT,html:$.t("Middle Left")},{value:CanvasEx.TEXTPOS_MIDDLECENTER,html:$.t("Middle Center")},{value:CanvasEx.TEXTPOS_MIDDLERIGHT,html:$.t("Middle Right")},{value:CanvasEx.TEXTPOS_BOTTOMLEFT,html:$.t("Bottom Left")},{value:CanvasEx.TEXTPOS_BOTTOMCENTER,html:$.t("Bottom Center")},{value:CanvasEx.TEXTPOS_BOTTOMRIGHT,html:$.t("Bottom Right")}])},e.createTextPosEditor=P,L=function(){var t=$("<select />");return $("<option value='"+CanvasEx.HHISTDIR_LEFTTORIGHT+"'>"+$.t("Left")+"</option>").appendTo(t),$("<option value='"+CanvasEx.HHISTDIR_RIGHTTOLEFT+"'>"+$.t("Right")+"</option>").appendTo(t),t},e.createHHistDirectionEditor=L,k=function(t){var e=$('<div class="transparency-slider"><div class="gradient"></div></div>').slider({min:0,max:100,step:1}),i=["-moz-linear-gradient(left, %COLOR 0%, transparent 100%)","-webkit-gradient(linear, left top, right top, color-stop(0%,%COLOR), color-stop(100%,transparent))","-webkit-linear-gradient(left, %COLOR 0%,transparent 100%)","-o-linear-gradient(left, %COLOR 0%,transparent 100%)","linear-gradient(to right, %COLOR 0%,transparent 100%)"];return e.updateColor=function(t){var o=e.find(".gradient");$.browser.msie?o.css("filter","progid:DXImageTransform.Microsoft.gradient(startColorstr='"+t+"', EndColor=0, GradientType=1)"):i.forEach(function(e){o.css("background-image",e.replace(/%COLOR/,t))})},t?(e.updateColor(t.val()||"black"),t.on("change",function(t){e.updateColor(t.target.value)})):e.updateColor("black"),e},e.createTransparencyEditor=k,E=function(){function t(t,e){this.mouseFlag=!1,this.accuracy=2,this.value=1,this.colorInput=t,this.$el=$('<div class="transparency-slider wide-slider ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all">'),e&&this.$el.hide(),this.$gradient=$('<div class="gradient">').appendTo(this.$el),this.$roller=$('<a href="#" class="ui-slider-handle ui-state-default ui-corner-all without-shift-handle-left">').appendTo(this.$gradient)}return t.prototype.calculateRollerPosition=function(t){var e=t.pageX,i=this.$gradient.offset().left,o=e-i,n=this.$gradient.width();return o>n?100:o<0?0:~~(o/n*100)},t.prototype.toRgb=function(t){var e;return~t.indexOf("#")?t:(e=t.match(/[0-9.]+/g),e?"rgb("+e.slice(0,3).join(", ")+")":"rgb(127, 127, 127)")},t.prototype.setValue=function(t){return 1===t?void(this.value=t):void(this.value=t.toFixed(this.accuracy))},t.prototype.updateRoller=function(){this.$roller.css("left",100-100*this.value+"%")},t.prototype.rollerMoveHandler=function(t){if(this.mouseFlag){var e=this.calculateRollerPosition(t);this.setValue((100-e)/100),$(this).trigger("change",[this.val()]),this.$roller.css("left",e+"%")}t.preventDefault()},t.prototype.mouseupHandler=function(t){this.mouseFlag&&(this.mouseFlag=!1,$(this).trigger("afterChange",[this.val()]))},t.prototype.initEvents=function(){var t=function(t){return this.rollerMoveHandler(t)}.bind(this),e=function(i){return $(document).off("mousemove mouseup",t),$(document).off("mouseup",e),this.mouseupHandler(i)}.bind(this);this.$el.on("mousedown",function(i){this.mouseFlag=!0,$(document).on("mousemove mouseup",t),$(document).on("mouseup",e),i.preventDefault()}.bind(this)),this.colorInput.on("change",function(t){this.updateColor()}.bind(this))},t.prototype.removeEvents=function(){},t.prototype.updateColor=function(){var t=this.colorInput.val()||"black",e=this.toRgb(t),i=["-moz-linear-gradient(left, %COLOR 0%, transparent 100%)","-webkit-gradient(linear, left top, right top, color-stop(0%,%COLOR), color-stop(100%,transparent))","-webkit-linear-gradient(left, %COLOR 0%,transparent 100%)","-o-linear-gradient(left, %COLOR 0%,transparent 100%)","linear-gradient(to right, %COLOR 0%,transparent 100%)"];$.browser.msie?this.$gradient.css("filter","progid:DXImageTransform.Microsoft.gradient(startColorstr='"+e+"', EndColor=0, GradientType=1)"):i.forEach(function(t){this.$gradient.css("background-image",t.replace(/%COLOR/,e))}.bind(this))},t.prototype.val=function(t){return t&&(this.setValue(+t),this.updateRoller()),this.value},function(e,i){return new t(e,i)}}(),TradingView.getTransparencySlider=E,e.getTransparencySlider=E,I=function(){var t=$("<select />"),e=i(54).StudyConsts;return $("<option value='"+e.PLOT_LINE+"'>"+$.t("Line")+"</option>").appendTo(t),$("<option value='"+e.PLOT_LINE_WITH_BREAKS+"'>"+$.t("Line With Breaks")+"</option>").appendTo(t),$("<option value='"+e.PLOT_HISTOGRAM+"'>"+$.t("Histogram")+"</option>").appendTo(t),$("<option value='"+e.PLOT_CROSS+"'>"+$.t("Cross",{context:"chart_type"})+"</option>").appendTo(t),$("<option value='"+e.PLOT_AREA+"'>"+$.t("Area")+"</option>").appendTo(t),$("<option value='"+e.PLOT_AREA_WITH_BREAKS+"'>"+$.t("Area With Breaks")+"</option>").appendTo(t),$("<option value='"+e.PLOT_COLUMNS+"'>"+$.t("Columns")+"</option>").appendTo(t),$("<option value='"+e.PLOT_CIRCLES+"'>"+$.t("Circles")+"</option>").appendTo(t),t},e.createPlotEditor=I,A=function(){var t=$("<select>");return $("<option value='open'>"+$.t("Open")+"</option>").appendTo(t),$("<option value='high'>"+$.t("High")+"</option>").appendTo(t),$("<option value='low'>"+$.t("Low")+"</option>").appendTo(t),$("<option value='close'>"+$.t("Close")+"</option>").appendTo(t),$("<option value='hl2'>"+$.t("(H + L)/2")+"</option>").appendTo(t),$("<option value='hlc3'>"+$.t("(H + L + C)/3")+"</option>").appendTo(t),$("<option value='ohlc4'>"+$.t("(O + H + L + C)/4")+"</option>").appendTo(t),t},e.createPriceSourceEditor=A,V=function(t){$("<img>").attr("src",t)},e.cacheUrl=V,M=function(t){var e=TradingView.themeResourceFullPath(t);return"<img src='"+e+"' style='display:block'/>"},e.themeImageHTML=M,D=function(t,e,i,o,n){var s=o||250,r=$.easing[n]||$.easing.easeOutCubic,a=0,l=Date.now(),h=function(o){var n=o?o<1e12?Date.now():o:Date.now(),c=n-l,d=Math.min(t,r(null,c,0,t,s)),p=d-a;a=d,e(p),c>=s?"function"==typeof i&&i():requestAnimationFrame(h)};requestAnimationFrame(h)},e.animate=D,B=function(e,i,o){return this._options=o=o||{},this._name=e,this._container=$('<div class="favored-list-container" />'),o.addClass&&this._container.addClass(o.addClass),this._quick_container=$('<div class="quick" />').appendTo(this._container),this._submenu=$('<span class="submenu">'+(this._options.submenuHtml||"")+"<i></i></span>").appendTo(this._container),o.tooltip&&(this._submenu.attr("title",o.tooltip),o.addTooltipClass&&this._submenu.addClass(o.addTooltipClass)),this._activeButton=null,this._onChange=new t,this._onSelect=new t,this._onResize=new t,this._onOpen=new t,this._load(i),O(this._container,null,{direction:"down",svg:null==o.svg||o.svg,reverse:!0,addClass:"narrow favored-list"+(o.popupAddClass?" "+o.popupAddClass:""),event:"popup-menu",popupSpacing:o.popupSpacing}),this._submenu.on("click",this._openMenu.bind(this)),$.browser.msie||TVXWindowEvents.on(e+"-change",$.proxy(this,"_onChangeInAnotherTab")),this},e.FavoredList=B,B.prototype._openMenu=function(){this._submenu.parent().hasClass("active")||this._onOpen.fire(),this._submenu.trigger("popup-menu",[this._data])},B.prototype._onChangeInAnotherTab=function(){this.reload(this._data)},B.prototype.reload=function(t){this._quick_container.empty(),this._load(t)},B.prototype._convertQuicksToData=function(t){return this._quicks.forEach(function(e){var i=!1;t.forEach(function(t){if(t.id==e)return i=!0,!1}),i||t.push({id:e,title:e,favoriteButton:{icon:{},title:e,addClass:"apply-common-tooltip"}})}),t},B.prototype._load=function(t){var e=this;this._options.showJustDefaultQuicks?this._quicks=this._options.defaultFavorites||[]:this._options.notShowQuicks?this._quicks=[]:this._quicks=TVSettings.getJSON(this._name+".quicks",this._options.defaultFavorites||[],!0),this._list=[],o.enabled("charting_library_base")||(t=this._convertQuicksToData(t)),$.grep(t,function(t,e){return!t.separator}).forEach(function(t,i){var o,s,r={index:i,data:t,svg:t.svg&&$(t.svg).clone(),toQuickButton:$('<span class="to-quick" title=""></span>').append(n("star","16x16")),toggleFavorite:function(t,i){var o=void 0!==t?t:!this.isFavorite();o?this.markFavorite():this.unmarkFavorite(),e._toggleFavorite(r,o,i)},markFavorite:function(){this.toQuickButton&&this.toQuickButton.attr("title",$.t("Remove from favorites")).addClass("quicked")},unmarkFavorite:function(){this.toQuickButton&&this.toQuickButton.attr("title",$.t("Add to favorites")).removeClass("quicked")},isFavorite:function(){return e._quicks.indexOf(t.id)>-1},active:function(){return this.data.active()},drop:function(){return this.data.drop()}};e._options.notShowQuicks&&$.extend(r,{toQuickButton:null}),r.data.toQuickButtonStyle&&r.toQuickButton&&r.toQuickButton.css(r.data.toQuickButtonStyle),e._list.push(r),o={action:function(){e._change(r)},buttons:[],active:e._options.notShowActive?function(){return!1}:function(){return e._active&&r===e._active}},e._options.notShowQuicks||o.buttons.push({el:r.toQuickButton,handler:function(t){r.toggleFavorite(),t.preventDefault(),t.stopPropagation()}}),"function"==typeof r.data.drop&&(s=e._options.notShowQuicks?' style="right: 7px;"':"",o.buttons.push({el:$('<span class="delete" title="'+$.t("Delete")+'"'+s+"></span>"),handler:function(t){r.drop(),t.stopPropagation()}})),$.extend(t,o),r.toggleFavorite(r.isFavorite(),!0)}),this._data=t,this._options.notShowActive||this._addActive(this._list[0]),this._onResize.fire()},B.prototype._toggleFavorite=function(t,e,i){if(!this._options.notShowQuicks||this._options.showJustDefaultQuicks){if(e){t.favorite_button=this._createButton(t,this._quick_container);var o=this._lastFavoriteButton(t);o?t.favorite_button.insertAfter(o.favorite_button):t.favorite_button.prependTo(this._quick_container)}else i||this._removeButton(t);i||(e?this._quicks.indexOf(t.data.id)==-1&&this._quicks.push(t.data.id):this._quicks.indexOf(t.data.id)>-1&&this._quicks.splice(this._quicks.indexOf(t.data.id),1),this._saveFavorite(),this._markActive(),this._onResize.fire())}},B.prototype._lastFavoriteButton=function(t){for(var e=t.index-1;e>=0;e--)if(this._list[e]&&this._list[e].favorite_button)return this._list[e]},B.prototype._saveFavorite=function(){this._options.notShowQuicks||(TVSettings.setJSON(this._name+".quicks",this._quicks),TVXWindowEvents.emit(this._name+"-change"))},B.prototype._createButton=function(t){var e,i=this,o=t.data.favoriteButton,n=$("<span></span>").data("item",t);return o.addClass&&n.addClass(o.addClass),o.text&&n.text(t.text),o.title&&n.prop("title",o.title),t.svg&&(e=$(t.svg).clone().appendTo(n)),n.on("click",function(e){i._change(t),0===i._quicks.length&&i._openMenu(),e.preventDefault()}),n},B.prototype._removeButton=function(t){t.favorite_button&&(t.favorite_button.remove(),t.favorite_button=null)},B.prototype._markActive=function(t){var e,i,o;this._options.notShowActive||(e=this,this._active&&(t=this._active,t.isFavorite()?(o=e._quick_container.find(".just_active"),this._btnToggleActiveView(o,!1)):(i=this._addActive(t),0!==this._quicks.length&&this._btnToggleActiveView(i,!0))),$.map(this._list,function(i){t!==i||0===e._quicks.length?e._btnToggleActiveView(i.favorite_button,!1):i.favorite_button&&e._btnToggleActiveView(t.favorite_button,!0)}),i&&i.hasClass("selected")?this._container.addClass("not-favored-active"):this._container.removeClass("not-favored-active"))},B.prototype._btnToggleActiveView=function(t,e){var i,o;t&&(o=t.data("item"),o&&o.data&&o.svg&&(i=o.svg),e?t.addClass("selected"):t.removeClass("selected"))},B.prototype._addActive=function(t){return this._quick_container.find(".just_active").remove(),this._createButton(t).appendTo(this._quick_container).addClass("just_active")},B.prototype._clearActive=function(){this._quick_container.find(".just_active").remove()},B.prototype._clearActive=function(){},B.prototype._setActive=function(t){return this._active!==t&&(this._active=t,this._markActive(),!0)},B.prototype._change=function(t){return this._onSelect.fire(t.data.id),!!this._setActive(t)&&void this._onChange.fire(t.data.id)},B.prototype.element=function(){return this._container},B.prototype._getItemByValue=function(t){for(var e in this._list)if(this._list[e].data.id==t)return this._list[e];throw Error("undefined value "+t+" in FavoredList")},B.prototype.onChange=function(){return this._onChange},B.prototype.onSelect=function(){return this._onSelect},B.prototype.onResize=function(){return this._onResize},B.prototype.onOpen=function(){return this._onOpen},B.prototype.setValue=function(t){var e=this._getItemByValue(t);this._setActive(e)},B.prototype.value=function(t){return this._active?this._active.data.value:void 0},B.prototype.removeById=function(t,e){var i=$.grep(this._data,function(e){return e.id!=t});this._list.forEach(function(e){e.data.id==t&&this._toggleFavorite(e,!1)},this),this.reload(i),"function"==typeof e&&e()},O=function(t,e,i){var o,n,s,r,a,l;t=$(t),i=i||{},o=(i.event||"click")+".popup-menu",i.hideEvent&&(n=i.hideEvent+".popup-menu"),s=function(){},r=s,a={},l=function(o,n,l){function h(e){var i=$(e.target).parents().andSelf();i.is(u)||i.is(t)||i.is(".charts-popup-tab-headers, .charts-popup-itemheader")||r()}function c(t){var e=$(t.target).parents().andSelf();e.is(".charts-popup-tab-headers, .charts-popup-itemheader")||i.notCloseOnButtons&&e.is(".icon-save, .icon-delete")||r()}function d(e,o,n){var s,r,a,l,h,c,p,_,f,g,m,v,y,w,b,S,T;if(e instanceof O.TabGroup){if(!e.tabs||!e.tabs.length)return;return 1!==e.tabs.length||e.tabs[0].title?(s=$('<div class="charts-popup-tab-group"></div>').appendTo(n),r=$('<div class="charts-popup-tab-headers"></div>').appendTo(s),a=null,void $.each(e.tabs||[],function(t,i){var o,n;i.items&&i.items.length&&(o=$('<div class="charts-popup-tab"></div>').hide().appendTo(s),$.each(i.items,function(){d(this,void 0,o)}),n=$('<span class="charts-popup-tab-header">').append($('<a href="javascript://" class="charts-popup-tab-header-label">').text(i.name)).appendTo(r),n.on("click",function(t){n.is(".active")||(r.find(".charts-popup-tab-header.active").removeClass("active"),n.addClass("active"),s.find(".charts-popup-tab").hide(),o.show(),t&&t.preventDefault(),"function"==typeof e.onChange&&e.onChange.call(e,i.name))}),a&&!i.active||(a=n,r.find(".charts-popup-tab-header.active").removeClass("active"),n.addClass("active"),s.find(".charts-popup-tab").hide(),o.show()))})):void $.each(e.tabs[0].items,function(){d(this,void 0,n)})}return e instanceof O.Group?(l=$('<div class="charts-popup-group"></div>').appendTo(n),e.title&&(h=$('<div class="charts-popup-itemheader"></div>').text(e.title).prepend($('<span class="charts-popup-itemheader-icon"></span>')),e.collapsible&&(l.addClass("charts-popup-group-collapsible"),l.toggleClass("collapsed",e.collapsed),h.on("click",function(){l.toggleClass("collapsed"),"function"==typeof e.onChange&&e.onChange(l.hasClass("collapsed")),u.height()==parseInt(u.css("max-height"))?u.addClass("popup-menu-scroll-y"):u.height()<parseInt(u.css("max-height"))&&u.removeClass("popup-menu-scroll-y")})),l.append(h)),void $.each(e.items,function(t){d(this,1,l)})):e instanceof O.Header?void n.append($('<div class="charts-popup-itemheader"></div>').text(e.title)):e.separator?(c=$('<span class="separator"></span>'),void n.append(c)):(c=$('<a class="item" href="#">'),"function"==typeof e.deleteAction&&"function"==typeof e.saveAction&&c.addClass("item-twobuttons"),e.url&&c.attr("href",e.url),e.target&&c.attr("target",e.target),o||c.addClass("first"),"function"==typeof e.active?e.active(e)&&c.addClass("active"):e.active&&c.addClass("active"),e.addClass&&c.addClass(e.addClass),e.addData&&c.data(e.addData),e.disabled&&c.addClass("disabled"),"function"==typeof e.action&&(p=e.action,_=function(t){var i=$(t.target).parents().andSelf();i.is(w)||i.is(S)||(p.apply(c,arguments),!e.url&&t&&"function"==typeof t.preventDefault&&t.preventDefault())},i.upAction?c.bind("mouseup",_):c.bind("click",_)),e.date?(f=$('<span class="title"></span>').appendTo(c),$('<span class="date"></span>').text(e.date||"").appendTo(c)):e.icon&&!i.svg?(g=$('<span class="icon"></span>').appendTo(c),g.css("background-image",e.icon.image||""),e.icon.offset&&g.css("background-position","string"==typeof e.icon.offset?e.icon.offset:e.icon.offset.x+"px "+e.icon.offset.y+"px"),f=$('<span class="title"></span>').appendTo(c)):i.svg===!0&&e.svg?(i.wrapIcon?c.append($('<span class="icon-wrap">').append(e.svg)):c.append(e.svg),f=$('<span class="title"></span>').appendTo(c)):f=$('<span class="title-expanded"></span>').appendTo(c),e.html?f.html(e.html):f.text(e.title||""),m=$('<span class="shortcut"></span>').appendTo(c),e.shortcut&&m.text(e.shortcut.keys),"function"==typeof e.deleteAction&&(v=e.deleteAction,y=e.deleteAction.title||$.t("Delete"),w=$('<span class="icon-delete">'),w.attr("title",y),w.on("click",function(t){v.apply(c,arguments),t.preventDefault()}),c.append(w)),"function"==typeof e.saveAction&&(b=e.saveAction,y=e.saveAction.title||$.t("Save"),S=$('<span class="icon-save">'),S.attr("title",y),S.on("click",function(t){b.apply(c,arguments),t.preventDefault()}),c.append(S)),e.buttons instanceof Array&&e.buttons.length&&e.buttons.forEach(function(t){t.el instanceof $||(t.el=$(t.el)),t.el.appendTo(c),t.handler&&t.el.on("click",function(e){t.handler.apply(c,arguments)})}),void 0!==e.counter&&(T=e.counterBlue?"blue":"",$('<span class="counter"></span>').text(e.counter+"").addClass(T).appendTo(c)),n.append(c),void t.data("popup-menu",n))}var p,u,_,f,g,m,v,y,w,b,S,T,C,x,P,L,k,E,I,A,V,M,D,B,R,z=n||e;if("function"==typeof z&&(z=z()),$(this).hasClass("open")||$(this).hasClass("active"))return o.preventDefault(),r(),void(p=a.scrollTop);switch(r=function(){a.scrollTop=u.scrollTop(),u.remove(),t.removeClass("active open"),t.data("popup-menu",null),$(document).off("click",c),$(document).off("mousedown",h),Modernizr.touch&&$(document).off("touchstart.chartgui",h),$(document).off("selectstart.popup-menu"),r=s,i.onRemove&&i.onRemove()},t.addClass("active open"),u=$('<div class="charts-popup-list">'),i.addClass&&u.addClass(i.addClass),_=u,i.listInner&&(_=$('<div class="list-inner">').appendTo(_)),i.listTable&&(_=$('<div class="list-table">').appendTo(_)),$.each(z,function(t){d(this,t,_)}),setTimeout(function(){$(document).on("click",c),$(document).on("mousedown",h),Modernizr.touch&&$(document).on("touchstart.chartgui",h)},0),i.upAction&&$(document).on("selectstart.popup-menu",function(){return!1}),u.appendTo(document.body),f=$(window).width(),g=Math.min($(window).height(),$("body").height()),m=t.outerWidth(),v=t.outerHeight(),y=t.offset(),p=$(window).scrollTop()||0,y.top-=p,y.top=Math.round(y.top),y.left=Math.round(y.left),w=u.outerWidth(),b=u.outerHeight(),S=void 0!==i.viewportSpacing?i.viewportSpacing:10,T=i.popupSpacing?~~i.popupSpacing:1,C=i.popupDrift?~~i.popupDrift:0,x=b-u.height(),P=i.direction?i.direction:"down",L=!!i.reverse,"down"==P&&(k=g-y.top-v-T-S-x,E=y.top-T-S-x,k<Math.max(b||0,100)&&E>k&&(P="up")),P){case"down":case"up":"down"==P?u.css("top",y.top+v+T+"px"):u.css("bottom",g-y.top+T+"px").css("top","auto"),L?(I=Math.max(y.left+C+m-w,S),u.css("left",Math.max(y.left+C+m-w,S)+"px").css("right","auto")):u.css("left",y.left+C+"px").css("right","auto");break;case"right":case"left":T=Math.max(T,4),"right"==P?u.css("left",Math.floor(y.left+m+T)+"px").css("right","auto"):u.css("left",Math.floor(Math.max(y.left-w-T,S))+"px").css("right","auto"),L?u.css("top",Math.floor(Math.max(y.top+C+v-b,S))+"px"):u.css("top",Math.floor(y.top+C)+"px")}for(u.show(),A=y.top,"up"==P||{left:1,right:1}[P]&&L?"up"!==P?A+=v:A-=v+T+x+S:A=g-A-v-2*T-x,u.height()>A&&u.addClass("popup-menu-scroll-y"),u.css("max-height",A+"px"),i.careRightBorder&&(V=f+$(window).scrollLeft(),parseInt(u.css("left"))+u.width()+S>V&&u.css("left",V-u.width()-S+"px").css("right","auto")),i.careBottomBorder&&parseInt(u.css("top"))+u.height()+S>g+p&&u.css("top",g-u.height()-S+p+"px"),D=t.parents().andSelf(),B=D.size();B--;)if("fixed"===D.eq(B).css("position")){M=D.eq(B);break}M&&(R=u.offset(),u.css({position:"fixed",left:R.left-$(document).scrollLeft(),right:"auto"})),u[0].scrollHeight>u.height()&&u.addClass("popup-with-scroll"),o&&o.preventDefault()},o&&t.bind(o,l),n&&t.bind(n,function(){r()}),i.runOpened&&l()},O.TabGroup=function N(t){return this instanceof N?(t=t||{},this.tabs=[],void("function"==typeof t.onChange&&(this.onChange=t.onChange))):new N(t)},O.TabGroup.prototype.appendTab=function(t,e,i){if(null==t?t="":t+="",e||(e=[]),i||(i={}),!Array.isArray(e))throw new TypeError("items must be an array");return this.tabs.push({name:t,items:e,active:!!i.active}),e},O.Header=function F(t){return this instanceof F?void(this.title=t):new F(t)},O.Group=function H(t){return this instanceof H?(t=t||{},this.items=[],this.title=null==t.title?"":t.title+"",this.collapsible=!!t.collapsible,this.collapsed=!!t.collapsed,
void("function"==typeof t.onChange&&(this.onChange=t.onChange))):new H(t)},O.Group.prototype.push=function(){this.items.push.apply(this.items,arguments)},e.bindPopupMenu=O,R=function(t){t=$(t),t.unbind(".popup-menu"),t.removeData("popup-menu")},e.unbindPopupMenu=R,z=function(t,e,i,o,n,s){var r,a,l,h,c,d=e.title?e.title:$.t("Save New Chart Layout"),p=TVDialogs.createDialog(d),u=function(){var i,n,s=p.find('input[name="name"]'),r=s.val(),a=[];if(o)for(i=0;i<o.length;i++)"bool"===o[i].type&&(n=p.find('input[name="'+o[i].name+'"]'),a.push(n[0].checked));return r?(t(r,a),TVDialogs.destroy(d)):(TVDialogs.showError(e.error||$.t("Please enter chart name"),TVDialogs.get(d)),s.focus()),!1};if(i=i||"",s=s||{},s.inputValue=s.inputValue?s.inputValue:"",p.css("width","400px"),p.find("._tv-dialog-content").html('<div class="main"><form><p>'+(e.label?$.t(e.label):$.t("Chart name"))+':</p><p class="_tv-dialogs-name"><input type="text" name="name" maxlength="'+i+'"/></p><p class="_tv-dialog-right"></p></form></div>').find("input").val(s.inputValue),s.inputSelectEnable&&"boolean"==typeof s.inputSelectEnable&&p.find('input[name="name"]').select(),o)for(r=p.find("._tv-dialog-right"),a=0;a<o.length;a++)"bool"===o[a].type&&(l=$('<p class="_tv-dialogs-name"></p>'),h=o[a].hint?$('<div class="_tv-dialogs-label-hint"></div>').blueTooltip($.t(o[a].hint),"bottom"):null,c=$('<label><input type="checkbox" style="vertical-align:top;margin-top:2px" name="'+o[a].name+'"/> '+$.t(o[a].title)+"</label>"),l.append(c,h).insertBefore(r));p.find("form").submit(u),$('<a class="_tv-button wide ok">'+$.t("OK")+"</a>").click(u).css({"margin-right":"5px"}).appendTo(p.find("._tv-dialog-right")),$('<a class="_tv-button wide cancel">'+$.t("Cancel")+"</a>").click(function(){TVDialogs.destroy(d)}).appendTo(p.find("._tv-dialog-right")),"function"==typeof n&&n(p),TVDialogs.positionDialog(p,{left:$(window).width()/2-p.width()/2,top:$(window).height()/2-p.height()/2}),TVDialogs.applyHandlers(p),p.find('input[name="name"]').focus()},e.showChartNameDialog=z}).call(e,i(32),i(1),i(26))},function(t,e,i){"use strict";function o(t){return this.jqObj=null,this.data=t,this.init(),this._prepareValue(),this._prepareCallback(),this._prepareChildren(),this._applyAttributes(),this.jqObj}function n(t,e){this.value=t,this.html=e||"",this.jqItem=this._render()}function s(t){this._value=null,this.items=[],this.width=0,this.jqWrapper=null,this.jqSwitcher=null,this.jqTitle=null,this.jqIcon=null,this.jqItems=null,this.callback=null,this._init(),this.addItems(t),this.joinParts()}var r=i(52);o.selectOptions={type:"option",value:null,html:null},o.optionsData={radiogroup:{type:"radio",name:null,value:null,label:null},select:o.selectOptions,"select-one":o.selectOptions,"select-multiple":o.selectOptions},o.customTypes=["radiogroup","fontpicker","colorpicker","combobox"],o.prototype._tagIsInput=function(t){return jQuery.inArray(this.data.type,["text","radio","checkbox","hidden","reset","image","file"])!=-1},o.prototype.init=function(){this._tagIsInput()?this.jqObj=r.create("input",{name:this.data.name,type:this.data.type}):this.jqObj=r.create(this.data.type,{name:this.data.name})},o.prototype._eventIsKeyUp=function(){return jQuery.inArray(this.data.type,["text","textarea"])!=-1},o.prototype._eventIsClick=function(){return jQuery.inArray(this.data.type,["checkbox","radio","option"])!=-1},o.prototype._eventIsChange=function(){return jQuery.inArray(this.data.type,["select","select-one","select-multiple","radiogroup"])!=-1},o.prototype._prepareCallback=function(){this.data.callback&&(this._eventIsKeyUp()?this.jqObj.keyup(this.data.callback):this._eventIsClick()?this.jqObj.click(this.data.callback):this._eventIsChange()&&this.jqObj.bind("change",this.data.callback),delete this.data.callback)},o.prototype._childTag=function(){return{select:"option","select-one":"option","select-multiple":"option",radiogroup:"radio"}[this.data.type]},o.prototype._inheritedProperties=function(){var t={type:this._childTag()};return"radiogroup"==this.data.type&&(t.name=this.data.name),t},o.prototype._extendChildProps=function(t){var e=jQuery.extend(this._inheritedProperties(),t);return this.data.value==t.value&&(e.selected=!0),e},o.prototype._prepareChildren=function(){if(this.data.options){var t=this;jQuery.each(this.data.options,function(e,i){t.jqObj.append(new o(t._extendChildProps(i)))})}},o.prototype.isCustom=function(){return jQuery.inArray(this.data.type,this.customTypes)!=-1},o.prototype._isStoringValue=function(){return jQuery.inArray(this.data.type,["text","textarea","option","radio","checkbox"])!=-1},o.prototype._htmlAsValue=function(){return"textarea"==this.data.type},o.prototype._valAsValue=function(){return jQuery.inArray(this.data.type,["text","checkbox","radio","option","select","select-one","select-multiple"])},o.prototype._getControlValue=function(){return{checkbox:1}[this.data.type]||this.data.value},o.prototype._setControlValue=function(){this._valAsValue()?this.jqObj.val(this._getControlValue()):this._htmlAsValue()&&this.jqObj.html(this.data.value)},o.prototype._getCheckedAttr=function(){return{option:"selected",radio:"checked",checkbox:"checked"}[this.data.type]},o.prototype._setChecked=function(){this.data.selected&&this.jqObj.attr(this._getCheckedAttr(),!0)},o.prototype._setValue=function(){this._setControlValue(),o.isCheckable(this.data.type)&&this._setChecked()},o.prototype._prepareValue=function(){this._isStoringValue()&&this._setValue()},o.prototype._applyAttributes=function(){this.jqObj.attr(r.cleanAttributes(this.data))},o.value=function(t){return o.controlCheckable(t)?t.checked:t.value},o.isCheckable=function(t){return jQuery.inArray(t,["checkbox","radio","option"])!=-1},o.controlType=function(t){var e,i;return"string"==typeof t?t:(e=jQuery(t),i=null,e.attr("type")&&(i=e.attr("type"),jQuery.inArray(i,["textarea","text","select","select-one","select-multiple","submit"]))?i:e.attr("tagName"))},o.controlCheckable=function(t){return o.isCheckable(o.controlType(t))},o.controlToggleChecked=function(t,e){var o=i(53);return o.setAttr(t,"checked",e)},o.controlSetValue=function(t,e){if(o.controlCheckable(t))return o.controlToggleChecked(t,e);var n=i(53);return n.setAttr(t,"value",e)},o.currentOption=function(t){return t.options[t.selectedIndex]},o.currentOptionInnerHTML=function(t){var e=o.currentOption(t);return e.innerHTML},n.prototype.eq=function(t){return this.value===t},n.prototype.width=function(t){return this.jqItem.width()},n.prototype._render=function(t){var e=$("<span/>").append($(this.html).clone());return $('<div class="item"></div>').append(e)},n.prototype.render=function(t){return this.jqItem},n.prototype.select=function(t){t?this.jqItem.addClass("selected"):this.jqItem.removeClass("selected")},n.prototype.selectAndReturnIfValueMatch=function(t){return this.eq(t)?(this.select(!0),this):(this.select(!1),null)},s.prototype._init=function(){this._initWrapper(),this._initSwitcher(),this._initOptions()},s.prototype._initTitle=function(){this.jqTitle=$('<span class="title" />')},s.prototype._initIcon=function(){this.jqIcon=$('<span class="icon" />')},s.prototype._initOptions=function(){var t=i(53);this.jqItems=t.createPopup({"class":"items"})},s.prototype._initWrapper=function(){this.jqWrapper=$('<div class="custom-select" />'),this.jqWrapper.data({disable:this.disable.bind(this),enable:this.enable.bind(this)})},s.prototype._initSwitcher=function(){var t=this;this._initTitle(),this._initIcon(),this.jqSwitcher=$('<div class="switcher" />'),this.jqSwitcher.append(this.jqTitle),this.jqSwitcher.append($(this.jqIcon).clone()),this.opened=!1,this.jqSwitcher.click(function(e){t.toggleItems()}),t=this,$(document).click(function(e){$(e.target).closest(t.jqSwitcher).length||(!t.jqSwitcher.is(e.target)&&0===t.jqSwitcher.has(e.target).length||!t.jqItems.is(e.target)&&0===!t.jqItems.has(e.target).length)&&t.opened&&(t.jqItems.hide(),t.opened=!1,t.jqSwitcher.removeClass("open"),e.stopPropagation())})},s.prototype.toggleItems=function(){this.disabled()||(this.opened?(this.jqItems.hide(),this.jqSwitcher.removeClass("open"),this.opened=!1):(this.jqItems.show(),this.jqSwitcher.addClass("open"),this.opened=!0))},s.prototype.setWidth=function(){this.jqWrapper.width(this.width)},s.prototype.joinParts=function(){this.jqWrapper.append(this.jqSwitcher),this.jqWrapper.append(this.jqItems),this.jqWrapper.selectable(!1)},s.prototype.render=function(){return this.jqWrapper},s.prototype.selectItemByValue=function(t){var e=null;return $(this.items).each(function(i,o){var n=o.selectAndReturnIfValueMatch(t);n&&(e=n)}),e},s.prototype.setValue=function(t){if(this._value!=t){var e=this.selectItemByValue(t);this._value=t,this.jqTitle.html(e.html),this.change()}},s.prototype.change=function(t){return t?void(this.callback=t):void(this.callback&&this.callback.call(this))},s.prototype.value=function(){return this._value},s.prototype.val=function(t){return void 0!==t?void this.setValue(t):this.value()},s.prototype.addItems=function(t){var e=this;$(t).each(function(t,i){e.addItem(i.value,i.html)})},s.prototype.addItem=function(t,e){var i,o=this,s=new n(t,e);this.items.push(s),i=s.render(),i.click(function(){o.setValue(t),o.toggleItems()}),this.jqItems.append(i),null===this.value()&&this.setValue(t)},s.prototype.disable=function(){this._disabled=!0},s.prototype.enable=function(){this._disabled=!1},s.prototype.disabled=function(){return this._disabled},e.Input=o,e.Combobox=s},function(t,e){"use strict";var i={};i.renderAttributes=function(t){var e,i="";for(e in t)t[e]&&(i+=" "+e+'="'+t[e]+'"');return i},i.create=function(t,e){var i=$(document.createElement(t));return e&&(e.html&&(i.html(e.html),delete e.html),i.attr(e)),i},i.validAttributes=["abbr","accept-charset","accept","accesskey","action","align","alink","alt","archive","axis","background","bgcolor","border","cellpadding","cellspacing","char","charoff","charset","checked","cite","class","classid","clear","code","codebase","codetype","color","cols","colspan","compact","content","coords","data","datetime","declare","defer","dir","disabled","enctype","face","for","frame","frameborder","headers","height","href","hreflang","hspace","http-equiv","id","ismap","label","lang","language","link","longdesc","marginheight","marginwidth","maxlength","media","method","multiple","name","nohref","noresize","noshade","nowrap","object","onblur","onchange","onclick","ondblclick","onfocus","onkeydown","onkeypress","onkeyup","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onreset","onselect","onsubmit","onunload","profile","prompt","readonly","rel","rev","rows","rowspan","rules","scheme","scope","scrolling","selected","shape","size","span","src","standby","start","style","summary","tabindex","target","text","title","type","usemap","valign","value","valuetype","version","vlink","vspace","width"],i.validAttribute=function(t){return jQuery.inArray(t,i.validAttributes)!=-1},i.cleanAttributes=function(t){return jQuery.each(t,function(e,o){i.validAttribute(e)||delete t[e]}),t},t.exports=i},function(t,e,i){"use strict";var o=i(52),n=i(50).setMouseEventHandler,s={};s.createLabel=function(t,e,i){return o.create("label",$.extend(i,{html:e,"for":t}))},s.unbindContextMenu=function(t){t.contextMenu(function(t){return!1})},s.offsetX=function(t,e){return t.width()+e.pageX},s.offsetY=function(t,e){return t.height()+e.pageY},s.checkObjIsOutOfWindowX=function(t,e){var i,o=$(window).width()-s.offsetX(t,e);return o<0?(i=e.pageX+o,i>0?i:0):e.pageX},s.checkObjIsOutOfWindowY=function(t,e){var i,o=$(window).height()-s.offsetY(t,e);return o<0?(i=e.pageY+o,i>0?i:0):e.pageY},s.checkObjIsOutOfWindow=function(t,e){return{left:s.checkObjIsOutOfWindowX(t,e),top:s.checkObjIsOutOfWindowY(t,e)}},s.setAttr=function(t,e,i){return t.attr?t.attr(e,i):t[e]=i,t},s.removeAttr=function(t,e){return t.removeAttr?t.removeAttr(e):t.removeAttribute(e),t},s.notNull=function(t){return $.inArray(t,[null,void 0,"false","null","undefined",0])==-1},s.hideControl=function(t){return t.css({position:"absolute",top:-1e3,left:-1e3})},s.createPopup=function(t,e,i){var o=new s.Popup(t,e,i);return o.render()},s.Popup=function(t,e,i){if(void 0!==t.selector?this.jqDiv=t:t.nodeType?this.jqDiv=$(t):this.jqDiv=o.create("div",t),i){var s=this;$.each(i,function(t,e){s[t]=e})}n(this.jqDiv,this),this._callback=e},s.Popup.prototype.render=function(){return this.jqDiv},s.Popup.prototype.show=function(){this.jqDiv.show()},s.Popup.prototype.hide=function(){this.jqDiv.hide()},s.Popup.prototype.setVisible=function(t){t?this.show():this.hide()},s.Popup.prototype.isVisible=function(){return this.jqDiv.is(":visible")},s.Popup.prototype.contextMenuEvent=function(t){return!1},s.Popup.prototype.mouseDownOutsideEvent=function(t){if(this.isVisible()){if(this._callback&&!this._callback())return;this.hide()}},t.exports=s},function(t,e,i){var o={PLOT_TYPE_LINE:"line",PLOT_TYPE_COLORER:"colorer",PLOT_TYPE_BAR_COLORER:"bar_colorer",PLOT_TYPE_BG_COLORER:"bg_colorer",PLOT_TYPE_TEXT_COLORER:"text_colorer",PLOT_TYPE_OHLC_COLORER:"ohlc_colorer",PLOT_TYPE_SHAPES:"shapes",PLOT_TYPE_CHARS:"chars",PLOT_TYPE_ARROWS:"arrows",PLOT_TYPE_DATAOFFSET:"dataoffset",PLOT_TYPE_OHLC_OPEN:"ohlc_open",PLOT_TYPE_OHLC_HIGH:"ohlc_high",PLOT_TYPE_OHLC_LOW:"ohlc_low",PLOT_TYPE_OHLC_CLOSE:"ohlc_close",OHLC_TYPE_BARS:"ohlc_bars",OHLC_TYPE_CANDLES:"ohlc_candles",PLOT_LINE:0,PLOT_HISTOGRAM:1,PLOT_CROSS:3,PLOT_AREA:4,PLOT_COLUMNS:5,PLOT_CIRCLES:6,PLOT_LINE_WITH_BREAKS:7,PLOT_AREA_WITH_BREAKS:8,SCALE_RIGHT:0,SCALE_LEFT:1,SCALE_NONE:2},n={};n.Data={},n.registerPlotShape=function(t,e,i,o){if(t in n.Data)throw Error("Plot shape "+t+" already registered!");n.Data[t]={id:t,pineName:e,guiName:i,paneRendererClass:o}},n.SHAPE_CROSS="shape_cross",n.SHAPE_XCROSS="shape_xcross",n.SHAPE_CIRCLE="shape_circle",n.SHAPE_TRIANGLE_UP="shape_triangle_up",n.SHAPE_TRIANGLE_DOWN="shape_triangle_down",n.SHAPE_FLAG="shape_flag",n.SHAPE_ARROW_UP="shape_arrow_up",n.SHAPE_ARROW_DOWN="shape_arrow_down",n.SHAPE_SQUARE="shape_square",n.SHAPE_DIAMOND="shape_diamond",n.SHAPE_LABEL_UP="shape_label_up",n.SHAPE_LABEL_DOWN="shape_label_down",n.registerPlotShape(n.SHAPE_CROSS,"shape.cross","Cross","PaneRendererCrossShape"),n.registerPlotShape(n.SHAPE_XCROSS,"shape.xcross","X Cross","PaneRendererXCross"),n.registerPlotShape(n.SHAPE_CIRCLE,"shape.circle","Circle","PaneRendererCircleShape"),n.registerPlotShape(n.SHAPE_TRIANGLE_UP,"shape.triangleup","Triangle Up","PaneRendererTriangleApexUp"),n.registerPlotShape(n.SHAPE_TRIANGLE_DOWN,"shape.triangledown","Triangle Down","PaneRendererTriangleApexDown"),n.registerPlotShape(n.SHAPE_FLAG,"shape.flag","Flag","PaneRendererFlagShape"),n.registerPlotShape(n.SHAPE_ARROW_UP,"shape.arrowup","Arrow Up","PaneRendererArrowUp"),n.registerPlotShape(n.SHAPE_ARROW_DOWN,"shape.arrowdown","Arrow Down","PaneRendererArrowDown"),n.registerPlotShape(n.SHAPE_SQUARE,"shape.square","Square","PaneRendererSquare"),n.registerPlotShape(n.SHAPE_DIAMOND,"shape.diamond","Diamond","PaneRendererDiamond"),n.registerPlotShape(n.SHAPE_LABEL_UP,"shape.labelup","Label Up","PaneRendererLabelUp"),n.registerPlotShape(n.SHAPE_LABEL_DOWN,"shape.labeldown","Label Down","PaneRendererLabelDown"),TradingView.StudyConsts=o,TradingView.StudyPlotShapes=n,e.StudyConsts=o,e.StudyPlotShapes=n},function(t,e,i){(function(t,i){"use strict";function o(t){this._chartWidgetCollection=t}function n(t,e,o,n){var s,r;n=n||{},s={wl:n.wl,images:JSON.stringify(t.images()),previews:n.previews},(n.cme||"cme"===t.activeChartWidget.value().widgetCustomer())&&(s.cme=!0),s.timezone=t.activeChartWidget.value()._properties.timezone.value(),window.urlParams&&window.urlParams.locale&&(s.language=urlParams.locale),r=i.enabled("charting_library_base")?n.snapshotUrl||"https://www.tradingview.com/snapshot/":"/snapshot/",$.post(r,s,function(t){t?e(t):o()}).fail(function(){o()})}o.prototype.whenReadyToSave=function(t){var e,i,o=this._chartWidgetCollection,n=o.activeChartWidget.value(),s=(o.metaInfo,n.model().mainSeries());s.symbolInfo()&&!s.hasDelayedSymbolIntervalChange()?t():(e=null,i=null,e=function(){s.onSymbolError().unsubscribe(null,i,!0),t()},i=function(){s.onSymbolResolved().unsubscribe(null,e,!0)},s.onSymbolResolved().subscribe(null,e,!0),s.onSymbolError().subscribe(null,i,!0))},o.prototype.saveToJSON=function(){return this._fillSavingInfo(!1,!0)},o.prototype._fillAsyncInfo=function(t,e,i){function o(e){t.content=JSON.stringify($.extend(!0,s,e)),n.resolve(t)}var n,s=JSON.parse(t.content),r=this._chartWidgetCollection;return e||(i=!0),n=$.Deferred(),i?r.asyncState(!!e).then(o):r.activeChartWidget.value().asyncState(!!e).then(o),n.promise()},o.prototype._fillSavingInfo=function(t,e,i){var o,n,s,r,a,l,h,c,d,p,u,_,f,g;if(t||(e=!0),o={publish_request_id:Math.random().toString(36).substring(2)},n=this._chartWidgetCollection,s=n.activeChartWidget.value(),r=n.metaInfo,a=s.model().mainSeries(),l=a.properties(),h=a.symbolInfo(),!a||!r||!h)throw new ReferenceError("Missed required data");for(r.id.value()&&(o.id=r.id.value()),o.name=r.name.value()||"",o.description=r.description.value()||"",o.resolution=a.properties().interval.value(),o.symbol_type=h.type||"",o.exchange=h.exchange||"",o.listed_exchange=h.listed_exchange||"",a.isSpread()?(c=h.legs[0],d=h.base_name[0],d=d.split(":")[1],o.symbol=c,o.short_name=d,o.expression=h.full_name):(p=h.ticker||l.symbol.value(),u=l.shortName.value(),o.symbol=p,o.short_name=u),_=[],f=0,g=h.legs.length;f<g;f++)_.push({symbol:h.legs[f],pro_symbol:h.base_name[f]});return o.legs=JSON.stringify(_),e?o.content=JSON.stringify(n.state(!!t,i)):o.content=JSON.stringify(s.state(!!t,i)),t&&(o.image=JSON.stringify(n.images({onlyActiveChart:!e}))),o.is_realtime=t?"0":"1",o},o.prototype.publishChart=function(t){},o.prototype.onPublish=function(e,i){function o(o){var n,s,r,l,h,c,d;a.publishInProgress=!1,n=o.responseText,"ok:"===n.substr(0,3)?(i.savePrivacySetting&&(s=!e.is_public,TVSettings.setValue("publishchart.private",s)),r=n.substr(3),l=JSON.parse(r),a._chartWidgetCollection.metaInfo.id.value()||a._chartWidgetCollection.metaInfo.id.setValue(l.id),i.closeForm&&i.closeForm(),a._lastPublishUrl=l.publishUrl,a.hWnd&&(h=l.publishUrl,i.ideaUrl&&(h=t.render(i.ideaUrl,{idea:l.idea})),a.hWnd.location=h)):(i.showError&&(n=TradingView.strip_tags(n),(413==o.status||/^[\d\s]*request.+large/i.test(n.trim()))&&(c="support@tradingview.com",n=$.t("This chart layout has a lot of objects and can't be published! Please report to {0} for further&nbsp;details.").format('<a href="mailto:'+c+'">'+c+"</a>"),d={html:!0}),i.showError(n||$.t("Error occured while publishing"),d)),a.hWnd&&(a.hWnd.close(),a.hWnd=null))}var n,s,r,a=this;a.publishInProgress||(n=a._fillSavingInfo(!0,i&&i.publishAllLayout,!0),a._fillAsyncInfo(n,!0,i&&i.publishAllLayout).then(function(t){$.ajax({url:"/publishchart/",type:"post",dataType:"text",data:$.extend({},t,e),complete:o})}),a.publishInProgress=!0,i.onWidget&&!i.ideaUrl||""!==e.name&&""!==e.description&&e.description.length<=4e3&&e.name.length<=64&&($.cookie("publish_request_id",n.publish_request_id,{path:"/"}),s="/loading/",i.ideaUrl&&(r=TradingView.createUrlParams({ideaUrl:i.ideaUrl}),s="/loading?"+r),a.hWnd=window.open(s,"_blank")))},o.prototype.saveChartSilently=function(t,e,i,o){var n,s=this._chartWidgetCollection.metaInfo,r=this._fillSavingInfo(e);o=o||{},n=this,o.chartName&&(r.name=o.chartName),$(window).on("beforeunload.savechart",function(){return $.t("Your chart is being saved, please wait a moment before you leave this page.")}),TradingView.saveChart(r,s,t,i,o),$(window).off("beforeunload.savechart")},e.ChartSaver=o,e.takeSnapshot=n}).call(e,i(33),i(1))},function(t,e,i){(function(t){"use strict";function i(t,e,i,o){var n=this;this._options=o||{},this._readonly=!!this._options.readonly,this._container=t,this._chart=e,this._panes=i,this._pane_header_height=34,this._hidden_panes_count=0,this.prepareLayout(),setInterval(function(){n.paint()},66)}function o(e,i,o){var n,s,r,a,l,h,c=this;return this._options=$.extend({},this._defaultOptions,o||{}),this._$wrapper=e,this._$content=i,this._scroll_speed=40,this._shadow_offset=10,this._header_height=this._options.headerHeight,this._scroll_margin_top=this._options.scrollMarginTop,this.scrolled=new t,this.scrolltoend=new t,this.scrolltostart=new t,this.visibilityCallbacks=[],n=navigator.platform.toLowerCase(),s=navigator.userAgent.toLowerCase(),r=s.indexOf("firefox")>-1,a=n.indexOf("android")>-1||s.indexOf("android")>-1,this._touch=Modernizr.touch||navigator.msMaxTouchPoints||r&&a,this._touch?(this._$content.css("position","relative"),void this._$wrapper.css({"overflow-y":"scroll","-webkit-overflow-scrolling":"touch","-ms-overflow-style":"-ms-autohiding-scrollbar"}).scroll(this._onScroll.bind(this))):(this._$wrapper.css("overflow","hidden"),this._$wrapper.mouseenter(function(){c._bottomFixed||c._dragging||(c._options.alwaysVisible||c._$scrollBar.addClass("active"),c._onScroll())}).mouseleave(function(){c._bottomFixed||c._dragging||(c._options.alwaysVisible||c._$scrollBar.removeClass("active"),c._onScroll())}).mousewheel(function(t,e){if(!t.isDefaultPrevented())return c.scroll(e)}),this._options.showTopShadow!==!1&&(this._$shadowTop=$('<div class="sb-inner-shadow top">').appendTo(this._$wrapper),this._$shadowTop.addClass("js-hidden")),this._options.showBottomShadow!==!1&&(this._$shadowBottom=$('<div class="sb-inner-shadow">').appendTo(this._$wrapper)),this._$shadowTop&&this._header_height&&this._$shadowTop.css("top",this._header_height-this._shadow_offset),l=this._options.additionalClass?" "+this._options.additionalClass:"",h=this._options.alwaysVisible?" active-always":"",this._$scrollBarWrapper=$('<div class="sb-scrollbar-wrap">').appendTo(this._$wrapper),this._$scrollBar=$('<div class="sb-scrollbar sb-scrollbar-body'+l+h+'"></div>').appendTo(this._$scrollBarWrapper),void this._onScroll())}i.prototype.prepareLayout=function(){var t=this;this._widget=$('<div class="chart-sidebar">').appendTo(this._container),this._widget.toggleClass("js-hidden",void 0!==this._options.hidden?this._options.hidden:TVSettings.getBool("sidebar.hidden",!1)),this._separator=$('<div class="separator"><div class="separator-bar"><div class="separator-icon"></div></div></div>').appendTo(this._widget),this._separator.click(function(){t._widget.toggleClass("js-hidden"),t._readonly||TVSettings.setValue("sidebar.hidden",t._widget.is(".hidden")),$(window).resize()}),this._panes.forEach(function(e,i){if(void 0===e.ratio&&(e.ratio=TVSettings.getFloat("sidebar.pane."+e.id+".ratio",1)),void 0===e.state&&(e.state=TVSettings.getBool("sidebar.pane."+e.id+".state",!0),this._hidden_panes_count+=e.state?0:1),e.$pane=$('<div class="chart-sidebar-pane">').addClass("tv-"+e.id).appendTo(this._widget),e.$header=$('<div class="header"><span class="icon"></span><span class="title">'+e.title+"</span></div>").click(function(){e.state=!e.state,t._readonly||TVSettings.setValue("sidebar.pane."+e.id+".state",e.state),t._hidden_panes_count+=e.state?-1:1,t.resize()}).appendTo(e.$pane),e.index=i,e.$container=$('<div class="container">').appendTo(e.$pane),e.widgetObject=new e.widget(e.$container,this._chart,e.options),i<this._panes.length-1){$('<div class="chart-sidebar-vseparator"><div class="handle"></div></div>').on("mousedown touchstart",function(e){var i=$(this),o=i.prevAll(".chart-sidebar-pane:not(.minimized)").first(),n=i.nextAll(".chart-sidebar-pane:not(.minimized)").first();return!(!o.length||!n.length)&&(t._drag_start=e.pageY||e.originalEvent.pageY||e.originalEvent.touches&&e.originalEvent.touches[0].pageY||0,t._drag_prev_h=o.height(),t._drag_next_h=n.height(),$(window).on("mousemove.sidebarDrag touchmove.sidebarDrag",function(e){var i=(e.pageY||e.originalEvent.pageY||e.originalEvent.touches&&e.originalEvent.touches[0].pageY||0)-t._drag_start;o.height(t._drag_prev_h+i).data("paneObj").widgetObject.resize(),n.height(t._drag_next_h-i).data("paneObj").widgetObject.resize()}),$(window).one("mouseup touchend",function(e){var o,n,s,r,a,l,h;$(window).unbind("mousemove.sidebarDrag touchmove.sidebarDrag"),o=i.prevAll(".chart-sidebar-pane:not(.minimized)").first(),n=i.nextAll(".chart-sidebar-pane:not(.minimized)").first(),s=t._widget.height()-t._hidden_panes_count*t._pane_header_height-(t._panes.length-1),r=s/(t._panes.length-t._hidden_panes_count),a=(o.height()+t._pane_header_height)/r,l=o.data("paneObj"),l.ratio=a,h=(n.height()+t._pane_header_height)/r,l=n.data("paneObj"),l.ratio=h,t.resize()}),void e.preventDefault())}).appendTo(this._widget)}e.$pane.data("paneObj",e)},this),$(window).resize(function(){t.resize()}),this.resize()},i.prototype.normalizeRatios=function(){var t=this,e=this._panes.length-this._hidden_panes_count,i=0,o=0;this._panes.forEach(function(t){t.state&&(i+=t.ratio)}),o=(i-e)/e,this._panes.forEach(function(e){e.state&&(e.ratio-=o,t._readonly||TVSettings.setValue("sidebar.pane."+e.id+".ratio",e.ratio.toFixed(2)))})},i.prototype.resize=function(){var t,e;this.normalizeRatios(),t=this._widget.height()-this._hidden_panes_count*this._pane_header_height-(this._panes.length-1),e=t/(this._panes.length-this._hidden_panes_count),this._panes.forEach(function(t,i){t.state?t.$pane.height(e*t.ratio-this._pane_header_height):t.$pane.height(0),t.widgetObject.resize(!0),t.$pane.toggleClass("minimized",!t.state),t.$container.trigger("paneStateChange",[t.state])},this)},i.prototype.getPaneIndexById=function(t){for(var e=0;e<this._panes.length;e++)if(this._panes[e].id===t)return e;return null},i.prototype.getPaneById=function(t){var e=this.getPaneIndexById(t);return null===e?null:this._panes[e]},i.prototype.highlightPane=function(t,e,i){this._panes[t].$header.highlight(e,i)},i.prototype.highlightWidget=function(t,e,i){this.highlightPane(this.getPaneIndexById(t),e,i)},i.prototype.paint=function(){this._panes.forEach(function(t,e){t.widgetObject.paint&&t.widgetObject.paint()},this)},i.prototype.setPaneState=function(t,e,i){if(t){t.state=!!e;var o=i&&i.doNotSave;this._readonly||o||TVSettings.setValue("sidebar.pane."+t.id+".state",t.state),this._hidden_panes_count=this._panes.filter(function(t){return!t.state}).length,this.resize()}},o.prototype._defaultOptions={headerHeight:0,additionalClass:"",alwaysVisible:!1,showBottomShadow:!0,scrollMarginTop:1},o.prototype.initDraggable=function(){var t,e;return this._dragInitialized?this:(t=this,e=this._$wrapper.offset(),this._$scrollBar.draggable({axis:"y",containment:this._$scrollBarWrapper,start:function(){t._dragging=!0},stop:function(){t._dragging=!1},drag:function(e,i){t.updateScroll()}}),this._dragInitialized=!0,this)},o.prototype.updateScroll=function(){var t,e,i,o,n;return this._touch?this:(t=1,e=Math.ceil(this._$scrollBar.position().top-this._scroll_margin_top-this._header_height),i=this._$wrapper.height()-this._header_height,o=this._$content.height(),n=o-i-t,i<=0?this:(n<=0?this._scroll_target_top=this._header_height:this._scroll_target_top=Math.min(-e*o/i+this._header_height,this._header_height),e+this._$scrollBar.height()+2>=i?this.scrollToEnd():(this._$content.css("top",this._scroll_target_top+"px"),this._onScroll()),this))},o.prototype.updateScrollBar=function(){var t,e,i,o,n,s,r,a,l;return this._touch?this:(t=1,e=this._$content.position().top,i=this._$content.height(),o=this._$wrapper.height(),n=o-this._header_height,s=t+this._header_height,r=n-2*t,a=(Math.abs(e)-this._header_height)*r/i,l=o*o/i,i<n?(this._$scrollBar.addClass("js-hidden"),this._$wrapper.removeClass("sb-scroll-active")):(this._$scrollBar.removeClass("js-hidden").height(l).css("top",s+a),this._$wrapper.addClass("sb-scroll-active"),this.initDraggable()),this)},o.prototype.scroll=function(t,e){var i,o,n,s,r;return this._touch?this:(i=this._$content.position().top,o=this._$content.height(),n=this._$wrapper.height()-this._header_height,s=o-n-1,r=e||this._scroll_speed,s<=0||(this._scroll_target_top=Math.max(-s+this._header_height,Math.min(this._header_height,i+t*r)),this.setContentTop(this._scroll_target_top),this._onScroll(),!1))},o.prototype.animateTo=function(t){var e,i,o,n;return this._touch?this:(e=this._$content.position().top,i=this._$content.height(),o=this._$wrapper.height()-this._header_height,n=i-o-1,n<=0||(this._scroll_target_top=Math.max(-n+this._header_height,Math.min(this._header_height,-t)),void this._$content.animate({top:this._scroll_target_top},500,function(){this._onScroll()}.bind(this))))},o.prototype.resize=function(){var t,e,i;if(!this._bottomFixed)return t=this._$content.position().top,e=this._$content.height(),i=this._$wrapper.height(),!this._options.vAlignBottom&&e<i?void(this.atStart()||this.scrollToStart()):void(this.atEnd()?this.scrollToEnd():"number"==typeof this._stickyBottom&&this.setContentTop(Math.min(0,this._stickyBottom+this._$wrapper.height()-this._$content.height())))},o.prototype.resizeHeader=function(t){var e=t-this._header_height;this._header_height=t,this._scroll_target_top+=e,this._$shadowTop&&this._$shadowTop.css("top",this._header_height-this._shadow_offset),this.resize()},o.prototype.scrollTo=function(t,e){var i,o,n,s,r,a,l;if(e=$.extend({position:"visible",areaHeight:t instanceof $?t.height():0},e),t instanceof $&&(t=t.position().top),i=this._$content.position().top,o=this._$content.height(),n=this._$wrapper.height()-this._header_height,s=o-n-1,s<=0)return!0;if(r=-1*(i-this._header_height),a=r+n,l=0,"visible"==e.position){if(t>r&&t+e.areaHeight<a)return!1;l=t+e.areaHeight>a?a-t-e.areaHeight:r-t}else"top"==e.position&&(l=r-t);return this.scroll(l,1),this._onScroll(),!1},o.prototype.scrollToEnd=function(){var t=1,e=this._$content.position().top,i=this._$content.height(),o=this._$wrapper.height(),n=i+e;return this.setContentTop(e+(o-n)+t),this._onScroll(),this},o.prototype.scrollToStart=function(){return this.setContentTop(this._header_height),this._onScroll(),this},o.prototype.currentPosition=function(){return Math.round(this._$content.position().top)},o.prototype.atStart=function(){return Math.round(this._$content.position().top)>=this._header_height},o.prototype.atEnd=function(t){var e,i,o,n,s;return"number"==typeof t&&isFinite(t)||(t=0),e=1,i=this._$content.position().top,o=this._$content.height(),n=this._$wrapper.height(),s=o-Math.abs(i)-e,s<=n+t},o.prototype._onScroll=function(t){var e,i;this._touch||this._$content.css("bottom","auto"),this.scrolled.fire(),this._dragging&&t!==!0||this.updateScrollBar(),e=this.atStart(),i=this.atEnd(),this._$shadowTop&&this._$shadowTop.toggleClass("js-hidden",!!e),this._$shadowBottom&&this._$shadowBottom.toggleClass("js-hidden",!!i),this._onContentVisible(),!this._atStart&&e?(this._atStart=!0,this.scrolltostart.fire()):this._atStart&&!e&&delete this._atStart,!this._atEnd&&i?(this._atEnd=!0,this.scrolltoend.fire()):this._atEnd&&!i&&delete this._atEnd,this._options.vAlignBottom&&(this._stickyBottom=this._$content.height()-Math.abs(this._$content.position().top)-this._$wrapper.height())},o.prototype.checkContentVisibility=function(){this._onContentVisible()},o.prototype.subscribeToContentVisible=function(t,e,i){this.visibilityCallbacks.push({id:t,$el:e,callback:i})},o.prototype.triggerVisibilityCallbacks=function(t){this._onContentVisible(t)},o.prototype._contentIsVisible=function(t){return t.$el.position().top>-1*this.currentPosition()},o.prototype._onContentVisible=function(t){var e,i,o;this.visibilityCallbacks.length&&(e=t||this._contentIsVisible.bind(this),i=[],o=this.visibilityCallbacks.filter(function(t,o){if(!$.contains(this._$content,t.$el[0]))return!1;var n=e(t);return n&&i.push(o),!n},this),i.forEach(function(e){this.visibilityCallbacks[e].callback(!!t)},this),delete this.visibilityCallbacks,this.visibilityCallbacks=o)},o.prototype.save=function(){return this._saved={top:this._$content.position().top,height:this._$content.height()},this},o.prototype.restore=function(){if(this._saved){if(this._saved.top==this._$content.position().top&&this._saved.height==this._$content.height())return delete this._saved,this;this._options.vAlignBottom&&(this._saved.top-=this._$content.height()-this._saved.height,this._saved.top>this._header_height&&(this._saved.top=this._header_height)),
this.setContentTop(this._saved.top),delete this._saved,this._onScroll(!0)}return this},o.prototype.fixBottom=function(){var t,e;return this._bottomFixed?this:(this._touch?(t=this._$content.height(),e=this._$wrapper.scrollTop(),this._tempIntervalID=setInterval(function(){this._$wrapper.scrollTop(e+(this._$content.height()-t))}.bind(this),0)):this._$content.css({top:"auto",bottom:this._$wrapper.height()-this._$content.position().top-this._$content.height()}),this._bottomFixed=!0,this)},o.prototype.releaseBottom=function(){return this._bottomFixed?(this._touch?clearInterval(this._tempIntervalID):this._$content.css({top:this._$content.position().top,bottom:"auto"}),delete this._bottomFixed,this._onScroll(),this):this},o.prototype.setContentTop=function(t){return this._touch?this._options.vAlignBottom&&this._$content.height()<this._$wrapper.height()?(this._$wrapper.css("overflow-y","visible"),this._$content.css({position:"absolute",bottom:0})):(this._$content.css({position:"relative",bottom:"auto"}),this._$wrapper.css("overflow-y","scroll"),this._$wrapper.scrollTop(-t)):this._$content.css("top",t),this},e.SidebarCustomScroll=o,e.SidebarWidget=i}).call(e,i(32))},function(t,e,i){(function(t){"use strict";var e=function(){this.type="test_call",this.content=""},i={wrapValue:function(t){return""+t},sendEvent:function(t,i){var o=new e;o.type=i||"event",o.content=t,window.external.notify(JSON.stringify(o))}};void 0!==t&&t&&t.exports&&(t.exports=i)}).call(e,i(2)(t))},function(t,e,i){(function(t){"use strict";var e=function(){return"www.tradingview.com"==location.host||"dwq4do82y8xi7.cloudfront.net"==location.host||"i18n.tradingview.com"==location.host||"ru.tradingview.com"==location.host||location.host.match(/proxy\d.tradingview.com/)||location.host.match(/prod-[^.]+.tradingview.com/)?"battle":location.href.indexOf("tradingview.com")!==-1?"staging":location.host.match(/webcharts/)?"staging_local":(""===location.host.match(/^localhost(:\d+)?$/),"local")};e.isLocal=function(){return"local"==this()},e.isProd=function(){return"battle"==this()},e.isDebug=function(){return!this.isProd()},TradingView.Environment=e,void 0!==t&&t&&t.exports&&(t.exports=e)}).call(e,i(2)(t))},function(t,e){"use strict";function i(t){this.ok=!1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t=t.replace(/ /g,""),t=t.toLowerCase(),this.parseColor(t)||(this.simple_colors[t]&&(t=this.simple_colors[t]),this.parseColor(t)),this.cleanupRGB()}function o(t,e,i){var o,n,s,r,a,l;if(t/=255,e/=255,i/=255,o=Math.max(t,e,i),n=Math.min(t,e,i),a=(o+n)/2,o==n)s=r=0;else{switch(l=o-n,r=a>.5?l/(2-o-n):l/(o+n),o){case t:s=(e-i)/l+(e<i?6:0);break;case e:s=(i-t)/l+2;break;case i:s=(t-e)/l+4}s/=6}return[s,r,a]}function n(t,e,i){function o(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}var n,s,r,a,l;return 0===e?n=s=r=i:(a=i<.5?i*(1+e):i+e-i*e,l=2*i-a,n=o(l,a,t+1/3),s=o(l,a,t),r=o(l,a,t-1/3)),[Math.round(255*n),Math.round(255*s),Math.round(255*r)]}function s(t,e){var i=parseInt(t.substring(1,3),16),o=parseInt(t.substring(3,5),16),n=parseInt(t.substring(5,7),16),s=parseInt(e.substring(1,3),16),r=parseInt(e.substring(3,5),16),a=parseInt(e.substring(5,7),16),l=s-i,h=o-r,c=n-a,d=Math.sqrt(l*l+h*h+c*c);return d<16}function r(t){var e,i=parseInt(t.substring(1,3),16),o=parseInt(t.substring(3,5),16),n=parseInt(t.substring(5,7),16);return i=255-i,o=255-o,n=255-n,e=function(t){return("0"+t.toString(16)).right(2)},"#"+e(i)+e(o)+e(n)}i.prototype.color_defs=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/^rgba\(\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*([\d]{0,1})(\.{1}\d{1,4})*\)$/,example:["rgba(123, 234, 45, 1)","rgba(255,234,245,0.1)"],process:function(t){return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10)]}}],i.prototype.simple_colors={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},i.prototype.parseColor=function(t){var e,i,o,n,s;for(e=0;e<this.color_defs.length;e++)if(i=this.color_defs[e].re,o=this.color_defs[e].process,n=i.exec(t))return s=o(n),this.r=s[0],this.g=s[1],this.b=s[2],this.ok=!0,!0;return!1},i.prototype.cleanupRGB=function(){this.r=this.r<0||TradingView.isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||TradingView.isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||TradingView.isNaN(this.b)?0:this.b>255?255:this.b},i.prototype.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},i.prototype.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),i=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==i.length&&(i="0"+i),"#"+t+e+i},i.prototype.grayChannel=function(){var t=[.199,.687,.114],e=t[0]*this.r+t[1]*this.g+t[2]*this.b;return e},i.prototype.blackWhiteContrast=function(){return this.grayChannel()<150?"white":"black"},i.prototype.darken=function(t){var e=o(this.r,this.g,this.b),i=n(e[0],e[1],e[2]-t/100);return this.r=i[0],this.g=i[1],this.b=i[2],this.cleanupRGB(),this},e.RGBColor=i,e.rgbToHsl=o,e.hslToRgb=n,e.colorsAreSimilar=s,e.invertColor=r},function(t,e,i){(function(t,e){"use strict";var i=window.TVSettings=function(){function e(t){return x+"."+t}function o(t,e){var i;return i=P[t],window.is_authenticated&&!V||null!=i||!window.localStorage||(i=P[t]),null==i?e:i}function n(t,e){var i=o(t,void 0);if(null==i)return e;try{return JSON.parse(i)}catch(n){return c(t),e}}function s(t,e){var i=o(t);return null==i?e:!(!i||"false"===i||0===+i)}function r(t,e,i){var n,s=o(t,void 0,i);if(null==s)return e;if(n=parseFloat(s),!isFinite(n))throw new TypeError('"'+s+'" is not float (key: "'+t+'")');return n}function a(t,e,i){var n,s=o(t,void 0,i);if(null==s)return e;if(n=parseInt(s,10),!isFinite(n))throw new TypeError('"'+s+'" is not int (key: "'+t+'")');return n}function l(t,e,o){o=o||{};var n=""+e;return P[t]!==n&&(P[t]=n,p(t)),o.forceFlush&&u(),i}function h(t,e,o){var n=JSON.stringify(e);return l(t,n,o),i}function c(t){return null!=P[t]&&(delete P[t],p(t),TradingView.trackEvent("Settings debug",t,user.username)),i}function d(){k=void 0,L.length&&u()}function p(t){if(!window.is_authenticated||V)try{null==P[t]?TVLocalStorage.removeItem(e(t)):TVLocalStorage.setItem(e(t),P[t])}catch(i){}else L.push(t),k||(k=setTimeout(d,C));TVXWindowEvents.emit("settings",JSON.stringify({key:t,value:P[t]}))}function u(t){var e,i,o,n,s;if(!TradingView.onWidget()&&window.is_authenticated&&!V&&0!==L.length){for(e=L,L=[],i={},o=e.length;o--;)n=e[o],s=P[n],void 0===s&&(s=null),i[n]=s;$.ajax({url:"/savesettings/",type:"POST",data:{delta:JSON.stringify(i)},async:!t})}}function _(){var t,e,i;for(t=0;t<localStorage.length;t++)e=localStorage.key(t),i=x.length,e.substring(0,i+1)===x+"."&&(L=[],localStorage.removeItem(e));$.post("/restoredefaults/",{},function(t){TVDialogs.showNotice("Success","Defaults has been successfully restored")}).error(function(t){})}function f(){return Object.keys(P)}function g(t,e){var i,o=f(e),n=[];for(t=RegExp("^"+TradingView.RegExpEscape(t).replace(/\\\*\\\*/gi,".+").replace(/\\\*/gi,"[^.]+")+"$","gi"),i=o.length-1;i>=0;i--)t.test(o[i])&&n.push(o[i]),t.lastIndex=0;return n}function m(t){for(var e=0;e<I.length;++e)if(I[e].exec(t))return!0;return!1}function v(){var e,i,o,n,s;if(P=[],window.localStorage)for(e=x+".",i=!t.enabled("save_chart_properties_to_local_storage"),o=localStorage.length;o--;)n=localStorage.key(o),n.substring(0,e.length)===e&&(s=n.substring(e.length),i&&!m(s)||(P[s]=localStorage.getItem(n)))}function y(t){var e,i,o,n,s;if(P=[],window.localStorage)for(e=0===Object.keys(t).length,i=x+".",o=localStorage.length;o--;)n=localStorage.key(o),n.substring(0,i.length)===i&&(e&&(s=n.substring(i.length),l(s,localStorage.getItem(n))),localStorage.removeItem(n));for(o in t)P[o]=t[o]+""}function w(t){E=!0,window.is_authenticated&&!V?y(t||{}):v()}var b,S,T,C,x,P,L,k,E,I,A=!1,V=t.enabled("cqg_terminal");try{A=!TradingView.onWidget()&&parent&&parent!==window&&!!parent.IS_DEMO_PAGE}catch(M){}return A?(b={"widgetbar.layout-settings":{widgets:{},settings:{minimized:!0}},notShowMainWizard:!0},S=function(t,e,i){var o=b[t];return null==o?e:o},T=function(){},{loaded:!1,loadedModel:!1,getValue:S,getJSON:S,getBool:S,getFloat:S,getInt:S,setValue:T,setJSON:T,remove:T,restoreDefaults:T,keys:function(){return Object.keys(b)},keysMask:function(){return[]},sync:T}):(C=12e4,"local"===window.environment&&(C=5e3),x="tradingview",P={},L=[],E=!1,I=[/^widgetbar\.widget\.watchlist.+/,/.+quicks$/,/^widgetbar\.layout-settings$/,/^ChartSideToolbarWidget\.visible$/,/^onwidget\.watchlist^/],TVXWindowEvents.on("settings",function(t){var e=JSON.parse(t);null==e.value?delete P[e.key]:P[e.key]=e.value}),$(window).on("visibilitychange",function(t,e){e||u()}),$(window).on("unload",function(){u(!0)}),{loaded:!1,loadedModel:!1,getValue:o,getJSON:n,getBool:s,getFloat:r,getInt:a,setValue:l,setJSON:h,remove:c,restoreDefaults:_,keys:f,keysMask:g,sync:w})}();void 0!==e&&e&&e.exports&&(e.exports=i)}).call(e,i(1),i(2)(t))},function(t,e,i){"use strict";function o(){}function n(t,e,i,o){var n,s;y[i]||(y[i]={persistent:[],truncated:[]}),n=y[i][o===!0?"truncated":"persistent"],s={timestamp:+t,message:e},n.unshift(s),o===!0&&n.length>m&&(n.length=m)}function s(t,e){for(var i=0;i<t.length;i++)t[i].subsystem=e;return t}function r(t){function e(e,i,o,n){L(t,e,i,o,n)}function i(t){return function(i,o,n){e(i,t,o,n)}}return e.withinSubsystem=i,e}var a,l,h,c,d,p,u,_,f,g,m,v,y,w,b,S,T,C,x,P,L,k;a=i(58),l=window,h="undefined"!=typeof TradingView&&TradingView||{},c="undefined"!=typeof TVSettings&&TVSettings||{getInt:function(t,e){return e},setValue:function(){}},d=l.console||{},["debug","log","warn","error"].forEach(function(t){if(void 0===d[t])try{d[t]=o}catch(e){}}),p=h.LOGLEVEL_ERROR=1,u=h.LOGLEVEL_WARNING=2,_=h.LOGLEVEL_NORMAL=3,f=h.LOGLEVEL_DEBUG=4,g=u,m=300,v="loglevel",y={},w="general",b={general:"color: #099",chart:"color: #606",quote:"color: #660"},setInterval(function(){S=null,T=null},1e3),C=h.getLogLevel=function(){return c.getInt(v)},x=l.llev=h.setLogLevel=function(t){t="number"==typeof t?Math.max(p,Math.min(f,t)):g,c.setValue(v,t)},l.lon=h.loggingOn=function(){x(f),L(_,"Debug logging enabled")},l.lno=h.loggingNormal=function(){x(_),L(_,"Logging set to normal level")},l.loff=h.loggingOff=function(){x(u),L(_,"Debug logging disabled",null,!0)},P=h.getLogHistory=function(t,e,i,o){var n=[];return Object.keys(y).forEach(function(e){e==w&&i===!0||t&&e!=t||o&&~o.indexOf(e)||(n=n.concat(s(y[e].persistent.concat(y[e].truncated),e)))}),n.sort(function(t,e){return t.timestamp-e.timestamp}),"number"==typeof e&&(n=n.slice(-e)),n.map(function(t){return new Date(t.timestamp).toISOString()+":"+t.subsystem+":"+t.message})},L=h.log=function(t,e,i,o,s){var r,a;if((e!=S||i!=T)&&(i=i||w,r=new Date,"\n"!=e&&t<=_&&n(r,e,i,s),o===!0||t<=C())){if("\n"!=e)switch(a=r.toISOString()+":"+i+":"+e,t){case f:d.debug(a);break;case _:b[i]?d.log("%c"+a,b[i]):d.log(a);break;case u:d.warn(a);break;case p:d.error(a)}S=e,T=i}},h.logError=r(p),h.logWarn=r(u),h.logNormal=r(_),h.logDebug=r(f),h.logNormalChart=r(_).withinSubsystem("chart"),h.logNormalQuote=r(_).withinSubsystem("quote"),h.logDebugChart=r(f).withinSubsystem("chart"),h.logDebugQuote=r(f).withinSubsystem("quote"),k=h.remoteDebug=function(){var t={arguments:JSON.stringify(Array.prototype.slice.call(arguments))};$.ajax("/remote_debug/",{data:t})},h.remoteDebugTouch=function(){Modernizr.touch&&k.apply(this,arguments)},a.isProd()&&void 0!==d&&(h.remoteDebug=o),h.debugReady&&h.debugReady.resolve()},function(t,e,i){(function(t,e,o,n,s,r){"use strict";var a=window.TVDialogs={modalDialog:null,dialogs:[],messageInterval:null,messageDelay:4e3,NOTIFICATION_ANIMATION_START_OFFSET:"-33px",_constrainDraggableOptionsIfNeeded:function(e){return t.enabled("constraint_dialogs_movement")&&(e.containment=".chart-page"),e},validateHelpers:{isErrorListening:function(t){t.on("keyup.error-checker",a.validateHelpers.isError(t.val(),t))},isError:function(t,e){return function(){e.val()!=t&&(e.removeClass("error"),e.off("keyup.error-checker"))}},makeValidator:function(t,e,i,o,n){return function(s){var r,l,h;if(t.removeClass("error"),$("._tv-dialog-field-error").hide(),""!==s.errors)if("object"==typeof s.errors){for(r in s.errors)l=t.filter("input[name^="+r+"]"),l.addClass("error").data("error",s.errors[r][0]),a.validateHelpers.isErrorListening(l);h=t.filter(".error").first().focus(),a.showError(h.data("error"),n)}else a.showError($.t("Error:")+s.errors,n);else"function"==typeof o&&o(s,i);e.removeClass("process")}}},applyMQMatcher:function(t){var e,i;t||(t=a.modalDialog),e=function(){a.positionDialog()},window.matchMedia&&(i=["(max-height: 645px)","(max-width: 460px)"].map(function(t){var i=matchMedia(t);return i.addListener(e),i}),t.on("destroy",function(){i.forEach(function(t){t.removeListener(e)})}))},showLineToolsWarning:function(t,e,i){function o(){a.destroy()}var n,s,r,l,h;e.readOnly()||(n=$.t("Warning"),a.createModalDialog(n,{addClass:"line-tools-warning"}),s=a.modalDialog,s.addClass("trading-dialog"),r=s.find("._tv-dialog-content"),l=$("<div class='message'>").append($.t("This chart layout has more than 1000 drawings, which is a lot! This may negatively affect performance, storage and publishing. We recommend to remove some drawings to avoid potential performance issues.")).appendTo(r),h=$("<div>").addClass("buttons").appendTo(r),$("<button class='select button flat'>").append($.t("Open Manage Drawings")).appendTo(h).click(function(){$(this).addClass("process"),new TradingView.ObjectTreeDialog({chartWidget:e,activeTab:1},i).show(function(){o()})}),$("<button class='button flat not-now'>").append($.t("Not Now")).appendTo(h).click(function(){o()}),a.applyHandlers(s),a.positionDialog())},showBrowserExtensionDialog:function(t){var o,n;if(t)return o={chrome:{logo:"images/svg/google-chrome-logo.svg",name:"Google Chrome",href:"https://chrome.google.com/webstore/detail/tradingview-free-quotes-a/ommjfbdmijjlbhlhnnnfkmbnkpnjpipj"}},n=i(48),a.createModalDialog("Browser Extension",{noHeader:!0,width:"730px",content:e.render(n.dialogs.browserExtension,{browser:o[t]})}),a.modalDialog.find(".install-extension, ._tv-dialog-title-close").click(function(t){a.destroy()}),a.positionDialog(),a.modalDialog},showIntervalMismatchDialog:function(t){var e,i,o,n,s,r,l=!1;l=l||!1,a.createModalDialog($.t("Interval is not applicable"),{addClass:"tv-interval-is-not-applicable-dialog"}),e=a.modalDialog,e.css({zIndex:1e3}),e.find("._tv-dialog").css("width","400px"),i=a.modalDialog.find("._tv-dialog-content"),i.html('<div class="main"><div class="caption-big">'+$.t("<p>Only <b>D, W, M</b> intervals are supported for this symbol/exchange. You will be automatically switched to a D interval. Intraday intervals are not available because of exchange policies.</p>")+'</div><div class="main-properties"></div></div>'),o=i.find(".main-properties"),n=$('<div class="dialog-buttons"></div>').appendTo(o),t&&(s=$('<label class="dialog-trail-checkbox"><input type="checkbox" /> '+$.t("Do not show this message again")+"</label>").appendTo(n),r=s.find("input"),r.attr("checked",t.silentIntervalChange.value()),r.bind("click",function(){t.silentIntervalChange.setValue(this.checked)})),$('<a class="_tv-button ok">OK</a>').appendTo(n).bind("click",function(){a.destroy()}),a.positionDialog(),a.applyHandlers(!1,{doNotCloseOnBgClickIfShadowbox:l})},showSignInDialog:function(t,e){},showAfterSocialSign:function(t){},goRegistrate:function(t){},showPublishIntroDialog:function(t){},showGoProDialog:function(t){},showGoToTradingViewReferralDialog:function(t){},showAddSymbolDialog:function(t,o){function n(t){var e,i=r.find("#_tv-dialog-addsymbol-overlay-checkbox").is(":checked");t&&(e=o.callback,e(t,i),$(window).off("keyup.addOverlay"),a.destroy(r.data("title")))}var s,r,l,h,c,d;o=$.extend({},{title:$.t("Add Symbol"),callback:function(t,e){},overlayOption:!1,overlayOptionChecked:TVSettings.getBool("showAddSymbolDialog.checkboxState",!0),okButtonTitle:$.t("Add Symbol")},o||{}),s=i(48),r=a.createDialog(o.title),r.css("min-width",0),r.find("._tv-dialog-content").html(e.render(s.dialogs.addSymbol,o)).css("min-width",0),a.applyHandlers(r),l=$('<div class="symbol-edit-widget"></div>'),h=$('<input type="text" class="symbol-edit single" placeholder="'+$.t("Symbol")+'" maxlength="30" style="text-transform: none; font-weight: normal;" autocomplete="off">').appendTo(l),c=i(41),d=c.bindToInput(h,{callback:function(t){n(t)}}),r.find("div.symbol-edit-place").replaceWith(l),r.find("._tv-dialog").draggable(a._constrainDraggableOptionsIfNeeded({handle:"._tv-dialog-title"})),r.find("input[type=checkbox]").on("change",function(t){TVSettings.setJSON("showAddSymbolDialog.checkboxState",t.target.checked)}),r.find(".ok").on("click",function(){d.acceptTypeIn()}),r.show(),a.positionDialog(r),h.focus()},makeDraggable:function(t){t.draggable({handle:"._tv-dialog-title"})},showConfirmInputsDialog:function(t,e,i){function n(t){var e=i.callback,o=t.state();e(o),a.destroy(s.data("title"))}var s,r,l,h,c,d,p,u,_,f;for(i=$.extend({},{title:$.t("Confirm Inputs"),callback:function(t){},okButtonTitle:$.t("Apply")},i||{}),s=a.createDialog(i.title,{content:"<div class='main'></div>"}),s.css("min-width",0),a.applyHandlers(s,{beforeDestroy:function(){$(window).unbind("keyup.hideInputsConfirmDialog")}}),r=TradingView.merge({},e.defaults.inputs),l=0;l<e.inputs.length;++l)h=e.inputs[l],h.confirm||delete r[h.id];c=new o({inputs:r}),d={metaInfo:function(){return e}},p=new TradingView.StudyInputsPropertyPage(c,t.model(),d,(!0)),u=p.widget(),_=s.find(".main"),_.append(u),$(window).bind("keyup.hideInputsConfirmDialog",function(t){"13"==t.keyCode&&"textarea"!==t.target.tagName.toLowerCase()&&(n(c),$(window).unbind("keyup.hideInputsConfirmDialog"))}),$("select",_).each(function(){var t=$(this),e="tv-select-container dialog";t.hasClass("tv-select-container-fontsize")&&(e+=" tv-select-container-fontsize"),t.selectbox({speed:100,classHolder:e})}),$('input[type="text"]',_).addClass("tv-text-input inset dialog"),$("input.ticker",_).TVTicker(),f="<div class='_tv-dialogs-bottom-button'><span class='_tv-button tv-right tv-uppercase ok'>Apply</span></div>",s.find(".main").append(f),s.find(".ok").on("click",function(){n(c)}),s.show(),a.positionDialog(s),_.find("input,select").first().focus()},showAlertTextNotesDialog:function(){a.showNotice($.t("Oops!"),{html:$.t('Text Notes are available only on chart page. Please <a href="/chart/">open a chart</a> and then try again.')})},showNotice:function(t,i,o){var n,s,r,l,h,c;return"object"==typeof i&&(o=i,i=""),o=o||{},n=o.doNotCloseOnBgClick||!1,s=o.html||"",r=o.width||"400px",l={},l.noClose=o.noClose||null,a.createModalDialog(t,l),h=o.centerCaption?"caption-big-center":"caption-big",a.modalDialog.find("._tv-dialog").css("width",r),c=o.customButtonCaption?o.customButtonCaption:$.t("OK"),a.modalDialog.find("._tv-dialog-content").html(e.render('<div class="main"><div class="{{captionClassName}} {{classSuffix}}">{{text}}'+s+'</div>{{^removeOkButton}}<div class="buttons"><input type="button" class="_tv-button ok" value="'+c+'"/></div>{{/removeOkButton}}</div>',{captionClassName:h,classSuffix:o.classSuffix||"",text:i,removeOkButton:o&&o.removeOkButton})),a.modalDialog.find("._tv-button.ok").on("click",function(){a.destroy(),o.onOkButtonClick&&o.onOkButtonClick()}),a.positionDialog(),a.applyHandlers(!1,{doNotCloseOnBgClickIfShadowbox:n,beforeDestroy:o.onClose}),a.modalDialog},showTooManyStudiesNotice:function(t){return"number"!=typeof t&&(t=TradingView.STUDY_COUNT_LIMIT),a.showNotice($.t("Warning"),{html:$.t("Studies limit exceeded: {0} studies per layout.<br>\nPlease, remove some studies.",{count:t}).format(t)})},showConfirm:function(t,i,o,n,s){if(s=s||{},s.dontAskSetting&&TVSettings.getBool(s.dontAskSetting))return void o();var r=a.createModalDialog(t,s);return a.modalDialog.find("._tv-dialog").css("width",s.customWidth?s.customWidth:"400px"),a.modalDialog.find("._tv-dialog-content").html(e.render('<div class="main"><div class="caption-big">{{{text}}}</div>{{#dontAskSetting}}<input type="checkbox" id="confirm-dialog-checkbox" style="margin: 0; vertical-align: middle;"> <label for="confirm-dialog-checkbox" style="font-size: 11px;">'+$.t("Do not ask again")+'</label>{{/dontAskSetting}}</div><div class="_tv-dialogs-bottom _tv-dialog-center"><input class="_tv-button wide ok" type="button" value="'+$.t("YES")+'" style="margin-right: 10px;"/><input class="_tv-button wide cancel" type="button" value="'+$.t("NO")+'"/></div>',{text:i,dontAskSetting:!!s.dontAskSetting})),s.okButtonText&&a.modalDialog.find(".ok").val(s.okButtonText),s.cancelButtonText&&a.modalDialog.find(".cancel").val(s.cancelButtonText),a.modalDialog.find(".ok").click(function(){s.dontAskSetting&&$("#confirm-dialog-checkbox").is(":checked")&&TVSettings.setValue(s.dontAskSetting,!0),o(),s.manualClose||a.destroy()}),a.modalDialog.find(".cancel").click(function(){n&&n(),s.manualCloseOnCancel||a.destroy()}),a.positionDialog(),a.applyHandlers(),r},showPrompt:function(t,i,o,n,s){function r(){var t,e=l.val();return c&&(t=c(e))?(t===!0&&(t=$.t("Wrong value")),void a.showError(t,a.modalDialog)):(a.destroy(),void(o&&o(e)))}var l,h=s&&s.defaultValue,c=s&&s.validate;a.createModalDialog(t,s),a.modalDialog.find("._tv-dialog").css("width","400px"),a.modalDialog.find("._tv-dialog-content").html(e.render('<div class="main"><form><div class="caption-big-center slim">{{text}}: <input type="text" name="prompt-value" class="prompt-value"/></div></form></div><div class="_tv-dialogs-bottom _tv-dialog-{{bottomAlign}}"><input class="_tv-button wide ok" type="button" value="'+$.t("OK")+'" style="margin-right: 10px;"/><input class="_tv-button wide cancel" type="button" value="'+$.t("Cancel")+'"/></div>',{text:i,bottomAlign:s.bottomAlign?s.bottomAlign:"center"})),l=a.modalDialog.find('[name="prompt-value"]'),h&&l.val(h),a.modalDialog.find("form").submit(function(t){r(),t.preventDefault()}),a.modalDialog.find(".ok").click(function(t){r(),t.preventDefault()}),a.modalDialog.find(".cancel").click(function(){a.destroy(),n&&n()}),a.positionDialog(),a.applyHandlers(),setTimeout(function(){l.focus().select()},0)},showCustomDialog:function(t){function e(e){var i=t.action(a.modalDialog),o=i&&!i.error,n=void 0===i,s=i&&i.notClose;!o&&!n||s?i.error&&a.showError(i.error):a.destroy(),e.preventDefault()}function i(e){"function"==typeof t.onCancel?t.onCancel():a.destroy()}return a.createModalDialog(t.title||$.t("Dialog"),{addClass:t.addClass||""}),a.modalDialog.find("._tv-dialog").css("width",t.width||"400px"),a.modalDialog.find("._tv-dialog-content").html('<div class="main">'+(t.html||$.t("Content"))+"</div>"+(t.noButtons?"":'<div class="_tv-dialogs-bottom _tv-dialog-center">'+(t.noButtonOk?"":'<input class="_tv-button wide ok" type="button" value="'+$.t("OK")+'" style="margin-right: 10px;"/>')+(t.noButtonCancel?"":'<input class="_tv-button wide cancel" type="button" value="'+$.t("Cancel")+'"/>')+"</div>")),t.okButtonText&&a.modalDialog.find(".ok").val(t.okButtonText),t.cancelButtonText&&a.modalDialog.find(".cancel").val(t.cancelButtonText),a.modalDialog.find(".ok").click(e),a.modalDialog.find("form").submit(e),a.modalDialog.find(".cancel").click(i),a.modalDialog.find("._tv-dialog-title-close").click(i),a.positionDialog(),a.applyHandlers(),a.modalDialog},createModalDialog:function(t,e){var i,o;return e=e||{},null!==a.modalDialog&&a.destroy(),a.modalDialog=$('<div class="_tv-dialog-shadowbox"><div class="_tv-dialog _tv-dialog-modal'+(e.addClass?" "+e.addClass:"")+'">'+(e.noHeader?"":'<div class="_tv-dialog-title">'+(e.noClose?"":'<a class="_tv-dialog-title-close"></a>')+'<span class="_tv-dialog-title-text">'+t+"</span></div>")+'<div class="_tv-dialog-error"><span class="message"></span></div><div class="_tv-dialog-message"><span class="message"></span></div><div class="_tv-dialog-content"></div></div></div>').appendTo($("body")).data("title",t),a._addMessageCloseButton(a.modalDialog.find("._tv-dialog-error")),a._addMessageCloseButton(a.modalDialog.find("._tv-dialog-message")),e.noShadowBox&&a.modalDialog.addClass("transparent"),e.addClass&&a.modalDialog.addClass(e.addClass),e.width&&a.modalDialog.find("._tv-dialog").css({width:e.width}),e.content&&a.modalDialog.find("._tv-dialog-content").html(e.content),i=$(".fancybox-overlay"),i.length&&(o=i.css("z-index"),$("._tv-dialog-shadowbox").css("z-index",o+1)),e.draggable&&a.modalDialog.draggable(a._constrainDraggableOptionsIfNeeded({handle:a.modalDialog.find("._tv-dialog-title")})),e.zIndex&&a.modalDialog.css("z-index",e.zIndex),a.modalDialog},_addMessageCloseButton:function(t){var e=n("close-cross",{"class":"close",title:$.t("Close message")});t.append(e),$(e).on("click",function(){t.animate({marginTop:a.NOTIFICATION_ANIMATION_START_OFFSET,opacity:0},"fast",function(){t.hide()})})},createDialog:function(t,i){var o,n,r;return a.isOpen(t)?(o=a.get(t),o.find("._tv-dialog-content").html(""),o.data("new",!1),o):(i=i||{},o=$(e.render('<div class="_tv-dialog _tv-dialog-nonmodal {{&addClass}}"><div class="_tv-dialog-title{{#hideTitle}} _tv-dialog-title-hidden{{/hideTitle}}{{#hideCloseCross}} _tv-dialog-title-no-close{{/hideCloseCross}}">{{^hideTitle}} {{&title}}{{/hideTitle}}{{^hideCloseCross}}<a class="_tv-dialog-title-close"></a>{{/hideCloseCross}}</div><div class="_tv-dialog-error"><span class="message"></span></div><div class="_tv-dialog-message"><span class="message"></span></div><div class="_tv-dialog-content"></div></div>',{addClass:i.addClass||"",hideTitle:i.hideTitle,hideCloseCross:i.hideCloseCross,title:t})).appendTo($("body")),a._addMessageCloseButton(o.find("._tv-dialog-error")),a._addMessageCloseButton(o.find("._tv-dialog-message")),i.width&&o.css({width:i.width}),i.content&&o.find("._tv-dialog-content").html(i.content),n=0,n=a.dialogs&&a.dialogs.length?s.max($.map(a.dialogs,function(t){return parseInt((t.dialog||t).css("z-index"),10)}))+1:110,o.css("z-index",n),o.data("new",!0),o.data("title",t),o.data("id",a.dialogs.length+1),a.dialogs.push({title:t,dialog:o,id:a.dialogs.length+1}),r={start:function(t,e){var i,o,n=e.helper.css("z-index"),s=0,r=null;for(i=0;i<a.dialogs.length;i++)o=a.dialogs[i].dialog.css("z-index"),o>s&&(s=o,r=a.dialogs[i].dialog);e.helper.css("z-index",s),r.css("z-index",n)}},i.dragHandle?r.handle=i.dragHandle:i.hideTitle||(r.handle="._tv-dialog-title"),i.dragOptions&&$.extend(r,i.dragOptions),o.draggable(a._constrainDraggableOptionsIfNeeded(r)),o)},positionDialog:function(t,e,i){function o(){n.css("margin-left",-Math.round(n.outerWidth()/2)+"px"),n.css("margin-top",-Math.round(n.outerHeight()/2)+"px")}var n,s,r,l,h,c,d,p;i=i||{},e=e||i.position,t?(s=t.width(),r=t.height(),l=$(window).width(),h=$(window).height(),e&&e.top&&e.left?(d=i.forcePosition?e.left:Math.max(2,Math.min(l-s-4,e.left))+"px",c=i.forcePosition?e.top:Math.max(2,Math.min(h-r-4,e.top))+"px"):e&&e.considerScroll?(p=$(document),d=Math.round((l-s)/2+p.scrollLeft())+"px",c=Math.round((h-r)/2+p.scrollTop())+"px"):(d=Math.round((l-s)/2)+"px",c=Math.round((h-r)/2)+"px"),i.fadeIn?t.css({left:d,top:c}).hide().fadeIn("fast"):i.smooth?t.animate({left:d,top:c}):t.css({left:d,top:c})):(t=a.modalDialog,n=t.find("._tv-dialog"),o(),n.resize(o))},applyHandlers:function(t,e){var i,o,n=!t||t===this.modalDialog;e=e||{},i=n?function(){a.destroy()}:function(){a.destroy(t.data("title"))},t=t||a.modalDialog.find("._tv-dialog"),e.beforeDestroy&&t.on("destroy",e.beforeDestroy),t.find("._tv-dialog-title ._tv-dialog-title-close").on("click",i),e.doNotCloseOnBgClick||setTimeout(function(){t.on("mousedownoutside",function(o){var n=$(o.target).parents().andSelf();e.doNotCloseOnBgClickIfShadowbox&&n.is("._tv-dialog-shadowbox")||n.is(".colorpicker, .charts-popup-list, ._tv-dialog, .tvcolorpicker-popup, .symbol-edit-popup, .ui-datepicker, .clockpicker-popover, .pac-container, #global-zeroclipboard-html-bridge")||(t.unbind("mousedownoutside"),i())})},0),t.find('input[type="checkbox"]').change(function(){var t=$(this),e=t.next("._tv-dialog-checkbox-mask");e.toggleClass("disabled",t.prop("disabled")).toggleClass("_tv-dialog-checkbox-mask-active",t.is(":checked"))}),o=t.find('input[type="text"]').focus(function(){$(this).addClass("_tv-dialog-content-textactive")}).blur(function(){$(this).removeClass("_tv-dialog-content-textactive")}).first(),Modernizr.touch||e.notFocusFirst||o.focus(),t.find('input[type="password"]').focus(function(){$(this).addClass("_tv-dialog-content-textactive")}).blur(function(){$(this).removeClass("_tv-dialog-content-textactive")}),t.find("textarea").focus(function(){$(this).addClass("_tv-dialog-content-textareaactive")}).blur(function(){$(this).removeClass("_tv-dialog-content-textareaactive")}),t.find("._tv-dialog-checkbox-mask").click(function(){var t=$(this).prev();t.prop("disabled")||(t.prop("checked",!t[0].checked),t.change())}),e.doNotCloseOnEsc||$(window).bind("keyup.hideDialog",function(e){if("27"==e.keyCode)return t?a.destroy(t.data("title")):a.destroy(),!1}),e.processEnterButton&&$(window).bind("keyup.confirmAndCloseDialog",function(t){
"13"==t.keyCode&&"textarea"!==t.target.tagName.toLowerCase()&&(e.processEnterButton.click(),$(window).unbind("keyup.confirmAndCloseDialog"))})},showError:function(t,e,i){a.showMessage(t,e,$.extend(i||{},{isError:!0}))},showMessage:function(t,e,i){var o,n,s;e||(e=$("._tv-dialog")),i=i||{},o=i.isError&&"_tv-dialog-error"||"_tv-dialog-message",n=e.find("."+o),s=n.find(".message"),i.html?s.html("string"==typeof i.html?i.html:t):s.text(t),s.css("width",e.width()).toggleClass("selectable",!!i.selectable),n.toggleClass("with-close",!!i.withClose).css({marginTop:a.NOTIFICATION_ANIMATION_START_OFFSET,opacity:"0"}).show().animate({marginTop:0,opacity:1},"fast"),i.withClose||n.on("touchstartoutside  mousedownoutside keydownoutside",function r(){n.animate({marginTop:a.NOTIFICATION_ANIMATION_START_OFFSET,opacity:0},"fast",function(){n.hide()}),n.off("touchstartoutside  mousedownoutside keydownoutside",r)})},isOpen:function(t){for(var e=0;e<a.dialogs.length;e++)if(a.dialogs[e].title==t)return!0;return!1},get:function(t){for(var e=0;e<a.dialogs.length;e++)if(a.dialogs[e].title==t)return a.dialogs[e].dialog},submit:function(t,e){var i=e?$(e):$("._tv-dialog form").first(),o=i.serialize(),n=i.attr("action");$.post(n,o,function(e){void 0!==t&&t(e)},"json")},destroy:function(t,e){if(void 0!==a.chart&&(a.chart.destroy(),delete a.chart),$(window).unbind("keyup.hideDialog"),$(window).unbind("keyup.confirmAndCloseDialog"),t&&"string"==typeof t)for(var i=0;i<a.dialogs.length;i++)a.dialogs[i].title==t&&(a.dialogs[i].dialog.trigger("destroy",e),$(document).unbind("mouseup.hideDialog"+a.dialogs[i].id),$("input",a.dialogs[i].dialog).blur(),a.dialogs[i].dialog.remove(),a.dialogs.splice(i,1));else a.modalDialog&&(a.modalDialog.find("._tv-dialog").trigger("destroy"),a.modalDialog.remove(),a.modalDialog=null)},changeTitle:function(t,e){t&&a.dialogs.some(function(i){var o,n;if(i.title==t)return o=i.dialog,n=o.find("._tv-dialog-title"),i.title=e,o.data("title",e),n.html(n.html().replace(t,e)),n.find("a").on("click",function(){a.destroy(e)}),!0})},calcHeight:function(t,e,i){null==i&&(i=20),t+=i;var o=parseInt($("body").height(),10);return t>o&&(e-=t-o,e=Math.max(0,e)),e},resizeContent:function(t,e,i){var o,n;null==i&&(i=20),t+=i,o=parseInt($("body").height(),10),n=e.height(),t>o&&(n-=t-o,n=Math.max(0,n),e.height(n))},resizeContentWidth:function(t,e,i){var o,n;null==i&&(i=20),t+=i,o=parseInt($(window).width(),10),n=e.width(),t>o&&(n-=t-o,n=Math.max(0,n),e.width(n))}};void 0!==r&&r&&r.exports&&(r.exports=a)}).call(e,i(1),i(33),i(63),i(26),i(21),i(2)(t))},function(t,e,i){(function(e){"use strict";function i(t){if(this._listeners=new e,this._childs=[],void 0!==t&&null!==t)if(this.isPrimitiveType(t))this._value=t;else for(var i in t)this.addProperty(i,t[i])}i.prototype.merge=function(t){var e,i;if(null!=t)if(this.isPrimitiveType(t))this._value=t;else if(Array.isArray(t))for(e=0;e<t.length;e++)this[e]?this[e].merge(t[e]):this.addProperty(e,t[e]);else for(i in t)this[i]?this[i].merge(t[i]):this.addProperty(i,t[i])},i.prototype.state=function(t){var e,i,o,n,s,r=this._value;for(void 0===r&&(r={}),e=0;e<this._childs.length;e++)if(i=this._childs[e],!t||t.indexOf(i)===-1)if(t){for(o=[],n=0;n<t.length;n++)s=t[n],s.startsWith(i+".")&&o.push(s.substr(i.length+1));r[i]=this[i].state(o)}else r[i]=this[i].state();return r},i.prototype.isPrimitiveType=function(t){return!!isNumber(t)||(!!new TradingView.TypeValidator(String).check(t)||!!TradingView.isBoolean(t))},i.prototype.value=function(){return this._value},i.prototype.listeners=function(){return this._listeners},i.prototype.childCount=function(){return this._childs.length},i.prototype.setValue=function(t,e){(this._value!==t||e)&&(this._value=t,this._listeners.fire(this))},i.prototype.setValueSilently=function(t){this._value=t},i.prototype.addProperty=function(t,e){var o=new i(e);this[t]=o,this._childs.push(t),o.listeners().subscribe(this,i.prototype.childChanged)},i.prototype.removeProperty=function(t){this[t].listeners().unsubscribe(this,i.prototype.childChanged),delete this[t],this._childs=this._childs.filter(function(e){return e!=t})},i.prototype.addChild=function(t,e){this[t]=e,$.inArray(t,this._childs)==-1&&this._childs.push(t),e.listeners().subscribe(this,i.prototype.childChanged)},i.prototype.childChanged=function(t,e){this.listeners().fire(this)},i.prototype.subscribe=function(t,e){this.listeners().subscribe(t,e)},i.prototype.unsubscribe=function(t,e){this.listeners().unsubscribe(t,e)},t.exports=i}).call(e,i(32))},function(t,e,i){"use strict";TradingView.FeatureToggle={force_prefix:"forcefeaturetoggle.",enableFeature:function(t){TVLocalStorage.setItem(this.force_prefix+t,"true")},disableFeature:function(t){TVLocalStorage.removeItem(this.force_prefix+t)}},TradingView.isFeatureEnabled=function(t){function e(e){return TVLocalStorage.setItem(o+e,Math.random()<=t[e]),TVLocalStorage.getItem(o+e)}function i(t){var e=["alerts-maintenance","backtesting","phone_verification","widgetbar.old-my-ideas","japanese_alerts"];return e.indexOf(t)===-1}var o="featuretoggle.";return TradingView.pushStreamMultiplexer&&TradingView.pushStreamMultiplexer.on("featuretoggle",function(i){t[i.name]=i.state,e(i.name)}),function(n){if("local"===window.environment&&i(n))return!0;if(t[n]&&t[n]===-1)return!1;if("true"===TVLocalStorage.getItem(TradingView.FeatureToggle.force_prefix+n)||window.is_authenticated&&"undefined"!=typeof user&&user&&user.settings&&user.settings[TradingView.FeatureToggle.force_prefix+n])return!0;if(!t[n])return!1;if(1===t[n])return!0;var s=TVLocalStorage.getItem(o+n);return void 0===s||null===s?e(n):"true"===s}}(window.featureToggleState||{}),e.FeatureToggle=TradingView.FeatureToggle,e.isFeatureEnabled=TradingView.isFeatureEnabled},function(t,e){"use strict";!function(t){if(document.createElement("canvas")&&document.createElement("canvas").getContext){var e=function(e){var i=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(t.devicePixelRatio||1)/i}(document.createElement("canvas").getContext("2d"));e<2||(t.hidpiCanvasRatio=e,function(t){var i=function(t,e){for(var i in t)t.hasOwnProperty(i)&&e(t[i],i)},o={fillRect:"all",clearRect:"all",strokeRect:"all",moveTo:"all",lineTo:"all",arc:[0,1,2],arcTo:"all",bezierCurveTo:"all",isPointinPath:"all",isPointinStroke:"all",quadraticCurveTo:"all",rect:"all",translate:"all",createRadialGradient:"all",createLinearGradient:"all",drawImagePatchedSource:[1,2,3,4],drawImagePatchedSourceAndDest:[1,2,3,4,5,6,7,8]};t.drawImagePatchedSource=t.drawImage,t.drawImagePatchedSourceAndDest=t.drawImage,i(o,function(i,o){var n=t[o];t[o]=function(){var t,o;if("all"===i)for(o=[],t=arguments.length;0<t--;)o[t]=arguments[t]*e;else for(o=Array.prototype.slice.call(arguments),t=i.length;0<t--;)o[i[t]]&&(o[i[t]]=o[i[t]]*e);return n.apply(this,o)}}),t.drawImage=function(t){return function(){return arguments[0]instanceof HTMLCanvasElement?t.drawImagePatchedSourceAndDest.apply(this,arguments):t.drawImagePatchedSource.apply(this,arguments)}}(t),t.fillText=function(t){return function(){var i=Array.prototype.slice.call(arguments);i[1]*=e,i[2]*=e,this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,function(t,i,o){return i*e+o}),t.apply(this,i),this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,function(t,i,o){return i/e+o})}}(t.fillText),t.strokeText=function(t){return function(){var i=Array.prototype.slice.call(arguments);i[1]*=e,i[2]*=e,this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,function(t,i,o){return i*e+o}),t.apply(this,i),this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,function(t,i,o){return i/e+o})}}(t.strokeText)}(CanvasRenderingContext2D.prototype),function(t){t.getContext=function(t){return function(i){var o=t.call(this,i);return"2d"===i&&this.width!=Math.floor(parseInt(this.style.width)*e)&&(this.style.height=this.height+"px",this.style.width=this.width+"px",this.width*=e,this.height*=e),o}}(t.getContext)}(HTMLCanvasElement.prototype))}}(window)},function(t,e,i){(function(t){"use strict";function o(t,e,i,o,n){function s(t,i,o,n){var r,a=i.split("."),l=a[0];if(e&&e[l]&&(l=e[l]),!t.hasOwnProperty(l)&&n&&n===l)return r=a.splice(1).join("."),void s(t,r,o);if(!t.hasOwnProperty(l))throw"illegal path";a.length>1?(r=a.splice(1).join("."),s(t[l],r,o)):t[l]&&t[l].setValue?t[l].setValue(o):t[l]=o}if(void 0!==o&&o)for(var r in o)try{s(t,r,o[r],n)}catch(a){void 0!==i&&i||TradingView.logWarn("Path `"+r+"` does not exist.")}}function n(t,e,i,n){"undefined"!=typeof __defaultsOverrides&&__defaultsOverrides&&o(t,e,i,__defaultsOverrides,n)}function s(){var t=/^linetool.+/;Object.keys(TradingView.defaultProperties).forEach(function(e){t.test(e)&&n(TradingView.defaultProperties[e],null,!1,e)})}function r(t,e){return e?l(t,e):a(t)}function a(t){var e,i=g(t);return window._UNIT_TESTS||(e=TradingView.clone(TVSettings.getJSON(t,null)),e&&TradingView.merge(i,e)),i}function l(t,e){var i,o,n=g(t);return window._UNIT_TESTS||(i=TradingView.clone(TVSettings.getJSON(t,null)),t.startsWith("study_")&&i&&u.isVersionHead(i.version)&&(o=e.updateStudyState(i,i),i=o),TradingView.merge(n,i)),n}var h=i(67).LineDataSource,c=i(77),d=i(195),p=i(206).LineToolPitchfork,u=i(139),_=i(107),f=i(54).StudyConsts,g=function(e){var i,o,r,a,l,u,_,g,m={a:function(t,e){return{color:t,visible:e}},b:function(t,e,i){return{coeff:t,color:e,visible:i}},c:function(t,e,i,o,n){return{coeff:t,color:e,visible:i,linestyle:void 0===o?CanvasEx.LINESTYLE_SOLID:o,linewidth:void 0===n?1:n}},d:function(t,e,i){return{color:t,width:i,visible:e}},e:function(t,e,i,o,n){return{color:t,visible:e,width:i,x:o,y:n}},f:function(t,e,i,o,n,s){return{coeff1:t,coeff2:e,color:i,visible:o,linestyle:void 0===n?CanvasEx.LINESTYLE_SOLID:n,linewidth:void 0===s?1:s}}};if(void 0===TradingView.defaultProperties){switch(window.language){case"ru":i="Europe/Moscow";break;case"ja":i="Asia/Tokyo";break;default:i="Etc/UTC"}TradingView.defaultProperties={chartproperties:{timezone:i,timeScale:{barSpacing:TradingView.DEFAULT_BAR_SPACING,rightOffset:TradingView.DEFAULT_RIGHT_OFFSET},dataWindowProperties:{background:"rgba( 255, 254, 206, 0.2)",border:"rgba( 96, 96, 144, 1)",font:"Verdana",fontBold:!1,fontItalic:!1,fontSize:10,transparency:80,visible:!0},paneProperties:{background:"rgba( 255, 255, 255, 1)",gridProperties:{color:"#E6E6E6",style:CanvasEx.LINESTYLE_SOLID},vertGridProperties:{color:"rgba( 230, 230, 230, 1)",style:CanvasEx.LINESTYLE_SOLID},horzGridProperties:{color:"rgba( 230, 230, 230, 1)",style:CanvasEx.LINESTYLE_SOLID},crossHairProperties:{color:"rgba( 183, 183, 183, 1)",style:CanvasEx.LINESTYLE_DASHED,transparency:0,width:1},topMargin:5,bottomMargin:5,leftAxisProperties:{autoScale:!0,autoScaleDisabled:!1,percentage:!1,percentageDisabled:!1,log:!1,logDisabled:!1,alignLabels:!0},rightAxisProperties:{autoScale:!0,autoScaleDisabled:!1,percentage:!1,percentageDisabled:!1,log:!1,logDisabled:!1,alignLabels:!0},overlayPropreties:{autoScale:!0,autoScaleDisabled:!1,percentage:!1,percentageDisabled:!1,log:!1,logDisabled:!1,alignLabels:!0},legendProperties:{showStudyArguments:!0,showStudyTitles:!0,showStudyValues:!0,showSeriesTitle:!0,showSeriesOHLC:!0,showLegend:!0}},scalesProperties:{showLeftScale:!1,showRightScale:!0,backgroundColor:"rgba( 255, 255, 255, 1)",lineColor:"rgba( 85, 85, 85, 1)",textColor:"rgba( 85, 85, 85, 1)",fontSize:11,scaleSeriesOnly:!1,showSeriesLastValue:!0,showStudyLastValue:!1,showSymbolLabels:!1,showStudyPlotLabels:!1},mainSeriesProperties:{style:c.STYLE_CANDLES,esdShowDividends:!0,esdShowSplits:!0,esdShowEarnings:!0,esdShowBreaks:!1,esdBreaksStyle:{color:"rgba( 226, 116, 91, 1)",style:CanvasEx.LINESTYLE_DASHED,width:1},esdFlagSize:2,showCountdown:!0,showInDataWindow:!0,visible:!0,silentIntervalChange:!1,showPriceLine:!0,priceLineWidth:1,lockScale:!1,minTick:"default",extendedHours:!1,sessVis:!1,candleStyle:{upColor:"rgba( 107, 165, 131, 1)",downColor:"rgba( 215, 84, 66, 1)",drawWick:!0,drawBorder:!0,borderColor:"rgba( 55, 134, 88, 1)",borderUpColor:"rgba( 34, 84, 55, 1)",borderDownColor:"rgba( 91, 26, 19, 1)",wickColor:"rgba( 115, 115, 117, 1)",wickUpColor:"rgba( 115, 115, 117, 1)",wickDownColor:"rgba( 115, 115, 117, 1)",barColorsOnPrevClose:!1},hollowCandleStyle:{upColor:"rgba( 107, 165, 131, 1)",downColor:"rgba( 215, 84, 66, 1)",drawWick:!0,drawBorder:!0,borderColor:"rgba( 55, 134, 88, 1)",borderUpColor:"rgba( 34, 84, 55, 1)",borderDownColor:"rgba( 91, 26, 19, 1)",wickColor:"rgba( 115, 115, 117, 1)",wickUpColor:"rgba( 115, 115, 117, 1)",wickDownColor:"rgba( 115, 115, 117, 1)"},haStyle:{upColor:"rgba( 107, 165, 131, 1)",downColor:"rgba( 215, 84, 66, 1)",drawWick:!0,drawBorder:!0,borderColor:"rgba( 55, 134, 88, 1)",borderUpColor:"rgba( 34, 84, 55, 1)",borderDownColor:"rgba( 91, 26, 19, 1)",wickColor:"rgba( 115, 115, 117, 1)",wickUpColor:"rgba( 115, 115, 117, 1)",wickDownColor:"rgba( 115, 115, 117, 1)",showRealLastPrice:!1,barColorsOnPrevClose:!1},barStyle:{upColor:"rgba( 107, 165, 131, 1)",downColor:"rgba( 215, 84, 66, 1)",barColorsOnPrevClose:!1,dontDrawOpen:!1},lineStyle:{color:"rgba( 60, 120, 216, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,priceSource:"close",styleType:c.STYLE_LINE_TYPE_SIMPLE},areaStyle:{color1:"rgba( 96, 96, 144, 0.5)",color2:"rgba( 1, 246, 245, 0.5)",linecolor:"rgba( 0, 148, 255, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,priceSource:"close",transparency:50},priceAxisProperties:{autoScale:!0,autoScaleDisabled:!1,percentage:!1,percentageDisabled:!1,log:!1,logDisabled:!1},renkoStyle:{upColor:"rgba( 107, 165, 131, 1)",downColor:"rgba( 215, 84, 66, 1)",borderUpColor:"rgba( 34, 84, 55, 1)",borderDownColor:"rgba( 91, 26, 19, 1)",upColorProjection:"rgba( 74, 214, 190, 1)",downColorProjection:"rgba( 214, 73, 207, 1)",borderUpColorProjection:"rgba( 34, 84, 55, 1)",borderDownColorProjection:"rgba( 91, 26, 19, 1)",inputs:{source:"close",boxSize:3,style:"ATR",atrLength:14},inputInfo:{source:{name:"Source"},boxSize:{name:"Box size"},style:{name:"Style"},atrLength:{name:"ATR Length"}}},pbStyle:{upColor:"rgba( 107, 165, 131, 1)",downColor:"rgba( 215, 84, 66, 1)",borderUpColor:"rgba( 34, 84, 55, 1)",borderDownColor:"rgba( 91, 26, 19, 1)",upColorProjection:"rgba( 74, 214, 190, 1)",downColorProjection:"rgba( 214, 73, 207, 1)",borderUpColorProjection:"rgba( 34, 84, 55, 1)",borderDownColorProjection:"rgba( 91, 26, 19, 1)",inputs:{source:"close",lb:3},inputInfo:{source:{name:"Source"},lb:{name:"Number of line"}}},kagiStyle:{upColor:"rgba( 107, 165, 131, 1)",downColor:"rgba( 215, 84, 66, 1)",upColorProjection:"rgba( 74, 214, 190, 1)",downColorProjection:"rgba( 214, 73, 207, 1)",inputs:{source:"close",style:"Traditional",atrLength:14,reversalAmount:1},inputInfo:{source:{name:"Source"},style:{name:"Style"},atrLength:{name:"ATR Length"},reversalAmount:{name:"Reversal amount"}}},pnfStyle:{upColor:"rgba( 107, 165, 131, 1)",downColor:"rgba( 215, 84, 66, 1)",upColorProjection:"rgba( 74, 214, 190, 1)",downColorProjection:"rgba( 214, 73, 207, 1)",inputs:{sources:"HL",reversalAmount:3,boxSize:1,style:"ATR",atrLength:14},inputInfo:{sources:{name:"Source"},boxSize:{name:"Box size"},reversalAmount:{name:"Reversal amount"},style:{name:"Style"},atrLength:{name:"ATR Length"}}}},symbolWatermarkProperties:{color:"rgba( 85, 85, 85, 0.15)",transparency:85},chartEventsSourceProperties:{visible:!0,futureOnly:!0,breaks:{color:"rgba(85, 85, 85, 1)",visible:!1,style:CanvasEx.LINESTYLE_DASHED,width:1}},tradingProperties:{showPositions:!0,showOrders:!0,showExecutions:!0,extendLeft:!0,lineLength:5,lineWidth:1,lineStyle:CanvasEx.LINESTYLE_DASHED},alertsProperties:{labels:{visible:!0,color:"rgba( 215, 84, 66, 1)",highlightColor:"rgba( 255, 255, 51, 1)",hoverColor:"rgba( 245, 227, 135, 1)",line:{visible:!0,style:CanvasEx.LINESTYLE_DASHED,width:1}},fakeLabels:{visible:!0,color:"rgba( 119, 119, 119, 1)",line:{visible:!0,style:CanvasEx.LINESTYLE_DASHED,width:1}},drawingIcon:{color:"rgba( 170, 170, 170, 1)"}},editorFontsList:["Verdana","Courier New","Times New Roman","Arial"],volumePaneSize:"large"},drawings:{magnet:!1,stayInDrawingMode:!1,drawOnAllCharts:!0,crossHairColor:"rgba( 183, 183, 183, 1)",crossHairStyle:CanvasEx.LINESTYLE_DASHED,crossHairWidth:1},linetoolorder:{singleChartOnly:!0,extendLeft:"inherit",lineLength:"inherit",lineColor:"rgba( 255, 0, 0, 1)",lineTransparency:0,lineStyle:"inherit",lineWidth:"inherit",bodyBorderColor:"rgba( 255, 0, 0, 0)",bodyBorderTransparency:0,bodyBackgroundColor:"rgba( 255, 255, 255, 0.75)",bodyBackgroundTransparency:25,bodyTextColor:"rgba( 255, 0, 0, 0)",bodyTextTransparency:0,bodyFontFamily:"Verdana",bodyFontSize:7,bodyFontBold:!0,bodyFontItalic:!1,quantityBorderColor:"rgba( 255, 0, 0, 0)",quantityBorderTransparency:0,quantityBackgroundColor:"rgba( 255, 0, 0, 0.75)",quantityBackgroundTransparency:25,quantityTextColor:"rgba( 255, 255, 255, 1)",quantityTextTransparency:0,quantityFontFamily:"Verdana",quantityFontSize:7,quantityFontBold:!0,quantityFontItalic:!1,cancelButtonBorderColor:"rgba( 255, 0, 0, 1)",cancelButtonBorderTransparency:0,cancelButtonBackgroundColor:"rgba( 255, 255, 255, 0.75)",cancelButtonBackgroundTransparency:25,cancelButtonIconColor:"rgba( 255, 0, 0, 1)",cancelButtonIconTransparency:0,tooltip:""},linetoolposition:{singleChartOnly:!0,extendLeft:"inherit",lineLength:"inherit",lineColor:"rgba( 0, 113, 224, 1)",lineTransparency:0,lineStyle:"inherit",lineWidth:"inherit",bodyBorderColor:"rgba( 0, 113, 224, 1)",bodyBorderTransparency:0,bodyBackgroundColor:"rgba( 255, 255, 255, 0.75)",bodyBackgroundTransparency:25,bodyTextColor:"rgba( 0, 113, 224, 1)",bodyTextTransparency:0,bodyFontFamily:"Verdana",bodyFontSize:7,bodyFontBold:!0,bodyFontItalic:!1,quantityBorderColor:"rgba( 0, 113, 224, 1)",quantityBorderTransparency:0,quantityBackgroundColor:"rgba( 0, 113, 224, 0.75)",quantityBackgroundTransparency:25,quantityTextColor:"rgba( 255, 255, 255, 1)",quantityTextTransparency:0,quantityFontFamily:"Verdana",quantityFontSize:7,quantityFontBold:!0,quantityFontItalic:!1,reverseButtonBorderColor:"rgba( 0, 113, 224, 1)",reverseButtonBorderTransparency:0,reverseButtonBackgroundColor:"rgba( 255, 255, 255, 0.75)",reverseButtonBackgroundTransparency:25,reverseButtonIconColor:"rgba( 0, 113, 224, 1)",reverseButtonIconTransparency:0,closeButtonBorderColor:"rgba( 0, 113, 224, 1)",closeButtonBorderTransparency:0,closeButtonBackgroundColor:"rgba( 255, 255, 255, 0.75)",closeButtonBackgroundTransparency:25,closeButtonIconColor:"rgba( 0, 113, 224, 1)",closeButtonIconTransparency:0,tooltip:""},linetoolexecution:{singleChartOnly:!0,direction:"buy",arrowHeight:8,arrowSpacing:1,arrowColor:"rgba( 0, 0, 255, 1)",arrowTransparency:0,text:"",textColor:"rgba( 0, 0, 0, 1)",textTransparency:0,fontFamily:"Verdana",fontSize:8,fontBold:!1,fontItalic:!1,tooltip:""},linetoolicon:{singleChartOnly:!0,clonable:!0,color:"rgba( 61, 133, 198, 1)",snapTo45Degrees:!0,size:40,icon:9786,angle:.5*Math.PI,scale:1},linetoolbezierquadro:{clonable:!0,linecolor:"rgba( 21, 153, 128, 1)",linewidth:1,fillBackground:!1,backgroundColor:"rgba( 21, 56, 153, 0.5)",transparency:50,linestyle:CanvasEx.LINESTYLE_SOLID,extendLeft:!1,extendRight:!1,leftEnd:h.LINEEND_NORMAL,rightEnd:h.LINEEND_NORMAL},linetoolbeziercubic:{clonable:!0,linecolor:"rgba( 21, 153, 128, 1)",linewidth:1,fillBackground:!1,backgroundColor:"rgba( 21, 56, 153, 0.5)",transparency:50,linestyle:CanvasEx.LINESTYLE_SOLID,extendLeft:!1,extendRight:!1,leftEnd:h.LINEEND_NORMAL,rightEnd:h.LINEEND_NORMAL},linetooltrendline:{clonable:!0,linecolor:"rgba( 21, 153, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,extendLeft:!1,extendRight:!1,leftEnd:h.LINEEND_NORMAL,rightEnd:h.LINEEND_NORMAL,font:"Verdana",textcolor:"rgba( 21, 119, 96, 1)",fontsize:12,bold:!1,italic:!1,snapTo45Degrees:!0,alwaysShowStats:!1,showPriceRange:!1,showBarsRange:!1,showDateTimeRange:!1,showDistance:!1,showAngle:!1},linetooltimecycles:{clonable:!0,linecolor:"rgba(21, 153, 128, 1)",linewidth:1,fillBackground:!0,backgroundColor:"rgba(106, 168, 79, 0.5)",transparency:50,linestyle:CanvasEx.LINESTYLE_SOLID},linetoolsineline:{clonable:!0,linecolor:"rgba( 21, 153, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},linetooltrendangle:{singleChartOnly:!0,clonable:!0,linecolor:"rgba( 21, 153, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,snapTo45Degrees:!0,font:"Verdana",textcolor:"rgba( 21, 119, 96, 1)",fontsize:12,bold:!0,italic:!1,alwaysShowStats:!1,showPriceRange:!1,showBarsRange:!1,extendRight:!1,extendLeft:!1},linetooldisjointangle:{clonable:!0,linecolor:"rgba( 18, 159, 92, 1)",linewidth:2,linestyle:CanvasEx.LINESTYLE_SOLID,fillBackground:!0,backgroundColor:"rgba( 106, 168, 79, 0.5)",transparency:50,extendLeft:!1,extendRight:!1,leftEnd:h.LINEEND_NORMAL,rightEnd:h.LINEEND_NORMAL,font:"Verdana",textcolor:"rgba( 18, 159, 92, 1)",fontsize:12,bold:!1,italic:!1,showPrices:!1,showPriceRange:!1,showDateTimeRange:!1,showBarsRange:!1},linetoolflatbottom:{clonable:!0,linecolor:"rgba( 73, 133, 231, 1)",linewidth:2,linestyle:CanvasEx.LINESTYLE_SOLID,fillBackground:!0,backgroundColor:"rgba( 21, 56, 153, 0.5)",transparency:50,extendLeft:!1,extendRight:!1,leftEnd:h.LINEEND_NORMAL,rightEnd:h.LINEEND_NORMAL,font:"Verdana",textcolor:"rgba( 73, 133, 231, 1)",fontsize:12,bold:!1,italic:!1,showPrices:!1,showPriceRange:!1,showDateTimeRange:!1,showBarsRange:!1},linetoolfibspiral:{clonable:!0,linecolor:"rgba( 21, 153, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},linetooldaterange:{clonable:!0,linecolor:"rgba( 88, 88, 88, 1)",linewidth:1,font:"Verdana",textcolor:"rgba( 255, 255, 255, 1)",fontsize:12,fillLabelBackground:!0,labelBackgroundColor:"rgba( 91, 133, 191, 0.9)",labelBackgroundTransparency:30,fillBackground:!0,backgroundColor:"rgba( 186, 218, 255, 0.4)",backgroundTransparency:60,drawBorder:!1,borderColor:"rgba( 102, 123, 139, 1)"},linetoolpricerange:{clonable:!0,linecolor:"rgba( 88, 88, 88, 1)",linewidth:1,font:"Verdana",textcolor:"rgba( 255, 255, 255, 1)",fontsize:12,fillLabelBackground:!0,labelBackgroundColor:"rgba( 91, 133, 191, 0.9)",labelBackgroundTransparency:30,fillBackground:!0,backgroundColor:"rgba( 186, 218, 255, 0.4)",backgroundTransparency:60,drawBorder:!1,borderColor:"rgba( 102, 123, 139, 1)"},linetooldateandpricerange:{clonable:!0,linecolor:"rgba( 88, 88, 88, 1)",linewidth:1,font:"Verdana",textcolor:"rgba( 255, 255, 255, 1)",fontsize:12,fillLabelBackground:!0,labelBackgroundColor:"rgba( 91, 133, 191, 0.9)",labelBackgroundTransparency:30,fillBackground:!0,backgroundColor:"rgba( 186, 218, 255, 0.4)",backgroundTransparency:60,drawBorder:!1,borderColor:"rgba( 102, 123, 139, 1)"},linetoolriskrewardshort:{isShort:!0,clonable:!0,linecolor:"rgba( 88, 88, 88, 1)",linewidth:1,font:"Verdana",textcolor:"rgba(255, 255, 255, 1)",fontsize:12,fillLabelBackground:!0,labelBackgroundColor:"rgba( 88, 88, 88, 1)",labelBackgroundTransparency:0,fillBackground:!0,stopBackground:"rgba( 255, 0, 0, 0.2)",profitBackground:"rgba( 0, 160, 0, 0.2)",stopBackgroundTransparency:80,profitBackgroundTransparency:80,drawBorder:!1,borderColor:"rgba( 102, 123, 139, 1)"},linetoolriskrewardlong:{isShort:!1,clonable:!0,linecolor:"rgba( 88, 88, 88, 1)",linewidth:1,font:"Verdana",textcolor:"rgba(255, 255, 255, 1)",fontsize:12,fillLabelBackground:!0,labelBackgroundColor:"rgba( 88, 88, 88, 1)",labelBackgroundTransparency:0,fillBackground:!0,stopBackground:"rgba( 255, 0, 0, 0.2)",profitBackground:"rgba( 0, 160, 0, 0.2)",stopBackgroundTransparency:80,profitBackgroundTransparency:80,drawBorder:!1,borderColor:"rgba( 102, 123, 139, 1)"},linetoolarrow:{clonable:!0,linecolor:"rgba( 111, 136, 198, 1)",linewidth:2,linestyle:CanvasEx.LINESTYLE_SOLID,extendLeft:!1,extendRight:!1,leftEnd:h.LINEEND_NORMAL,rightEnd:h.LINEEND_ARROW,font:"Verdana",textcolor:"rgba( 21, 119, 96, 1)",fontsize:12,bold:!1,italic:!1,alwaysShowStats:!1,showPriceRange:!1,showBarsRange:!1,showDateTimeRange:!1,showDistance:!1,showAngle:!1},linetoolray:{clonable:!0,linecolor:"rgba( 21, 153, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,extendLeft:!1,extendRight:!0,leftEnd:h.LINEEND_NORMAL,rightEnd:h.LINEEND_NORMAL,font:"Verdana",textcolor:"rgba( 21, 119, 96, 1)",fontsize:12,bold:!1,italic:!1,alwaysShowStats:!1,showPriceRange:!1,showBarsRange:!1,showDateTimeRange:!1,showDistance:!1,showAngle:!1},linetoolextended:{clonable:!0,linecolor:"rgba( 21, 153, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,extendLeft:!0,extendRight:!0,leftEnd:h.LINEEND_NORMAL,rightEnd:h.LINEEND_NORMAL,font:"Verdana",textcolor:"rgba( 21, 119, 96, 1)",fontsize:12,bold:!1,italic:!1,alwaysShowStats:!1,showPriceRange:!1,showBarsRange:!1,showDateTimeRange:!1,showDistance:!1,showAngle:!1},linetoolhorzline:{clonable:!0,linecolor:"rgba( 128, 204, 219, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,showPrice:!0,showLabel:!1,text:"",font:"Verdana",textcolor:"rgba( 21, 119, 96, 1)",fontsize:12,bold:!1,italic:!1,horzLabelsAlign:"center",vertLabelsAlign:"top"},linetoolhorzray:{clonable:!0,linecolor:"rgba( 128, 204, 219, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,showPrice:!0,showLabel:!1,text:"",font:"Verdana",textcolor:"rgba( 21, 119, 96, 1)",fontsize:12,bold:!1,italic:!1,horzLabelsAlign:"center",vertLabelsAlign:"top"},linetoolvertline:{clonable:!0,linecolor:"rgba( 128, 204, 219, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,showTime:!0},linetoolcirclelines:{clonable:!0,trendline:{visible:!0,color:"rgba( 128, 128, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED},linecolor:"rgba( 128, 204, 219, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},linetoolfibtimezone:{horzLabelsAlign:"right",vertLabelsAlign:"bottom",clonable:!0,baselinecolor:"rgba( 128, 128, 128, 1)",linecolor:"rgba( 0, 85, 219, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,showLabels:!0,font:"Verdana",fillBackground:!1,transparency:80,trendline:{visible:!0,color:"rgba( 128, 128, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED},level1:m.c(0,"rgba( 128, 128, 128, 1)",!0),level2:m.c(1,"rgba( 0, 85, 219, 1)",!0),level3:m.c(2,"rgba( 0, 85, 219, 1)",!0),level4:m.c(3,"rgba( 0, 85, 219, 1)",!0),level5:m.c(5,"rgba( 0, 85, 219, 1)",!0),level6:m.c(8,"rgba( 0, 85, 219, 1)",!0),level7:m.c(13,"rgba( 0, 85, 219, 1)",!0),level8:m.c(21,"rgba( 0, 85, 219, 1)",!0),level9:m.c(34,"rgba( 0, 85, 219, 1)",!0),level10:m.c(55,"rgba( 0, 85, 219, 1)",!0),level11:m.c(89,"rgba( 0, 85, 219, 1)",!0),__collectibleLines:["trendline","level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11"]},linetooltext:{clonable:!0,color:"rgba( 102, 123, 139, 1)",text:$.t("Text"),font:"Verdana",fontsize:20,fillBackground:!1,backgroundColor:"rgba( 91, 133, 191, 0.9)",backgroundTransparency:70,drawBorder:!1,borderColor:"rgba( 102, 123, 139, 1)",bold:!1,italic:!1,locked:!1,fixedSize:!0,wordWrap:!1,wordWrapWidth:400},linetooltextabsolute:{singleChartOnly:!0,clonable:!0,color:"rgba( 102, 123, 139, 1)",text:$.t("Text"),font:"Verdana",fontsize:20,fillBackground:!1,backgroundColor:"rgba( 155, 190, 213, 0.3)",backgroundTransparency:70,drawBorder:!1,borderColor:"rgba( 102, 123, 139, 1)",bold:!1,italic:!1,locked:!0,wordWrap:!1,wordWrapWidth:400},linetoolballoon:{clonable:!0,color:"rgba( 102, 123, 139, 1)",backgroundColor:"rgba( 255, 254, 206, 0.7)",borderColor:"rgba( 140, 140, 140, 1)",fontWeight:"bold",fontsize:12,font:"Arial",transparency:30,text:$.t("Comment")},linetoolbrush:{clonable:!0,linecolor:"rgba( 53, 53, 53, 1)",linewidth:2,linestyle:CanvasEx.LINESTYLE_SOLID,smooth:5,fillBackground:!1,backgroundColor:"rgba( 21, 56, 153, 0.5)",transparency:50,leftEnd:h.LINEEND_NORMAL,rightEnd:h.LINEEND_NORMAL},linetoolpolyline:{clonable:!0,linecolor:"rgba( 53, 53, 53, 1)",linewidth:2,linestyle:CanvasEx.LINESTYLE_SOLID,fillBackground:!0,backgroundColor:"rgba( 21, 56, 153, 0.5)",transparency:50,filled:!1},linetoolarrowmark:{clonable:!0,color:"rgba( 120, 120, 120, 1)",text:"",fontsize:20,font:"Verdana"},linetoolarrowmarkleft:{clonable:!0,color:"rgba( 120, 120, 120, 1)",text:"",fontsize:20,font:"Verdana"},linetoolarrowmarkup:{clonable:!0,color:"rgba( 120, 120, 120, 1)",text:"",fontsize:20,font:"Verdana"},linetoolarrowmarkright:{clonable:!0,color:"rgba( 120, 120, 120, 1)",text:"",fontsize:20,font:"Verdana"},linetoolarrowmarkdown:{clonable:!0,color:"rgba( 120, 120, 120, 1)",text:"",fontsize:20,font:"Verdana"},linetoolflagmark:{clonable:!0,color:"rgba( 255, 0, 0, 1)"},linetoolnote:{clonable:!0,markerColor:"rgba( 46, 102, 255, 1)",textColor:"rgba( 0, 0, 0, 1)",backgroundColor:"rgba( 255, 255, 255, 1)",backgroundTransparency:0,text:$.t("Text"),font:"Arial",fontSize:12,bold:!1,italic:!1,locked:!1,fixedSize:!0},linetoolnoteabsolute:{singleChartOnly:!0,clonable:!0,markerColor:"rgba( 46, 102, 255, 1)",textColor:"rgba( 0, 0, 0, 1)",backgroundColor:"rgba( 255, 255, 255, 1)",backgroundTransparency:0,text:$.t("Text"),font:"Arial",fontSize:12,bold:!1,italic:!1,locked:!0,fixedSize:!0},linetoolthumbup:{clonable:!0,color:"rgba( 0, 128, 0, 1)"},linetoolthumbdown:{clonable:!0,color:"rgba( 255, 0, 0, 1)"},linetoolpricelabel:{clonable:!0,color:"rgba( 102, 123, 139, 1)",backgroundColor:"rgba( 255, 255, 255, 0.7)",borderColor:"rgba( 140, 140, 140, 1)",fontWeight:"bold",fontsize:11,font:"Arial",transparency:30},linetoolrectangle:{clonable:!0,color:"rgba( 21, 56, 153, 1)",fillBackground:!0,backgroundColor:"rgba( 21, 56, 153, 0.5)",linewidth:1,snapTo45Degrees:!0,transparency:50},linetoolrotatedrectangle:{clonable:!0,color:"rgba( 152, 0, 255, 1)",fillBackground:!0,backgroundColor:"rgba( 142, 124, 195, 0.5)",transparency:50,linewidth:1,snapTo45Degrees:!0},linetoolellipse:{clonable:!0,color:"rgba( 153, 153, 21, 1)",fillBackground:!0,backgroundColor:"rgba( 153, 153, 21, 0.5)",transparency:50,linewidth:1},linetoolarc:{clonable:!0,color:"rgba( 153, 153, 21, 1)",fillBackground:!0,backgroundColor:"rgba( 153, 153, 21, 0.5)",transparency:50,linewidth:1},linetoolprediction:{singleChartOnly:!0,linecolor:"rgba( 28, 115, 219, 1)",linewidth:2,sourceBackColor:"rgba( 241, 241, 241, 1)",sourceTextColor:"rgba( 110, 110, 110, 1)",sourceStrokeColor:"rgba( 110, 110, 110, 1)",targetStrokeColor:"rgba( 47, 168, 255, 1)",targetBackColor:"rgba( 11, 111, 222, 1)",targetTextColor:"rgba( 255, 255, 255, 1)",successBackground:"rgba( 54, 160, 42, 0.9)",successTextColor:"rgba( 255, 255, 255, 1)",failureBackground:"rgba( 231, 69, 69, 0.5)",failureTextColor:"rgba( 255, 255, 255, 1)",intermediateBackColor:"rgba( 234, 210, 137, 1)",intermediateTextColor:"rgba( 109, 77, 34, 1)",transparency:10,centersColor:"rgba( 32, 32, 32, 1)"},linetooltriangle:{clonable:!0,color:"rgba( 153, 21, 21, 1)",fillBackground:!0,backgroundColor:"rgba( 153, 21, 21, 0.5)",transparency:50,linewidth:1},linetoolcallout:{clonable:!0,color:"rgba( 255, 255, 255, 1)",backgroundColor:"rgba( 153, 21, 21, 0.5)",transparency:50,linewidth:2,fontsize:12,font:"Verdana",text:$.t("Text"),bordercolor:"rgba( 153, 21, 21, 1)",bold:!1,italic:!1,wordWrap:!1,wordWrapWidth:400},linetoolparallelchannel:{clonable:!0,linecolor:"rgba( 119, 52, 153, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,extendLeft:!1,extendRight:!1,fillBackground:!0,backgroundColor:"rgba( 180, 167, 214, 0.5)",transparency:50,showMidline:!1,midlinecolor:"rgba( 119, 52, 153, 1)",midlinewidth:1,midlinestyle:CanvasEx.LINESTYLE_DASHED},linetoolelliottimpulse:{degree:7,clonable:!0,showWave:!0,color:"rgba( 61, 133, 198, 1)",linewidth:1},linetoolelliotttriangle:{degree:7,clonable:!0,showWave:!0,color:"rgba( 255, 152, 0, 1)",linewidth:1},linetoolelliotttriplecombo:{degree:7,clonable:!0,showWave:!0,color:"rgba( 106, 168, 79, 1)",linewidth:1},linetoolelliottcorrection:{degree:7,clonable:!0,showWave:!0,color:"rgba( 61, 133, 198, 1)",linewidth:1},linetoolelliottdoublecombo:{degree:7,clonable:!0,showWave:!0,color:"rgba( 106, 168, 79, 1)",linewidth:1},linetoolbarspattern:{singleChartOnly:!0,color:"rgba( 80, 145, 204, 1)",clonable:!0,mode:d.BARS_MODE,mirrored:!1,flipped:!1},linetoolghostfeed:{singleChartOnly:!0,clonable:!0,averageHL:20,variance:50,candleStyle:{upColor:"#6ba583",
downColor:"#d75442",drawWick:!0,drawBorder:!0,borderColor:"#378658",borderUpColor:"#225437",borderDownColor:"#5b1a13",wickColor:"#737375"},transparency:50},study:{inputs:{},styles:{},palettes:{},bands:{},area:{},graphics:{},showInDataWindow:!0,visible:!0,showStudyArguments:!0,precision:"default"},linetoolpitchfork:{clonable:!0,fillBackground:!0,transparency:80,style:p.STYLE_ORIGINAL,median:{visible:!0,color:"rgba( 165, 0, 0, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},level0:m.c(.25,"rgba( 160, 107, 0, 1)",!1),level1:m.c(.382,"rgba( 105, 158, 0, 1)",!1),level2:m.c(.5,"rgba( 0, 155, 0, 1)",!0),level3:m.c(.618,"rgba( 0, 153, 101, 1)",!1),level4:m.c(.75,"rgba( 0, 101, 153, 1)",!1),level5:m.c(1,"rgba( 0, 0, 153, 1)",!0),level6:m.c(1.5,"rgba( 102, 0, 153, 1)",!1),level7:m.c(1.75,"rgba( 153, 0, 102, 1)",!1),level8:m.c(2,"rgba( 165, 0, 0, 1)",!1),__collectibleLines:["median","level0","level1","level2","level3","level4","level5","level6","level7","level8"]},linetoolpitchfan:{clonable:!0,fillBackground:!0,transparency:80,median:{visible:!0,color:"rgba( 165, 0, 0, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},level0:m.c(.25,"rgba( 160, 107, 0, 1)",!1),level1:m.c(.382,"rgba( 105, 158, 0, 1)",!1),level2:m.c(.5,"rgba( 0, 155, 0, 1)",!0),level3:m.c(.618,"rgba( 0, 153, 101, 1)",!1),level4:m.c(.75,"rgba( 0, 101, 153, 1)",!1),level5:m.c(1,"rgba( 0, 0, 153, 1)",!0),level6:m.c(1.5,"rgba( 102, 0, 153, 1)",!1),level7:m.c(1.75,"rgba( 153, 0, 102, 1)",!1),level8:m.c(2,"rgba( 165, 0, 0, 1)",!1),__collectibleLines:["median","level0","level1","level2","level3","level4","level5","level6","level7","level8"]},linetoolgannfan:{clonable:!0,showLabels:!0,font:"Verdana",fillBackground:!0,transparency:80,level1:m.f(1,8,"rgba( 160, 107, 0, 1)",!0),level2:m.f(1,4,"rgba( 105, 158, 0, 1)",!0),level3:m.f(1,3,"rgba( 0, 155, 0, 1)",!0),level4:m.f(1,2,"rgba( 0, 153, 101, 1)",!0),level5:m.f(1,1,"rgba( 128, 128, 128, 1)",!0),level6:m.f(2,1,"rgba( 0, 101, 153, 1)",!0),level7:m.f(3,1,"rgba( 0, 0, 153, 1)",!0),level8:m.f(4,1,"rgba( 102, 0, 153, 1)",!0),level9:m.f(8,1,"rgba( 165, 0, 0, 1)",!0),__collectibleLines:["level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11"]},linetoolganncomplex:{clonable:!0,fillBackground:!1,arcsBackground:{fillBackground:!0,transparency:80},levels:[m.d("rgba( 128, 128, 128, 1)",!0,1),m.d("rgba( 160, 107, 0, 1)",!0,1),m.d("rgba( 105, 158, 0, 1)",!0,1),m.d("rgba( 0, 155, 0, 1)",!0,1),m.d("rgba( 0, 153, 101, 1)",!0,1),m.d("rgba( 128, 128, 128, 1)",!0,1)],fanlines:[m.e("rgba( 165, 0, 255, 1)",!1,1,8,1),m.e("rgba( 165, 0, 0, 1)",!1,1,5,1),m.e("rgba( 128, 128, 128, 1)",!1,1,4,1),m.e("rgba( 160, 107, 0, 1)",!1,1,3,1),m.e("rgba( 105, 158, 0, 1)",!0,1,2,1),m.e("rgba( 0, 155, 0, 1)",!0,1,1,1),m.e("rgba( 0, 153, 101, 1)",!0,1,1,2),m.e("rgba( 0, 153, 101, 1)",!1,1,1,3),m.e("rgba( 0, 0, 153, 1)",!1,1,1,4),m.e("rgba( 102, 0, 153, 1)",!1,1,1,5),m.e("rgba( 165, 0, 255, 1)",!1,1,1,8)],arcs:[m.e("rgba( 160, 107, 0, 1)",!0,1,1,0),m.e("rgba( 160, 107, 0, 1)",!0,1,1,1),m.e("rgba( 160, 107, 0, 1)",!0,1,1.5,0),m.e("rgba( 105, 158, 0, 1)",!0,1,2,0),m.e("rgba( 105, 158, 0, 1)",!0,1,2,1),m.e("rgba( 0, 155, 0, 1)",!0,1,3,0),m.e("rgba( 0, 155, 0, 1)",!0,1,3,1),m.e("rgba( 0, 153, 101, 1)",!0,1,4,0),m.e("rgba( 0, 153, 101, 1)",!0,1,4,1),m.e("rgba( 0, 0, 153, 1)",!0,1,5,0),m.e("rgba( 0, 0, 153, 1)",!0,1,5,1)],__collectibleLines:["trendline","levels.0","levels.1","levels.2","levels.3","levels.4","levels.5","fanlines.0","fanlines.1","fanlines.2","fanlines.3","fanlines.4","fanlines.5","fanlines.6","fanlines.7","fanlines.8","fanlines.9","fanlines.10","arcs.0","arcs.1","arcs.2","arcs.3","arcs.4","arcs.5","arcs.6","arcs.7","arcs.8","arcs.9","arcs.10"]},linetoolgannsquare:{clonable:!0,color:"rgba( 21, 56, 153, 0.8)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,font:"Verdana",showTopLabels:!0,showBottomLabels:!0,showLeftLabels:!0,showRightLabels:!0,fillHorzBackground:!0,horzTransparency:80,fillVertBackground:!0,vertTransparency:80,hlevel1:m.b(0,"rgba( 128, 128, 128, 1)",!0),hlevel2:m.b(.25,"rgba( 160, 107, 0, 1)",!0),hlevel3:m.b(.382,"rgba( 105, 158, 0, 1)",!0),hlevel4:m.b(.5,"rgba( 0, 155, 0, 1)",!0),hlevel5:m.b(.618,"rgba( 0, 153, 101, 1)",!0),hlevel6:m.b(.75,"rgba( 0, 101, 153, 1)",!0),hlevel7:m.b(1,"rgba( 128, 128, 128, 1)",!0),vlevel1:m.b(0,"rgba( 128, 128, 128, 1)",!0),vlevel2:m.b(.25,"rgba( 160, 107, 0, 1)",!0),vlevel3:m.b(.382,"rgba( 105, 158, 0, 1)",!0),vlevel4:m.b(.5,"rgba( 0, 155, 0, 1)",!0),vlevel5:m.b(.618,"rgba( 0, 153, 101, 1)",!0),vlevel6:m.b(.75,"rgba( 0, 101, 153, 1)",!0),vlevel7:m.b(1,"rgba( 128, 128, 128, 1)",!0),__collectibleLines:["hlevel1","hlevel2","hlevel3","hlevel4","hlevel5","hlevel6","hlevel7","vlevel1","vlevel2","vlevel3","vlevel4","vlevel5","vlevel6","vlevel7"]},linetoolfibspeedresistancefan:{clonable:!0,fillBackground:!0,transparency:80,grid:{color:"rgba( 128, 128, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,visible:!0},linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,font:"Verdana",showTopLabels:!0,showBottomLabels:!0,showLeftLabels:!0,showRightLabels:!0,snapTo45Degrees:!0,hlevel1:m.b(0,"rgba( 128, 128, 128, 1)",!0),hlevel2:m.b(.25,"rgba( 160, 107, 0, 1)",!0),hlevel3:m.b(.382,"rgba( 105, 158, 0, 1)",!0),hlevel4:m.b(.5,"rgba( 0, 155, 0, 1)",!0),hlevel5:m.b(.618,"rgba( 0, 153, 101, 1)",!0),hlevel6:m.b(.75,"rgba( 0, 101, 153, 1)",!0),hlevel7:m.b(1,"rgba( 128, 128, 128, 1)",!0),vlevel1:m.b(0,"rgba( 128, 128, 128, 1)",!0),vlevel2:m.b(.25,"rgba( 160, 107, 0, 1)",!0),vlevel3:m.b(.382,"rgba( 105, 158, 0, 1)",!0),vlevel4:m.b(.5,"rgba( 0, 155, 0, 1)",!0),vlevel5:m.b(.618,"rgba( 0, 153, 101, 1)",!0),vlevel6:m.b(.75,"rgba( 0, 101, 153, 1)",!0),vlevel7:m.b(1,"rgba( 128, 128, 128, 1)",!0),__collectibleLines:["trendline","hlevel1","hlevel2","hlevel3","hlevel4","hlevel5","hlevel6","hlevel7","vlevel1","vlevel2","vlevel3","vlevel4","vlevel5","vlevel6","vlevel7"]},linetoolfibretracement:{clonable:!0,showCoeffs:!0,showPrices:!0,font:"Verdana",fillBackground:!0,transparency:80,extendLines:!1,horzLabelsAlign:"left",vertLabelsAlign:"middle",reverse:!1,coeffsAsPercents:!1,trendline:{visible:!0,color:"rgba( 128, 128, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED},levelsStyle:{linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},level1:m.b(0,"rgba( 128, 128, 128, 1)",!0),level2:m.b(.236,"rgba( 204, 40, 40, 1)",!0),level3:m.b(.382,"rgba( 149, 204, 40, 1)",!0),level4:m.b(.5,"rgba( 40, 204, 40, 1)",!0),level5:m.b(.618,"rgba( 40, 204, 149, 1)",!0),level6:m.b(.786,"rgba( 40, 149, 204, 1)",!0),level7:m.b(1,"rgba( 128, 128, 128, 1)",!0),level8:m.b(1.618,"rgba( 40, 40, 204, 1)",!0),level9:m.b(2.618,"rgba( 204, 40, 40, 1)",!0),level10:m.b(3.618,"rgba( 149, 40, 204, 1)",!0),level11:m.b(4.236,"rgba( 204, 40, 149, 1)",!0),level12:m.b(1.272,"rgba( 149, 204, 40, 1)",!1),level13:m.b(1.414,"rgba( 204, 40, 40, 1)",!1),level16:m.b(2,"rgba( 40, 204, 149, 1)",!1),level14:m.b(2.272,"rgba( 149, 204, 40, 1)",!1),level15:m.b(2.414,"rgba( 40, 204, 40, 1)",!1),level17:m.b(3,"rgba( 40, 149, 204, 1)",!1),level18:m.b(3.272,"rgba( 128, 128, 128, 1)",!1),level19:m.b(3.414,"rgba( 40, 40, 204, 1)",!1),level20:m.b(4,"rgba( 204, 40, 40, 1)",!1),level21:m.b(4.272,"rgba( 149, 40, 204, 1)",!1),level22:m.b(4.414,"rgba( 204, 40, 149, 1)",!1),level23:m.b(4.618,"rgba( 149, 204, 40, 1)",!1),level24:m.b(4.764,"rgba( 40, 204, 149, 1)",!1),__collectibleLines:["trendline","level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11","level12","level13","level14","level15","level16","level17","level18","level19","level20","level21","level22","level23","level24"]},linetoolfibchannel:{clonable:!0,showCoeffs:!0,showPrices:!0,font:"Verdana",fillBackground:!0,transparency:80,extendLeft:!1,extendRight:!1,horzLabelsAlign:"left",vertLabelsAlign:"middle",coeffsAsPercents:!1,levelsStyle:{linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},level1:m.b(0,"rgba( 128, 128, 128, 1)",!0),level2:m.b(.236,"rgba( 204, 40, 40, 1)",!0),level3:m.b(.382,"rgba( 149, 204, 40, 1)",!0),level4:m.b(.5,"rgba( 40, 204, 40, 1)",!0),level5:m.b(.618,"rgba( 40, 204, 149, 1)",!0),level6:m.b(.786,"rgba( 40, 149, 204, 1)",!0),level7:m.b(1,"rgba( 128, 128, 128, 1)",!0),level8:m.b(1.618,"rgba( 40, 40, 204, 1)",!0),level9:m.b(2.618,"rgba( 204, 40, 40, 1)",!0),level10:m.b(3.618,"rgba( 149, 40, 204, 1)",!0),level11:m.b(4.236,"rgba( 204, 40, 149, 1)",!0),level12:m.b(1.272,"rgba( 149, 204, 40, 1)",!1),level13:m.b(1.414,"rgba( 204, 40, 40, 1)",!1),level16:m.b(2,"rgba( 40, 204, 149, 1)",!1),level14:m.b(2.272,"rgba( 149, 204, 40, 1)",!1),level15:m.b(2.414,"rgba( 40, 204, 40, 1)",!1),level17:m.b(3,"rgba( 40, 149, 204, 1)",!1),level18:m.b(3.272,"rgba( 128, 128, 128, 1)",!1),level19:m.b(3.414,"rgba( 40, 40, 204, 1)",!1),level20:m.b(4,"rgba( 204, 40, 40, 1)",!1),level21:m.b(4.272,"rgba( 149, 40, 204, 1)",!1),level22:m.b(4.414,"rgba( 204, 40, 149, 1)",!1),level23:m.b(4.618,"rgba( 149, 204, 40, 1)",!1),level24:m.b(4.764,"rgba( 40, 204, 149, 1)",!1),__collectibleLines:["level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11","level12","level13","level14","level15","level16","level17","level18","level19","level20","level21","level22","level23","level24"]},linetoolprojection:{clonable:!0,showCoeffs:!0,font:"Verdana",fillBackground:!0,transparency:80,color1:"rgba( 0, 128, 0, 0.2)",color2:"rgba( 255, 0, 0, 0.2)",linewidth:1,trendline:{visible:!0,color:"rgba( 128, 128, 128, 1)",linestyle:CanvasEx.LINESTYLE_SOLID},level1:m.c(1,"rgba( 128, 128, 128, 1)",!0)},linetool5pointspattern:{clonable:!0,color:"rgba( 204, 40, 149, 1)",textcolor:"rgba( 255, 255, 255, 1)",fillBackground:!0,backgroundColor:"rgba( 204, 40, 149, 0.5)",font:"Verdana",fontsize:12,bold:!1,italic:!1,transparency:50,linewidth:1},linetoolcypherpattern:{clonable:!0,color:"#CC2895",textcolor:"#FFFFFF",fillBackground:!0,backgroundColor:"#CC2895",font:"Verdana",fontsize:12,bold:!1,italic:!1,transparency:50,linewidth:1},linetooltrianglepattern:{clonable:!0,color:"rgba( 149, 40, 255, 1)",textcolor:"rgba( 255, 255, 255, 1)",fillBackground:!0,backgroundColor:"rgba( 149, 40, 204, 0.5)",font:"Verdana",fontsize:12,bold:!1,italic:!1,transparency:50,linewidth:1},linetoolabcd:{clonable:!0,color:"rgba( 0, 155, 0, 1)",textcolor:"rgba( 255, 255, 255, 1)",font:"Verdana",fontsize:12,bold:!1,italic:!1,linewidth:2},linetoolthreedrivers:{clonable:!0,color:"rgba( 149, 40, 255, 1)",textcolor:"rgba( 255, 255, 255, 1)",fillBackground:!0,backgroundColor:"rgba( 149, 40, 204, 0.5)",font:"Verdana",fontsize:12,bold:!1,italic:!1,transparency:50,linewidth:2},linetoolheadandshoulders:{clonable:!0,color:"rgba( 69, 104, 47, 1)",textcolor:"rgba( 255, 255, 255, 1)",fillBackground:!0,backgroundColor:"rgba( 69, 168, 47, 0.5)",font:"Verdana",fontsize:12,bold:!1,italic:!1,transparency:50,linewidth:2},linetoolfibwedge:{singleChartOnly:!0,clonable:!0,showCoeffs:!0,font:"Verdana",fillBackground:!0,transparency:80,trendline:{visible:!0,color:"rgba( 128, 128, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},level1:m.c(.236,"rgba( 204, 40, 40, 1)",!0),level2:m.c(.382,"rgba( 149, 204, 40, 1)",!0),level3:m.c(.5,"rgba( 40, 204, 40, 1)",!0),level4:m.c(.618,"rgba( 40, 204, 149, 1)",!0),level5:m.c(.786,"rgba( 40, 149, 204, 1)",!0),level6:m.c(1,"rgba( 128, 128, 128, 1)",!0),level7:m.c(1.618,"rgba( 40, 40, 204, 1)",!1),level8:m.c(2.618,"rgba( 204, 40, 40, 1)",!1),level9:m.c(3.618,"rgba( 149, 40, 204, 1)",!1),level10:m.c(4.236,"rgba( 204, 40, 149, 1)",!1),level11:m.c(4.618,"rgba( 204, 40, 149, 1)",!1),__collectibleLines:["trendline","level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11"]},linetoolfibcircles:{clonable:!0,showCoeffs:!0,font:"Verdana",fillBackground:!0,transparency:80,snapTo45Degrees:!0,coeffsAsPercents:!1,trendline:{visible:!0,color:"rgba( 128, 128, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED},level1:m.c(.236,"rgba( 204, 40, 40, 1)",!0),level2:m.c(.382,"rgba( 149, 204, 40, 1)",!0),level3:m.c(.5,"rgba( 40, 204, 40, 1)",!0),level4:m.c(.618,"rgba( 40, 204, 149, 1)",!0),level5:m.c(.786,"rgba( 40, 149, 204, 1)",!0),level6:m.c(1,"rgba( 128, 128, 128, 1)",!0),level7:m.c(1.618,"rgba( 40, 40, 204, 1)",!0),level8:m.c(2.618,"rgba( 204, 40, 40, 1)",!0),level9:m.c(3.618,"rgba( 149, 40, 204, 1)",!0),level10:m.c(4.236,"rgba( 204, 40, 149, 1)",!0),level11:m.c(4.618,"rgba( 204, 40, 149, 1)",!0),__collectibleLines:["trendline","level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11"]},linetoolfibspeedresistancearcs:{clonable:!0,showCoeffs:!0,font:"Verdana",fillBackground:!0,transparency:80,fullCircles:!1,trendline:{visible:!0,color:"rgba( 128, 128, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED},level1:m.c(.236,"rgba( 204, 40, 40, 1)",!0),level2:m.c(.382,"rgba( 149, 204, 40, 1)",!0),level3:m.c(.5,"rgba( 40, 204, 40, 1)",!0),level4:m.c(.618,"rgba( 40, 204, 149, 1)",!0),level5:m.c(.786,"rgba( 40, 149, 204, 1)",!0),level6:m.c(1,"rgba( 128, 128, 128, 1)",!0),level7:m.c(1.618,"rgba( 40, 40, 204, 1)",!0),level8:m.c(2.618,"rgba( 204, 40, 40, 1)",!0),level9:m.c(3.618,"rgba( 149, 40, 204, 1)",!0),level10:m.c(4.236,"rgba( 204, 40, 149, 1)",!0),level11:m.c(4.618,"rgba( 204, 40, 149, 1)",!0),__collectibleLines:["trendline","level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11"]},linetooltrendbasedfibextension:{clonable:!0,showCoeffs:!0,showPrices:!0,font:"Verdana",fillBackground:!0,transparency:80,extendLines:!1,horzLabelsAlign:"left",vertLabelsAlign:"middle",reverse:!1,coeffsAsPercents:!1,trendline:{visible:!0,color:"rgba( 128, 128, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED},levelsStyle:{linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},level1:m.b(0,"rgba( 128, 128, 128, 1)",!0),level2:m.b(.236,"rgba( 204, 40, 40, 1)",!0),level3:m.b(.382,"rgba( 149, 204, 40, 1)",!0),level4:m.b(.5,"rgba( 40, 204, 40, 1)",!0),level5:m.b(.618,"rgba( 40, 204, 149, 1)",!0),level6:m.b(.786,"rgba( 40, 149, 204, 1)",!0),level7:m.b(1,"rgba( 128, 128, 128, 1)",!0),level8:m.b(1.618,"rgba( 40, 40, 204, 1)",!0),level9:m.b(2.618,"rgba( 204, 40, 40, 1)",!0),level10:m.b(3.618,"rgba( 149, 40, 204, 1)",!0),level11:m.b(4.236,"rgba( 204, 40, 149, 1)",!0),level12:m.b(1.272,"rgba( 149, 204, 40, 1)",!1),level13:m.b(1.414,"rgba( 204, 40, 40, 1)",!1),level16:m.b(2,"rgba( 40, 204, 149, 1)",!1),level14:m.b(2.272,"rgba( 149, 204, 40, 1)",!1),level15:m.b(2.414,"rgba( 40, 204, 40, 1)",!1),level17:m.b(3,"rgba( 40, 149, 204, 1)",!1),level18:m.b(3.272,"rgba( 128, 128, 128, 1)",!1),level19:m.b(3.414,"rgba( 40, 40, 204, 1)",!1),level20:m.b(4,"rgba( 204, 40, 40, 1)",!1),level21:m.b(4.272,"rgba( 149, 40, 204, 1)",!1),level22:m.b(4.414,"rgba( 204, 40, 149, 1)",!1),level23:m.b(4.618,"rgba( 149, 204, 40, 1)",!1),level24:m.b(4.764,"rgba( 40, 204, 149, 1)",!1),__collectibleLines:["trendline","level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11","level12","level13","level14","level15","level16","level17","level18","level19","level20","level21","level22","level23","level24"]},linetooltrendbasedfibtime:{clonable:!0,showCoeffs:!0,font:"Verdana",fillBackground:!0,transparency:80,horzLabelsAlign:"right",vertLabelsAlign:"bottom",trendline:{visible:!0,color:"rgba( 128, 128, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED},level1:m.c(0,"rgba( 128, 128, 128, 1)",!0),level2:m.c(.382,"rgba( 204, 40, 40, 1)",!0),level3:m.c(.5,"rgba( 149, 204, 40, 1)",!1),level4:m.c(.618,"rgba( 40, 204, 40, 1)",!0),level5:m.c(1,"rgba( 40, 204, 149, 1)",!0),level6:m.c(1.382,"rgba( 40, 149, 204, 1)",!0),level7:m.c(1.618,"rgba( 128, 128, 128, 1)",!0),level8:m.c(2,"rgba( 40, 40, 204, 1)",!0),level9:m.c(2.382,"rgba( 204, 40, 40, 1)",!0),level10:m.c(2.618,"rgba( 149, 40, 204, 1)",!0),level11:m.c(3,"rgba( 204, 40, 149, 1)",!0),__collectibleLines:["trendline","level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11"]},linetoolschiffpitchfork:{clonable:!0,fillBackground:!0,transparency:80,style:p.STYLE_SCHIFF,median:{visible:!0,color:"rgba( 165, 0, 0, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},level0:m.c(.25,"rgba( 160, 107, 0, 1)",!1),level1:m.c(.382,"rgba( 105, 158, 0, 1)",!1),level2:m.c(.5,"rgba( 0, 155, 0, 1)",!0),level3:m.c(.618,"rgba( 0, 153, 101, 1)",!1),level4:m.c(.75,"rgba( 0, 101, 153, 1)",!1),level5:m.c(1,"rgba( 0, 0, 153, 1)",!0),level6:m.c(1.5,"rgba( 102, 0, 153, 1)",!1),level7:m.c(1.75,"rgba( 153, 0, 102, 1)",!1),level8:m.c(2,"rgba( 165, 0, 0, 1)",!1),__collectibleLines:["median","level0","level1","level2","level3","level4","level5","level6","level7","level8"]},linetoolschiffpitchfork2:{clonable:!0,fillBackground:!0,transparency:80,style:p.STYLE_SCHIFF2,median:{visible:!0,color:"rgba( 165, 0, 0, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},level0:m.c(.25,"rgba( 160, 107, 0, 1)",!1),level1:m.c(.382,"rgba( 105, 158, 0, 1)",!1),level2:m.c(.5,"rgba( 0, 155, 0, 1)",!0),level3:m.c(.618,"rgba( 0, 153, 101, 1)",!1),level4:m.c(.75,"rgba( 0, 101, 153, 1)",!1),level5:m.c(1,"rgba( 0, 0, 153, 1)",!0),level6:m.c(1.5,"rgba( 102, 0, 153, 1)",!1),level7:m.c(1.75,"rgba( 153, 0, 102, 1)",!1),level8:m.c(2,"rgba( 165, 0, 0, 1)",!1),__collectibleLines:["median","level0","level1","level2","level3","level4","level5","level6","level7","level8"]},linetoolinsidepitchfork:{clonable:!0,fillBackground:!0,transparency:80,style:p.STYLE_INSIDE,median:{visible:!0,color:"rgba( 165, 0, 0, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},level0:m.c(.25,"rgba( 160, 107, 0, 1)",!1),level1:m.c(.382,"rgba( 105, 158, 0, 1)",!1),level2:m.c(.5,"rgba( 0, 155, 0, 1)",!0),level3:m.c(.618,"rgba( 0, 153, 101, 1)",!1),level4:m.c(.75,"rgba( 0, 101, 153, 1)",!1),level5:m.c(1,"rgba( 0, 0, 153, 1)",!0),level6:m.c(1.5,"rgba( 102, 0, 153, 1)",!1),level7:m.c(1.75,"rgba( 153, 0, 102, 1)",!1),level8:m.c(2,"rgba( 165, 0, 0, 1)",!1),__collectibleLines:["median","level0","level1","level2","level3","level4","level5","level6","level7","level8"]},linetool:{frozen:!1,visible:!0},linetoolvisibilities:{intervalsVisibilities:{seconds:!0,secondsFrom:1,secondsTo:59,minutes:!0,minutesFrom:1,minutesTo:59,hours:!0,hoursFrom:1,hoursTo:24,days:!0,daysFrom:1,daysTo:366,weeks:!0,months:!0}}},n(TradingView.defaultProperties.chartproperties),s()}for(void 0===TradingView.defaultProperties["study_MA@tv-basicstudies"]&&(TradingView.defaultProperties["study_MA@tv-basicstudies"]={description:"Moving Average",shortDescription:"MA",inputs:{length:9,source:"close"},styles:{MovAvg:{visible:!0,color:"rgba( 4, 150, 255, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,plottype:f.PLOT_LINE,histogramBase:0,title:"MA"}}}),void 0===TradingView.defaultProperties["study_ErrorOnUpdate@tv-basicstudies"]&&(TradingView.defaultProperties["study_ErrorOnUpdate@tv-basicstudies"]={description:"Error On Update",styles:{ErrorOnUpdate:{visible:!0,color:"rgba( 255, 0, 0, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,plottype:f.PLOT_LINE,histogramBase:0}}}),void 0===TradingView.defaultProperties["study_ErrorOnCreate@tv-basicstudies"]&&(TradingView.defaultProperties["study_ErrorOnCreate@tv-basicstudies"]={description:"Error On Create",styles:{ErrorOnUpdate:{visible:!0,color:"rgba( 0, 255, 0, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,plottype:f.PLOT_LINE,histogramBase:0}}}),void 0===TradingView.defaultProperties["study_ErrorOnNewBar@tv-basicstudies"]&&(TradingView.defaultProperties["study_ErrorOnNewBar@tv-basicstudies"]={description:"Error On New Bar",styles:{ErrorOnUpdate:{visible:!0,color:"rgba( 0, 0, 255, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,plottype:f.PLOT_LINE,histogramBase:0}}}),void 0===TradingView.defaultProperties["study_PivotPointsHighLow@tv-basicstudies"]&&(TradingView.defaultProperties["study_PivotPointsHighLow@tv-basicstudies"]={font:"Arial",fontsize:10,borderColor:"rgba( 83, 143, 31, 1)",backColor:"rgba( 240, 255, 204, 1)",textColor:"rgba( 0, 0, 0, 1)"}),void 0===TradingView.defaultProperties["study_PivotPointsStandard@tv-basicstudies"]&&(o="rgba( 212, 121, 40, 1)",r=!0,a=1,TradingView.defaultProperties["study_PivotPointsStandard@tv-basicstudies"]={_hardCodedDefaultsVersion:1,font:"Arial",fontsize:11,levelsStyle:{showLabels:!0,visibility:{P:r,"S1/R1":r,"S2/R2":r,"S3/R3":r,"S4/R4":r,"S5/R5":r},colors:{P:o,"S1/R1":o,"S2/R2":o,"S3/R3":o,"S4/R4":o,"S5/R5":o},widths:{P:a,"S1/R1":a,"S2/R2":a,"S3/R3":a,"S4/R4":a,"S5/R5":a}}}),void 0===TradingView.defaultProperties["study_ZigZag@tv-basicstudies"]&&(TradingView.defaultProperties["study_ZigZag@tv-basicstudies"]={color:"rgba( 86, 135, 29, 1)",linewidth:2}),void 0===TradingView.defaultProperties["study_ElliottWave@tv-basicstudies"]&&(TradingView.defaultProperties["study_ElliottWave@tv-basicstudies"]={inputs:{},level0:m.a("rgba( 255, 0, 0, 1)",!1),level1:m.a("rgba( 0, 128, 0, 1)",!1),level2:m.a("rgba( 0, 0, 255, 1)",!1),level3:m.a("rgba( 255, 0, 255, 1)",!1),level4:m.a("rgba( 0, 128, 255, 1)",!0),level5:m.a("rgba( 255, 0, 0, 1)",!0),level6:m.a("rgba( 0, 128, 0, 1)",!0),level7:m.a("rgba( 0, 0, 255, 1)",!0),level8:m.a("rgba( 255, 0, 255, 1)",!0)}),void 0===TradingView.defaultProperties["study_LinearRegression@tv-basicstudies"]&&(TradingView.defaultProperties["study_LinearRegression@tv-basicstudies"]={styles:{upLine:{visible:!0,color:"rgba( 0, 0, 255, 0.3)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1},downLine:{visible:!0,color:"rgba( 0, 0, 255, 0.3)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1},baseLine:{visible:!0,color:"rgba( 255, 0, 0, 0.3)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1},extendLines:!0,showPearsons:!0,backgroundColor:"rgba( 153, 21, 21, 0.3)",transparency:70}}),void 0===TradingView.defaultProperties["study_RegressionTrend@tv-basicstudies"]&&(TradingView.defaultProperties["study_RegressionTrend@tv-basicstudies"]={linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,styles:{upLine:{visible:!0,color:"rgba( 0, 0, 255, 0.3)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1},downLine:{visible:!0,color:"rgba( 0, 0, 255, 0.3)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1},baseLine:{visible:!0,color:"rgba( 255, 0, 0, 0.3)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1},extendLines:!1,showPearsons:!0,transparency:70}}),void 0===TradingView.defaultProperties["study_Compare@tv-basicstudies"]&&(TradingView.defaultProperties["study_Compare@tv-basicstudies"]={minTick:"default"}),void 0===TradingView.defaultProperties["study_Overlay@tv-basicstudies"]&&(l="study_Overlay@tv-basicstudies",TradingView.defaultProperties[l]={style:c.STYLE_BARS,showPriceLine:!1,minTick:"default",candleStyle:{upColor:"rgba( 107, 165, 131, 1)",downColor:"rgba( 215, 84, 66, 1)",drawWick:!0,drawBorder:!0,borderColor:"rgba( 55, 134, 88, 1)",borderUpColor:"rgba( 34, 84, 55, 1)",borderDownColor:"rgba( 91, 26, 19, 1)",wickColor:"rgba( 115, 115, 117, 1)",wickUpColor:"rgba( 115, 115, 117, 1)",wickDownColor:"rgba( 115, 115, 117, 1)",barColorsOnPrevClose:!1},hollowCandleStyle:{upColor:"rgba( 107, 165, 131, 1)",downColor:"rgba( 215, 84, 66, 1)",drawWick:!0,drawBorder:!0,borderColor:"rgba( 55, 134, 88, 1)",borderUpColor:"rgba( 34, 84, 55, 1)",borderDownColor:"rgba( 91, 26, 19, 1)",wickColor:"rgba( 115, 115, 117, 1)",wickUpColor:"rgba( 115, 115, 117, 1)",wickDownColor:"rgba( 115, 115, 117, 1)",barColorsOnPrevClose:!1},barStyle:{upColor:"rgba( 107, 165, 131, 1)",downColor:"rgba( 215, 84, 66, 1)",barColorsOnPrevClose:!1,dontDrawOpen:!1},lineStyle:{color:"rgba( 3, 3, 247, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,priceSource:"close",styleType:c.STYLE_LINE_TYPE_SIMPLE},areaStyle:{color1:"rgba( 96, 96, 144, 0.5)",color2:"rgba( 1, 246, 245, 0.5)",linecolor:"rgba( 0, 148, 255, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,priceSource:"close",transparency:50},styles:{open:{visible:!0,color:"rgba( 255, 0, 0, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,plottype:f.PLOT_LINE,histogramBase:0,title:"open"},high:{visible:!0,color:"rgba( 255, 0, 0, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,plottype:f.PLOT_LINE,histogramBase:0,title:"high"},low:{visible:!0,color:"rgba( 255, 0, 0, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,plottype:f.PLOT_LINE,histogramBase:0,title:"low"},close:{visible:!0,color:"rgba( 255, 0, 0, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,plottype:f.PLOT_LINE,histogramBase:0,title:"close"}}},t.enabled("use_overrides_for_overlay")&&n(TradingView.defaultProperties[l],null,!1,l)),u=e.split("."),_=TradingView.defaultProperties,g=0;g<u.length;g++)_&&(_=_[u[g]]);return _?TradingView.clone(_):{}};r.create=function(t,e){var i,o;e&&(i=_.parseIdString(t),o=g(i.id),TradingView.defaultProperties[i.id]=$.extend(e,o))},r.createOrReplace=function(t,e){if(e){var i=_.parseIdString(t);TradingView.defaultProperties[i.id]=e}},r.remove=function(t){TradingView.defaultProperties[t]=void 0},TradingView.saveDefaults=function(t,e){TVSettings.setJSON(t,e)},TradingView.factoryDefaults=g,window.defaults=r,window.applyDefaultsOverrides=n,window.applyPropertiesOverrides=o,window.applyDefaultOverridesToLinetools=s,e.factoryDefaults=g,e.applyDefaultsOverrides=n,e.applyPropertiesOverrides=o,e.applyDefaultOverridesToLinetools=s,e.defaults=r}).call(e,i(1))},function(t,e,i){(function(t,o){"use strict";function n(t,e){a.call(this,t,e),this._linetool=t,this._pointIndex=e,this._text="",this._coordinate=0,this._background="#5592C9",this._activeBackground="#0F6DBF",this._borderColor="#2E84A6",this._color="white",this._invalidated=!0,this._model=t._model}function s(t,e){h.call(this),this._linetool=t,this._pointindex=e,this._model=t._model,this._text="",this._coordinate=0,this._background="#5592C9",this._activeBackground="#0F6DBF",this._borderColor="#2E84A6",this._color="white",this._visible=!1,this._invalidated=!0}function r(t,e,i){var o,n,a;if(d.call(this),this._model=t,this._properties=i,i.visible&&i.frozen||this._properties.merge(defaults("linetool")),o=defaults("linetoolvisibilities"),i.intervalsVisibilities)for(n in o.intervalsVisibilities)this._properties.intervalsVisibilities[n]||this._properties.intervalsVisibilities.addProperty(n,o.intervalsVisibilities[n]);else this._properties.merge(o);if($.isArray(e)?this._paneViews=e:this._paneViews=[e],this._points=[],this._fixedPoints=[],this._timePoint=[],this._properties.symbol||this._properties.merge({symbol:t.mainSeries().symbol()}),this._properties.interval||this._properties.merge({interval:t.mainSeries().interval()}),this._properties.addExclusion&&(this._properties.addExclusion("symbol"),this._properties.addExclusion("symbolInfo"),this._properties.addExclusion("points"),this._properties.addExclusion("interval"),this._properties.addExclusion("visible"),this._properties.addExclusion("lastUpdateTime")),this.calcIsActualSymbol(),this._properties.intervalsVisibilities.listeners().subscribe(this,r.prototype.calcIsActualSymbol),this._properties.listeners().subscribe(this,r.prototype.propertiesChanged),this._createPointsProperties(),"_tooltipFieldsHash"in this&&!this.hasOwnProperty("_tooltipFieldsHash")&&(this._tooltipFieldsHash=$.extend(!0,{},this._tooltipFieldsHash)),this.m_priceAxisViews=[],this.m_timeAxisViews=[],this.pointsCount()>0)for(a=0;a<this.pointsCount();a++)this.m_priceAxisViews.push(this.createPriceAxisView(a)),this.m_timeAxisViews.push(new s(this,a));this._properties.visible.listeners().subscribe(this,function(t){t.value()||this._model.selectedSource()!=this||this._model.setSelectedSource(null)}),this.customization=this.customization||{forcePriceAxisLabel:!1,disableSelection:!1,disableErasing:!1,disableSave:!1,showInObjectsTree:!0},$(window).resize(function(){this.isFixed()&&this.restoreFixedPoints()}.bind(this)),this._properties.lastUpdateTime||this._properties.addProperty("lastUpdateTime",0)}var a=i(68),l=i(69),h=i(70),c=i(71),d=i(72).DataSource,p=i(74),u=i(43),_=i(75).DateTimeFormatter,f=i(76);inherit(n,a),n.prototype.update=function(){this._invalidated=!0},n.prototype.setActive=function(t){this._active=t},n.prototype._updateImpl=function(){var t,e,i,o,n;if(this._visible=!1,this._text="",this._model.timeScale()&&!this._model.timeScale().isEmpty()&&this._linetool.priceScale()&&!this._linetool.priceScale().isEmpty()&&(this._model.selectedSource()===this._linetool||this._linetool.customization.forcePriceAxisLabel)&&(t=this._model.timeScale().visibleBars(),!t.isEmpty()&&(e=this._linetool.axisPoints(),!(e.length<=this._pointIndex)&&(i=e[this._pointIndex],isFinite(i.price))))){if(o=this._linetool.priceScale(),o.isPercent()){if(n=this._linetool.ownerSource().firstValue(),!isNumber(n))return;i.price=o.priceRange().convertToPercent(i.price,n)}this._text=o.formatter().format(i.price),this._coordinate=o.priceToCoordinate(i.price),this._visible=!0}},n.prototype.renderer=function(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);var t={text:this._text,coordinate:this._coordinate,color:this._color,borderColor:this._borderColor,background:this._active?this._activeBackground:this._background,visible:this._visible};return new l(t)},n.prototype.text=function(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),a.prototype.text.call(this)},inherit(s,h),s.prototype.setActive=function(t){this._active=t},s.prototype.update=function(){this._invalidated=!0},s.prototype.updateImpl=function(){var t,e,i;this._visible=!1,this._model.timeScale().isEmpty()||(t=this._linetool.axisPoints(),t.length<=this._pointindex||this._linetool===this._model.selectedSource()&&(this._text="",e=t[this._pointindex].index,this._coordinate=this._model.timeScale().indexToCoordinate(e),i=this._model.timeScale().indexToUserTime(e),i&&(this._text=new _(this._model.mainSeries().isDWM()).format(i)),this._visible=!0,this._invalidated=!1))},s.prototype.renderer=function(){this._invalidated&&(this.updateImpl(),this._invalidated=!1);var t={text:this._text,coordinate:this._coordinate,color:this._color,background:this._active?this._activeBackground:this._background,borderColor:this._borderColor,visible:this._visible};return new c(t)},inherit(r,d),r.LINEEND_NORMAL=0,r.LINEEND_ARROW=1,r.LINEEND_CIRCLE=2,r.PointPriceProperty=function(e,i){t.call(this),this._lineSource=e,this._pointIndex=i},inherit(r.PointPriceProperty,t),r.prototype.enableCurrentIntervalVisibility=function(){var t,e,i,o,n,s,r,a=u.parse(this._model.mainSeries().interval());a.kind()===u.SECONDS&&(a.multiplier()<60?(this.properties().intervalsVisibilities.seconds.setValue(!0),t=Math.min(this.properties().intervalsVisibilities.secondsFrom.value(),a.multiplier()),this.properties().intervalsVisibilities.secondsFrom.setValue(t),e=Math.max(this.properties().intervalsVisibilities.secondsTo.value(),a.multiplier()),this.properties().intervalsVisibilities.secondsTo.setValue(e)):a=new u(u.MINUTES,a.multiplier()/60)),a.kind()===u.MINUTES&&(a.multiplier()<60?(this.properties().intervalsVisibilities.minutes.setValue(!0),t=Math.min(this.properties().intervalsVisibilities.minutesFrom.value(),a.multiplier()),this.properties().intervalsVisibilities.minutesFrom.setValue(t),e=Math.max(this.properties().intervalsVisibilities.minutesTo.value(),a.multiplier()),this.properties().intervalsVisibilities.minutesTo.setValue(e)):(i=Math.floor(a.multiplier()/60),this.properties().intervalsVisibilities.hours.setValue(!0),o=Math.min(this.properties().intervalsVisibilities.hoursFrom.value(),i),this.properties().intervalsVisibilities.hoursFrom.setValue(o),n=Math.max(this.properties().intervalsVisibilities.hoursTo.value(),i),this.properties().intervalsVisibilities.hoursTo.setValue(n))),a.kind()===u.DAYS&&(this.properties().intervalsVisibilities.days.setValue(!0),s=Math.min(this.properties().intervalsVisibilities.daysFrom.value(),a.multiplier()),this.properties().intervalsVisibilities.daysFrom.setValue(s),r=Math.max(this.properties().intervalsVisibilities.daysTo.value(),a.multiplier()),this.properties().intervalsVisibilities.daysTo.setValue(r)),a.kind()===u.WEEKS&&this.properties().intervalsVisibilities.weeks.setValue(!0),a.kind()===u.MONTHS&&this.properties().intervalsVisibilities.months.setValue(!0);
},r.prototype.getType=function(){return TradingView.className(this.constructor)},r.prototype.getConstructor=function(){return this._constructor||null},r.prototype.isActualSymbol=function(){return this._isActualSymbol},r.prototype.isActualInterval=function(){return this._isActualInterval},r.prototype.isSavedInChart=function(t){return!this.customization.disableSave},r.prototype.showInObjectTree=function(){return this.customization.showInObjectsTree},r.prototype.visibilityKeyByInterval=function(t){var e=u.parse(t),i=null;return r.IntervalsVisibilities.forEach(function(t){t.kind==e.kind()&&t.from<=e.multiplier()&&t.to>=e.multiplier()&&(i=t.key)}),i},r.prototype.calcIsActualSymbol=function(){var t=this._properties.symbol,e=this._model.mainSeries();this._isActualSymbol=e.symbolSameAsCurrent(t.value()),this._isActualSymbol&&t.setValue(e.symbol()),this.calcIsActualInterval()},r.prototype.calcIsActualInterval=function(){var t,e,i,o,n=this._properties,s=this._model.mainSeries(),r=u.parse(s.interval()),a=n.intervalsVisibilities;this._isActualInterval=!1,r.kind()===u.SECONDS&&(t=a.seconds.value(),e=a.secondsFrom.value(),i=a.secondsTo.value(),this._isActualInterval=t&&r.multiplier()>=e&&r.multiplier()<=i),r.kind()===u.MINUTES&&r.multiplier()<60&&(t=a.minutes.value(),e=a.minutesFrom.value(),i=a.minutesTo.value(),this._isActualInterval=t&&r.multiplier()>=e&&r.multiplier()<=i),r.kind()===u.MINUTES&&r.multiplier()>=60&&(o=Math.floor(r.multiplier()/60),t=a.hours.value(),e=a.hoursFrom.value(),i=a.hoursTo.value(),this._isActualInterval=t&&o>=e&&o<=i),r.kind()===u.DAYS&&(t=a.days.value(),e=a.daysFrom.value(),i=a.daysTo.value(),this._isActualInterval=t&&r.multiplier()>=e&&r.multiplier()<=i),r.kind()===u.WEEKS&&(this._isActualInterval=a.weeks.value()),r.kind()===u.MONTHS&&(this._isActualInterval=a.months.value()),this._isActualInterval||this._model.selectedSource()!=this||this._model.setSelectedSource(null)},r.PointPriceProperty.prototype.value=function(){var t=this._lineSource.points()[this._pointIndex].price,e=this._lineSource.ownerSource().formatter(),i=e.parse(e.format(t));return i.price?i.price:i.value},r.PointPriceProperty.prototype.setValue=function(t){var e,i,o=this._lineSource.points()[this._pointIndex];o.price=parseFloat(t),e=this._lineSource.priceScale(),e.isPercent()&&(i=this._lineSource.ownerSource().firstValue(),o.price=e.priceRange().convertToPercent(o.price,i)),this._lineSource.setPoint(this._pointIndex,o),this._lineSource._model.updateSource(this._lineSource),this._listeners.fire(this),this._lineSource.endChanging(!0),this._lineSource._syncMultichartState(),this._lineSource._properties.lastUpdateTime.setValue((new Date).valueOf())},r.PointIndexProperty=function(e,i){t.call(this),this._lineSource=e,this._pointIndex=i},inherit(r.PointIndexProperty,t),r.PointIndexProperty.prototype.value=function(){return this._lineSource.points()[this._pointIndex].index},r.PointIndexProperty.prototype.setValue=function(t){var e,i,o=this._lineSource.points()[this._pointIndex];o.index=t,e=this._lineSource.priceScale(),e.isPercent()&&(i=this._lineSource.ownerSource().firstValue(),o.price=e.priceRange().convertToPercent(o.price,i)),this._lineSource.setPoint(this._pointIndex,o),this._lineSource._model.updateSource(this._lineSource),this._listeners.fire(this),this._lineSource.endChanging(!0),this._lineSource._syncMultichartState(),this._lineSource._properties.lastUpdateTime.setValue((new Date).valueOf())},r.prototype._syncMultichartState=function(){var t={points:this._timePoint,interval:this._model.mainSeries().interval()};this.linkKey&&!this.properties().singleChartOnly&&p.finishChangingLineTool({model:this._model,linkKey:this.linkKey,symbol:this._model.mainSeries().symbol(),finalState:t})},r.prototype._createPointProperty=function(t){var e,i=this._properties.points;i.addProperty(t),e=i[t],e.addProperty("price"),e.price=new r.PointPriceProperty(this,t),e.addProperty("bar"),e.bar=new r.PointIndexProperty(this,t)},r.prototype._createPointsProperties=function(){this._properties.addProperty("points");for(var t=0;t<this.pointsCount();t++)this._createPointProperty(t)},r.prototype.priceScale=function(){return this._ownerSource?this._ownerSource.m_priceScale:null},r.prototype.symbol=function(){return this._properties.symbol.value()},r.prototype.properties=function(){return this._properties},r.prototype.isSavedInStudyTemplates=function(){return!1},r.prototype.state=function(t){var e=TradingView.className(this.constructor),i={type:e,id:this.id(),state:this.properties().state(),points:this._timePoint,zorder:this.zorder(),linkKey:this.linkKey};return i.state._isActualInterval=this.isActualInterval(),delete i.state.points,t&&(i.indexes=this._points),this.ownerSource()&&(i.ownerSource=this.ownerSource().id()),this.isFixed()&&(i.positionPercents=this._positionPercents||this.calcPositionPercents()),"version"in this&&1!==this.version&&(i.version=this.version),this.hasAlert.value()&&(i.alertId=this._alertId),i},r.prototype.template=function(){var t=this.properties().state();return delete t.points,delete t.symbol,delete t.symbolInfo,t},r.prototype.restoreTemplate=function(t){delete t.symbolInfo,this._model._undoModel.drawingLoadTemplate(this,t)},r.prototype.clearData=function(){this._points=[]},r.prototype.currentPointsetId=function(){return"pointset_"+this._currentPointsetId},r.prototype.stop=function(){this._currentPointsetId&&(this._model.chartApi().removePointset(this.currentPointsetId()),this._currentPointsetId=null),this.hasAlert.value()&&TradingView.alertsDispatcher&&TradingView.alertsDispatcher.deleteAlert(this._alertId)},r.prototype.isStarted=function(){return!!this._currentPointsetId},r.prototype.restart=function(){this.isFixed()||(this._currentPointsetId=0,this.createServerPoints())},r.prototype.tryCreateServerPoints=function(){this.isFixed()||this._currentPointsetId||this.createServerPoints()},r.prototype.normalizePoint=function(t){var e=this._model.timeScale().normalizeBarIndex(t.index);return e.price=t.price,e},r.prototype.normalizePoints=function(){var t,e;for(this._timePoint=[],t=0;t<this._points.length;t++){if(e=this._model.timeScale().normalizeBarIndex(this._points[t].index),!e.time_t){this._timePoint=[];break}e.price=this._points[t].price,this._timePoint.push(e)}},r.prototype.denormalizeTimePoints=function(){var t,e,i=[];for(t=0;t<this._timePoint.length;t++){if(e=this._model.timeScale().denormalizeTimePoint(this._timePoint[t]),void 0===e){i=[];break}i.push({index:e,price:this._timePoint[t].price})}i.length>0&&(this._points=i)},r.prototype.restorePoints=function(t,e,i){this._timePoint=t,this._points=e,i||this.denormalizeTimePoints()},r.prototype.restoreExternalPoints=function(t){this.properties().interval.setValue(t.interval),this._timePoint=t.points,this.denormalizeTimePoints(),this.createServerPoints()},r.prototype.restorePositionPercents=function(t){this._positionPercents=t},r.prototype.updateAllViewsAndRedraw=function(){this.updateAllViews(),this._model.updateSource(this)},r.prototype.propertiesChanged=function(){if(this.calcIsActualSymbol(),this.updateAllViewsAndRedraw(),this.linkKey){var t=this.properties().state();delete t.interval,p.changeLineStyle({linkKey:this.linkKey,state:t,model:this._model})}},r.prototype.points=function(){var t,e,i=[];for(t=0;t<this._points.length;t++)e=this._points[t],i.push({index:e.index,price:e.price,time:e.time});return this._lastPoint&&i.push({index:this._lastPoint.index,price:this._lastPoint.price,time:this._lastPoint.time}),this._currentMovingPoint&&this._startMovingPoint&&this.correctPoints(i),i},r.prototype.axisPoints=function(){return this.points()},r.prototype.fixedPoints=function(){var t,e,i,n,s=[];if(this._positionPercents&&!this.priceScale().isEmpty())for(t=0;t<this._positionPercents.length;t++)e=this._positionPercents[t],i=this._model.timeScale().width()*e.x,n=this.priceScale().height()*e.y,s.push(new o.Point(i,n));else for(t=0;t<this._fixedPoints.length;t++)s.push(this._fixedPoints[t].clone());return this._lastPoint&&s.push(this._lastPoint.clone()),this._currentMovingPoint&&this._startMovingPoint&&this.correctFixedPoints(s),s},r.prototype.addPoint=function(t,e,i){var o,n,s,r=$.extend({},t);return e&&e.shift&&this.points().length>=2&&this._properties.snapTo45Degrees&&this._snapPoint45Degree(r,this.points()[this.points().length-2]),o=this.priceScale(),o.isPercent()&&(n=this.ownerSource().firstValue(),r.price=o.priceRange().convertFromPercent(r.price,n)),this._points.push(r),s=this._points.length==this.pointsCount(),s?(this._lastPoint=null,i||(this.normalizePoints(),this.createServerPoints())):this._lastPoint=r,s},r.prototype.addFixedPoint=function(t){this._fixedPoints.push(t);var e=this._fixedPoints.length==this.pointsCount();return e&&this.calcPositionPercents(),e},r.prototype.calcPositionPercents=function(){var t,e,i,o;if(!this.priceScale()||this.priceScale().isEmpty())return[];for(this._positionPercents=[],t=0;t<this._fixedPoints.length;t++)e=this._fixedPoints[0],i=e.x/this._model.timeScale().width(),o=e.y/this.priceScale().height(),this._positionPercents.push({x:i,y:o});return this._positionPercents},r.prototype.restoreFixedPoints=function(){this._fixedPoints=this.fixedPoints()},r.prototype.onData=function(t){var e,i,o,n,s,r;if(t.params.customId===this.currentPointsetId()&&0!==t.params.plots.length){for(e=0;e<t.params.plots.length;e++)i=t.params.plots[e],o=this._timePoint[i.index],n=i.value[0],s=new Date(1e3*i.value[1]),r={index:n,time:s,price:o.price},this._points.length<=i.index?this._points.push(r):this._points[i.index]=r;this.checkAlert&&this.checkAlert(),this.updateAllViewsAndRedraw()}},r.prototype.correctPricesToPercents=function(){var t,e,i=this.priceScale(),o=this.ownerSource().firstValue();for(t=0;t<this._points.length;t++)e=this._points[t],e.price=i.priceRange().convertFromPercent(e.price,o)},r.prototype.startChanging=function(t,e){t<this.m_priceAxisViews.length&&this.m_priceAxisViews[t].setActive(!0),t<this.m_timeAxisViews.length&&this.m_timeAxisViews[t].setActive(!0),this._properties.lastUpdateTime.setValue((new Date).valueOf())},r.prototype.setPoint=function(t,e,i){var o,n,s;i&&i.shift&&this._properties.snapTo45Degrees&&(o=0===t?1:t-1,this._snapPoint45Degree(e,this.points()[o])),n=this.priceScale(),n.isPercent()&&(s=this.ownerSource().firstValue(),e.price=n.priceRange().convertFromPercent(e.price,s)),this._points[t]=e,this.normalizePoints()},r.prototype.startMoving=function(t){var e,i;this.isFixed()&&this.restoreFixedPoints(),e=this.priceScale(),e.isPercent()&&(i=this.ownerSource().firstValue(),t.price=e.priceRange().convertFromPercent(t.price,i)),this._startMovingPoint=t,this._properties.lastUpdateTime.setValue((new Date).valueOf())},r.prototype.move=function(t){var e,i=this.priceScale();i.isPercent()&&(e=this.ownerSource().firstValue(),t.price=i.priceRange().convertFromPercent(t.price,e)),this._currentMovingPoint=t,this.updateAllViews()},r.prototype.correctPoints=function(t){var e,i,o=this._currentMovingPoint.index-this._startMovingPoint.index,n=this._currentMovingPoint.price-this._startMovingPoint.price;for(e=0;e<t.length;e++)i=t[e],i.index+=o,i.price+=n,t[e]=i},r.prototype.correctFixedPoints=function(t){var e,i=this._currentMovingPoint.substract(this._startMovingPoint);for(e=0;e<t.length;e++)t[e]=t[e].add(i)},r.prototype.endMoving=function(t){var e,i;return this._properties.interval.setValue(this._model.mainSeries().interval()),e=!1,i=!1,this._currentMovingPoint&&this._startMovingPoint&&(e=this._currentMovingPoint.index!=this._startMovingPoint.index,i=this._currentMovingPoint.price!=this._startMovingPoint.price,this.isFixed()?this.correctFixedPoints(this._fixedPoints):this.correctPoints(this._points),this._startMovingPoint=null,this._currentMovingPoint=null),this.isFixed()?(this.calcPositionPercents(),void this.updateAllViews()):(this.normalizePoints(),this.updateAllViews(),e&&!t&&this.createServerPoints(),void((i||e)&&this.synchronizeAlert(!this._alertUndoMode)))},r.prototype.endChanging=function(t,e){var i;for(this._properties.interval.setValue(this._model.mainSeries().interval()),e||(this.normalizePoints(),this.createServerPoints()),i=0;i<this.m_priceAxisViews.length;i++)this.m_priceAxisViews[i].setActive(!1);for(i=0;i<this.m_timeAxisViews.length;i++)this.m_timeAxisViews[i].setActive(!1);this.synchronizeAlert(!t)},r.prototype.paneViews=function(t){var e,i;if(!this._isActualSymbol||!this._isActualInterval)return null;if(!this._properties.visible.value())return null;if(p.hideAllDrawings().value()&&this.userEditEnabled())return null;for(e=[],i=this._paneViews.length-1;i>=0;--i)e.push(this._paneViews[i]);return e},r.prototype.dataWindowView=function(){return null},r.prototype.statusView=function(){return null},r.prototype.priceAxisViews=function(t,e){var i,o,n;return this._isActualSymbol&&t.dataSources().indexOf(this)!==-1&&e===this.priceScale()?this._model.lineBeingEdited()===this?(i=this._model.linePointBeingEdited(),i<this.m_priceAxisViews.length?(o=this.m_priceAxisViews.slice(),n=o[i],o.splice(i,1),o.push(n),o):this.m_priceAxisViews):this.m_priceAxisViews:null},r.prototype.timeAxisViews=function(){var t,e,i;return this._model.lineBeingEdited()===this?(t=this._model.linePointBeingEdited(),t<this.m_timeAxisViews.length?(e=this.m_timeAxisViews.slice(),i=e[t],e.splice(t,1),e.push(i),e):this.m_timeAxisViews):this.m_timeAxisViews},r.prototype.updateAllViews=function(){var t,e,i;if(!this._isActualSymbol)return null;if(!this._properties.visible.value())return null;if(t=this.paneViews(),null!==t)for(e=t,i=0;i<e.length;i++)e[i].update();for(e=this.m_priceAxisViews,i=0;i<e.length;i++)e[i].update();for(e=this.m_timeAxisViews,i=0;i<e.length;i++)e[i].update()},r.prototype.setLastPoint=function(t,e){var i,o;e&&e.shift&&this.points().length>=2&&this._properties.snapTo45Degrees&&this._snapPoint45Degree(t,this.points()[this.points().length-2]),i=this.priceScale(),i.isPercent()&&(o=this.ownerSource().firstValue(),t.price=i.priceRange().convertFromPercent(t.price,o)),this._lastPoint=t,this.updateAllViews()},r.prototype.setLastFixedPoint=function(t){this._lastFixedPoint=t,this.updateAllViews()},r.prototype.title=function(){return"Line Tool"},r._pointSetId=1,r.prototype.start=function(){this.createServerPoints()},r.prototype.createServerPoints=function(){var t,e,i,o,n,s;if(!this._recursiveGuard&&this._isActualSymbol&&this._model.chartApi().connected()&&(this._currentPointsetId&&(this._model.chartApi().removePointset(this.currentPointsetId()),this._currentPointsetId=null),!this._model.timeScale().isEmpty()&&(0===this._timePoint.length&&this.normalizePoints(),0!==this._timePoint.length))){for(this._currentPointsetId=++r._pointSetId,t=this._model.mainSeries().symbolId(),e=this.properties().interval.value(),i=[],o=0;o<this._timePoint.length;o++)n=this._timePoint[o],i.push([n.time_t,n.offset]);s=this,this._model.chartApi().createPointset(this.currentPointsetId(),"turnaround",t,e,i,function(t){s.onData(t)})}},r.prototype.isBeingEdited=function(){return this===this._model.lineBeingEdited()||this===this._model.sourceBeingMoved},r.prototype.isFixed=function(){return this.properties().locked&&this.properties().locked.value()},r.prototype.isLocked=r.prototype.isFrozen=function(){return this.properties().frozen&&this.properties().frozen.value()},r.prototype._tooltipFieldsHash={},r.prototype._tooltipFieldsOrder=["time","price","index","time0","price0","time1","price1","time2","price2","time3","price3","time4","price4","distance","term","pointsPerBar"],r.prototype._tooltipFieldsOrdered=null,r.prototype._formatTooltip=function(){this._tooltipFieldsHash,this._tooltipFieldsOrder;return null===this._tooltipFieldsOrdered&&(this._tooltipFieldsOrdered=new f(this._tooltipFieldsHash,f.byOrder(this._tooltipFieldsOrder))),this._tooltipFieldsOrdered.array.filter(function(t){return null!==t.value&&""!==t.value}).map(function(t){return"<span>"+t.title+":</span> "+t.value}).join("<br />")},r.prototype.pointToScreenPoint=function(t){var e,i,n,s,r,a,l=this._model.timeScale(),h=this.priceScale();if(!h||h.isEmpty()||l.isEmpty())return[new o.Point(0,0),new o.Point(0,0)];if(e=null,h.isPercent()){if(!this.ownerSource())return;if(e=this.ownerSource().firstValue(),null===e||!isFinite(e))return}return i=l.indexToCoordinate(t.index,!0),n=t.price,h.isPercent()&&(n=h.priceRange().convertToPercent(n,e)),s=h.priceToCoordinate(n,!0),r=new o.Point(i,s),i=l.indexToCoordinate(t.index,!1),s=h.priceToCoordinate(n,!1),a=new o.Point(i,s),[r,a]},r.prototype.screenPointToPoint=function(t){var e=this._model.timeScale(),i=this.priceScale(),o=e.coordinateToIndex(t.x),n=i.coordinateToPrice(t.y),s=null;if(i.isPercent()){if(!this.ownerSource())return;if(s=this.ownerSource().firstValue(),null===s||!isFinite(s))return}return i.isPercent()&&(n=i.priceRange().convertFromPercent(n,s)),{price:n,index:o}},r.prototype.tags=function(){return[this._constructor]},r.prototype._snapPoint45Degree=function(t,e,i){var o,n,s,r,a,l,h,c,d,p,u,_,f=this._model.timeScale(),g=f.indexToCoordinate(e.index),m=f.indexToCoordinate(t.index)-g,v=this.m_priceScale,y=e.price,w=t.price,b=this.ownerSource().firstValue();v.isPercent()&&(y=v.priceRange().convertToPercent(y,b)),o=v.priceToCoordinate(y),n=v.priceToCoordinate(w)-o,s=Math.round(Math.atan2(m,n)/Math.PI*4),2==Math.abs(s)?i||(t.price=y):0===Math.abs(s)||4==Math.abs(s)?i||(t.index=e.index):0===Math.abs(s)||4===Math.abs(s)?i||(t.index=e.index):(r=Math.sqrt(m*m+n*n),a=m<0?-1:1,l=n<0?-1:1,h=Math.max(Math.abs(n),Math.abs(m)),c=h*Math.sqrt(2),d=c/r,h/=d,p=Math.round(f.coordinateToIndex(g+h*a)),u=Math.abs(f.indexToCoordinate(p)-g),_=v.coordinateToPrice(o+u*l),t.index=p,t.price=_)},r.prototype.createPriceAxisView=function(t){return new n(this,t)},r.prototype.version=1,r.isLineTool=function(t){var e=TradingView[t];return!!e&&TradingView.isInherited(e,r)},r.prototype.alertId=function(){return this._alertId},r.prototype.setAlert=function(t,e){},r.prototype._flushAlert=function(t){delete this._alertId,delete this._alert,this.hasAlert.setValue(!1),window.saver&&window.saver.saveChartSilently(null,!1)},r.prototype._processAlertHanders=function(t){var e,i,o,n=this;t="subscribe"===t?"subscribe":"unsubscribe",("unsubscribe"!==t||n._alertCallbacks)&&(i="subscribe"===t?"on":"off",e=n.properties(),o=n._alertCallbacks||{flush:n._flushAlert.bind(n),hovered:function(t,e){e?n._model.setHoveredSource(n):n._model.hoveredSource()===n&&n._model.setHoveredSource(null)}.bind(n),selected:function(t,e){e&&n._model.setSelectedSource(n)}.bind(n),synchronizeSilently:function(t){n.synchronizeAlert(!1)}.bind(n)},n._alertCallbacks||(n._alertCallbacks=o),n.getAlert().done(function(s){s&&(s[i]("destroy",o.flush),s[i]("change:hovered",o.hovered),s[i]("change:selected",o.selected),e.extendLeft&&e.extendLeft[t](n,o.synchronizeSilently),e.extendRight&&e.extendRight[t](n,o.synchronizeSilently))}))},r.prototype.editAlert=function(){},r.prototype.getAlert=function(t){var e,i=this;return t=t||{},e=$.Deferred(),TradingView.alertsDispatcher?TradingView.alertsDispatcher.requestAlert(i._alertId,{success:e.resolve.bind(e),error:e.reject.bind(e),fromCache:t.fromCache}):TradingView.logError("[Alerts] Can't get alert without alerts dispatcher"),e.promise()},r.prototype.synchronizeAlert=function(t){var e=this;e.hasAlert.value()&&setTimeout(function(){function i(){e._alertUndoMode=!0,r.undoToCheckpoint(e._undoCheckpointAlert),setTimeout(function(){e._alertUndoMode=!1,e.localAndServerAlersMismatch=!1},0)}function o(t){t.set("resolution",e.properties().interval.value()),t.get("extra").drawing(e),e.localAndServerAlersMismatch=!0}function n(t){TradingView.alertsDispatcher.restartAlert(t,{success:function(){e.localAndServerAlersMismatch=!1},error:i,complete:function(){delete e._undoCheckpointAlert}})}var s,r=e._model._undoModel;e._undoCheckpointAlert||e._alertUndoMode||(s=r.undoStack().pop(),e._undoCheckpointAlert=r.createUndoCheckpoint(),r.undoStack().push(s)),e.getAlert().done(function(e){o(e),t&&n(e)}).fail(i)},0)},r.prototype.stateForAlert=function(){var t,e;if(this.canHasAlert())return t=this.state(),t.uniqueId=this.uniqueId(),t.title=this.title(),e=this._getAlertPlots(),e&&(t.plots=e),t},r.prototype._getAlertPlots=function(){return null},r.prototype._linePointsToAlertPlot=function(t,e,i,o){if(2!==t.length)return TradingView.logError("[Drawing Alert] Wrong points"),null;var n=this._model.timeScale();return!n||n.isEmpty()?null:{type:"LinePlot",title:e||this.title(),timestamp:Math.round(n.indexToTimePoint(0).getTime()/1e3),offset1:t[0].index,offset2:t[1].index,price1:t[0].price,price2:t[1].price,extendBackward:i||!1,extendForward:o||!1}},r.prototype.getAlertIsActive=function(t){this.getAlert({fromCache:!0}).done(function(e){t(!!e&&e.get("active"))}).fail(function(){t(!1)})},r.prototype.geometry=function(){var t=this,e=function(e){var i=e.x/t._model.timeScale().width(),n=e.y/t.priceScale().height();return new o.Point(i,n)},i=this.points().map(function(i){var o=t.pointToScreenPoint(i)[0];return e(o)});return i},r.prototype.onlyYMoving=function(){return!1},e.LineToolPriceAxisView=n,e.LineDataSource=r}).call(e,i(63),i(21))},function(t,e,i){"use strict";function o(){this._text="",this._background="#585858",this._coordinate=0}var n=i(59).RGBColor;o.prototype.text=function(){return this._text},o.prototype.background=function(){return this._background},o.prototype.color=function(){return new n(this._background).blackWhiteContrast()},o.prototype.coordinate=function(){return this._coordinate},o.prototype.floatCoordinate=function(){return this._floatCoordinate||this._coordinate},t.exports=o},function(t,e){"use strict";function i(t){this._data=t}i.prototype.draw=function(t,e){var i,o,n,s,r,a,l,h,c,d,p,u,_,f,g,m,v,y,w,b;this._data.visible&&(i=e.fontSize,t.font=e.font,o=e.tickLength,n=e.borderSize,s=e.paddingTop,r=e.paddingBottom,a=e.paddingInner,l=e.paddingOuter,h=Math.ceil(e.widthCache.measureText(t,this._data.text)),c=e.baselineOffset,t.strokeStyle=this._data.borderColor,t.fillStyle=this._data.background,t.lineWidth=1,d=e.fontSize+s+r,p=n+h+a+l+o,u=this._data.coordinate,_=u-Math.floor(i/2)-s-.5,f=_+d,g=e.isLeft?e.width-n-.5:.5,m=g,this._data.text&&(e.isLeft?(m=g-p,v=g-o,y=m+l):(m=g+p,v=g+o,y=g+n+o+a),t.beginPath(),t.moveTo(g,_),t.lineTo(m,_),t.lineTo(m,f),t.lineTo(g,f),t.fill(),t.beginPath(),t.strokeStyle=this._data.color,t.moveTo(g,u),t.lineTo(v,u),t.stroke(),t.textAlign="left",t.fillStyle=this._data.color,t.fillText(this._data.text,y,f-r-c)),this._data.secondLine&&(w=Math.ceil(e.widthCache.measureText(t,this._data.secondLine)),b=w+a+l,t.fillStyle=this._data.background,this._data.text&&(_+=d+1,f+=d+1),e.isLeft?(m=Math.min(m,e.width-o),g=m+b,y=m+l):(g=Math.max(m-b,n),m=g+b,y=g+a),t.beginPath(),t.moveTo(g,_),t.lineTo(m,_),t.lineTo(m,f),t.lineTo(g,f),t.fill(),t.textAlign="left",t.fillStyle=this._data.color,t.fillText(this._data.secondLine,y,f-r-c)))},i.prototype.height=function(t,e){var i=t.fontSize+t.paddingTop+t.paddingBottom;return this._data.secondLine&&e?2*i+1:i},t.exports=i},function(t,e,i){"use strict";function o(){this._text="",this._background="#585858",this._coordinate=0}var n=i(59).RGBColor;o.prototype.text=function(){return this._text},o.prototype.background=function(){return this._background},o.prototype.color=function(){return new n(this._background).blackWhiteContrast()},o.prototype.coordinate=function(){return this._coordinate},t.exports=o},function(t,e){"use strict";function i(t){this._data=t}i.prototype.draw=function(t,e){var i,o,n,s,r,a,l,h,c,d,p,u,_,f,g,m,v,y;this._data.visible!==!1&&(t.font=e.font,i=e.paddingHorizontal,o=e.paddingTop,n=e.borderSize,s=e.widthCache.measureText(t,this._data.text),s<=0||(r=s+2*i,a=Math.floor(this._data.coordinate-r/2)+.5,l=a,h=l+r,c=h,d=Math.round(this._data.coordinate+1),p=d,u=.5,_=u+e.borderSize+e.tickLength+e.paddingTop+e.fontSize+e.paddingBottom,f=_,g=u,m=g,v=m+e.borderSize+e.tickLength,y=_-e.baselineOffset-e.paddingBottom,t.fillStyle=this._data.background,t.lineWidth=1,t.beginPath(),t.strokeStyle=this._data.color,t.moveTo(a,u),t.lineTo(l,_),t.lineTo(h,f),t.lineTo(c,g),t.fill(),t.beginPath(),t.moveTo(d,m),t.lineTo(p,v),t.stroke(),t.textAlign="left",t.fillStyle=this._data.color,t.fillText(this._data.text,a+i,y)))},t.exports=i},function(t,e,i){(function(t){"use strict";function o(){this._zorder=0,this.m_priceScale=null,this._id=TradingView.randomHashN(6),this._ownerSource=null,this._userEditEnabled=!0,this.hasAlert=new t((!1))}function n(t){o.call(this),this._isOverlay=null,this._model=t}var s=i(73).DefaultProperty;o.prototype.createPropertiesObject=function(t,e,i){return new s(t,e,i)},o.prototype.id=function(){return this._id},o.prototype.uniqueId=function(){return this._id},o.prototype.setId=function(t){this._id=t},o.prototype.zorder=function(){return this._zorder},o.prototype.setZorder=function(t){"number"==typeof t&&this._zorder!=t&&(this._zorder=t)},o.prototype.title=function(){throw Error("Implement this fun in a subclass")},o.prototype.priceScale=function(){return this.m_priceScale},o.prototype.setPriceScale=function(t){this.m_priceScale=t},o.prototype.ownerSource=function(){return this._ownerSource},o.prototype.setOwnerSource=function(t){this._ownerSource=t,t&&this.setPriceScale(t.priceScale())},o.prototype.isSavedInChart=function(t){return!0},o.prototype.isSavedInStudyTemplates=function(){return!0},o.prototype.isRemovedByStudyTemplates=function(){return!0},o.prototype.hasContextMenu=function(){return!0},o.prototype.showInObjectTree=function(){return!0},o.prototype.setUserEditEnabled=function(t){this._userEditEnabled=t},o.prototype.userEditEnabled=function(){return this._userEditEnabled},o.prototype.isUserDeletable=function(){return this.userEditEnabled()},o.prototype.canHasAlert=function(){return!1},o.prototype.properties=function(){throw Error("Implement this fun in a subclass")},o.prototype.statusView=function(){return null},o.prototype.dataWindowView=function(){return null},o.prototype.priceAxisViews=function(t,e){return null},o.prototype.updateAllViews=function(){},o.prototype.paneViews=function(t){return null},inherit(n,o),n.prototype.isNoScale=function(){return!!this._isOverlay},n.prototype.base=function(){return 0},n.prototype.formatter=function(){return null},n.prototype.model=function(){return this._model},n.prototype.priceRange=function(t,e){return null},n.prototype.isDraggable=function(){return!0},e.DataSource=o,e.PriceDataSource=n}).call(e,i(45))},function(t,e,i){"use strict";function o(t,e,i){this._defaultName=t;var n;i?n=e:(n=TradingView.clone(defaults(t)),e&&TradingView.merge(n,e)),s.call(this,n),this._defaultName=t,this.listeners().subscribe(this,o.prototype.onPropertyChanged),this._exclusions=[]}function n(t){o._saveDefaults=t}var s=i(63);inherit(o,s),o._saveDefaults=!1,o.prototype.addExclusion=function(t){this._exclusions.push(t)},o.prototype.restoreFactoryDefaults=function(){var t,e={};this._defaultName.startsWith("study_")&&(e=TradingView.clone(TradingView.factoryDefaults("study"))),this._defaultName.startsWith("linetool")&&(e=TradingView.clone(TradingView.factoryDefaults("linetoolvisibilities"))),t=TradingView.clone(TradingView.factoryDefaults(this._defaultName)),this._defaultName.startsWith("study_")&&t.inputs&&delete t.inputs.symbol,"linetoolicon"===this._defaultName&&(t.icon=defaults(this._defaultName).icon),~["linetooltext","linetooltextabsolute","linetoolnote","linetoolnoteabsolute","linetoolcallout","linetoolballoon","linetoolarrowmark","linetoolarrowmarkleft","linetoolarrowmarkup","linetoolarrowmarkright","linetoolarrowmarkdown","linetoolhorzline","linetoolhorzray"].indexOf(this._defaultName)&&delete t.text,this._exclusions.forEach(function(e){delete t[e]}),TradingView.merge(e,t),this.merge(e),this._defaultName.startsWith("study_")||TradingView.saveDefaults(this._defaultName,this.state(this._exclusions)),this.listeners().fire(this)},o.prototype.cleanupFactoryDefaults=function(){var t={};TradingView.saveDefaults(this._defaultName,t),this.listeners().fire(this)},o.prototype.onPropertyChanged=function(){o._saveDefaults&&!this._defaultName.startsWith("study_")&&this.saveDefaults()},o.prototype.saveDefaults=function(){TradingView.saveDefaults(this._defaultName,this.state(this._exclusions))},e.DefaultProperty=o,e.saveDefaultProperties=n},function(t,e,i){(function(e,o,n){"use strict";function s(t){return"cursor"===t||"arrow"===t||"dot"===t}function r(t){!t&&c&&c.stayInDrawingMode.value()||this.tool.setValue(this.cursorTool.value())}function a(t,e){return function(e){t.inFire||(t.inFire=!0,t.fire(e),t.inFire=!1)}}function l(){G||(g.setValue(TVSettings.getValue("chart.cursorPreference","cursor")),g.subscribe(function(t){s(t)&&m.setValue(t)},{callWithLast:!0}),m.subscribe(function(t){t&&TVSettings.setValue("chart.cursorPreference",t)}),c=new h("drawings"),d=new n,p=new n,u=new n,_=new n,d.setValue(!1),p.setValue(!1),u.setValue(!1),_.setValue(!1),G=!0)}var h=i(73).DefaultProperty,c=null,d=null,p=null,u=null,_=null,f=new e,g=new e,m=new e,v=new o,y=new o,w=new o,b=new o,S=new o,T=new o,C=new o,x=new o,P=new o,L=new o,k=new o,E=new o,I=new o,A=new o,V=new o,M=a(v),$=a(y),D=a(w),B=a(b),O=a(S),R=a(T),z=a(C),N=a(x),F=a(P),H=a(L),W=a(k),U=a(E),q=a(I),j=a(A),Y=a(V),G=!1;t.exports=TradingView.drawingState={tool:g,cursorTool:m,toolIsCursor:s,resetToCursor:r,init:l,createdLineTool:v,continuedLineTool:y,cancelledLineTool:w,createLineTool:M,continueLineTool:$,cancelLineTool:D,startedMovingLineTool:b,movedLineTool:S,finishedMovingLineTool:T,startMovingLineTool:B,moveLineTool:O,finishMovingLineTool:R,startedChangingLineTool:C,changedLineTool:x,finishedChangingLineTool:P,startChangingLineTool:z,changeLineTool:N,finishChangingLineTool:F,removedLineTool:L,removeLineTool:H,restoredLineTool:A,restoreLineTool:j,restoredLineToolState:V,restoreLineToolState:Y,finishedLineTool:k,finishLineTool:W,changedLineStyle:E,changeLineStyle:U,copiedLineTool:I,copyLineTool:q,properties:function(){return c},hideAllDrawings:function(){return d},hideMarksOnBars:function(){return u},lockDrawings:function(){return p},drawOnAllCharts:function(){return c.drawOnAllCharts},lockTimeAxis:function(){return _},lockTimeAxisTime:f}}).call(e,i(45),i(32),i(63))},function(t,e){"use strict";function i(t,e,i,o){if(e||(e=1),TradingView.isInteger(t)||(t=100),t<0)throw new TypeError("invalid base");return this._priceScale=t,this._minMove=e,this._minMove2=o,o>0&&2!==o&&4!==o?void TradingView.logDebugChart("invalid minmove2"):(this._fractional=i,void this.calculateDecimal())}function o(t,e){var i,o;if(!isNumber(t))return"n/a";if(!TradingView.isInteger(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return 0===e?""+t:(i="0000000000000000",o=(i+(""+t)).right(e))}function n(){i.call(this,100)}function s(){}function r(t){this._format_str=t||"%h:%m:%s"}function a(t){this._dwm=t}function l(t){this._precision=t}function h(t){this._numericFormatter=new l(t),this._fractionalValues=t>0}function c(){}function d(){this._prev=null}i.prototype.isFractional=function(){return this._fractional},i.prototype.decimalSign=".",i.prototype.decimalSignFractional="'",i.prototype.southandDelimeter="`",i.prototype.fullPrecision=!1,i.prototype.state=function(){return{minMove:this._minMove,minMove2:this._minMove2,fractional:this._fractional,fractionalLength:this._fractionalLength}},i.prototype.calculateDecimal=function(){if(this._fractionalLength=0,this._priceScale>0&&this._minMove>0){var t=this._priceScale;for(this._minMove2&&(t/=this._minMove2);t>1;)t/=10,this._fractionalLength++}},i.prototype.format=function(t,e,i){var o="";return t<0?(o=e===!0?"":"-",t=-t):t&&e===!0&&(o="+"),this._fractional?o+this.formatAsFractional(t,i):o+this.formatAsDecimal(t,i)},i.prototype._removeEndingZeros=function(t,e){for(var i=0;i<e&&"0"==t[t.length-1];i++)t=t.substr(0,t.length-1);return t},i.prototype.formatAsDecimal=function(t,e){var i,n,s,r,a;return e=e||0,i=this._fractional?Math.pow(10,this._fractionalLength||0):Math.pow(10,e)*this._priceScale/this._minMove,n=Math.floor(t),s=+(Math.round(t*i)-n*i).toFixed(this._fractionalLength),s>=i&&(s-=i,n+=1),
r="",1!==i&&(r=this.decimalSign+o(s.toFixed(this._fractionalLength)*this._minMove,this._fractionalLength+e),r=this._removeEndingZeros(r,e)),a=""+n+r},i.prototype.formatAsFractional=function(t,e){var i,n,s,r,a,l,h,c,d,p=this._priceScale/this._minMove,u=Math.floor(t),_=e?Math.floor(t*p)-u*p:Math.round(t*p)-u*p;return _===p&&(_=0,u+=1),i="",e&&(n=(t-u-_/p)*p,n=Math.round(n*Math.pow(10,e)),i=o(n,e),i=this._removeEndingZeros(i,e)),s="",this._minMove2?(r=["0","5"],a=["0","2","5","7"],l=_%this._minMove2,_=(_-l)/this._minMove2,h=o(_,this._fractionalLength),c=2===this._minMove2?r[l]:a[l],s=h+this.decimalSignFractional+c):s=o(_*this._minMove,this._fractionalLength),d=""+u+this.decimalSignFractional+s+i},i.prototype._parseAsDecimal=function(t){var e,o,n=RegExp(/^(\-?)[0-9]+$/),s=n.exec(t);return s?(e=parseFloat(t),{res:!0,suggest:this.format(e),price:e}):(o=RegExp("^(-?)[0-9]+\\"+i.prototype.decimalSign+"[0-9]+$"),s=o.exec(t),s?(e=parseFloat(t.replace(i.prototype.decimalSign,".")),{res:!0,suggest:this.format(e),price:e}):{res:!1,error:"not a number"})},i.prototype._patchFractPart=function(t,e){var i={0:0,5:1},o={0:0,2:1,5:2,7:3};return 2==e?void 0===i[t]?-1:i[t]:4==e?void 0===o[t]?-1:o[t]:t},i.prototype._parseAsSingleFractional=function(t){var e,i,o,n,s,r=RegExp(/^[0-9]+$/),a=r.exec(t);return a?(e=parseFloat(t),{res:!0,suggest:this.format(e),price:e}):(i=RegExp("^([0-9]+)\\"+this.decimalSignFractional+"([0-9]+)$"),a=i.exec(t),a?(o=parseInt(a[1]),n=this._priceScale,s=this._patchFractPart(parseInt(a[2]),n),s>=n||s<0?{res:!1,error:"fraction part is invalid"}:(e=o+s/n,{res:!0,suggest:this.format(e),price:e})):{res:!1,error:"not a number"})},i.prototype._parseAsDoubleFractional=function(t){var e,i,o,n,s,r,a,l=RegExp(/^[0-9]+$/),h=l.exec(t);return h?(e=parseFloat(t),{res:!0,suggest:this.format(e),price:e}):(i=RegExp("^([0-9]+)\\"+this.decimalSignFractional+"([0-9]+)\\"+this.decimalSignFractional+"([0-9]+)$"),h=i.exec(t),h?(o=parseInt(h[1]),n=this._priceScale/this._minMove2,s=this._minMove2,r=this._patchFractPart(parseInt(h[2]),n),a=this._patchFractPart(parseInt(h[3]),s),r>=n||r<0?{res:!1,error:"fraction part is invalid"}:a>=s||a<0?{res:!1,error:"second fraction part is invalid"}:(e=o+r/n+a/(n*s),{res:!0,suggest:this.format(e),price:e})):{res:!1,error:"not a number"})},i.prototype.parse=function(t){return this._fractional?this._minMove2?this._parseAsDoubleFractional(t):this._parseAsSingleFractional(t):this._parseAsDecimal(t)},inherit(n,i),n.prototype.state=function(){var t=i.prototype.state.call(this);t.percent=!0},n.prototype.format=function(t,e){return i.prototype.format.call(this,t,e)+"%"},s.prototype.format=function(t){return o(t.getUTCFullYear(),4)+"-"+o(t.getUTCMonth()+1,2)+"-"+o(t.getUTCDate(),2)},r.prototype.format=function(t){return this._format_str.replace("%h",o(t.getUTCHours(),2)).replace("%m",o(t.getUTCMinutes(),2)).replace("%s",o(t.getUTCSeconds(),2))},a.prototype.format=function(t){var e=(new s).format(t);return this._dwm||(e+=" "+(new r).format(t)),e},l.prototype.format=function(t){var e=this._precision?t.toFixed(this._precision):t+"";return e.replace(".",i.prototype.decimalSign)},l.prototype.parse=function(t){var e=t.replace(i.prototype.decimalSign,"."),o=parseFloat(e);return this._precision&&(o=o.toFixed(this._precision)),o},h.prototype.format=function(t){function e(t){return i._numericFormatter.format(t).replace(/(\.[1-9]*)0+$/,function(t,e){return e})}var i,o;return isNumber(t)?(i=this,o="",t<0&&(o="-",t=-t),t>=1e100?"N/A":((!this._fractionalValues||t>=995)&&(t=Math.round(t)),t<995?o+e(t):t<999995?o+e(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),o+e(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),o+e(t/1e9)+"B"))):"---"},h.prototype.parse=function(t){var e,i,o;return"---"==t?{res:!1,value:NaN,error:"not a number"}:(e={K:1e3,M:1e6,B:1e9},i=t.slice(-1),e.hasOwnProperty(i)?(o=this._numericFormatter.parse(t.slice(0,-1)),isNumber(o)?{res:!0,value:o*e[i]}:{res:!1,value:NaN,error:"not a number"}):(o=this._numericFormatter.parse(t),isNumber(o)?{res:!0,value:o}:{res:!1,value:NaN,error:"not a number"}))},c.prototype.format=function(t){var e,i,o,n,s=t<0;return t=Math.abs(t),e=Math.floor(t/86400),t-=86400*e,i=Math.floor(t/3600),t-=3600*i,o=Math.floor(t/60),t-=60*o,n="",e&&(n+=e+$.t("d",{context:"dates"})+" "),i&&(n+=i+$.t("h",{context:"dates"})+" "),o&&(n+=o+$.t("m",{context:"dates"})+" "),t&&(n+=t+$.t("s",{context:"dates"})+" "),s&&(n="-"+n),n.trimmed()},d.formatSign=function(t,e){return e=e||{},0===t?e.neutral||"#5A5D66":t>0?e.up||"#27AC66":e.down||"#DA563E"},d.formatDiff=function(t,e){d.signFormat(e-t)},d.prototype.format=function(t){try{return null===this._prev?d.formatSign(t):d.formatDiff(this._prev,t)}finally{this._prev=t}},e.PriceFormatter=i,e.numberToStringWithLeadingZero=o,e.PercentageFormatter=n,e.DateFormatter=s,e.TimeFormatter=r,e.DateTimeFormatter=a,e.NumericFormatter=l,e.TimeSpanFormatter=c,e.PriceColorer=d,e.VolumeFormatter=h},function(t,e){"use strict";function i(t,e){this.array=[];for(var i in t)t[i].key=i,this.array.push(t[i]);this.rearrange(e)}i.prototype.rearrange=function(t){if("function"!=typeof t)throw Error("sort param is not a function");return this.array.sort(t)},i.byValue=function(t){return function(t,e){return t-e}},i.byField=function(t){return function(e,i){return e[t]>i[t]?1:e[t]<i[t]?-1:e[t]==i[t]?0:void 0}},i.byOrder=function(t){return function(e,i){var o=t.indexOf(e.key),n=t.indexOf(i.key);return o-n}},t.exports=i},function(t,e,i){(function(e,o,n,s,r,a){"use strict";function l(t){this._series=t,this._model=t.m_model,this._points=[new e.Point(0,0)],this._invalidated=!0}function h(){return{count:TradingView.DEFAULT_BAR_COUNT}}function c(t,e,s){var r,a=i(108);P.call(this,t),this._boxSizeChanged=new o,this._tagsChanged=new o,this._symbolIntervalChanged=new o,this._symbolResolved=new o,this._symbolError=new o,this._symbolNotPermitted=new o,this._extendedHoursChanged=new o,this._extendedHoursNotPermitted=new o,this.chartTypeNotPermitted=new o,this.intradaySpreadNotPermitted=new o,this.intradayExchangeNotPermitted=new o,this.customIntervalNotPermitted=new o,this.chartWidgetInitialized=new o,this._startLoading=new o,this._dataLoaded=new o,this._tickmarksRangeChanged=new o,this._barReceived=new o,this._onChangedStyle=new o,this._onCompleted=new o,this._onStatusChanged=new o,this._onRestarted=new o,this._onSessionsStudyCreated=new o,this.requestingIntradayWhenNotSupported=new o,this.requestingResolutionWhenNotSupported=new o,this.priceScaleChanged=new o,this._requestOptions=s?s:h(),this.m_model=t,this._chartApi=t._chartApi,this.m_data=new V(this,t),this.setProperties(e),this._prevChartStyle=e.style.value(),this.createPaneView(),this._dataWindowView=new _(this,t),this._statusView=new d(this,t.properties()),this._priceAxisViews=[new u(this,t),new p(this,t)],this._symbolInfo=null,this._status=c.STATUS_OFFLINE,r=this,this._turnaroundCounter=1,this._turnaround="s"+this._turnaroundCounter,this._handler=function(t){r.onData(t)},this._properties.addExclusion&&this._properties.addExclusion("visible"),this._base=100,this._formatter=new O(this._base),this._predictBars=0,this._futureBarsPaneView=null,this._properties.showInDataWindow.listeners().subscribe(t,a.prototype.fullUpdate),this.marketStatus=new n,this._seriesLoaded=!1,this.properties().minTick.listeners().subscribe(this,c.prototype._recreateFormatter),r=this,this.properties().minTick.listeners().subscribe(null,function(){r.m_model.invalidate(new M(M.FULL_UPDATE))}),this._priceLineView=new l(this),this._gotoDateView=new x(this),this.bindStyleChange(),this.bindJapChartsInputs(),this.createExtendedHoursProperty(),this.extendedHours.listeners().subscribe(this,function(){this._extendedHoursChanged.fire()}),this._extendedHoursNotPermitted.subscribe(this,function(){this._properties.extendedHours.setValue(!1)}),this._extendedHoursChanged.subscribe(this,function(){this._status!==c.STATUS_SNAPSHOT&&this.restart()}),this._symbolIntervalChanged.subscribe(this,this.checkInterval),this.properties().showCountdown.listeners().subscribe(this,c.prototype._onChangeShowCountdown),this._onChangeShowCountdown(this.properties().showCountdown),this._recreateFormatter()}var d,p,u,_,f,g,m,v,y,w,b,S,T,C,x,P,L,k,E,I,A,V,M,D,B,O,R,z;TradingView.DEFAULT_BAR_COUNT=300,TradingView.TIME_PLOT=0,TradingView.OPEN_PLOT=1,TradingView.HIGH_PLOT=2,TradingView.LOW_PLOT=3,TradingView.CLOSE_PLOT=4,TradingView.ADT_PLOT=6,TradingView.STYLE_PLOT=7,TradingView.SEARCH_FROM_LEFT=-1,TradingView.SEARCH_FROM_RIGHT=1,d=i(79),p=i(81),u=i(82),_=i(84),f=i(86),g=f.SeriesAreaPaneView,m=f.SeriesLinePaneView,v=f.SeriesHollowCandlesPaneView,y=f.SeriesCandlesPaneView,w=f.SeriesBarsPaneView,b=f.SeriesHeikenAshiPaneView,S=i(94),T=i(95).SeriesBarColorer,C=i(96).HorzLineRenderer,x=i(99),P=i(72).PriceDataSource,L=i(100),k=i(101).FutureBarsPaneView,E=i(43),I=i(88),A=i(103),V=i(104),M=i(106),D=i(46),B=i(75),O=B.PriceFormatter,R=i(105),z=i(107),l.prototype.update=function(){this._invalidated=!0},l.prototype.updateImpl=function(){if(this._visible=!1,this._series.properties().showPriceLine.value()){var t=this._series.lastValueData(TradingView.CLOSE_PLOT,!0);t.noData||(this._visible=!0,this._points=[new e.Point(0,t.coordinate)],this._color=t.color)}},l.prototype.renderer=function(){this._invalidated&&(this.updateImpl(),this._invalidated=!1);var t={};return t.points=this._points,t.color=this._color,t.linewidth=this._series.properties().priceLineWidth.value(),t.linestyle=CanvasEx.LINESTYLE_DOTTED,t.hitTestResult=I.REGULAR,t.visible=this._visible,new C(t)},inherit(c,P),c.prototype.endOfData=function(){return this._endOfData},c.prototype.serverTimeOffset=function(){return this._chartApi.serverTimeOffset()},c.prototype._onChangeShowCountdown=function(t){var e=this;t.value()?this._countdownUpdateTimer=this.m_model.setInterval(function(){e.isDWM()||(e._priceAxisViews[0].update(),e.m_model.invalidate(new M(M.LIGHT_UPDATE)))},500):(this.m_model.clearInterval(this._countdownUpdateTimer),delete this._countdownUpdateTimer)},c.prototype.lastValueData=function(t,e,i){var o,n,s,r,a,l,h,c,d,p,u,_,f={noData:!0};if(this.m_model.timeScale().isEmpty()||this.priceScale().isEmpty()||this.data().isEmpty())return f;if(o=this.m_model.timeScale().visibleBars(),o.isEmpty())return f;if(e){if(r=this.data().bars().last(),null===r||void 0===r)return f;n=r.value,s=parseInt(r)}else{if(a=this.data().bars().search(o.lastBar(),TradingView.SEARCH_NEAREST_LEFT),null===a||void 0===a)return f;n=this.data().bars().valueAt(a.index),s=a.index}return l={noData:!1},h=n[TradingView.CLOSE_PLOT],i&&(l.price=h),this.priceScale().properties().percentage.value()&&(c=this.nearestIndex(o.firstBar(),TradingView.SEARCH_NEAREST_RIGHT),d=this.data().valueAt(c)[TradingView.CLOSE_PLOT],p=this.firstValue(),h=this.priceScale().priceRange().convertToPercent(h,p)),l.text=this.priceScale().formatter().format(h),u=this.barColorer(),_=u.barStyle(s,!1),l.color=_.barColor,l.floatCoordinate=this.priceScale().priceToCoordinate(h,!0),l.coordinate=Math.round(l.floatCoordinate),l.index=s,l},c.prototype._prepareChartApiParams=function(){return this._requestOptions.startDate?!this._requestOptions.startDate||this._requestOptions.endDate||this._requestOptions.count?this._requestOptions.startDate&&this._requestOptions.endDate?["from_to",this._requestOptions.startDate,this._requestOptions.endDate]:["from_to",this._requestOptions.startDate,this._requestOptions.count]:["from_to",this._requestOptions.startDate]:this._requestOptions.count||TradingView.DEFAULT_BAR_COUNT},c.prototype._nextSymbolId=1,c.prototype._nextSeriesId=1,c.STYLE_BARS=0,c.STYLE_CANDLES=1,c.STYLE_LINE=2,c.STYLE_LINE_TYPE_MARKERS=0,c.STYLE_LINE_TYPE_STEP=1,c.STYLE_LINE_TYPE_SIMPLE=2,c.STYLE_AREA=3,c.STYLE_RENKO=4,c.STYLE_KAGI=5,c.STYLE_PNF=6,c.STYLE_PB=7,c.STYLE_HEIKEN_ASHI=8,c.STYLE_HOLLOW_CANDLES=9,c.STATUS_OFFLINE=0,c.STATUS_RESOLVING=1,c.STATUS_LOADING=2,c.STATUS_READY=3,c.STATUS_INVALID_SYMBOL=4,c.STATUS_SNAPSHOT=5,c.STATUS_EOD=6,c.STATUS_PULSE=7,c.STATUS_DELAYED=8,c.STATUS_DELAYED_STREAMING=9,c.STATUS_NO_BARS=10,c.PERMISSION_DENIED="permission denied",c.PD_REASON_SYMBOL="symbol",c.PD_REASON_EXTENDED_HOURS="extended_hours",c.STUDY_NOT_AUTH="study_not_auth",c.STYLE_SHORT_NAMES={},c.STYLE_SHORT_NAMES[c.STYLE_BARS]="bar",c.STYLE_SHORT_NAMES[c.STYLE_CANDLES]="candle",c.STYLE_SHORT_NAMES[c.STYLE_HOLLOW_CANDLES]="hollowCandle",c.STYLE_SHORT_NAMES[c.STYLE_LINE]="line",c.STYLE_SHORT_NAMES[c.STYLE_AREA]="area",c.STYLE_SHORT_NAMES[c.STYLE_RENKO]="renko",c.STYLE_SHORT_NAMES[c.STYLE_PB]="pb",c.STYLE_SHORT_NAMES[c.STYLE_KAGI]="kagi",c.STYLE_SHORT_NAMES[c.STYLE_PNF]="pnf",c.STYLE_SHORT_NAMES[c.STYLE_HEIKEN_ASHI]="ha",c._SYMBOL_STRING_DATA={},c._SYMBOL_STRING_DATA[c.STYLE_RENKO]={type:"BarSetRenko@tv-prostudies-1!",inputNames:["source","style","boxSize","atrLength"]},c._SYMBOL_STRING_DATA[c.STYLE_PB]={type:"BarSetPriceBreak@tv-prostudies-1!",inputNames:["source","lb"]},c._SYMBOL_STRING_DATA[c.STYLE_KAGI]={type:"BarSetKagi@tv-prostudies-1!",inputNames:["source","style","atrLength","reversalAmount"]},c._SYMBOL_STRING_DATA[c.STYLE_PNF]={type:"BarSetPnF@tv-prostudies-1!",inputNames:["sources","style","boxSize","atrLength","reversalAmount"]},c._SYMBOL_STRING_DATA[c.STYLE_HEIKEN_ASHI]={type:"BarSetHeikenAshi@tv-basicstudies-1!",inputNames:[]},c.prototype.model=function(){return this.m_model},c.prototype.fixLastBar=function(t){this._futureBarsPaneView||(this._futureBarsPaneView=new k(this,this.data().bars().lastTimeIndex()+1,t))},c.prototype.clearData=function(){this.data().clear()},c.prototype.data=function(){return this.m_data},c.prototype.symbolId=function(){return this._symbolId},c.prototype.isPulse=function(){return this._symbolInfo&&this._symbolInfo.resolutions.length>0},c.prototype.onTagsChanged=function(){return this._tagsChanged},c.prototype.onSymbolIntervalChanged=function(){return this._symbolIntervalChanged},c.prototype.onSymbolResolved=function(){return this._symbolResolved},c.prototype.onSymbolError=function(){return this._symbolError},c.prototype.onSymbolNotPermitted=function(){return this._symbolNotPermitted},c.prototype.onExtendedHoursNotPermitted=function(){return this._extendedHoursNotPermitted},c.prototype.onStartLoading=function(){return this._startLoading},c.prototype.onDataLoaded=function(){return this._dataLoaded},c.prototype.onStatusChanged=function(){return this._onStatusChanged},c.prototype.onTickmarksRangeChanged=function(){return this._tickmarksRangeChanged},c.prototype.onBarReceived=function(){return this._barReceived},c.prototype.onChangedStyle=function(){return this._onChangedStyle},c.prototype.onCompleted=function(){return this._onCompleted},c.prototype.onRestarted=function(){return this._onRestarted},c.prototype.onBoxSizeChanged=function(){return this._boxSizeChanged},c.prototype.status=function(){return this._status},c.prototype.isDWM=function(){var t,e=new E(this._properties.interval.value());return!!e.isDWM()||(t=e.kind()===E.SECONDS?e.multiplier():60*e.multiplier(),!(t<216e3))},c.prototype.lastPriceLabelFixedCoordinate=function(){return this._priceAxisViews[0]._fixedCoordinate},c.prototype.createPaneView=function(){this._paneView=null,this._projectionBarsPaneView=null,this._symbolLabelView=new L(this.m_model,this,TradingView.CLOSE_PLOT,"firstShortName","showSymbolLabels");var t=this._properties.style.value();switch(t){case c.STYLE_BARS:this._paneView=new w(this,this.m_model);break;case c.STYLE_CANDLES:this._paneView=new y(this,this.m_model);break;case c.STYLE_LINE:this._paneView=new m(this,this._properties.lineStyle.priceSource.value(),this.m_model);break;case c.STYLE_AREA:this._paneView=new g(this,this._properties.areaStyle.priceSource.value(),this.m_model);break;case c.STYLE_HEIKEN_ASHI:this._paneView=new b(this,this.m_model);break;case c.STYLE_HOLLOW_CANDLES:this._paneView=new v(this,this.m_model);break;default:throw"Unknown chart style assigned: "+t}},c.prototype._clearStylePlot=function(t,e){var i,o;t.size()&&(i=e||+t.first(),o=+t.last()+1,t.range(i,o).each(function(t,e){e[TradingView.STYLE_PLOT]=null}))},c.prototype.invalidateBarStylesCache=function(t){TradingView.logDebugChart("Invalidate style cache starting from "+t),this._clearStylePlot(this.m_data.m_bars,t),this._clearStylePlot(this.m_data.m_nsBars)},c.prototype.invalidateBarColorerCache=function(){delete this._barColorerCache,this.invalidateBarStylesCache()},c.prototype.barColorer=function(){var t,e,i,o;if(this._barColorerCache)return this._barColorerCache;for(t=null,e=this.m_model.dataSources().length-1;e>=0;e--)i=this.m_model.dataSources()[e],i.metaInfo&&TradingView.isInherited(i.constructor,TradingView.Study)&&i.hasBarColorer()&&i.properties().visible.value()&&(o=i.barColorer(),null===t?t=o:t.pushBackBarColorer(o));return null===t?t=new T(this):t.pushBackBarColorer(new T(this)),this._barColorerCache=t,this._barColorerCache},c.prototype.properties=function(){return this._properties},c.prototype._barsState=function(t){var e=t.state();return e.columns=e.columns.filter(function(t){return"style"!==t}),e.data.forEach(function(t){t.value.splice(7,1)}),e},c.prototype.state=function(t){var e=this===this.m_model.mainSeries()?"MainSeries":TradingView.className(this.constructor),i={type:e,id:this.id(),state:this.properties().state(),zorder:this.zorder()};return this._symbolInfo&&this._symbolInfo.ticker&&(i.state.symbol=this._symbolInfo.ticker),t&&(i.bars=this._barsState(this.m_data.m_bars),i.nsBars=this._barsState(this.m_data.m_nsBars),i.symbolInfo=this._symbolInfo,i.rtPrice=this.data().lastProjectionPrice),i.boxSize=this.data().boxSize,i.reversalAmount=this.data().reversalAmount,i},c.prototype.stateForAlert=function(){var t=this===this.m_model.mainSeries()?"MainSeries":TradingView.className(this.constructor);return{id:this.id(),uniqueId:this.uniqueId(),type:t,proSymbol:this.proSymbol(),actualSymbol:this.actualSymbol(),interval:this.interval(),style:this.properties().style.value(),styleInputs:this.getInputsProperties().state(),extendedHours:this.extendedHours.value(),boxSize:this.data().boxSize,reversalAmount:this.data().reversalAmount}},c.prototype.uniqueId=function(){return this.actualSymbol()+"|"+this.interval()},c.prototype.restoreData=function(t,e,i,o,n,s){this._status=c.STATUS_SNAPSHOT,this.m_data.m_bars.restoreState(t),this.m_data.m_nsBars.restoreState(e),this.updateSymbolInfo(i),this.m_data.lastProjectionPrice=o,this.m_data.boxSize=n,n||(this.properties().style.value()===c.STYLE_PNF?this.m_data.boxSize=this.properties().pnfStyle.inputs.boxSize.value():this.properties().style.value()===c.STYLE_RENKO&&(this.m_data.boxSize=this.properties().renkoStyle.inputs.boxSize.value())),this.m_data.reversalAmount=s,s||this.properties().style.value()===c.STYLE_KAGI&&(this.m_data.reversalAmount=this.properties().kagiStyle.inputs.reversalAmount.value())},c.prototype.setProperties=function(t){t.timeframe||t.merge({timeframe:""}),t.shortName||t.merge({shortName:""}),this._properties=t,this._properties.symbol.listeners().subscribe(this,c.prototype.changeSymbol),this._properties.interval.listeners().subscribe(this,c.prototype.changeInterval),this._properties.timeframe.listeners().subscribe(this,c.prototype.changeTimeFrame),this._properties.listeners().subscribe(this,c.prototype.changeProperties)},c.prototype.changeSymbol=function(){this.setSymbolIntervalDelayed(),this.m_model.checkLineToolSelection()},c.prototype.changeInterval=function(){this.setSymbolIntervalDelayed()},c.prototype.changeTimeFrame=function(){TradingView.trackEvent("GUI","Change timeframe")},c.prototype.title=function(){return this.properties().symbol.value()+", "+TradingView.translatedIntervalString(this.properties().interval.value())},c.generateTitleForGui=function(t){function e(t,e){var i=(s.precision||4,Math.round(t*Math.pow(10,e))/Math.pow(10,e));return i||""}var i,o,n,s=t||{},r="QUANDL"===s.exchange,a="",l={symbolDescription:"",interval:"",exchange:"",chartStyle:""};switch(s.description&&r?2===s.description.split("/").length?l.symbolDescription=s.description.split("/")[1]:(i=s.description.split("'").filter(function(t){return t.length}),i.forEach(function(t){t=t&&("/"===t[0]||/\d+\/\(?/.test(t))?[t]:t.split("/").filter(function(t){return t.length}),l.symbolDescription+=t[2===t.length?1:0]})):s.description?l.symbolDescription=s.description:l.symbolDescription=s.symbol,s.interval&&(l.interval=TradingView.translatedIntervalString(s.interval)),r&&s.description&&(o=/[\w_]+\/[\w_]+/.exec(s.description),o&&o[0]?l.provider=o[0].split("/")[0]:l.provider=s.description.split("/")[0]),s.exchange&&(l.exchange=s.exchange),s.style){case c.STYLE_RENKO:n=s.inputs.style+("ATR"===s.inputs.style?"("+s.inputs.atrLength+")":""),l.chartStyle=$.t("Renko")+" ["+s.inputs.source+", "+n+", "+e(s.boxSize,4)+"]";break;case c.STYLE_PB:l.chartStyle=$.t("Line Break")+" ["+s.inputs.source+", "+s.inputs.lb+"]";break;case c.STYLE_KAGI:n=s.inputs.style+("ATR"===s.inputs.style?"("+s.inputs.atrLength+")":""),l.chartStyle=$.t("Kagi")+" ["+s.inputs.source+", "+n+", "+e(s.reversalAmount,4)+"]";break;case c.STYLE_PNF:n=s.inputs.style+("ATR"===s.inputs.style?"("+s.inputs.atrLength+")":""),l.chartStyle=$.t("PnF")+" ["+s.inputs.sources+", "+n+", "+e(s.boxSize,4)+", "+s.inputs.reversalAmount+"]";break;case c.STYLE_HEIKEN_ASHI:l.chartStyle=$.t("Heikin Ashi")}return a=l.symbolDescription+(l.interval?", "+l.interval:"")+(l.provider?", "+l.provider:"")+(l.exchange?", "+l.exchange:"")+(l.chartStyle?", "+l.chartStyle:""),a=a.replace(/\'/g,"")},c.prototype.changeProperties=function(t){t!==this._properties.symbol&&t!==this._properties.interval&&t!==this._properties.timeframe&&(this._tagsChanged.fire(),this.createPaneView(),this.updateAllViews(),this.m_model.updateSource(this))},c.prototype._makeNextSymbolId=function(){return"symbol_"+this._nextSymbolId++},c.prototype._makeNextSeriesId=function(){return"s"+this._nextSeriesId++},c.prototype._clearLoadingTimer=function(){this.loadingTimer&&(clearTimeout(this.loadingTimer),this.loadingTimer=null)},c.prototype.onData=function(t){var e,i,o,n,r,a,l,h,d,p,u,_,f,g,m,v,y,w,b=this;switch(t.method){case"symbol_resolved":if(t.params[0]!==this._symbolId){TradingView.logNormalChart("command for old symbol. Expected:"+this._symbolId+", actual"+t.params[0]);break}this.updateSymbolInfo(t.params[1]),this.m_model.updateSource(this),this._symbolResolved.fire(this._symbolInfo),this.m_model.realignLineTools(),TradingView.onWidget()||TradingView.trackEvent("Symbol",t.params[1].listed_exchange,t.params[1].name),e=this.symbolInfo().minmov/this.symbolInfo().pricescale,i=this.properties(),i.style.value()==c.STYLE_RENKO&&i.renkoStyle.inputs.boxSize.value()<e?i.renkoStyle.inputs.merge({boxSize:e}):i.style.value()==c.STYLE_PNF&&i.pnfStyle.inputs.boxSize.value()<e?i.pnfStyle.inputs.merge({boxSize:e}):i.style.value()==c.STYLE_KAGI&&i.kagiStyle.inputs.reversalAmount.value()<e&&i.kagiStyle.inputs.merge({reversalAmount:e});break;case"symbol_error":if(t.params[0]!==this._symbolId){TradingView.logNormalChart("command for old symbol. Expected:"+this._symbolId+", actual"+t.params[0]);break}if(this._clearLoadingTimer(),this._setStatus(c.STATUS_INVALID_SYMBOL),this._properties.shortName.setValue(this._properties.symbol.value()),this.m_model.clearAllStudies(),this.updateAllViews(),this.m_model.updateSource(this),t.params[1]==c.PERMISSION_DENIED)switch(t.params[2]){case c.PD_REASON_EXTENDED_HOURS:this._extendedHoursNotPermitted.fire();break;case c.PD_REASON_SYMBOL:this._symbolNotPermitted.fire(t.params[3]);break;default:this._symbolNotPermitted.fire(t.params[2])}else this.m_model.resetTimeScale(),this._symbolError.fire(),Telemetry.sendReport("symbol_error",{chartSession:b._chartApi._sessionid,symbol:b.getSymbolString()});this.m_model.realignLineTools();break;case"series_timeframe":if(t.params[1]!==this._turnaround)break;o=t.params[2],n=t.params[3],r=t.params[4],a=void 0!==r&&r?n:n+10,this.m_model.setTimeViewport(o,a);break;case"series_error":l=t.params[2],this._clearLoadingTimer(),delete this._loadingStartTime,s.enabled("charting_library_debug_mode")&&TradingView.logNormal("Error reason: "+l),this._setStatus(s.enabled("no_bars_status")&&this._symbolInfo?c.STATUS_NO_BARS:c.STATUS_INVALID_SYMBOL),l&&l.startsWith("study_not_auth:")?(h=l.split(":",2)[1].split("@",2)[0],h in{BarSetRenko:!0,BarSetPriceBreak:!0,BarSetKagi:!0,BarSetPnF:!0}?this.chartTypeNotPermitted.fire(h):"BarSetSpread"===h&&this.intradaySpreadNotPermitted.fire()):"resolution_not_entitled"==l?this.intradayExchangeNotPermitted.fire():"custom_resolution"==l&&this.customIntervalNotPermitted.fire(),this._seriesLoaded=!0;break;case"series_loading":if(t.params[1]!==this._turnaround)break;if(t.params[0]!==this._seriesId){TradingView.logNormalChart("command for old series. Expected:"+this._seriesId+", actual"+t.params.customId);break}this._setStatus(c.STATUS_LOADING),b._loadingStartTime=(new Date).getTime(),b.loadingTimer=setTimeout(function(){var t={chartSession:b._chartApi._sessionid,symbol:b.getSymbolString(),interval:b.interval()};Telemetry.sendReport("series_loading",t)},15e3);break;case"series_completed":if(t.params[2]!==this._turnaround)break;if(t.params[0]!==this._seriesId){TradingView.logNormalChart("command for old series. Expected:"+this._seriesId+", actual"+t.params.customId);break}switch(d="chartSession:"+b._chartApi._sessionid,TradingView.logDebugChart(d+", Series loading took "+((new Date).getTime()-this._loadingStartTime)+" ms, eod:"+this._endOfData),delete this._loadingStartTime,p=t.params[1],"pulsed"==p&&(p="delayed"),p){case"streaming":this._setStatus(c.STATUS_READY);break;case"endofday":this._setStatus(c.STATUS_EOD);break;case"delayed":this._setStatus(c.STATUS_DELAYED);break;case"pulsed":this._setStatus(c.STATUS_PULSE)}p.match(/delayed_streaming/)&&this._setStatus(c.STATUS_DELAYED_STREAMING),u=this.m_model.paneForSource(this),u.recalculatePriceScale(this.priceScale()),this.m_model.invalidate(new M(M.FULL_UPDATE)),this.m_data.size()&&this._tickmarksRangeChanged.fire({start:this.data().first().value[TradingView.TIME_PLOT],end:this.data().last().value[TradingView.TIME_PLOT]}),this.model().recalcVisibleRangeStudy(this.model().dataSources(),!0),this.model().recalcStudyBasedLineTools(),!this.isLockScale()||this.model().timeScale().isEmpty()||this._seriesLoaded||(this.model().timeScale()._correctOffset(),this.model().timeScale().correctBarSpacing(),_=this.model().timeScale().visibleBars(),this.priceScale().setPriceRange(this.priceRange(_.firstBar(),_.lastBar()))),this._seriesLoaded=!0,this._onCompleted.fire(this._endOfData),this.requestMoreData();break;case"series_deleted":break;case"data_update":if(t.params.customId!==this._seriesId){TradingView.logNormalChart("command for old series. Expected:"+this._seriesId+", actual"+t.params.customId);break}if(this.status()===c.STATUS_INVALID_SYMBOL)break;this._clearLoadingTimer(),t.params.plots.length>0&&(this._endOfData=!1),t.params.plots.length?(f=this.m_data.m_bars.size(),g=this.m_data.m_bars.merge(t.params.plots),m="Merge bars. Changes:{length:"+g.length+", earliestRow:"+g.earliestRow.index+"} ",m+="bars state:{firstBar:"+this.m_data.m_bars.first()+",lastBar:"+this.m_data.m_bars.last()+",size:"+this.m_data.m_bars.size()+"}",TradingView.logDebugChart(m),f!=this.bars().size()&&(this._barReceived.fire(this.m_data.m_bars.size()),this.model().recalcVisibleRangeStudy(this.model().dataSources(),!0))):(this.m_data.clear(),this._startLoading.fire()),v=this.properties().style.value(),!t.params.nonseries||v!==c.STYLE_RENKO&&v!==c.STYLE_KAGI&&v!==c.STYLE_PNF&&v!==c.STYLE_HEIKEN_ASHI&&v!==c.STYLE_PB?t.params.nonseries||(this.m_data.m_nsBars.clear(),this.m_data.lastProjectionPrice=void 0):(y=this.parseJapProjBars(t.params.nonseries),this.m_data.m_nsBars=y.nsBars,this.m_data.lastProjectionPrice=y.lastPrice,w=this.m_data.boxSize!==y.boxSize,this.m_data.boxSize=y.boxSize,this.m_data.reversalAmount=y.reversalAmount,w&&this._boxSizeChanged.fire(this.m_data.boxSize)),u=this.m_model.paneForSource(this),this.m_model.updateAllVolumeStudies(),this.m_model.recalculatePane(u),this.m_model.updateSource(this),this.m_model.updateLineTools(),this.m_model.updateCrossHair()}this._dataLoaded.fire(t)},c.prototype.fixBoxSize=function(){var t=this.model().timeScale(),e=this.priceScale();e.isEmpty()||t.isEmpty()||(this.m_data.boxSize=Math.abs(e.coordinateToPrice(t.barSpacing())-e.coordinateToPrice(0)))},c.prototype.parseJapProjBars=function(t){var e,i,o,n,s,r,a,l,h=new R(["time","open","high","low","close","adt","style"]),d=this.model().timeScale(),p=this.properties().style.value();if(t.d&&""!==t.d)for(n=TradingView.Study.prototype._makeJSONForNSData.call(this,{params:{nonseries:t}}).data,e=n.price,i=n.boxSize,o=n.reversalAmount,s=n.bars,r=0;s&&r<s.length;r++)a=[],l=t.indexes[s[r].time],a.push(d.points().valueAt(l)),a.push(s[r].open),a.push(s[r].high),a.push(s[r].low),a.push(s[r].close),a.push(s[r].volume),p===c.STYLE_KAGI?a.push(s[r].additionalPrice):p===c.STYLE_PNF&&a.push(s[r].factor),h.add(l,a);return{nsBars:h,lastPrice:e,boxSize:i,reversalAmount:o}},c.prototype.disconnect=function(){this._symbolId=null,this._seriesId=null,this._predictBars=0,this._status=c.STATUS_OFFLINE},c.prototype.isStarted=function(){return!!this._symbolId},c.prototype.restart=function(){var t=i(108);this._onRestarted.fire(),this._setStatus(c.STATUS_RESOLVING),this.m_data=new V(this,this.model()),this._prevSymbolId=this._symbolId,this._symbolId=this._makeNextSymbolId(),this._chartApi.resolveSymbol(this._symbolId,this.getSymbolString(),this._handler),this._seriesId?(this._turnaround="s"+ ++this._turnaroundCounter,this._chartApi.modifySeries(this._seriesId,this._turnaround,this._symbolId,this._properties.interval.value(),this._handler,this._prevSymbolId)):(this._seriesId=this._makeNextSeriesId(),this._chartApi.createSeries(this._seriesId,this._turnaround,this._symbolId,this._properties.interval.value(),this._prepareChartApiParams(),this._handler)),this._properties.showInDataWindow.listeners().subscribe(this.m_model,t.prototype.fullUpdate),this.m_symbol=this._properties.symbol.value(),this.m_interval=this._properties.interval.value()},c.prototype._generateTimeframe=function(t,e){var i,o=e.right(1),n=t;return"ytd"===e?n+=",YTD":"d"===o?(i=e.left(e.length-1),n+=","+i,s.enabled("daily_timeframe_suffix")&&(n+="D")):"m"===o?(i=e.left(e.length-1),n+=","+i+"M"):"all"===e&&(n+=",ALL"),n},c.prototype.hasDelayedSymbolIntervalChange=function(){return!!this._setSymbolIntervalDelay},c.prototype.setSymbolIntervalDelayed=function(){return this._seriesLoaded||this._status===c.STATUS_INVALID_SYMBOL||this._status===c.STATUS_NO_BARS?void((this._checkSymbolWillChanged(this._properties.symbol.value())||this._checkIntervalWillChanged(this._parseInterval(this._properties.interval.value()).interval))&&(this._setSymbolIntervalDelay&&clearTimeout(this._setSymbolIntervalDelay),this._setSymbolIntervalDelay=setTimeout(function(){delete this._setSymbolIntervalDelay,this.setSymbolInterval(this._properties.symbol.value(),this._properties.interval.value())}.bind(this),30))):void this._onCompleted.subscribe(this,this.setSymbolIntervalDelayed,!0)},c.prototype._checkSymbolWillChanged=function(t){return!this.symbolSameAsCurrent(t)||s.enabled("same_data_requery")},c.prototype._checkIntervalWillChanged=function(t){return this.m_interval!==t||s.enabled("same_data_requery")},c.prototype._parseInterval=function(t){var e=(t+"").split(",");return{interval:2===e.length?e[0]:t,timeframe:2===e.length?e[1]:0}},c.prototype.setSymbolInterval=function(t,e){var i,o,n,s,r,a;delete this._gotoDateResult,i=this._parseInterval(e),o=i.interval,n=i.timeframe,s=this._checkSymbolWillChanged(t),r=this._checkIntervalWillChanged(o),(s||r)&&(this.m_symbol=t,this.m_interval=o,this.m_timeframe=n,this._symbolId&&!s||this.updateSymbolInfo(null),this.m_model.realignLineTools(),this._status!==c.STATUS_SNAPSHOT&&(this._setStatus(c.STATUS_RESOLVING),this._symbolIntervalChanged.fire(),this._onRestarted.fire(),this._seriesLoaded=!1,this._chartApi&&this._chartApi.connected()&&(this._symbolId&&!s||(this._prevSymbolId=this._symbolId,this._symbolId=this._makeNextSymbolId(),
a=this.getSymbolString(),this._chartApi.resolveSymbol(this._symbolId,a,this._handler)),this._seriesId?(this._turnaround="s"+ ++this._turnaroundCounter,this._pendingInterval&&(e=this._generateTimeframe(e,this._pendingInterval),delete this._pendingInterval),this._predictBars=0,this._chartApi.modifySeries(this._seriesId,this._turnaround,this._symbolId,e,this._handler,this._prevSymbolId)):(this._seriesId=this._makeNextSeriesId(),this._chartApi.createSeries(this._seriesId,this._turnaround,this._symbolId,e,this._prepareChartApiParams(),this._handler)))))},c.prototype.actualSymbol=function(){return this.symbolInfo()?this.symbolInfo().full_name:this.symbol()},c.prototype.proSymbol=function(){return this.symbolInfo()?this.symbolInfo().pro_name:this.symbol()},c.prototype.symbol=function(){return this.properties().symbol.value()},c.prototype.interval=function(){return this.properties().interval.value()},c.prototype.isIntradayInterval=function(){return!!/^\d*$/.test(this.interval())&&this.interval()<=1440},c.prototype.bars=function(){return this.m_data.m_bars},c.prototype.nsBars=function(){return this.m_data.m_nsBars},c.prototype.open=function(t){return this.m_data.valueAt(t)[TradingView.OPEN_PLOT]},c.prototype.high=function(t){return this.m_data.valueAt(t)[TradingView.HIGH_PLOT]},c.prototype.low=function(t){return this.m_data.valueAt(t)[TradingView.LOW_PLOT]},c.prototype.close=function(t){return this.m_data.valueAt(t)[TradingView.CLOSE_PLOT]},c.prototype.hl2=function(t){return(this.high(t)+this.low(t))/2},c.prototype.hlc3=function(t){return(this.high(t)+this.low(t)+this.close(t))/3},c.prototype.ohlc4=function(t){return(this.open(t)+this.high(t)+this.low(t)+this.close(t))/4},c.prototype.priceRange=function(t,e){var i,o,n,s,a,l,h,c;return TradingView.isInteger(t)?TradingView.isInteger(e)?this.data().isEmpty()?null:(o=this.data().boxSize,this.isLockScale()?(void 0===o&&this.fixBoxSize(),n=this.priceScale().internalHeight()/(this.model().timeScale().barSpacing()/this.data().boxSize),s=this.data().search(e,TradingView.SEARCH_NEAREST_LEFT),a=(s.value[TradingView.HIGH_PLOT]+s.value[TradingView.LOW_PLOT])/2,i=new r(a-.5*n,a+.5*n),l=this.data().search(t,TradingView.SEARCH_NEAREST_RIGHT),this.priceScale().properties().percentage.value()&&i?i.convertToPercents(l.value[TradingView.CLOSE_PLOT]):i):(h=this.data().bars().minMaxOnRange2(t,e,[{index:TradingView.LOW_PLOT,offset:0},{index:TradingView.HIGH_PLOT,offset:0}]),c=this.data().nsBars().minMaxOnRange(t,e,[{index:TradingView.LOW_PLOT,offset:0},{index:TradingView.HIGH_PLOT,offset:0}]),null!=c.min&&(h.min=Math.min(h.min,c.min)),null!=c.max&&(h.max=Math.max(h.max,c.max)),i=new r(h.min,h.max),i&&i.minValue()===i.maxValue()&&(i=new r(i.minValue()-.5,i.maxValue()+.5)),this.priceScale().properties().percentage.value()&&i?(l=this.data().search(t,TradingView.SEARCH_NEAREST_RIGHT),i.convertToPercents(l.value[TradingView.CLOSE_PLOT])):this.priceScale().isLog()&&i?new r(this.priceScale().priceToLogical(i.minValue()),this.priceScale().priceToLogical(i.maxValue())):i)):(TradingView.logDebugChart("Series.priceRange: incorrect endBar"),null):(TradingView.logDebugChart("Series.priceRange: incorrect startBar"),null)},c.prototype.nearestData=function(t,e){if(!TradingView.isInteger(t))return void TradingView.logDebugChart("Series.nearestData: incorrect logicalPoint");var i=this.data().search(t,e);return i?i:void 0},c.prototype.nearestIndex=function(t,e){var i=this.nearestData(t,e);return i?i.index:void 0},c.prototype.paneViews=function(t){if(!this.properties().visible.value())return null;var e=[this._paneView];return this._futureBarsPaneView&&e.push(this._futureBarsPaneView),this._projectionBarsPaneView&&e.push(this._projectionBarsPaneView),e.push(this._priceLineView),e.push(this._symbolLabelView),e.push(this._gotoDateView),e},c.prototype.dataWindowView=function(){return this._dataWindowView},c.prototype.statusView=function(){return this._statusView},c.prototype.priceAxisViews=function(t,e){return this.m_model.paneForSource(this)===t&&e===this.priceScale()&&(this.m_model.properties().scalesProperties.showSeriesLastValue.value()||this.properties().showCountdown.value())?this._priceAxisViews:null},c.prototype.base=function(){return this._base},c.prototype.formatter=function(){return this._formatter},c.prototype.purgeSymbolInfo=function(){this._symbolInfo=null},c.prototype.symbolInfo=function(){return this._symbolInfo},c.prototype._recreateFormatter=function(){var t,e,i,o;"default"==this.properties().minTick.value()?this._formatter=new O(this._symbolInfo?this._symbolInfo.pricescale:100,this._symbolInfo?this._symbolInfo.minmov:1,!!this._symbolInfo&&this._symbolInfo.fractional,this._symbolInfo?this._symbolInfo.minmove2:void 0):(t=this.properties().minTick.value().split(","),e=parseInt(t[0]),i=parseInt(t[1]),o="true"===t[2],this._formatter=new O(e,i,o)),this.priceScale()&&this.priceScale().updateFormatter()},c.prototype.updateSymbolInfo=function(t){var e=this,i=t&&(t.pro_name||t.full_name||t.name);this._symbolInfo=t,t&&(this._properties.shortName.setValue(t.name),i&&this._properties.symbol.value().toUpperCase()!==i.toUpperCase()&&this._properties.symbol.setValue(i)),this._base=t?t.pricescale/t.minmov:100,this._recreateFormatter(),this._statusView.update(),this.priceScale().updateFormatter(),"undefined"!=typeof quoteSessionMultiplexerInstance&&(this._quoteSessionClientId||(this._quoteSessionClientId="series-"+TradingView.guid()),this._quoteSessionSymbol&&(quoteSessionMultiplexerInstance.simple.unsubscribe(this._quoteSessionClientId,this._quoteSessionSymbol),this._quoteSessionSymbol=void 0),i&&(this._quoteSessionSymbol=s.enabled("charting_library_base")?t.name:i,quoteSessionMultiplexerInstance.simple.subscribe(this._quoteSessionClientId,this._quoteSessionSymbol,function(t,i){e.quoteData=t&&t.values||null,i&&i.values&&i.values.current_session&&e.marketStatus.setValue(i.values.current_session)}))),this.checkInterval(),this.dataPoweredBy=A(t)},c.prototype.symbolSameAsCurrent=function(t){if(this.m_symbol===t)return!0;var e=this._symbolInfo;if(e){if(e.full_name===t||e.pro_name===t)return!0;if(e.aliases&&e.aliases.indexOf(t)!==-1)return!0;if(e.alternatives&&e.alternatives.indexOf(t)!==-1)return!0}return!1},c.prototype.updateAllViews=function(){this._paneView.update(),this._dataWindowView.update(),this._statusView.update(),this._priceAxisViews[0].update(),this._priceAxisViews[1].update(),this._futureBarsPaneView&&this._futureBarsPaneView.update(),this._projectionBarsPaneView&&this._projectionBarsPaneView.update(),this._priceLineView.update(),this._gotoDateView.update(),this._symbolInfo&&this._symbolLabelView.update()},c.prototype._setStatus=function(t){this._status=t,this._statusView.update(),this.m_model.updateSource(this),this._onStatusChanged.fire()},c.prototype.requestMoreData=function(t){var e,i,o,n;this._status!==c.STATUS_READY&&this._status!==c.STATUS_PULSE&&this._status!==c.STATUS_DELAYED&&this._status!==c.STATUS_DELAYED_STREAMING&&this._status!==c.STATUS_EOD||this.m_model.timeScale().isEmpty()||(e=this.m_model.timeScale().visibleBars(),e.isEmpty()||0!==this.bars().size()&&(i=t||e.lastBar()-this.data().last(),this._predictBars<i&&(this._predictBars=i,this._chartApi&&this._chartApi.connected()&&this._chartApi.requestMoreTickmarks(this._seriesId,i,this._handler)),this._endOfData||(o=this.bars()._indexAt(0),n=t||o-e.firstBar(),n<=0||(this._endOfData=!0,this._chartApi&&this._chartApi.connected()&&(this._chartApi.requestMoreData(this._seriesId,n,this._handler),s.enabled("charting_library_base")&&(this._predictBars=0)),this._setStatus(c.STATUS_LOADING)))))},c.prototype.bindStyleChange=function(){var t=this;["candleStyle","hollowCandleStyle","haStyle","barStyle","lineStyle","areaStyle","renkoStyle","pbStyle","kagiStyle","pnfStyle"].forEach(function(e){t._properties[e].listeners().subscribe(t,c.prototype.invalidateBarStylesCache)})},c.prototype.bindJapChartsInputs=function(){this._properties.style.listeners().subscribe(this,this.onChartStyleChanged),this._properties.renkoStyle.inputs.boxSize.listeners().subscribe(this,this.onInputChanged),this._properties.renkoStyle.inputs.source.listeners().subscribe(this,this.onInputChanged),this._properties.renkoStyle.inputs.style.listeners().subscribe(this,this.onInputChanged),this._properties.renkoStyle.inputs.atrLength.listeners().subscribe(this,this.onInputChanged),this._properties.pbStyle.inputs.lb.listeners().subscribe(this,this.onInputChanged),this._properties.pbStyle.inputs.source.listeners().subscribe(this,this.onInputChanged),this._properties.kagiStyle.inputs.reversalAmount.listeners().subscribe(this,this.onInputChanged),this._properties.kagiStyle.inputs.style.listeners().subscribe(this,this.onInputChanged),this._properties.kagiStyle.inputs.atrLength.listeners().subscribe(this,this.onInputChanged),this._properties.kagiStyle.inputs.source.listeners().subscribe(this,this.onInputChanged),this._properties.pnfStyle.inputs.boxSize.listeners().subscribe(this,this.onInputChanged),this._properties.pnfStyle.inputs.reversalAmount.listeners().subscribe(this,this.onInputChanged),this._properties.pnfStyle.inputs.sources.listeners().subscribe(this,this.onInputChanged),this._properties.pnfStyle.inputs.style.listeners().subscribe(this,this.onInputChanged),this._properties.pnfStyle.inputs.atrLength.listeners().subscribe(this,this.onInputChanged);var t=this;this._properties.lockScale.listeners().subscribe(this,function(e){e.value()&&t.model().timeScale().recalcLockedScale()})},c.prototype.createExtendedHoursProperty=function(){function t(){var t=!!window.user&&!!user.extended_session,i=e.model().readOnly(),o=e._properties.extendedHours.value(),n=s.enabled("widget");!o||n||i||t||(e._extendedHoursNotPermitted.fire(),o=!1),o&&!e.isIntradayInterval()&&(o=!1),e.extendedHours.setValue(o)}var e=this;e.extendedHours=new a,e._properties.extendedHours.listeners().subscribe(null,t),e._properties.interval.listeners().subscribe(null,t),e.chartWidgetInitialized.subscribe(null,t),t()},c.prototype.isNeedRestart=function(t){if(void 0===t&&(t=this.properties().style.value()),this._prevChartStyle!=t){var e=[c.STYLE_BARS,c.STYLE_CANDLES,c.STYLE_HOLLOW_CANDLES,c.STYLE_LINE,c.STYLE_AREA];if(!(e.indexOf(this._prevChartStyle)>-1&&e.indexOf(t)>-1))return!0}return!1},c.prototype.onChartStyleChanged=function(){this.isNeedRestart()&&(this.data().clear(),this.model().timeScale().scrollToRealtime(!1),this.restart()),this._prevChartStyle=this.properties().style.value(),this._onChangedStyle.fire(this.properties().style.value()),this.invalidateBarStylesCache()},c.prototype.onInputChanged=function(){this.restart()},c.prototype.onExtendedHoursChanged=function(){return this._extendedHoursChanged},c.prototype.getSymbolString=function(){var t,e,i;return t=s.enabled("pay_attention_to_ticker_not_symbol")&&this._symbolInfo?this._symbolInfo.ticker:this.actualSymbol(),this.extendedHours.value()&&(t={symbol:t,session:"extended"}),c._SYMBOL_STRING_DATA.hasOwnProperty(this._properties.style.value())&&(e=this.getInputsProperties(),i=c._SYMBOL_STRING_DATA[this._properties.style.value()],t={symbol:t,type:i.type,inputs:i.inputNames.map(function(t){return e[t].value()})}),"string"!=typeof t&&(t="="+JSON.stringify(t)),t},c.parseSymbolString=function(t){var e,i,o,n,s,r,a,l=Object.keys(c._SYMBOL_STRING_DATA),h={symbol:null,style:null,extendedHours:null,inputs:null};if(t&&0===t.indexOf("=")){if(e=t.slice(1),e=JSON.parse(e),h.symbol=e.symbol,e.type)for(r=0;r<l.length;r++)if(o=l[r],i=c._SYMBOL_STRING_DATA[o],i.type===e.type){for(h.style=parseInt(o),h.inputs={},a=0;a<i.inputNames.length;a++)s=e.inputs[a],n=i.inputNames[a],h.inputs[n]=s;break}"extended"===h.symbol.session&&(h.extendedHours=!0,h.symbol=h.symbol.symbol)}else h.symbol=t;return h},c.prototype.getStyleShortName=function(){var t=this._properties.style.value();if(c.STYLE_SHORT_NAMES.hasOwnProperty(t))return c.STYLE_SHORT_NAMES[t];throw Error("Missed short name for style "+t)},c.prototype.getInputsProperties=function(){var t=this._properties[this.getStyleShortName()+"Style"];return t.inputs||t.addProperty("inputs"),t.inputs},c.prototype.getRealVisibleRange=function(){var t=this.model().timeScale().visibleBars(),e=this.data().search(t.m_firstBar,TradingView.SEARCH_NEAREST_RIGHT),i=this.data().search(t.m_lastBar,TradingView.SEARCH_NEAREST_LEFT);return void 0===e||void 0===i?null:new S(e.index,i.index)},c.prototype.isLockScale=function(){return this.properties().lockScale.value()},c.prototype.firstValue=function(){return this.data().firstValue()},c.prototype.firstBar=function(){return this.data().firstBar()},c.prototype.sessionsStudy=function(){var t,e,i,o;if(this._sessionsStudy)return this._sessionsStudy;for(t=this.model().paneForSource(this),e=t.dataSources(),i=0;i<e.length;i++)if(o=e[i],o instanceof TradingView.Study&&"Sessions"==o.metaInfo().shortId)return this._sessionsStudy=o,this._sessionsStudy;return!1},c.prototype.createSessStudy=function(){if(!s.enabled("charting_library_base")&&!this.sessionsStudy()){var t=z.findStudyMetaInfo(this.model().studiesMetaData(),"Sessions@tv-basicstudies");this.model().insertStudy(t,!1,!0),this._onSessionsStudyCreated.fire()}},c.prototype.checkSessStudy=function(){s.enabled("charting_library_base")||(this.sessionsStudy()||this.createSessStudy(),this.sessionsStudy().start())},c.prototype.isSpread=function(){return"spread"===this._symbolInfo.type},c.prototype.firstSymbol=function(){return this._symbolInfo?this._symbolInfo.legs[0]:""},c.prototype.firstShortName=function(){return D.ticker(this.firstSymbol())},c.prototype.onSessionsStudyCreated=function(){return this._onSessionsStudyCreated},c.prototype.loadDataTo=function(t){var e;t.right(1);this._turnaround="s"+ ++this._turnaroundCounter,e=this._properties.interval.value(),e=this._generateTimeframe(e,t),this._chartApi.modifySeries(this._seriesId,this._turnaround,this._symbolId,e,this._handler)},c.prototype.checkInterval=function(){if(this._symbolInfo&&(E.kind(this.interval())!==E.MINUTES||this._symbolInfo.has_intraday||this.requestingIntradayWhenNotSupported.fire(),this._symbolInfo.hasOwnProperty("supported_resolutions"))){var t=this._properties.interval.value();this._symbolInfo.supported_resolutions.indexOf(t)==-1&&this.requestingResolutionWhenNotSupported.fire(this._symbolInfo.supported_resolutions[0])}},c.prototype.setPriceScale=function(t){this.m_priceScale!=t&&(this.m_priceScale=t,this.priceScaleChanged.fire(t))},c.prototype.setGotoDateResult=function(t){this._gotoDateResult=t},c.prototype.gotoDateResult=function(){return this._gotoDateResult},TradingView.Series=c,t.exports=c}).call(e,i(21),i(32),i(45),i(1),i(78),i(63))},function(t,e){"use strict";function i(t,e){this.m_minValue=t,this.m_maxValue=e}i.prototype.equals=function(t){return this.m_minValue==t.m_minValue&&this.m_maxValue==t.m_maxValue},i.prototype.clone=function(){return new i(this.m_minValue,this.m_maxValue)},i.prototype.minValue=function(){return this.m_minValue},i.prototype.maxValue=function(){return this.m_maxValue},i.prototype.length=function(){return this.m_maxValue-this.m_minValue},i.prototype.isEmpty=function(){return this.m_maxValue===this.m_minValue||this.m_maxValue!=this.m_maxValue||this.m_minValue!=this.m_minValue},i.prototype.state=function(){return{min:this.m_minValue,max:this.m_maxValue}},i.prototype.merge=function(t){return new i(Math.min(this.minValue(),t.minValue()),Math.max(this.maxValue(),t.maxValue()))},i.prototype.apply=function(t,e){this.m_minValue=Math.min(this.m_minValue,t),this.m_maxValue=Math.max(this.m_maxValue,e)},i.prototype.scaleAroundCenter=function(t){var e,i,o,n;return isNumber(t)?(e=this.m_maxValue-this.m_minValue,void(0!==e&&(i=.5*(this.m_maxValue+this.m_minValue),o=this.m_maxValue-i,n=this.m_minValue-i,o*=t,n*=t,this.m_maxValue=i+o,this.m_minValue=i+n))):void TradingView.logDebugChart("PriceRange.scaleAroundCenter: invalid coeff")},i.prototype.shift=function(t){return isNumber(t)?(this.m_maxValue+=t,void(this.m_minValue+=t)):void TradingView.logDebugChart("PriceRange.shift: invalid coeff")},i.prototype.convertToPercent=function(t,e){return 100*(t-e)/e},i.prototype.convertFromPercent=function(t,e){return t/100*e+e},i.prototype.convertToPercents=function(t){var e=100*(this.m_minValue-t)/t,o=100*(this.m_maxValue-t)/t;return new i(e,o)},i.prototype.convertFromPercents=function(t){var e=this.m_minValue/100*t+t,o=this.m_maxValue/100*t+t;return new i(e,o)},t.exports=i},function(t,e,i){"use strict";function o(t,e){n.call(this,e),this._series=t,this._series.onRestarted().subscribe(this,o.prototype.invalidate),this._series.onSymbolResolved().subscribe(this,o.prototype.invalidate),this._series.onCompleted().subscribe(this,o.prototype.invalidate),this._series.onBoxSizeChanged().subscribe(this,o.prototype.invalidate)}var n=i(80);inherit(o,n),o.prototype.invalidate=function(){delete this._text,this.update()},o.prototype.getSeriesPrecision=function(){var t=4;return this._series._symbolInfo&&this._series._symbolInfo.pricescale&&(t=Math.round(Math.log(this._series._symbolInfo.pricescale)/Math.log(10))),t},o.prototype.round=function(t){var e=this.getSeriesPrecision(),i=Math.round(t*Math.pow(10,e))/Math.pow(10,e);return i?i:""},o.prototype.update=function(){if(!("_text"in this)){var t=this._series.symbolInfo()||{};this._bold=!1,this._size="17px",this._text=this._series.constructor.generateTitleForGui({description:t.description,exchange:t.exchange,symbol:this._series.symbol(),interval:this._series.interval(),style:this._series._properties.style.value(),inputs:this._series.getInputsProperties().state(),boxSize:this._series.data().boxSize,reversalAmount:this._series.data().reversalAmount,precision:this.getSeriesPrecision()})}},t.exports=o},function(t,e){"use strict";function i(t){this._props=t,this._text="",this._size="12px",this._bold=!1}i.prototype.text=function(){return this._text},i.prototype.setText=function(t){this._text=t},i.prototype.color=function(){return this._props?this._props.scalesProperties.textColor.value():"#444"},i.prototype.bold=function(){return this._bold},i.prototype.size=function(){return this._size},t.exports=i},function(t,e,i){(function(e){"use strict";function o(t,e){n.call(this,t,e)}var n=i(82);inherit(o,n),o.prototype.lastPrice=function(){return this._series.data().lastProjectionPrice},o.prototype._updateImpl=function(t){var i,o,n,s,r,a,l,h,c,d,p,u,_=this._rendererData;_.visible=!1,_.text="",this._model.properties().scalesProperties.showSeriesLastValue.value()&&(this._model.timeScale().isEmpty()||this._series.priceScale().isEmpty()||!this.lastPrice()||(t=this._model.timeScale().visibleBars(),t.isEmpty()||(i=this._series.data().search(t.lastBar(),TradingView.SEARCH_NEAREST_LEFT),void 0!==i&&(_.visible=!0,o=this._series.nearestIndex(t.firstBar(),TradingView.SEARCH_NEAREST_RIGHT),n=this._series.data().valueAt(o)[TradingView.CLOSE_PLOT],s=this._series.data().last().value,r=this.lastPrice(),this._series.priceScale().properties().percentage.value()&&(r=100*(r-n)/n),_.text=this._series.priceScale().formatter().format(r),a=this._series.properties().style.value()===TradingView.Series.STYLE_HEIKEN_ASHI,a?this._series.properties().haStyle.showRealLastPrice.value()?(l=this._series.lastValueData(TradingView.CLOSE_PLOT,!0),l.noData||l.color==this._background||(this._background=l.color),e.enabled("countdown")&&this._series.properties().showCountdown.value()&&(_.secondLine=this._countdownInfo()),h=this._series.lastValueData(TradingView.CLOSE_PLOT,!1).index,c=l.index,d=h===c,_.visible=d):_.visible=!1:(p=this._series.barColorer(),u=p.barStyle(i.index,!0),this._background=u.barColor),this._background!==_.background&&(_.background=this._background,_.color=this.color()),_.coordinate=this._series.priceScale().priceToCoordinate(r)))))},t.exports=o}).call(e,i(1))},function(t,e,i){(function(e){"use strict";function o(t,e){this._series=t,this._model=e,this._text="",this._coordinate=0,this._background="black",this._color="white",this._invalidated=!0,this._rendererData={text:"",coordinate:null,color:"#FFF",background:"#000",visible:!1,secondLine:null}}var n=i(68),s=i(69),r=(i(83),i(43));inherit(o,n),o.prototype.update=function(){this._invalidated=!0},o.prototype._updateImpl=function(t){var i,o,n,s,r,a=this._rendererData;a.visible=!1,a.text="",this._model.properties().scalesProperties.showSeriesLastValue.value()&&(i=this._series.lastValueData(null,e.enabled("price_scale_always_last_bar_value")),!i.noData&&i.text&&(o=this._series.properties().style.value()===TradingView.Series.STYLE_HEIKEN_ASHI,o&&this._series.properties().haStyle.showRealLastPrice.value()&&(n=this._series.lastValueData(TradingView.CLOSE_PLOT,!1).index,s=this._series.lastValueData(TradingView.CLOSE_PLOT,!0).index,n===s)||(a.visible=!0,a.text=i.text,i.color!=this._background&&(this._background=i.color,a.color=this.color(),a.background=this._background),a.coordinate=i.coordinate,this._floatCoordinate=i.floatCoordinate,this._coordinate=i.coordinate,a.secondLine=null,e.enabled("countdown")&&this._series.properties().showCountdown.value()&&(r=[TradingView.Series.STYLE_BARS,TradingView.Series.STYLE_CANDLES,TradingView.Series.STYLE_LINE,TradingView.Series.STYLE_AREA,TradingView.Series.STYLE_HOLLOW_CANDLES,TradingView.Series.STYLE_HEIKEN_ASHI],r.indexOf(this._series.properties().style.value())!=-1&&(a.secondLine=this._countdownInfo())))))},o.prototype.coordinate=function(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),n.prototype.coordinate.call(this)},o.prototype.renderer=function(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._renderer||(this._renderer=new s(this._rendererData)),this._renderer},o.prototype.dump=function(){return{text:this._rendererData.text,coordinate:this._rendererData.coordinate,color:this._rendererData.color,background:this._rendererData.background,visible:this._rendererData.visible}},o.prototype.text=function(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._rendererData.text},o.prototype._countdownInfo=function(){var t,e,i,o,n,s,a,l,h,c,d,p=null;return this._series.isDWM()?p:(t=1e3*this._series.data().bars().last().value[0],e=(new Date).getTimezoneOffset(),i=1e3*this._series.serverTimeOffset(),o=r.parse(this._series.interval()),n=o.kind()===r.SECONDS?o.multiplier():60*o.multiplier(),s=t.valueOf()+1e3*n,a=(new Date).valueOf()+i,l=Math.round((s-a)/1e3),l>0&&(l=Math.min(l,n),h="",l>=3600&&(h=""+Math.floor(l/3600)+":"),l%=3600,c=("0"+Math.floor(l/60)).right(2),l%=60,d=("0"+Math.floor(l)).right(2),p=h+c+":"+d),p)},t.exports=o}).call(e,i(1))},function(t,e){"use strict";function i(t){this._maxSize=t||50,this.reset()}i.prototype.measureText=function(t,e){var i,o,n=(e+"").replace(this._re,"0");return this._cache[n]?this._cache[n].width:(this._actualSize==this._maxSize&&(i=this._tick2Labels[this._oldestTick],delete this._tick2Labels[this._oldestTick],delete this._cache[i],this._oldestTick++,this._actualSize--),o=t.measureText(n).width,0===o&&e.length?0:(this._cache[n]={width:o,tick:this._usageTick},this._tick2Labels[this._usageTick]=n,this._actualSize++,this._usageTick++,o))},i.prototype.reset=function(){this._actualSize=0,this._cache={},this._usageTick=1,this._oldestTick=1,this._tick2Labels={}},i.prototype._re=/[2-9]/g,t.exports=i},function(t,e,i){"use strict";function o(t,e){s.call(this),this._series=t,this._model=e,this._items.push(new r($.t("Open",{context:"in_legend"}),"")),this._items.push(new r($.t("High",{context:"in_legend"}),"")),this._items.push(new r($.t("Low",{context:"in_legend"}),"")),this._items.push(new r($.t("Close",{context:"in_legend"}),"")),this._invalidated=!0,this.update()}var n=i(85),s=n.DataWindowView,r=n.DataWindowItem,a=i(59),l=a.invertColor,h=a.colorsAreSimilar,c=a.RGBColor;inherit(o,s),o.prototype.update=function(){this._invalidated=!0},o.prototype._updateImpl=function(){var t,e,i,o,n,s,r,a,d,p,u,_;if(this._series.symbolInfo()?(this._header=[this._series.symbolInfo().name,TradingView.translatedIntervalString(this._series.interval()),this._series.symbolInfo().exchange].join(", "),this._title=this._series.symbolInfo().description):this._header=this._series.symbol(),this._items[0].setValue($.t("n/a")),this._items[1].setValue($.t("n/a")),this._items[2].setValue($.t("n/a")),this._items[3].setValue($.t("n/a")),!this._model.timeScale().isEmpty()&&0!==this._series.bars().size()&&(t=this._series.barColorer(),e=this._series.data().size()-1,i=this._model.crossHairSource().appliedIndex(),o=isNumber(i)?this._series.nearestIndex(i,TradingView.SEARCH_NEAREST_LEFT):this._series.nearestIndex(e,TradingView.SEARCH_NEAREST_LEFT),void 0!==o))for(n=this._series.data().valueAt(o),s=this._series.formatter(),this._items[0].setValue(s.format(n[TradingView.OPEN_PLOT])),this._items[1].setValue(s.format(n[TradingView.HIGH_PLOT])),this._items[2].setValue(s.format(n[TradingView.LOW_PLOT])),this._items[3].setValue(s.format(n[TradingView.CLOSE_PLOT])),r=t.barStyle(o,!1),a=r.barColor,d=this._series.model().paneForSource(this._series),p=d._properties.background.value(),u=new c(a).toHex(),h(u,p)&&(a=l(u)),_=0;_<4;_++)this._items[_].setColor(a)},o.prototype.items=function(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._items},o.prototype.dump=function(){return{header:this._header,items:this._items}},o.prototype.additional=function(){if(this._series.dataPoweredBy)return"(Data Provided by "+this._series.dataPoweredBy+")"},t.exports=o},function(t,e){"use strict";function i(t,e){this.m_title=t,this.m_value=e,this._visible=!0,this._color=void 0}function o(){this._header="",this._title="",this._items=[]}i.prototype.title=function(){return this.m_title},i.prototype.text=function(){return this.m_value},i.prototype.visible=function(){return this._visible},i.prototype.color=function(){return this._color},i.prototype.setVisible=function(t){this._visible=t},i.prototype.setValue=function(t){this.m_value=t},i.prototype.setColor=function(t){this._color=t},i.prototype.value=function(){return this.m_value},o.prototype.header=function(){return this._header},o.prototype.title=function(){return this._title},o.prototype.items=function(){return this._items},o.prototype.update=function(){},e.DataWindowItem=i,e.DataWindowView=o},function(t,e,i){(function(t){"use strict";function o(t,e){this.m_series=t,this.m_model=e,this.m_bars=[],this._invalidated=!0}function n(t,e){o.call(this,t,e)}function s(t,e){o.call(this,t,e)}function r(t,e){o.call(this,t,e)}function a(t,e){o.call(this,t,e)}function l(t,e,i){this.m_series=t,this.m_priceSource=e,this.m_model=i,this.m_items=[],this._barGetter={open:function(t){return t[TradingView.OPEN_PLOT]},high:function(t){return t[TradingView.HIGH_PLOT]},low:function(t){return t[TradingView.LOW_PLOT]},close:function(t){return t[TradingView.CLOSE_PLOT]},hl2:function(t){return(t[TradingView.HIGH_PLOT]+t[TradingView.LOW_PLOT])/2},hlc3:function(t){return(t[TradingView.HIGH_PLOT]+t[TradingView.LOW_PLOT]+t[TradingView.CLOSE_PLOT])/3},ohlc4:function(t){return(t[TradingView.OPEN_PLOT]+t[TradingView.HIGH_PLOT]+t[TradingView.LOW_PLOT]+t[TradingView.CLOSE_PLOT])/4}}[this.m_priceSource]}function h(t,e,i){l.call(this,t,e,i),this._invaidated=!0}function c(t,e,i){l.call(this,t,e,i),this._invaidated=!0}var d=i(87).SelectionRenderer,p=i(88),u=i(89),_=u.PaneRendererBars,f=u.PaneRendererLine,g=u.PaneRendererArea,m=u.PaneRendererCandles,v=i(92),y=i(93);o.prototype.update=function(){this._invalidated=!0},o.prototype._updateImpl=function(){var e,i,o,n,s,r,a,l,h,c,d,u,_,f,g,m,v,w=this;if(this.m_bars=[],!this.m_model.timeScale().isEmpty()&&!this.m_series.priceScale().isEmpty()&&(e=this.m_model.timeScale().visibleBars(),!e.isEmpty()&&0!==this.m_series.bars().size())){for(i=this.m_series.nearestIndex(e.firstBar(),TradingView.SEARCH_NEAREST_RIGHT),o=this.m_series.nearestIndex(e.lastBar(),TradingView.SEARCH_NEAREST_LEFT);i<=o&&(n=this.m_series.bars().valueAt(i),void 0===n);i++);if(!(i>o)&&(e=this.m_series.bars().range(i,o),r=this.m_series.bars().first().close,a=this.m_series.priceScale(),l=a.properties().percentage.value(),h=this.m_series.barColorer(),c={},e.each(function(t,e){var i,o;void 0!==e[TradingView.OPEN_PLOT]&&void 0!==e[TradingView.HIGH_PLOT]&&void 0!==e[TradingView.LOW_PLOT]&&void 0!==e[TradingView.CLOSE_PLOT]&&(void 0===s&&(s=e[TradingView.CLOSE_PLOT]),i={},i.time=Math.round(t),l?(i.open=100*(e[TradingView.OPEN_PLOT]-s)/s,i.high=100*(e[TradingView.HIGH_PLOT]-s)/s,i.low=100*(e[TradingView.LOW_PLOT]-s)/s,i.close=100*(e[TradingView.CLOSE_PLOT]-s)/s):(i.open=e[TradingView.OPEN_PLOT],i.high=e[TradingView.HIGH_PLOT],i.low=e[TradingView.LOW_PLOT],i.close=e[TradingView.CLOSE_PLOT]),c.value=e,o=e[TradingView.STYLE_PLOT]?e[TradingView.STYLE_PLOT]:h.barStyle(t,!1,c),e[TradingView.STYLE_PLOT]=o,c.previousValue=e,i.color=o.barColor,i.borderColor=o.barBorderColor,i.wickColor=o.barWickColor,i.hollow=o.isBarHollow,w.m_bars.push(i))},this),a.barPricesToCoordinates(this.m_bars),this.m_model.timeScale().barIndexesToCoordinates(this.m_bars),this.m_series===this.m_model.selectedSource()))for(d=y(i,o),this._selectionData={points:[]},this._selectionData.hittestResult=p.REGULAR,u=0;u<d.length;u++)_=d[u],f=this.m_series.bars().valueAt(_),f&&(g=.5*(f[TradingView.OPEN_PLOT]+f[TradingView.CLOSE_PLOT]),a.properties().percentage.value()&&(g=100*(g-s)/s),m=this.m_model.timeScale().indexToCoordinate(_),v=this.m_series.priceScale().priceToCoordinate(g),this._selectionData.points.push(new t.Point(m,v)))}},o.prototype.items=function(){return this.m_bars},o.prototype.dump=function(){var t={};return t.bars=this.m_bars,t},inherit(n,o),n.prototype.renderer=function(){var t,e;return this._invalidated&&(this._updateImpl(),this._invalidated=!1),t={},t.bars=this.m_bars,t.barSpacing=this.m_model.timeScale().barSpacing(),t.dontDrawOpen=this.m_series.properties().barStyle.dontDrawOpen.value(),e=new v,e.append(new _(t)),this.m_series===this.m_model.selectedSource()&&e.append(new d(this._selectionData)),e},inherit(s,o),s.prototype.renderer=function(){var t,e;return this._invalidated&&(this._updateImpl(),this._invalidated=!1),t={},t.bars=this.m_bars,t.barSpacing=this.m_model.timeScale().barSpacing(),t.drawWick=this.m_series.properties().candleStyle.drawWick.value(),t.drawBorder=this.m_series.properties().candleStyle.drawBorder.value(),t.borderColor=this.m_series.properties().candleStyle.borderColor.value(),t.wickColor=this.m_series.properties().candleStyle.wickColor.value(),e=new v,e.append(new m(t)),this.m_series===this.m_model.selectedSource()&&e.append(new d(this._selectionData)),e},inherit(r,o),r.prototype.renderer=function(){var t,e;return this._invalidated&&(this._updateImpl(),this._invalidated=!1),t={},t.bars=this.m_bars,t.barSpacing=this.m_model.timeScale().barSpacing(),t.drawWick=this.m_series.properties().haStyle.drawWick.value(),t.drawBorder=this.m_series.properties().haStyle.drawBorder.value(),t.borderColor=this.m_series.properties().haStyle.borderColor.value(),t.wickColor=this.m_series.properties().haStyle.wickColor.value(),e=new v,e.append(new m(t)),this.m_series===this.m_model.selectedSource()&&e.append(new d(this._selectionData)),e},inherit(a,o),a.prototype.renderer=function(){var t,e;return this._invalidated&&(this._updateImpl(),this._invalidated=!1),t={},t.bars=this.m_bars,t.barSpacing=this.m_model.timeScale().barSpacing(),t.drawWick=this.m_series.properties().hollowCandleStyle.drawWick.value(),t.drawBorder=this.m_series.properties().hollowCandleStyle.drawBorder.value(),t.borderColor=this.m_series.properties().hollowCandleStyle.borderColor.value(),t.wickColor=this.m_series.properties().hollowCandleStyle.wickColor.value(),e=new v,e.append(new m(t)),this.m_series===this.m_model.selectedSource()&&e.append(new d(this._selectionData)),e},l.prototype.update=function(){var e,i,o,n,s,r,a,l,h,c,d,u,_,f,g,m,v,w,b;if(this.m_items=[],!this.m_model.timeScale().isEmpty()&&this.m_series.priceScale()&&!this.m_series.priceScale().isEmpty()&&(e=this.m_model.timeScale().visibleBars(),!e.isEmpty()&&0!==this.m_series.bars().size())){for(i=this.m_series.nearestIndex(e.firstBar(),TradingView.SEARCH_NEAREST_RIGHT),
o=this.m_series.nearestIndex(e.lastBar(),TradingView.SEARCH_NEAREST_LEFT),e=this.m_series.bars().range(i,o),n=this.m_series.bars(),s=this,a=s.m_series.priceScale(),l=this.m_series.barColorer(),h={color:this.m_series.properties().lineStyle.color.value()},c=a.properties().percentage.value(),d=e._start;d<e._end;++d)u=e._indexAt(d),_=e._valueAt(d),f=this._barGetter(_),void 0!==f&&null!==f&&(void 0===r&&(r=f),c&&(f=100*(f-r)/r),g=new t.Point(u,f),g.style=h,s.m_items.push(g));if(a.pointsArrayToCoordinates(s.m_items),s.m_model.timeScale().indexesToCoordinates(s.m_items),this.m_series===this.m_model.selectedSource())for(m=y(i,o),this._selectionData={points:[]},this._selectionData.hittestResult=p.REGULAR,d=0;d<m.length;d++)u=m[d],v=this.m_series.data().valueAt(u),f=this._barGetter(v),a.properties().percentage.value()&&(f=100*(f-r)/r),w=this.m_model.timeScale().indexToCoordinate(u),b=this.m_series.priceScale().priceToCoordinate(f),this._selectionData.points.push(new t.Point(w,b))}},inherit(h,l),h.prototype.update=function(){this._invalidated=!0},h.prototype.renderer=function(){var t,e,i,o;return this._invalidated&&(l.prototype.update.call(this),this._invalidated=!1),t=this.m_series.properties().lineStyle,e={barSpacing:this.m_model.timeScale().barSpacing(),items:this.m_items,lineColor:t.color.value(),lineStyle:t.linestyle.value(),withMarkers:t.styleType.value()===TradingView.Series.STYLE_LINE_TYPE_MARKERS,withSteps:t.styleType.value()===TradingView.Series.STYLE_LINE_TYPE_STEP,lineWidth:t.linewidth.value(),simpleMode:!0},i=new f(e),this.m_series===this.m_model.selectedSource()?(o=new v,o.append(i),o.append(new d(this._selectionData))):o=i,o},inherit(c,l),c.prototype.update=function(){this._invalidated=!0},c.prototype.renderer=function(){var t,e,i;return this._invalidated&&(l.prototype.update.call(this),this._invalidated=!1),t={},t.simpleMode=!1,t.barSpacing=this.m_model.timeScale().barSpacing(),t.items=this.m_items,t.lineColor=this.m_series.properties().areaStyle.linecolor.value(),t.lineStyle=this.m_series.properties().areaStyle.linestyle.value(),t.lineWidth=this.m_series.properties().areaStyle.linewidth.value(),e=this.m_series.properties().areaStyle.transparency.value(),t.isSeries=!0,t.color1=TradingView.generateColor(this.m_series.properties().areaStyle.color1.value(),e),t.color2=TradingView.generateColor(this.m_series.properties().areaStyle.color2.value(),e),t.bottom=this.m_series.priceScale().height(),i=new v,i.append(new g(t)),this.m_series===this.m_model.selectedSource()&&i.append(new d(this._selectionData)),i},e.SeriesBarsPaneView=n,e.SeriesCandlesPaneView=s,e.SeriesHollowCandlesPaneView=a,e.SeriesLinePaneView=h,e.SeriesAreaPaneView=c,e.SeriesHeikenAshiPaneView=r}).call(e,i(21))},function(t,e,i){"use strict";function o(t){this._data=t}function n(t,e){this._data=t,this._model=e,this.radius=this._data.radius||n.OUTER_RADIUS}function s(t){o.call(this,t)}var r=i(88),a=i(89).PaneRendererArrowsUpDown;o.RADIUS=3.5,o.prototype.tolerance=2,o.prototype.draw=function(t){function e(t){return void 0===t.x||TradingView.isNaN(t.x)||null===t.x||void 0===t.y||TradingView.isNaN(t.y)||null===t.y}var i,o,n;if(this._data)for(t.strokeStyle="#6B6B6B",t.fillStyle="#D6D6D6",i=this._data.vertOffset||0,o=0;o<this._data.points.length;o++)n=this._data.points[o],e(n)||this._drawMarker(t,n,i)},o.prototype._drawMarker=function(t,e,i){t.beginPath(),t.arc(e.x+.5,e.y+.5+i,o.RADIUS,0,2*Math.PI,!0),t.closePath(),t.fill(),t.stroke()},o.prototype.hitTest=function(t){var e,i,n;if(!this._data)return null;for(e=0;e<this._data.points.length;e++)if(i=this._data.points[e],n=i.substract(t).length(),n<=o.RADIUS+this.tolerance)return new r(this._data.hittestResult,i.data);return null},n.OUTER_RADIUS=TradingView.isMobile.any()?16:8,n.prototype.tolerance=2,n.prototype.draw=function(t){var e,i,o,n,s,r,a,l,h,c=this._data.currentPoint,d=this._data.outerStrokeWidth||1;for(e=0;e<this._data.points.length;e++)i=this._data.points[e],o=i.substract(c).length(),n=TradingView.isInteger(i.data)&&this._data.linePointBeingEdited===i.data,s=this.radius,r=this._data.strokeWidth||2,a=o<=s+this.tolerance,l=a?1:0,s+=l,r+=l,n||(i.square?(t.fillStyle=this._data.backgroundColor,t.fillRect(i.x-s,i.y-s,2*s,2*s),t.fillStyle=this._data.color,h=s-d,t.fillRect(i.x-h,i.y-h,2*h,2*h),h=s-d-r,t.fillStyle=this._data.backgroundColor,t.fillRect(i.x-h,i.y-h,2*h,2*h)):(t.beginPath(),t.arc(i.x,i.y,s,0,2*Math.PI,!0),t.closePath(),t.fillStyle=this._data.backgroundColor,t.fill(),t.beginPath(),t.arc(i.x,i.y,s-d,0,2*Math.PI,!0),t.closePath(),t.fillStyle=this._data.color,t.fill(),t.beginPath(),t.arc(i.x,i.y,s-d-r,0,2*Math.PI,!0),t.closePath(),t.fillStyle=this._data.backgroundColor,t.fill()))},n.prototype.hitTest=function(t){var e,i,o,n;for(e=0;e<this._data.points.length;e++)if(i=this._data.points[e],o=i.substract(t).length(),n=o<=this.radius+this.tolerance)return new r(this._data.hittestResult,i.data);return null},inherit(s,o),s.prototype._drawMarker=function(t,e,i){var n=e.isUp?1:-1,s=a.prototype._calculateVerticalOffset(this._data.barSpacing),r=a.prototype._calculateMinHeight(this._data.barSpacing),l=i+n*s+n*r;t.beginPath(),t.arc(e.x+.5,e.y+.5+l,o.RADIUS,0,2*Math.PI,!0),t.closePath(),t.fill(),t.stroke()},e.SelectionRenderer=o,e.LineAnchor=n,e.SelectionRendererArrowsUpDown=s},function(t,e){"use strict";function i(t,e,i){this._result=t,this._data=e,this._eraseMarker=i}i.MOVEPOINT_BACKGROUND=1,i.REGULAR=2,i.MOVEPOINT=3,i.CHANGEPOINT=4,i.CUSTOM=5,i.prototype.result=function(){return this._result},i.prototype.data=function(){return this._data},i.prototype.eraseMarker=function(){return this._eraseMarker},t.exports=i},function(t,e,i){(function(t){"use strict";function o(t){this.bars=t.bars,this.barSpacing=t.barSpacing,this.barWidth=R.optimalBarWidth(t.barSpacing),this.barLineWidth=Math.max(1,Math.round(this.barWidth)),this.dontDrawOpen=t.dontDrawOpen}function n(t){this.bars=t.bars,this.barWidth=t.barWidth,this.barLineWidth=1}function s(t){this.bars=t.bars,this.barSpacing=t.barSpacing,this.barLineWidth=Math.max(1,R.optimalBarWidth(t.barSpacing))}function r(t){this.bars=t.bars,this.barSpacing=t.barSpacing,this.blockSize=t.blockSize,this.barWidth=t.barSpacing}function a(t){this.items=t.items,this.barSpacing=t.barSpacing,this.histogramBase=t.histogramBase,this.lineColor=t.lineColor,this.lineWidth=t.lineWidth}function l(t){this.items=t.items,this.barSpacing=t.barSpacing,this.histogramBase=t.histogramBase,this.lineColor=t.lineColor,this.lineWidth=t.lineWidth}function h(t){this.items=t.items,this._simpleMode=t.simpleMode,this.barSpacing=t.barSpacing,this.lineColor=t.lineColor,this.lineWidth=t.lineWidth,this.lineStyle=t.lineStyle,this.withMarkers=t.withMarkers,this.withSteps=t.withSteps,this.hittest=t.hittest,this.ignorePaletteLineWidth=t.ignorePaletteLineWidth,this.forceLineColor=!!t.forceLineColor}function c(t){t.forceLineColor=!1,h.call(this,t),this.color1=t.color1,this.color2=t.color2,this.bottom=t.bottom,this.isSeries=!!t.isSeries,this._simpleMode=t.simpleMode}function d(t){this._data=t,this.bars=t.bars,this._barWidth=R.optimalBarWidth(t.barSpacing),this._barBorderWidth=1}function p(t){this.items=t.items,this.barSpacing=t.barSpacing,this.lineColor=t.lineColor,this.lineWidth=t.lineWidth,this.lineStyle=t.lineStyle}function u(t){this.items=t.items,this.barSpacing=t.barSpacing,this.lineColor=t.lineColor||t.color,this.radius=t.lineWidth||t.height/2,this.vertOffset=t.vertOffset||0}function _(t,e,i,o){this.x=t,this.y=e,this.height=i,this.isUp=o}function f(t){this.items=t.items,this.barSpacing=t.barSpacing,this.colorUp=t.colorup,this.colorDn=t.colordown,this.colorBorder=t.colorBorder,this.width=this._calculateWidth(t.barSpacing),this.minHeight=t.minHeight,this.vertOffset=this._calculateVerticalOffset(t.barSpacing)}function g(t){this.items=t.items,this.height=t.height||t.width,this.width=t.width||t.height,this._color=t.color,this._borderColor=t.borderColor,this._vertOffset=t.vertOffset||0,t.textCache&&(this._textCache=t.textCache,this._textColor=t.textColor,this._textVertOffset=this._vertOffset>0?this.height:-this.height,this._textImageWidth=this._textCache.textImageWidth,this._textImageHeight=this._textCache.textImageHeight)}function m(t){g.call(this,t),this.ch=t["char"][0]||" ",this.fontFamily=t.fontFamily||"Arial",this._charCache=new N(this.ch,(!1),(!1),this.fontFamily,this.height)}function v(t){g.call(this,t)}function y(t){g.call(this,t)}function w(t){g.call(this,t)}function b(t){g.call(this,t)}function S(t){g.call(this,t)}function T(t){g.call(this,t)}function C(t){g.call(this,t)}function x(t){g.call(this,t),this.width=this._calculateWidth(t.barSpacing),this._isUp=!1}function P(t){x.call(this,t),this._isUp=!0}function L(t){x.call(this,t),this._isUp=!1}function k(t,e){g.call(this,t),this._isUp=e,this._stepX=Math.round(this.height/2*.65)+.5,this._stepY=Math.round(this.height/2)+.5,this._textCache?(this._padding=this._stepX/2,this._shapeWidth=this._textImageWidth+2*this._stepX,this._shapeHeight=this._textImageHeight+2*this._padding+this._stepY,0===this._vertOffset?this._isUp?this._textVertOffset=this._stepY+this._padding+this._textImageHeight:this._textVertOffset=-this._stepY-this._padding:this._textVertOffset=this._vertOffset>0?this._stepY+this._padding:-this._stepY-this._padding):(this._padding=0,this._shapeWidth=2*this._stepX,this._shapeHeight=2.5*this._stepY)}function E(t){k.call(this,t,!0)}function I(t){k.call(this,t,!1)}function A(t){g.call(this,t)}function V(t){g.call(this,t)}function M(t){this._items=t.items,this._y=t.y,this._h=t.h,this._w=t.w}function $(e){var i,o,n,s,r,a,l,h,c,d;e.point2||(e.point2=e.point1),i=e.point1.x,o=e.point1.y,n=e.point2.x,s=e.point2.y,r=16,a=r-6,l=r-6,h=i<=n?i-a:i+a,c=o<=s?o+l:o-l,h-=1,c-=3,d={items:[new t.Point(h,c)],"char":[String.fromCharCode("0xF017").toUpperCase()],color:e.color,vertOffset:0,height:r,fontFamily:"FontAwesome"},m.call(this,d)}function D(t,e){this._items=t.items,this._color=t.color,this._orderArrow=t.orderArrow,this._exitLineWidth=t.exitLineWidth,this._priceArrow=t.priceArrow,this._text=t.text,this._textWidths=e}function B(t){this.data=t}function O(t){this._data=t}var R=i(90),z=i(88),N=i(91);o.prototype.draw=function(t){var e,i,o;for(t.save(),t.translate(.5,.5),i=0;i<this.bars.length;++i)o=this.bars[i],e!==o.color&&(t.fillStyle=o.color,e=o.color),t.fillRect(Math.round(o.time-this.barLineWidth/2),Math.round(o.high-this.barWidth/2),Math.round(this.barLineWidth),Math.round(o.low-o.high+this.barWidth)),this.barLineWidth<this.barSpacing-1&&(this.dontDrawOpen||t.fillRect(Math.round(o.time-1.5*this.barWidth),Math.round(o.open-this.barWidth/2),Math.round(1.5*this.barWidth),Math.round(this.barWidth)),t.fillRect(Math.round(o.time),Math.round(o.close-this.barWidth/2),Math.round(1.5*this.barWidth),Math.round(this.barWidth)));t.restore()},o.prototype.hitTest=function(t){var e,i,o,n,s=this.bars,r=.5*this.barSpacing;if(0===s.length)return null;if(t.x<s[0].time-r)return null;if(t.x>s[s.length-1].time+r)return null;for(e=null,i=0;i<s.length;++i)if(o=s[i],t.x<=o.time+r){e=o;break}return n=R.selectionTolerance(this.barLineWidth),e&&e.high-n<=t.y&&t.y<=e.low+n?new z(z.REGULAR):null},n.prototype.draw=function(t){var e,i,o,n,s,r,a;for(t.save(),t.lineCap="butt",t.translate(.5,.5),t.lineWidth=this.barLineWidth,e=this.barWidth/2,i=0;i<this.bars.length;++i)o=this.bars[i],n=o.exactTime-e,s=o.exactTime+e-n,r=Math.round(o.high),a=o.low-o.high===0?1:Math.round(o.low-o.high),t.fillStyle=o.borderColor,t.fillRect(n,r,s,a),t.fillStyle=o.color,t.fillRect(n+this.barLineWidth,r+this.barLineWidth,s-2*this.barLineWidth,a-2*this.barLineWidth);t.restore()},n.prototype.hitTest=function(t){var e,i,o,n,s=this.bars,r=.5*this.barWidth;if(0===s.length)return null;if(t.x<s[0].time-r)return null;if(t.x>s[s.length-1].time+r)return null;for(e=null,i=0;i<s.length;++i)if(o=s[i],t.x<=o.time+r){e=o;break}return n=R.selectionTolerance(this.barLineWidth),e&&e.high-n<=t.y&&t.y<=e.low+n?new z(z.REGULAR):null},s.prototype.draw=function(t){var e,i,o;for(t.save(),t.lineCap="square",t.translate(.5,.5),e=0;e<this.bars.length;++e)i=this.bars[e],o=Math.round(.5*this.barLineWidth),i.isTwoColorBar?(t.fillStyle=i.upColor,t.fillRect(Math.round(i.exactTime-o),Math.round(i.high-o),Math.round(2*o),Math.round(i.additionalPrice-i.high+o)),t.fillStyle=i.downColor,t.fillRect(Math.round(i.exactTime-o),Math.round(i.additionalPrice),Math.round(2*o),Math.round(i.low-i.additionalPrice+o))):(t.fillStyle=i.color,t.fillRect(Math.round(i.exactTime-o),Math.round(i.high-o),Math.round(2*o),Math.round(i.low-i.high)+2*o)),i.combinedWithProjection||(i.isTwoColorBar?t.fillStyle=i.isUp?i.downColor:i.upColor:t.fillStyle=i.color,t.fillRect(Math.round(i.exactTime-this.barSpacing+o),Math.round(i.open-o),Math.round(this.barSpacing-2*o+1),Math.round(2*o)));t.restore()},s.prototype.hitTest=function(t){var e,i,o,n,s=this.bars,r=.5*this.barLineWidth;if(0===s.length)return null;if(t.x<s[0].time-r)return null;if(t.x>s[s.length-1].time+r)return null;for(e=null,i=0;i<s.length;++i)if(o=s[i],t.x<=o.time+r){e=o;break}return n=R.selectionTolerance(.5*this.barLineWidth),e&&e.high-n<=t.y&&t.y<=e.low+n?new z(z.REGULAR):null},r.prototype.draw=function(t){var e,i,o,n;for(t.save(),t.lineCap="butt",t.translate(.5,.5),e=0;e<this.bars.length;++e){for(i=this.bars[e],o=(i.low-i.high)/i.additionalNum,t.beginPath(),n=0;n<i.additionalNum;n++)i.isUp?(t.moveTo(Math.round(i.time-.5*this.barWidth)+.5,i.high+n*o),t.lineTo(Math.round(i.time+.5*this.barWidth)-.5,i.high+(n+1)*o),t.moveTo(Math.round(i.time+.5*this.barWidth)-.5,i.high+n*o),t.lineTo(Math.round(i.time-.5*this.barWidth)+.5,i.high+(n+1)*o)):this.drawEllipse(t,i.time-.45*this.barWidth+.5,i.high+n*o,Math.round(.9*this.barWidth),Math.round(o));t.strokeStyle=i.color,t.lineWidth=1,t.stroke()}t.restore()},r.prototype.drawEllipse=function(t,e,i,o,n){t.save(),t.translate(e+o/2,i+n/2),t.scale(o/2,n/2),t.moveTo(1,0),t.arc(0,0,.95,0,2*Math.PI,!1),t.restore()},r.prototype.hitTest=function(t){var e,i,o,n,s=this.bars,r=.5*this.barSpacing;if(0===s.length)return null;if(t.x<s[0].time-r)return null;if(t.x>s[s.length-1].time+r)return null;for(e=null,i=0;i<s.length;++i)if(o=s[i],t.x<=o.time+r){e=o;break}return n=R.selectionTolerance(this.barWidth),e&&e.high-n<=t.y&&t.y<=e.low+n?new z(z.REGULAR):null},a.prototype.draw=function(t){var e,i,o,n,s;for(t.translate(.5,.5),t.fillStyle=this.lineColor,e=this.lineWidth,i=0;i<this.items.length;++i)o=this.items[i],n=o.x,s=o.y,o.style&&(t.fillStyle=o.style.color,e=o.style.width),t.fillRect(Math.round(n-.5*e),s,e,this.histogramBase-s)},a.prototype.hitTest=function(e){var i,o,n,s,r,a=R.selectionTolerance(this.lineWidth);for(r=0;r<this.items.length;++r)if(i=this.items[r],o=i.x,n=i.y,s=t.distanceToSegment(new t.Point(o,n),new t.Point(o,this.histogramBase),new t.Point(e.x,e.y)),s.distance<=a)return new z(z.REGULAR);return null},l.prototype.draw=function(t){var e,i,o,n,s,r,a,l,h,c,d,p,u;if(0!==this.items.length){for(e=this.barSpacing,i=this.lineColor,o=this.histogramBase,t.translate(.5,.5),n={},s=this.items,r=0;r<s.length;++r)a=s[r],l=0===r?null:s[r-1],h=a.style?a.style.color:i,c=n[h]||[],c.push({item:a,prev:l}),n[h]=c;for(h in n){for(c=n[h],t.fillStyle=h,t.strokeStyle=h,t.lineWidth=1,t.beginPath(),r=0;r<c.length;r++)a=c[r].item,d=Math.ceil(a.x-.5*e),p=Math.ceil(d+e),u=a.y,t.rect(d,u,p-d,o-u);for(t.fill(),t.beginPath(),r=0;r<c.length;r++)a=c[r].item,d=Math.ceil(a.x-.5*e),p=Math.ceil(d+e),u=a.y,l=c[r].prev,t.moveTo(p-.5,o),t.lineTo(p-.5,u+.5),t.lineTo(d+.5,u+.5),l&&l.y>u&&t.lineTo(d+.5,l.y);t.stroke()}}},l.prototype.hitTest=function(t){var e,i,o,n=.5*this.barSpacing+this.lineWidth,s=t.x-n,r=t.x+n,a=this.items;for(e=a.length;e--;)if(i=a[e].x,i>=s&&i<=r&&(o=a[e].y,t.y>=Math.min(o,this.histogramBase)&&t.y<=Math.max(o,this.histogramBase)))return new z(z.REGULAR);return null},h.prototype.draw=function(t){t.lineCap="square",t.lineJoin=this.withMarkers?"round":"miter",t.strokeStyle=this.lineColor,t.fillStyle=this.lineColor,t.lineWidth=this.lineWidth,t.lineStyle=this.lineStyle,this._simpleMode?this._drawSimpleMode(t):this._drawLines(t)},h.prototype._drawSimpleMode=function(t){var e,i,o,n;if(t.beginPath(),this.walkLine(t,this.items),t.stroke(),this.withMarkers){for(e=this.lineWidth+2,i=2*Math.PI,t.beginPath(),n=this.items.length;n--;)o=this.items[n],o&&(t.moveTo(o.x,o.y),t.arc(o.x,o.y,e,0,i));t.fill()}},h.prototype.walkLine=function(t,e,i,o){var n,s,r,a,l,h,c,d,p,u,_;if(e){for(n=.25*this.barSpacing,c=R.paneRendererCoordinateIsValid,d=0,p=e.length;d<p;d++)if(u=e[d],c(u.y)){r=u,s=d;break}if(void 0!==s&&r)for(_=this.withSteps&&this.lineWidth&&this.lineWidth%2===0?.5:0,d=s,p=e.length;d<p;d++){if(l=e[d],h=e[d+1]||{},c(l.y))if(a&&c(a.y))this.withSteps&&t.lineTo(a.x+_,l.y+_),t.lineTo(l.x+_,l.y+_),i&&!c(h.y)&&t.lineTo(l.x+_,o);else if(h&&c(h.y))i?(d!=s&&t.lineTo(l.x+_,o),t.lineTo(l.x+_,l.y+_)):t.moveTo(l.x+_,l.y+_);else if(i){if(0===d)continue;d!=s&&t.lineTo(l.x-n+_,o),t.lineTo(l.x-n+_,l.y+_),t.lineTo(l.x+n+_,l.y+_),t.lineTo(l.x+n+_,o)}else t.moveTo(l.x-n+_,l.y+_),t.lineTo(l.x+n+_,l.y+_);a=l}}},h.prototype._drawLines=function(t){function e(e,i,o){r(i.y)&&(r(e.y)?t.lineTo(i.x,i.y):o&&r(o.y)?t.moveTo(i.x,i.y):(t.moveTo(i.x-s,i.y),t.lineTo(i.x+s,i.y)))}var i,o,n,s,r,a,l,h,c,d,p,u,_,f;if(this.items.length){for(s=.25*this.barSpacing,r=R.paneRendererCoordinateIsValid,t.beginPath(),a=this.items[0],a&&t.moveTo(a.x,a.y),l=t.strokeStyle,h=t.lineWidth,c=t.lineStyle,d=1;d<this.items.length;++d)i=this.items[d-1],o=this.items[d],n=this.items[d+1],o.style&&!this.forceLineColor?(p=o.style.color,u=o.style.width,_=o.style.style):(p=this.lineColor,u=this.lineWidth,_=this.lineStyle),this.ignorePaletteLineWidth&&(u=this.lineWidth),f=p!=l||u!=h||_!=c,f?(l=p,h=u,c=_,t.stroke(),t.beginPath(),t.strokeStyle=p,t.lineWidth=u,t.lineStyle=_,_===CanvasEx.LINESTYLE_SOLID?(t.moveTo(i.x,i.y),e(i,o,n)):CanvasEx.drawLine(t,i.x,i.y,o.x,o.y)):e(i,o,n);t.stroke()}},h.prototype.hitTest=function(e){for(var i,o,n,s,r,a,l,h,c=R.selectionTolerance(this.lineWidth),d=0,p=this.items.length-1;p-d>2;)a=Math.round((p+d)/2),l=this.items[a],l.x<=e.x?d=a:p=a;for(d=Math.max(1,d-1),p=Math.min(this.items.length-1,p+1),h=d;h<=p;++h)if(i=this.items[h-1],o=this.items[h],n=i.x,s=o.x,r=t.distanceToSegment(new t.Point(n,i.y),new t.Point(s,o.y),new t.Point(e.x,e.y)),r.distance<=c)return this.hittest?this.hittest:new z(z.REGULAR);return null},inherit(c,h),c.prototype.draw=function(t){var e,i,o,n,s,r,a,l,c,d,p,u;if(0!==this.items.length){for(t.lineCap="square",t.strokeStyle=this.lineColor,t.lineWidth=this.lineWidth,t.lineStyle=this.lineStyle,t.lineWidth=1,e=0;e<this.items.length&&!R.paneRendererCoordinateIsValid(this.items[e].y);)e++;for(i=this.items.length-1;i>=0&&!R.paneRendererCoordinateIsValid(this.items[i].y);)i--;if(!(e>=i)){for(t.translate(.5,.5),o={},n=this.items,s=e;s<=i;s++)r=n[s],a=r.style?r.style.color:this.lineColor,s<i&&n[s+1].style&&(l=n[s+1].style.color,a!==l&&(c=o[l]||[],c.push(r),o[l]=c)),d=o[a]||[],d.push(r),o[a]=d;for(a in o){for(d=o[a],t.beginPath(),p=0,s=0;s<d.length;s++)d[s].style&&d[s].style.color!==a&&(t.moveTo(d[p].x,this.bottom),this.walkLine(t,d.slice(p,s),!0,this.bottom),p=s);t.moveTo(d[p].x,this.bottom),this.walkLine(t,d.slice(p,d.length),!0,this.bottom),t.closePath(),this.isSeries?(u=t.createLinearGradient(0,0,0,this.bottom),u.addColorStop(0,this.color1),u.addColorStop(1,this.color2),t.fillStyle=u,this._simpleMode=!0):t.fillStyle=a,t.fill()}t.lineWidth=this.lineWidth,h.prototype.draw.call(this,t)}}},d.prototype.draw=function(t){var e,i,o,n,s,r,a,l,h,c,d,p,u,_,f=this.bars,g=this._data.barSpacing,m=this._data.drawWick,v=this._data.drawBorder,y=this._data.wickColor,w=(this._data.borderColor,this._barBorderWidth),b=this._barWidth;if(t.lineCap="square",t.lineStyle=this._data.lineStyle,g<1){if(m){for(t.strokeStyle=y,t.lineWidth=1,t.beginPath(),c=f.length;c-- >0;)d=f[c],t.moveTo(d.time,d.low),t.lineTo(d.time,d.high);t.stroke()}for(t.lineWidth=1,p="",u=!1,t.beginPath(),c=f.length;c-- >0;)d=f[c],h=d.time,p!==d.color&&(u&&(t.stroke(),t.beginPath(),u=!1),t.strokeStyle=d.color,p=d.color),t.moveTo(d.time,d.open),t.lineTo(d.time,d.close),u=!0;u&&t.stroke()}else{if(f=f.slice().sort(function(t,e){return t.color>e.color?-1:t.color<e.color?1:0}),t.translate(.5,.5),t.lineWidth=w,m)for(_=y,t.fillStyle=y,c=f.length;c--;)d=f[c],h=d.time,e=d.open,i=d.high,o=d.low,n=d.close,d.wickColor&&d.wickColor!==_&&(t.fillStyle=d.wickColor,_=d.wickColor),a=Math.min(e,n),l=Math.max(e,n),d.hollow?(t.fillRect(h,i,1,a-i),t.fillRect(h,l,1,o-l)):t.fillRect(h,i,1,o-i);if(v)for(c=f.length;c--;)d=f[c],f[c+1]&&d.borderColor==f[c+1].borderColor||(t.fillStyle=d.borderColor),d.hollow||(h=d.time,e=d.open,n=d.close,s=Math.round(h-b),r=Math.round(h+b),a=Math.min(e,n),l=Math.max(e,n),t.fillRect(s,a,r-s+1,l-a+1));for(c=f.length;c--;)d=f[c],h=d.time,e=d.open,i=d.high,o=d.low,n=d.close,s=Math.round(h-b),r=Math.round(h+b),a=Math.min(e,n),l=Math.max(e,n),f[c+1]&&d.color==f[c+1].color||(t.fillStyle=d.color,t.strokeStyle=d.color),d.hollow?(t.translate(-.5,-.5),t.strokeRect(s+1,a+1,r-s,l-a),t.translate(.5,.5)):(v&&(s+=1,a+=1,r-=1,l-=1),t.fillRect(s,a,r-s+1,l-a+1))}},d.prototype.hitTest=function(t){var e,i,o,n,s=this.bars,r=.5*this._data.barSpacing;if(0===s.length)return null;if(t.x<s[0].time-r)return null;if(t.x>s[s.length-1].time+r)return null;for(e=null,i=0;i<s.length;++i)if(o=s[i],t.x<=o.time+r){e=o;break}return n=R.selectionTolerance(this._barBorderWidth),e&&e.high-n<=t.y&&t.y<=e.low+n?this._data.hittest||new z(z.REGULAR):null},p.prototype.draw=function(t){var e,i,o,n,s,r,a=this.lineWidth,l=3*this.lineWidth,h=!1;for(i=0;i<this.items.length;++i)o=this.items[i],n=o.x,s=o.y,TradingView.isNaN(n)||TradingView.isNaN(s)||(r=null!=o.style?o.style.color:this.lineColor,r!==e&&(e=r,h&&t.fill(),t.beginPath(),t.fillStyle=r),t.rect(n-l/2,s-a/2,l,a),t.rect(n-a/2,s-l/2,a,l),h=!0);h&&t.fill()},p.prototype.hitTest=function(e){var i,o,n,s,r,a,l=R.selectionTolerance(this.lineWidth);for(a=1;a<this.items.length;++a)if(i=this.items[a-1],o=this.items[a],n=i.x,s=o.x,r=t.distanceToSegment(new t.Point(n,i.y),new t.Point(s,o.y),new t.Point(e.x,e.y)),r.distance<=l)return new z(z.REGULAR);return null},u.prototype.draw=function(t){var e,i,o,n,s,r,a=2*Math.PI,l=this.radius,h=!1;for(i=0;i<this.items.length;++i)o=this.items[i],n=o.x,s=o.y+this.vertOffset,TradingView.isNaN(n)||TradingView.isNaN(s)||(r=null!=o.style?o.style.color:this.lineColor,r!==e&&(e=r,h&&t.fill(),t.beginPath(),t.fillStyle=r),t.moveTo(n+l,s),t.arc(n,s,l,0,a,!1),h=!0);h&&t.fill()},u.prototype.hitTest=function(e){var i,o,n,s,r=2*this.radius,a=this.vertOffset,l=R.selectionTolerance(r);for(i=0;i<this.items.length;++i)if(o=this.items[i],o&&(n=new t.Point(o.x,o.y+a),s=n.substract(e).length(),s+this.radius<=l))return new z(z.REGULAR);return null},inherit(_,t.Point),f.prototype._calculateVerticalOffset=function(t){return Math.round((t||0)/4)},f.prototype._calculateMinHeight=function(t){var e=this.width||this._calculateWidth(t);return e},f.prototype._calculateWidth=function(t){var t=t||this.barSpacing;return Math.round(t/2)},f.prototype.draw=function(t){var e,i,o,n,s,r,a=this.width,l=a<4,h=Math.max(parseInt(a/2),1),c=Math.round(this.width/2),d=Math.round(this.width);for(t.translate(1,1),e=0,i=this.items.length;e<i;e++)o=this.items[e],n=o.isUp?-1:1,s=Math.abs(o.height),r=o.y-n*this.vertOffset,t.beginPath(),t.translate(o.x,r),l?(t.moveTo(0,0),t.lineTo(-c,-c*n),t.moveTo(0,0),t.lineTo(c,-c*n),t.moveTo(0,0),t.lineTo(0,-s*n),t.moveTo(-c,-s*n),t.lineTo(c,-s*n),t.lineWidth=h,t.strokeStyle=o.isUp?this.colorUp:this.colorDn,t.stroke()):(t.moveTo(0,0),s<d?(t.lineTo(a,-s*n),t.lineTo(-a,-s*n)):(t.lineTo(a,-d*n),t.lineTo(c,-d*n),t.lineTo(c,-s*n),t.lineTo(-c,-s*n),t.lineTo(-c,-d*n),t.lineTo(-a,-d*n)),t.lineTo(0,0),t.strokeStyle=this.colorBorder,t.stroke(),t.fillStyle=o.isUp?this.colorUp:this.colorDn,t.fill()),t.translate(-o.x,-r);t.translate(-1,-1)},f.prototype.hitTest=function(t){var e,i,o,n,s,r,a,l,h,c,d=Math.round(this.width/2),p=Math.round(this.width);for(e=0;e<this.items.length;++e)if(i=this.items[e],i&&void 0!==i.x&&null!==i.x&&!TradingView.isNaN(i.x)&&void 0!==i.y&&null!==i.y&&!TradingView.isNaN(i.y)&&(o=Math.abs(i.height),n=i.isUp?-1:1,s=o+p,r=i.y-n*this.vertOffset,a=r-n*s,l=i.x-d,h=i.x+d,c=l<t.x&&t.x<h&&(i.isUp?r<t.y&&t.y<a:a<t.y&&t.y<r)))return new z(z.REGULAR)},g.prototype.draw=function(t){this.drawShape(t),this.drawText(t)},g.prototype.drawShape=function(t){throw Error("Not implemented")},g.prototype.drawText=function(t){var e,i,o,n,s,r;if(this._textCache)for(e=0,i=this.items.length;e<i;e++)o=this.items[e],n=o.x,s=o.y+this._vertOffset+this._textVertOffset,r=o.style&&null!=o.style.textColor?o.style.textColor:this._textColor,this._textCache.paintTo(t,r,n,s,"center",this._vertOffset>0?"top":"bottom")},g.prototype.hitTest=function(e,i){var o,n,s,r,a,l,h,c,d,p,u,_,f,g,m=Math.max(this.height,this.width),v=this._vertOffset,y=this._textVertOffset;for(i=i||z.REGULAR,s=0;s<this.items.length;++s)if(r=this.items[s]){if(o=new t.Point(r.x,r.y+v),n=o.substract(e).length(),n<=m)return new z(i);if(this._textCache&&(a=this._textImageWidth/2,l=r.y+v+y,h=v>0?0:-this._textImageHeight,c=v>0?this._textImageHeight:0,d=e.x,p=e.y,u=r.x-a,_=l+h,f=r.x+a,g=l+c,d>u&&d<f&&p>_&&p<g))return new z(i)}return null},inherit(m,g),m.prototype.drawShape=function(t){var e,i,o,n,s,r,a=this._vertOffset>0?1:-1;for(e=0,i=this.items.length;e<i;e++)o=this.items[e],n=o.x,s=o.y+this._vertOffset-a*Math.round(this.height/2),r=o.style&&null!=o.style.color?o.style.color:this._color,this._charCache.paintTo(t,r,n,s,"center",this._vertOffset>0?"middle":"bottom")},m.prototype.hitTest=function(e){var i,o,n,s,r=this._vertOffset,a=R.selectionTolerance(this.height);for(i=0;i<this.items.length;++i)if(o=this.items[i],o&&(n=new t.Point(o.x,o.y+r),s=n.substract(e).length(),s<=a))return new z(z.REGULAR);return null},inherit(v,g),v.prototype.drawShape=function(t){var e,i,o,n,s,r,a,l,h,c,d;for(t.lineWidth=2,e=this.width,i=this.height,o=this._vertOffset,s=!1,r=0,a=this.items.length;r<a;r++)l=this.items[r],h=l.style&&null!=l.style.color?l.style.color:this._color,h!==n&&(n=h,s&&t.stroke(),t.beginPath(),t.strokeStyle=h),c=l.x-e/2,d=l.y-i/2+o,t.moveTo(c,d),t.lineTo(c+e,d+i),t.moveTo(c,d+i),t.lineTo(c+e,d),s=!0;s&&t.stroke()},inherit(y,g),y.prototype.drawShape=function(t){var e,i,o,n,s,r,a,l,h=this.width,c=this.height,d=Math.round(c/3),p=this._vertOffset-2*d,u=!1;for(i=0,o=this.items.length;i<o;i++)n=this.items[i],n.style&&null!=n.style.color?(s=n.style.color,r=n.style.borderColor):(s=this._color,r=this._borderColor),s!==e&&(e=s,u&&(t.fill(),t.stroke()),t.beginPath(),t.fillStyle=s,t.strokeStyle=r),a=n.x,l=n.y+p,t.moveTo(a,l),t.lineTo(a+h/2,l+c),t.lineTo(a-h/2,l+c),t.lineTo(a,l),u=!0;u&&(t.fill(),t.stroke())},inherit(w,g),w.prototype.drawShape=function(t){var e,i,o,n,s,r,a,l,h=this.width,c=this.height,d=Math.round(c/3),p=this._vertOffset-d,u=!1;for(i=0,o=this.items.length;i<o;i++)n=this.items[i],n.style&&null!=n.style.color?(s=n.style.color,r=n.style.borderColor):(s=this._color,r=this._borderColor),s!==e&&(e=s,u&&(t.fill(),t.stroke()),t.beginPath(),t.fillStyle=s,t.strokeStyle=r),a=n.x-h/2,l=n.y+p,t.moveTo(a,l),t.lineTo(a+h,l),t.lineTo(a+h/2,l+c),t.lineTo(a,l),u=!0;u&&(t.fill(),t.stroke())},inherit(b,g),b.prototype.drawShape=function(t){var e,i,o,n,s,r,a,l=this.width,h=this.height,c=this._vertOffset,d=!1;for(i=0,o=this.items.length;i<o;i++)n=this.items[i],s=n.style&&null!=n.style.color?n.style.color:this._color,s!==e&&(e=s,d&&t.fill(),t.beginPath(),t.fillStyle=s),r=n.x+l/2,a=n.y-h/2+c,t.moveTo(r,a),t.lineTo(r,a+h),t.lineTo(r-l,a+h/2),t.lineTo(r,a),d=!0;d&&t.fill()},inherit(S,g),S.prototype.drawShape=function(t){var e,i,o,n,s,r,a,l,h=this.width,c=this.height,d=c/2,p=this._vertOffset,u=3,_=(h-u)/3,f=!1;for(i=0,o=this.items.length;i<o;i++)n=this.items[i],n.style&&null!=n.style.color?(s=n.style.color,r=n.style.borderColor):(s=this._color,r=this._borderColor),s!==e&&(e=s,f&&(t.fill(),t.stroke()),t.beginPath(),t.fillStyle=s,t.strokeStyle=r),a=n.x-h/2,l=n.y-d+p,t.moveTo(a,l),t.lineTo(a+u,l),t.bezierCurveTo(a+_,l-_,a+2*_,l+_,a+h,l),t.lineTo(a+h,l+d),t.bezierCurveTo(a+h-_,l+d+_,a+h-2*_,l+d-_,a+u,l+d),t.lineTo(a+u,l+c),t.lineTo(a,l+c),t.lineTo(a,l),f=!0;f&&(t.fill(),t.stroke())},inherit(T,g),T.prototype.drawShape=function(t){var e,i,o,n,s,r,a,l,h,c,d;for(t.lineWidth=2,e=this.width,i=this.height,o=this._vertOffset,s=!1,r=0,a=this.items.length;r<a;r++)l=this.items[r],h=l.style&&null!=l.style.color?l.style.color:this._color,h!==n&&(n=h,s&&t.stroke(),t.beginPath(),t.strokeStyle=h),c=l.x-e/2,d=l.y-i/2+o,t.moveTo(c+e/2,d),t.lineTo(c+e/2,d+i),t.moveTo(c,d+i/2),t.lineTo(c+e,d+i/2),s=!0;s&&t.stroke()},inherit(C,g),C.prototype.drawShape=function(t){var e,i,o,n,s,r,a,l,h=Math.max(this.width,this.height)/2,c=this._vertOffset,d=2*Math.PI,p=!1;for(i=0,o=this.items.length;i<o;i++)n=this.items[i],n.style&&null!=n.style.color?(s=n.style.color,r=n.style.borderColor):(s=this._color,r=this._borderColor),s!==e&&(e=s,p&&(t.fill(),t.stroke()),t.beginPath(),t.fillStyle=s,t.strokeStyle=r),a=n.x,l=n.y+c,t.moveTo(a+h,l),t.arc(a,l,h,0,d,!1),p=!0;p&&(t.fill(),t.stroke())},inherit(x,g),x.prototype._calculateWidth=function(t){return t=t||this.barSpacing,Math.round(t/4)},x.prototype.drawShape=function(t){var e,i,o,n,s,r,a,l,h=!1,c=this.width,d=Math.abs(this.height),p=c<4,u=Math.max(parseInt(c/2),1),_=Math.round(this.width/2),f=Math.round(this.width),g=this._isUp?-1:1;for(i=0,o=this.items.length;i<o;i++)n=this.items[i],s=n.x,r=n.y+this._vertOffset+g*Math.round(d/2),n.style&&null!=n.style.color?(a=n.style.color,l=n.style.borderColor):(a=this._color,l=this._borderColor),a!==e&&(e=a,h&&(t.fill(),t.stroke()),t.beginPath(),t.fillStyle=a,t.strokeStyle=l),t.translate(s,r),p?(t.moveTo(0,0),t.lineTo(-_,-_*g),t.moveTo(0,0),t.lineTo(_,-_*g),t.moveTo(0,0),t.lineTo(0,-d*g),t.moveTo(-_,-d*g),t.lineTo(_,-d*g),t.lineWidth=u):(t.moveTo(0,0),d<f?(t.lineTo(c,-d*g),t.lineTo(-c,-d*g)):(t.lineTo(c,-f*g),t.lineTo(_,-f*g),t.lineTo(_,-d*g),t.lineTo(-_,-d*g),t.lineTo(-_,-f*g),t.lineTo(-c,-f*g)),t.lineTo(0,0)),t.translate(-s,-r),h=!0;h&&(t.fill(),t.stroke())},inherit(P,x),inherit(L,x),inherit(k,g),k.prototype.drawShape=function(t){var e,i,o,n,s,r,a,l,h=!1,c=this._isUp?1:-1,d=Math.round(this._shapeWidth/2)-.5,p=Math.round(this._shapeHeight)-.5,u=0;for(0!==this._vertOffset&&this._vertOffset<0==this._isUp&&(u=-c*Math.round(p+this._stepY)),i=0,o=this.items.length;i<o;i++)n=this.items[i],s=n.x+.5,r=n.y+this._vertOffset+u+.5,n.style&&null!=n.style.color?(a=n.style.color,l=n.style.borderColor):(a=this._color,l=this._borderColor),a!==e&&(e=a,h&&(t.fill(),t.stroke()),t.beginPath(),t.fillStyle=a,t.strokeStyle=l),t.translate(s,r),t.moveTo(0,0),t.lineTo(this._stepX,this._stepY*c),t.lineTo(d,this._stepY*c),t.lineTo(d,p*c),t.lineTo(-d,p*c),t.lineTo(-d,this._stepY*c),t.lineTo(-this._stepX,this._stepY*c),t.lineTo(0,0),t.translate(-s,-r),h=!0;h&&(t.fill(),t.stroke())},k.prototype.hitTest=function(e,i){var o,n,s,r,a,l,h,c,d,p,u,_,f,g,m,v=this._stepY/2,y=this._vertOffset,w=this._isUp?1:-1;for(s=0;s<this.items.length;++s)if(r=this.items[s]){if(a=w*v,0!==this._vertOffset&&this._vertOffset<0==this._isUp&&(a=-w*(this._shapeHeight+v)),o=new t.Point(r.x,r.y+y+a),n=o.substract(e).length(),n<=v)return new z(z.REGULAR);if(l=this._shapeWidth/2,a=0,0!==this._vertOffset&&this._vertOffset<0==this._isUp&&(a=-w*(this._shapeHeight+this._stepY)),h=r.y+y+a,c=this._isUp?this._stepY:-this._shapeHeight,d=this._isUp?this._shapeHeight:-this._stepY,p=e.x,u=e.y,_=r.x-l,f=h+c,g=r.x+l,m=h+d,p>_&&p<g&&u>f&&u<m)return new z(z.REGULAR)}return null},inherit(E,k),inherit(I,k),inherit(A,g),A.prototype.drawShape=function(t){var e,i,o,n,s,r,a,l,h=!1,c=Math.round(this.height/2);for(i=0,o=this.items.length;i<o;i++)n=this.items[i],n.style&&null!=n.style.color?(s=n.style.color,r=n.style.borderColor):(s=this._color,r=this._borderColor),s!==e&&(e=s,h&&(t.fill(),t.stroke()),t.beginPath(),t.fillStyle=s,t.strokeStyle=r),a=n.x-c,l=n.y+this._vertOffset-c,t.rect(a,l,this.height,this.height),h=!0;h&&(t.fill(),t.stroke())},inherit(V,g),V.prototype.drawShape=function(t){var e,i,o,n,s,r,a,l,h=!1,c=Math.round(this.height/2);
for(i=0,o=this.items.length;i<o;i++)n=this.items[i],n.style&&null!=n.style.color?(s=n.style.color,r=n.style.borderColor):(s=this._color,r=this._borderColor),s!==e&&(e=s,h&&(t.fill(),t.stroke()),t.beginPath(),t.fillStyle=s,t.strokeStyle=r),a=n.x,l=n.y+this._vertOffset,t.moveTo(a,l-c),t.lineTo(a+c,l),t.lineTo(a,l+c),t.lineTo(a-c,l),t.lineTo(a,l-c),h=!0;h&&(t.fill(),t.stroke())},M.prototype.draw=function(t){},M.prototype.drawBackground=function(t){var e,i,o;for(t.save(),"undefined"==typeof FlashCanvas&&t.translate(-.5,-.5),e=0;e<this._items.length;++e)i=this._items[e],null!=i.color&&(t.fillStyle=i.color,o=e==this._items.length-1?this._w:this._items[e+1].x-i.x,t.fillRect(i.x,this._y,o,this._h));t.restore()},M.prototype.hitTest=function(t){return null},inherit($,m),D.prototype._drawOrderArrow=function(t,e,i,o){var n,s=e.x,r=e.y;o?(t.rotate(Math.PI),s=-s-this._orderArrow.width/2,r=-r-this._orderArrow.height):(s-=this._orderArrow.width/2,r-=this._orderArrow.height),i&&(r-=i),n=o?"floor":"ceil",s=Math[n](s)+(o?-.5:.5),r=Math[n](r)+.5,t.translate(s,r),t.moveTo(.25*this._orderArrow.width,0),t.lineTo(.75*this._orderArrow.width,0),t.lineTo(.75*this._orderArrow.width,.45*this._orderArrow.height),t.lineTo(this._orderArrow.width,.45*this._orderArrow.height),t.lineTo(.5*this._orderArrow.width,this._orderArrow.height),i&&(t.lineTo(this._orderArrow.width,this._orderArrow.height),t.lineTo(this._orderArrow.width,this._orderArrow.height+i),t.lineTo(0,this._orderArrow.height+i),t.lineTo(0,this._orderArrow.height),t.lineTo(.5*this._orderArrow.width,this._orderArrow.height)),t.lineTo(0,.45*this._orderArrow.height),t.lineTo(.25*this._orderArrow.width,.45*this._orderArrow.height)},D.prototype._drawPriceArrow=function(t,e,i){var o,n=e.x,s=e.y;i?(t.rotate(Math.PI),n=-n-this._priceArrow.width,s=-s-this._priceArrow.height/2):(n-=this._priceArrow.width,s-=this._priceArrow.height/2),o="ceil",n=Math.round(n)+(i?-1.5:.5),s=Math.floor(s)+.5,t.translate(n,s),t.moveTo(0,0),t.lineTo(this._priceArrow.width,.5*this._priceArrow.height),t.lineTo(0,this._priceArrow.height)},D.prototype.draw=function(t){t.beginPath();for(var e,i,o=0;o<this._items.length;o++)e=this._items[o],i="lower"==e.pos,t.save(),t.translate(0,i?this._orderArrow.vMargin:-this._orderArrow.vMargin),this._drawOrderArrow(t,e.orderPoint,this._exitLineWidth,i),t.restore(),t.save(),this._drawPriceArrow(t,e.pricePoint,!i),t.restore();if(t.closePath(),t.fillStyle=this._color,t.fill(),this._text)for(t.font=this._text.fontSize+"px "+this._text.font,t.textAlign="center",t.textBaseline="top",o=0;o<this._items.length;o++)e=this._items[o],i="lower"==e.pos,t.save(),t.translate(0,i?this._orderArrow.vMargin:-this._orderArrow.height-this._orderArrow.vMargin),e.label&&(t.translate(0,i?this._text.fontSize+this._text.vMargin+this._exitLineWidth:-this._text.fontSize-this._text.vMargin-this._exitLineWidth),t.fillText(e.label,Math.ceil(e.orderPoint.x),e.orderPoint.y),"number"!=typeof this._textWidths[e.label]&&(this._textWidths[e.label]=t.measureText(e.label).width)),e.qty&&(t.translate(0,i?this._text.fontSize+this._text.vMargin+this._exitLineWidth:-this._text.fontSize-this._text.vMargin-this._exitLineWidth),t.fillText(e.qty,Math.ceil(e.orderPoint.x),e.orderPoint.y),"number"!=typeof this._textWidths[e.qty]&&(this._textWidths[e.qty]=t.measureText(e.qty).width)),t.restore()},D.prototype._testOrderArrows=function(t){for(var e,i,o,n,s,r,a,l=0,h=this._orderArrow.width/2;l<this._items.length;l++)if(e=this._items[l].orderPoint,!(t.x<e.x-h||t.x>e.x+h||(i=this._items[l],o="lower"==i.pos,n=this._orderArrow.height+this._exitLineWidth,o||(n=-n),s=e.y+(o?this._orderArrow.vMargin:-this._orderArrow.vMargin),r=Math.min(s,s+n),a=Math.max(s,s+n),t.y<r||t.y>a)))return!0;return!1},D.prototype._testText=function(t){for(var e,i,o,n,s,r,a,l,h,c,d,p=0;p<this._items.length;p++)if(e=this._items[p],i=e.orderPoint,o="lower"==e.pos,n=this._orderArrow.vMargin+this._orderArrow.height+this._exitLineWidth,o||(n=-n),s=i.y+n,r=this._text.vMargin+this._text.fontSize*(!!e.label+!!e.qty),o||(r=-r),a=Math.min(s,s+r),l=Math.max(s,s+r),!(t.y<a||t.y>l||(h=e.label&&e.qty?o&&t.y<s+this._text.fontSize||!o&&t.y>s-this._text.fontSize?e.label:e.qty:e.label||e.qty,c=this._textWidths[h],d=c&&c/2,!c||t.x<i.x-d||t.x>i.x+d)))return!0;return!1},D.prototype.hitTest=function(t){var e=this._testOrderArrows(t),i=!e&&this._text&&this._testText(t);if(e||i)return new z(z.REGULAR)},B.prototype.draw=function(t){var e,i,o,n,s,r=this.data.vertLinesVisible,a=this.data.horzLinesVisible;(r||a)&&this.data&&(t.lineStyle=this.data.lineStyle,t.lineWidth=this.data.lineWidth,t.strokeStyle=this.data.color,e=this.data.lineWidth%2===0?.5:0,i=this.data.x+1+e,o=this.data.y+e,n=this.data.w,s=this.data.h,r&&i>=0&&CanvasEx.drawLine(t,i,0,i,s),a&&o>=0&&CanvasEx.drawLine(t,0,o,n,o),this.data.drawCenter&&(t.beginPath(),t.arc(i,o,3,0,2*Math.PI,!0),t.fillStyle=this.data.color,t.fill()))},O.prototype._drawShackle=function(t){var e=this._data.width-3,i=e/2,o=this._data.height-this._data.bodyHeight;t.moveTo(1.5,i),t.arc(this._data.width/2,i,i,Math.PI,2*Math.PI),o>i&&(t.moveTo(1.5,i),t.lineTo(1.5,o),t.moveTo(this._data.width-1.5,i),t.lineTo(this._data.width-1.5,o))},O.prototype.draw=function(t){var e,i,o,n;t.translate(this._data.x-this._data.width/2,this._data.y-this._data.height/2),e="rgba(153,153,153,.3)",i="rgba(153,153,153,.7)",o="#777",n="rgba(255,255,255,.7)",t.strokeStyle=e,t.lineWidth=2,t.beginPath(),this._drawShackle(t),t.stroke(),t.closePath(),t.strokeStyle=i,t.lineWidth=1,t.beginPath(),t.rect(0,this._data.height-this._data.bodyHeight+.5,this._data.width,this._data.bodyHeight),t.closePath(),t.stroke(),t.translate(0,-1),t.strokeStyle=o,t.beginPath(),this._drawShackle(t),t.stroke(),t.closePath(),t.fillStyle=n,t.beginPath(),t.rect(1,this._data.height-this._data.bodyHeight+1.5,this._data.width-2,this._data.bodyHeight-2),t.fill(),t.beginPath(),t.rect(.5,this._data.height-this._data.bodyHeight+1,this._data.width-1,this._data.bodyHeight-1),t.stroke(),t.closePath(),t.fillStyle=o,t.fillRect(this._data.width/2-.5,this._data.height-this._data.bodyHeight/2,1,2)},e.PaneRendererBars=TradingView.PaneRendererBars=o,e.PaneRendererRenkoPB=TradingView.PaneRendererRenkoPB=n,e.PaneRendererKagi=TradingView.PaneRendererKagi=s,e.PaneRendererPnF=TradingView.PaneRendererPnF=r,e.PaneRendererHistogram=TradingView.PaneRendererHistogram=a,e.PaneRendererColumns=TradingView.PaneRendererColumns=l,e.PaneRendererLine=TradingView.PaneRendererLine=h,e.PaneRendererArea=TradingView.PaneRendererArea=c,e.PaneRendererCandles=TradingView.PaneRendererCandles=d,e.PaneRendererCross=TradingView.PaneRendererCross=p,e.PaneRendererCircles=TradingView.PaneRendererCircles=u,e.PaneRendererCrossShape=TradingView.PaneRendererCrossShape=T,e.PaneRendererCrossHair=TradingView.PaneRendererCrossHair=B,e.PaneRendererCrossHairLock=TradingView.PaneRendererCrossHairLock=O,e.PaneRendererArrowsUpDownItem=TradingView.PaneRendererArrowsUpDownItem=_,e.PaneRendererArrowsUpDown=TradingView.PaneRendererArrowsUpDown=f,e.PaneRendererAbstractShape=TradingView.PaneRendererAbstractShape=g,e.PaneRendererUnicodeChar=TradingView.PaneRendererUnicodeChar=m,e.PaneRendererXCross=TradingView.PaneRendererXCross=v,e.PaneRendererTriangleApexUp=TradingView.PaneRendererTriangleApexUp=y,e.PaneRendererTriangleApexDown=TradingView.PaneRendererTriangleApexDown=w,e.PaneRendererTriangleApexLeft=TradingView.PaneRendererTriangleApexLeft=b,e.PaneRendererFlagShape=TradingView.PaneRendererFlagShape=S,e.PaneRendererCircleShape=TradingView.PaneRendererCircleShape=C,e.PaneRendererArrowsBase=TradingView.PaneRendererArrowsBase=x,e.PaneRendererArrowUp=TradingView.PaneRendererArrowUp=P,e.PaneRendererArrowDown=TradingView.PaneRendererArrowDown=L,e.PaneRendererLabelsBase=TradingView.PaneRendererLabelsBase=k,e.PaneRendererLabelUp=TradingView.PaneRendererLabelUp=E,e.PaneRendererLabelDown=TradingView.PaneRendererLabelDown=I,e.PaneRendererSquare=TradingView.PaneRendererSquare=A,e.PaneRendererDiamond=TradingView.PaneRendererDiamond=V,e.PaneRendererBackground=TradingView.PaneRendererBackground=M,e.PaneRendererClockIcon=TradingView.PaneRendererClockIcon=$,e.PaneRendererStudyStrategyOrders=TradingView.PaneRendererStudyStrategyOrders=D}).call(e,i(21))},function(t,e){"use strict";e.optimalBarWidth=function(t){return.3*t},e.selectionTolerance=function(t){return 2+.5*t},e.paneRendererCoordinateIsValid=function(t){return null!==t&&void 0!==t&&!TradingView.isNaN(t)}},function(t,e){"use strict";function i(t,e,i,o,n){var s,r,a,l,h;for(this._canvasesMap={},this._lines=t.split(/[^\S\r\n]*(?:\r\n|\r|\n)/),this._font=this._fontStyle(e,i,o,n),this._fontSize=n,s=$("<canvas>"),r=s.get(0).getContext("2d"),r.font=this._font,a=0,l=0;l<this._lines.length;l++)h=r.measureText(this._lines[l]).width,a=Math.max(a,h);this.textImageWidth=a+1,this.textImageHeight=this._lines.length*n}i.prototype.paintTo=function(t,e,i,o,n,s){var r=this._getTextImage(e),a=this._x(i,n,this.textImageWidth),l=this._y(o,s,this.textImageHeight);t.drawImage(r,a-.5,l-.5)},i.prototype._getTextImage=function(t){var e,i,o,n,s;if(this._canvasesMap[t])return this._canvasesMap[t].get(0);for(e=$("<canvas>").attr("width",this.textImageWidth).attr("height",this.textImageHeight),i=e.get(0).getContext("2d"),i.textBaseline="top",i.font=this._font,i.textAlign="center",i.fillStyle=t,o=Math.round(this.textImageWidth/2),n=0,s=0;s<this._lines.length;s++)i.fillText(this._lines[s],o,n),n+=this._fontSize;return this._canvasesMap[t]=e,e.get(0)},i.prototype._x=function(t,e,i){var o=t;switch(e){case"left":break;case"right":o-=i;break;case"center":o-=i/2}return Math.round(o)},i.prototype._y=function(t,e,i){var o=t;switch(e){case"top":break;case"bottom":o-=i;break;case"middle":o-=i/2}return Math.round(o)},i.prototype._fontStyle=function(t,e,i,o){return(t?"bold ":"")+(e?"italic ":"")+o+"px "+i},t.exports=i},function(t,e){"use strict";function i(){this._renderers=[],this._globalAlpha=1}i.prototype.setGlobalAlpha=function(t){this._globalAlpha=t},i.prototype.append=function(t){this._renderers.push(t)},i.prototype.insert=function(t,e){this._renderers.splice(e,0,t)},i.prototype.draw=function(t){for(var e=0;e<this._renderers.length;e++)t.save(),t.globalAlpha=this._globalAlpha,this._renderers[e].draw(t),t.restore()},i.prototype.drawBackground=function(t){t.save(),t.globalAlpha=this._globalAlpha;for(var e=0;e<this._renderers.length;e++)this._renderers[e].drawBackground&&this._renderers[e].drawBackground(t);t.restore()},i.prototype.hitTest=function(t){var e,i,o=null;for(e=this._renderers.length-1;e>=0;e--)i=this._renderers[e].hitTest(t),i&&(null==o||i.result()>o.result())&&(o=i);return o},t.exports=i},function(t,e){"use strict";t.exports=function(t,e){var i,o=10,n=t%o;for(n&&(t=t-n+o),i=[];t<=e;t+=o)i.push(t);return i}},function(t,e){"use strict";function i(t,e){return null===t||TradingView.isInteger(t)?null===e||TradingView.isInteger(e)?(this.m_firstBar=t,void(this.m_lastBar=e)):void TradingView.logDebugChart("BarsRange: incorrect lastBar"):void TradingView.logDebugChart("BarsRange: incorrect firstBar")}i.prototype.isEmpty=function(){return null===this.m_firstBar||null===this.m_lastBar||void 0===this.m_firstBar||void 0===this.m_lastBar},i.prototype.clone=function(){return new i(this.m_firstBar,this.m_lastBar)},i.prototype.firstBar=function(){return this.m_firstBar},i.prototype.lastBar=function(){return this.m_lastBar},i.prototype.count=function(){return this.m_lastBar-this.m_firstBar+1},i.prototype.resizeRight=function(t){return!TradingView.isInteger(t)||t<0?void TradingView.logDebugChart("BarsRange: incorrect newWidth"):void(this.m_firstBar=this.m_lastBar-t+1)},i.prototype.shift=function(t){return isNumber(t)?(this.m_firstBar=Math.round(this.m_firstBar+t),void(this.m_lastBar=Math.round(this.m_lastBar+t))):void TradingView.logDebugChart("BarsRange.shift: incorrect coeff")},i.prototype.contains=function(t){return this.m_firstBar<=t&&this.m_lastBar>=t},t.exports=i},function(t,e){"use strict";function i(){this.backColorers=[]}function o(t){i.call(this),this._series=t}function n(t,e){i.call(this),this._study=t,this._plotIndex=e}i.prototype.barStyle=function(t,e,i){var o,n={};for(o=this.backColorers.length-1;o>=0;o--)this.backColorers[o].applyBarStyle(t,e,n,i);return this.applyBarStyle(t,e,n,i),n},i.prototype.pushBackBarColorer=function(t){this.backColorers.push(t)},i.prototype.applyBarStyle=function(t,e,i){throw Error("This function is supposed to be reimplemented in a subclass")},inherit(o,i),o.prototype.applyBarStyle=function(t,e,i,o){var n,s,r,a,l,h,c,d,p,u,_;switch(i||(i={}),i.barColor=null,i.barBorderColor=null,i.barWickColor=null,i.isBarHollow=null,i.isBarUp=null,i.upColor=null,i.downColor=null,i.isTwoColorBar=null,n=this._series.properties(),n.style.value()){case TradingView.Series.STYLE_LINE:i.barColor=n.lineStyle.color.value();break;case TradingView.Series.STYLE_AREA:i.barColor=n.areaStyle.linecolor.value();break;case TradingView.Series.STYLE_BARS:s=n.barStyle.upColor.value(),r=n.barStyle.downColor.value(),a=s,l=r,h=this.findBar(t,!1,o),n.barStyle.barColorsOnPrevClose.value()?(c=this.findPrevBar(t,!1,o),i.barColor=c[TradingView.CLOSE_PLOT]<=h[TradingView.CLOSE_PLOT]?s:r,i.barBorderColor=c[TradingView.CLOSE_PLOT]<=h[TradingView.CLOSE_PLOT]?a:l):(i.barColor=h[TradingView.OPEN_PLOT]<=h[TradingView.CLOSE_PLOT]?s:r,i.barBorderColor=h[TradingView.OPEN_PLOT]<=h[TradingView.CLOSE_PLOT]?a:l);break;case TradingView.Series.STYLE_CANDLES:s=n.candleStyle.upColor.value(),r=n.candleStyle.downColor.value(),a=n.candleStyle.borderUpColor?n.candleStyle.borderUpColor.value():n.candleStyle.borderColor.value(),l=n.candleStyle.borderDownColor?n.candleStyle.borderDownColor.value():n.candleStyle.borderColor.value(),d=n.candleStyle.wickUpColor?n.candleStyle.wickUpColor.value():n.candleStyle.wickColor.value(),p=n.candleStyle.wickDownColor?n.candleStyle.wickDownColor.value():n.candleStyle.wickColor.value(),h=this.findBar(t,!1,o),n.candleStyle.barColorsOnPrevClose.value()?(c=this.findPrevBar(t,!1,o),u=c[TradingView.CLOSE_PLOT]<=h[TradingView.CLOSE_PLOT]):u=h[TradingView.OPEN_PLOT]<=h[TradingView.CLOSE_PLOT],i.barColor=u?s:r,i.barBorderColor=u?a:l,i.barWickColor=u?d:p;break;case TradingView.Series.STYLE_HOLLOW_CANDLES:s=n.hollowCandleStyle.upColor.value(),r=n.hollowCandleStyle.downColor.value(),a=n.hollowCandleStyle.borderUpColor?n.hollowCandleStyle.borderUpColor.value():n.hollowCandleStyle.borderColor.value(),l=n.hollowCandleStyle.borderDownColor?n.hollowCandleStyle.borderDownColor.value():n.hollowCandleStyle.borderColor.value(),d=n.hollowCandleStyle.wickUpColor?n.hollowCandleStyle.wickUpColor.value():n.hollowCandleStyle.wickColor.value(),p=n.hollowCandleStyle.wickDownColor?n.hollowCandleStyle.wickDownColor.value():n.hollowCandleStyle.wickColor.value(),h=this.findBar(t,!1,o),c=this.findPrevBar(t,!1,o),c[TradingView.CLOSE_PLOT]<=h[TradingView.CLOSE_PLOT]?(i.barColor=s,i.barBorderColor=a,i.barWickColor=d):(i.barColor=r,i.barBorderColor=l,i.barWickColor=p),h[TradingView.OPEN_PLOT]<=h[TradingView.CLOSE_PLOT]?i.isBarHollow=!0:i.isBarHollow=!1;break;case TradingView.Series.STYLE_HEIKEN_ASHI:s=n.haStyle.upColor.value(),r=n.haStyle.downColor.value(),a=n.haStyle.borderUpColor.value(),l=n.haStyle.borderDownColor.value(),d=n.haStyle.wickUpColor.value(),p=n.haStyle.wickDownColor.value(),h=this.findBar(t,e,o),n.haStyle.barColorsOnPrevClose.value()?(c=this.findPrevBar(t,e,o),u=c[TradingView.CLOSE_PLOT]<=h[TradingView.CLOSE_PLOT]):u=h[TradingView.OPEN_PLOT]<=h[TradingView.CLOSE_PLOT],i.barColor=u?s:r,i.barBorderColor=u?a:l,i.barWickColor=u?d:p;break;case TradingView.Series.STYLE_RENKO:h=this.findBar(t,e,o),u=h[TradingView.OPEN_PLOT]<=h[TradingView.CLOSE_PLOT],s=e?n.renkoStyle.upColorProjection.value():n.renkoStyle.upColor.value(),r=e?n.renkoStyle.downColorProjection.value():n.renkoStyle.downColor.value(),a=e?n.renkoStyle.borderUpColorProjection.value():n.renkoStyle.borderUpColor.value(),l=e?n.renkoStyle.borderDownColorProjection.value():n.renkoStyle.borderDownColor.value(),i.barColor=u?s:r,i.barBorderColor=u?a:l,i.isBarUp=u;break;case TradingView.Series.STYLE_PB:h=this.findBar(t,e,o),u=h[TradingView.OPEN_PLOT]<=h[TradingView.CLOSE_PLOT],s=e?n.pbStyle.upColorProjection.value():n.pbStyle.upColor.value(),r=e?n.pbStyle.downColorProjection.value():n.pbStyle.downColor.value(),a=e?n.pbStyle.borderUpColorProjection.value():n.pbStyle.borderUpColor.value(),l=e?n.pbStyle.borderDownColorProjection.value():n.pbStyle.borderDownColor.value(),i.barColor=u?s:r,i.barBorderColor=u?a:l,i.isBarUp=u;break;case TradingView.Series.STYLE_KAGI:i.upColor=e?n.kagiStyle.upColorProjection.value():n.kagiStyle.upColor.value(),i.downColor=e?n.kagiStyle.downColorProjection.value():n.kagiStyle.downColor.value(),_=null,h=this.findBar(t,e,o),h[TradingView.LOW_PLOT]<h[TradingView.ADT_PLOT]&&h[TradingView.ADT_PLOT]<h[TradingView.HIGH_PLOT]?(_=h[TradingView.OPEN_PLOT]<=h[TradingView.CLOSE_PLOT],i.isTwoColorBar=!0):(_=h[TradingView.OPEN_PLOT]<=h[TradingView.CLOSE_PLOT]?h[TradingView.OPEN_PLOT]==h[TradingView.ADT_PLOT]:h[TradingView.OPEN_PLOT]!=h[TradingView.ADT_PLOT],i.isTwoColorBar=!1),i.barColor=_?i.upColor:i.downColor,i.isBarUp=h[TradingView.OPEN_PLOT]<=h[TradingView.CLOSE_PLOT];break;case TradingView.Series.STYLE_PNF:h=this.findBar(t,e,o),u=h[TradingView.ADT_PLOT]>0,s=e?n.pnfStyle.upColorProjection.value():n.pnfStyle.upColor.value(),r=e?n.pnfStyle.downColorProjection.value():n.pnfStyle.downColor.value(),i.isBarUp=u,i.barColor=u?s:r}return i},o.prototype.getSeriesBars=function(t){return t?this._series.nsBars():this._series.bars()},o.prototype._findBarFieldValue=function(t,e,i){var o=this.getSeriesBars(i).valueAt(t);if(void 0!==o)return o[e]},o.prototype.findBar=function(t,e,i){return i?i.value:this.getSeriesBars(e).valueAt(t)||[]},o.prototype.findPrevBar=function(t,e,i){var o,n;return i&&i.previousValue?i.previousValue:(o=this._series.bars(),n=o._search(t,TradingView.SEARCH_EXACT),n>0?this._series.bars()._valueAt(n-1):[])},inherit(n,i),n.prototype.applyBarStyle=function(t,e,i){var o,n,s,r,a,l,h,c,d,p,u,_,f;return i||(i={}),e?i:(o=this._study.properties(),o.visible.value()?(n=this._study.metaInfo(),s=this._study.data(),s&&0!==s.size()?(r=n.plots[this._plotIndex],a=o.styles[r.id],a.visible&&!a.visible.value()?i:(l=this._study.offset(r.id),(h=s.valueAt(t-l))?(c=h[this._plotIndex+1],null==c?i:(c=Math.round(c),d=n.plots[this._plotIndex].palette,p=o.palettes,u=p[d],_=n.palettes[d].valToIndex?n.palettes[d].valToIndex[c]:c,f=u.colors[_].color.value(),i.barColor=f,i.upColor=f.color,i.downColor=f.color,i)):i)):i):i)},e.SeriesBarColorer=o,e.StudyBarColorer=n},function(t,e,i){(function(t){"use strict";function o(t){this._data=t}function n(t,e){l.call(this,t,e),this._rendererCache={}}function s(t,e){this._source=t,this._model=e,this._text="",this._coordinate=0,this._background="black",this._color="white",this._invaildated=!0}function r(t,e){this._constructor="LineToolHorzLine";var i=e?e:new _("linetoolhorzline");this._priceAxisView=new s(this,t),a.call(this,t,new n(this,t),i)}var a=i(67).LineDataSource,l=i(97),h=i(68),c=i(69),d=i(98).TextRenderer,p=i(88),u=i(92),_=i(73).DefaultProperty;o.prototype.draw=function(t){var e,i;return 0===this._data.points.length?null:void(this._data.visible!==!1&&(e=this._data.points[0].y,i=t.canvas.width,t.lineCap="square",t.strokeStyle=this._data.color,t.lineWidth=this._data.linewidth,t.lineStyle=this._data.linestyle,CanvasEx.drawLine(t,0,e,i,e)))},o.prototype.hitTest=function(t){if(this._data.visible===!1)return null;if(0===this._data.points.length)return null;var e=3;return Math.abs(t.y-this._data.points[0].y)<=e?new p(this._data.hitTestResult):null},inherit(n,l),n.prototype.update=function(){this._invalidated=!0},n.prototype.updateImpl=function(){l.prototype.update.call(this)},n.prototype.renderer=function(){var e,i,n,s,r,a,l,h,c,_,f;return this._invalidated&&(this.updateImpl(),this._invalidated=!1),e=new u,i={},i.points=this._points,i.color=this._source.properties().linecolor.value(),i.linewidth=this._source.properties().linewidth.value(),i.linestyle=this._source.properties().linestyle.value(),i.hitTestResult=p.MOVEPOINT,n=this._source.properties(),e.append(new o(i)),this._source.properties().showLabel.value()&&1==this._points.length&&(s=n.vertLabelsAlign.value(),r=n.horzLabelsAlign.value(),a=this._points[0],l=0,h=0,"left"==r?a.x=3:"right"==r?(a.x=this._model.timeScale().width(),h=-5):a.x=this._model.timeScale().width()/2,"middle"==s?l=-this._source.properties().fontsize.value()/6:"bottom"==s&&(l=-4),c={points:[a],text:n.text.value(),color:n.textcolor.value(),vertAlign:s,horzAlign:r,font:n.font.value(),offsetX:h,offsetY:l,bold:this._source.properties().bold.value(),italic:this._source.properties().italic.value(),fontsize:this._source.properties().fontsize.value()},e.append(new d(c,this._rendererCache))),1==this._points.length&&this.isAnchorsRequired()&&(_=new t.Point(this._model.timeScale().width()/2,this._points[0].y),_.data=0,e.append(this.createLineAnchor({points:[_]}))),TradingView.printing||!this._source.hasAlert.value()||this._model.readOnly()||1!=this._points.length||(f=new t.Point(this._model.timeScale().width()/2,this._points[0].y),this._source.getAlertIsActive(function(t){e.append(new TradingView.PaneRendererClockIcon({point1:f,color:t?i.color:defaults("chartproperties.alertsProperties.drawingIcon.color")}))})),e},inherit(s,h),s.prototype.update=function(){this._invaildated=!0},s.prototype.updateImpl=function(){var t,e,i;if(0!==this._source.points().length&&this._source.priceScale()&&!this._source.priceScale().isEmpty()){if(t=this._source.properties().linecolor.value(),t!=this._background&&(this._background=t,this._color=this.color()),e=this._source.points()[0].price,this._source.priceScale().isPercent()){if(i=this._source.ownerSource().firstValue(),null===i)return;e=this._source.priceScale().priceRange().convertToPercent(e,i)}this._floatCoordinate=this._source.priceScale().priceToCoordinate(e,!0),this._coordinate=Math.round(this._floatCoordinate),this._source.priceScale().formatter()&&(this._text=this._source.priceScale().formatter().format(e))}},s.prototype.renderer=function(){this._invaildated&&(this.updateImpl(),this._invaildated=!1);var t={text:this._text,coordinate:this._coordinate,color:this._color,background:this._background,visible:!0};return new c(t)},s.prototype.coordinate=function(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),h.prototype.coordinate.call(this)},inherit(r,a),r.prototype.state=function(t){var e=a.prototype.state.call(this,t);return e.points[0].offset=0,e},r.prototype.pointsCount=function(){return 1},r.prototype.title=function(){return"Horizontal Line"},r.prototype.priceAxisViews=function(t,e){return this.isActualSymbol()&&e===this.priceScale()&&this.properties().showPrice.value()&&this._model.paneForSource(this)===t?[this._priceAxisView]:null},r.prototype.updateAllViews=function(){a.prototype.updateAllViews.call(this),this._priceAxisView.update()},r.prototype.canHasAlert=function(){return!0},r.prototype._getAlertPlots=function(){return[this.points()[0].price]},e.HorzLineRenderer=o,e.LineToolHorzLine=r}).call(e,i(21))},function(t,e,i){(function(e){"use strict";function o(t,e){this._source=t,this._model=e,this._points=[],this._floatPoints=[]}var n=i(88),s=i(87).LineAnchor;o.prototype.priceToCoordinate=function(t){var e,i=this._source.priceScale();return i.isPercent()&&(e=this._source.ownerSource().firstValue(),t=i.priceRange().convertToPercent(t,e)),i.priceToCoordinate(t)},o.prototype.addAnchors=function(t){if(this.isAnchorsRequired()){var e=this._points;this._model.lineBeingCreated()==this._source&&(e=e.slice(0,-1)),t.append(this.createLineAnchor({points:e}))}},o.prototype.update=function(){var t,e,i,o,n,s,r,a;if(this._points=[],t=this._source.priceScale(),e=this._model.timeScale(),t&&!t.isEmpty()&&!e.isEmpty())for(this._floatPoints=[],i=this._source.points(),o=0;o<i.length;o++){if(n=i[o],s=this._source.pointToScreenPoint(n),!s)return;r=s[0],r.data=o,a=s[1],a.data=o,this._floatPoints.push(r),this._points.push(a)}},o.prototype.currentPoint=function(){var t=this._model.crossHairSource();return new e.Point(t.x,t.y)},o.prototype.anchorColor=function(){return this._source.isBeingEdited()?"#D61AD3":this._model.isDark()?"#FFFFFF":"#606060"},o.prototype.isHoveredSource=function(){return this._source===this._model.hoveredSource()},o.prototype.isSelectedSource=function(){return this._source===this._model.selectedSource()},o.prototype.isAnchorsRequired=function(){return(this.isHoveredSource()||this.isSelectedSource())&&!this._model.isSnapshot()},o.prototype.createLineAnchor=function(t){return new s($.extend({color:this.anchorColor(),backgroundColor:this._model.backgroundColor(),currentPoint:this.currentPoint(),linePointBeingEdited:this._model.linePointBeingEdited(),hittestResult:n.CHANGEPOINT,radius:(TradingView.isMobile.any()?15:7)+(this.isSelectedSource()?1:0),strokeWidth:(TradingView.isMobile.any()?3:1)+(this.isSelectedSource()?1:0)},t))},t.exports=o}).call(e,i(21))},function(t,e,i){(function(t){"use strict";function o(t,e,i){this._textSizeCache=e,this._data=t,this._fontSize=t.fontsize?t.fontsize:t.fontSize?t.fontSize:20,t.lines=this._lines=this.wordWrap(t.text,t.wordWrapWidth),this._hittest=i?i:new c(c.MOVEPOINT)}function n(t,e,i,o,n,s){a.call(this,t,e),this._offsetX=i,this._offsetY=o,this._vertAlign=n,this._horzAlign=s,this._rendererCache={},this._renderer=null,this._invalidated=!0}function s(t,e){this._constructor="LineToolText";var i=e?e:new p("linetooltext");l.call(this,t,new n(this,t),i),this._timeScale=t.timeScale(),this._barSpacing=t.timeScale().barSpacing()}function r(t,e){var i=e?e:new p("linetooltextabsolute");i.locked.value()||i.locked.setValue(!0),s.call(this,t,i)}var a=i(97),l=i(67).LineDataSource,h=i(72).DataSource,c=i(88),d=i(92),p=i(73).DefaultProperty;!function(){function t(){var t=document.createElement("canvas");t.width=0,t.height=0,e=t.getContext("2d"),t=null}var e;o.prototype.setPoints=function(t,e){this._data.points=t,this._hittest=e?e:new c(c.MOVEPOINT)},o.prototype._calcLinesWidths=function(){var i,o,n,s;if(e||t(),e.textBaseline="alphabetic",e.font=this.fontStyle(),i=[],this._data.wordWrapWidth)for(o=this._data.wordWrapWidth,n=0;n<this._lines.length;n++)i.push(this._data.wordWrapWidth);else for(o=0,n=0;n<this._lines.length;n++)s=e.measureText(this._lines[n]).width,i.push(s),o=Math.max(o,s);return{widths:i,maxWidth:o}},o.prototype.measure=function(){var t=this._fontSize,e=this._calcLinesWidths().maxWidth,i=t*this._lines.length,o=~~(t/6);return this._data.backgroundHorzInflate&&(e+=2*this._data.backgroundHorzInflate),this._data.backgroundVertInflate&&(i+=2*this._data.backgroundVertInflate),e=Math.ceil(e+2*o),i=Math.ceil(i+2*o),e%2!==0&&e++,this._data.padding&&(i+=this._data.padding),{width:e,height:i,textBgPadding:o}},o.prototype.wordWrap=function(i,o,n){var s,r,a,l,h,c,d,p,u;if(e||t(),o=+o,i+="",s=i.split(/[^\S\r\n]*(?:\r\n|\r|\n|$)/),s[s.length-1]||s.pop(),!isFinite(o)||o<=0)return s;for(e.font=n||this.fontStyle(),r=[],a=0;a<s.length;a++)if(l=s[a],h=e.measureText(l).width,h<=o)r.push(l);else for(c=l.split(/([-\)\]\},.!?:;])|(\s+)/);c.length;){if(d=~~(o/h*(c.length+2)/3),d<=0||e.measureText(c.slice(0,3*d-1).join("")).width<=o)for(;e.measureText(c.slice(0,3*(d+1)-1).join("")).width<=o;)d++;else for(;d>0&&e.measureText(c.slice(0,3*--d-1).join("")).width>o;);if(d>0)r.push(c.slice(0,3*d-1).join("")),c.splice(0,3*d);else{if(p=c[0]+(c[1]||""),u=1===u?1:~~(o/e.measureText(p)*p.length),e.measureText(p.substr(0,u)).width<=o)for(;e.measureText(p.substr(0,u+1)).width<=o;)u++;else for(;u>1&&e.measureText(p.substr(0,--u)).width>o;);u<1&&(u=1),r.push(p.substr(0,u)),c[0]=p.substr(u),c[1]=""}if(h=e.measureText(c.join("")).width,h<=o){r.push(c.join(""));break}}return r}}(),o.prototype._x=function(){var t=this._data.points[0].x+this._data.offsetX;return t},o.prototype._y=function(){var t,e=this._fontSize*this._lines.length;switch(this._data.scaleY&&(e*=this._data.scaleY),t=this._data.points[0].y+this._data.offsetY+e,this._data.vertAlign){case"top":break;case"bottom":t-=e;break;case"middle":t-=e/2}return t},o.prototype.fontStyle=function(){return(this._data.bold?"bold ":"")+(this._data.italic?"italic ":"")+this._fontSize+"px "+this._data.font},o.prototype.draw=function(t){var e,i,o,n,s,r,a,l,h,c,d,p,u,_,f,g,m;if(0!==this._data.points.length){switch(e=this._x(),i=this._y(),o=this._fontSize,this._data.scaleY&&(o*=this._data.scaleY),i-=o*(this._lines.length-1),t.textBaseline="alphabetic",t.font=this.fontStyle(),this._data.horzAlign){case"left":t.textAlign="start";break;case"right":t.textAlign="end";break;case"center":t.textAlign="center"}if(t.translate(e+.5,i+.5),e=0,i=0,o=this._fontSize,this._data.scaleX&&this._data.scaleY&&(n=Math.min(this._data.scaleX,this._data.scaleY),t.scale(n,n)),s=0,r=this._calcLinesWidths(),a=r.maxWidth,l=0,this._data.backgroundColor||this._data.borderColor||this._data.highlightBorder&&this._data.wordWrapWidth){switch(h=e,this._data.horzAlign){case"left":break;case"right":h-=a;break;case"center":h-=a/2}c=o*this._lines.length,d=~~(o/6),this._data.backgroundHorzInflate&&(a+=2*this._data.backgroundHorzInflate,h-=this._data.backgroundHorzInflate),this._data.backgroundVertInflate&&(c+=2*this._data.backgroundVertInflate,i+=this._data.backgroundVertInflate),p={x:Math.floor(h-d),y:Math.floor(i-o),w:Math.ceil(a+2*d),h:Math.ceil(c+2*d)},p.w%2!==0&&p.w++,this._data.padding&&(p.h+=this._data.padding,l=this._data.padding),this._data.backgroundVertInflate&&(i+=this._data.backgroundVertInflate),this._data.backgroundRoundRect?(t.roundRect(p.x,p.y,p.w,p.h,this._data.backgroundRoundRect),this._data.backgroundColor&&(t.fillStyle=this._data.backgroundColor,t.fill()),this._data.borderColor&&(u=~~Math.max(o/12,1),t.strokeStyle=this._data.borderColor,t.lineWidth=u,t.stroke())):(this._data.backgroundColor&&(t.fillStyle=this._data.backgroundColor,t.fillRect(p.x,p.y,p.w,p.h)),this._data.borderColor?(u=~~Math.max(o/12,1),t.strokeStyle=this._data.borderColor,t.lineWidth=u,t.strokeRect(p.x-u/2,p.y-u/2,p.w+u,p.h+u)):this._data.highlightBorder&&(t.strokeStyle=this._data.color,t.lineWidth=1,t.beginPath(),g=[3,1],t.dashedLineTo(p.x-.5,f=p.y-.5,_=p.x+p.w+.5,f,g),t.dashedLineTo(_,f,_,f=p.y+p.h+.5,g),t.dashedLineTo(_=p.x-.5,f,p.x+p.w+.5,f,g),t.dashedLineTo(_,p.y-.5,_,f,g),t.stroke()))}for(this._data.backgroundVertInflate&&!this._data.backgroundColor&&(i+=2*this._data.backgroundVertInflate),t.fillStyle=this._data.color,m=0;m<this._lines.length;m++)t.fillText(this._lines[m],e,i),i+=o+l;this._textSizeCache&&(this._textSizeCache.widths=r.widths)}},o.prototype.hitTest=function(t){var e,i,o,n,s,r,a,l;if(0===this._data.points.length)return null;if(e=this._fontSize,this._data.scaleY&&(e*=this._data.scaleY),i=this._textSizeCache.widths,!i)return null;for(o=0,n=0;n<i.length;n++)o=Math.max(o,i[n]);return this._data.scaleX&&(o*=this._data.scaleX),s=this._data.points[0].x+this._data.offsetX,r=this._data.points[0].y+this._data.offsetY,"bottom"==this._data.vertAlign&&(r-=this._lines.length*this._fontSize),"middle"==this._data.vertAlign&&(r-=this._lines.length*this._fontSize/2),"right"==this._data.horzAlign?s-=o:"center"==this._data.horzAlign&&(s-=o/2),a=this._data.backgroundColor||this._data.borderColor?~~(e/6):0,l=this._data.borderColor?~~Math.max(e/12,1):0,t.x>=s-a-l&&t.x<=s+o+a+l&&t.y>=r-l&&t.y<=r+this._lines.length*this._fontSize+2*a+l?this._hittest:null},inherit(n,a),n.prototype.update=function(){this._renderer=null,this._invalidated=!0},n.prototype.updateImpl=function(){a.prototype.update.call(this),this._invalidated=!1},n.prototype.renderer=function(){var e,i,n,s,r,a,l,h,c,p,u,_;return this._invalidated&&this.updateImpl(),this._renderer?this._renderer:(e=this._source.priceScale(),!e||e.isEmpty()?(this._renderer=new d,this._renderer):(i={},n=this._source.properties(),s=n.locked&&n.locked.value(),s?i.points=this._source.fixedPoints():i.points=this._points,i.text=n.text.value(),i.color=n.color.value(),i.font=n.font.value(),i.offsetX=this._offsetX?this._offsetX:0,i.offsetY=this._offsetY?this._offsetY:0,
i.vertAlign=this._vertAlign?this._vertAlign:"top",i.horzAlign=this._horzAlign?this._horzAlign:"left",i.fontsize=n.fontsize.value(),n.fillBackground&&n.fillBackground.value()&&(i.backgroundColor=n.backgroundColor.value(),i.backgroundTransparency=1-n.backgroundTransparency.value()/100||0),n.drawBorder&&n.drawBorder.value()&&(i.borderColor=n.borderColor.value()),n.wordWrap&&n.wordWrap.value()&&(i.wordWrapWidth=n.wordWrapWidth.value()),i.bold=n.bold&&n.bold.value(),i.italic=n.italic&&n.italic.value(),i.highlightBorder=this._model.selectedSource()===this._source,s||!n.fixedSize||n.fixedSize.value()||(i.scaleX=this._source._model.timeScale().barSpacing()/this._source._barSpacing,r=e.height()/e.priceRange().length(),this._source._isPriceDencityLog&&!e.isLog()&&(a=e.priceRange().minValue(),l=e.priceRange().maxValue(),a=e._toLog(a),l=e._toLog(l),h=l-a,r=e.height()/h),!this._source._isPriceDencityLog&&e.isLog()&&(a=e.priceRange().minValue(),l=e.priceRange().maxValue(),a=e._fromLog(a),l=e._fromLog(l),h=l-a,r=e.height()/h),i.scaleY=r/this._source._priceDencity,(!isFinite(i.scaleY)||i.scaleY<=0)&&delete i.scaleY),c=new o(i,this._rendererCache),this.isAnchorsRequired()&&1===i.points.length&&!this._noSelection?(p=i.points[0],u=new d,u.append(c),i.wordWrapWidth&&(_=new t.Point(p.x+i.wordWrapWidth+~~(i.fontsize/6),p.y+(i.lines?i.lines.length*i.fontsize/2+~~(i.fontsize/6):0)),_.data=0,u.append(this.createLineAnchor({points:[_]}))),this._renderer=u,this._renderer):(this._renderer=c,this._renderer)))},inherit(s,l),s.MIN_WIDTH=100,s.prototype.setPoint=function(t,e){var i,o,n=this.properties();if(0===t&&n.wordWrapWidth&&n.wordWrapWidth.value()){if(i=n.locked&&n.locked.value()?this.fixedPoints()[0].x:this._timeScale.indexToCoordinate(this.points()[0].index),o=this._timeScale.indexToCoordinate(e.index)-i-~~(n.fontsize.value()/6),!isFinite(o))return;n.wordWrapWidth.setValue(Math.max(s.MIN_WIDTH,o))}},s.prototype.pointsCount=function(){return 1},s.prototype.title=function(){return $.t("Text")},s.prototype.setPriceScale=function(t){h.prototype.setPriceScale.call(this,t),t&&t.priceRange()&&(this._priceDencity=t.height()/t.priceRange().length(),this._isPriceDencityLog=t.isLog())},s.prototype.restoreSize=function(){this._barSpacing=this._model.timeScale().barSpacing(),this._priceDencity=this.priceScale().height()/this.priceScale().priceRange().length(),this.updateAllViews(),this._model.updateSource(this)},s.prototype.restoreTemplate=function(t){delete t.locked,delete t.text,l.prototype.restoreTemplate.call(this,t)},inherit(r,s),r.prototype.title=function(){return $.t("Anchored Text")},s.prototype.state=function(t){var e=l.prototype.state.call(this,t);return t&&(e.state.fixedSize=!1),e},e.TextRenderer=o,e.TextPaneView=n,e.LineToolText=s,e.LineToolTextAbsolute=r}).call(e,i(21))},function(t,e,i){(function(e){"use strict";function o(t){this._data=t}function n(t){this._series=t,this._invalidated=!0}var s=i(92),r=i(75),a=r.DateFormatter,l=r.TimeFormatter;o.prototype.hittest=function(){},o.prototype.draw=function(t){var e,i,o,n,s,r,a,l,h,c,d=5,p=12,u=5,_=8,f=13,g=0;t.save(),t.setFont(f+"px Arial"),o=$.t("Last available bar"),this._data.eod?g=t.measureText(o).width:(e=t.measureText(this._data.dateString||"").width,i=t.measureText(this._data.timeString||"").width,g=Math.max(e,i)),n=this._data.timeString?2:1,t.fillStyle=this._data.eod?"#FF4040":"#58A3CD",t.translate(this._data.point.x+.5,this._data.point.y+.5),s=Math.round(-g/2)-_,r=-(f+d)*n-d-p-u,a=Math.round(s+g+2*_),l=-p-u,t.beginPath(),t.moveTo(s,r),t.lineTo(a,r),t.lineTo(a,l),t.lineTo(p,l),t.lineTo(0,l+p),t.lineTo(-p,l),t.lineTo(s,l),t.fill(),t.fillStyle="#FFFFFF",t.textBaseline="top",this._data.eod?t.fillText(o,s+_,r+d):(h=s+_+(g-e)/2,t.fillText(this._data.dateString,h,r+d),this._data.timeString&&(c=s+_+(g-i)/2,t.fillText(this._data.timeString,c,r+2*d+f))),t.restore()},n.prototype.update=function(){this._invalidated=!0},n.prototype.updateImpl=function(){var t,i,o,n,s,r;delete this._point,delete this._dateString,delete this._timeString,delete this._eod,t=this._series.gotoDateResult(),void 0!==t&&(i=t.index,o=this._series.bars().valueAt(i),o&&(n=this._series.priceScale().priceToCoordinate(o[TradingView.HIGH_PLOT]),s=this._series.model().timeScale().indexToCoordinate(i),this._point=new e.Point(s,n),t.eod?this._eod=!0:(r=this._series.model().timeScale().indexToUserTime(i),this._dateString=(new a).format(r),this._series.isDWM()||(this._timeString=(new l).format(r)))))},n.prototype.renderer=function(){return this._invalidated&&(this.updateImpl(),this._invalidated=!1),this._point?new o({point:this._point,dateString:this._dateString,timeString:this._timeString,eod:this._eod}):new s},t.exports=n}).call(e,i(21))},function(t,e,i){(function(e){"use strict";function o(t){this._data=t,this._textWidthCache=new s}function n(t,e,i,o,n){this._model=t,this._source=e,this._plotIndex=i,this._getterName=o?o:"symbol",this._propertyName=n,this._cache={},this._invalidated=!0,this._rendererData={}}var s=i(83),r=i(92),a=i(59).RGBColor;o.prototype.hitTest=function(t){return null},o.prototype.draw=function(t){var e,i,o,n,s,r,a,l,h,c;this._data.visible&&(this._textWidthCache.font!==this._data.font&&(this._textWidthCache.reset(),this._textWidthCache.font=this._data.font),t.font=this._data.font,e=this._data.fontSize,i=Math.floor(e/4.5),o=Math.ceil(e/4.5),n=Math.ceil(e/3),s=Math.ceil(this._textWidthCache.measureText(t,this._data.text)),r=Math.round(e/10),a=e+i+o,l=s+2*n,h=this._data.x-.5,"right"==this._data.align&&(h-=l),c=this._data.y-Math.floor(e/2)-i-.5,t.fillStyle=this._data.backColor,t.fillRect(h,c,l,a),t.fillStyle=this._data.color,t.textAlign="left",t.fillText(this._data.text,h+n,c+i+e-r))},n.prototype.isPropertyEnabled=function(){return this._model.properties().scalesProperties[this._propertyName].value()},n.prototype.update=function(){this._invalidated=!0},n.prototype.updateImpl=function(){var t,i,o,n,s,l,h=this._rendererData;if(h.visible=!1,h.text="",this.isPropertyEnabled()&&this._source.properties().visible.value()&&(t=this._source.lastValueData(this._plotIndex,e.enabled("price_scale_always_last_bar_value")),!t.noData)){if(i=this._model.paneForSource(this._source),o="right",i.leftPriceScale()==this._source.priceScale()&&(o="left"),n=this._model.properties(),s=!i.leftPriceScale().mainSource()||!i.rightPriceScale().mainSource(),s&&n.scalesProperties.showLeftScale.value()&&!n.scalesProperties.showRightScale.value()&&(o="left"),!s){if("left"==o&&!n.scalesProperties.showLeftScale.value())return new r;if("right"==o&&!n.scalesProperties.showRightScale.value())return new r}l=t.coordinate,this._source.lastPriceLabelFixedCoordinate&&(l=this._source.lastPriceLabelFixedCoordinate(this._plotIndex)||l),h.visible=!0,t.color!==h.backColor&&(h.backColor=t.color,h.color=new a(t.color).blackWhiteContrast()),h.text=this._source[this._getterName](this._plotIndex),h.align=o,"right"==o?h.x=this._model.timeScale().width():h.x=0,h.y=l,h.fontSize=this._model.properties().scalesProperties.fontSize.value(),h.font=TradingView.makeFont(h.fontSize,"Arial","")}},n.prototype.renderer=function(){return this._invalidated&&(this.updateImpl(),this._invalidated=!1),this._renderer||(this._renderer=new o(this._rendererData)),this._renderer},t.exports=n}).call(e,i(1))},function(t,e,i){"use strict";function o(t,e){this._data=t,this._colors=this.getBackgroundColor(e)}function n(t,e,i){this._series=t,this._lastBar=e,this._direction=i}i(102);o.prototype.hitTest=function(){return null},o.prototype.getBackgroundColor=function(t){var e=[{background:"rgba(255, 158, 171, 0.3)",line:"#7E202F"},{background:"rgba(244, 255, 158, 0.3)",line:"#EBFF3F"},{background:"rgba(195, 255, 160, 0.3)",line:"#308020"}];return e[t+1]},o.prototype.draw=function(t){t.fillStyle=this._colors.background,t.fillRect(Math.max(0,this._data.x),0,this._data.width,this._data.height),t.strokeStyle=this._colors.line,t.beginPath(),t.lineWidth=1;var e=Math.round(this._data.x);t.moveTo(e,0),t.lineTo(e,this._data.height),t.stroke()},n.prototype.update=function(){this._x=this._series.m_model.timeScale().indexToCoordinate(this._lastBar)-.5*this._series.m_model.timeScale().barSpacing()+1},n.prototype.renderer=function(){var t={x:this._x,height:this._series.priceScale().height(),width:this._series.m_model.timeScale().width()},e=this._series.data().bars(),i=e.last().value[TradingView.CLOSE_PLOT]>e.valueAt(this._lastBar)[TradingView.CLOSE_PLOT]?1:-1,n=0;return 1==this._direction?n=i:2==this._direction&&(n=-1*i),new o(t,n)},e.FutureBarsPaneView=n},function(t,e){"use strict";function i(t,e){this._chartApi=t,this.generateSessionId(),this._sessionDisabled=!1,this._disableStatistics=!!e}i.prototype.destroy=function(){this._sessionDisabled||this.stopSession()},i.prototype.generateSessionId=function(){this._sessionid="cs_"+TradingView.randomHash()},i.prototype.serverTimeOffset=function(){return this._chartApi.serverTimeOffset()},i.prototype.connected=function(){return this._chartApi.connected()&&!this._sessionDisabled},i.prototype.disconnected=function(){var t=this;this.restartSession(),Object.keys(this).forEach(function(e){/^(s|st|symbol_)\d+$/.test(e)&&delete t[e]})},i.prototype.initSession=function(){this._chartApi.createSession(this._sessionid,this)},i.prototype.stopSession=function(){this._chartApi.removeSession(this._sessionid)},i.prototype.restartSession=function(){this.stopSession(),this.generateSessionId(),this.initSession()},i.prototype.setHandler=function(t){this._globalHandler=t},i.prototype.sessionId=function(){return this._sessionid},i.prototype.connect=function(t){this._globalHandler=t,this.initSession(),this._chartApi.connect()},i.prototype.disconnect=function(){this._chartApi.disconnect()},i.prototype.switchTimezone=function(t){this._chartApi.switchTimezone(this._sessionid,t)},i.prototype.resolveSymbol=function(t,e,i){this._chartApi.resolveSymbol(this._sessionid,t,e,i)},i.prototype.createSeries=function(t,e,i,o,n,s){this._chartApi.createSeries(this._sessionid,t,e,i,o,n,s)},i.prototype.removeSeries=function(t,e){this._chartApi.removeSeries(this._sessionid,t,e)},i.prototype.modifySeries=function(t,e,i,o,n){this._chartApi.modifySeries(this._sessionid,t,e,i,o,n)},i.prototype.requestMoreData=function(t,e,i){this._chartApi.requestMoreData(this._sessionid,t,e,i)},i.prototype.requestMetadata=function(t,e){this._chartApi.requestMetadata(this._sessionid,t,e)},i.prototype.createStudy=function(t,e,i,o,n,s){this._chartApi.createStudy(this._sessionid,t,e,i,o,n,s)},i.prototype.removeStudy=function(t,e){this._chartApi.removeStudy(this._sessionid,t,e)},i.prototype.modifyStudy=function(t,e,i,o){this._chartApi.modifyStudy(this._sessionid,t,e,i,o)},i.prototype.createPointset=function(t,e,i,o,n,s){this._chartApi.createPointset(this._sessionid,t,e,i,o,n,s)},i.prototype.modifyPointset=function(t,e,i,o){this._chartApi.modifyPointset(this._sessionid,t,e,i,o)},i.prototype.removePointset=function(t,e){this._chartApi.removePointset(this._sessionid,t,e)},i.prototype.requestMoreTickmarks=function(t,e,i){this._chartApi.requestMoreTickmarks(this._sessionid,t,e,i)},i.prototype.requestFirstBarTime=function(t,e,i){this._chartApi.requestFirstBarTime(this._sessionid,t,e,i)},i.prototype.setVisibleTimeRange=function(t,e,i){this._chartApi.setVisibleTimeRange(this._sessionid,t,e,i)},i.prototype.onMessage=function(t){switch(t.method){case"connected":this._chartApi.chartCreateSession(this._sessionid,this._disableStatistics);break;case"disconnected":this.disconnected();break;case"critical_error":}this._globalHandler&&this._globalHandler(t)},i.prototype.disable=function(){this._sessionDisabled=!0},t.exports=i},function(t,e){"use strict";function i(t){if(t)return"QUANDL"==t.exchange?"Quandl.com":void 0}t.exports=i},function(t,e,i){"use strict";function o(t,e){this.m_bars=new n(["time","open","high","low","close","adt","style"]),this.m_nsBars=new n(["time","open","high","low","close","adt","style"]),this.m_series=t,this.m_model=e,this.lastProjectionPrice=void 0,this.boxSize=void 0,this.reversalAmount=void 0}var n=i(105);o.prototype.bars=function(){return this.m_bars},o.prototype.nsBars=function(){return this.m_nsBars},o.prototype.size=function(){return this.m_nsBars._end-this.m_nsBars._start+(this.m_bars._end-this.m_bars._start)},o.prototype.each=function(t){var e;for(e=this.m_bars._start;e<this.m_bars._end&&!t(this.m_bars._indexAt(e),this.m_bars._valueAt(e));++e);for(e=this.m_nsBars._start;e<this.m_nsBars._end&&!t(this.m_nsBars._indexAt(e),this.m_nsBars._valueAt(e));++e);},o.prototype.clear=function(){this.m_bars=new n(["time","open","high","low","close","adt","style"]),this.m_nsBars=new n(["time","open","high","low","close","adt","style"]),this.lastProjectionPrice=void 0},o.prototype.first=function(){return this.m_bars.isEmpty()?this.m_nsBars._items[0]:this.m_bars._items[0]},o.prototype.isEmpty=function(){return this.m_bars.isEmpty()&&this.m_nsBars.isEmpty()},o.prototype.last=function(){return this.m_nsBars.isEmpty()?this.m_bars._items[this.m_bars._end-1]:this.m_nsBars._items[this.m_nsBars._end-1]},o.prototype.search=function(t,e){return this.nsBars().isEmpty()?this.bars().search(t,e):this.bars().isEmpty()?this.nsBars().search(t,e):this.nsBars().firstTimeIndex()<=t?this.nsBars().search(t,e):this.bars().search(t,e)},o.prototype.valueAt=function(t){var e=this.search(t);if(e)return e.value},o.prototype.firstBar=function(){var t,e,i;return this.m_model.timeScale().isEmpty()?null:(t=this.m_model.timeScale().visibleBars(),e=t.firstBar(),i=this.search(e,TradingView.SEARCH_NEAREST_RIGHT),i?i.value:null)},o.prototype.firstValue=function(){var t=this.firstBar();return t?t[TradingView.CLOSE_PLOT]:null},o.prototype.calculateATR=function(){var t,e,i,o=[];for(t=this.m_bars.lastIndex();t>=this.m_bars.firstIndex();t--)e=this.m_bars._valueAt(t),o.push(e[TradingView.HIGH_PLOT]-e[TradingView.LOW_PLOT]);return i=0===o.length?0:o.reduce(function(t,e){return t+e},0)/o.length,i*=this.m_series.base()},o.prototype.timeToBarIndex=function(t,e){var i,o;if(null===t)return TradingView.logDebugChart("SeriesData.timeToBarIndex: time should be a number of seconds since 1970. But it is null"),0;if(e===TradingView.SEARCH_FROM_RIGHT){for(i=this.m_bars.lastIndex();i>=this.m_bars.firstIndex();i--)if(o=this.m_bars._valueAt(i),t>=o[TradingView.TIME_PLOT])return i;for(i=this.m_nsBars.lastIndex();i>=this.m_nsBars.firstIndex();i--)if(o=this.m_nsBars._valueAt(i),t>=o[TradingView.TIME_PLOT])return i;return this.m_bars.firstIndex()}if(e===TradingView.SEARCH_FROM_LEFT){for(i=this.m_bars.firstIndex();i<=this.m_bars.lastIndex();i++)if(o=this.m_bars._valueAt(i),t<=o[TradingView.TIME_PLOT])return i;for(i=this.m_nsBars.firstIndex();i<=this.m_nsBars.lastIndex();i++)if(o=this.m_nsBars._valueAt(i),t<=o[TradingView.TIME_PLOT])return i;return this.m_bars.lastIndex()}return TradingView.logDebugChart("SeriesData.timeToBarIndex: Incorrect options value"),0},t.exports=o},function(t,e){"use strict";function i(){this._chunks={}}function o(t){var e,o;for(this._items=[],this._columns=t?t:[],this._start=0,this._end=0,this._shareread=!1,this._plotCaches={},this._itemsSearchCache={},e=0;e<this._columns.length;e++)o=this._columns[e],this._plotCaches[o]=new i}i.CHUNK_SIZE=30,o.prototype.clear=function(){this._items=[],this._itemsSearchCache={},this._columns=[],this._start=0,this._end=0,this._shareread=!1,this._plotCaches={}},o.prototype.columns=function(){return this._columns},o.prototype.last=function(){return this._items[this._end-this._start-1]},o.prototype.first=function(){return this._items[0]},o.prototype.firstIndex=function(){return this._start},o.prototype.lastIndex=function(){return this._end-this._start-1},o.prototype.size=function(){return this._end-this._start},o.prototype.isEmpty=function(){return 0===this.size()},o.prototype.contains=function(t){return-1!=this._search(t)},o.prototype.valueAt=function(t){var e=this.search(t);if(e)return e.value},o.prototype.add=function(t,e){var i,o;return this._shareread?(TradingView.logDebugChart("PlotList.add: readonly collection modification attempt"),!1):(i=this._createPair(t,e),o=this._search(t),this._itemsSearchCache={},o<0?(o=this._lowerbound(t,-1),this._items.splice(o,0,i),this._start=0,this._end=this._items.length,!0):(this._items[o]=i,!1))},TradingView.SEARCH_NEAREST_LEFT=-1,TradingView.SEARCH_EXACT=0,TradingView.SEARCH_NEAREST_RIGHT=1,o.prototype.search=function(t,e){var i,o;return this._itemsSearchCache[t]&&this._itemsSearchCache[t][e]?this._itemsSearchCache[t][e]:(i=this._search(t,e),i<0?void 0:(o={index:this._indexAt(i),value:this._valueAt(i)},this._itemsSearchCache[t]=this._itemsSearchCache[t]||{},this._itemsSearchCache[t][e]=o,o))},o.prototype.fold=function(t,e){var i,o=e;for(i=this._start;i<this._end;++i)o=t(this._indexAt(i),this._valueAt(i),o);return o},o.prototype.each=function(t){for(var e=this._start;e<this._end&&!t(this._indexAt(e),this._valueAt(e));++e);},o.prototype.reduce=function(t,e){var i,o=e;for(i=this._start;i<this._end;++i)o=t(o,this._indexAt(i),this._valueAt(i));return o},o.prototype.range=function(t,e){var i=new o;return i._items=this._items,i._start=this._lowerbound(t),i._end=Math.min(this._lowerbound(e)+1,i._items.length),i._shareread=!0,i},o.prototype.minMaxOnRange2=function(t,e,o){var n,s,r,a,l,h,c,d,p,u,_,f,g,m,v,y,w=null,b=null;if(0===this._items.length)return{min:w,max:b};for(n=this._items[0],s=0;s<o.length;s++){for(r=o[s],a=t-r.offset,l=e-r.offset,a=Math.max(a,n),l=Math.min(l,n+this._items.length-1),h=Math.ceil(a/i.CHUNK_SIZE)*i.CHUNK_SIZE,c=Math.max(h,Math.floor(l/i.CHUNK_SIZE)*i.CHUNK_SIZE),this._plotCaches[r.index]||(this._plotCaches[r.index]={}),d=this._plotCaches[r.index],p=a;p<=Math.min(l,h)&&p<=e;p++)u=this._items[p-n].value,_=u[r.index],void 0!==_&&null!==_&&((null===w||_<w)&&(w=_),(null==b||_>b)&&(b=_));for(f=Math.max(h+1,a);f<c;f+=i.CHUNK_SIZE)g=Math.floor(f/i.CHUNK_SIZE),m=d[g],m||(v=g*i.CHUNK_SIZE,y=(g+1)*i.CHUNK_SIZE-1,m=this.minMaxOnRange(v,y,[r]),d[g]=m),null!==m.min&&(m.min<w||null===w)&&(w=m.min),null!==m.max&&(m.max>b||null===b)&&(b=m.max);for(p=c;p<=l;p++)u=this._items[p-n].value,_=u[r.index],void 0!==_&&null!==_&&((null===w||_<w)&&(w=_),(null==b||_>b)&&(b=_));void 0!==r.baseValue&&(w=Math.min(r.baseValue,w),b=Math.max(r.baseValue,b))}return{min:w,max:b}},o.prototype.minMaxOnRange=function(t,e,i){var o,n,s,r,a,l,h,c=this._lowerbound(t),d=Math.min(this._lowerbound(e)+1,this._items.length);for(this._items[this._end-1]>e&&(d=c),o=null,n=null,s=0;s<i.length;s++){for(r=i[s],c=this._lowerbound(t-r.offset),d=Math.min(this._lowerbound(e-r.offset)+1,this._items.length),this._items[d-1]>e-r.offset&&(d=c),a=c;a<d;a++)l=this._items[a].value,h=l[r.index],void 0!==h&&null!==h&&((null===o||h<o)&&(o=h),(null==n||h>n)&&(n=h));void 0!==r.baseValue&&(o=Math.min(r.baseValue,o),n=Math.max(r.baseValue,n))}return{min:o,max:n}},o.prototype.merge=function(t){var e,o,n,s,r;if(this._shareread)return TradingView.logDebugChart("PlotList.merge: shared collection modification attempt"),[];for(e=[],e.earliestRow=null,o=0;o<t.length;++o){for(n=t[o],s=Math.floor(n.index/i.CHUNK_SIZE),r=0;r<this._columns.length;r++)this._plotCaches[r]&&delete this._plotCaches[r][s];(null===e.earliestRow||e.earliestRow>n)&&(e.earliestRow=n),this.add(n.index,n.value)?e.push({insert:n}):e.push({update:n})}return e},o.prototype.addTail=function(t,e){var i,o,n=0;for(e&&this._end-this._start>0&&(n=1,this._items[this._end-this._start-1].value=t[0].value),i=n;i<t.length;++i)o=t[i],this.add(parseInt(this.last(),10)+1,o.value);this._itemsSearchCache={}},o.prototype._createPair=function(t,e){var i=new Number(t);return i.value=e,i},o.prototype._valueAt=function(t){return this._items[t].value},o.prototype._length=function(t){return this._items.length},o.prototype._indexAt=function(t){return this._items[t].valueOf()},o.prototype._search=function(t,e){var i=this._bsearch(t);return i==-1&&e?e<0?(i=this._lowerbound(t),i>this._start&&(i-=1),i!=this._end&&this._indexAt(i)<t?i:-1):(i=this._upperbound(t),i!=this._end&&t<this._indexAt(i)?i:-1):i},o.prototype._bsearch=function(t){var e=this._lowerbound(t);return e==this._end||t<this._items[e]?-1:e},o.prototype._lowerbound=function(t){for(var e,i,o=this._start,n=this._end,s=n-o;0<s;)e=s>>1,i=o+e,this._items[i]<t?(o=i+1,s-=e+1):s=e;return o},o.prototype._upperbound=function(t){for(var e,i,o=this._start,n=this._end,s=n-o;0<s;)e=s>>1,i=o+e,t<this._items[i]?s=e:(o=i+1,s-=e+1);return o},o.prototype.state=function(){var t,e={};e.columns=this._columns,e.start=this._start,e.end=this._end,e.shareread=this._shareread,e.data=[];for(t in this._items)e.data.push({index:new Number(this._items[t]),value:this._items[t].value});return e},o.prototype.restoreState=function(t){var e,i;if(!t)return void this.clear();for(this._columns=t.columns,this._start=t.start,this._end=t.end,this._shareread=t.shareread,this._items=[],this._itemsSearchCache={},e=0;e<t.data.length;e++)i=new Number(t.data[e].index),i.value=t.data[e].value,this._items.push(i)},o.prototype.firstTimeIndex=function(){return this._indexAt(this._start)},o.prototype.lastTimeIndex=function(){return this._indexAt(this._end-1)},t.exports=o},function(t,e){"use strict";function i(t){this._invalidationLevel=t?t:i.UPDATE_CURSOR_ONLY,this._invalidatedPanes={}}i.UPDATE_CURSOR_ONLY=1,i.LIGHT_UPDATE=2,i.FULL_UPDATE=3,i.prototype.invalidatePane=function(t,e){this._invalidatedPanes[t]?this._invalidatedPanes[t]=Math.max(this._invalidatedPanes[t],e):this._invalidatedPanes[t]=e},i.prototype.invalidateAll=function(t){this._invalidationLevel=Math.max(this._invalidationLevel,t)},i.prototype.fullInvalidation=function(){return this._invalidationLevel},i.prototype.invalidateForPane=function(t){return this._invalidatedPanes[t]?Math.max(this._invalidatedPanes[t],this._invalidationLevel):this._invalidationLevel},i.prototype.merge=function(t){this.force=this.force||t.force,this._invalidationLevel=Math.max(this._invalidationLevel,t._invalidationLevel);for(var e in t._invalidatedPanes)this._invalidatedPanes[e]?this._invalidatedPanes[e]=Math.max(this._invalidatedPanes[e],t._invalidatedPanes[e]):this._invalidatedPanes[e]=t._invalidatedPanes[e]},i.prototype.exclude=function(t){this._invalidationLevel<=t&&(this._invalidationLevel=0);for(var e in this._invalidatedPanes)this._invalidatedPanes[e]<=t&&(this._invalidatedPanes[e]=0)},i.prototype.start=function(){this._timeStart=window.performance.now()},i.prototype.end=function(){this._timeEnd=window.performance.now()},t.exports=i},function(t,e,i){(function(t){function e(t){TradingView.merge(this,{palettes:{},inputs:[],plots:[],graphics:{},defaults:{}}),TradingView.merge(this,t);var i=t.fullId||t.id;TradingView.merge(this,e.parseIdString(i)),this.name=this.id}e.CURRENT_METAINFO_FORMAT_VERSION=40,e.FilledArea={},e.FilledArea.TYPE_PLOTS="plot_plot",e.FilledArea.TYPE_HLINES="hline_hline",e.versionOf=function(t){var i="_metainfoVersion"in t&&isNumber(t._metainfoVersion)?t._metainfoVersion:0;return i<0&&TradingView.logError("Metainfo format version cannot be negative: "+i),i>e.CURRENT_METAINFO_FORMAT_VERSION&&TradingView.logWarn("Client doesn't support this version of metainfo format: "+i),i},e.parseIdString=function(t){var e,i,o,n,s={};if(t.indexOf("@")==-1)s.shortId=t,s.packageId="tv-basicstudies",s.id=t+"@"+s.packageId,s.version=1;else if(e=t.split("@"),s.shortId=e[0],i=e[1].split("-"),3===i.length)s.packageId=i.slice(0,2).join("-"),s.id=s.shortId+"@"+s.packageId,s.version=i[2];else if(1===i.length&&"decisionbar"===i[0])s.packageId="les-"+i[0],s.id=s.shortId+"@"+s.packageId,s.version=1;else{if(1!==i.length)throw Error("unexpected study id:"+t);s.packageId="tv-"+i[0],s.id=s.shortId+"@"+s.packageId,s.version=1}return s.fullId=s.id+"-"+s.version,"tv-scripting"===s.packageId?(o=s.shortId,0===o.indexOf("Script$")||0===o.indexOf("StrategyScript$")?(n=o.indexOf("_"),n>=0?s.productId=o.substring(0,n):s.productId=s.packageId):s.productId=s.packageId):s.productId=s.packageId,s},e.getPackageName=function(t){return(/^[^@]+@([^-]+-[^-]+)/.exec(t||"")||[0,"tv-basicstudies"])[1]},e.cutFullId=function(t){return t.replace(/(@[^-]+-[^-]+).*$/,"$1")},e.cutDollarHash=function(t){var e,i,o=t.indexOf("$"),n=t.indexOf("@");return o==-1?t:(e=t.substr(0,o),i=n>=0?t.substr(n):"",e+i)},e.prototype.parseValue=function(t,e){return"bool"===t?TradingView.parseBool(e):e},e.prototype.defaultInputs=function(){var t,e=[];for(t=0;t<this.inputs.length;t++)e.push(this.inputs[t].defval);return e},e.prototype.state=function(){var t,e={};for(t in this)this.hasOwnProperty(t)&&(e[t]=this[t],"id"===t&&(e[t]+="-"+this.version));return e},e.findStudyMetaInfoByDescription=function(t,e){if(t){for(var i=0;i<t.length;++i)if(t[i].description.toLowerCase()===e.toLowerCase())return t[i];throw Error("unexpected study id:"+e)}throw Error("There is no studies metainfo")},e.findStudyMetaInfo=function(t,e){if(t){for(var i=0;i<t.length;++i)if(t[i].id===e)return t[i];throw Error("unexpected study id:"+e)}throw Error("There is no studies metainfo")},e.removeStudyMetaInfo=function(t,e){if(t){for(var i=0;i<t.length;++i)if(t[i].id===e)return t.splice(i,1),defaults.remove("study_"+e),!0;return!1}throw Error("There are no studies metainfo")},e.addStudyMetaInfo=function(t,i){var o,n,s;return 0===i.id.indexOf("ElliottWave@tv-basicstudies-")?null:(o=new e(i),n=e.removeStudyMetaInfo(t,o.id),n&&TradingView.logWarn("Study with id="+o.id+" already exists in the model, this could be a sign of a problem!"),t.push(o),o.defaults&&(s=TradingView.clone(o.defaults),s.precision="default",defaults.create("study_"+o.fullId,s)),o)},e.addOrReplaceStudyMetaInfo=function(t,i){var o,n=new e(i);return e.removeStudyMetaInfo(t,n.id),t.push(n),n.defaults&&(o=TradingView.clone(n.defaults),o.precision="default",defaults.createOrReplace("study_"+n.fullId,o)),n},e.setStudyHidden=function(t,e){if(!t)throw Error("There is no studies metainfo");for(var i=0;i<t.length;++i)if(t[i].id===e)return t[i].is_hidden_study=!0,!0;return!1},e.createMetaInfoStub=function(t,e){var i=(t.scriptIdPart||TVScript.createScriptIdPart(),TVScript.createScriptStudyId(t.scriptIdPart,e)),o={isTVScriptStubToCompile:!0,id:i,scriptIdPart:t.scriptIdPart,description:t.scriptName,TVScriptSourceCode:t.scriptSource,version:e};return t.isTVScriptStrategy===!0&&(o.isTVScriptStrategy=!0),o},e.isScriptStrategy=function(t){if(t.isTVScriptStrategy===!0)return!0;var e=t.TVScriptSourceCode||t.scriptSource;return!!e&&TVScript.isStrategy(e)},e.replaceWithFullStudyMetaInfoAsync=function(t,e){var i=$.Deferred();return e.isTVScriptStubToCompile||i.resolve(e),i.promise()},e.getOrderedInputIds=function(t){var e,i,o=[],n=t.inputs;for(e=0;e<n.length;++e)i=n[e],o.push(i.id);return o},TradingView.StudyMetaInfo=e,void 0!==t&&t&&t.exports&&(t.exports=e)}).call(e,i(2)(t))},function(t,e,i){(function(e,o){"use strict";var n=i(114),s=i(273),r=i(115),a=i(67).LineDataSource,l=i(136).StudyLineDataSource,h=i(195),c=i(230),d=i(141),p=d.Study,u=d.prepareStudyPropsStateForLoadChart,_=d.prepareStudyPropertiesForLoadChart,f=d.createStudy,g=i(77),m=i(73).DefaultProperty,v=i(107),y=i(125).LineToolParallelChannel,w=i(202),b=i(236),S=i(130).LineToolElliott,T=i(72).PriceDataSource,C=i(111),x=i(106);n.version=2,n.prototype.state=function(t,e){var i,o,s,r={};for(r.panes=[],i=0;i<this.panes().length;i++)r.panes.push(this.panes()[i].state(!0,t,!1,e));return r.timeScale=this.m_timeScale.state(t),o=null,s=this.properties(),r.chartProperties={paneProperties:s.paneProperties.state(),scalesProperties:s.scalesProperties.state(),publishedChartsTimelineProperties:o?o.state(t):void 0,chartEventsSourceProperties:s.chartEventsSourceProperties.state()},s.chartEventsSourceProperties&&(r.chartProperties.chartEventsSourceProperties=s.chartEventsSourceProperties.state()),r.version=n.version,r.timezone=this.timezone(),r},n.prototype.chartPropertiesTransparencyMigrate=function(t){var e,i,o;t.chartProperties.paneProperties.crossHairProperties&&(o=t.chartProperties.paneProperties.crossHairProperties,TradingView.isHexColor(o.color)&&(i=o.transparency/100,e=TradingView.hexRgbDecomp(o.color),o.color=TradingView.rgbaComp(e,i))),t.chartProperties.paneProperties.dataWindowProperties&&(o=t.chartProperties.paneProperties.dataWindowProperties,TradingView.isHexColor(o.color)&&(i=o.transparency/100,e=TradingView.hexRgbDecomp(o.color),o.color=TradingView.rgbaComp(e,i)))},n.prototype.restoreState=function(t,e){var i,o,n,s,r,l,h,c,d={};if(!t.panes)return void TradingView.logDebugChart("ChartModel.restoreState: invalid state");if(!Array.isArray(t.panes))return void TradingView.logDebugChart("ChartModel.restoreState: invalid state");if(t.panes.length<1)return void TradingView.logDebugChart("ChartModel.restoreState: invalid state");t.chartProperties&&!t.chartProperties.timezone&&(t.chartProperties.timezone=t.timezone),t.chartProperties&&(i=TradingView.factoryDefaults("chartproperties").scalesProperties,TradingView.merge(i,t.chartProperties.scalesProperties),!("showLastValue"in i)||"showSeriesLastValue"in i||"showStudyLastValue"in i||(i.showSeriesLastValueProperty=i.showLastValue,i.showStudyLastValueProperty=i.showLastValue),"showSeriesLastValue"in i&&(d.showSeriesLastValueProperty=!0),"showStudyLastValue"in i&&(d.showStudyLastValueProperty=!0),t.chartProperties.paneProperties.vertGridProperties=t.chartProperties.paneProperties.vertGridProperties||TradingView.clone(t.chartProperties.paneProperties.gridProperties),t.chartProperties.paneProperties.horzGridProperties=t.chartProperties.paneProperties.horzGridProperties||TradingView.clone(t.chartProperties.paneProperties.gridProperties),this._properties.paneProperties.merge(t.chartProperties.paneProperties),this._properties.scalesProperties.merge(i),t.chartProperties.timezone&&this._properties.timezone.setValue(t.chartProperties.timezone),t.chartProperties.chartEventsSourceProperties&&this._properties.chartEventsSourceProperties&&this._properties.chartEventsSourceProperties.merge(t.chartProperties.chartEventsSourceProperties),this.m_timeScale.restoreState(t.timeScale,e)),t.timeScale&&this.m_timeScale.restoreState(t.timeScale,e),o=t.panes,this.panes()[0].restoreState(o[0],e,t.version,d);for(n=1;n<t.panes.length;n++)s=this.panes()[n]||this.createPane(),s.restoreState(t.panes[n],e,t.version,d);for(this._invalidateBarColorerCaches(),r=this.dataSources(),l=0,n=0;n<r.length;n++)h=r[n],TradingView.isInherited(h.constructor,a)&&(l++,h.calcIsActualSymbol());return this._version=t.version,this.timeScale().recalcLockedScale(),this.recalculateAllPanes(),this.invalidate(new x(x.FULL_UPDATE)),window.saver&&window.is_authenticated&&this.isJustClonedChart()&&this.mainSeries().onSymbolResolved().subscribe(this,function(){window.saver.saveChartSilently()},!0),c=TVLocalStorage.getItem("linetools_limit")||1e3,window.is_authenticated&&window.user&&window.user.settings&&(c=window.user.settings.linetools_limit||c),l>c?{lines_limit_exceeded:!0,line_tools_count:l}:{}},n.prototype.restoreAxisState=function(t){var e,i,o;if(!t.panes)return void TradingView.logDebugChart("ChartModel.restoreAxisState: invalid state");if(!Array.isArray(t.panes))return void TradingView.logDebugChart("ChartModel.restoreAxisState: invalid state");if(t.panes.length<1)return void TradingView.logDebugChart("ChartModel.restoreAxisState: invalid state");for(this.m_timeScale.restoreState(t.timeScale,!1,!0),e=t.panes,i=0;i<t.panes.length;i++)o=this.panes()[i],o.m_leftPriceScale.restoreState(t.panes[i].leftAxisState),o.m_rightPriceScale.restoreState(t.panes[i].rightAxisState);this.recalculateAllPanes(),this.invalidate(new x(x.FULL_UPDATE))},C.prototype.state=function(t,e,i,o){function n(t){return i&&!t.isSavedInStudyTemplates()||!t.state||!t.state()||!t.isSavedInChart(e)||o&&t.isActualSymbol&&!t.isActualSymbol()}var s,r,a={};if(t)for(a.sources=[],s=0;s<this.m_dataSources.length;s++)n(this.m_dataSources[s])||a.sources.push(this.m_dataSources[s].state(e));for(a.leftAxisState=this.m_leftPriceScale.state(),a.leftAxisSources=[],s=0;s<this.m_leftPriceScale.dataSources().length;s++)n(this.m_leftPriceScale.dataSources()[s])||a.leftAxisSources.push(this.m_leftPriceScale.dataSources()[s].id());
for(a.rightAxisState=this.m_rightPriceScale.state(),a.rightAxisSources=[],s=0;s<this.m_rightPriceScale.dataSources().length;s++)n(this.m_rightPriceScale.dataSources()[s])||a.rightAxisSources.push(this.m_rightPriceScale.dataSources()[s].id());for(a.overlayPriceScales={},s=0;s<this.m_dataSources.length;s++)r=this.m_dataSources[s],this.isOverlay(r)&&r.isSavedInChart(e)&&(a.overlayPriceScales[r.id()]=r.priceScale().state());return a.stretchFactor=this._stretchFactor,this.m_mainDataSource&&(a.mainSourceId=this.m_mainDataSource.id()),a},C.prototype.sourceById=function(t){for(var e=0;e<this.m_dataSources.length;e++)if(this.m_dataSources[e].id()===t)return this.m_dataSources[e];return null},C.prototype.isESDStudy=function(t){return"Script$TV_EARNINGS@tv-scripting"==t.id||"Script$TV_DIVIDENDS@tv-scripting"==t.id||"Script$TV_SPLITS@tv-scripting"==t.id||"ESD$TV_EARNINGS@tv-scripting"==t.id||"ESD$TV_DIVIDENDS@tv-scripting"==t.id||"ESD$TV_SPLITS@tv-scripting"==t.id},C.prototype.restoreState=function(t,i,o,n){var s,r,l,h,c,d,u,_,f,m,v,y;if(n=n||{},!t.leftAxisState||!t.rightAxisState)throw Error("invalid state");if(!t.leftAxisSources||!t.rightAxisSources)throw Error("invalid state");if(t.stretchFactor&&(this._stretchFactor=t.stretchFactor),s={},t.sources)for(r=this.m_dataSources.indexOf(this._model.mainSeries())!==-1,this.clearSeries(),this.m_mainDataSource=null,r&&this.m_dataSources.push(this._model.mainSeries()),l=0;l<t.sources.length;l++)h=t.sources[l],Math.abs(h.zorder)>1e200&&(c=-1,TradingView.logWarn("Datasource zorder has bad value: "+h.zorder+" Resetting it to "+c),h.zorder=c),d=h.id,s[d]=h.ownerSource,u=h.type,u&&("MainSeries"===u?this._restoreMainSeries(h,i,r,n):u.toLowerCase().startsWith("study")?this._restoreStudy(h,i,n):TradingView.isInherited(TradingView[u],a)?this._restoreLineTool(h,i):TradingView[u]&&TradingView[u].createFromState&&this._restoreSpecialSource(h,i));for(this.m_leftPriceScale.dataSources().splice(0,1/0),this.m_leftPriceScale._hasSeries=!1,_=defaults("chartproperties").paneProperties.leftAxisProperties,TradingView.merge(_,t.leftAxisState),this.m_leftPriceScale.restoreState(_),l=0;l<t.leftAxisSources.length;l++)f=this.dataSourceForId(t.leftAxisSources[l]),f&&(void 0!==_.m_showSymbolLabels&&f instanceof g&&this.model().properties().scalesProperties.showSymbolLabels.setValue(_.m_showSymbolLabels),f.setPriceScale(this.m_leftPriceScale),this.m_leftPriceScale.addDataSource(f));for(this.m_rightPriceScale.dataSources().splice(0,1/0),this.m_rightPriceScale._hasSeries=!1,_=defaults("chartproperties").paneProperties.rightAxisProperties,TradingView.merge(_,t.rightAxisState),this.m_rightPriceScale.restoreState(_),l=0;l<t.rightAxisSources.length;l++)f=this.dataSourceForId(t.rightAxisSources[l]),f&&(void 0!==_.m_showSymbolLabels&&f instanceof g&&this.model().properties().scalesProperties.showSymbolLabels.setValue(_.m_showSymbolLabels),f.setPriceScale(this.m_rightPriceScale),this.m_rightPriceScale.addDataSource(f));for(l=0;l<this.m_dataSources.length;l++)f=this.m_dataSources[l],this.m_rightPriceScale.dataSources().indexOf(f)===-1&&this.m_leftPriceScale.dataSources().indexOf(f)===-1?(f._isOverlay=!0,m=new e(this._properties.overlayPropreties,this._model.properties().scalesProperties),m.setHeight(this.m_height),m.setTopMargin(this.m_rightPriceScale.topMargin()),m.setBottomMargin(this.m_rightPriceScale.bottomMargin()),m.addDataSource(f),t.overlayPriceScales&&t.overlayPriceScales[f.id()]&&(_=t.overlayPriceScales[f.id()],_.m_isAutoScale=!0,_.m_isLog=!1,_.m_isPercentage=!1,m.restoreState(_)),f.setPriceScale(m)):f._isOverlay=!1;for(d in s)v=s[d],v&&(f=this.sourceById(d),f&&this.sourceById(d).setOwnerSource(this.sourceById(v)));if(t.mainSourceId&&!this.m_mainDataSource&&(this.m_mainDataSource=this.dataSourceForId(t.mainSourceId)),!this.m_mainDataSource)for(l=0;l<this.m_dataSources.length;l++)if(f=this.m_dataSources[l],TradingView.isInherited(f.constructor,T)){this.m_mainDataSource=f;break}for(l=0;l<this.m_dataSources.length;l++)f=this.m_dataSources[l],TradingView.isInherited(f.constructor,a)?(f.ownerSource()||f.setOwnerSource(this.mainDataSource()),f.isFixed()&&f.restoreFixedPoints(),1==o&&f.priceScale().isPercent()&&!f.isFixed()&&f.correctPricesToPercents(),f.fixAfterRestorePriceAxis&&f.fixAfterRestorePriceAxis()):TradingView.isInherited(f.constructor,p)&&(y=f.properties(),y.linkedToSeries&&y.linkedToSeries.value()&&(f.ownerSource()||f.setOwnerSource(this.model().mainSeries())));this._updateMargins(),this._cachedOrderedSoruces=null,this._cachedHitTestSources=null},C.prototype._restoreMainSeries=function(t,e,i,o){var n,s,r,a,l=t.id,h=t.state,c=t.zorder;h&&["candleStyle","hollowCandleStyle","haStyle"].forEach(function(t){h[t]&&(h[t].wickUpColor=h[t].wickUpColor||h[t].wickColor,h[t].wickDownColor=h[t].wickDownColor||h[t].wickColor)}),i||(n=this._model.paneForSource(this._model.mainSeries()),n.removeDataSource(this._model.mainSeries()),this.m_dataSources.push(this._model.mainSeries())),this.m_mainDataSource=this._model.mainSeries(),s=h&&h.style?h.style:void 0,r=s==g.STYLE_PNF&&h.pnfStyle.lockScale,h&&!h.lockScale&&(h.lockScale=r),s==g.STYLE_PNF&&"ATR"==this._model.mainSeries().properties().pnfStyle.inputs.style.value()?this._model.mainSeries().properties().pnfStyle.inputs.style._value="Traditional":s==g.STYLE_RENKO&&"ATR"==this._model.mainSeries().properties().renkoStyle.inputs.style.value()&&(this._model.mainSeries().properties().renkoStyle.inputs.style._value="Traditional"),h&&!h.hasOwnProperty("showSessions")&&(h.showSessions=!1),h&&!h.extendedHours&&(h.extendedHours=!1),h&&e&&(h.showCountdown=!1),h&&(e&&!("showSeriesLastValueProperty"in o)&&"showLastValue"in h&&this._model.properties().scalesProperties.showSeriesLastValue.setValue(h.showLastValue),delete h.showLastValue),this._model.mainSeries().properties().merge(h),this._model.mainSeries()._prevChartStyle=this._model.mainSeries().properties().style.value(),this._model.mainSeries().createPaneView(),this._model.mainSeries().setId(l),e&&this._model.mainSeries().restoreData(t.bars,t.nsBars,t.symbolInfo,t.rtPrice,t.boxSize,t.reversalAmount),void 0!==c&&this._model.mainSeries().setZorder(c),this._model.mainSeries().properties().extendedHours.listeners().fire(this._model.mainSeries().properties().extendedHours),a=this._model.mainSeries().symbolInfo(),a&&this._model.mainSeries().onSymbolResolved().fire(this._model.mainSeries().symbolInfo())},C.prototype._restoreStudy=function(t,e,i){var o,n,r,a,l,h,c,d;return e&&void 0===t.data&&void 0===t.nonSeriesData&&void 0===t.indexes?void TradingView.logError("Cannot restore (skipping) study without data "+t.id+", "+t.metaInfo.id):(o=t.id,n=t.state,r=t.zorder,a=TradingView.clone(t.metaInfo),$.extend(a,v.parseIdString(a.id)),this.isESDStudy(a)&&!e||!TradingView.isFeatureEnabled("backtesting")&&a.isTVScriptStrategy&&!e?void 0:(l=n,h=this._model.studyVersioning(),c=h.patchPropsStateAndMetaInfo(l,a,{oldShowStudyLastValueProperty:e&&!i.showStudyLastValueProperty}),l=c.propsState,a=c.metaInfo,d=new s(this._model,t,a.shortDescription),d.setId(o),h.updateMetaInfoAsync(a,e).done(function(i){var n,s,r,c;d.setStatus(""),n=i||a,s=_(a,i,l,null,h),r=f(this._model,s,this._model.mainSeries(),n),r.setId(o),e&&(c=h.patchStudyData(a,t.data,t.nonSeriesData,t.indexes),r.restoreData(c.data,c.nsData,c.indexes)),this._model.replaceStudyStub(d,r)||(d=r)}.bind(this)).fail(function(t){TradingView.logError(t),d.setStatus("error: "+t)}),this.m_dataSources.push(d),delete this._cachedOrderedSoruces,delete this._cachedHitTestSources,void 0!==r&&d.setZorder(r),d))},C.prototype._restoreLineTool=function(t,e,i){var n,d,p,_,f,g,T,C,x,P,L,k,E,I,A,V,M,D,B,O,R,z,N;for(i=void 0===i||i,S.migrateState(t),n=t.type,d=t.id,p=t.state,_=i?t.zorder:this._newZOrderForLineTool(),f=TradingView[n],assert(TradingView.isInherited(f,a),"invalid data source type:"+n+" (expected to be a Line Tool)"),g=t.points,T=!1,C=0;C<g.length;C++)if(Math.abs(g[C].offset)>1e4){T=!0;break}if(!T){if(x=null,P=TradingView.factoryDefaults("linetool"),TradingView.isInherited(f,l)){if(x=this._model.studyVersioning(),t=x.patchPointsBasedStudyState(t),TradingView.merge(P,p),E=t.metaInfo,$.extend(E,v.parseIdString(E.fullId)),!e&&(I=E.productId,!pro.hasPackage(I)))return A=new s(this._model,t,E.shortDescription),A.setId(d),this.m_dataSources.push(A),void 0!==_&&A.setZorder(_),A.setStatus($.t("not authorized")),void A.setFailed(!0);V=x.updateMetaInfo(E),M=V||E,P=u(M,E,P,null,x),e?TradingView.merge(P,{fixedSize:!1}):TradingView.merge(P,{fixedSize:!0}),k=new m("study_"+M.id,P,(!0)),L=r.create(n,this._model,k,M,this.mainDataSource())}else D=n.toLowerCase(),TradingView.merge(P,TradingView.factoryDefaults(D)),k=TradingView[n].prototype.createPropertiesObject(D,P),k.merge(p),e?k.merge({fixedSize:!1}):k.merge({fixedSize:!0}),L=new TradingView[n](this._model,k,(!0));return L.setId(d),L.linkKey=t.linkKey,B=t.alertId,B&&"function"==typeof L.setAlert&&o.enabled("alerts")&&!this._model.readOnly()&&!this._model.isJustClonedChart()&&L.setAlert(B,{noChartSave:!0}),O=t.indexes?t.indexes:[],O=O.slice(0,t.points.length),L.isFixed()?L.restorePositionPercents(t.positionPercents):L.restorePoints(t.points,O,e),L instanceof h||L instanceof c||L instanceof w||L instanceof b||L instanceof y?L.restoreData(t):e&&L.restoreData&&(R=t,x&&(R.graphics=x.patchPointsBasedStudyData(R.metaInfo,R.graphics)),L.restoreData(R)),z=null==t.version?1:t.version,N=null==L.version?1:L.version,z!=N&&"function"==typeof L.migrateVersion&&L.migrateVersion(z,N,{pane:this,model:this._model,properties:k}),this.m_dataSources.push(L),delete this._cachedOrderedSoruces,delete this._cachedHitTestSources,void 0!==_&&L.setZorder(_),L}},C.prototype._restoreSpecialSource=function(t,e){var i,o=TradingView[t.type];o&&o.createFromState&&(i=o.createFromState(t,e,this._model),i&&(i.setId(t.id),this.m_dataSources.push(i),i.zorder&&i.setZorder(i.zorder)))},n.prototype.studyTemplate=function(t){var e,i,o,s,r={};for(r.panes=[],e=0;e<this.panes().length;e++)i=!0,o=!1,s=!0,r.panes.push(this.panes()[e].state(i,o,s));return t&&(r.interval=this.mainSeries().interval()),r.version=n.version,r},n.prototype.restoreStudyTemplate=function(t,e){this._undoModel.studyLoadTemplate(this._undoModel,this.studyTemplate(),t,e)},n.prototype.theme=function(){var t={};return t.chartProperties={paneProperties:this.properties().paneProperties.state(),scalesProperties:this.properties().scalesProperties.state(),symbolWatermarkProperties:this.properties().symbolWatermarkProperties.state()},t.mainSourceProperties=this.mainSeries().state().state,delete t.mainSourceProperties.symbol,delete t.mainSourceProperties.interval,delete t.chartProperties.paneProperties.topMargin,delete t.chartProperties.paneProperties.bottomMargin,t.version=n.version,t},n.prototype.restoreTheme=function(t){var e,i,o={hollowCandle:{related:"candle"}};for(e in o)t.mainSourceProperties[e+"Style"]||(i=t.mainSourceProperties[o[e].related+"Style"],t.mainSourceProperties[e+"Style"]=TradingView.clone(i));this._undoModel.chartLoadTheme(this,t)},t.exports=n}).call(e,i(109),i(1))},function(t,e,i){(function(e,o,n){"use strict";function s(t,i){if(this.m_base=t,this.m_integralDividers=i,this.m_fractionalDividers=[],e.isBaseDecimal(this.m_base))this.m_fractionalDividers=[2,2.5,2];else for(var o=this.m_base;1!==o;){if(o%2===0)this.m_fractionalDividers.push(2),o/=2;else{if(o%5!==0)throw new RangeError("unexpected base");this.m_fractionalDividers.push(2),this.m_fractionalDividers.push(2.5),o/=5}if(this.m_fractionalDividers.length>100)throw Error("something wrong with base")}}function r(t,e,i){this.m_marks=[],this.m_base=e,this.m_priceScale=t,this._formatter=i,i&&(this._cache=new h(function(t){return i.format(t)})),this._currentFormatBase=0}function a(t){for(var e=1;t*e!==Math.round(t*e);)e*=10;return e}function l(t,e){function i(){var t,e,i=s.m_dataSources;for(t=0;t<i.length;t++)e=i[t],e.priceScaleChanged&&e.priceScaleChanged.fire(s)}this._properties=t,this._scalesProperties=e,this.m_height=0,this.m_priceRange=null,this.m_dataSources=[],this.m_topMargin=0,this.m_bottomMargin=0,this._studyTopMargin=0,this._studyBottomMargin=0,this.m_scrollStartPoint=null,this.m_scaleStartPoint=null,this.m_priceRangeSnapshot=null,this._invalidatedForRange={isValid:!0},this.onMarksChanged=new o,this.m_markBuilder=new r(this,100,new _(100)),this._properties.percentage.listeners().subscribe(this,l.prototype.updateFormatter);var s=this;this._properties.log.listeners().subscribe(null,function(t){if(s.m_priceRange){var e=s.m_priceRange;t.value()?s.m_priceRange=new n(s._toLog(e.minValue()),s._toLog(e.maxValue())):s.m_priceRange=new n(s._fromLog(e.minValue()),s._fromLog(e.maxValue()))}}),this._properties.percentage.listeners().subscribe(null,function(){s._properties.autoScale.setValue(!0)}),this._properties.percentage.listeners().subscribe(null,function(){var t,e,i;s._properties.autoScaleDisabled.setValue(s._properties.percentage.value()),t=s.priceRange(),!s.mainSource()||s.mainSource().model().timeScale().isEmpty()||s.mainSource().data().isEmpty()||s.mainSource()instanceof p&&!s.mainSource().properties().lockScale.value()||!t||(e=s.mainSource().model().timeScale().visibleBars(),i=s.mainSource().data().search(e.firstBar(),TradingView.SEARCH_NEAREST_RIGHT).value[TradingView.CLOSE_PLOT],null!=t&&void 0!==i&&(s._properties.percentage.value()?s.setPriceRange(t.convertToPercents(i)):s.setPriceRange(t.convertFromPercents(i))))}),this._sourcesForAutoscale=null,this._sourcesToUpdateViews=null,this._hasSeries=!1,this._properties.percentage.listeners().subscribe(null,i),this._properties.log.listeners().subscribe(null,i),this._properties.listeners().subscribe(null,function(){s.mainSource()&&s.mainSource().model()&&s.mainSource().model().fullUpdate()})}var h=i(110),c=i(67).LineDataSource,d=i(72).PriceDataSource,p=i(77),u=i(75),_=u.PriceFormatter,f=u.PercentageFormatter;s.prototype.TICK_SPAN_EPSILON=1e-9,s.prototype.tickSpan=function(t,i,o){var n,s=0===this.m_base?0:1/this.m_base,r=this.TICK_SPAN_EPSILON,a=Math.pow(10,Math.max(0,Math.ceil(e.log10(t-i)))),l=0;for(l=0,n=this.m_integralDividers[0];a>s+r&&e.greaterOrEqual(a,s,r)&&e.greaterOrEqual(a,o*n,r)&&e.greaterOrEqual(a,1,r);++l,n=this.m_integralDividers[l%this.m_integralDividers.length])a/=n;if(a<=s+r&&(a=s),a=Math.max(1,a),this.m_fractionalDividers.length>0&&e.equal(a,1,r))for(l=0,n=this.m_fractionalDividers[0];a>s+r&&e.greaterOrEqual(a,o*n,r);++l,n=this.m_fractionalDividers[l%this.m_fractionalDividers.length])a/=n;return a},r.prototype.TICK_DENSITY=2.5,r.prototype.base=function(){return this.m_base},r.prototype.setBase=function(t){if(t<0)throw new RangeError("base < 0");this.m_base=t},r.prototype.fontHeight=function(){return this.m_priceScale.fontSize()},r.prototype.tickSpan=function(t,i){var o,n,r,a,l,h,c,d;if(t<i)throw new RangeError("high < low");return o=this.m_priceScale.height(),n=this.tickMarkHeight(),r=(t-i)*n/o,a=new s(this.m_base,[2,2.5,2]),l=new s(this.m_base,[2,2,2.5]),h=new s(this.m_base,[2.5,2,2]),c=[],c.push(a.tickSpan(t,i,r)),c.push(l.tickSpan(t,i,r)),c.push(h.tickSpan(t,i,r)),d=e.min(c)},r.prototype.tickMarkHeight=function(){return Math.ceil(this.fontHeight()*this.TICK_DENSITY)},r.prototype.rebuildTickMarks=function(){var t,e,i,o,n,s,r,l,c,d,p,u,f;if(null===this.m_priceScale)throw new TypeError("scale is null");if(this.m_priceScale.isEmpty())return void(this.m_marks=[]);if(t=this.m_priceScale.height(),e=this.m_priceScale.coordinateToPrice(t-1),i=this.m_priceScale.coordinateToPrice(0),o=i>=e?1:-1,n=Math.max(i,e),s=Math.min(i,e),i=n,e=s,i!=e)for(r=this.tickSpan(i,e),l=i%r,l+=l<0?r:0,this.m_marks=[],this._formatter||(c=a(r),this._cache&&this._currentFormatBase==c||(d=new _(c),this._cache=new h(function(t){return d.format(t)}))),p=null,u=i-l;u>e;u-=r)f=this.m_priceScale.priceToCoordinate(u),null!==p&&Math.abs(f-p)<this.tickMarkHeight()||(this.m_marks.push({coord:f,label:this._cache.format(u)}),p=f,this.m_priceScale.isLog()&&(r=this.tickSpan(u*o,e)))},r.prototype.marks=function(){return this.m_marks},l.prototype.isLog=function(){return this._properties.log.value()},l.prototype.isPercent=function(){return this._properties.percentage.value()},l.prototype.properties=function(){return this._properties},l.prototype.fontSize=function(){return this._scalesProperties.fontSize.value()},l.prototype.height=function(){return this.m_height},l.prototype.setHeight=function(t){var e=this.m_height;this.m_height=t,this._internalHeightCache=void 0,this._marksCache=null,e!=t&&this.mainSource()instanceof p&&this.mainSource().isLockScale()&&this.mainSource().model().timeScale().recalcLockedScale()},l.prototype.topMargin=function(){return Math.max(this.m_topMargin,this._studyTopMargin)},l.prototype.setTopMargin=function(t){if(!isNumber(t))throw new TypeError("invalid margin");if(t<0||t>30)throw new RangeError("invalid margin");this.m_topMargin=t,this._internalHeightCache=void 0,this._marksCache=null},l.prototype.bottomMargin=function(){return Math.max(this.m_bottomMargin,this._studyBottomMargin)},l.prototype.setBottomMargin=function(t){if(!isNumber(t))throw new TypeError("invalid margin");if(t<0||t>30)throw new RangeError("invalid margin");this.m_bottomMargin=t,this._internalHeightCache=void 0,this._marksCache=null},l.prototype.internalHeight=function(){if(this._internalHeightCache)return this._internalHeightCache;var t=this.height()*(1-this.topMargin()-this.bottomMargin());return this._internalHeightCache=t,t},l.prototype.priceRange=function(){return this.makeSureItIsValid(),this.m_priceRange},l.prototype.setPriceRange=function(t){if(!t instanceof n)throw new TypeError("incorrect price range");this.m_priceRange&&this.m_priceRange.equals(t)||(this.m_priceRange=t,this._marksCache=null)},l.prototype.isEmpty=function(){return this.makeSureItIsValid(),0===this.m_height||!this.m_priceRange||this.m_priceRange.isEmpty()},l.prototype.invertedCoordinate=function(t){return this.height()-1-t},l._logicalOffset=4,l._coordOffset=1e-4,l.prototype.log10=function(t){return Math.log(t)/Math.log(10)},l.prototype._toLog=function(t){var e,i=Math.abs(t);return i<1e-6?0:(e=this.log10(i+l._coordOffset)+l._logicalOffset,t<0?-e:e)},l.prototype.priceToLogical=function(t){return this.isLog()&&t?this._toLog(t):t},l.prototype._fromLog=function(t){var e,i=Math.abs(t);return i<1e-6?0:(e=Math.pow(10,i-l._logicalOffset)-l._coordOffset,t<0?-e:e)},l.prototype.logicalToPrice=function(t){return this.isLog()?this._fromLog(t):t},l.prototype.priceToCoordinate=function(t,e){var i,o;return this.makeSureItIsValid(),this.isEmpty()?0:(t=this.priceToLogical(t),i=this.bottomMargin()*this.height()+(this.internalHeight()-1)*(t-this.priceRange().minValue())/(this.priceRange().maxValue()-this.priceRange().minValue()),o=this.invertedCoordinate(i),e?o:Math.round(o))},l.prototype.pricesToCoordinates=function(t){this.pricesToCoordinatesEx(t,function(t){return t.y},function(t,e){t.y=e})},l.prototype.pricesToCoordinatesEx=function(t,e,i){var o,n,s,r,a,l,h,c,d;if(this.makeSureItIsValid(),o=this.bottomMargin()*this.height(),n=this.priceRange().minValue(),s=this.priceRange().maxValue(),r=this.internalHeight()-1,a=r/(s-n),this.isLog())for(l=0;l<t.length;l++)h=e(t[l]),i(t[l],this.priceToLogical(h));for(l=0;l<t.length;l++)h=e(t[l]),TradingView.isNaN(h)||void 0===h||null===h||(c=o+a*(h-n),d=this.m_height-1-c,i(t[l],Math.round(d)))},l.prototype.pointsArrayToCoordinates=function(t){var e,i,o,n,s,r,a,l,h;if(this.makeSureItIsValid(),e=this.bottomMargin()*this.height(),i=this.priceRange().minValue(),o=this.priceRange().maxValue(),n=this.internalHeight()-1,s=n/(o-i),this.isLog())for(r=0;r<t.length;r++)t[r].y=this.priceToLogical(t[r].y);for(r=0;r<t.length;r++)a=t[r].y,TradingView.isNaN(a)||void 0===a||null===a||(l=e+s*(a-i),h=this.m_height-1-l,t[r].y=Math.round(h))},l.prototype.pricesArrayToCoordinates=function(t){var e,i,o,n,s,r,a,l,h;if(this.makeSureItIsValid(),e=this.bottomMargin()*this.height(),i=this.priceRange().minValue(),o=this.priceRange().maxValue(),n=this.internalHeight()-1,s=n/(o-i),this.isLog())for(r=0;r<t.length;r++)t[r]=this.priceToLogical(t[r]);for(r=0;r<t.length;r++)a=t[r],void 0!==a&&null!==a&&(l=e+s*(a-i),h=this.m_height-1-l,t[r]=Math.round(h))},l.prototype.barPricesToCoordinates=function(t){var e,i,o,n,s,r,a,l,h,c,d;if(this.makeSureItIsValid(),e=t,i=this.bottomMargin()*this.height(),o=this.priceRange().minValue(),n=this.priceRange().maxValue(),s=this.internalHeight()-1,r=s/(n-o),this.isLog())for(a=0;a<e.length;a++)e[a]&&(e[a].open=this.priceToLogical(e[a].open),e[a].high=this.priceToLogical(e[a].high),e[a].low=this.priceToLogical(e[a].low),e[a].close=this.priceToLogical(e[a].close),e[a].additionalPrice&&(e[a].additionalPrice=this.priceToLogical(e[a].additionalPrice)));for(a=0;a<e.length;a++)l=e[a],l&&(h=l.open,c=i+r*(h-o),d=this.m_height-1-c,l.open=Math.round(d),h=l.high,c=i+r*(h-o),d=this.m_height-1-c,l.high=Math.round(d),h=l.low,c=i+r*(h-o),d=this.m_height-1-c,l.low=Math.round(d),h=l.close,c=i+r*(h-o),d=this.m_height-1-c,l.close=Math.round(d),l.additionalPrice&&(h=l.additionalPrice,c=i+r*(h-o),d=this.m_height-1-c,l.additionalPrice=Math.round(d)))},l.prototype.coordinateToPrice=function(t){var e,i;return this.makeSureItIsValid(),this.isEmpty()?0:(e=this.invertedCoordinate(t),i=this.priceRange().minValue()+(this.priceRange().maxValue()-this.priceRange().minValue())*((e-this.bottomMargin()*this.height())/(this.internalHeight()-1)),this.logicalToPrice(i))},l.prototype.isAutoScale=function(){return this._properties.autoScale.value()&&!(this.mainSource()instanceof p&&this.mainSource().isLockScale())},l.prototype.isPercentage=function(){return this._properties.percentage.value()},l.prototype.dataSources=function(){return this.m_dataSources},l.prototype.orderedSources=function(){var t,e,o,n;if(this._cachedOrderedSoruces)return this._cachedOrderedSoruces;for(t=[],e=0;e<this.m_dataSources.length;e++)o=this.m_dataSources[e],null==o.zorder()&&o.setZorder(e+1),t.push(o);return n=i(111),t=n.sortSources(t),this._cachedOrderedSoruces=t,this._cachedOrderedSoruces},l.prototype.invalidateSourcesCache=function(){this._cachedOrderedSoruces=null},l.prototype.addDataSource=function(t){if(this.m_dataSources.indexOf(t)===-1){TradingView.isInherited(t.constructor,p)&&(this._hasSeries=!0);var e=this;t.properties().visible.listeners().subscribe(null,function(){e._sourcesForAutoscale=null}),this.m_dataSources.push(t),this._mainSource=void 0,this._sourcesForAutoscale=null,this._sourcesToUpdateViews=null,this.updateFormatter(),this.initScaleProperties(),this.invalidateSourcesCache()}},l.prototype.initScaleProperties=function(){var t=this.mainSource()instanceof p&&this.mainSource().properties().lockScale.value();t&&(this.properties().percentage.setValue(!1),this.properties().log.setValue(!1),this.properties().autoScale.setValue(!1)),this.properties().percentageDisabled.setValue(t),this.properties().logDisabled.setValue(t),this.properties().autoScaleDisabled.setValue(this.properties().percentage.value()),this.properties().percentage.value()&&this.properties().log.setValue(!1)},l.prototype.removeDataSource=function(t){var e=this.m_dataSources.indexOf(t);if(e===-1)throw Error("source is not attached to scale");this.m_dataSources.splice(e,1),TradingView.isInherited(t.constructor,p)&&(this._hasSeries=!1),this.mainSource()||this.setAutoScale(!0),this._mainSource=void 0,this._sourcesForAutoscale=null,this._sourcesToUpdateViews=null,this.updateFormatter(),this.invalidateSourcesCache()},l.prototype.setAutoScale=function(t){this._properties.autoScale.setValue(t)},l.prototype.isScaled=function(){return"number"==typeof this.m_scaleStartPoint},l.prototype.startScale=function(t){this.isPercentage()||null===this.m_scaleStartPoint&&null===this.m_priceRangeSnapshot&&(this.isEmpty()||(this.m_scaleStartPoint=this.m_height-t,this.m_priceRangeSnapshot=this.priceRange().clone()))},l.prototype.marks=function(){return this._marksCache?this._marksCache:(this.m_markBuilder.rebuildTickMarks(),this._marksCache=this.m_markBuilder.marks(),this.onMarksChanged.fire(),this._marksCache)},l.prototype.scaleTo=function(t){var e,i;this.isPercentage()||(this._marksCache=null,null!==this.m_scaleStartPoint&&(this.setAutoScale(!1),e=this.m_priceRange.clone(),t=this.m_height-t,t<0&&(t=0),i=(this.m_scaleStartPoint+.2*(this.m_height-1))/(t+.2*(this.m_height-1)),i=Math.max(i,.1),this.m_priceRange=this.m_priceRangeSnapshot.clone(),this.m_priceRange.scaleAroundCenter(i),this.recalcLockedScale(e)))},l.prototype.recalcLockedScale=function(t){var e,i,o,s;if(this.mainSource()instanceof p&&this.mainSource().properties().lockScale.value()){if(e=this.mainSource().model().timeScale(),i=this.mainSource().data().boxSize,void 0===i&&this.mainSource().fixBoxSize(),void 0===i)return;this.properties().percentage.value()&&(o=this.mainSource().data().search(this.mainSource().getRealVisibleRange().m_firstBar).value[TradingView.CLOSE_PLOT],i=n.prototype.convertToPercent.call(null,o+i,o)-n.prototype.convertToPercent.call(null,o,o)),s=this.internalHeight()/this.priceRange().length()*i,s<.5||s>50?this.m_priceRange=t:(e.setBarSpacing(s),e._correctOffset()),this.mainSource().model().mainSeries().requestMoreData()}},l.prototype.endScale=function(){this.isPercentage()||null!==this.m_scaleStartPoint&&(this.m_scaleStartPoint=null,this.m_priceRangeSnapshot=null)},l.prototype.startScroll=function(t){this.isAutoScale()||null===this.m_scrollStartPoint&&null===this.m_priceRangeSnapshot&&(this.isEmpty()||(this.m_scrollStartPoint=t,this.m_priceRangeSnapshot=this.priceRange().clone()))},l.prototype.scrollTo=function(t){var e,i,o;this._marksCache=null,this.isAutoScale()||null!==this.m_scrollStartPoint&&(e=this.priceRange().length()/(this.height()-1),i=t-this.m_scrollStartPoint,o=i*e,this.m_priceRange=this.m_priceRangeSnapshot.clone(),this.m_priceRange.shift(o))},l.prototype.endScroll=function(){this.isAutoScale()||null!==this.m_scrollStartPoint&&(this.m_scrollStartPoint=null,this.m_priceRangeSnapshot=null)},l.prototype.state=function(){var t={};return t.m_priceRange=this.priceRange()?this.priceRange().clone():null,t.m_isAutoScale=this.isAutoScale(),t.m_isPercentage=this._properties.percentage.value(),t.m_isLog=this._properties.log.value(),t.m_height=this.m_height,t.m_topMargin=this.m_topMargin,t.m_bottomMargin=this.m_bottomMargin,t},l.prototype.restoreState=function(t){var e=t.m_priceRange;if(void 0===e)throw new TypeError("invalid state");if(void 0===t.m_isAutoScale)throw new TypeError("invalid state");void 0!==t.m_isPercentage&&this._properties.percentage.setValue(t.m_isPercentage),void 0!==t.m_isLog&&this._properties.log.setValue(t.m_isLog),this.m_priceRange=e?new n(e.m_minValue,e.m_maxValue):null,void 0!==t.m_height&&(this.m_height=t.m_height),this.setAutoScale(t.m_isAutoScale),void 0!==t.m_topMargin&&(this.m_topMargin=t.m_topMargin),void 0!==t.m_bottomMargin&&(this.m_bottomMargin=t.m_bottomMargin),this._mainSource=void 0,this._scaleSeriesOnly=!1},l.prototype.mainSource=function(){var t,e;if(void 0!==this._mainSource)return this._mainSource;for(t=0;t<this.m_dataSources.length;t++)if(TradingView.isInherited(this.m_dataSources[t].constructor,d))return e=this.m_dataSources[t],this._mainSource=e,e;return this._mainSource=void 0,null},l.prototype.formatter=function(){return this._formatter||this.updateFormatter(),this._formatter},l.prototype.updateFormatter=function(){var t,e;this._marksCache=null,t=this.mainSource(),e=100,t&&(e=t.base()),this._formatter=null,this.properties().percentage.value()?this._formatter=new f:t?this._formatter=t.formatter():this._formatter=new _(100,1),this.m_markBuilder=new r(this,e,this._formatter),this.m_markBuilder.rebuildTickMarks()},l.prototype._recalculateSourcesForAutoscale=function(){var t,e;this._mainSource&&(this._scaleSeriesOnly=this._scalesProperties.scaleSeriesOnly.value()),t=this._scaleSeriesOnly&&this._hasSeries,e=function(e){return!!(e.properties().visible.value()||e instanceof p)&&(t?TradingView.isInherited(e.constructor,p):TradingView.isInherited(e.constructor,d))},this._sourcesForAutoscale=this.m_dataSources.filter(e)},l.prototype.sourcesForAutoscale=function(){return this._mainSource&&this._scaleSeriesOnly!=this._scalesProperties.scaleSeriesOnly.value()&&(this._sourcesForAutoscale=null),this._sourcesForAutoscale||this._recalculateSourcesForAutoscale(),this._sourcesForAutoscale},l.prototype.recalculatePriceRange=function(t){this._invalidatedForRange={visibleBars:t,isValid:!1}},l.prototype.makeSureItIsValid=function(){this._invalidatedForRange.isValid||(this._invalidatedForRange.isValid=!0,this.recalculatePriceRangeImpl())},l.prototype.recalculatePriceRangeImpl=function(){var t,e,i,o,s,r,a,l,h,c,d,p=this._invalidatedForRange.visibleBars;if(p){for(t=null,e=this.sourcesForAutoscale(),i=this.mainSource(),o=0,s=0,r=0;r<e.length;r++)a=e[r],a.properties().visible.value()&&(l=p.firstBar(),h=p.lastBar(),c=a.priceRange(l,h),null===t&&c?t=c:c&&(t=t.merge(c)),a.margins&&(d=a.margins(),o=Math.max(d[0],o),s=Math.max(d[1],s)));(Math.abs(s-this._studyBottomMargin)>.01||Math.abs(o-this._studyTopMargin)>.01)&&(this._studyBottomMargin=s,this._studyTopMargin=o,this._marksCache=null,this._internalHeightCache=null),t?(t.minValue()==t.maxValue()&&(t=new n(t.minValue()-.5,t.maxValue()+.5)),this.setPriceRange(t)):this.m_priceRange||this.setPriceRange(new n((-.5),.5)),this._invalidatedForRange.isValid=!0}},l.prototype.sourcesToUpdateViews=function(){var t,e;if(!this._sourcesToUpdateViews)for(this._sourcesToUpdateViews=[],t=0;t<this.m_dataSources.length;t++)e=this.m_dataSources[t],TradingView.isInherited(e.constructor,c)&&!e.isActualSymbol()||this._sourcesToUpdateViews.push(e);return this._sourcesToUpdateViews},l.prototype.updatePaneViews=function(){var t,e=this.sourcesToUpdateViews();for(t=0;t<e.length;t++)e[t].updateAllViews()},t.exports=l}).call(e,i(21),i(32),i(78))},function(t,e){"use strict";function i(t,e){this._formatter=t,this._maxSize=e||50,this._actualSize=0,this._cache={},this._usageTick=1,this._oldestTick=1,this._tick2Labels={}}i.prototype.format=function(t){var e,i;return this._cache[t]?this._cache[t].string:(this._actualSize==this._maxSize&&(e=this._tick2Labels[this._oldestTick],delete this._tick2Labels[this._oldestTick],delete this._cache[e],this._oldestTick++,this._actualSize--),i=this._formatter(t),this._cache[t]={string:i,tick:this._usageTick},this._tick2Labels[this._usageTick]=t,this._actualSize++,this._usageTick++,i)},t.exports=i},function(t,e,i){(function(e,o){"use strict";function n(t,i,s){var r,a;this.m_timeScale=t,r=i.rightAxisProperties.state(),r.autoScale=!0,this.m_rightPriceScale=new l(new e(r),s.properties().scalesProperties),a=i.leftAxisProperties.state(),a.autoScale=!0,this.m_leftPriceScale=new l(new e(a),s.properties().scalesProperties),this.m_dataSources=[],this.m_height=0,this.m_width=0,this.m_mainDataSource=null,this._properties=i,this._model=s,this._tagsChanged=new o,i.topMargin.listeners().subscribe(this,n.prototype._updateMargins),i.bottomMargin.listeners().subscribe(this,n.prototype._updateMargins),this._updateMargins(),this._stretchFactor=n.DEFAULT_STRETCH_FACTOR}var s=i(112).ExecutionsPositionController,r=i(67).LineDataSource,a=i(72).PriceDataSource,l=i(109);n.DEFAULT_STRETCH_FACTOR=1e3,n.PANE_ANIMATION_DURATION=500,n.sortSourcesPreOrdered={"Volume@tv-basicstudies":0,ChartEventsSource:1,"ESD$TV_DIVIDENDS@tv-scripting":2,"ESD$TV_SPLITS@tv-scripting":3,"ESD$TV_EARNINGS@tv-scripting":4,LineToolOrder:5,LineToolPosition:6,LineToolExecution:7},n.prototype.destroy=function(){this._properties.topMargin.listeners().unsubscribe(this,n.prototype._updateMargins),this._properties.bottomMargin.listeners().unsubscribe(this,n.prototype._updateMargins)},n.prototype.setPaneSize=function(t){var e={large:1,medium:.6,small:.3,tiny:.15};if(!e[t])throw"Unknown size enum value: "+t;this._stretchFactor=e[t]*n.DEFAULT_STRETCH_FACTOR},n.sortSources=function(t){return t.map(function(t){var e,i,o=t._constructor;return isFunction(t.metaInfo)&&(o=t.metaInfo().id),i=n.sortSourcesPreOrdered[o]||0,e=i>0?+(1/0):i<0?-(1/0):t.zorder(),[t,i,e]}).sort(function(t,e){return t[1]-e[1]||t[2]-e[2];
}).map(function(t){return t[0]})},n.prototype._updateMargins=function(){var t,e,i=.01*this._properties.topMargin.value(),o=.01*this._properties.bottomMargin.value();for(this.m_leftPriceScale.setTopMargin(i),this.m_leftPriceScale.setBottomMargin(o),this.m_rightPriceScale.setTopMargin(i),this.m_rightPriceScale.setBottomMargin(o),t=0;t<this.m_dataSources.length;t++)e=this.m_dataSources[t],e instanceof TradingView.Study&&this.isOverlay(e)&&"Volume"!==e.metaInfo().shortId&&e.priceScale()&&e.priceScale()!==this.m_leftPriceScale&&e.priceScale()==this.m_rightPriceScale&&(e.priceScale().setTopMargin(i),e.priceScale().setBottomMargin(o),this.recalculatePriceScale(e.priceScale()));this.recalculatePriceScale(this.m_leftPriceScale),this.recalculatePriceScale(this.m_rightPriceScale),this.updateAllViews()},n.prototype.model=function(){return this._model},n.prototype.width=function(){return this.m_width},n.prototype.height=function(){return this.m_height},n.prototype.setWidth=function(t){this.m_width=t,this.updateAllViews()},n.prototype.setHeight=function(t){var e,i;for(this.m_height=t,this.m_leftPriceScale.setHeight(t),this.m_rightPriceScale.setHeight(t),e=0;e<this.m_dataSources.length;e++)i=this.m_dataSources[e],this.isOverlay(i)&&i.priceScale()&&i.priceScale().setHeight(t);this.updateAllViews()},n.prototype.leftPriceScale=function(){return this.m_leftPriceScale},n.prototype.rightPriceScale=function(){return this.m_rightPriceScale},n.prototype.timeScale=function(){return this.m_timeScale},n.prototype.dataSources=function(){return this.m_dataSources},n.prototype.isOverlay=function(t){return t._isOverlay},n.prototype._processMainSourceChange=function(){var t,e,i,o,s,l,h;if(null===this.m_mainDataSource)for(e=0;e<this.m_dataSources.length;e++)if(i=this.m_dataSources[e],TradingView.isInherited(i.constructor,a)&&!this.isOverlay(i)&&(!i.properties().linkedToSeries||!i.properties().linkedToSeries.value())){this.m_mainDataSource=i,t=!0;break}if(this.m_mainDataSource&&t){for(o=[],e=0;e<this.m_dataSources.length;e++)i=this.m_dataSources[e],TradingView.isInherited(i.constructor,r)&&o.push(i);for(o=n.sortSources(o),e=0;e<o.length;e++)this.move(o[e],this.m_mainDataSource.priceScale(),!0)}else if(!this.m_mainDataSource)for(e=0;e<this.m_dataSources.length;e++)if(i=this.m_dataSources[e],TradingView.isInherited(i.constructor,a)&&this.isOverlay(i)&&i.showInObjectTree()){for(this.m_mainDataSource=i,this.m_rightPriceScale.addDataSource(i),i.setPriceScale(this.m_rightPriceScale),s=this._model.children(i),h=0;h<s.length;h++)l=s[h],this.m_rightPriceScale.addDataSource(l),l.setPriceScale(this.m_rightPriceScale);this.recalculatePriceScale(this.m_rightPriceScale),i._isOverlay=!1;break}},n.prototype._newZOrderForLineTool=function(){var t=this.m_dataSources.reduce(function(t,e){return e instanceof r?Math.max(t,e.zorder()):t},this.getZOrderMinMax().minZOrder-1);return this.m_dataSources.forEach(function(e){e.zorder()>t&&e.setZorder(e.zorder()+1)}),t+1},n.prototype.addDataSource=function(t,e,i){var o;o=t instanceof r&&!i?this._newZOrderForLineTool():this.getZOrderMinMax().minZOrder-1,this.insertDataSource(t,e,o)},n.prototype.insertDataSource=function(t,i,o){var s,r,h;this.m_dataSources.push(t),s=!1,t===this._model.mainSeries()?(this.m_mainDataSource=t,s=!0):null===this.m_mainDataSource&&(this.m_mainDataSource=t,s=!0),t._isOverlay=!1,null===i&&(r=this.m_rightPriceScale.topMargin(),h=this.m_rightPriceScale.bottomMargin(),t.metaInfo&&"Volume@tv-basicstudies"==t.metaInfo().id&&(r=.75,h=0),i=new l(new e(this._properties.overlayPropreties.state()),this._model.properties().scalesProperties),i.setHeight(this.m_height),i.setTopMargin(r),i.setBottomMargin(h),t._isOverlay=!0),i.addDataSource(t),t.setPriceScale(i),t.onTagsChanged&&t.onTagsChanged().subscribe(this,n.prototype.onSourceTagsChanged),t.setZorder(o),s&&this._processMainSourceChange(),this._tagsChanged.fire(),TradingView.isInherited(t.constructor,a)&&this.recalculatePriceScale(i),this.invalidateSourcesCache()},n.prototype.removeDataSource=function(t,e){var i,o=this.m_dataSources.indexOf(t);return o===-1?void TradingView.logDebugChart("removeDataSource: invalid data source"):(t._isOverlay=!1,this.m_dataSources.splice(o,1),t!==this.m_mainDataSource||e||(this.m_mainDataSource=null),i=null,this.m_leftPriceScale.dataSources().indexOf(t)!==-1?(this.m_leftPriceScale.removeDataSource(t),i=this.m_leftPriceScale):this.m_rightPriceScale.dataSources().indexOf(t)!==-1&&(this.m_rightPriceScale.removeDataSource(t),i=this.m_rightPriceScale),t.onTagsChanged&&t.onTagsChanged().unsubscribe(this,n.prototype.onSourceTagsChanged),TradingView.isInherited(t.constructor,a)&&this._processMainSourceChange(),this._tagsChanged.fire(),i&&TradingView.isInherited(t.constructor,a)&&this.recalculatePriceScale(i),void this.invalidateSourcesCache())},n.prototype.startScalePrice=function(t,e){t.startScale(e)},n.prototype.scalePriceTo=function(t,e){t.scaleTo(e),this.updateAllViews()},n.prototype.endScalePrice=function(t){t.endScale()},n.prototype.startScrollPrice=function(t,e){t.startScroll(e)},n.prototype.scrollPriceTo=function(t,e){t.scrollTo(e),this.updateAllViews()},n.prototype.endScrollPrice=function(t){t.endScroll()},n.prototype.setPriceAutoScale=function(t,e){return t.setAutoScale(e),this.timeScale().isEmpty()?void t.setPriceRange(null):void this.recalculatePriceScale(t)},n.prototype.restorePriceScaleState=function(t,e){t.restoreState(e),this.updateAllViews()},n.prototype.updateAllViews=function(){for(var t=0;t<this.m_dataSources.length;t++)this.m_dataSources[t].updateAllViews()},n.prototype.defaultPriceScale=function(){var t=this.m_mainDataSource?this.m_mainDataSource.priceScale():this.rightPriceScale();return void 0===t&&(t=new l(new e(this._properties.overlayPropreties.state()),this._model.properties().scalesProperties)),t},n.prototype._priceScaleIsPrice=function(t){var e=t.mainSource();return!!e&&(!!TradingView.isInherited(e.constructor,TradingView.Series)||!!TradingView.isInherited(e.constructor,TradingView.Study)&&e.metaInfo().is_price_study)},n.prototype.findSuitableScale=function(t){if(TradingView.isInherited(t.constructor,TradingView.Study)&&"Volume@tv-basicstudies"==t.metaInfo().id)return this.m_rightPriceScale.mainSource()||this.m_leftPriceScale.mainSource()?null:this.m_rightPriceScale;var e=!1;if(TradingView.isInherited(t.constructor,TradingView.Study)?e=t.metaInfo().is_price_study:TradingView.isInherited(t.constructor,TradingView.Series)&&(e=!0),e){if(this._priceScaleIsPrice(this.m_rightPriceScale))return this.m_rightPriceScale;if(this._priceScaleIsPrice(this.m_leftPriceScale))return this.m_leftPriceScale}return this.m_rightPriceScale.mainSource()?this.m_leftPriceScale.mainSource()?null:this.m_leftPriceScale:this.m_rightPriceScale},n.prototype.mainDataSource=function(){return this.m_mainDataSource},n.prototype.recalculatePriceScale=function(t){if(t){if(t.isAutoScale()&&!this.timeScale().isEmpty()){var e=this.timeScale().visibleBars();t.recalculatePriceRange(e)}t.updatePaneViews()}},n.prototype.resetPriceScale=function(t){var e=this.timeScale().visibleBars();t.mainSource()instanceof TradingView.Series&&t.mainSource().isLockScale()||t.setAutoScale(!0),t.recalculatePriceRange(e),this.updateAllViews()},n.prototype.recalculate=function(){var t,e;for(this.recalculatePriceScale(this.m_rightPriceScale),this.recalculatePriceScale(this.m_leftPriceScale),t=0;t<this.m_dataSources.length;t++)e=this.m_dataSources[t],!this.isOverlay(e)||e instanceof r||this.recalculatePriceScale(e.priceScale());this.updateAllViews(),this._model.updatePane(this)},n.prototype.isEmpty=function(){return null===this.m_mainDataSource},n.prototype.move=function(t,e,i){var o=this.m_dataSources.slice(),n=null!==e;this.removeDataSource(t,n),this.addDataSource(t,e,i),this.m_dataSources=o,this.invalidateSourcesCache()},n.prototype.dataSourceForId=function(t){for(var e=0;e<this.m_dataSources.length;e++)if(this.m_dataSources[e].id()===t)return this.m_dataSources[e];return null},n.prototype.priceScaleForSource=function(t){return this.rightPriceScale().dataSources().indexOf(t)!==-1?this.rightPriceScale():this.leftPriceScale().dataSources().indexOf(t)!==-1?this.leftPriceScale():null},n.prototype.sourceById=function(t){for(var e=0;e<this.m_dataSources.length;e++)if(this.m_dataSources[e].id()===t)return this.m_dataSources[e];return null},n.prototype.containsMainSeries=function(){return this.m_dataSources.indexOf(this._model.mainSeries())!==-1},n.prototype.priceScaleByName=function(t){return"left"===t?this.m_leftPriceScale:"right"===t?this.m_rightPriceScale:null},n.prototype.priceScaleName=function(t){return t===this.m_leftPriceScale?"left":t===this.m_rightPriceScale?"right":""},n.prototype.hitTestSources=function(){var t,e,i,o,n;if(this._cachedHitTestSources)return this._cachedHitTestSources;for(t=this.orderedSources(),e=[],i=[],o=0;o<t.length;o++)n=t[o],TradingView.isInherited(n.constructor,r)?e.push(n):i.push(n);return this._cachedHitTestSources=i.concat(e),this._cachedHitTestSources},n.prototype.orderedSources=function(){var t,e,i,o;if(this._cachedOrderedSoruces)return this._cachedOrderedSoruces;for(t=[],e=0,i=this.m_dataSources.length;e<i;e++)o=this.m_dataSources[e],TradingView.isInherited(o.constructor,r)&&!o.isActualSymbol()||t.push(o);return t=n.sortSources(t),this._cachedOrderedSoruces=t,t},n.prototype.createDrawingsCaches=function(){s.recreateOrderedByBarsSourcesCache(this)},n.prototype.clearDrawingCaches=function(){s.clearOrderedByBarsSourcesCache()},n.prototype.invalidateSourcesCache=function(){this._cachedOrderedSoruces=null,this._cachedHitTestSources=null,this.m_leftPriceScale.invalidateSourcesCache(),this.m_rightPriceScale.invalidateSourcesCache()},n.prototype.getZOrderMinMax=function(){var t,e,i,o,n=this.orderedSources();if(0===n.length)return{minZOrder:0,maxZOrder:0};for(t=n[0].zorder(),e=n[0].zorder(),i=1;i<n.length;i++)o=n[i],o.zorder()<t&&(t=o.zorder()),o.zorder()>e&&(e=o.zorder());return{minZOrder:t,maxZOrder:e}},n.prototype.sendToBack=function(t){var e,i=this.getZOrderMinMax().minZOrder,o=Math.abs(t.zorder()-i);for(e=0;e<o;e++)this.changeZOrder(t,-1)},n.prototype.bringToFront=function(t){var e,i=this.getZOrderMinMax().maxZOrder,o=Math.abs(t.zorder()-i);for(e=0;e<o;e++)this.changeZOrder(t,1)},n.prototype.changeZOrder=function(t,e){var i,o,n,s,r,a=this.orderedSources().filter(function(t){return t.showInObjectTree()}),l=0;for(i=0,o=a.length;i<o;i++)if(a[i]===t){l=i;break}l>0&&e<0?(n=a[l-1].zorder(),s=t.zorder(),a[l-1].setZorder(s),t.setZorder(n)):l<a.length-1&&e>0&&(r=a[l+1].zorder(),s=t.zorder(),a[l+1].setZorder(s),t.setZorder(r)),this.invalidateSourcesCache()},n.prototype.onSourceTagsChanged=function(){this._tagsChanged.fire()},n.prototype.onTagsChanged=function(){return this._tagsChanged},n.prototype.dumpPriceScale=function(t){var e,i,o,n=t.dataSources(),s=[];for(e=0;e<n.length;e++)if(i=n[e].priceAxisViews(this,t))for(o=0;o<i.length;o++)s.push(i[o].dump());return s},n.prototype.dumpViews=function(){var t,e,i,o,n,s={};for(s.paneViews={},t=this.orderedSources(),e=0;e<t.length;e++)if(i=t[e],s.paneViews[e]=[],o=i.paneViews())for(n=0;n<o.size();n++)s.paneViews[e].push(o.item(e).dump());return s.leftAxis=this.dumpPriceScale(this.m_leftPriceScale),s.rightAxis=this.dumpPriceScale(this.m_rightPriceScale),s},n.prototype.clearSeries=function(){for(var t=this.m_dataSources.length-1;t>=0;t--)TradingView.isInherited(this.m_dataSources[t].constructor,TradingView.Series)&&this.m_dataSources.splice(t,1)},n.prototype.actionNoScaleIsEnabled=function(t){return!(!this.isOverlay(t)&&TradingView.isInherited(t.constructor,a))||this.m_dataSources.filter(function(t){return(!t.properties().linkedToSeries||!t.properties().linkedToSeries.value())&&(TradingView.isInherited(t.constructor,a)&&t.showInObjectTree()&&!t.isNoScale())}).length>1},n.prototype.executionsPositionController=function(){return this._executionsPositionController||(this._executionsPositionController=new s(this,this._model.timeScale())),this._executionsPositionController},t.exports=n}).call(e,i(63),i(32))},function(t,e,i){(function(t,o){"use strict";function n(t,e){this._pane=t,this._timeScale=e}function s(t){this._line=t}function r(t,e){this._data=t,this._adapter=e}function a(t,e){h.call(this,t,e),this._invalidated=!0}function l(t,e){this._adapter=new s(this),this._constructor="LineToolExecution";var i=e||new _("linetoolexecution");this.customization={forcePriceAxisLabel:!1,disableSelection:!0,disableErasing:!0},c.call(this,t,new a(this,t),i)}var h=i(97),c=i(67).LineDataSource,d=i(113),p=i(88),u=i(50).Rect,_=i(73).DefaultProperty;n.prototype._cachedByBarIndexOrderedExecutions={},n.recreateOrderedByBarsSourcesCache=function(t){var e,i,o,s,r;for(n.clearOrderedByBarsSourcesCache(),e=n.prototype,i=t.orderedSources(),o=0;o<i.length;++o)s=i[o],s._adapter&&void 0!==s._adapter._index&&(r=e._cachedByBarIndexOrderedExecutions[s._adapter._index],e._cachedByBarIndexOrderedExecutions[s._adapter._index]=r||[],e._cachedByBarIndexOrderedExecutions[s._adapter._index].push(s))},n.clearOrderedByBarsSourcesCache=function(){n.prototype._cachedByBarIndexOrderedExecutions={}},n.prototype.getXYCoordinate=function(t,e,i){var o,n,s,r,a,h,c,d,p,u,_=0,f=t.getDirection(),g="buy"==f,m=this._pane.model().mainSeries();if(m.bars&&(o=g?10:-10,n=m.bars().search(i,TradingView.SEARCH_NEAREST_LEFT),n&&(i=n.index,s=g?n.value[TradingView.LOW_PLOT]:n.value[TradingView.HIGH_PLOT],r=m.priceScale(),r.isPercent()&&(a=m.firstValue(),s=r.priceRange().convertToPercent(s,a)),_=r.priceToCoordinate(s)+o)),t._index=i,h=e.visibleBars(),!isFinite(i)||!h||i>h.lastBar()||i<h.firstBar())return{x:-1,y:-1};for(c=this._cachedByBarIndexOrderedExecutions[i]||this._pane.orderedSources(),d=c.length-1;d>=0;--d)if(p=c[d],p instanceof l&&p._adapter._index==i&&p._adapter.getDirection()==f){if(p==t._line)break;u=p._adapter._height(),_=g?_+u:_-u}return{x:e.indexToCoordinate(i),y:_}},s.prototype._height=function(){var t,e=this.getArrowHeight(),i=this.getArrowSpacing(),o=0;return this.getText()&&d.fontHeight(this.getFont()),t=10,e+i+o+t},s.prototype.getIndex=function(){var t=this._line._model.timeScale(),e=t.m_points.lastTimePointIndex(),i=this._line.points()[0].index;return e-i},s.prototype.setIndex=function(t){var e,i=this._line._model.timeScale(),o=i.m_points.lastTimePointIndex(),n=o-Math.abs(t);return this._line.startMoving(this._line.points()[0]),e=TradingView.merge({},this._line.points()[0]),e.index=n,this._line.move(e),this._line.endMoving(),this},s.prototype.getTime=function(){return this._unixtime},s.prototype.setTime=function(t){var e=this._line._model.mainSeries();return this._unixtime=ChartApiInstance.alignTimePoint?ChartApiInstance.alignTimePoint(t,e.interval(),e.symbolInfo()):t,this._line.restorePoints([{offset:0,price:this.getPrice(),time_t:this._unixtime}],[]),this._line.createServerPoints(),this},s.prototype.getPrice=function(){return this._line.points().length>0?this._line.points()[0].price:this._line._timePoint.length>0?this._line._timePoint[0].price:void 0},s.prototype.setPrice=function(t){return this._line.points().length>0&&(this._line.points()[0].price=t),this._line._timePoint.length>0&&(this._line._timePoint[0].price=t),this},s.prototype.getText=function(){return this._line.properties().text.value()},s.prototype.setText=function(t){return this._line.properties().text.setValue(t||""),this._line.updateAllViewsAndRedraw(),this},s.prototype.getArrowHeight=function(){return this._line.properties().arrowHeight.value()},s.prototype.setArrowHeight=function(t){return this._line.properties().arrowHeight.setValue(t||5),this},s.prototype.getArrowSpacing=function(){return this._line.properties().arrowSpacing.value()},s.prototype.setArrowSpacing=function(t){return this._line.properties().arrowSpacing.setValue(t||1),this},s.prototype.getDirection=function(){return this._line.properties().direction.value()},s.prototype.setDirection=function(t){return this._line.properties().direction.setValue(t||"buy"),this},s.prototype.getArrowColor=function(){return d.getColorFromProperties(this._line.properties().arrowColor,this._line.properties().arrowTransparency)},s.prototype.setArrowColor=function(t){return d.setColorToProperties(t,this._line.properties().arrowColor,this._line.properties().arrowTransparency),this},s.prototype.getTextColor=function(){return d.getColorFromProperties(this._line.properties().textColor,this._line.properties().textTransparency)},s.prototype.setTextColor=function(t){return d.setColorToProperties(t,this._line.properties().textColor,this._line.properties().textTransparency),this},s.prototype.getFont=function(){return d.getFontFromProperties(this._line.properties().fontFamily,this._line.properties().fontSize,this._line.properties().fontBold,this._line.properties().fontItalic)},s.prototype.setFont=function(t){return d.setFontToProperties(t,this._line.properties().fontFamily,this._line.properties().fontSize,this._line.properties().fontBold,this._line.properties().fontItalic),this},s.prototype.setTooltip=function(t){return null==t?t="":t+="",this._line.properties().tooltip.setValue(t),this},s.prototype.getTooltip=function(){return this._line.properties().tooltip.value()},s.prototype.remove=function(){this._line._model.removeSource(this._line),delete this._line},r.prototype._textWidth=function(t){var e,i;return 0===this._adapter.getText().length?0:(t.save(),t.font=this._adapter.getFont(),e=5,i=t.measureText(this._adapter.getText()).width,t.restore(),e+i)},r.prototype._drawArrow=function(t,e,i){var o,n;t.save(),t.strokeStyle=this._adapter.getArrowColor(),t.fillStyle=this._adapter.getArrowColor(),o=this._adapter.getArrowHeight(),n=this._adapter.getDirection(),t.translate(e,i),"buy"!=n&&t.rotate(Math.PI),CanvasEx.drawArrow(t,0,0,0,o),t.restore()},r.prototype._drawText=function(t,e,i){var o,n,s=this._adapter.getText();s&&(t.save(),t.textAlign="center",t.textBaseline="middle",t.font=this._adapter.getFont(),t.fillStyle=this._adapter.getTextColor(),o=e+this._textWidth(t)/2,n=i+d.fontHeight(this._adapter.getFont())/2,t.fillText(s,o,n-1),t.restore())},r.prototype.draw=function(t){var e,i,o,n,s,r,a,h;!this._data.points||this._data.points.length<l.POINTS_COUNT||(e=Math.round(this._data.points[0].x+.5),i=Math.round(this._data.points[0].y),this._drawArrow(t,e,i),o=this._textWidth(t),0!==o&&(n=this._adapter.getArrowHeight(),s=this._adapter.getArrowSpacing(),r=d.fontHeight(this._adapter.getFont()),a=this._adapter.getDirection(),h="buy"==a?i+n+s:i-n-s-r,this._drawText(t,Math.round(e-o/2),h)))},r.prototype.hitTest=function(t){var e,i,o,n,s,r;if(this._data.points&&!(this._data.points.length<l.POINTS_COUNT))return e=Math.round(this._data.points[0].x),i=Math.round(this._data.points[0].y),o=this._adapter.getArrowHeight(),"buy"==this._adapter.getDirection()?(n=i,s=i+o):(n=i-o,s=i),t.x>=e-2&&t.x<=e+2&&t.y>=n&&t.y<=s?(r=this._adapter.getTooltip(),new p(p.CUSTOM,{mouseDownHandler:function(){TradingView.TradingWidget&&TradingView.TradingWidget.journalDialog()},tooltip:""!==r?{text:r,rect:new u(e,n,2,s-n)}:null})):void 0},inherit(a,h),a.prototype._renderer=null,a.prototype._rendererCached=!1,a.prototype.update=function(){this._invalidated=!0},a.prototype.updateImpl=function(){h.prototype.update.call(this),this._renderer=null,this._rendererCached=!1,this._invalidated=!1},a.prototype.renderer=function(e){var i,o,n,s,a,l,h,c;return this._invalidated&&this.updateImpl(),this._rendererCached?this._renderer:(this._rendererCached=!0,i=this._source,o=i.points(),0===o.length?null:(n=i._adapter,s=i._model.timeScale(),a=this._source._model.paneForSource(this._source).executionsPositionController(),l=a.getXYCoordinate(n,s,o[0].index),!isFinite(l.y)||l.y<0||l.y>e||l.x<0?(this._renderer=null,null):(h=[new t.Point(l.x,l.y)],c={points:h},this._renderer=new r(c,n),this._renderer)))},inherit(l,c),l.POINTS_COUNT=1,l.skipMagnetting=!0,l.prototype.pointsCount=function(){return l.POINTS_COUNT},l.prototype.title=function(){return"Execution"},l.prototype.hasContextMenu=function(){return!1},l.prototype.state=function(){return null},l.prototype.paneViews=function(t){return TradingView.printing&&!o.enabled("snapshot_trading_drawings")?null:this._model.properties().tradingProperties.showExecutions.value()?c.prototype.paneViews.call(this,t):null},l.prototype.userEditEnabled=function(){return!1},l.prototype.showInObjectTree=function(){return!1},e.ExecutionsPositionController=n,e.LineToolExecution=l}).call(e,i(21),i(1))},function(t,e,i){"use strict";var o=i(106),n={_fontHeightCache:{},_parsedColorCache:{}};n._parseColor=function(t){var e,i,o;return this._parsedColorCache[t]?this._parsedColorCache[t]:(e=document.createElement("div"),e.style.color=t,i=e.style.color.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i)||e.style.color.match(/^rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\,\s*(\d*\.?\d+)\s*\)$/i),o={r:i[1],g:i[2],b:i[3],a:i[4]||"1"},this._parsedColorCache[t]=o,o)},n.getColorFromProperties=function(t,e){var i=1-e.value()/100,o=this._parseColor(t.value());return"rgba("+o.r+","+o.g+","+o.b+","+i+")"},n.setColorToProperties=function(t,e,i){var o,n=this._parseColor(t);e.setValue("rgb("+n.r+","+n.g+","+n.b+")"),o=100*(1-n.a),i.setValue(Math.max(0,Math.min(o,100)))},n._parseFont=function(t){var e,i,o,n=document.createElement("div");return n.style.font=t,e=n.style.fontSize.match(/(\d+)pt/),i=e&&e[0]==n.style.fontSize,o={family:n.style.fontFamily,size:i?e[1]:"",bold:"bold"==n.style.fontWeight,italic:"italic"==n.style.fontStyle}},n.getFontFromProperties=function(t,e,i,o){var n=i.value()?"bold":"",s=o.value()?"italic":"",r=e.value()+"pt",a=t.value();return[n,s,r,a].join(" ")},n.setFontToProperties=function(t,e,i,o,n){var s=this._parseFont(t);s.family.length>0&&e.setValue(s.family),s.size.length>0&&i.setValue(s.size),o.setValue(s.bold),n.setValue(s.italic)},n.fontHeight=function(t){var e,i;return this._fontHeightCache[t]||(e=document.createElement("span"),e.appendChild(document.createTextNode("height")),document.body.appendChild(e),e.style.cssText="font: "+t+"; white-space: nowrap; display: inline;",i=e.offsetHeight,document.body.removeChild(e),this._fontHeightCache[t]=Math.ceil(i)),this._fontHeightCache[t]},n.drawPolyHoverOrPress=function(t,e,i,o){o?(t.save(),t.fillStyle="rgba(0, 0, 0, 0.15)",CanvasEx.drawPoly(t,e,!0),t.restore()):i&&(t.save(),t.fillStyle="rgba(0, 0, 0, 0.1)",CanvasEx.drawPoly(t,e,!0),t.restore())},n.repaint=function(t){var e=new o(o.LIGHT_UPDATE);e.force=!0,t.invalidate(e)},n.roundToMinTick=function(t,e){var i=t.mainSource().base(),o=1/i;return o*Math.round(e/o)},t.exports=n},function(t,e,i){(function(e,o,n,s,r,a){"use strict";function l(t,i,s,r,a,h,c,v,w){var b,S,T,C;this._version=l.version,this._readOnly=r,this._undoModel=v,this._properties=s,this._isSnapshot=w,this._studiesMetaData=h,this._studyVersioning=new P(this._studiesMetaData,c),this.m_timeScale=new g(this),this.m_panes=[],this.m_gridSource=new _,this.m_crossHairSource=new d(this,A.properties()),this.m_width=0,this._tagsChanged=new e,this._lineCancelled=new e,this._magnet=new f(A.properties().magnet,this.m_timeScale,s.paneProperties.magnetSensivity),b=new V("chartproperties.mainSeriesProperties"),b.addExclusion("lockScale"),b.addExclusion("minTick"),b.addExclusion("priceAxisProperties.percentage"),b.addExclusion("priceAxisProperties.log"),this.createPane(void 0,!1,{rightAxisProperties:b.priceAxisProperties.state(["autoScale"])}),this.m_panes[0]._stretchFactor=2*p.DEFAULT_STRETCH_FACTOR,this.m_panes[0]._isMainPane=!0,this.m_selectedSource=null,this._selectedSourceChanged=new e,this._chartApi=t,this._invalidateHandler=i,this.m_hoveredSource=null,this._properties.listeners().subscribe(this,l.prototype.propertyChangeHandler),S=this,this._properties.timezone.listeners().subscribe(null,function(){S._chartApi&&S._chartApi.connected()&&S._chartApi.switchTimezone(S.timezone())}),this._properties.timeScale.rightOffset.listeners().subscribe(null,function(){S.m_timeScale.setOffset(S._properties.timeScale.rightOffset.value()),S.recalculateAllPanes()}),b.merge(s.mainSeriesProperties.state()),this.m_mainSeries=new I(this,b,a),this.m_panes[0].addDataSource(this.m_mainSeries,this.m_panes[0].rightPriceScale()),this.m_mainSeries.onCompleted().subscribe(this,function(){S.clearCurrentPosition()}),r||(b.addChild("priceAxisProperties",this.m_mainSeries.m_priceScale.properties()),b.lockScale.listeners().subscribe(this,function(t){var e=t.value();e&&(b.priceAxisProperties.percentage.setValue(!1),b.priceAxisProperties.logDisabled.setValue(!1)),b.priceAxisProperties.percentageDisabled.setValue(e),b.priceAxisProperties.logDisabled.setValue(e)}),this._properties.paneProperties.legendProperties.showStudyTitles.listeners().subscribe(this,function(t){t.value()||this._properties.paneProperties.legendProperties.showStudyArguments.setValue(!1)})),this._barsMarksSources=[],o.enabled("charting_library_base")&&(T=new y(this),T.setOwnerSource(this.m_mainSeries),this._barsMarksSources.push(T),C=new m(this),C.setOwnerSource(this.m_mainSeries),this._barsMarksSources.push(C)),this.m_watermarkSource=new u(this.m_mainSeries),this.strategySources=[],this.strategySources.change=new e,this._activeStrategySource=new n(null),this._oldStartVisibleIndex=-1,this._oldEndVisibleIndex=-1,this._currentTool="",A.hideAllDrawings().subscribe(this,l.prototype.visibilityChangeHandler),this._properties.scalesProperties.listeners().subscribe(this,l.prototype.fullUpdate),this._id=TradingView.guid()}var h=i(115),c=i(67).LineDataSource,d=i(258),p=i(111),u=i(262),_=i(263),f=i(264),g=i(265),m=i(268),v=i(270).BarsMarksContainer,y=i(272),w=i(106),b=i(59).RGBColor,S=i(141),T=S.Study,C=S.createStudy,x=S.prepareStudyProperties,P=i(139),L=i(273),k=i(136).StudyLineDataSource,E=i(54).StudyConsts,I=i(77),A=i(74),V=i(73).DefaultProperty;l.prototype.isSnapshot=function(){return this._isSnapshot},l.prototype.currentTool=function(){return this._currentTool},l.prototype.setCurrentTool=function(t){this._currentTool=t},l.prototype.timezone=function(){return this._properties.timezone.value()},l.prototype.version=function(){return this._version},l.prototype.initConnection=function(){this._chartApi.switchTimezone(this.timezone())},l.prototype.dumpViews=function(){var t,e,i,o,n={};for(n.panes=[],t=0;t<this.m_panes.length;t++)n.panes.push(this.m_panes[t].dumpViews());for(n.dataWindow=[],e=this.dataSources(),t=0;t<e.length;t++)i=e[t],o=i.dataWindowView(),o&&n.dataWindow.push(o.dump());return n},l.prototype._paneInvalidationMask=function(t,e){var i=new w,o=this.m_panes.indexOf(t);return void 0===e&&(e=w.LIGHT_UPDATE),i.invalidatePane(o,e),i},l.prototype.updatePane=function(t){var e=this._paneInvalidationMask(t);this.invalidate(e)},l.prototype.fullUpdate=function(t){this.invalidate(new w(w.FULL_UPDATE))},l.prototype.updateSource=function(t){var e=this.paneForSource(t),i=this._paneInvalidationMask(e);this.invalidate(i)},l.prototype.studiesMetaData=function(){return this._studiesMetaData},l.prototype.studyVersioning=function(){return this._studyVersioning},l.prototype.disconnect=function(){var t,e=this.dataSources();for(t=0;t<e.length;t++)e[t].disconnect&&e[t].disconnect()},l.prototype.restart=function(){var t,e,i;for(this.initConnection(),this.m_timeScale.reset(),this.m_mainSeries.restart(),t=this.dataSources(),e=0;e<t.length;e++)i=t[e],i.restart&&i!==this.m_mainSeries&&i.restart()},l.prototype.startNotStartedStudies=function(){var t,e;if(!this.m_mainSeries.isStarted())throw Error("Cannot start studies: main series is not started");for(t=this.dataSources(),e=0;e<t.length;e++)t[e]instanceof T&&!t[e].isStarted()&&t[e].restart&&t[e]!==this.m_mainSeries&&t[e].restart()},l.prototype.updateLineTools=function(){var t,e,i=this.dataSources();for(t=0;t<i.length;t++)TradingView.isInherited(i[t].constructor,c)&&(e=i[t],e.tryCreateServerPoints(),e.checkAlert&&e.checkAlert())},l.prototype.realignLineTools=function(){var t,e,i=this.dataSources();for(t=0;t<i.length;t++)TradingView.isInherited(i[t].constructor,c)&&(e=i[t],e.calcIsActualSymbol());for(t=0;t<this.m_panes.length;t++)this.m_panes[t].invalidateSourcesCache()},l.prototype.readOnly=function(){return this._readOnly},l.prototype.properties=function(){return this._properties},l.prototype.lineCancelled=function(){return this._lineCancelled},l.prototype.crossHairMoved=function(){return this.m_crossHairSource.moved()},l.prototype.chartApi=function(){return this._chartApi},l.prototype.propertyChangeHandler=function(){this.invalidate(new w(w.LIGHT_UPDATE))},l.prototype.visibilityChangeHandler=function(){this.setSelectedSource(),this.invalidate(new w(w.LIGHT_UPDATE))},l.prototype.updateAllPaneViews=function(){var t,e;for(t=0;t<this.m_panes.length;t++)e=this.m_panes[t],e.updateAllViews()},l.prototype.mainSeries=function(){return this.m_mainSeries},l.prototype.timeScale=function(){return this.m_timeScale},l.prototype.panes=function(){return this.m_panes},l.prototype.gridSource=function(){return this.m_gridSource},l.prototype.watermarkSource=function(){return this.m_watermarkSource},l.prototype.crossHairSource=function(){return this.m_crossHairSource},l.prototype.barsMarksSources=function(){return this._barsMarksSources},l.prototype.width=function(){return this.m_width},l.prototype.setPaneHeight=function(t,e){t.setHeight(e),this.recalculateAllPanes(),this.invalidate(new w(w.LIGHT_UPDATE))},l.prototype.setWidth=function(t){var e,i;for(this.m_width=t,this.m_timeScale.setWidth(this.m_width),e=0;e<this.m_panes.length;++e)i=this.m_panes[e],i.setWidth(t);this.recalculateAllPanes()},l.prototype.createPane=function(t,e,i){var o,n;if(this._undoModel._chartWidget.isMaximizedPane()&&this._undoModel._chartWidget.toggleMaximizePane(),o=this._properties.paneProperties,i&&o.merge(i),n=new p(this.m_timeScale,o,this,e),"number"==typeof t&&isFinite(t)){if(t<0||t>this.m_panes.length)return void TradingView.logDebugChart("ChartModel.createPane: invalid index: "+t);this.m_panes.splice(t,0,n)}else this.m_panes.push(n);return n.onTagsChanged().subscribe(this,l.prototype.onPaneTagsChanged),n},l.prototype.removePane=function(t){this._undoModel._chartWidget.isMaximizedPane()&&this._undoModel._chartWidget.toggleMaximizePane(),t.destroy();var e=this.m_panes.indexOf(t);e!==-1&&this.m_panes.splice(e,1),this.invalidate(new w(w.FULL_UPDATE))},l.prototype.startScalePrice=function(t,e,i){t.startScalePrice(e,i)},l.prototype.scalePriceTo=function(t,e,i){t.scalePriceTo(e,i),this.mainSeries().properties().lockScale.value()?this.invalidate(new w(w.LIGHT_UPDATE)):this.invalidate(this._paneInvalidationMask(t,w.LIGHT_UPDATE))},l.prototype.endScalePrice=function(t,e){t.endScalePrice(e),this.invalidate(this._paneInvalidationMask(t,w.LIGHT_UPDATE))},l.prototype.startScrollPrice=function(t,e,i){t.startScrollPrice(e,i)},l.prototype.scrollPriceTo=function(t,e,i){t.scrollPriceTo(e,i),this.invalidate(this._paneInvalidationMask(t,w.LIGHT_UPDATE))},l.prototype.endScrollPrice=function(t,e){t.endScrollPrice(e),this.invalidate(this._paneInvalidationMask(t,w.LIGHT_UPDATE))},l.prototype.setPriceAutoScale=function(t,e,i){t.setPriceAutoScale(e,i),this.invalidate(this._paneInvalidationMask(t,w.LIGHT_UPDATE))},l.prototype.restorePriceScaleState=function(t,e,i){t.restorePriceScaleState(e,i),this.invalidate(this._paneInvalidationMask(t,w.LIGHT_UPDATE))},l.prototype.resetPriceScale=function(t,e){t.resetPriceScale(e),this.invalidate(this._paneInvalidationMask(t,w.LIGHT_UPDATE))},l.prototype.updateScales=function(t,e){this._undoModel._chartWidget._updateScalesActions()},l.prototype.startScaleTime=function(t){this.m_timeScale.startScale(t)},l.prototype.scaleTimeTo=function(t){this.m_timeScale.scaleTo(t),this.recalculateAllPanes(),this.invalidate(new w(w.LIGHT_UPDATE))},l.prototype.endScaleTime=function(){this.m_timeScale.endScale(),this.invalidate(new w(w.LIGHT_UPDATE)),this.mainSeries().requestMoreData(),this.recalcVisibleRangeStudy(this.dataSources())},l.prototype.startScrollTime=function(t){this.m_timeScale.startScroll(t),this._isTimeScrolling=!0},l.prototype.scrollTimeTo=function(t){this.m_timeScale.scrollTo(t),this.recalculateAllPanes(),
this.invalidate(new w(w.LIGHT_UPDATE))},l.prototype.endScrollTime=function(){this.m_timeScale.endScroll(),this.invalidate(new w(w.LIGHT_UPDATE)),this.mainSeries().requestMoreData(),this.recalcVisibleRangeStudy(this.dataSources()),this._isTimeScrolling=!1},l.prototype.recalcStudyBasedLineTools=function(){this.dataSources().forEach(function(t){t instanceof k&&t.recalcStudyIfNeeded&&t.recalcStudyIfNeeded()})},l.prototype.recalcVisibleRangeStudy=function(t,e){void 0!==this._recalcVRTimerId&&clearTimeout(this._recalcVRTimerId);var i=this;this._recalcVRTimerId=setTimeout(function(){i._recalcVisibleRangeStudy(t,e)},500)},l.prototype._recalcVisibleRangeStudy=function(t,e){var i,o,n,s,r,a,l,h,c,d,p,u,_,f,g;if(!this.timeScale().isEmpty()&&(i=this.timeScale().visibleBars(),o=this.mainSeries().nearestData(i.firstBar(),TradingView.SEARCH_NEAREST_RIGHT),n=this.mainSeries().nearestData(i.lastBar(),TradingView.SEARCH_NEAREST_LEFT),s=o?o.index:void 0,r=n?n.index:void 0,a=s==this._oldStartVisibleIndex,l=r==this._oldEndVisibleIndex,!a||!l||e))for(this._oldStartVisibleIndex=s,this._oldEndVisibleIndex=r,h=0;h<t.length;h++)if(t[h]instanceof T){for(c=t[h],d=c.metaInfo().inputs,p=null,u=null,_=0;_<d.length;_++)"first_visible_bar_time"==d[_].id?(f=o&&o.value?o.value[TradingView.TIME_PLOT]:0,p=1e3*Math.floor(f)):"last_visible_bar_time"==d[_].id&&(f=n&&n.value?n.value[TradingView.TIME_PLOT]:0,u=1e3*Math.floor(f));g=c.properties().inputs,p&&(u?g.first_visible_bar_time.setValueSilently(p):g.first_visible_bar_time.setValue(p,!0)),u&&g.last_visible_bar_time.setValue(u,!0)}},l.prototype.resetTimeScale=function(){this.m_timeScale.restoreDefault(),this.recalculateAllPanes(),this.mainSeries().requestMoreData(),this.recalcVisibleRangeStudy(this.dataSources()),this.invalidate(new w(w.LIGHT_UPDATE))},l.prototype.restoreTimeScaleState=function(t){this.m_timeScale.restoreState(t),this.recalculateAllPanes(),this.invalidate(new w(w.LIGHT_UPDATE))},l.prototype.restoreFactoryDefaults=function(t){t.restoreFactoryDefaults(),this.recalcVisibleRangeStudy(this.dataSources(),!0),this.mainSeries().onChartStyleChanged()},l.prototype.setSelectedSource=function(t,e){var i,o;this.m_selectedSource===t&&this._lastHittestData===e||t&&t.customization&&t.customization.disableSelection||(this._lastHittestData=e,i=new w,this.m_selectedSource&&(this.m_selectedSource.updateAllViews(),o=this.paneForSource(this.m_selectedSource),TradingView.alertsDispatcher&&this.m_selectedSource.hasAlert.value()&&this.m_selectedSource.getAlert({fromCache:!0}).done(function(t){t&&t.set("selected",!1)})),this.m_selectedSource=t,this._selectedSourceChanged.fire(t),t&&(t.updateAllViews(),o=this.paneForSource(t),TradingView.alertsDispatcher&&t.hasAlert.value()&&t.getAlert({fromCache:!0}).done(function(t){t&&t.set("selected",!0)})),i.force=!0,this.invalidate(new w(w.LIGHT_UPDATE)),this.setHoveredSource(t,e))},l.prototype.checkLineToolSelection=function(){this.m_selectedSource&&this.m_selectedSource instanceof c&&(this.m_selectedSource.calcIsActualSymbol(),this.m_selectedSource.isActualSymbol()||this.setSelectedSource(null))},l.prototype.onSelectedSourceChanged=function(){return this._selectedSourceChanged},l.prototype.setHoveredSource=function(t,e){if(this.m_hoveredSource!==t||this._lastHittestData!==e){this._lastHittestData=e;var i=null;this.m_hoveredSource&&(this.m_hoveredSource.updateAllViews(),i||(i=new w),TradingView.alertsDispatcher&&this.m_hoveredSource.hasAlert.value()&&this.m_hoveredSource.getAlert({fromCache:!0}).done(function(t){t&&t.set("hovered",!1)}),i.merge(this._paneInvalidationMask(this.paneForSource(this.m_hoveredSource),w.LIGHT_UPDATE))),this.m_hoveredSource=t,t&&(t.updateAllViews(),i||(i=new w),i.merge(this._paneInvalidationMask(this.paneForSource(t),w.LIGHT_UPDATE)),TradingView.alertsDispatcher&&t.hasAlert.value()&&t.getAlert({fromCache:!0}).done(function(t){t&&t.set("hovered",!0)})),i&&this.invalidate(i)}},l.prototype.selectedSource=function(){return this.m_selectedSource},l.prototype.hoveredSource=function(){return this.m_hoveredSource},l.prototype.lastHittestData=function(){return this._lastHittestData},l.prototype.invalidate=function(t){this._invalidateHandler&&this._invalidateHandler(t)},l.prototype.dataSources=function(){var t,e,i,o=[];for(o.push(this.m_crossHairSource),t=0;t<this.m_panes.length;++t)for(e=this.m_panes[t].dataSources(),i=0;i<e.length;i++)o.push(e[i]);return o},l.prototype.dataSourceForId=function(t){var e,i;for(i=0;i<this.m_panes.length;++i)if(e=this.m_panes[i].dataSourceForId(t))return e;return null},l.prototype.children=function(t){var e,i,o=this.dataSources(),n=[];for(e=0;e<o.length;e++)i=o[e],i.ownerSource()===t&&n.push(i);return n},l.prototype.setCurrentPosition=function(t,e,i,o){var n,s,r,a,l,h,d,p,u,_,f,g=NaN,m=Math.round(this.m_timeScale.coordinateToIndex(t));if(i&&(n=i.defaultPriceScale(),n.isEmpty()||(g=n.coordinateToPrice(e))),(this._lineBeingCreated||c.isLineTool(this.currentTool()))&&(g=this._magnet.align(g,m,i)),this._isTimeScrolling)return void this.m_crossHairSource.setPosition(this.m_crossHairSource.index,g,i);for(this.m_crossHairSource.setPosition(m,g,i),this.m_crossHairSource.dataWindowView().update(),s=this.m_panes,r=s.length;r--;)for(a=s[r].dataSources(),l=a.length;l--;)h=a[l].dataWindowView(),h&&h.update();this._lineBeingCreated?(this._lineBeingCreated.setLastPoint({index:m,price:g},o),this._lineBeingCreated.updateAllViews(),this.invalidate(new w(w.LIGHT_UPDATE))):this.crossHairSource().startMeasurePoint()?this.invalidate(new w(w.LIGHT_UPDATE)):this.invalidate(new w(w.UPDATE_CURSOR_ONLY)),this._isSettingsExternalPosition||(d=this._undoModel._chartWidget,d._chartWidgetCollection&&(p=this.m_timeScale.points().roughTime(m),u={timeStamp:p},_=i.mainDataSource(),_ instanceof I&&(u.price=g,u.symbol=_.symbol()),f=this._lineBeingCreated||this._linePointBeingEdited||this._sourceBeingMoved,f=f&&A.drawOnAllCharts().value(),d._chartWidgetCollection.syncCrosshair(u,d,f)))},l.prototype.clearCurrentPosition=function(){var t,e,i,o,n,s,r=this.crossHairSource();for(r.clearPosition(),r.dataWindowView().update(),t=this.m_panes,e=t.length;e--;)for(i=t[e].dataSources(),o=i.length;o--;)n=i[o].dataWindowView(),n&&n.update();this.invalidate(new w(w.UPDATE_CURSOR_ONLY)),s=this._undoModel._chartWidget,s._chartWidgetCollection&&s._chartWidgetCollection.syncCrosshair(NaN,s)},l.prototype.setExternalPosition=function(t){var e,i,o,n,s,r,a,l=this.m_timeScale.points().roughIndex(t.timeStamp),h=this.mainSeries().symbol();if(h==t.symbol)return this._isSettingsExternalPosition=!0,e=this.paneForSource(this.mainSeries()),i=this.m_timeScale.indexToCoordinate(l),o=this.mainSeries().priceScale().priceToCoordinate(t.price,!0),this.setCurrentPosition(i,o,e,{}),void delete this._isSettingsExternalPosition;for(isFinite(l)?this.crossHairSource().setPosition(l,NaN,null):(n=this.crossHairSource(),n.clearPosition(),n.dataWindowView().update()),s=this.dataSources(),r=s.length;r--;)a=s[r].dataWindowView(),a&&a.update();this.invalidate(new w(w.UPDATE_CURSOR_ONLY))},l.prototype.updateCrossHair=function(){this.m_crossHairSource.updateIndex()},l.prototype.updateTimeScale=function(t,e,i,o,n){var s,r,a;if(n)for(this.m_timeScale.reset(),s=this.dataSources(),r=0;r<s.length;r++)s[r].clearData&&s[r].clearData();this.m_timeScale.update(t,e,i,o),a="ChartModel.prototype.updateTimeScale("+t+","+e+","+i.length+","+o.length+","+n+")",a+="TimeScale: {first:"+this.m_timeScale.m_points.firstTimePointIndex()+",last:"+this.m_timeScale.m_points.lastTimePointIndex()+"}",TradingView.logDebugChart(a),this.recalculateAllPanes(),this.invalidate(new w(w.LIGHT_UPDATE))},l.prototype.recalculatePane=function(t){t&&t.recalculate()},l.prototype.paneForSource=function(t){for(var e=this.m_panes.length-1;e>=0;e--)if(this.m_panes[e].dataSources().indexOf(t)!==-1)return this.m_panes[e];return t instanceof v?this.paneForSource(this.m_mainSeries):null},l.prototype.recalculateAllPanes=function(){for(var t=0;t<this.m_panes.length;++t)this.m_panes[t].recalculate();this.timeScale().recalcLockedScale(),this.updateAllPaneViews()},l.prototype._invalidateBarColorerCaches=function(){var t,e,i=this.dataSources();for(t=0;t<i.length;++t)e=i[t],e instanceof I&&e.invalidateBarColorerCache()},l.prototype.addStrategySource=function(t){~this.strategySources.indexOf(t)||(this.strategySources.push(t),this.strategySources.change.fire())},l.prototype.removeStrategySource=function(t){var e=this.strategySources.indexOf(t);~e&&(this.strategySources.splice(e,1),this.strategySources.change.fire())},l.prototype.setActiveStrategySource=function(t){~this.strategySources.indexOf(t)&&this._activeStrategySource.setValue(t)},l.prototype.unsetActiveStrategySource=function(){this._activeStrategySource.setValue(null)},l.prototype.activeStrategySource=function(){return this._activeStrategySource},l.prototype.insertStudy=function(t,e,i){var o,n,s,r,a=null,l=["Study_ESD$TV_SPLITS@tv-scripting","Study_ESD$TV_DIVIDENDS@tv-scripting","Study_ESD$TV_SPLITS@tv-scripting","Volume@tv-basicstudies","Sessions@tv-basicstudies"];return l.indexOf(t.id)===-1&&TradingView.trackEvent("studies","Study_"+t.id),i||t.is_price_study?a=this.paneForSource(this.m_mainSeries):(a=this.createPane(void 0,!0),e&&e.paneSize&&a.setPaneSize(e.paneSize)),"Compare@tv-basicstudies"==t.id&&(TradingView.trackEvent("compare","symbol:"+e.inputs.symbol),this.m_mainSeries.priceScale().properties().log.setValue(!1),this.m_mainSeries.priceScale().properties().percentage.setValue(!0)),o=x(t,e,a,this.studyVersioning()),n=C(this,o,this.mainSeries(),t),n.start(),s=n.metaInfo().priceScale||E.SCALE_RIGHT,s===E.SCALE_RIGHT?r=a.rightPriceScale():s===E.SCALE_LEFT?r=a.leftPriceScale():t.is_price_study?r=null:(TradingView.logWarn("Cannot add study "+n.metaInfo().id+" with 'No Scale' setting, because study is not a price study. Using right price scale."),r=a.rightPriceScale()),i?a.addDataSource(n,null):a.addDataSource(n,r),n.properties().linkedToSeries&&n.properties().linkedToSeries.value()&&n.setOwnerSource(this.mainSeries()),this.recalculatePane(a),this.invalidate(new w(w.FULL_UPDATE)),this._invalidateBarColorerCaches(),this.recalcVisibleRangeStudy(this.dataSources(),!0),n},l.prototype.replaceStudyStub=function(t,e){var i,o,n,s=this.paneForSource(t);return null!==s&&(i=t.isNoScale()?null:t.priceScale(),o=t.zorder(),n=t.ownerSource(),s.insertDataSource(e,i,o),e.setOwnerSource(n),this.removeSource(t),e.start(),this.recalculatePane(s),this.invalidate(new w(w.FULL_UPDATE)),!0)},l.prototype.insertStudyStub=function(t){var e=this.mainSeries(),i=this.paneForSource(e),o=new L(this,null,t);return i.addDataSource(o,null),this.recalculatePane(i),this.invalidate(new w(w.FULL_UPDATE)),o},l.prototype.removeStudyStub=function(t){var e=this.dataSourceForId(t);return void 0===e?(TradingView.logNormal("StudyStub id="+t+" is not found in chart model"),!1):(this.removeSource(e),!0)},l.prototype.detachSource=function(t,e){var i=this.paneForSource(t);if(i)return i.removeDataSource(t),i.isEmpty()?(this._lineBeingCreated&&i==this._paneBeingCreatedLineOn&&this.cancelCreatingLine(),this.removePane(i,e),!0):(this.invalidate(new w(w.FULL_UPDATE)),!1)},l.prototype.removeSource=function(t,e){var i,o,n,s;if(t===this.m_selectedSource&&this.setSelectedSource(null),t===this._sourceBeingMoved&&(this._sourceBeingMoved=null,this._linePointBeingMoved=null),t.stop&&t.stop(),i=this.detachSource(t,e),t.metaInfo&&t.metaInfo()&&"Compare@tv-basicstudies"===t.metaInfo().id){for(o=this.paneForSource(this.m_mainSeries),n=o.dataSources(),s=0;s<n.length;s++)if(n[s].metaInfo&&"Compare@tv-basicstudies"===n[s].metaInfo().id)return;this.m_mainSeries.priceScale().properties().percentage.setValue(!1)}return this.invalidate(new w(w.FULL_UPDATE)),this._invalidateBarColorerCaches(),t.linkKey&&A.removeLineTool({model:this,linkKey:t.linkKey}),i},l.prototype.move=function(t,e,i){var o,n,s,r,a=this.children(t),l=([t].concat(a),this.paneForSource(t)),h=e?e.priceScaleName(i):"right",c=l===e;if(c){for(o=e.priceScaleByName(h),n=0;n<a.length;n++)e.move(a[n],o);e.move(t,o)}else{for(s=e?e:this.createPane(),r=s.priceScaleByName(h),n=0;n<a.length;n++)this.detachSource(a[n]);for(n=0;n<a.length;n++)s.addDataSource(a[n],r);this.detachSource(t),s.addDataSource(t,r)}this.invalidate(new w(w.FULL_UPDATE))},l.prototype.isSingleInstanceLineTool=function(t){return"LineStudyMtpRiskReward"==t||"LineStudyMtpAnalysis"==t},l.prototype._externalTimeStamp=function(t){return this.m_timeScale.points().roughTime(t)},l.prototype.createLineTool=function(t,e,i,o,n){var r,a,l,c,d,p,u,_;return h.isValid(i)?(this.isSingleInstanceLineTool(i)&&this._undoModel.removeAllDrawingTools(i),TradingView.trackEvent("drawings","Study_Drawing_"+i),r=h.create(i,this,o,null,t.mainDataSource()),a=!r.linkKey&&!n,A.drawOnAllCharts().value()?r.linkKey=n||TradingView.randomHash():r.linkKey=n,r.toolname=i,r.setOwnerSource(t.mainDataSource()),l=t.defaultPriceScale(),t.addDataSource(r,l),d=this.m_timeScale.indexToCoordinate(e.index),p=l.priceToCoordinate(e.price),r.isFixed()?c=r.addFixedPoint(new s.Point(d,p)):(u=r.constructor,u.skipMagnetting||(e.price=this._magnet.align(e.price,e.index,t)),c=r.addPoint(e)),c||(this._lineBeingCreated=r,this._paneBeingCreatedLineOn=t),a&&r.enableCurrentIntervalVisibility(),this.invalidate(new w(w.FULL_UPDATE)),n||!A.drawOnAllCharts().value()||r.properties().singleChartOnly||(_=this._externalTimeStamp(e.index),A.createLineTool({point:{price:e.price,timeStamp:_},linetool:i,properties:r.properties(),symbol:this.mainSeries().symbol(),model:this,linkKey:r.linkKey})),r):null},l.prototype.lineBeingCreated=function(){return this._lineBeingCreated},l.prototype.paneBeingCreatedLineOn=function(){return this._paneBeingCreatedLineOn},l.prototype.coninueCreatingLine=function(t,e,i,o){var n,s,r,a,l,h=this.paneForSource(this._lineBeingCreated);h.defaultPriceScale();return t.price=this._magnet.align(t.price,t.index,h),n=this._lineBeingCreated.addPoint(t,e,i),s=this._lineBeingCreated,this._lineBeingCreated.updateAllViews(),r=new w(w.LIGHT_UPDATE),a=null,n&&(a={points:this._lineBeingCreated._timePoint,interval:this.mainSeries().interval()},this._paneBeingCreatedLineOn=null,this._lineBeingCreated=null,r.force=!0),this.invalidate(r),o||!A.drawOnAllCharts().value()||s.properties().singleChartOnly||(l=this._externalTimeStamp(t.index),A.continueLineTool({point:{price:t.price,timeStamp:l},envState:e,finalState:a,model:this})),n},l.prototype.cancelCreatingLine=function(){if(this._lineBeingCreated){var t=this._lineBeingCreated;this.removeSource(this._lineBeingCreated),this._lineBeingCreated=null,this._lineCancelled.fire(),A.drawOnAllCharts().value()&&!t.properties().singleChartOnly&&A.cancelLineTool({model:this})}},l.prototype.startChangingLinetool=function(t,e,i,o){var n,s,r;this._lineBeingEdited=t,this._linePointBeingEdited=i,this._lineBeingEdited.startChanging(i,e),n=this.paneForSource(t),e.price=this._magnet.align(e.price,e.index,n),this._lineBeingEdited.startDragPoint&&this._lineBeingEdited.startDragPoint(i,e),this._lineBeingEdited.setPoint(i,e,o),this._lineBeingEdited.updateAllViews(),s=this._paneInvalidationMask(n,w.LIGHT_UPDATE),s.force=!0,this.invalidate(s),t.linkKey&&!t.properties().singleChartOnly&&(r=this._externalTimeStamp(e.index),A.startChangingLineTool({linkKey:t.linkKey,model:this,symbol:this.mainSeries().symbol(),point:{price:e.price,timeStamp:r},pointIndex:i}))},l.prototype.lineBeingEdited=function(){return this._lineBeingEdited},l.prototype.linePointBeingEdited=function(){return this._linePointBeingEdited},l.prototype.changeLinePoint=function(t,e){var i,o,n,s,r=this.paneForSource(this._lineBeingEdited);void 0!==t.x&&void 0!==t.y?(n=this._lineBeingEdited.priceScale(),i=n.coordinateToPrice(t.y),o=Math.round(this.timeScale().coordinateToIndex(t.x)),i=this._magnet.align(i,o,r),this._lineBeingEdited.setPoint(this._linePointBeingEdited,{price:i,index:o},e)):this._lineBeingEdited.setPoint(this._linePointBeingEdited,t,e),this._lineBeingEdited.updateAllViews(),this.invalidate(new w(w.LIGHT_UPDATE)),this._lineBeingEdited.linkKey&&!this._lineBeingEdited.properties().singleChartOnly&&(s=this._externalTimeStamp(o),A.changeLineTool({linkKey:this._lineBeingEdited.linkKey,model:this,symbol:this.mainSeries().symbol(),point:{price:i,timeStamp:s}}))},l.prototype.endChangingLinetool=function(t){var e,i,o=(this.paneForSource(this._lineBeingEdited),this._lineBeingEdited);this._lineBeingEdited.endChanging(!1,t),this._lineBeingEdited=null,this._linePointBeingEdited=null,e=new w(w.LIGHT_UPDATE),e.force=!0,this.invalidate(e),i={points:o._timePoint,interval:this.mainSeries().interval()},o.linkKey&&!o.properties().singleChartOnly&&A.finishChangingLineTool({model:this,linkKey:o.linkKey,symbol:this.mainSeries().symbol(),finalState:i})},l.prototype.startMovingSource=function(t,e,i){var o,n,s;this._sourceBeingMoved=t,this._linePointBeingMoved=i,this._sourceBeingMoved.startMoving(e,i),o=this.paneForSource(this._sourceBeingMoved),n=this._paneInvalidationMask(o,w.LIGHT_UPDATE),n.force=!0,this.invalidate(n),t.linkKey&&!t.properties().singleChartOnly&&(s=this._externalTimeStamp(e.index),A.startMovingLineTool({linkKey:t.linkKey,model:this,symbol:this.mainSeries().symbol(),point:{price:e.price,timeStamp:s}}))},l.prototype.sourceBeingMoved=function(){return this._sourceBeingMoved},l.prototype.moveSource=function(t){var e,i;this._sourceBeingMoved.move(t,this._linePointBeingMoved),e=this.paneForSource(this._sourceBeingMoved),this.invalidate(new w(w.LIGHT_UPDATE)),this._sourceBeingMoved.linkKey&&!this._sourceBeingMoved.properties().singleChartOnly&&(i=this._externalTimeStamp(t.index),A.moveLineTool({linkKey:this._sourceBeingMoved.linkKey,model:this,point:{price:t.price,timeStamp:i}}))},l.prototype.endMovingSource=function(t){var e,i,o=this._sourceBeingMoved,n=this.paneForSource(this._sourceBeingMoved);this._sourceBeingMoved.endMoving(t),this._sourceBeingMoved=null,this._linePointBeingMoved=null,e=this._paneInvalidationMask(n,w.LIGHT_UPDATE),e.invalidateAll(w.LIGHT_UPDATE),e.force=!0,this.invalidate(e),o instanceof c&&(i={points:o._timePoint,interval:this.mainSeries().interval()},o.linkKey&&!o.properties().singleChartOnly&&A.finishMovingLineTool({linkKey:o.linkKey,model:this,finalState:i}))},l.prototype.finishLineTool=function(t){var e=this.lineBeingCreated();e&&(e.finish&&e.finish(),!t&&A.drawOnAllCharts().value()&&e.linkKey&&!e.properties().singleChartOnly&&A.finishLineTool({linkKey:e.linkKey,model:this}))},l.prototype.calculateDefaultTags=function(){var t,e,i=[],o=this.dataSources();for(t=0;t<o.length;t++)e=o[t],e.tags&&(i=i.concat(e.tags()));return i},l.prototype.changeZOrder=function(t,e){var i=this.paneForSource(t);i.changeZOrder(t,e),this.invalidate(new w(w.FULL_UPDATE))},l.prototype.sendToBack=function(t){var e=this.paneForSource(t);e.sendToBack(t),this.invalidate(new w(w.FULL_UPDATE))},l.prototype.bringToFront=function(t){var e=this.paneForSource(t);e.bringToFront(t),this.invalidate(new w(w.FULL_UPDATE))},l.prototype.onTagsChanged=function(){return this._tagsChanged},l.prototype.onPaneTagsChanged=function(){this._tagsChanged.fire()},l.prototype.setTimeViewport=function(t,e){this.timeScale().zoomToBarsRange(t,e),this.recalculateAllPanes(),this.invalidate(new w(w.LIGHT_UPDATE))},l.prototype.zoomToViewport=function(t,e,i,o,n){var s,a,l;this.setTimeViewport(t,e),s=Math.min(i,o),a=Math.max(i,o),l=n.defaultPriceScale(),l.setAutoScale(!1),l.isLog()&&(s=l.priceToLogical(s),a=l.priceToLogical(a)),l.setPriceRange(new r(s,a)),this.recalculateAllPanes(),this.invalidate(this._paneInvalidationMask(n,w.LIGHT_UPDATE))},l.prototype.clearAllStudies=function(){var t,e=this.dataSources();for(t=0;t<e.length;t++)e[t].clearData&&e[t].clearData()},l.prototype.allLineTools=function(){var t,e,i,o,n,s,r=[],a=this.m_panes,l=a.length;for(t=0;t<l;++t)for(e=a[t],i=e.dataSources(),o=i.length,n=0;n<o;++n)s=i[n],TradingView.isInherited(s.constructor,c)&&r.push(s);return r},l.prototype.backgroundColor=function(){return this._properties.paneProperties.background._value},l.prototype.backgroundCounterColor=function(){return new b(this.backgroundColor()).blackWhiteContrast()},l.prototype.isDark=function(){return"white"===this.backgroundCounterColor()},l.prototype.canZoomIn=function(){return this.m_timeScale.canZoomIn()},l.prototype.canZoomOut=function(){return this.m_timeScale.canZoomOut()},l.prototype.updateAllVolumeStudies=function(){var t,e,i,o,n,s,r=this.m_panes;for(t=r.length;t--;)for(e=!1,i=r[t],o=i.dataSources(),n=o.length;n--;)s=o[n],s instanceof T&&"Volume"===s.metaInfo().shortId&&(s.updateAllViews(),e||(this.updatePane(i),e=!0))},l.prototype.alertsList=function(){return this._alertsList},l.prototype._modelIntervals=[],l.prototype.setInterval=function(t,e){var i=setInterval(t,e);return this._modelIntervals.push(i),i},l.prototype.clearInterval=function(t){clearInterval(t);var e=this._modelIntervals.indexOf(t);e>-1&&this._modelIntervals.splice(e,1)},l.prototype.clearIntervals=function(){for(var t=0;t<this._modelIntervals.length;t++)clearInterval(this._modelIntervals[t]);this._modelIntervals=[]},l.prototype.destroy=function(){this.clearIntervals()},l.prototype.countUserStudies=function(){var t,e,i,o,n=0;for(t=0;t<this.m_panes.length;t++)for(e=this.m_panes[t].dataSources(),i=0;i<e.length;i++)o=e[i],o instanceof T&&o.showInObjectTree()&&n++;return n},l.prototype.isJustClonedChart=function(){return this._undoModel.isJustClonedChart()},l.prototype.copyToOtherCharts=function(t){var e,i;t.linkKey=t.linkKey||TradingView.randomHash(),e=this,i=t.state(),i.points=t._timePoint.map(function(t){var i=e.timeScale().timePointToIndex(t.time_t)+t.offset;return{price:t.price,time_t:t.time_t,offset:t.offset,absolute_time:e.timeScale().points().roughTime(i)}}),i.linetool=t.getType(),i.model=this,i.symbol=this.mainSeries().symbol(),A.copyLineTool(i)},l.prototype.restoreSource=function(t,e,i,o,n){var s,r,l,h,c,d,p,u;return s=t?this.createPane(e):this.panes()[e],l=o.type,r=l.toLowerCase().startsWith("study")?s._restoreStudy(o):s._restoreLineTool(o),h=r.ownerSource()?r.ownerSource().priceScale():s.priceScaleByName(n),h?(r.setPriceScale(h),h.addDataSource(r)):(h=new a(s._properties.overlayPropreties,this.properties().scalesProperties),h.setHeight(s.m_height),c=r.metaInfo&&"Volume@tv-basicstudies"==r.metaInfo().id,d=c?.75:s.m_rightPriceScale.topMargin(),p=c?0:s.m_rightPriceScale.bottomMargin(),h.setTopMargin(d),h.setBottomMargin(p),h.addDataSource(r),r.setPriceScale(h),r._isOverlay=!0),u=null,o.ownerSource&&(u=s.dataSourceForId(o.ownerSource)),r.setOwnerSource(u),r.setPriceScale(h),r.start(),r.restore&&r.restore(),t&&s.restoreState(i),this.recalculateAllPanes(),this.mainSeries().invalidateBarColorerCache(),this.invalidate(new w(w.FULL_UPDATE,(!0))),r.linkKey&&A.restoreLineTool({model:this,linkKey:r.linkKey,state:{restorePane:t,paneIndex:e,paneState:i,sourceState:o,priceScaleName:n}}),r},l.prototype.restoreLineToolState=function(t,e){t.restorePoints(e.points,e.indexes||[]),t.properties().merge(e.state),t.restoreData&&t.restoreData(e),t.createServerPoints(),this.invalidate(new w(w.FULL_UPDATE)),t.linkKey&&A.restoreLineToolState({model:this,linkKey:t.linkKey,state:e})},t.exports=l}).call(e,i(32),i(1),i(45),i(21),i(78),i(109))},function(t,e,i){"use strict";function o(){}var n=i(116),s=i(247);o.isValid=function(t){var e=n[t]||s[t];return!!e},o.create=function(t,e,i,r,a){var l,h;return assert(o.isValid(t),"Unknown line tool: "+t),l=n[t]||s[t],h="LineToolVbPFixed"==t?new l(e,i,r,a):"LineToolRegressionTrend"==t?new l(e,i,r):["LineStudyMtpAnalysis","LineStudyMtpDecisionPoint","LineStudyMtpRiskReward","LineStudyMtpElliotWaveMain","LineStudyMtpElliotWaveMajor","LineStudyMtpElliotWaveMinor","LineStudyMtpDownWave1OrA","LineStudyMtpDownWave2OrB","LineStudyMtpDownWave3","LineStudyMtpDownWave4","LineStudyMtpDownWave5","LineStudyMtpDownWaveC","LineStudyMtpUpWave1OrA","LineStudyMtpUpWave2OrB","LineStudyMtpUpWave3","LineStudyMtpUpWave4","LineStudyMtpUpWave5","LineStudyMtpUpWaveC"].indexOf(t)>=0?new l(e,i,r):new l(e,i)},t.exports=o},function(t,e,i){"use strict";for(var o={LineToolFibRetracement:i(117),LineToolFibChannel:i(124),LineToolFibSpeedResistanceArcs:i(126),LineToolProjection:i(127),LineToolTrendBasedFibExtension:i(129),LineToolElliott:i(130).LineToolElliott,LineToolFibCircles:i(131).LineToolFibCircles,LineToolTrading:i(134),LineToolVbPFixed:i(135),LineStudyMtp:i(194),LineToolVertLine:i(137).LineToolVertLine,LineToolBarsPattern:i(195),LineToolTrendBasedFibTime:i(196),LineToolFibTimeZone:i(197),LineToolCircleLines:i(198),LineToolDateRange:i(199),LineToolPriceRange:i(200),LineToolDateAndPriceRange:i(201),LineToolParallelChannel:i(125).LineToolParallelChannel,LineToolTrendAngle:i(202),LineToolTrendLine:i(122).LineToolTrendLine,LineToolArrowMark:i(203).LineToolArrowMark,LineToolExecution:i(112).LineToolExecution,LineToolPitchfan:i(205),LineToolGannSquare:i(207),LineToolFibSpeedResistanceFan:i(208),LineToolGannComplex:i(209),LineToolGannFan:i(210),LineToolFibWedge:i(128).LineToolFibWedge,LineToolPitchfork:i(206).LineToolPitchfork,LineToolDisjointAngle:i(211),LineToolFlatBottom:i(212),LineToolIcon:i(213),LineToolRotatedRectangle:i(214),LineToolFibSpiral:i(215),LineToolHeadAndShoulders:i(216),LineToolTriangle:i(217).LineToolTriangle,LineToolTrianglePattern:i(218),LineTool5PointsPattern:i(219).LineTool5PointsPattern,LineToolThreeDrivers:i(220),LineToolABCD:i(221),LineToolRiskReward:i(222).LineToolRiskReward,LineToolPolyline:i(223),LineToolPrediction:i(224),LineToolPriceLabel:i(226),LineToolNote:i(227).LineToolNote,LineToolNoteAbsolute:i(227).LineToolNoteAbsolute,LineToolBrush:i(228),LineToolArc:i(229),LineToolCallout:i(230),LineToolBalloon:i(231),LineToolText:i(98).LineToolText,LineToolHorzLine:i(96).LineToolHorzLine,LineToolHorzRay:i(232),LineToolRectangle:i(120).LineToolRectangle,LineToolEllipse:i(233),LineToolTimeCycles:i(234),LineToolSineLine:i(235),LineToolGhostFeed:i(236),LineToolBezierQuadro:i(237).LineToolBezierQuadro,LineToolBezierCubic:i(237).LineToolBezierCubic,LineToolArrow:i(238),LineToolRay:i(239),LineToolExtended:i(240),LineToolSchiffPitchfork:i(241),LineToolSchiffPitchfork2:i(242),LineToolInsidePitchfork:i(243),LineToolTextAbsolute:i(98).LineToolTextAbsolute,LineToolArrowMarkLeft:i(203).LineToolArrowMarkLeft,LineToolArrowMarkRight:i(203).LineToolArrowMarkRight,LineToolArrowMarkUp:i(203).LineToolArrowMarkUp,LineToolArrowMarkDown:i(203).LineToolArrowMarkDown,LineToolFlagMark:i(244),LineToolCypherPattern:i(219).LineToolCypherPattern,LineToolElliottImpulse:i(130).LineToolElliottImpulse,LineToolElliottTriangle:i(130).LineToolElliottTriangle,LineToolElliottTripleCombo:i(130).LineToolElliottTripleCombo,LineToolElliottCorrection:i(130).LineToolElliottCorrection,LineToolElliottDoubleCombo:i(130).LineToolElliottDoubleCombo,LineToolRiskRewardLong:i(222).LineToolRiskRewardLong,LineToolRiskRewardShort:i(222).LineToolRiskRewardShort,LineToolPosition:i(245),LineToolOrder:i(246)},n=Object.keys(o),s=n.length;s--;)TradingView[n[s]]=o[n[s]];t.exports=o},function(t,e,i){(function(e){"use strict";function o(){l.call(this)}function n(t,e){c.call(this,t,e),this._rendererCache={},this._invalidated=!0}function s(t,e){this._constructor="LineToolFibRetracement";var i=e?e:new this.createPropertiesObject("linetoolfibretracement");h.call(this,t,new n(this,t),i),this.version=s.version,this._properties._stateVersion=1,t._fibRetracementLabelsCache||(t._fibRetracementLabelsCache=new o)}var r=i(118),a=i(120).RectangleTransparencyRenderer,l=i(121),h=i(67).LineDataSource,c=i(97),d=i(122).TrendLineRenderer,p=i(123),u=i(88),_=i(92);inherit(o,l),o.prototype.levelsCount=function(){return s.LevelsCount},inherit(n,c),n.prototype.update=function(){this._invalidated=!0},n.prototype._updateImpl=function(){var t,e,i,o,n,r,a,l,h,d,p,u,_,f;if(c.prototype.update.call(this),this._cacheState=this._model._fibRetracementLabelsCache.updateSource(this._source),!(this._source.points().length<2)&&this._source.priceScale()&&!this._source.priceScale().isEmpty()&&!this._model.timeScale().isEmpty()&&(t=this._source.points()[0],e=this._source.points()[1],i=!1,o=this._source.properties(),o.reverse&&o.reverse.value()&&(i=o.reverse.value()),this._levels=[],n=i?e.price-t.price:t.price-e.price,r=i?t.price:e.price,!this._source.priceScale().isPercent()||(a=this._source.ownerSource().firstValue(),null!==a)))for(l=1;l<=s.LevelsCount;l++)h="level"+l,d=o[h],d.visible.value()&&(p=d.coeff.value(),u=d.color.value(),_=r+p*n,this._source.priceScale().isPercent()&&(_=this._source.priceScale().priceRange().convertToPercent(_,a)),f=this._source.priceScale().priceToCoordinate(_),this._levels.push({color:u,y:f,linewidth:o.levelsStyle.linewidth.value(),linestyle:o.levelsStyle.linestyle.value(),index:l}))},n.prototype.renderer=function(){var t,i,o,n,s,r,l,c,f,g,m,v,y,w,b,S,T,C,x,P,L,k,E,I;if(this._invalidated&&(this._updateImpl(),this._invalidated=!1),t=new _,this._points.length<2)return t;for(i=this._points[0],o=this._points[1],n=Math.min(i.x,o.x),s=Math.min(i.y,o.y),r=Math.max(i.x,o.x),l=Math.max(i.y,o.y),c=this._source.properties(),f=c.fillBackground.value(),g=c.transparency.value(),m=c.extendLines.value()?this._model.timeScale().width():r,v=this._model._fibRetracementLabelsCache,y=v.canvas().get(0),w=0;w<this._levels.length;w++)if(w>0&&f&&(b=this._levels[w-1],i=new e.Point(n,this._levels[w].y),o=new e.Point(m,b.y),S={},S.points=[i,o],S.color=this._levels[w].color,S.linewidth=0,S.backcolor=this._levels[w].color,S.fillBackground=!0,S.transparency=g,t.append(new a(S))),i=new e.Point(n,this._levels[w].y),o=new e.Point(r,this._levels[w].y),T={points:[i,o],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:this._levels[w].color,linewidth:this._levels[w].linewidth,linestyle:this._levels[w].linestyle,extendleft:!1,extendright:c.extendLines.value(),leftend:h.LINEEND_NORMAL,rightend:h.LINEEND_NORMAL},C=new u(u.MOVEPOINT,null,this._levels[w].index),t.append(new d(T,C)),c.showCoeffs.value()||c.showPrices.value()){if(!this._cacheState.preparedCells)continue;if(x=this._cacheState.preparedCells.cells[this._levels[w].index-1],!x)continue;switch(c.horzLabelsAlign.value()){case"left":P=i;break;case"center":P=i.add(o).scaled(.5),P.x+=x.width/2,P.x=Math.round(P.x);break;case"right":c.extendLines.value()?P=new e.Point(m-4,this._levels[w].y):(P=new e.Point(m+4,this._levels[w].y),P.x+=x.width,P.x=Math.round(P.x))}L={left:x.left,top:v.topByRow(this._cacheState.row),width:x.width,height:v.rowHeight(this._cacheState.row)},k={left:P.x-L.width,top:P.y,width:x.width,height:L.height},E=c.vertLabelsAlign.value(),"middle"==E&&(k.top-=k.height/2),"bottom"==E&&(k.top-=k.height),I=new p(y,L,k),t.append(I)}return c.trendline.visible.value()&&(T={points:[this._points[0],this._points[1]],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:c.trendline.color.value(),linewidth:c.trendline.linewidth.value(),linestyle:c.trendline.linestyle.value(),extendleft:!1,extendright:!1,leftend:h.LINEEND_NORMAL,rightend:h.LINEEND_NORMAL},t.append(new d(T))),this.addAnchors(t),t},inherit(s,h),s.version=2,s.LevelsCount=24,s.prototype.stop=function(){h.prototype.stop.call(this),this._model._fibRetracementLabelsCache.removeSource(this.id())},s.prototype.pointsCount=function(){return 2},s.prototype.title=function(){return"Fib Retracement"},s.prototype.migrateVersion=function(t,e,i){1==t&&this.properties().extendLines.setValue(!0)},s.prototype.processErase=function(t,e){var i="level"+e,o=this.properties()[i].visible;t.setProperty(o,!1,"Erase level line")},s.prototype.createPropertiesObject=function(t,e,i){return new r(t,e,i,{range:[1,24],names:["coeff","color","visible"]})},t.exports=s}).call(e,i(21))},function(t,e,i){(function(e){"use strict";function o(t,e,i,o){this._map=$.extend({},this._map,o),e&&(e=this.unpackLevels(e)),s.call(this,t,e,i),this.updateCollectibleProperty()}var n=i(19).isSameType,s=i(73).DefaultProperty,r=i(119);inherit(o,s),o.prototype.state=function(t,i){t=t||[],t.push("__collectibleLines");var o=e.prototype.state.call(this,t);
return i?o:this.packLevels(o)},o.prototype.merge=function(t){e.prototype.merge.call(this,this.unpackLevels(t)),this.updateCollectibleProperty()},o.prototype._map={prefixes:[""],range:[0,0],names:["coeff","color","visible","linestyle","linewidth"],typecheck:{pack:Object,unpack:Array}},o.prototype._packLvlTpl=function(){return[]},o.prototype._unpackLvlTpl=function(){return{}},o.prototype._packLvlFill=function(t,e,i,o){return o.push(i[e]),o},o.prototype._unpackLvlFill=function(t,e,i,o){return o[e]=i[t],o},o.prototype._iterateLevels=function(t,e){var i,o,s,r,a;for(i in this._map.prefixes)for(o=(this._map.prefixes[i]||"")+"level",s=this._map.range[0];s<=this._map.range[1];s++)if(t[o+s]&&n(t[o+s],e.typecheck())){r=e.tpl();for(a in this._map.names)r=e.fill(a,this._map.names[a],t[o+s],r);t[o+s]=r}return t},o.prototype.packLevels=function(t){return this._iterateLevels(t,{tpl:this._packLvlTpl,fill:this._packLvlFill,typecheck:this._map.typecheck.pack})},o.prototype.unpackLevels=function(t){return this._iterateLevels(t,{tpl:this._unpackLvlTpl,fill:this._unpackLvlFill,typecheck:this._map.typecheck.unpack})},o.prototype.saveDefaults=function(){TradingView.saveDefaults(this._defaultName,this.state(this._exclusions,!0))},o.prototype.updateCollectibleProperty=function(){var t,e;this.__collectibleLines&&(t=this,e=[],this.__collectibleLines._childs.forEach(function(i){var o,n=t.__collectibleLines[i].value(),s=n.split("."),r=t[s[0]];for(o=1;o<s.length&&r;++o)r=r[s[o]];r&&e.push({property:r.color,defaultValue:r.color.value()})}),this.collectibleColors?this.collectibleColors.reloadProperties(e):this.collectibleColors=new r(e))},t.exports=o}).call(e,i(63))},function(t,e,i){(function(e){"use strict";function i(t){e.call(this,""),this.subscribe(this,i.prototype.checkSelfColor),this.reloadProperties(t)}inherit(i,e),i.prototype.reloadProperties=function(t){var e;for(e=0;e<this._childs.length;++e)this.removeProperty(this._childs[e]);for(this._initValues=[],e=0;e<t.length;++e)this._initValues.push(t[e].defaultValue),this.addChild(e,t[e].property);this.checkSelfColor()},i.prototype.setValue=function(t,i){if(this._value!==t||i){var o=this;this._childs.forEach(function(e){o[e].setValue(t||o._initValues[e])}),e.prototype.setValue.call(this,t,i)}},i.prototype.checkSelfColor=function(){var t,i=!0;for(t=0;t<this._initValues.length;++t)if(this[t].value()!==this[0].value()){i=!1;break}e.prototype.setValue.call(this,i?this[0].value():"")},t.exports=i}).call(e,i(63))},function(t,e,i){(function(t){"use strict";function o(t,e,i){this._data=t,this._hittestResult=e||new h(h.MOVEPOINT),this._backHittestResult=i||new h(h.MOVEPOINT_BACKGROUND)}function n(t,e){l.call(this,t,e),this._invalidated=!0}function s(t,e){this._constructor="LineToolRectangle";var i=e?e:new d("linetoolrectangle");a.call(this,t,new n(this,t),i)}function r(t,e,i){o.call(this,t,e,i)}var a=i(67).LineDataSource,l=i(97),h=i(88),c=i(92),d=i(73).DefaultProperty;o.prototype.getColor=function(){return TradingView.generateColor(this._data.backcolor,this._data.transparency)},o.prototype.draw=function(t){var e,i,o,n,s;this._data.points.length<2||(t.lineCap="butt",t.strokeStyle=this._data.color,t.lineWidth=this._data.linewidth,t.lineStyle=this._data.linestyle,e=this._data.points[0],i=this._data.points[1],o=i.substract(e),n=t.canvas.width,s=t.canvas.height,t.beginPath(),t.rect(e.x,e.y,o.x,o.y),this._data.linewidth>0&&t.stroke(),this._data.fillBackground&&(t.fillStyle=this.getColor(),t.fill()))},o.prototype.hitTest=function(e){var i,o,n,s,r,a,l,h,c,d;return this._data.points.length<2||this._data.nohittest?null:(i=3,o=this._data.points[0],n=this._data.points[1],s=new t.Point(n.x,o.y),r=new t.Point(o.x,n.y),a=t.distanceToSegment(o,s,e),a.distance<=i?this._hittestResult:(a=t.distanceToSegment(s,n,e),a.distance<=i?this._hittestResult:(a=t.distanceToSegment(n,r,e),a.distance<=i?this._hittestResult:(a=t.distanceToSegment(r,o,e),a.distance<=i?this._hittestResult:this._data.fillBackground&&(l=Math.min(o.x,n.x),h=Math.max(o.x,n.x),c=Math.min(o.y,n.y),d=Math.max(o.y,n.y),o=new t.Point(l,c),n=new t.Point(h,d),t.pointInRect(e,o,n))?this._backHittestResult:null))))},inherit(n,l),n.prototype.update=function(){this._invalidated=!0},n.prototype.updateImpl=function(){l.prototype.update.call(this),this._invalidated=!1},n.prototype.renderer=function(){var t,e;return this._invalidated&&this.updateImpl(),t={},t.points=this._points,t.color=this._source.properties().color.value(),t.linewidth=this._source.properties().linewidth.value(),t.backcolor=this._source.properties().backgroundColor.value(),t.fillBackground=this._source.properties().fillBackground.value(),t.transparency=this._source.properties().transparency.value(),this.isAnchorsRequired()?(e=new c,e.append(new o(t)),this.addAnchors(e),e):new o(t)},inherit(s,a),s.prototype.pointsCount=function(){return 2},s.prototype.title=function(){return"Rectangle"},inherit(r,o),r.prototype.getColor=function(){return TradingView.generateColor(this._data.backcolor,this._data.transparency,!0)},e.RectangleRenderer=o,e.RectangleTransparencyRenderer=r,e.LineToolRectangle=s}).call(e,i(21))},function(t,e,i){"use strict";function o(){this._registeredSources={},this._sourcesToRow={},this._rowsToSources={},this._currentSymbol="",this._actualCapacity=0,this._actualWidth=1,this._numericFormatter=new r,this._percentageFormatter=new s}var n=i(75),s=n.PercentageFormatter,r=n.NumericFormatter;o.prototype.levelsCount=function(){return 0},o.prototype.topByRow=function(t){return t*o.ROW_HEIGHT},o.prototype.rowHeight=function(t){return o.ROW_HEIGHT},o.prototype.canvas=function(){if(!this._canvas){this._canvas=$("<canvas>"),this._cache=this._canvas.get(0).getContext("2d"),this._canvas.prop("width",100).css("position","absolute").css("top",0).css("z-index",1e3).css("left",0);var t=this._canvas.get(0).getContext("2d");t.font="12px Verdana"}return this._canvas},o.ROW_HEIGHT=14,o.prototype.points=function(t){return[t.points()[0],t.points()[1]]},o.prototype.startPoint=function(t,e){var i=e?t.points()[0]:t.points()[1];return i},o.prototype.priceRange=function(t,e){var i=this.points(t),o=i[0],n=i[1],s=e?n.price-o.price:o.price-n.price;return s},o.prototype.sourceIsReady=function(t){return t.points().length>=2},o.prototype._calculateWidth=function(t){var e,i,o,n,s,r,a,l,h,c,d,p,u,_,f,g,m,v,y,w,b,S,T,C;if(!this.sourceIsReady(t))return null;if(e=this.canvas().get(0).getContext("2d"),e.font="12px Verdana",i=0,o=!!t.properties().showPrices&&t.properties().showPrices.value(),n=!!t.properties().coeffsAsPercents&&t.properties().coeffsAsPercents.value(),s=t.properties().showCoeffs.value(),r=t.priceScale().formatter(),a=this.points(t),l=a[0],h=a[1],!l||!h)return null;if(c=!1,d=t.properties(),d.reverse&&d.reverse.value()&&(c=d.reverse.value()),p=this.priceRange(t,c),u=this.startPoint(t,c).price,t.priceScale().isPercent()&&(_=t.ownerSource().firstValue(),null===_))return 0;for(f=0,g=[],m=1;m<=this.levelsCount();m++)v="level"+m,y=d[v],w=y.coeff.value(),b=u+w*p,t.priceScale().isPercent()&&(b=t.priceScale().priceRange().convertToPercent(b,_)),S="",s&&(S+=n?this._percentageFormatter.format(Math.round(1e4*w)/100):this._numericFormatter.format(w)),o&&(S+="("+r.format(b)+")"),T=e.measureText(S).width,C={text:S,left:f,width:T+4},g.push(C),f+=C.width;return{totalWidth:f,cells:g}},o.prototype._effectiveState=function(t){var e,i,o,n,s,r,a={},l=t.properties();for(l.showPrices&&(a.showPrices=l.showPrices.value()),l.coeffsAsPercents&&(a.coeffsAsPercents=l.coeffsAsPercents.value()),a.showCoeffs=l.showCoeffs.value(),t.priceScale()&&t.priceScale().formatter().state&&(a.formatter=t.priceScale().formatter().state()),l.reverse&&(a.reverse=l.reverse.value()),a.p1=t.points()[0],a.p2=t.points()[1],3==t.points().length&&(a.p3=t.points()[2]),a.items=[],e=1;e<=this.levelsCount();e++)i="level"+e,o=l[i],n=o.coeff.value(),s=o.color.value(),r={coeff:n,color:s},a.items.push(r);return a},o.prototype._findEmptyRow=function(t){for(var e,i=0;this._rowsToSources[i];)i++;return this._rowsToSources[i]=t,i>=this._actualCapacity&&(this._actualCapacity++,e=this.canvas(),TradingView.resizeCanvas(e,this._actualWidth,o.ROW_HEIGHT*this._actualCapacity)),i},o.prototype._repaintSource=function(t,e,i){var n,s,r=o.ROW_HEIGHT*i.row,a=this.canvas().get(0).getContext("2d");for(a.clearRect(0,r,this._actualWidth,o.ROW_HEIGHT),a.textBaseline="bottom",a.font="12px Verdana",r+=o.ROW_HEIGHT,n=0;n<t.cells.length;n++)s=t.cells[n],a.fillStyle=e.items[n].color,a.fillText(s.text,s.left,r)},o.prototype.removeSource=function(t){var e,i;this._sourcesToRow[t]&&(e=this._sourcesToRow[t].row,i=this.canvas().get(0).getContext("2d"),i.save(),i.clearRect(0,this.topByRow(e),this._actualWidth,o.ROW_HEIGHT),i.restore(),delete this._sourcesToRow[t],delete this._rowsToSources[e])},o.prototype._effectiveStatesEquals=function(t,e){var i,o=function(t,e){return!(!t&&!e)&&(!(!t||e)||(!(t||!e)||(t.minMove!=e.minMove||(t.minMove2!=e.minMove2||(t.fractional!=e.fractional||t.fractionalLength!=e.fractionalLength)))))},n=function(t,e){return!(!t&&!e)&&(!(!t||e)||(!(t||!e)||(t.index!=e.index||t.price!=e.price)))},s=function(t,e){return t.coeff!=e.coeff||t.color!=e.color};if(t&&!e)return!1;if(!t&&e)return!1;if(t.showPrices!=e.showPrices)return!1;if(t.coeffsAsPercents!=e.coeffsAsPercents)return!1;if(t.showCoeffs!=e.showCoeffs)return!1;if(t.reverse!=e.reverse)return!1;if(o(t.formatter,e.formatter))return!1;if(n(t.p1,e.p1))return!1;if(n(t.p2,e.p2))return!1;if(n(t.p3,e.p3))return!1;if(t.items.length!=e.items.length)return!1;for(i=0;i<t.items.length;i++)if(s(t.items[i],e.items[i]))return!1;return!0},o.prototype.updateSource=function(t){var e,i,n,s,r=t.properties().symbol.value();return this._currentSymbol!=r&&(this._currentSymbol=r,this._sourcesToRow={},this._rowsToSources={}),this._sourcesToRow[t.id()]||(e=this._findEmptyRow(t.id()),this._sourcesToRow[t.id()]={effectiveState:null,row:e}),i=this._sourcesToRow[t.id()].effectiveState,n=this._effectiveState(t),this._effectiveStatesEquals(i,n)||(s=this._calculateWidth(t),s?(this._sourcesToRow[t.id()].effectiveState=n,s.totalWidth>this._actualWidth&&(TradingView.resizeCanvas(this.canvas(),s.totalWidth,o.ROW_HEIGHT*this._actualCapacity),this._actualWidth=s.totalWidth),e=this._sourcesToRow[t.id()],this._repaintSource(s,n,e),this._sourcesToRow[t.id()].effectiveState=n,this._sourcesToRow[t.id()].preparedCells=s):this._sourcesToRow[t.id()].effectiveState=null),this._sourcesToRow[t.id()]},t.exports=o},function(t,e,i){(function(t){"use strict";function o(){var t,e,i,o;this._registeredSources={},this._sourcesToRow={},this._rowsToSources={},this._currentSymbol="",this._actualCapacity=0,this._actualWidth=0,this._canvas=$("<canvas>"),this._cache=this._canvas.get(0).getContext("2d"),this._currentWidth=400,this._canvas.prop("width",this._currentWidth).prop("height",1).css("position","absolute").css("top",0).css("z-index",1e3).css("left",0),this._ctx=this._canvas.get(0).getContext("2d"),this._ctx.font=l.LABEL_FONTSIZE+"px"+l.LABEL_FONT,t=l.LABEL_FONTSIZE,e=l.LABEL_LINESPACING,i=t+e,o=3,this._padding=8,this._rowHeight=i*o-e+2*this._padding+2}function n(t,e,i){this._textSizeCache=e,this._data=t,this._fontSize=t.fontsize?t.fontsize:t.fontSize?t.fontSize:12,this._lineSpacing="number"==typeof this._data.lineSpacing&&this._data.lineSpacing?this._data.lineSpacing:0,t.lines=this._lines=y.prototype.wordWrap.call(this,t.text,t.wordWrapWidth),this._hittest=i?i:new b(b.MOVEPOINT)}function s(){var t=document.createElement("canvas");t.width=0,t.height=0,c=t.getContext("2d"),t=null}function r(t,e){this._data=t,this._hittest=e?e:new b(b.MOVEPOINT)}function a(t,e){m.call(this,t,e),this._label=null,this._rendererCache={},this._invalidated=!0,this._labelDataInvalidated=!0,this._percentageFormatter=new P,this._numericFormatter=new L}function l(t,e){this._constructor="LineToolTrendLine";var i=e?e:new C("linetooltrendline");v.call(this,t,new a(this,t),i),t._trendLineStatsCache||(t._trendLineStatsCache=new o)}function h(t,e,i,o,n,s){var r=p;return t<i?r|=u:t>n&&(r|=_),e<o?r|=f:e>s&&(r|=g),r}var c,d,p,u,_,f,g,m=i(97),v=i(67).LineDataSource,y=i(98).TextRenderer,w=i(123),b=i(88),S=i(89).PaneRendererClockIcon,T=i(92),C=i(73).DefaultProperty,x=i(75),P=x.PercentageFormatter,L=x.NumericFormatter,k=x.TimeSpanFormatter;o.prototype.canvas=function(){return this._canvas},o.prototype.topByRow=function(t){return t*this._rowHeight},o.prototype.rowHeight=function(t){return this._rowHeight},o.prototype.rowWidth=function(t){var e=this._rowsToSources[t];return this._sourcesToRow[e].width},o.prototype.currentWidth=function(){return this._currentWidth},o.prototype._findEmptyRow=function(t){for(var e=0;this._rowsToSources[e];)e++;return this._rowsToSources[e]=t,e>=this._actualCapacity&&(this._actualCapacity++,TradingView.resizeCanvas(this._canvas,this._currentWidth,this._rowHeight*this._actualCapacity),this._ctx=this._canvas.get(0).getContext("2d"),TradingView.logDebugChart("TrendLineCache. Expanging cache to "+this._actualCapacity+" items")),e},o.prototype._effectiveState=function(t){var e,i={};return i.p1=$.extend({},t.points()[0]),i.p2=$.extend({},t.points()[1]),e=t.properties(),i.showBars=e.showBarsRange.value(),i.showTimeRange=e.showDateTimeRange.value(),i.showDistance=e.showDistance.value(),i.showPriceRange=e.showPriceRange.value(),i.showAngle=e.showAngle.value(),i.color=e.textcolor.value(),i.showAngle&&(i.priceRange=t.priceScale().priceRange().state(),i.barSpacing=t._model.timeScale().barSpacing()),i},o.prototype._effectiveStatesEquals=function(t,e){var i=function(t,e){return!(!t&&!e)&&(!(!t||e)||(!(t||!e)||(t.index!=e.index||t.price!=e.price)))};if(t&&!e)return!1;if(!t&&e)return!1;if(i(t.p1,e.p1))return!1;if(i(t.p2,e.p2))return!1;if(t.color!=e.color)return!1;if(t.showBars!=e.showBars)return!1;if(t.showTimeRange!=e.showTimeRange)return!1;if(t.showDistance!=e.showDistance)return!1;if(t.showPriceRange!=e.showPriceRange)return!1;if(t.showAngle!=e.showAngle)return!1;if(t.showAngle){if(t.priceRange.min!=e.priceRange.min)return!1;if(t.priceRange.max!=e.priceRange.max)return!1;if(t.barSpacing!=e.barSpacing)return!1}return!0},o.prototype.removeSource=function(t){if(this._sourcesToRow[t]){var e=this._sourcesToRow[t].row;this._ctx.save(),this._ctx.clearRect(0,this.topByRow(e),this._currentWidth,this.rowHeight(e)),this._ctx.restore(),delete this._sourcesToRow[t],delete this._rowsToSources[e]}},o.prototype._repaintSource=function(e,i,o){var s,r;this._ctx.save(),this._ctx.translate(0,this.topByRow(i)+.5),o.points[0]=new t.Point(0,0),o.offsetX=0,o.offsetY=0,delete o.horzAlign,delete o.vertAlign,this._ctx.clearRect(0,0,this._currentWidth,this.rowHeight(i)),s=new n(o,{}),r=s.draw(this._ctx),this._sourcesToRow[e].width=r.width,this._ctx.restore()},o.prototype.updateSource=function(t,e){var i,o,n,s,r,a=t.properties().symbol.value();return this._currentSymbol!==a&&(TradingView.logDebugChart("TrendLineCache. Clearing canvas because of changing symbol from "+this._currentSymbol+" to "+a),this._currentSymbol=a,this._sourcesToRow={},this._rowsToSources={}),i=t.id(),this._sourcesToRow[i]||(o=this._findEmptyRow(i),this._sourcesToRow[i]={effectiveState:null,row:o}),n=this._sourcesToRow[t.id()].effectiveState,s=this._effectiveState(t),this._effectiveStatesEquals(n,s)||(o=this._sourcesToRow[t.id()],r=e(),this._repaintSource(i,o.row,r),this._sourcesToRow[i].effectiveState=s),this._sourcesToRow[i]},d={priceRange:{width:15,height:14,data:[134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255]},barsRange:{width:16,height:15,data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,134,134,138,255,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,136,136,136,56,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,136,136,136,56,134,134,138,255,134,134,138,255,136,136,136,56,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,136,136,136,56,134,134,138,255,134,134,138,255,136,136,136,56,134,134,138,255,0,0,0,0,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,0,0,0,0,134,134,138,255,136,136,136,56,134,134,138,255,134,134,138,255,136,136,136,56,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,136,136,136,56,134,134,138,255,134,134,138,255,137,137,137,74,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,137,137,137,74,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,134,134,138,255,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},angle:{width:14,height:12,data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,130,130,134,76,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,130,130,134,76,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,130,130,134,76,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,130,130,134,76,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,130,130,134,76,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,130,130,134,76,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,130,130,134,76,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,130,130,134,76,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,130,130,134,76,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,130,130,134,76,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255]}},n.prototype._preRender=function(){var e,i,o,n,r,a,l,h,d,p,u,_,f,g,m,v,y,w,b,S,T,C,x,P,L;if(!this._preRendered){if(c||s(),e=this._data.points[0],i=this._data.points[0].x+(this._data.offsetX||0),o=i,n=this._data.points[0].y+(this._data.offsetY||0),r=n,a=this._fontSize,l=this._lineSpacing,h=a+l,d=h*this._lines.length-l,c.textBaseline="top",c.font=this.fontStyle(),p=0,u=[],this._data.wordWrapWidth)for(_=this._data.wordWrapWidth,f=0;f<this._lines.length;f++)u.push(this._data.wordWrapWidth);else for(_=0,f=0;f<this._lines.length;f++)g=c.measureText(this._lines[f]).width,u.push(g),_=Math.max(_,g);if(this._data.backgroundColor||this._data.borderColor||this._data.highlightBorder&&this._data.wordWrapWidth){m={top:this._data.paddingTop||0,right:this._data.paddingRight||0,bottom:this._data.paddingBottom||0,left:this._data.paddingLeft||0},v={x:0,y:0},this._data.backgroundHorzInflate&&(y=this._data.backgroundHorzInflate/2,m.left+=y,m.right+=y,v.x=-y),this._data.backgroundVertInflate&&(w=this._data.backgroundVertInflate/2,m.top+=w,m.bottom+=w,v.y=-w),b="number"==typeof this._data.padding?this._data.padding:~~(a/6);for(f in m)m[f]||(m[f]=b);S={x:Math.floor(i+v.x),y:Math.floor(n+v.y),w:Math.ceil(_+m.left+m.right),h:Math.ceil(d+m.top+m.bottom)},o+=m.left+v.x,r+=m.top+v.y,"bottom"!=this._data.vertAlign&&"middle"!=this._data.vertAlign||(T="middle"==this._data.vertAlign?n-S.h/2:n-S.h-(S.y-n),C=T-S.y,r+=C,S.y=T),"right"!=this._data.horzAlign&&"center"!=this._data.horzAlign||(x="center"==this._data.horzAlign?i-S.w/2:i-S.w-(S.x-i),P=x-S.x,o+=P,S.x=x,this._data.doNotAlignText!==!0&&("right"==this._data.horzAlign?(c.textAlign="end",o+=_):(c.textAlign="center",o+=_/2))),S.w%2!==0&&S.w++,S.x+=.5,S.y+=.5,this._boundingRect=[new t.Point(S.x,S.y),new t.Point(S.x+S.w,S.y+S.h)],this._rect=S,this._padding=m,this._defaultPadding=b}else"bottom"!=this._data.vertAlign&&"middle"!=this._data.vertAlign||(r-=Math.round(d*("middle"==this._data.vertAlign?.5:1))),L=o,"right"!=this._data.horzAlign&&"center"!=this._data.horzAlign||(L-=Math.round(_*("center"==this._data.horzAlign?.5:1))),this._boundingRect=[new t.Point(L,r),new t.Point(L+_,r+d)];this._textPoint={x:o,y:r},this._textSizeCache&&(this._textSizeCache.widths=u),this._preRendered=!0,this._maxWidth=_}},n.prototype._drawIcon=function(t,e,i,o){var n,s,r,a;if(d.hasOwnProperty(o)){if(n=d[o],!n.src){for(n.src=document.createElement("canvas"),n.src.width=n.width,n.src.height=n.height,s=n.src.getContext("2d"),r=s.createImageData(n.width,n.height),a=0;a<n.data.length;a++)r.data[a]=n.data[a];s.putImageData(r,0,0)}t.drawImage(n.src,e,i)}},n.prototype.fontStyle=function(){return(this._data.bold?"bold ":"")+(this._data.italic?"italic ":"")+this._fontSize+"px "+this._data.font},n.prototype.draw=function(t){var e,i,o,n,s,r,a,l,h,c,d,p,u,_;if(0!==this._data.points.length){for(this._preRender(),e=this._fontSize,i=this._lineSpacing,o=e+i,n=o*this._lines.length-i,t.textBaseline="top",t.font=this.fontStyle(),s=this._rect,(this._data.backgroundColor||this._data.borderColor||this._data.highlightBorder&&this._data.wordWrapWidth)&&this._rect?("right"!=this._data.horzAlign&&"center"!=this._data.horzAlign||this._data.doNotAlignText!==!0&&(t.textAlign="right"==this._data.horzAlign?"end":"center"),this._data.backgroundRoundRect?(t.roundRect(s.x,s.y,s.w,s.h,this._data.backgroundRoundRect),this._data.backgroundColor&&(t.fillStyle=this._data.backgroundColor,t.globalAlpha=this._data.backgroundTransparency,t.fill(),t.globalAlpha=1),this._data.borderColor&&(r="number"==typeof this._data.borderWidth?this._data.borderWidth:~~Math.max(e/12,1),t.strokeStyle=this._data.borderColor,t.lineWidth=r,t.stroke())):(this._data.backgroundColor&&(t.fillStyle=this._data.backgroundColor,t.globalAlpha=this._data.backgroundTransparency,t.fillRect(s.x,s.y,s.w,s.h),t.globalAlpha=1),this._data.borderColor?(r="number"==typeof this._data.borderWidth?this._data.borderWidth:~~Math.max(e/12,1),t.strokeStyle=this._data.borderColor,t.lineWidth=r,t.strokeRect(s.x-r/2,s.y-r/2,s.w+r,s.h+r)):this._data.highlightBorder&&(t.strokeStyle=this._data.color,t.lineWidth=1,t.beginPath(),h=[3,1],t.dashedLineTo(s.x-.5,l=s.y-.5,a=s.x+s.w+.5,l,h),t.dashedLineTo(a,l,a,l=s.y+s.h+.5,h),t.dashedLineTo(a=s.x-.5,l,s.x+s.w+.5,l,h),t.dashedLineTo(a,s.y-.5,a,l,h),t.globalAlpha=.5,t.stroke(),t.globalAlpha=1)),this._data.icons&&(c=this._textPoint.x,d=this._textPoint.y,this._data.icons.forEach(function(e,i){var n=s.x+this._defaultPadding,r=s.y+this._padding.top+o*i;this._drawIcon(t,n,r,e)},this))):"right"==this._data.horzAlign?t.textAlign="end":"center"==this._data.horzAlign&&(t.textAlign="center"),p=this._textPoint.x,u=this._textPoint.y,t.fillStyle=this._data.color,_=0;_<this._lines.length;_++)t.fillText(this._lines[_],p,u),u+=o;return{width:s.w+2}}},n.prototype.hitTest=function(e){return 0===this._data.points.length?null:(this._preRender(),this._boundingRect&&t.pointInRect(e,this._boundingRect[0],this._boundingRect[1])?this._hittest:null)},r.prototype.drawArrow=function(t,e,i,o){var n,s,r,a,l,h,c,d,p;e.substract(t).length()<1||(n=e.substract(t).normalized(),s=5*o,r=n.scaled(s),a=e.substract(r),l=n.transponed(),h=3*o,c=l.scaled(h),d=a.add(c),p=a.substract(c),CanvasEx.drawLine(i,Math.round(d.x),Math.round(d.y),e.x,e.y),CanvasEx.drawLine(i,Math.round(p.x),Math.round(p.y),e.x,e.y))},r.prototype.lineClipping=function(t,e,i,o){var n=window.cohenSutherland(t.x,t.y,e.x,e.y,0,0,i,o);return!!n&&[{x:n[0],y:n[1]},{x:n[2],y:n[3]}]},r.prototype.expandPoints=function(e,i,o,n){var s,r,a=new t.Point(0,0),l=new t.Point(o,n);return this._data.extendleft&&(s=e.substract(i),r=t.intersectRayWithRect(e,e.add(s),a,l),r&&(e=r)),this._data.extendright&&(s=i.substract(e),r=t.intersectRayWithRect(i,i.add(s),a,l),r&&(i=r)),[e,i]},r.prototype.drawCircle=function(t,e,i,o){o=$.extend({fillStyle:"#000000"},o),e.save(),e.fillStyle=o.fillStyle,e.beginPath(),e.arc(t.x,t.y,i,0,2*Math.PI,!1),e.fill(),o.strokeWidth&&(e.lineWidth=o.strokeWidth,e.stroke()),e.restore()},r.prototype.draw=function(t){var e,i,o,n,s,r,a,l;this._data.points&&this._data.points.length<2||this._data.floatPoints&&this._data.floatPoints.length<2||(t.lineCap="butt",t.strokeStyle=this._data.color,t.lineWidth=this._data.linewidth,t.lineStyle=this._data.linestyle,e=this._data.floatPoints||this._data.points,i=e[0],o=e[1],n=t.canvas.width,s=t.canvas.height,this._data.overlayLineEndings?r=[$.extend(!0,{},i),$.extend(!0,{},o)]:this.drawEnds(t,[i,o]),a=this.expandPoints(i,o,this._data.width,this._data.height),l=this.lineClipping(a[0],a[1],this._data.width,this._data.height),l&&this._data.linewidth>0&&CanvasEx.drawLine(t,Math.round(l[0].x),Math.round(l[0].y),Math.round(l[1].x),Math.round(l[1].y)),this._data.overlayLineEndings&&this.drawEnds(t,r))},r.prototype.drawEnds=function(t,e){var i=e[0],o=e[1];switch(this._data.leftend){case v.LINEEND_ARROW:this.drawArrow(o,i,t,t.lineWidth);break;case v.LINEEND_CIRCLE:this.drawCircle(i,t,t.lineWidth,this._data.endstyle)}switch(this._data.rightend){case v.LINEEND_ARROW:this.drawArrow(i,o,t,t.lineWidth);break;case v.LINEEND_CIRCLE:this.drawCircle(o,t,t.lineWidth,this._data.endstyle)}},r.prototype.hitTest=function(e){var i,o,n,s,r,a;return this._data.points&&this._data.points.length<2?null:this._data.floatPoints&&this._data.floatPoints.length<2?null:(i=TradingView.isMobile.any()?24:3,o=this._data.floatPoints||this._data.points,n=o[0],s=o[1],r=this.expandPoints(n,s,this._data.width,this._data.height),a=t.distanceToSegment(r[0],r[1],e),a.distance<=i?this._hittest:null)},inherit(a,m),a.prototype.update=function(){this._invalidated=!0,this._labelDataInvalidated=!0},a.prototype.updateImpl=function(){var t,e,i,o,n,s,r,a,l,h,c=this._source.points();c.length<2||(t=c[0],e=c[1],i=this._model.timeScale().visibleBars(),void 0===i||i.isEmpty()||(i=i.clone(),o=this._source.properties(),t.index<i.firstBar()&&e.index<i.firstBar()&&!o.extendLeft.value()&&!o.extendRight.value()||(m.prototype.update.call(this),this._points.length<2||(n=o.showBarsRange.value(),s=o.showDateTimeRange.value(),r=o.showDistance.value(),a=o.showPriceRange.value(),l=o.showAngle.value(),a||n||s||r||l?(h=this,this._statCache=this._model._trendLineStatsCache.updateSource(this._source,function(){return h._statLabelData()})):(this._model._trendLineStatsCache.removeSource(this._source.id()),this._label=null,this._labelData&&(this._labelData.text="",this._labelData.lines=[])),this._invalidated=!1))))},a.prototype._statLabelData=function(){var e,i,o,n,s,r,a,h,c,d,p,u,_,f,g,m,v,y,w,b,S,T,C,x,P,L,E,I,A;return this._labelDataInvalidated&&(e=this._source.points(),i=e[0],o=e[1],n=this._source.properties(),s=[],p=n.showPriceRange.value(),p&&this._source.priceScale()&&(c=o.price-i.price,u=c/i.price,r=this._source.priceScale().formatter().format(c)+" ("+this._percentageFormatter.format(100*u)+")",_=this._model.mainSeries().base(),_&&(f=Math.round(c*_),r+=", "+f),s.push("priceRange")),g=n.showBarsRange.value(),m=n.showDateTimeRange.value(),v=n.showDistance.value(),(g||m||v)&&(a="",g&&(d=o.index-i.index,a+=$.t("{0} bars").format(d)),m&&(y=this._model.timeScale().indexToUserTime(i.index),w=this._model.timeScale().indexToUserTime(o.index),y&&w&&(b=(w.valueOf()-y.valueOf())/1e3,S=(new k).format(b),S&&(a+=g?" ("+S+")":S))),v&&(a&&(a+=", "),void 0===c&&(c=o.price-i.price),void 0===d&&(d=o.index-i.index),T=Math.round(1e5*Math.sqrt(c*c+d*d))/1e5,a+=$.t("distance: {0}").format(this._numericFormatter.format(T))),a&&s.push("barsRange")),C=n.showAngle.value(),C&&(x=this._source.pointToScreenPoint(i),P=this._source.pointToScreenPoint(o),x=x instanceof Array?x[0]:x instanceof t.Point?x:null,P=P instanceof Array?P[0]:P instanceof t.Point?P:null,x instanceof t.Point&&P instanceof t.Point&&(E=P.substract(x),E.length()>0&&(E=E.normalized(),L=Math.acos(E.x),E.y>0&&(L=-L))),"number"!=typeof L||TradingView.isNaN(L)||(h=Math.round(180*L/Math.PI)+"",s.push("angle"))),this._label=[r,a,h].filter(function(t){return t}).join("\n")||null,this._icons=s,this._labelDataInvalidated=!1),I={points:[this._points[1]],text:this._label,color:this._source.properties().textcolor.value(),font:l.LABEL_FONT,fontsize:l.LABEL_FONTSIZE,lineSpacing:l.LABEL_LINESPACING,backgroundColor:l.LABEL_BGCOLOR,borderColor:l.LABEL_BORDERCOLOR,borderWidth:1,padding:l.LABEL_PADDING,paddingLeft:30,doNotAlignText:!0,icons:this._icons
},A=l.LABEL_OFFSET,this._points[1].y<this._points[0].y&&(I.vertAlign="bottom"),this._points[1].x<this._points[0].x&&(I.horzAlign="right"),this._labelData=I,I},a.prototype.renderer=function(){var t,e,i,o,n,s,a,h,c;return this._invalidated&&this.updateImpl(),t=new T,this._invalidated?t:this._source.priceScale()?(e={},e.points=this._points,e.floatPoints=this._floatPoints,e.width=this._model.timeScale().width(),e.height=this._source.priceScale().height(),e.color=this._source.properties().linecolor.value(),e.linewidth=this._source.properties().linewidth.value(),e.linestyle=this._source.properties().linestyle.value(),e.extendleft=this._source.properties().extendLeft.value(),e.extendright=this._source.properties().extendRight.value(),e.leftend=this._source.properties().leftEnd.value(),e.rightend=this._source.properties().rightEnd.value(),t.append(new r(e)),i=this.isAnchorsRequired(),o=i||this._source.properties().alwaysShowStats.value(),o&&this._label&&2==this._points.length&&(n=this._points[1],s={left:0,top:this._model._trendLineStatsCache.topByRow(this._statCache.row),width:this._model._trendLineStatsCache.rowWidth(this._statCache.row),height:this._model._trendLineStatsCache.rowHeight(this._statCache.row)},a={left:n.x,top:n.y,width:s.width,height:s.height},"right"==this._labelData.horzAlign?a.left-=l.LABEL_PADDING+a.width:a.left+=l.LABEL_PADDING,"bottom"==this._labelData.vertAlign?a.top-=l.LABEL_PADDING+a.height:a.top+=l.LABEL_PADDING,h=this._model._trendLineStatsCache.canvas(),c=new w(h.get(0),s,a),t.append(c)),this.addAnchors(t),!TradingView.printing&&this._source.hasAlert.value()&&!this._model.readOnly()&&e.points.length>=2&&this._source.getAlertIsActive(function(i){t.append(new S({point1:e.points[0],point2:e.points[1],color:i?e.color:defaults("chartproperties.alertsProperties.drawingIcon.color")}))}),t):t},inherit(l,v),l.LABEL_OFFSET=8,l.LABEL_FONT="Arial",l.LABEL_FONTSIZE=12,l.LABEL_LINESPACING=10,l.LABEL_BGCOLOR="rgba(255,255,255,.8)",l.LABEL_BORDERCOLOR="#e3e3e3",l.LABEL_PADDING=8,l.prototype.stop=function(){v.prototype.stop.call(this),this._model._trendLineStatsCache.removeSource(this.id())},l.prototype.pointsCount=function(){return 2},l.prototype.title=function(){return"Trend Line"},l.prototype.canHasAlert=function(){return!0},l.prototype._getAlertPlots=function(){return[this._linePointsToAlertPlot(this._points,null,this.properties().extendLeft.value(),this.properties().extendRight.value())]},p=0,u=1,_=2,f=4,g=8,window.cohenSutherland=function(t,e,i,o,n,s,r,a){for(var l,c,d,p=h(t,e,n,s,r,a),u=h(i,o,n,s,r,a),m=!1,v=0;;){if(v>1e3)throw Error("Cohen - Sutherland algorithm: infinity loop");if(v++,!(p|u)){m=!0;break}if(p&u)break;d=p?p:u,d&g?(l=t+(i-t)*(a-e)/(o-e),c=a):d&f?(l=t+(i-t)*(s-e)/(o-e),c=s):d&_?(c=e+(o-e)*(r-t)/(i-t),l=r):(c=e+(o-e)*(n-t)/(i-t),l=n),d==p?(t=l,e=c,p=h(t,e,n,s,r,a)):(i=l,o=c,u=h(i,o,n,s,r,a))}return!!m&&[t,e,i,o]},e.TrendLineStatsRenderer=n,e.LineToolTrendLine=l,e.TrendLineRenderer=r}).call(e,i(21))},function(t,e,i){(function(e){"use strict";function o(t,e,i){this._cache=t,this._cacheRect=e,this._targetRect=i}var n=i(88);o.prototype.draw=function(t){t.translate(.5,.5),t.drawImage(this._cache,this._cacheRect.left,this._cacheRect.top,this._cacheRect.width,this._cacheRect.height,this._targetRect.left,this._targetRect.top,this._targetRect.width,this._targetRect.height),t.translate(-.5,-.5)},o.prototype.hitTest=function(t){var i=new e.Point(this._targetRect.left,this._targetRect.top),o=i.add(new e.Point(this._targetRect.width,this._targetRect.height));return e.pointInRect(t,i,o)?new n(n.REGULAR):null},t.exports=o}).call(e,i(21))},function(t,e,i){"use strict";function o(){p.call(this)}function n(t,e,i){l.call(this,t,e,i)}function s(t,e){c.call(this,t,e),this._rendererCache={},this._invalidated=!0}function r(t,e){this._constructor="LineToolFibChannel";var i=e?e:this.createPropertiesObject("linetoolfibchannel");h.call(this,t,new s(this,t),i),this.version=r.version,t._fibChannelLabelsCache||(t._fibChannelLabelsCache=new o)}var a=i(117),l=i(125).ParallelChannelRenderer,h=i(67).LineDataSource,c=i(97),d=i(118),p=i(121),u=i(122).TrendLineRenderer,_=i(123),f=i(92);inherit(o,p),o.prototype.levelsCount=function(){return r.LevelsCount},inherit(n,l),n.prototype.getColor=function(){return TradingView.generateColor(this._data.backcolor,this._data.transparency,!0)},inherit(s,c),s.prototype.update=function(){this._invalidated=!0},s.prototype._updateImpl=function(){var t,e,i;c.prototype.update.call(this),this._cacheState=this._model._fibChannelLabelsCache.updateSource(this._source),this._points.length<3||this._source.points().length<3||(t=this._points[0],e=this._points[1],i=this._points[2],this.norm=this._points[2].substract(this._points[0]))},s.prototype.renderer=function(){function t(t,o,n){var s,r,a,h,p;switch(i.horzLabelsAlign.value()){case"left":s=t;break;case"center":s=t.add(o).scaled(.5),s.x+=n.width/2,s.x=Math.round(s.x);break;case"right":s=o.clone(),s.x+=n.width,s.x=Math.round(s.x)}r={left:n.left,top:l.topByRow(d._cacheState.row),width:n.width,height:l.rowHeight(d._cacheState.row)},a={left:Math.round(s.x-r.width),top:Math.round(s.y),width:n.width,height:r.height},h=i.vertLabelsAlign.value(),"middle"==h&&(a.top-=a.height/2),"bottom"==h&&(a.top-=a.height),p=new _(c,r,a),e.append(p)}var e,i,o,s,r,l,c,d,p,g,m,v,y,w,b,S,T,C,x,P,L,k;if(this._invalidated&&(this._updateImpl(),this._invalidated=!1),e=new f,this._points.length<2)return this.addAnchors(e),e;if(i=this._source.properties(),o=this._points[0],s=this._points[1],this._points.length<3)return r={points:[o,s],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:i.level1.color.value(),linewidth:i.levelsStyle.linewidth.value(),linestyle:i.levelsStyle.linestyle.value(),extendleft:i.extendLeft.value(),extendright:i.extendRight.value(),leftend:h.LINEEND_NORMAL,rightend:h.LINEEND_NORMAL},e.append(new u(r)),this.addAnchors(e),e;for(l=this._model._fibChannelLabelsCache,c=l.canvas().get(0),d=this,p=1;p<a.LevelsCount;p++)if(g=i["level"+p],g.visible.value()){for(m=null,v=p+1;v<=a.LevelsCount;v++)if(y=i["level"+v],y.visible.value()){m=y;break}if(!m)break;w=this.norm.scaled(g.coeff.value()),b=o.add(w),S=s.add(w),T=this.norm.scaled(m.coeff.value()),C=o.add(T),x=s.add(T),P={},P.points=[b,S,C,x],P.color=g.color.value(),P.width=this._model.timeScale().width(),P.height=this._source.priceScale().height(),P.linewidth=i.levelsStyle.linewidth.value(),P.linestyle=i.levelsStyle.linestyle.value(),P.extendleft=i.extendLeft.value(),P.extendright=i.extendRight.value(),P.backcolor=g.color.value(),P.transparency=i.transparency.value(),P.skipTopLine=!0,P.fillBackground=i.fillBackground.value(),P.hittestOnBackground=!0,e.append(new n(P)),(i.showCoeffs.value()||i.showPrices.value())&&(L=this._cacheState.preparedCells.cells[p-1],t(b,S,L))}for(k=null,p=a.LevelsCount;p>=1;p--)if(g=i["level"+p],g.visible.value()){k=p;break}return null!=k&&(g=i["level"+k],g.visible.value()&&(w=this.norm.scaled(g.coeff.value()),b=o.add(w),S=s.add(w),r={points:[b,S],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:g.color.value(),linewidth:i.levelsStyle.linewidth.value(),linestyle:i.levelsStyle.linestyle.value(),extendleft:i.extendLeft.value(),extendright:i.extendRight.value(),leftend:h.LINEEND_NORMAL,rightend:h.LINEEND_NORMAL},e.append(new u(r)),(i.showCoeffs.value()||i.showPrices.value())&&t(b,S,this._cacheState.preparedCells.cells[k-1]))),this.addAnchors(e),e},inherit(r,h),r.LevelsCount=24,r.version=2,r.prototype.migrateVersion=function(t,e,i){i.properties.removeProperty("reverse")},r.prototype.pointsCount=function(){return 3},r.prototype.title=function(){return"Fib Channel"},r.prototype.processErase=function(t,e){var i="level"+e,o=this.properties()[i].visible;t.setProperty(o,!1,"Erase level line")},r.prototype.createPropertiesObject=function(t,e,i){return new d(t,e,i,{range:[1,24],names:["coeff","color","visible"]})},t.exports=r},function(t,e,i){(function(t){"use strict";function o(t,e,i){this._data=t,this._hittestResult=e||new h(h.MOVEPOINT),this._backHittestResult=i||new h(h.MOVEPOINT_BACKGROUND)}function n(t,e){r.call(this,t,e),this._invalidated=!0}function s(t,e){this._constructor="LineToolParallelChannel";var i=e?e:new p("linetoolparallelchannel");a.call(this,t,new n(this,t),i)}var r=i(97),a=i(67).LineDataSource,l=i(122).TrendLineRenderer,h=i(88),c=i(89).PaneRendererClockIcon,d=i(92),p=i(73).DefaultProperty;o.prototype.extendPoints=function(e,i,o,n){var s,r,a=new t.Point(0,0),l=new t.Point(o,n);return this._data.extendleft&&(s=e.substract(i),r=t.intersectRayWithRect(e,e.add(s),a,l),r&&(e=r)),this._data.extendright&&(s=i.substract(e),r=t.intersectRayWithRect(i,i.add(s),a,l),r&&(i=r)),this._data.extendleft&&!t.pointInRect(e,a,l)&&t.pointInRect(i,a,l)&&(r=t.intersectRayWithRect(i,e,a,l),r&&(e=r)),this._data.extendright&&!t.pointInRect(i,a,l)&&t.pointInRect(e,a,l)&&(r=t.intersectRayWithRect(e,i,a,l),r&&(i=r)),[e,i]},o.prototype.getColor=function(){return TradingView.generateColor(this._data.backcolor,this._data.transparency)},o.prototype.draw=function(e){var i,o,n,s,r,a,h,c,d,p,u,_,f,g,m;if(!(this._data.points.length<2)&&(e.lineCap="butt",e.strokeStyle=this._data.color,e.lineWidth=this._data.linewidth,e.lineStyle=this._data.linestyle,i=this._data.points[0],o=this._data.points[1],n=this.extendPoints(i,o,this._data.width,this._data.height),this._data.skipLines||CanvasEx.drawLine(e,n[0].x,n[0].y,n[1].x,n[1].y),4==this._data.points.length)){if(s=this._data.points[2],r=this._data.points[3],!s||!r)return;if(a=this.extendPoints(s,r,this._data.width,this._data.height),this._data.skipLines||this._data.skipTopLine||CanvasEx.drawLine(e,a[0].x,a[0].y,a[1].x,a[1].y),this._data.fillBackground){if(h=Math.max(n[1].x,a[1].x),c=Math.max(n[1].y,a[1].y),d=Math.min(a[0].x,n[0].x),p=Math.min(a[0].y,n[0].y),!(isFinite(h)&&isFinite(c)&&isFinite(d)&&isFinite(p)))return;e.fillStyle=this.getColor(),e.beginPath(),e.moveTo(n[0].x,n[0].y),e.lineTo(n[1].x,n[1].y),this._data.extendright&&(u=t.optionalCorner(n[1],a[1],this._data.width,this._data.height),u&&e.lineTo(u.x,u.y)),e.lineTo(a[1].x,a[1].y),e.lineTo(a[0].x,a[0].y),this._data.extendleft&&(_=t.optionalCorner(a[0],n[0],this._data.width,this._data.height),_&&e.lineTo(_.x,_.y)),e.lineTo(n[0].x,n[0].y),e.fill()}this._data.showMidline&&!this._data.skipLines&&(e.strokeStyle=this._data.midcolor,e.lineWidth=this._data.midlinewidth,e.lineStyle=this._data.midlinestyle,f=this._data.points[0].add(this._data.points[2]).scaled(.5),g=this._data.points[1].add(this._data.points[3]).scaled(.5),a=this.extendPoints(f,g,this._data.width,this._data.height),m=l.prototype.lineClipping(a[0],a[1],this._data.width,this._data.height),m&&CanvasEx.drawLine(e,Math.round(m[0].x),Math.round(m[0].y),Math.round(m[1].x),Math.round(m[1].y)))}},o.prototype.hitTest=function(e){var i,o,n,s,r,a,l,h,c,d,p,u,_,f,g,m,v;if(this._data.points.length<2)return null;if(i=3,o=this._data.floatPoints||this._data.points,n=o[0],s=o[1],r=o[2],a=o[3],l=this.extendPoints(n,s,this._data.width,this._data.height),h=t.distanceToSegment(l[0],l[1],e),h.distance<=i)return this._hittestResult;if(4==this._data.points.length&&!this._data.skipTopLine){if(!r||!a)return null;if(l=this.extendPoints(r,a,this._data.width,this._data.height),h=t.distanceToSegment(l[0],l[1],e),h.distance<=i)return this._hittestResult;if(this._data.showMidline&&!this._data.skipLines&&(c=n.add(r).scaled(.5),d=s.add(a).scaled(.5),l=this.extendPoints(c,d,this._data.width,this._data.height),h=t.distanceToSegment(l[0],l[1],e),h.distance<=i))return this._hittestResult}if(this._data.hittestOnBackground&&this._data.fillBackground&&4==this._data.points.length){if(p=(s.y-n.y)/(s.x-n.x),u=n.y+p*(e.x-n.x),_=r.y+p*(e.x-r.x),f=Math.max(u,_),g=Math.min(u,_),m=Math.min(n.x,s.x),v=Math.max(n.x,s.x),!this._data.extendleft&&e.x<m)return null;if(!this._data.extendright&&e.x>v)return null;if(e.y>=g&&e.y<=f)return this._backHittestResult}return null},inherit(n,r),n.prototype.update=function(){this._invalidated=!0},n.prototype.updateImpl=function(){var t,e,i,o,n,s,a,l,h,c,d;r.prototype.update.call(this),this._source.priceScale()&&!this._source.priceScale().isEmpty()&&0!==this._source.points().length&&(this._source._priceOffset||this._source.calculatePriceDiff(),3===this._points.length&&this._source._priceOffset&&(t=this._points[0],e=this._points[1],i=this._source._priceOffset+this._source.points()[0].price,o=this._source._priceOffset+this._source.points()[1].price,this._p3=t.clone(),this._p4=e.clone(),n=this._source.priceScale(),n.isLog()?(s=.5*(i+o)-this._source._priceOffset,a=.5*(i+o),l=this._source.priceScale().priceToCoordinate(s),h=this._source.priceScale().priceToCoordinate(a),c=h-l,this._p3.y+=c,this._p4.y+=c):(n.isPercent()&&(d=this._source.ownerSource().firstValue(),i=n.priceRange().convertToPercent(i,d),o=n.priceRange().convertToPercent(o,d)),this._p3.y=this._source.priceScale().priceToCoordinate(i),this._p4.y=this._source.priceScale().priceToCoordinate(o))))},n.prototype.renderer=function(){var t,e,i,n,s,r;return this._invalidated&&(this.updateImpl(),this._invalidated=!1),t={},t.points=[],this._points.length>1&&(t.points.push(this._points[0]),t.points.push(this._points[1])),this._points.length>2&&(t.points.push(this._p3),t.points.push(this._p4)),t.color=this._source.properties().linecolor.value(),t.width=this._model.timeScale().width(),t.height=this._source.priceScale().height(),e=this._source.properties(),t.linewidth=e.linewidth.value(),t.linestyle=e.linestyle.value(),t.extendleft=e.extendLeft.value(),t.extendright=e.extendRight.value(),t.fillBackground=e.fillBackground.value(),t.backcolor=e.backgroundColor.value(),t.transparency=e.transparency.value(),t.showMidline=e.showMidline.value(),t.midlinewidth=e.midlinewidth.value(),t.midlinestyle=e.midlinestyle.value(),t.midcolor=e.midlinecolor.value(),t.fillBackground=e.fillBackground.value(),t.hittestOnBackground=!0,i=new d,i.append(new o(t)),this.isAnchorsRequired()&&(n=[],n.push(this._points[0]),this._points[1]&&n.push(this._points[1]),this._p3&&(n.push(this._p3.add(this._p4).scaled(.5)),n[2].data=2),s=3==this._points.length&&!this._p3,this._model.lineBeingCreated()!=this._source||s||n.pop(),i.append(this.createLineAnchor({points:n}))),!TradingView.printing&&this._source.hasAlert.value()&&!this._model.readOnly()&&this._points.length>=2&&(r=this._points,this._source.getAlertIsActive(function(t){i.append(new c({point1:r[0],point2:r[1],color:t?e.linecolor.value():defaults("chartproperties.alertsProperties.drawingIcon.color")}))})),i},inherit(s,a),s.prototype.addPoint=function(t){var e,i=a.prototype.addPoint.call(this,t);return i&&(e=this.points()[0],this._points[2].index=e.index,this._points[2].price=e.price+this._priceOffset),i},s.prototype.calculatePriceDiff=function(){var t,e,i,o,n,s,r,a,l,h,c,d,p,u,_,f,g,m,v,y;if(3===this.points().length){if(t=this.points()[0],e=this.points()[1],i=this.points()[2],t.index===e.index)return;if(o=this.priceScale(),null===o)return;if(o.isLog()){if(n=this._model.timeScale(),n.isEmpty())return;s=n.indexToCoordinate(t.index),r=n.indexToCoordinate(e.index),a=o.priceToCoordinate(t.price),l=o.priceToCoordinate(e.price),h=n.indexToCoordinate(i.index),c=o.priceToCoordinate(i.price),d=(l-a)/(r-s),p=a+d*(h-s),u=o.priceToCoordinate(i.price),_=u-p,f=.5*(a+l),g=o.coordinateToPrice(f),m=f+_,v=o.coordinateToPrice(m),this._priceOffset=v-g}else d=(e.price-t.price)/(e.index-t.index),y=t.price+d*(i.index-t.index),this._priceOffset=i.price-y}},s.prototype.setLastPoint=function(t,e){e&&e.shift&&2==this.points().length&&this._snapPoint45Degree(t,this.points()[0]),a.prototype.setLastPoint.call(this,t),this.calculatePriceDiff()},s.prototype.restorePoints=function(t,e,i){a.prototype.restorePoints.call(this,t,e,i),t&&t.length>=3&&(this._priceOffset=t[2].price-t[0].price)},s.prototype.setPoint=function(t,e,i){i&&i.shift&&t<2&&this._snapPoint45Degree(e,this.points()[1-t]),a.prototype.setPoint.call(this,t,e,i),2===t&&this.calculatePriceDiff();var o=this.points()[0];this._points[2].index=o.index,this._points[2].price=o.price+this._priceOffset},s.prototype.pointsCount=function(){return 3},s.prototype.title=function(){return"Parallel Channel"},s.prototype.addPoint=function(t,e){return e&&e.shift&&2==this.points().length&&this._snapPoint45Degree(t,this.points()[0]),a.prototype.addPoint.call(this,t,e)},s.prototype.fixAfterRestorePriceAxis=function(){this.priceScale().isLog()||delete this._priceOffset},s.prototype.cloneData=function(t){this._priceOffset=t._priceOffset},s.prototype.restoreData=function(t){t.priceOffset&&(this._priceOffset=t.priceOffset)},s.prototype.state=function(t){var e=a.prototype.state.call(this,t);return e.priceOffset=this._priceOffset,e},s.prototype.canHasAlert=function(){return!0},s.prototype._getAlertPlots=function(){function t(t,e){return t.index<=e.index?[t,e]:[e,t]}var e,i,o,n,s,r,a,l,h=[].concat(this._points).splice(0,2);return h=h.concat([{price:h[0].price+this._priceOffset,time:h[0].time,index:h[0].index},{price:h[1].price+this._priceOffset,time:h[1].time,index:h[1].index}]),e=t(h[0],h[1]),i=t(h[2],h[3]),this._priceOffset<0?(n=i,o=e):(n=e,o=i),a=this.properties().extendLeft.value(),l=this.properties().extendRight.value(),h[0].index<=h[1].index?(s=a,r=l):(s=l,r=a),[this._linePointsToAlertPlot(o,"Upper",s,r),this._linePointsToAlertPlot(n,"Lower",s,r)]},e.LineToolParallelChannel=s,e.ParallelChannelRenderer=o}).call(e,i(21))},function(t,e,i){(function(e){"use strict";function o(){c.call(this)}function n(t,e,i){this._data=t,this._hittest=e||new u(u.MOVEPOINT),this._backHittest=i||new u(u.MOVEPOINT_BACKGROUND)}function s(t,e){l.call(this,t,e),this._rendererCache={},this._invalidated=!0}function r(t,e){this._constructor="LineToolFibSpeedResistanceArcs";var i=e?e:new this.createPropertiesObject("linetoolfibspeedresistancearcs");a.call(this,t,new s(this,t),i),t._fibSpeedResistanceArcsLabelsCache||(t._fibSpeedResistanceArcsLabelsCache=new o)}var a=i(67).LineDataSource,l=i(97),h=i(118),c=i(121),d=i(122).TrendLineRenderer,p=i(123),u=i(88),_=i(92);inherit(o,c),o.prototype.levelsCount=function(){return r.LevelsCount},n.prototype.draw=function(t){t.lineCap="butt",t.strokeStyle=this._data.color,t.lineWidth=this._data.linewidth,t.translate(this._data.center.x,this._data.center.y),t.beginPath(),this._data.fullCircles?t.arc(0,0,this._data.radius,2*Math.PI,0,!1):this._data.dir>0?t.arc(0,0,this._data.radius,0,Math.PI,!1):t.arc(0,0,this._data.radius,Math.PI,0,!1),t.stroke(),this._data.fillBackground&&(this._data.radius2&&(this._data.fullCircles?t.arc(0,0,this._data.radius2,2*Math.PI,0,!0):this._data.dir>0?t.arc(0,0,this._data.radius2,Math.PI,0,!0):t.arc(0,0,this._data.radius2,0,Math.PI,!0)),t.fillStyle=TradingView.generateColor(this._data.color,this._data.transparency,!0),t.fill())},n.prototype.hitTest=function(t){var i,o,n,s=e.sign(t.y-this._data.center.y);return s===this._data.dir||this._data.fullCircles?(i=t.substract(this._data.center),o=i.length(),n=3,Math.abs(o-this._data.radius)<n?this._hittest:this._data.hittestOnBackground&&Math.abs(o)<=this._data.radius+n?this._backHittest:null):null},inherit(s,l),s.prototype.update=function(){this._invalidated=!0},s.prototype._updateImpl=function(){var t,i,o,n,s,a,h,c,d,p,u,_;if(l.prototype.update.call(this),this._cacheState=this._model._fibSpeedResistanceArcsLabelsCache.updateSource(this._source),!(this._points.length<2)&&this._source.priceScale()&&!this._source.priceScale().isEmpty()&&!this._model.timeScale().isEmpty())for(t=this._points[0],i=this._points[1],o=t.substract(i).length(),this._levels=[],n=this._source.properties(),s=1;s<=r.LevelsCount;s++)a="level"+s,h=n[a],h.visible.value()&&(c=h.coeff.value(),d=h.color.value(),p=i.substract(t).length()*c,u=e.sign(i.y-t.y),_=new e.Point(t.x,t.y+u*o*c),this._levels.push({color:d,radius:p,dir:u,labelPoint:_,linewidth:h.linewidth.value(),linestyle:h.linestyle.value(),index:s}))},s.prototype.renderer=function(){var t,e,i,o,s,r,l,h,c,f,g,m,v,y,w,b,S,T;if(this._invalidated&&(this._updateImpl(),this._invalidated=!1),t=new _,this._points.length<2)return t;for(e=this._points[0],i=this._points[1],o=this._center,s=this._source.properties(),r=s.fillBackground.value(),l=s.transparency.value(),h=this._model._fibSpeedResistanceArcsLabelsCache,c=h.canvas().get(0),f=0;f<this._levels.length;f++)if(g=this._levels[f],m={},m.center=e,m.color=g.color,m.linewidth=g.linewidth,m.radius=g.radius,m.dir=g.dir,m.transparency=l,m.fillBackground=r,m.hittestOnBackground=!0,m.fullCircles=s.fullCircles.value(),f>0&&(m.radius2=this._levels[f-1].radius),v=new u(u.MOVEPOINT,null,g.index),t.append(new n(m,v)),s.showCoeffs.value()){if(y=this._cacheState.preparedCells.cells[this._levels[f].index-1],!y)continue;w={left:y.left,top:h.topByRow(this._cacheState.row),width:y.width,height:h.rowHeight(this._cacheState.row)},b={left:Math.round(g.labelPoint.x-w.width),top:Math.round(g.labelPoint.y-w.height/2),width:y.width,height:w.height},S=new p(c,w,b),t.append(S)}return s.trendline.visible.value()&&(T={points:[this._points[0],this._points[1]],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:s.trendline.color.value(),linewidth:s.trendline.linewidth.value(),linestyle:s.trendline.linestyle.value(),extendleft:!1,extendright:!1,leftend:a.LINEEND_NORMAL,rightend:a.LINEEND_NORMAL},t.append(new d(T))),this.addAnchors(t),t},inherit(r,a),r.LevelsCount=11,r.prototype.pointsCount=function(){return 2},r.prototype.title=function(){return"Fib Speed Resistance Arcs"},r.prototype.processErase=function(t,e){var i="level"+e,o=this.properties()[i].visible;t.setProperty(o,!1,"Erase level line")},r.prototype.createPropertiesObject=function(t,e,i){return new h(t,e,i,{range:[1,11]})},t.exports=r}).call(e,i(21))},function(t,e,i){"use strict";function o(){d.call(this)}function n(t,e){h.call(this,t,e)}function s(t,e){this._constructor="LineToolProjection";var i=e?e:new this.createPropertiesObject("linetoolprojection");p.call(this,t,new n(this,t),i)}var r=i(118),a=i(128),l=a.ArcWedgeRenderer,h=a.FibWedgePaneView,c=a.LineToolFibWedge,d=i(121),p=i(67).LineDataSource,u=i(122).TrendLineRenderer,_=i(92);inherit(o,d),o.prototype.levelsCount=function(){return 1},inherit(n,h),n.prototype.update=function(){h.prototype.update.call(this)},n.prototype._levelsCount=function(){return 1},n.prototype.renderer=function(){var t,e,i,o,n,s,r,a,h,c,d,f,g;return this._invalidated&&(this._updateImpl(),this._invalidated=!1),t=new _,this._points.length<2?t:(e=this._source.properties(),i=this._points,o=i[0],n=i[1],s={points:[o,n],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:e.trendline.color.value(),linewidth:e.linewidth.value(),linestyle:e.trendline.linestyle.value(),extendleft:!1,extendright:!1,leftend:p.LINEEND_NORMAL,rightend:p.LINEEND_NORMAL},t.append(new u(s)),this._points.length<3?(this.addAnchors(t),t):(r=i[2],a=r.data,h=n.substract(o).length(),c=n.substract(o).normalized(),d=r.substract(o).normalized(),r=o.add(d.scaled(h)),r.data=a,s={points:[o,r],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:e.trendline.color.value(),linewidth:e.linewidth.value(),linestyle:e.trendline.linestyle.value(),extendleft:!1,extendright:!1,leftend:p.LINEEND_NORMAL,rightend:p.LINEEND_NORMAL},t.append(new u(s)),f=this._levels[0],g={},g.center=this._points[0],g.radius=f.radius,g.prevRadius=0,g.edge=this._edge,g.color=e.trendline.color.value(),g.color1=e.color1.value(),g.color2=e.color2.value(),g.linewidth=e.linewidth.value(),g.edge1=this._edge1,g.edge2=this._edge2,g.p1=f.p1,g.p2=f.p2,g.fillBackground=e.fillBackground.value(),g.transparency=e.transparency.value(),g.gradient=!0,t.append(new l(g)),this.addAnchors(t),t))},inherit(s,c),s.prototype.title=function(){return"Projection"},s.prototype.getCache=function(){return this._model._projectionLabelsCache||(this._model._projectionLabelsCache=new o),this._model._projectionLabelsCache},s.prototype.createPropertiesObject=function(t,e,i){return new r(t,e,i,{range:[1,1]})},t.exports=s},function(t,e,i){(function(t){"use strict";function o(){c.call(this)}function n(t,e,i){this._data=t,this._hittest=e||new u(u.MOVEPOINT),this._backHittest=i||new u(u.MOVEPOINT_BACKGROUND),this._rendererCache={}}function s(t,e){l.call(this,t,e),this._rendererCache={},this._levels=[],this._invalidated=!0}function r(t,e){this._constructor="LineToolFibSpeedResistanceArcs";var i=e?e:new this.createPropertiesObject("linetoolfibwedge");a.call(this,t,new s(this,t),i),t._fibWedgeLabelsCache||(t._fibWedgeLabelsCache=new o)}var a=i(67).LineDataSource,l=i(97),h=i(118),c=i(121),d=i(122).TrendLineRenderer,p=i(123),u=i(88),_=i(92);inherit(o,c),o.prototype.levelsCount=function(){return r.LevelsCount},n.prototype.draw=function(t){if(t.strokeStyle=this._data.color,t.lineWidth=this._data.linewidth,t.beginPath(),t.arc(this._data.center.x,this._data.center.y,this._data.radius,this._data.edge1,this._data.edge2,!0),t.stroke(),this._data.fillBackground){if(t.arc(this._data.center.x,this._data.center.y,this._data.prevRadius,this._data.edge2,this._data.edge1,!1),this._data.gradient){var e=t.createRadialGradient(this._data.center.x,this._data.center.y,this._data.prevRadius,this._data.center.x,this._data.center.y,this._data.radius);e.addColorStop(0,TradingView.generateColor(this._data.color1,this._data.transparency)),e.addColorStop(1,TradingView.generateColor(this._data.color2,this._data.transparency)),t.fillStyle=e}else t.fillStyle=TradingView.generateColor(this._data.color,this._data.transparency,!0);t.fill()}},n.prototype.hitTest=function(t){var e,i,o,n,s,r,a,l,h,c=4,d=t.substract(this._data.center).length();return Math.abs(d-this._data.radius)<=c&&(e=t.substract(this._data.p1).length(),i=t.substract(this._data.p2).length(),o=Math.max(e,i),n=this._data.p1.substract(this._data.p2).length(),o<=n)?this._hittest:this._data.fillBackground&&d<=this._data.radius&&(s=this._data.p1.substract(this._data.center).normalized(),r=this._data.p2.substract(this._data.center).normalized(),d=t.substract(this._data.center).normalized(),a=s.dotProduct(r),l=d.dotProduct(s),h=d.dotProduct(r),l>=a&&h>=a)?this._backHittest:null},inherit(s,l),s.prototype.update=function(){this._invalidated=!0},s.prototype._updateImpl=function(){var e,i,o,n,s,r,a,h,c,d,p,u,_,f,g,m,v,y,w;if(l.prototype.update.call(this),this._cacheState=this._source.getCache().updateSource(this._source),this._levels=[],!(this._points.length<3))for(e=this._points,i=e[0],o=e[1],n=e[2],s=o.substract(i).normalized(),r=n.substract(i).normalized(),a=new t.Point(1,0),h=new t.Point(0,1),c=Math.acos(s.dotProduct(a)),s.dotProduct(h)<0&&(c=2*Math.PI-c),this._edge1=c,d=Math.acos(r.dotProduct(a)),r.dotProduct(h)<0&&(d=2*Math.PI-d),this._edge2=d,c<d&&(this._edge1=Math.max(c,d),this._edge2=Math.min(c,d)+2*Math.PI),Math.abs(c-d)>Math.PI&&(this._edge1=Math.min(c,d),this._edge2=Math.max(c,d)-2*Math.PI),p=this._source.properties(),u=1;u<=this._source.getCache().levelsCount();u++)_="level"+u,f=p[_],f.visible.value()&&(g=f.coeff.value(),m=f.color.value(),v=o.substract(i).length()*g,y=s.add(r).scaled(.5).normalized().scaled(v),w=i.add(y),this._levels.push({coeff:g,color:m,radius:v,labelPoint:w,p1:i.add(s.scaled(v)),p2:i.add(r.scaled(v)),linewidth:f.linewidth.value(),linestyle:f.linestyle.value(),index:u}))},s.prototype.renderer=function(){var t,e,i,o,s,r,l,h,c,f,g,m,v,y,w,b,S,T,C,x,P;if(this._invalidated&&(this._updateImpl(),this._invalidated=!1),t=new _,this._points.length<2)return t;if(e=this._source.properties(),i=this._points,o=i[0],s=i[1],r={points:[o,s],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:e.trendline.color.value(),linewidth:e.trendline.visible.value()?e.trendline.linewidth.value():0,linestyle:e.trendline.linestyle.value(),extendleft:!1,extendright:!1,leftend:a.LINEEND_NORMAL,rightend:a.LINEEND_NORMAL},t.append(new d(r)),this._points.length<3)return this.addAnchors(t),t;for(l=i[2],h=l.data,c=s.substract(o).length(),f=s.substract(o).normalized(),g=l.substract(o).normalized(),l=o.add(g.scaled(c)),l.data=h,r={points:[o,l],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:e.trendline.color.value(),linewidth:e.trendline.visible.value()?e.trendline.linewidth.value():0,linestyle:e.trendline.linestyle.value(),extendleft:!1,extendright:!1,leftend:a.LINEEND_NORMAL,rightend:a.LINEEND_NORMAL},t.append(new d(r)),m=this._model._fibWedgeLabelsCache,v=m.canvas().get(0),y=this._levels.length-1;y>=0;y--)if(w=this._levels[y],b={},b.center=this._points[0],b.radius=w.radius,y>0?b.prevRadius=this._levels[y-1].radius:b.prevRadius=0,b.edge=this._edge,b.color=w.color,b.linewidth=w.linewidth,b.edge1=this._edge1,b.edge2=this._edge2,b.p1=w.p1,b.p2=w.p2,b.fillBackground=e.fillBackground.value(),b.transparency=e.transparency.value(),S=new u(u.MOVEPOINT,null,w.index),t.append(new n(b,S)),e.showCoeffs.value()){if(T=this._cacheState.preparedCells.cells[this._levels[y].index-1],!T)continue;C={left:T.left,top:m.topByRow(this._cacheState.row),width:T.width,height:m.rowHeight(this._cacheState.row)},x={left:Math.round(w.labelPoint.x-C.width),top:Math.round(w.labelPoint.y-C.height/2),width:T.width,height:C.height},P=new p(v,C,x),t.append(P)}return this.isAnchorsRequired()&&(i=[o,s],this._model.lineBeingCreated()!=this._source&&i.push(l),t.append(this.createLineAnchor({points:i}))),t},inherit(r,a),r.LevelsCount=11,r.prototype.getCache=function(){return this._model._fibWedgeLabelsCache||(this._model._fibWedgeLabelsCache=new o),this._model._fibWedgeLabelsCache},r.prototype.pointsCount=function(){return 3},r.prototype.title=function(){return"Fib Wedge"},r.prototype.setPoint=function(t,e){var i,o,n,s,r,l,h;a.prototype.setPoint.call(this,t,e),this._recursiveGuard||(this._recursiveGuard=!0,2==t?(i=this.pointToScreenPoint(this._points[0])[0],o=this.pointToScreenPoint(this._points[1])[0],n=this.pointToScreenPoint(this._points[2])[0],s=n.substract(i).length(),r=o.substract(i).normalized(),o=i.add(r.scaled(s)),l=this.screenPointToPoint(o),this._properties.points[1].price.setValue(l.price),this._properties.points[1].bar.setValue(l.index)):(i=this.pointToScreenPoint(this._points[0])[0],o=this.pointToScreenPoint(this._points[1])[0],n=this.pointToScreenPoint(this._points[2])[0],h=o.substract(i).length(),r=n.substract(i).normalized(),n=i.add(r.scaled(h)),l=this.screenPointToPoint(n),this._properties.points[2].price.setValue(l.price),this._properties.points[2].bar.setValue(l.index)),this._recursiveGuard=!1)},r.prototype.addPoint=function(t){var e,i,o,n,s,r,l,h;return 2==this._points.length&&(e=this.pointToScreenPoint(this._points[0])[0],i=this.pointToScreenPoint(this._points[1])[0],this.priceScale().isPercent()&&(o=this.ownerSource().firstValue(),t.price=this.priceScale().priceRange().convertFromPercent(t.price,o)),n=this.pointToScreenPoint(t)[0],s=i.substract(e).length(),r=n.substract(e).normalized(),n=e.add(r.scaled(s)),l=this.priceScale().coordinateToPrice(n.y),h=Math.round(this._model.timeScale().coordinateToIndex(n.x)),t={index:h,price:l}),a.prototype.addPoint.call(this,t)},r.prototype.processErase=function(t,e){var i="level"+e,o=this.properties()[i].visible;t.setProperty(o,!1,"Erase level line")},r.prototype.createPropertiesObject=function(t,e,i){return new h(t,e,i,{range:[1,11]})},e.ArcWedgeRenderer=n,e.FibWedgePaneView=s,e.LineToolFibWedge=r}).call(e,i(21))},function(t,e,i){(function(e){"use strict";function o(){c.call(this)}function n(t,e){r.call(this,t,e),this._rendererCache={}}function s(t,e){this._constructor="LineToolTrendBasedFibExtension";var i=e?e:new this.createPropertiesObject("linetooltrendbasedfibextension");a.call(this,t,new n(this,t),i),this.version=s.version,t._trendBasedFibExtensionLabelsCache||(t._trendBasedFibExtensionLabelsCache=new o)}var r=i(97),a=i(67).LineDataSource,l=i(118),h=i(120).RectangleTransparencyRenderer,c=i(121),d=i(122).TrendLineRenderer,p=i(123),u=i(88),_=i(92);inherit(o,c),o.prototype.levelsCount=function(){return s.LevelsCount},o.prototype.points=function(t){
return[t.points()[0],t.points()[1]]},o.prototype.startPoint=function(t,e){return t.points()[2]},o.prototype.priceRange=function(t,e){var i=this.points(t),o=i[0],n=i[1],s=e?o.price-n.price:n.price-o.price;return s},o.prototype.sourceIsReady=function(t){return t.points().length>=3},inherit(n,r),n.prototype.update=function(){this._invalidated=!0},n.prototype._updateImpl=function(){var t,e,i,o,n,a,l,h,c,d,p,u,_,f;if(r.prototype.update.call(this),this._cacheState=this._model._trendBasedFibExtensionLabelsCache.updateSource(this._source),!(this._source.points().length<3)&&this._source.priceScale()&&!this._source.priceScale().isEmpty()&&!this._model.timeScale().isEmpty())for(t=this._source.points()[0],e=this._source.points()[1],i=this._source.points()[2],o=!1,n=this._source.properties(),n.reverse&&n.reverse.value()&&(o=n.reverse.value()),this._levels=[],a=o?t.price-e.price:e.price-t.price,this._source.priceScale().isPercent()&&(l=this._source.ownerSource().firstValue()),h=1;h<=s.LevelsCount;h++)c="level"+h,d=n[c],d.visible.value()&&(p=d.coeff.value(),u=d.color.value(),_=i.price+p*a,this._source.priceScale().isPercent()&&(_=this._source.priceScale().priceRange().convertToPercent(_,l)),f=this._source.priceScale().priceToCoordinate(_),this._levels.push({color:u,y:f,linewidth:n.levelsStyle.linewidth.value(),linestyle:n.levelsStyle.linestyle.value(),index:h}))},n.prototype.renderer=function(){var t,i,o,n,s,r,l,c,f,g,m,v,y,w,b,S,T,C,x,P,L,k,E,I,A;if(this._invalidated&&(this._updateImpl(),this._invalidated=!1),t=new _,this._points.length<2)return t;if(i=this._points[0],o=this._points[1],n=this._source.properties(),n.trendline.visible.value()&&(s={points:[i,o],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:n.trendline.color.value(),linewidth:n.trendline.linewidth.value(),linestyle:n.trendline.linestyle.value(),extendleft:!1,extendright:!1,leftend:a.LINEEND_NORMAL,rightend:a.LINEEND_NORMAL},t.append(new d(s))),this._points.length<3)return this.addAnchors(t),t;for(r=this._points[2],n.trendline.visible.value()&&(s={points:[o,r],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:n.trendline.color.value(),linewidth:n.trendline.linewidth.value(),linestyle:n.trendline.linestyle.value(),extendleft:!1,extendright:!1,leftend:a.LINEEND_NORMAL,rightend:a.LINEEND_NORMAL},t.append(new d(s))),l=Math.min(r.x,o.x),c=Math.min(i.y,o.y),f=Math.max(r.x,o.x),g=Math.max(i.y,o.y),m=n.fillBackground.value(),v=n.transparency.value(),y=n.extendLines.value()?this._model.timeScale().width():f,w=this._model._trendBasedFibExtensionLabelsCache,b=w.canvas().get(0),S=0;S<this._levels.length;S++)if(S>0&&m&&(T=this._levels[S-1],i=new e.Point(l,this._levels[S].y),o=new e.Point(y,T.y),C={},C.points=[i,o],C.color=this._levels[S].color,C.linewidth=0,C.backcolor=this._levels[S].color,C.fillBackground=!0,C.transparency=v,t.append(new h(C))),i=new e.Point(l,this._levels[S].y),o=new e.Point(f,this._levels[S].y),s={points:[i,o],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:this._levels[S].color,linewidth:this._levels[S].linewidth,linestyle:this._levels[S].linestyle,extendleft:!1,extendright:n.extendLines.value(),leftend:a.LINEEND_NORMAL,rightend:a.LINEEND_NORMAL},x=new u(u.MOVEPOINT,null,this._levels[S].index),t.append(new d(s,x)),n.showCoeffs.value()||n.showPrices.value()){if(P=this._cacheState.preparedCells.cells[this._levels[S].index-1],!P)continue;switch(n.horzLabelsAlign.value()){case"left":L=i;break;case"center":L=i.add(o).scaled(.5),L.x+=P.width/2,L.x=Math.round(L.x);break;case"right":n.extendLines.value()?L=new e.Point(y-4,this._levels[S].y):(L=new e.Point(y+4,this._levels[S].y),L.x+=P.width,L.x=Math.round(L.x))}k={left:P.left,top:w.topByRow(this._cacheState.row),width:P.width,height:w.rowHeight(this._cacheState.row)},E={left:L.x-k.width,top:L.y,width:P.width,height:k.height},I=n.vertLabelsAlign.value(),"middle"==I&&(E.top-=E.height/2),"bottom"==I&&(E.top-=E.height),A=new p(b,k,E),t.append(A)}return this.addAnchors(t),t},inherit(s,a),s.version=2,s.LevelsCount=24,s.prototype.stop=function(){a.prototype.stop.call(this),this._model._trendBasedFibExtensionLabelsCache.removeSource(this.id())},s.prototype.pointsCount=function(){return 3},s.prototype.title=function(){return"Trend-Based Fib Extension"},s.prototype.migrateVersion=function(t,e,i){1==t&&this.properties().extendLines.setValue(!0)},s.prototype.processErase=function(t,e){var i="level"+e,o=this.properties()[i].visible;t.setProperty(o,!1,"Erase level line")},s.prototype.createPropertiesObject=function(t,e,i){return new l(t,e,i,{range:[0,8]})},TradingView.LineToolTrendBasedFibExtension=s,t.exports=s}).call(e,i(21))},function(t,e,i){(function(t){"use strict";function o(t,e){f.call(this,t,e),this._rendererCache=[{},{},{},{},{},{}],this._invalidated=!0}function n(t,e){var i=e?e:new b("linetoolelliott");_.call(this,t,new o(this,t),i)}function s(t,e){var i=e?e:new b("linetoolelliott");_.call(this,t,new o(this,t),i),this.version=s.version}function r(t,e){this._constructor="LineToolElliottImpulse";var i=e?e:new b("linetoolelliottimpulse");s.call(this,t,i)}function a(t,e){this._constructor="LineToolElliottTriangle";var i=e?e:new b("linetoolelliotttriangle");s.call(this,t,i)}function l(t,e){this._constructor="LineToolElliottTripleCombo";var i=e?e:new b("linetoolelliotttriplecombo");s.call(this,t,i)}function h(t,e){var i=e?e:new b("linetoolelliott");_.call(this,t,new o(this,t),i),this.version=h.version}function c(t,e){this._constructor="LineToolElliottCorrection";var i=e?e:new b("linetoolelliottcorrection");h.call(this,t,i)}function d(t,e){this._constructor="LineToolElliottLineToolElliottDoubleCombo";var i=e?e:new b("linetoolelliottdoublecombo");h.call(this,t,i)}var p=i(131).EllipseRendererSimple,u=i(98).TextRenderer,_=i(67).LineDataSource,f=i(97),g=i(122).TrendLineRenderer,m=i(132).Action,v=i(88),y=i(92),w=i(59).RGBColor,b=i(73).DefaultProperty;inherit(o,f),o.prototype.renderer=function(){var e,i,o,n,s,r,a,l,h,c,d,_,f,m,b,S,T,C,x,P,L;if(this._invalidated&&(this.updateImpl(),this._invalidated=!1),!this._wave)return null;for(e=this.isAnchorsRequired()?0:1,i=new y,o=this._source.properties(),n=0;n<this._wave.length;n++)i.append(new g(this._wave[n]));for(s=1,this._points.length>2&&(r=this._points[2],a=this._points[1],s=t.sign(r.y-a.y)),l=[],h=0,this._model.lineBeingCreated()==this._source&&(h=1),c=new w(this._model.backgroundColor()).blackWhiteContrast(),d=o.color.value(),n=0;n<this._points.length-h;n++,s=-s)n<e||(_=this._source.label(n),f=_.label,"circle"==_.decoration&&(m=this._points[n].clone(),1==s?m.y+=13+_.fontIncrease/2:m.y-=14+_.fontIncrease/2,b=(12+_.fontIncrease)/2+2,r=m.substract(new t.Point(b,b)),a=m.add(new t.Point(b,b)),S={points:[r,a],color:new w(d).darken("black"==c?15:-15).toHex(),linewidth:1,fillBackground:!1},T=new p(S),i.append(T)),"brackets"==_.decoration&&(f="("+f+")"),C={points:[this._points[n]],text:f,color:new w(d).darken("black"==c?15:-15).toHex(),vertAlign:1==s?"top":"bottom",horzAlign:"center",font:"Arial",offsetX:0,offsetY:1==s?5:-10,fontsize:12+_.fontIncrease,bold:_.bold},l.push(C),""!==_&&i.append(new u(C,this._rendererCache[n],new v(v.CHANGEPOINT,n))));if(this.isAnchorsRequired()){for(x=[],P=0;P<l.length;P++)L=this._points[P].clone(),L.y=l[P].points[0].y,L.data=P,x.push(L);this._model.lineBeingCreated()==this._source&&x.pop(),i.append(this.createLineAnchor({points:x}))}return i},o.prototype.update=function(){this._invalidated=!0},o.prototype.updateImpl=function(){var e,i,o,n,s,r,a,l,h,c,d,p,u,g,m,v,y,w;if(f.prototype.update.call(this),this._wave=[],e=this._source.properties(),i=this._source.priceScale(),o=this._model.timeScale(),i&&!i.isEmpty()&&!o.isEmpty()&&(this._source.priceScale().isPercent()&&(n=this._source.ownerSource().firstValue()),s=e.color.value(),e.showWave.value()))for(r=this._source.points(),a=1;a<r.length;a++)l=r[a-1],h=r[a],c=this._model.mainSeries().bars().valueAt(l.index),d=this._model.mainSeries().bars().valueAt(h.index),p=o.indexToCoordinate(l.index),u=o.indexToCoordinate(h.index),g=l.price,m=h.price,this._source.priceScale().isPercent()&&(g=this._source.priceScale().priceRange().convertToPercent(g,n),m=this._source.priceScale().priceRange().convertToPercent(m,n)),v=i.priceToCoordinate(g),y=i.priceToCoordinate(m),w={points:[new t.Point(p,v),new t.Point(u,y)],width:o.width(),height:i.height(),color:TradingView.generateColor(s,0),linewidth:e.linewidth.value(),linestyle:CanvasEx.LINESTYLE_SOLID,extendleft:!1,extendright:!1,leftend:_.LINEEND_CIRCLE,rightend:_.LINEEND_CIRCLE,endstyle:{strokeWidth:1,fillStyle:this._model.backgroundColor()},overlayLineEndings:!0},this._wave.push(w)},inherit(n,_),n.migrateState=function(t){var e={0:11,1:10,2:9,3:8,4:7,5:6,6:5,7:4,8:3},i={0:11,1:8};"LineToolElliottSubminuette"===t.type&&(t.type="LineToolElliottImpulse",t.state.degree=e[t.state.wavesize]),"LineToolElliottMinor"===t.type&&(t.type="LineToolElliottImpulse",t.state.degree=e[t.state.wavesize]),"LineToolElliottCircle"===t.type&&(t.type="LineToolElliottImpulse",t.state.degree=e[t.state.wavesize]),"LineToolElliottMinorRetr"===t.type&&(t.type="LineToolElliottCorrection",t.state.degree=i[t.state.wavesize]),"LineToolElliottMajorRetr"===t.type&&(t.type="LineToolElliottCorrection",t.state.degree=i[t.state.wavesize])},n.prototype.title=function(){return"Elliott Labels"},n.degrees=[$.t("Supermillennium"),$.t("Millennium"),$.t("Submillennium"),$.t("Grand Supercycle"),$.t("Supercycle"),$.t("Cycle"),$.t("Primary"),$.t("Intermediate"),$.t("Minor"),$.t("Minute"),$.t("Minuette"),$.t("Subminuette"),$.t("Micro"),$.t("Submicro"),$.t("Miniscule")],n.prototype.additionalActions=function(t){var e=new m({text:$.t("Degree")}),i=this;return e.subActions=n.degrees.map(function(e,o){var n=new m({text:e,checkable:!0,checked:i.properties().degree.value()==o});return n.callbacks().subscribe(null,function(){t.setProperty(i.properties().degree,o,"Change Elliott Degree")}),n}),[e]},n.prototype.label=function(t){var e=n.degrees.length-this.properties().degree.value()-1,i=Math.floor(e/3),o=e%3,s=4*Math.floor(i),r=!!(i%2),a=["","brackets","circle"][o],l=this.labelsGroup(),h=l[i][t];return{fontIncrease:s,bold:r,decoration:a,label:h}},inherit(s,n),s.version=3,s.prototype.pointsCount=function(){return 6},s.prototype.migrateVersion=function(t,e,i){if(1==t){var o=$.extend({},this._timePoint[0]);this._timePoint.unshift(o),this._points.length>0&&(o=$.extend({},this._points[0]),this._points.unshift(o))}},inherit(r,s),r._labelsGroups=[["0","1","2","3","4","5"],["0","i","ii","iii","iv","v"],["0","1","2","3","4","5"],["0","I","II","III","IV","V"],["0","1","2","3","4","5"]],r.prototype.labelsGroup=function(){return r._labelsGroups},inherit(a,s),a._labelsGroups=[["0","A","B","C","D","E"],["0","a","b","c","d","e"],["0","A","B","C","D","E"],["0","a","b","c","d","e"],["0","A","B","C","D","E"]],a.prototype.labelsGroup=function(){return a._labelsGroups},inherit(l,s),l._labelsGroups=[["0","W","X","Y","X","Z"],["0","w","x","y","x","z"],["0","W","X","Y","X","Z"],["0","w","x","y","x","z"],["0","W","X","Y","X","Z"]],l.prototype.labelsGroup=function(){return l._labelsGroups},inherit(h,n),h.version=3,h.prototype.pointsCount=function(){return 4},h.prototype.migrateVersion=function(t,e,i){if(1==t){var o=$.extend({},this._timePoint[0]);this._timePoint.insert(o,0),this._points.length>0&&(o=$.extend({},this._points[0]),this._points.insert(o,0))}},inherit(c,h),c._labelsGroups=[["0","A","B","C"],["0","a","b","c"],["0","A","B","C"],["0","a","b","c"],["0","A","B","C"]],c.prototype.labelsGroup=function(){return c._labelsGroups},inherit(d,h),d._labelsGroups=[["0","W","X","Y"],["0","w","x","y"],["0","W","X","Y"],["0","w","x","y"],["0","W","X","Y"]],d.prototype.labelsGroup=function(){return d._labelsGroups},e.LineToolElliott=n,e.LineToolElliottImpulse=r,e.LineToolElliottTriangle=a,e.LineToolElliottTripleCombo=l,e.LineToolElliottCorrection=c,e.LineToolElliottDoubleCombo=d}).call(e,i(21))},function(t,e,i){(function(t){"use strict";function o(){c.call(this)}function n(t,e,i){this._data=t,this._hittest=e||new u(u.MOVEPOINT),this._backHittest=i||new u(u.MOVEPOINT_BACKGROUND)}function s(t,e){a.call(this,t,e),this._rendererCache={},this._invalidated=!0,this._numericFormatter=new g}function r(t,e){this._constructor="LineToolFibCircles";var i=e?e:new this.createPropertiesObject("linetoolfibcircles");l.call(this,t,new s(this,t),i),t._fibCirclesLabelsCache||(t._fibCirclesLabelsCache=new o)}var a=i(97),l=i(67).LineDataSource,h=i(118),c=i(121),d=i(122).TrendLineRenderer,p=i(123),u=i(88),_=i(92),f=i(75),g=f.NumericFormatter;inherit(o,c),o.prototype.levelsCount=function(){return r.LevelsCount},n.prototype.draw=function(t){var e,i,o,n,s,r,a,l,h;t.lineCap="butt",t.strokeStyle=this._data.color,t.lineWidth=this._data.linewidth,t.lineStyle=this._data.linestyle,e=this._data.points[0],i=this._data.points[1],o=Math.abs(e.x-i.x),n=Math.abs(e.y-i.y),s=e.add(i).scaled(.5),o<1||n<1||(this._data.wholePoints&&(a=this._data.wholePoints[0],l=this._data.wholePoints[1],r=Math.abs(a.x-l.x),h=Math.abs(a.y-l.y)),t.save(),t.translate(s.x,s.y),t.scale(1,n/o),t.beginPath(),t.arc(0,0,o/2,0,2*Math.PI,!1),t.restore(),t.stroke(),this._data.fillBackground&&(this._data.wholePoints&&(t.translate(s.x,s.y),t.scale(1,n/o),t.arc(0,0,r/2,0,2*Math.PI,!0)),t.fillStyle=TradingView.generateColor(this._data.backcolor,this._data.transparency,!0),t.fill()))},n.prototype.hitTest=function(e){var i,o,n,s,r,a,l,h,c,d,p,u;return this._data.points.length<2?null:(i=this._data.points[0],o=this._data.points[1],n=.5*Math.abs(i.x-o.x),s=.5*Math.abs(i.y-o.y),r=Math.abs(i.x-o.x),a=Math.abs(i.y-o.y),l=i.add(o).scaled(.5),h=e.substract(l),r<1||a<1?null:(c=(o.y-i.y)/(o.x-i.x),h.y/=c,d=h.x*h.x+h.y*h.y,p=d-n*n,p=t.sign(p)*Math.sqrt(Math.abs(p/n)),u=3,Math.abs(p)<u?this._hittest:this._data.fillBackground&&!this._data.noHitTestOnBackground&&p<u?this._backHittest:null))},inherit(s,a),s.prototype.update=function(){this._invalidated=!0},s.prototype._updateImpl=function(){var e,i,o,n,s,l,h,c,d,p,u,_;if(a.prototype.update.call(this),this._cacheState=this._model._fibCirclesLabelsCache.updateSource(this._source),!(this._source.points().length<2)&&this._source.priceScale()&&!this._source.priceScale().isEmpty()&&!this._model.timeScale().isEmpty())for(e=this._points[0],i=this._points[1],this._center=e.add(i).scaled(.5),o=Math.abs(i.x-e.x),n=Math.abs(i.y-e.y),this._levels=[],s=this._source.properties(),l=1;l<=r.LevelsCount;l++)h="level"+l,c=s[h],c.visible.value()&&(d=c.coeff.value(),p=c.color.value(),u=[],u.push(new t.Point(this._center.x-.5*o*d,this._center.y-.5*n*d)),u.push(new t.Point(this._center.x+.5*o*d,this._center.y+.5*n*d)),_=new t.Point(this._center.x,this._center.y+.5*n*d),this._levels.push({color:p,points:u,labelPoint:_,linewidth:c.linewidth.value(),linestyle:c.linestyle.value(),index:l}))},s.prototype.renderer=function(){var t,e,i,o,s,r,a,h,c,f,g,m,v,y,w,b,S,T;if(this._invalidated&&(this._updateImpl(),this._invalidated=!1),t=new _,this._points.length<2)return t;for(e=this._points[0],i=this._points[1],o=this._center,s=this._source.properties(),r=s.fillBackground.value(),a=s.transparency.value(),h=this._model._fibCirclesLabelsCache,c=h.canvas().get(0),f=0;f<this._levels.length;f++)if(g=this._levels[f],m={},m.points=g.points,m.color=g.color,m.linewidth=g.linewidth,m.backcolor=g.color,f>0&&(m.wholePoints=this._levels[f-1].points),m.fillBackground=r,m.transparency=a,v=new u(u.MOVEPOINT,null,g.index),t.append(new n(m,v)),s.showCoeffs.value()){if(y=this._cacheState.preparedCells.cells[this._levels[f].index-1],!y)continue;w={left:y.left,top:h.topByRow(this._cacheState.row),width:y.width,height:h.rowHeight(this._cacheState.row)},b={left:Math.round(g.labelPoint.x-w.width),top:Math.round(g.labelPoint.y-w.height/2),width:y.width,height:w.height},S=new p(c,w,b),t.append(S)}return s.trendline.visible.value()&&(T={points:[this._points[0],this._points[1]],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:s.trendline.color.value(),linewidth:s.trendline.linewidth.value(),linestyle:s.trendline.linestyle.value(),extendleft:!1,extendright:!1,leftend:l.LINEEND_NORMAL,rightend:l.LINEEND_NORMAL},t.append(new d(T))),this.addAnchors(t),t},inherit(r,l),r.LevelsCount=11,r.prototype.pointsCount=function(){return 2},r.prototype.title=function(){return"Fib Circles"},r.prototype.processErase=function(t,e){var i="level"+e,o=this.properties()[i].visible;t.setProperty(o,!1,"Erase level line")},r.prototype.createPropertiesObject=function(t,e,i){return new h(t,e,i,{range:[1,11]})},e.EllipseRendererSimple=n,e.LineToolFibCircles=r}).call(e,i(21))},function(t,e,i){(function(t){"use strict";function o(e){e||(e={}),this.checkable=e.checkable||!1,this.checked=e.checked||null,this.enabled=void 0===e.enabled||e.enabled,this.visible=e.visible||!0,this.active=!0,this.font=e.font||"Arial",this.icon=e.icon||null,this.iconText=e.iconText||null,this.iconVisibleInMenu=e.iconVisibleMenu||!0,this.deleteButton=e.deleteButton||null,this.shortcut=null,this.setShortCut(e.shortcut,e.doNotBindShortcut),this.statusTip=e.statusTip||null,this.text=e.text||null,this.toolTip=e.toolTip||null,this.htmlclass=e.htmlclass||null,this._callbackContext=e.callbackContext||this,this._callbacks=new t,this.subActions=e.subActions||[]}function n(){o.call(this),this.font=null,this.subActions=null,this.htmlclass="action-separator"}function s(t){o.call(this),this.deferred=t}var r=i(133);o.prototype.callbacks=function(){return this._callbacks},o.prototype.callbackContext=function(){return this._callbackContext},o.prototype.setCallbackContext=function(t){this._callbackContext=t},o.prototype.hasSubActions=function(){return this.subActions&&this.subActions.length},o.prototype.setChecked=function(t){this.checked=t},o.prototype._toggleChecked=function(){this.checked=!this.checked},o.prototype.setVisible=function(t){this.visible=t},o.prototype.setEnabled=function(t){this.enabled=t},o.prototype.disable=function(){this.setEnabled(!1)},o.prototype.enable=function(){this.setEnabled(!0)},o.prototype.setActive=function(t){this.active!=t&&(this.active=t,this.shortcut&&!this.doNotBindShortcut&&(t?this._bindShortCut():this._unbindShortCut()))},o.prototype.setShortCut=function(t,e){t&&(this.shortcut=t,e!==!0&&this._bindShortCut())},o.prototype._bindShortCut=function(){r.bind(this.shortcut,function(t){if(t.preventDefault(),this.enabled)return this.executeCallback(),!1}.bind(this))},o.prototype._unbindShortCut=function(){r.unbind(this.shortcut)},o.prototype.setIconVisible=function(t){this.iconVisibleInMenu=t},o.prototype.executeCallback=function(t){this._lastEvent=t,this._toggleChecked(),this._callbacks.fire(this)},inherit(n,o),inherit(s,o),e.Action=o,e.ActionSeparator=n,e.ActionPlaceholder=s}).call(e,i(32))},function(t,e){"use strict";function i(){return this.bindings={},this.$doc=$(document),this}i.prototype.parseName=function(t){return"."+t.replace("+","")},i.prototype.bind=function(t,e){var i=this.parseName(t);this.$doc.unbind("keydown"+i).bind("keydown"+i,t,e),this.bindings[t]=e},i.prototype.unbind=function(t){this.$doc.unbind("keydown"+this.parseName(t)),delete this.bindings[t]},t.exports=new i},function(t,e,i){"use strict";function o(t,e,i){this.customization={forcePriceAxisLabel:!0,disableSelection:!0,disableErasing:!0},n.call(this,t,e,i)}var n=i(67).LineDataSource;inherit(o,n),o.POINTS_COUNT=1,o.prototype.pointsCount=function(){return o.POINTS_COUNT},o.prototype.hasContextMenu=function(){return!1},o.prototype.state=function(){return null},o.prototype.startMoving=function(){n.prototype.startMoving.apply(this,arguments),this._cursorMoved=!1},o.prototype.endMoving=function(){n.prototype.endMoving.apply(this,arguments),this._cursorMoved=!1},o.prototype.correctPoints=function(t){var e,i,o,n,s;for(this._currentMovingPoint&&this._startMovingPoint?this._currentMovingPoint.price-this._startMovingPoint.price&&(this._cursorMoved=!0):this._cursorMoved=!1,e=this.priceScale(),i=e.mainSource().base(),o=1/i,n=0;n<t.length;n++)s=t[n],this._cursorMoved&&(s.price=this._currentMovingPoint.price),s.price=o*Math.round(s.price/o),t[n]=s},o.prototype.userEditEnabled=function(){return!0},o.prototype.isUserDeletable=function(){return!1},o.prototype.showInObjectTree=function(){return!1},t.exports=o},function(t,e,i){"use strict";function o(t,e,i,o){var n,s,l,g,m,v,y,w,b,S,T,C,x,P,L,k="VbPFixed@tv-volumebyprice",E=h.lineToolNameForPointsBasedStudy(k);if(i=i?i:f.findStudyMetaInfo(t.studiesMetaData(),k),n=t.studyVersioning(),s=e?e:c(i,null,null,n),this._metaInfo=i,this.m_data=new _,this._plotOffsets={},this._plotOffsetsMetaInfoOverride={},l=this,g=new a(l,t),m=new h.StudyPaneView_hhists(l,t),v=new h.StudyPaneView_horizlines(l,t),y=new h.StudyPaneView_polygons(l,t),w=[g,m,v,y],o=t.mainSeries(),i.plots.length>0&&(b=new d(l,o,t,i.plots[0].id),w.push(b)),i.plots.length>1&&(S=new d(l,o,t,i.plots[1].id),w.push(S)),i.plots.length>2&&(T=new d(l,o,t,i.plots[2].id),w.push(T)),r.call(this,t,w,s,E),this._turnaroundCounter=1,this._turnaround="vbpfixed_"+this._turnaroundCounter,this._metaInfo=i,this._graphics=new p(i),this._plotFields=[],C=this.metaInfo().plots)for(x=0,P=C.length;x<P;x++)L=C[x].id,this._plotFields.push(L);this.clearData(),this._formatter=new u}var n=i(136),s=i(67).LineDataSource,r=n.StudyLineDataSource,a=n.StudyLineDataSourcePaneView,l=i(141),h=l.Study,c=l.prepareStudyProperties,d=i(187).StudyPaneView,p=i(138),u=i(75).VolumeFormatter,_=i(105),f=i(107);inherit(o,r),o.prototype.pointsCount=function(){return 2},o.prototype._requestStudy=function(){var t,e,i,o,n,s,r=this.points()[0],a=this.points()[1],l=Math.min(r.index,a.index),c=Math.max(r.index,a.index);return l===c?void this.clearData():(t=this._model.mainSeries().bars().valueAt(l),e=this._model.mainSeries().bars().valueAt(c),void(t&&e&&(i=1e3*t[TradingView.TIME_PLOT],o=1e3*e[TradingView.TIME_PLOT],n=[],void 0!==this.properties().inputs.rowsLayout&&n.push(this.properties().inputs.rowsLayout.value()),n.push(this.properties().inputs.rows.value()),n.push(this.properties().inputs.volume.value()),n.push(i),n.push(o),n.push(this.properties().inputs.vaVolume.value()),s=this,this._studyId?(this._turnaround="vbpfixed_"+ ++this._turnaroundCounter,this._model.chartApi().modifyStudy(this._studyId,this._turnaround,n,function(t){s.onData(t)})):(this._studyId=h.makeNextStudyId(),this._model.chartApi().createStudy(this._studyId,this._turnaround,this._model.mainSeries()._seriesId,this._metaInfo.id+"-1!",n,function(t){s.onData(t)})))))},o.prototype.onData=function(t){if("data_update"===t.method&&t.params.customId==="pointset_"+this._currentPointsetId)s.prototype.onData.call(this,t),2==this._points.length&&this._requestStudy();else if("data_update"===t.method&&t.params.customId===this._studyId){if(!this._checkTurnaround(t.params.turnaround))return;t.params.nonseries.d=h.prototype._makeJSONForNSData.call(this,t),this._processPlotOffsets(t.params),this._mergeData(t.params.plots),""!==t.params.nonseries.d&&(this._graphics.process(t.params.nonseries),this._correctPoints(this._graphics.graphics())),t.params.nonseries.indexes.length>0&&(this._indexes=t.params.nonseries.indexes),this.updateAllViews(),this._model.updateSource(this)}},o.prototype._correctPoints=function(t){var e,i,o,n,s,r;if(t&&(void 0===t.indexes||0!==t.indexes.length)&&t.hhists){for(e=t.hhists[0].data,i=null,o=null,n=0;n<e.length;++n)s=e[n].priceLow,r=e[n].priceHigh,(!i||s<i)&&(i=s),(!o||r>o)&&(o=r);this._points[0].price=o,this._points[1].price=i}},o.prototype.calcIsActualSymbol=function(){this._isActualSymbol=!0,this.calcIsActualInterval()},o.prototype.formatter=function(){return this._formatter},o.prototype.isSelfColorerPlot=function(t){return h.isSelfColorerPlot(this,t)},o.prototype.offset=function(t){return h.offset(this,t)},o.prototype.data=function(){return this.m_data},o.prototype._processPlotOffsets=function(t){h.processPlotOffsets(this,t)},o.prototype._mergeData=function(t){this.m_data.merge(t)},t.exports=o},function(t,e,i){"use strict";function o(t,e,i,s){var a=new n(this,t);e.push(a),r.call(this,t,e,i),this.properties().listeners().subscribe(this,o.prototype.changeStyles),this._constructor=s,this._studyId=null,this._nonseriesdata=null,this._indexes=null,this._metaInfo=null,this._graphics=null,this._inputs=null}function n(t,e){a.call(this,t,e)}function s(t,e){a.call(this,t,e)}var r=i(67).LineDataSource,a=i(97),l=i(137).VertLineRenderer,h=i(122).TrendLineRenderer,c=i(87).SelectionRenderer,d=i(92),p=i(138),u=i(105),_=i(107);inherit(o,r),o.prototype.pointsCount=function(){throw Error("Reimplement this in a child class")},o.prototype.title=function(){return this._metaInfo.description},o.prototype.studyId=function(){return this._metaInfo.id},o.prototype._requestStudy=function(){throw Error("Reimplement this in a child class")},o.prototype.changeStyles=function(){var t,e,o,n=i(139);if(this._inputs){t=n.splitInputs(this.properties().inputs.state()),e=t.obj;for(o in e)if(e[o]!==this._inputs[o]){this._inputs=e,this._requestStudy(),this._properties.lastUpdateTime.setValue((new Date).valueOf());break}}else t=n.splitInputs(this.properties().inputs.state()),this._inputs=TradingView.clone(t.obj),this._requestStudy(),this._properties.lastUpdateTime.setValue((new Date).valueOf())},o.prototype._checkTurnaround=function(t){return t===this._turnaround||t==this._model.mainSeries()._turnaround||t===this._model.mainSeries()._turnaround+"_"+this._turnaround},o.prototype.stop=function(){r.prototype.stop.call(this),this._studyId&&this._model.chartApi().removeStudy(this._studyId)},o.prototype.onData=function(t){throw Error("Reimplement this in a child class")},o.prototype._correctedPoint=function(t){var e=parseInt(this._model.mainSeries().bars().first(),10),i=parseInt(this._model.mainSeries().bars().last(),10);return t.index=Math.max(t.index,e),t.index=Math.min(t.index,i),t},o.prototype.addPoint=function(t){var e=r.prototype.addPoint.call(this,this._correctedPoint(t));return e},o.prototype.setLastPoint=function(t){return r.prototype.setLastPoint.call(this,this._correctedPoint(t))},o.prototype.move=function(t){},o.prototype.clearData=function(){void 0!==this.m_data&&(this.m_data=new u(this._plotFields)),this._nonseriesdata=null,this._indexes=null,this._graphics=new p(this._metaInfo),this.updateAllViews()},o.prototype.state=function(t){var e=r.prototype.state.call(this,t);return t&&(void 0!==this.m_data&&(e.data=this.m_data.state()),e.nonseriesdata=this._nonseriesdata,e.nonseriesindexes=this._indexes,e.graphics=this._graphics.graphics()),this.metaInfo()instanceof _?e.metaInfo=this.metaInfo().state():(e.metaInfo=$.extend({},this.metaInfo()),e.metaInfo.id=_.parseIdString(e.metaInfo.id+(e.metaInfo.version?"-"+e.metaInfo.version:"")).fullId),e},o.prototype.restoreData=function(t){void 0!==this.m_data&&void 0!==t.data&&this.m_data.restoreState(t.data),this._nonseriesdata=t.nonseriesdata?t.nonseriesdata:null,this._indexes=t.nonseriesindexes?t.nonseriesindexes:null,this._graphics.setGraphics(t.graphics?t.graphics:p.emptyGraphics())},o.prototype.setPoint=function(t,e){this._nonseriesdata=null,this._indexes=null,r.prototype.setPoint.call(this,t,this._correctedPoint(e))},o.prototype.disconnect=function(){this._studyId=0},o.prototype.graphics=function(){return this._graphics.graphics()},o.prototype.firstValue=function(){return this._model.mainSeries().data().firstValue()},o.prototype.formatter=function(){return this._model.mainSeries().data().formatter()},o.prototype.metaInfo=function(){return this._metaInfo},inherit(n,a),n.prototype.renderer=function(){var t,e,i,o,n,s,a,c=new d;return this._points.length<2?c:this._source._nonseriesdata?c:this._source._graphics&&!this._source._graphics.isEmpty()?c:(t=this._points[0],e=this._points[1],i=Math.min(t.x,e.x),o=Math.max(t.x,e.x),n={},n.points=[t],n.color="#808080",n.linewidth=this._source._doNotNeedLine?0:1,n.linestyle=CanvasEx.LINESTYLE_SOLID,c.append(new l(n)),s={},s.points=[e],s.color="#808080",s.linewidth=this._source._doNotNeedLine?0:1,s.linestyle=CanvasEx.LINESTYLE_SOLID,c.append(new l(s)),a={points:[t,e],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:"#808080",linewidth:this._source._doNotNeedLine?0:1,linestyle:CanvasEx.LINESTYLE_SOLID,extendleft:!1,extendright:!1,leftend:r.LINEEND_NORMAL,rightend:r.LINEEND_NORMAL},c.append(new h(a)),c)},inherit(s,a),s.prototype.renderer=function(){var t=new d;return this.isAnchorsRequired()&&(t.append(new c({points:this._points})),t.append(this.createLineAnchor({points:this._points}))),t},e.StudyLineDataSource=o,e.StudyLineDataSourcePaneView=s},function(t,e,i){(function(t){"use strict";function o(t,e){this._data=t,this._hittest=e}function n(t,e){a.call(this,t,e),this._invalidated=!0}function s(t,e){h.call(this),this._source=t,this._model=e,this._invalidated=!0}function r(t,e){this._constructor="LineToolVertLine";var i=e?e:new _("linetoolvertline");this._timeAxisView=new s(this,t),l.call(this,t,new n(this,t),i)}var a=i(97),l=i(67).LineDataSource,h=i(70),c=i(71),d=i(88),p=i(89).PaneRendererClockIcon,u=i(92),_=i(73).DefaultProperty,f=i(75).DateTimeFormatter;o.prototype.draw=function(t){var e,i;0!==this._data.points.length&&(this._data.linewidth<=0||(e=this._data.points[0].x,t.translate(1,0),i=t.canvas.height,t.lineCap="square",t.strokeStyle=this._data.color,t.lineWidth=this._data.linewidth,t.lineStyle=this._data.linestyle,CanvasEx.drawLine(t,e,0,e,i)))},o.prototype.hitTest=function(t){var e,i;return 0===this._data.points.length?null:(e=3,i=this._hittest||new d(d.MOVEPOINT),Math.abs(t.x-this._data.points[0].x)<=e?i:null)},inherit(n,a),n.prototype.update=function(){this._invalidated=!0},n.prototype.updateImpl=function(){a.prototype.update.call(this),this._invalidated=!1},n.prototype.renderer=function(){var e,i,n;return this._invalidated&&this.updateImpl(),e={},e.points=this._points,e.color=this._source.properties().linecolor.value(),e.linewidth=this._source.properties().linewidth.value(),e.linestyle=this._source.properties().linestyle.value(),i=new u,i.append(new o(e)),this.addAnchors(i),TradingView.printing||!this._source.hasAlert.value()||this._model.readOnly()||1!=e.points.length||(n=new t.Point(this._points[0].x,this._source.priceScale().height()/2),this._source.getAlertIsActive(function(t){i.append(new p({point1:n,color:t?e.color:defaults("chartproperties.alertsProperties.drawingIcon.color")}))})),i},inherit(s,h),s.prototype.update=function(){this._invalidated=!0},s.prototype.updateImpl=function(){var t,e;this._model.timeScale().isEmpty()||0!==this._source.points().length&&(this._text="",this._background=this._source.properties().linecolor.value(),t=this._source.points()[0].index,this._coordinate=this._model.timeScale().indexToCoordinate(t),e=this._model.timeScale().indexToUserTime(t),e&&(this._text=new f(this._model.mainSeries().isDWM()).format(e)),this._invalidated=!1)},s.prototype.renderer=function(){this._invalidated&&this.updateImpl();var t={text:this._text,coordinate:this._coordinate,color:this.color(),background:this._background};return new c(t)},inherit(r,l),r.prototype.pointsCount=function(){return 1},r.prototype.title=function(){return"Vertical Line"},r.prototype.timeAxisViews=function(){return this.symbol()!==this._model.mainSeries().symbol()?null:this.properties().showTime.value()?[this._timeAxisView]:null},r.prototype.updateAllViews=function(){l.prototype.updateAllViews.call(this),this._timeAxisView.update()},r.prototype.canHasAlert=function(){return!0},r.prototype._getAlertPlots=function(){var t=this._points[0],e={index:t.index,price:t.price+1};return[this._linePointsToAlertPlot([t,e],null,!0,!0)]},e.VertLineRenderer=o,e.LineToolVertLine=r}).call(e,i(21))},function(t,e){"use strict";function i(t){this._graphics=i.emptyGraphics(),assert(!!t,"Study metaInfo is absent!"),this._metaInfo=t}i.emptyGraphics=function(){return{indexes:[]}},i.prototype.isEmpty=function(){var t=Object.keys(this._graphics).length>1;return 0===this._graphics.indexes.length&&!t},i.prototype.graphics=function(){
return this._graphics},i.prototype.setGraphics=function(t){this._graphics=t,this._postProcessGraphicsData()},i.prototype.process=function(t){if(""!==t.d)return t.d.indexes_replace?void this.replaceIndexes(t):void(t.d.graphicsCmds&&(this.processEraseCmds(t.d.graphicsCmds.erase),this.processCreateCmds(t.d.graphicsCmds.create,t.indexes)))},i.prototype.replaceIndexes=function(t){""!==t.d&&(assert(!!t.d.indexes_replace),this._graphics.indexes=t.indexes)},i.prototype.processEraseCmds=function(t){var e,o,n,s,r;if(t)for(assert(!!this._graphics,"_graphics object doesn't exist in the study!"),assert(!!this._graphics.indexes,"_graphics.indexes array doesn't exist in the study!"),e=0;e<t.length;++e)if(o=t[e],"all"===o.action)this._graphics=i.emptyGraphics();else if("one"===o.action)for(n in this._graphics[o.type])s=this._graphics[o.type][n],r=i._findGraphicsObjIndexById(s.data,o.id),r>=0&&s.data.splice(r,1);else Error("Unknown graphics command "+o.action)},i._findGraphicsObjIndexById=function(t,e){for(var i=0;i<t.length;++i)if(t[i].id===e)return i;return-1},i.prototype.processCreateCmds=function(t,e){var i,o,n,s,r,a;if(t){assert(!!e,"indexes are missing in the study nonseries response!"),assert(!!this._graphics,"_graphics object doesn't exist in the study!"),assert(!!this._graphics.indexes,"_graphics.indexes array doesn't exist in the study!");for(i in t){assert(i in this._metaInfo.graphics,"There is a '"+i+"' in study response, but it doesn't present in metaInfo!");for(o=0;o<t[i].length;++o){n=t[i][o],s=n.styleId,assert(s in this._metaInfo.graphics[i]),this._graphics[i]||(this._graphics[i]=[]),r=null;for(a=0;a<this._graphics[i].length;++a)if(this._graphics[i][a].styleId===s){r=this._graphics[i][a];break}null===r&&(r={styleId:s,data:[]},this._graphics[i].push(r)),r.data=r.data.concat(n.data)}}"nochange"===e||(assert(Array.isArray(e)),this._graphics.indexes=e),this._postProcessGraphicsData()}},i.prototype._postProcessGraphicsData=function(){var t,e,o;if(this._graphics)for(t in this._graphics.hhists)e=this._graphics.hhists[t],i._sortHHistItemsByPrice(e.data),o=this._graphics.indexes,e.dataObj=i._splitHHistItemsBySession(e.data,o)},i._sortHHistItemsByPrice=function(t){t.sort(function(t,e){return t.priceLow-e.priceLow})},i._splitHHistItemsBySession=function(t,e){var i,o,n,s={};for(i=0;i<t.length;++i)o=t[i],n=e[o.firstBarTime],void 0!==n?(n in s||(s[n]=[]),s[n].push(o)):TradingView.logError("Cannot find index "+o.firstBarTime+" in study timescale indexes");return s},t.exports=i},function(t,e,i){"use strict";function o(t,e){var o,n,s,r,a,l,h,c,d,p,u;if(!t)throw Error("No studies metainfo");if(o=i(140),this._studiesMetainfo=t,!e)throw Error("No studies migrations");for(this._studiesMigrations=e,this._migrations={},n=0;n<this._studiesMigrations.length;n++)for(s=this._studiesMigrations[n],r=0;r<s.length;r++)for(a=s[r],l=a.versFrom,h=a.versTo,c=0;c<a.studyMigrations.length;c++){if(d=a.studyMigrations[c],p=d.studyId,0===d.rules.length)throw Error("Study Migration should have at least one convertion rule");u=p in this._migrations?this._migrations[p]:new o(p),u.addMigration(l,h,d.rules),this._migrations[p]=u}this._clientMigrations=[function(t,e){var i,o,n,s,r;if(0===this._studiesMetainfo.length||!t.isTVScript||t.version>=22)return e;for(i={},o=0,n=0;s=e[n],void 0!==s;)r=e[s.id],s.isFake&&(s.id="in_"+o++),i[n]=s,i[s.id]=r,n++;return i}]}var n=i(58),s=i(107);o.prototype.updateMetaInfo=function(t){var e,i,o;if(!t)return t;for(assert(!t.isTVScript,"This method should update only built-in java indicators metaInfo. For Pine indicators use updateMetaInfoAsync"),e=null,i=this._studiesMetainfo,o=0;o<i.length;o++)if(i[o].id===t.id){e=i[o];break}return TradingView.clone(e)},o.prototype.updateMetaInfoAsync=function(t,e){var i,o,n,s=$.Deferred(),r=s.promise();if(!t)return s.reject("No old metaInfo was given"),r;if(e)return s.resolve(null),r;if(t.isTVScript&&void 0!==t.TVScriptSourceCode);else{for(i=null,o=this._studiesMetainfo,n=0;n<o.length;n++)if(o[n].id===t.id){i=o[n];break}i?s.resolve(TradingView.clone(i)):s.resolve(null)}return r},o.prototype.updateStudyState=function(t,e,i){var n,r,a,l,h,c,d,p,u,_,f,g,m,v,y;if(t){t=TradingView.clone(t),n=e.id,n in this._migrations&&(r=this._migrations[n].updateInputs(e.version,t.inputs),t.inputs=r);for(a=0;a<this._clientMigrations.length;++a)r=this._clientMigrations[a].call(this,e,t.inputs),Object.keys(r).length==Object.keys(t.inputs).length?t.inputs=r:TradingView.logWarn("StudyVersioning._clientMigrations application returned bad result. Skipping it...")}if(l=i,l&&t&&(h={},o.mergeInputs(h,l.inputs),o.mergeInputs(h,l.defaults.inputs),o.mergeInputs(h,t.inputs),t.inputs=h,c=s.versionOf(e),e.isTVScript&&e.TVScriptSourceCode&&c>=12&&c<=26)){for(d={},a=0;a<e.plots.length;++a)p=e.plots[a],u=l.plots[a],d[p.id]=u.id;for(_=Object.keys(t.styles),a=0;a<_.length;++a)f=_[a],g=t.styles[f],delete t.styles[f],m=d[f],t.styles[m]=g;for(v=Object.keys(t.plots),a=0;a<v.length;++a)y=v[a],f=t.plots[y].id,t.plots[y].id=d[f]}return t},o.prototype.patchPointsBasedStudyState=function(t){return o._fixInputsMaxValue(t.state,t.metaInfo),t},o.prototype.patchPointsBasedStudyData=function(t,e){if("battle"!=n())return e;if(!t||!e)return e;var i=TradingView.clone(e);return"VbPFixed@tv-volumebyprice"===t.id&&t.version&&t.version<=4&&o._patchOldVolumeProfiles(0,i),i},o.prototype.patchStudyData=function(t,e,i,r){var a,l,h,c,d,p,u;if("battle"!=n())return{data:e,nsData:i,indexes:r};if(a=TradingView.clone(e),l=TradingView.clone(i),h=TradingView.clone(r),"VbPVisible@tv-volumebyprice"===t.id&&t.version&&t.version<=4&&o._patchOldVolumeProfiles(0,a.graphics),"VbPSessions@tv-volumebyprice"===t.id&&t.version&&t.version<=4&&o._patchOldVolumeProfiles(0,a.graphics),c=s.versionOf(t),t.isTVScript&&t.TVScriptSourceCode&&c>=12&&c<=26)for(d=a.columns,a.columns=[],p=0;p<d.length;++p)u="plot_"+p,a.columns.push(u);return{data:a,nsData:l,indexes:h}},o._patchOldVolumeProfiles=function(t,e){var i,o=e.hhists[t].data,n=[];for(i in o)n=n.concat(o[i]);e.hhists[0].data=n},o._fixInputsOrder=function(t,e){var i,n,r,a,l=s.getOrderedInputIds(e),h=o.splitInputs(t.inputs),c=h.arr,d=h.obj,p=TradingView.merge({},d);for(i=0;i<l.length;++i)n=l[i],r=o.findInputKeyById(c,n),null!==r&&(a=c[r],p[i]=a);t.inputs=p},o.INPUT_MAX_VALUE=253370764800,o._verifyInputsMaxValue=function(t){var e,i,n=o.INPUT_MAX_VALUE;if(t.inputs)for(e=0;e<t.inputs.length;e++)i=t.inputs[e],"integer"===i.type&&i.max&&i.max>n&&TradingView.logWarn("Bad integer input max value in metaInfo id="+t.id+" title="+t.description)},o._fixInputsMaxValue=function(t,e){var i,n,s,r,a,l;if(!TradingView.isAbsent(e)){if(i=o.INPUT_MAX_VALUE,e.inputs)for(n=0;n<e.inputs.length;n++)s=e.inputs[n],"integer"===s.type&&s.max&&s.max>i&&(s.max=i);if(t&&t.inputs){r=o.splitInputs(t.inputs),a=r.arr;for(l in a)s=a[l],"integer"===s.type&&s.max&&s.max>i&&(s.max=i);t.inputs=TradingView.merge(r.obj,r.arr)}}},o.prototype.patchPropsStateAndMetaInfo=function(t,e,i){var n,r,a,l,h,c,d,p,u,_;if(o._fixInputsOrder(t,e),o._fixInputsMaxValue(t,e),e.isTVScript&&"undefined"!=typeof TVScript&&TVScript.createScriptIdPart&&(e.scriptIdPart=e.scriptIdPart||TVScript.createScriptIdPart()),n=60,e.isTVScript&&e.version<n&&("Script$TV_EARNINGS@tv-scripting"!==e.id&&"Script$TV_DIVIDENDS@tv-scripting"!==e.id&&"Script$TV_SPLITS@tv-scripting"!==e.id||delete e.TVScriptSourceCode),"Volume"!==e.id&&"Volume@tv-basicstudies"!==e.id||0!==e.inputs.length||(e.inputs=[{id:"length",type:"integer",defval:20,min:1,max:1e3}],e.plots.push({id:"vol_ma",type:"line"})),"Volume@tv-basicstudies"===e.id&&e.version&&e.version<=46&&(t.styles.vol.transparency=t.transparency||87),"PivotPointsStandard@tv-basicstudies"===e.id&&(0===e.inputs.length?(t.inputs={kind:"Traditional",showHistoricalPivots:!0},e.inputs=[{defval:"Traditional",id:"kind",type:"text",options:["Traditional","Fibonacci","Woodie","Classic","DeMark","Camarilla"]},{id:"showHistoricalPivots",type:"bool",defval:!0}]):1===e.inputs.length&&(t.inputs={kind:"Traditional"},e.inputs=[{defval:"Traditional",id:"kind",type:"text",options:["Traditional","Fibonacci","Woodie","Classic","DeMark","Camarilla"]},{id:"showHistoricalPivots",type:"bool",defval:!0}]),void 0===t._hardCodedDefaultsVersion&&(t._hardCodedDefaultsVersion=1,r=t.color,delete t.color,t.levelsStyle={colors:{P:r,"S1/R1":r,"S2/R2":r,"S3/R3":r,"S4/R4":r,"S5/R5":r}})),"CMF"===e.shortId&&2===e.inputs.length&&(t.inputs={length:t.inputs["length fast"]},e.inputs=e.inputs.splice(0,1),e.inputs[0].id="length"),e.defaults&&void 0===e.defaults.precision&&(["Volume@tv-basicstudies","VbPVisible@tv-volumebyprice","VbPSessions@tv-volumebyprice"].indexOf(e.id)!=-1?e.defaults.precision=0:e.defaults.precision=4),a=60,e.version<a)for(l=["DIVIDENDS","SPLITS","EARNINGS"],h=6,c=0;c<l.length;c++)e.id.startsWith("Script$TV_"+l[c]+"@tv-scripting")&&(e.fullId="ESD"+e.fullId.substring(h),e.id="ESD"+e.id.substring(h),e.name="ESD"+e.name.substring(h),e.shortId="ESD"+e.shortId.substring(h),e.productId="ESD"+e.productId.substring(h));if("MA"===e.id){switch(d=new s({id:"MAExp",properties:[{id:"is_price_study",type:"bool",value:"true"}],inputs:[{id:"length",type:"integer",defval:20,min:1,max:500},{id:"source",type:"text",defval:"close",options:["open","high","low","close"]}],plots:[{id:"MovAvgExp",type:"line"}],palettes:{}}),p=new s({id:"MASimple",properties:[{id:"is_price_study",type:"bool",value:"true"}],inputs:[{id:"length",type:"integer",defval:20,min:1,max:500},{id:"source",type:"text",defval:"close",options:["open","high","low","close"]}],plots:[{id:"MovAvgSimple",type:"line"}],palettes:{}}),u=new s({id:"MAVolumeWeighted",properties:[{id:"is_price_study",type:"bool",value:"true"}],inputs:[{id:"length",type:"integer",defval:20,min:1,max:500},{id:"source",type:"text",defval:"close",options:["open","high","low","close"]}],plots:[{id:"MovAvgVolumeWeighted",type:"line"}],palettes:{}}),_=new s({id:"MAWeighted",properties:[{id:"is_price_study",type:"bool",value:"true"}],inputs:[{id:"length",type:"integer",defval:20,min:1,max:500},{id:"source",type:"text",defval:"close",options:["open","high","low","close"]}],plots:[{id:"MovAvgWeighted",type:"line"}],palettes:{}}),t.inputs.type){case"exp":e=d;break;case"simple":e=p;break;case"weighted":e=_;break;case"volume weighted":e=u}t.styles[e.plots[0].id]=t.styles.MovAvg,delete t.styles.MovAvg,delete t.inputs.type}return i.oldShowStudyLastValueProperty&&(t.oldShowLastValue=t.showLastValue),delete t.showLastValue,delete t.showStudyArguments,{propsState:t,metaInfo:e}},o.compareStudyVersions=function(t,e){var i,o,n,s,r,a;return t=""+t,e=""+e,i=t.split("."),o=i[0],o=parseInt(o,10),n=i.length>1?i[1]:"0",n=parseInt(n,10),s=e.split("."),r=s[0],r=parseInt(r,10),a=s.length>1?s[1]:"0",a=parseInt(a,10),o<r?-1:o>r?1:n<a?-1:n>a?1:0},o.isLess=function(t,e){var i=o.compareStudyVersions(t,e);return i<0},o.isLessOrEqual=function(t,e){var i=o.compareStudyVersions(t,e);return i<=0},o.isEqual=function(t,e){var i=o.compareStudyVersions(t,e);return 0===i},o.isGreater=function(t,e){var i=o.compareStudyVersions(t,e);return i>0},o.isGreaterOrEqual=function(t,e){var i=o.compareStudyVersions(t,e);return i>=0},o.isVersionTesting=function(t){var e,i;return!!t&&(t=""+t,e=RegExp("\\d+.\\d+"),i=e.exec(t)==t)},o.isVersionHead=function(t){var e,i;return!!t&&(t=""+t,e=RegExp("\\d+"),i=e.exec(t)==t)},o.mergeInputs=function(t,e){o.mergeInputsArrPart(t,e),o.mergeInputsObjPart(t,e)},o.mergeInputsArrPart=function(t,e){var i,n,s=o.splitInputs(e);for(i in s.arr)n=o.findInputKeyById(t,s.arr[i].id),n?TradingView.merge(t[n],s.arr[i]):o.appendInputInfoToArr(t,s.arr[i])},o.mergeInputsObjPart=function(t,e){var i=o.splitInputs(e);TradingView.merge(t,i.obj)},o.appendInputInfoToArr=function(t,e){var i,o,n=-1;for(i in t)o=parseInt(i,10),isNumber(o)&&o>n&&(n=o);t[n+1]=e},o.splitInputs=function(t){var e,i={},o={};for(e in t)isNumber(parseInt(e,10))?i[e]=t[e]:o[e]=t[e];return{arr:i,obj:o}},o.findInputKeyById=function(t,e){var i,o=null;for(i in t)if(isNumber(parseInt(i,10))&&t[i].id==e){o=i;break}return o},o.getInputKeyById=function(t,e){var i=o.findInputKeyById(t,e);if(!i)throw Error("Cannot find input with id: "+e);return i},t.exports=o},function(t,e,i){"use strict";function o(t){this._studyId=t,this._maxToVers="0",this._maxFromVers="0",this._migrs=[]}var n=i(139);o.prototype.addMigration=function(t,e,i){n.isGreater(t,this._maxFromVers)&&(this._maxFromVers=t),n.isGreater(e,this._maxToVers)&&(this._maxToVers=e),this._migrs.push({fromVers:t,toVers:e,rules:i})},o.prototype.updateInputs=function(t,e){var i,o,s;if(!e)return e;for(i=TradingView.clone(e),o=t;n.isLess(o,this._maxToVers);){if(s=this._findMigration(o),i=this._applyMigration(i,s),!n.isLess(o,s.toVers))throw Error("Problems in study migration process... Possible infinite cycle has been detected and stopped.");o=s.toVers,TradingView.logDebugChart("Applied migration rule to study: "+this._studyId+" from vers: "+s.fromVers+" to vers: "+s.toVers)}return i},o.prototype._findMigration=function(t){var e,i,o=-1,s=this._maxFromVers;for(e=0;e<this._migrs.length;e++)i=this._migrs[e],n.isLess(i.fromVers,t)||n.isLessOrEqual(i.fromVers,s)&&(s=i.fromVers,o=e);if(o<0)throw Error("Could not find matching migration for study: "+this._studyId+" vers: "+t);return this._migrs[o]},o.prototype._applyMigration=function(t,e){var i,o,n,s=t;for(i=0;i<e.rules.length;i++)o=e.rules[i],n=this._getApplyRuleFun(o.type),s=n(s,o);return s},o.prototype._getApplyRuleFun=function(t){if("inputRemoved"==t)return o._applyInputRemovedRule;if("inputChangedType"==t)return o._applyInputChangedTypeRule;throw Error("Unknown migration rule type: "+t)},o._applyInputRemovedRule=function(t,e){var i,o,s,r;if(!(e.inputId in t))return t;if(i=n.findInputKeyById(t,e.inputId),!i)return t;delete t[i],delete t[e.inputId],o={},s=0;for(r in t)isNumber(parseInt(r,10))?(o[s]=t[r],s++):o[r]=t[r];return o},o._applyInputChangedTypeRule=function(t,e){var i=n.getInputKeyById(t,e.inputId);if("resetToDefVal"!=e.action)throw Error("Unknown action "+e.action+" for rule with type "+e.type);return t[e.inputId]=e.defVal,t[i].defval=e.defVal,t[i].type=e.inputType,t},t.exports=o},function(t,e,i){(function(e,o,n,s,r,a){"use strict";function l(t,i,o,n){this._study=t,this.m_series=i,this.m_model=o,this._plotName=n,this._visible=!1,this._points=[new e.Point(0,0)],this._invalidated=!0}function h(){return{visible:!0,color:"#0496FF",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:2,plottype:at.PLOT_LINE,histogramBase:0,transparency:50,trackPrice:!1,joinPoints:!1}}function c(t,e,i,o){var n,s;return o.isTVScriptStrategy?n="StudyStrategy":(s="study_"+(o.classId||o.shortId),n=s in TradingView?s:"Study"),new TradingView[n](t,e,i,o)}function d(t,e,i,o){return p(t,e,i,o,"study_"+t.id)}function p(t,e,i,o,n){var s,r,a=f(t,e,i,o),l=new tt(n,a,(!0));for(l.addExclusion("visible"),l.addExclusion("precision"),l.addExclusion("minTick"),s=0;s<t.inputs.length;++s)r=t.inputs[s],r.isHidden&&(l.addExclusion("inputs."+s),l.addExclusion("inputs."+r.id));return l}function u(t,e,i,o,n){return _(t,e,i,o,n,"study_"+t.id)}function _(t,e,i,o,n,s){var r,a,l,h=g(t,e,i,o,n),c=new tt(s,h,(!0));for(c.addExclusion("visible"),c.addExclusion("precision"),c.addExclusion("minTick"),r=e||t,a=0;a<r.inputs.length;++a)l=r.inputs[a],l.isHidden&&(c.addExclusion("inputs."+a),c.addExclusion("inputs."+l.id));return c}function f(t,e,n,s){var r,a,l,h,c,d,p=i(139),u=rt.versionOf(t);if(u<1)throw Error("This function cannot work with metainfo of the old format version. Required format version >= 1");return r=TradingView.clone(defaults("study")),v(r,t),a=TradingView.clone(defaults("study_"+t.id,s)),t.isTVScript&&t.TVScriptSourceCode!==a.TVScriptSourceCode&&(a=TradingView.clone(TradingView.factoryDefaults("study_"+t.id,s))),TradingView.merge(r,a),e&&(assert(!(e instanceof o),"propsState should not be an instance of Property"),TradingView.merge(r,e)),l=y(t),h={},p.mergeInputs(h,l.defaults.inputs),p.mergeInputsObjPart(h,r.inputs),p.mergeInputsArrPart(h,l.inputs),r.inputs=h,delete l.inputs,delete l.defaults.inputs,c={},TradingView.merge(c,l.defaults),TradingView.merge(c,TradingView.factoryDefaults("study_"+l.id)),TradingView.merge(c,r),TradingView.merge(c,l),delete c.defaults,r=c,d=w(n,t),TradingView.merge(r,b(r,d)),e&&TradingView.merge(r.styles,e.styles),r}function g(t,e,o,n,s){var r,a,l,h,c,d,p=i(139),u=rt.versionOf(t);return t.version&&o.version&&t.version!==o.version&&TradingView.logWarn("Serialized metaInfo version "+t.version+" is not equal to the saved state version "+o.version),r=TradingView.clone(defaults("study")),0===u?(TradingView.merge(r,TradingView.clone(t)),a=y(t),TradingView.merge(r.inputs,a.inputs)):u>=1&&TradingView.merge(r,TradingView.clone(t.defaults)),TradingView.merge(r,TradingView.factoryDefaults("study_"+t.id)),v(r,t),TradingView.merge(r,o),u>=1&&(TradingView.merge(r,TradingView.clone(t)),delete r.defaults),r=s.updateStudyState(r,t,e),l=e||t,l&&rt.versionOf(l)>=1&&(l=y(l),h={},p.mergeInputs(h,l.defaults.inputs),p.mergeInputs(h,r.inputs),p.mergeInputsArrPart(h,l.inputs),r.inputs=h,delete l.inputs,delete l.defaults.inputs,c={},TradingView.merge(c,l.defaults),TradingView.merge(c,TradingView.factoryDefaults("study_"+l.id)),TradingView.merge(c,r),TradingView.merge(c,l),delete c.defaults,r=c),d=w(n,l),TradingView.merge(r,b(r,d)),r}function m(t,e){function i(t){if(!t)return"_none_";var t=t||{};return t=JSON.stringify(t),t=t.replace(/'/g,"\\'")}var o,n,s,r,a,l={};if(e.isTVScript)o=e.defaults.inputs.text,l.text=TVScript.patchILTemplate(o,e,t);else for(n=Object.keys(t),s=n.length-1;s>=0;s--)r=n[s],a=t[r]?t[r].id:null,a&&t[a]&&(l[a]=t[a]);return i(l)}function v(t,e){var i,o,n,s;if(e.plots)for(i=0;i<e.plots.length;i++)o=e.plots[i].id,n=e.plots[i].type,n!==at.PLOT_TYPE_COLORER&&(s=h(),n===at.PLOT_TYPE_BAR_COLORER&&(s.transparency=0),s.plottype=n,s.title=o,t.styles&&o in t.styles&&TradingView.merge(s,t.styles[o]),t.styles[o]=s)}function y(t){var e,i,o=TradingView.clone(t);if(o.inputs={},t.inputs)for(e=0;e<t.inputs.length;e++)i=t.inputs[e].id,o.inputs[i]=t.inputs[e].defval,o.inputs[e]=t.inputs[e];return o}function w(t,e){var i,o,n=0;if(t)for(i=0;i<t.dataSources().length;i++)o=t.dataSources()[i],o.metaInfo&&o.metaInfo()&&o.metaInfo().id==e.id&&n++;return n}function b(t,e){var i,o;if(!e)return t;for(i in t.styles)o=t.styles[i].color,o&&(t.styles[i].color=S(o,e));return t}function S(t,e){var i,o,n;return t=new J(t),i=Z(t.r,t.g,t.b),o=i[0]+.05*e,i[0]=o-Math.floor(o),n=Q(i[0],i[1],i[2]),t.r=n[0],t.g=n[1],t.b=n[2],t.toHex()}function T(t,e,o,r){var a,l,h,c,d,p,u,_,f=i(108);this._titleCache={},this._resolvedSymbols={},this._priceAxisViewsBase=[],this._paneViews=[],this._hlinesPriceAsisViews=[],this._horizlinesPriceAsisViews=[],W.call(this,t),this.m_data=new st,this._graphics=new G(r),this._plotOffsets={},this._plotOffsetsMetaInfoOverride={},this._model=t,this._chartApi=t._chartApi,this._series=o,this._numericFormatter=new nt,this._metaInfo=r,this._properties=e,this._properties.listeners().subscribe(this,T.prototype.changeStyles),this._properties.visible.listeners().subscribe(this,T.prototype.visibleChanged),this._properties.visible.listeners().subscribe(this,this.processHibernate);for(a in this._metaInfo.graphics)for(l in this._metaInfo.graphics[a])h=this._properties.graphics[a][l],h.visible&&h.visible.listeners().subscribe(this,T.prototype.processHibernate);if(this._showStudyArgumentsProperty=this.model().properties().paneProperties.legendProperties.showStudyArguments,this._turnaroundCounter=1,this._turnaround="st"+this._turnaroundCounter,this._status="",this._plotFields=[],c=this.metaInfo().plots)for(d=0,p=c.length;d<p;d++)l=c[d].id,this._plotFields.push(l);this.clearData(),this._studyModified=!1,this._tagsChanged=new n,this.createViews(),u=this,this._handler=function(t){u.onData(t)},this._createFormatter(),u=this,this._properties.precision.listeners().subscribe(null,function(){u._createFormatter(),u._model.invalidate(new K(K.FULL_UPDATE))}),this._showStudyArgumentsProperty.listeners().subscribe(null,function(){u._titleCache={}}),this._properties.description.listeners().subscribe(null,function(){u._titleCache={}}),this._properties.shortDescription&&this._properties.shortDescription.listeners().subscribe(null,function(){u._titleCache={}}),s.enabled("update_study_formatter_on_symbol_resolve")&&t.mainSeries().onSymbolResolved().subscribe(this,T.prototype._createFormatter),u=this,_={},this._simplePlotsCount=r.plots.filter(function(t,e){if(u.isLinePlot(e))return!0;if(u.isOHLCSeriesPlot(e)){var i=u.metaInfo().plots[e].target;return!_[i]&&(_[i]=i,!0)}return!1}).length,this._properties.showInDataWindow.listeners().subscribe(t,f.prototype.fullUpdate),this.hasBarColorer()&&this._properties.visible.listeners().subscribe(t.mainSeries(),TradingView.Series.prototype.invalidateBarStylesCache)}var C=i(95).StudyBarColorer,x=i(96).HorzLineRenderer,P=i(185),L=P.BandPaneView,k=P.BandBackgroundPaneView,E=P.HlineFillPaneView,I=i(186),A=i(187),V=A.StudyPaneView,M=A.StudyBackgroundPaneView,D=A.StudyPlotShapesPaneView,B=A.StudyPlotCharsPaneView,O=A.StudyPlotArrowsPaneView,R=A.StudyPlotBarsPaneView,z=A.StudyPlotCandlesPaneView,N=i(188),F=N.PlotFillPaneView,H=N.AreaBackgroundPaneView,W=i(72).PriceDataSource,U=i(100),q=i(189).StudyDataWindowView,j=i(190),Y=i(88),G=i(138),K=i(106),X=i(59),J=X.RGBColor,Z=X.rgbToHsl,Q=X.hslToRgb,tt=i(73).DefaultProperty,et=i(75),it=et.PriceFormatter,ot=et.VolumeFormatter,nt=et.NumericFormatter,st=i(105),rt=i(107),at=i(54).StudyConsts;l.prototype.update=function(){this._invalidated=!0},l.prototype.updateImpl=function(){this._visible=!1;var t=this._study.lastValueData(this._plotName,!0);t.noData||(this._visible=!0,this._points=[new e.Point(0,t.coordinate)],this._color=t.color)},l.prototype.renderer=function(){this._invalidated&&(this.updateImpl(),this._invalidated=!1);var t={};return t.points=this._points,t.color=this._color,t.linewidth=this._study.properties().styles[this._plotName].linewidth.value(),t.linestyle=CanvasEx.LINESTYLE_DOTTED,t.hitTestResult=Y.REGULAR,t.visible=this._visible,new x(t)},inherit(T,W),TradingView.Study=T,i(191),T.prototype.lastValueData=function(t,e,i){var o,n,s,r,a,l,h,c,d,p,u,_,f,g,m,v,y,w,b,S,T={noData:!0};if(this._model.timeScale().isEmpty()||null==this.priceScale()||this.priceScale().isEmpty()||this.data().isEmpty())return T;if(o=this._model.timeScale().visibleBars(),o.isEmpty())return T;if(!this.properties().visible.value())return T;if(n=this.properties().styles,s=this.properties().ohlcPlots,n&&n[t]&&(r=n[t]),s&&s[t]&&(r=s[t]),!r||!r.visible.value())return T;if(a=this.offset(t),l=this.nearestIndex(o.lastBar()-a,TradingView.SEARCH_NEAREST_LEFT),null===l||void 0===l)return T;for(c=this.metaInfo().plots,h=0;h<c.length&&!(c[h].id===t||this.isOHLCClosePlot(h)&&c[h].target===t);h++);if(d=this.data(),p=e?this.data().last().value:this.data().valueAt(l),!p||!isNumber(p[h+1]))return T;for(u={noData:!1},_=null,f=null,m=0;m<c.length;m++)c[m].target===t&&(this.isSelfColorerPlot(m)||this.isOHLCColorerPlot(m))&&(_=m,f=this.metaInfo().palettes[c[m].palette],g=this.properties().palettes[c[m].palette]);if(v=p[h+1],i&&(u.price=v),this.priceScale().properties().percentage.value()){if(y=this.firstValue(!0),!y)return T;v=this.priceScale().priceRange().convertToPercent(v,y)}return u.text=this.priceScale().formatter().format(v),w=r.color.value(),_&&p.length>_+1?(b=p[_+1],void 0!==b&&null!==b?(S=f.valToIndex?f.valToIndex[b]:b,u.color=g.colors[S].color.value()):u.color=w):u.color=w,u.floatCoordinate=this.priceScale().priceToCoordinate(v,!0),u.coordinate=Math.round(u.floatCoordinate),u.item=p,u},T.prototype.series=function(){return this._series},T.prototype.model=function(){return this._model},T.prototype.clearData=function(){this.m_data=new st(this._plotFields),this._graphics=new G(this._metaInfo),this._plotOffsets={}},T.prototype.onTagsChanged=function(){return this._tagsChanged},T.prototype.properties=function(){return this._properties},T.prototype.state=function(t){var e,i,o,n,s=TradingView.className(this.constructor),r={type:s,id:this.id(),state:this.properties().state(),zorder:this.zorder()};for(this.metaInfo()instanceof rt?r.metaInfo=this.metaInfo().state():(r.metaInfo=$.extend({},this.metaInfo()),r.metaInfo.id=rt.parseIdString(r.metaInfo.id+(r.metaInfo.version?"-"+r.metaInfo.version:"")).fullId),t&&(r.data=this.m_data.state(),r.data.symbols=this._resolvedSymbols,r.data.graphics=this._graphics.graphics(),r.data.plotOffsets=this._plotOffsets),this.ownerSource()&&(r.ownerSource=this.ownerSource().id()),e=0;e<this._metaInfo.inputs.length;e++)"bar_time"==this._metaInfo.inputs[e].type&&(i=this._metaInfo.inputs[e].id,o=r.state.inputs[i],o<0&&(n=this._rightOffsetToUnixTime(-o),r.state.inputs[i]=n&&n>=0?n:0));return r},T.prototype.stateForAlert=function(){var t=this,e=this._metaInfo,i=this.state().state.inputs,o=[at.PLOT_TYPE_LINE,at.PLOT_TYPE_SHAPES,at.PLOT_TYPE_CHARS,at.PLOT_TYPE_ARROWS,at.PLOT_TYPE_OHLC_OPEN,at.PLOT_TYPE_OHLC_HIGH,at.PLOT_TYPE_OHLC_LOW,at.PLOT_TYPE_OHLC_CLOSE],n=e.plots.map(function(t,e){return t.pinePlotIndex=e,t}).filter(function(t){return o.indexOf(t.type)!==-1}).map(function(i){var o={id:i.id,type:i.type,pinePlotIndex:i.pinePlotIndex,offset:t.offset(i.id)};return e.styles&&void 0!==e.styles[i.id]&&(o.title=e.styles[i.id].title||""),i.target&&e.ohlcPlots&&e.ohlcPlots[i.target]&&(o.ohlcTitle=e.ohlcPlots[i.target].title),o});return{id:this.id(),uniqueId:this.uniqueId(),type:TradingView.className(this.constructor),title:this.title(),shortDescription:e.shortDescription||"Study",fullId:e.fullId,isTVScript:e.isTVScript,plots:n,inputs:i,alerts:e.alerts,callStudyArgs:m(i,e)}},T.prototype.uniqueId=function(){var t=this.inputsForAlert();return t=JSON.stringify(t).replace(/\W/g,""),this.id()+"|"+t},T.prototype.isSavedInStudyTemplates=function(){for(var t=0;t<this._metaInfo.inputs.length;t++)if("bar_time"==this._metaInfo.inputs[t].type)return!1;return!0},T.prototype.restoreData=function(t){this.m_data.restoreState(t),this._resolvedSymbols=t.symbols,this._graphics.setGraphics(t.graphics),this._postProcessGraphics(),this._plotOffsets=t.plotOffsets},T.prototype.restart=function(){this.clearData(),this._restarting=!0,s.enabled("stop_study_on_restart")&&this.stop(),this._clearLoadingTimer(),this.start()},T.prototype._clearLoadingTimer=function(){this.loadingTimer&&(clearTimeout(this.loadingTimer),this.loadingTimer=null)},T.prototype.stop=function(){this._clearLoadingTimer(),this._chartApi&&this._chartApi.connected()&&this._studyId&&this._chartApi.removeStudy(this._studyId,this._handler),s.enabled("update_study_formatter_on_symbol_resolve")&&this._model.mainSeries().onSymbolResolved().unsubscribe(this,T.prototype._createFormatter),this._studyId=null,this.clearData(),this._unsubscribeExtendedHours(),this.recalculate()},T.prototype._resolveSymbol=function(t){var e=function o(e,i){this._chartApi.resolveSymbol(this._makeNextSymbolId(),e,function(e){switch(e.method){case"symbol_resolved":this._resolvedSymbols[t]=e.params[1],this._titleCache={},i.resolve(t);break;case"symbol_error":if("permission denied"===e.params[1]&&e.params[2])switch(e.params[2]){case TradingView.Series.PD_REASON_EXTENDED_HOURS:break;case TradingView.Series.PD_REASON_SYMBOL:if(e.params[3])return void o(e.params[3],i);break;default:return void o(e.params[2],i)}i.reject(t)}}.bind(this))}.bind(this),i=$.Deferred();return e(t,i),i.promise()},T.prototype._allSymbolsAreResolved=function(){var t,e,i,o,n=$.Deferred(),s=[];for(t=0;t<this._metaInfo.inputs.length;t++)"symbol"==this._metaInfo.inputs[t].type&&(e=this._metaInfo.inputs[t].id,i=this._properties.inputs[e].value(),this._resolvedSymbols[i]||(o=this._resolveSymbol(i),s.push(o)));return s.length>0?$.when.apply($,s).done(function(){0!==this._studyId&&this.stop(),this.start(),n.resolve("All symbols are resolved now")}.bind(this)).fail(function(t){this._status=$.t("Invalid Symbol"),this.stop(),this._model.updateSource(this),n.reject("Invalid symbol, "+t)}.bind(this)):n.resolve("There are no symbols to resolve"),n.promise()},T.prototype._allInputsAreValid=function(){var t,e,i;for(t=0;t<this._metaInfo.inputs.length;t++)if("bar_time"==this._metaInfo.inputs[t].type&&(e=this._metaInfo.inputs[t].id,i=this._properties.inputs[e].value(),void 0===i||null===i))return!1;return!0},T.prototype.sourceId=function(){return this._studyId},T.prototype._debugId=function(){var t=[];return this._studyId&&t.push(this._studyId),t.push(this._metaInfo.fullId),t.push(this._metaInfo.description),JSON.stringify({study:t})},T.prototype.isStarted=function(){return!!this._studyId},T.prototype.isVisible=function(){var t,e,i,o;if(!this.properties().visible.value())return!1;if(this._metaInfo.plots.length>0)for(t=0;t<this._metaInfo.plots.length;t++)if(e=this.properties().plots[t].visible,!e||e.value())return!0;for(i in this._metaInfo.graphics)for(o in this._metaInfo.graphics[i])if(e=this.properties().graphics[i][o],!e.visible||e.visible.value())return!0;return!!this._metaInfo.isTVScriptStrategy},T.prototype.start=function(){var t=TradingView.isFeatureEnabled("tv5176_HibernateStudies")&&!this.isVisible();this._chartApi&&this._chartApi.connected()&&!t&&this._allSymbolsAreResolved().done(function(t){this._startAfterSymbolsResolved()}.bind(this)).fail(function(t){TradingView.logNormalChart("ERROR: "+this._debugId()+" start failed, "+t)}.bind(this))},T.prototype._startAfterSymbolsResolved=function(){var t,e;if((!this.isStarted()||this._restarting)&&(this._studyId=T.makeNextStudyId(),this._restarting=!1,this._allInputsAreValid())){if(this._inputs=this.inputs(),t=this._metaInfo.id,"MA"===this._metaInfo.id)switch(e=this._inputs[2]){case"exp":t="MAExp@tv-basicstudies";break;case"simple":t="MASimple@tv-basicstudies";break;case"weighted":t="MAWeighted@tv-basicstudies";break;case"volume weighted":t="MAVolumeWeighted@tv-basicstudies"}t+="-"+(this._metaInfo.version||"1"),t=rt.cutDollarHash(t),(t.startsWith("Script@tv-scripting")||t.startsWith("StrategyScript@tv-scripting")||t.startsWith("ESD@tv-scripting"))&&(t+="!"),this._chartApi.createStudy(this._studyId,this._turnaround,this._series._seriesId,t,this._inputs,this._handler),this._subscribeExtendedHours()}},T._nextSymbolId=0,T.prototype._makeNextSymbolId=function(){return T._nextSymbolId++,"ss_"+T._nextSymbolId},T._nextStudyId=0,T.makeNextStudyId=function(){return T._nextStudyId++,"st"+T._nextStudyId},T.prototype._rightOffsetToUnixTime=function(t){var e=null;return this._series.bars().size()>=t&&(e=this._series.bars()._valueAt(this._series.bars().lastIndex()-t)[TradingView.TIME_PLOT]),e},T.prototype.getSymbolString=function(t){return this._series&&this._series.extendedHours.value()?"="+JSON.stringify({symbol:t,session:"extended"}):t},T.prototype.inputsForGUI=function(){return this.inputs({symbolsForDisplay:!0,skipHiddenInputs:!0,skipFakeInputs:!1})},T.prototype.inputsForAlert=function(){var t=this.offset(),e=this.inputs({symbolsForDisplay:!0,symbolsForChartApi:!0,skipHiddenInputs:!1,skipFakeInputs:!1});return t&&e.push(t),e},T.prototype.inputs=function(t){var e={symbolsForDisplay:!1,symbolsForChartApi:!0,skipHiddenInputs:!1,skipFakeInputs:!0};return TradingView.merge(e,t),this._buildInputs(e)},T.prototype._buildInputs=function(t){var e,i,o,n;assert(!!t,"options not set"),e={};try{e=this._prepareInputs(t)}catch(s){TradingView.logWarn("Failed to prepare study inputs: "+s)}return!t.symbolsForDisplay&&this._metaInfo.isTVScript?0===Object.keys(e).length||this._metaInfo.isTVScriptStub?[this._metaInfo.defaults.inputs.text]:(i=this._metaInfo.defaults.inputs.text,o=TVScript.patchILTemplate(i,this._metaInfo,e),[o]):t.asObject?(n={},Object.keys(e).forEach(function(t){null!=e[t]&&(n[t]=e[t])}),n=$.isEmptyObject(n)?null:n):(n=[],Object.keys(e).forEach(function(t){null!=e[t]&&n.push(e[t])}),n)},T.prototype._prepareInputs=function(t){var e,i,o,n;for(assert(!!t,"options not set"),e={},i=0;i<this._metaInfo.inputs.length;i++)o=this._metaInfo.inputs[i],o.isFake&&t.skipFakeInputs&&!this._metaInfo.isTVScript||o.isHidden&&t.skipHiddenInputs||"bool"==o.type&&t.skipHiddenInputs&&s.enabled("dont_show_boolean_study_arguments")||(n=this._prepareInput(o,t),
e[o.id]=n);return e},T.prototype._prepareInput=function(t,e){var i,o,n,s,r=t.id;return"symbol"==t.type?(i=this._properties.inputs[r].value(),e&&e.symbolsForDisplay?this._resolvedSymbols&&this._resolvedSymbols[i]&&(i=this._resolvedSymbols[i].name+", "+this._resolvedSymbols[i].exchange):(this._resolvedSymbols&&this._resolvedSymbols[i]&&(o=this._resolvedSymbols[i],i=o.ticker||o.full_name),e&&e.symbolsForChartApi&&(i=this.getSymbolString(i))),i):"bar_time"==t.type?(n=this._properties.inputs[r].value(),n<0&&(s=this._rightOffsetToUnixTime(-n),n=s&&s>=0?s:n),n):this._properties.inputs[r].value()},T.prototype._changeInputs=function(t){this._studyId&&this._chartApi.connected()?(this._turnaround="st"+ ++this._turnaroundCounter,this._allInputsAreValid()?this._allSymbolsAreResolved().done(function(e){this._studyModified=!0,this._chartApi.modifyStudy(this._studyId,this._turnaround,t,this._handler)}.bind(this)).fail(function(t){TradingView.logNormalChart("ERROR: "+this._debugId()+" _changeInputs: cannot modify study, "+t)}.bind(this)):this.stop()):(this.stop(),this.start()),this._inputs=t,this._tagsChanged.fire(),this._titleCache={}},T.prototype.changeStyles=function(){var t,e;if(this._inputs){for(t=this.inputs(),e=0;e<t.length;e++)if(t[e]!==this._inputs[e]){this._changeInputs(t);break}}else this._chartApi&&this._chartApi.connected()&&this.restart();this.hasBarColorer()&&this._model.mainSeries().invalidateBarStylesCache(),"Overlay@tv-basicstudies"===this._metaInfo.name&&this.invalidateBarStylesCache(),this.createViews(),this.recalculate(!0),this.updateAllViews()},T.prototype._isModifiedStudyInputs=function(t){if(void 0===this._oldStudyInputs)return this._oldStudyInputs=t,!0;var e=Object.keys(this._oldStudyInputs);return assert(e.length==Object.keys(t).length,"keys quantity should be equal"),e.forEach(function(e){assert(t.hasOwnProperty(e),"key '"+e+"' should existing in studyInputs"),this._oldStudyInputs[e]!==t[e]&&(this._oldStudyInputs=t)},this),this._oldStudyInputs===t},T.prototype.visibleChanged=function(){this._series instanceof TradingView.Series&&this._series.invalidateBarColorerCache()},T.prototype.invalidateBarStylesCache=function(){var t,e,i=this.m_data;0!==i.size()&&(t=+i.first(),e=+i.last()+1,i.range(t,e).each(function(t,e){e[TradingView.STYLE_PLOT]=null}))},T.prototype.processHibernate=function(){TradingView.isFeatureEnabled("tv5176_HibernateStudies")&&(!this._studyId&&this.isVisible()&&this.start(),this._studyId&&!this.isVisible()&&this.stop())},T.prototype.lastPriceLabelFixedCoordinate=function(t){var e=this._priceAxisViewsCache[t];return e._fixedCoordinate},T.prototype.priceLabelText=function(t){var e,i,o,n;return 1==this._simplePlotsCount?this._metaInfo.shortDescription:(e=this._metaInfo.styles,i=this._metaInfo.ohlcPlots,e&&e[t]&&(o=e[t]),i&&i[t]&&(o=i[t]),n=o.title,this._metaInfo.is_price_study?this._metaInfo.shortDescription+":"+n:n)},T.prototype.createPlotLabels=function(t){for(var e=0;e<t.length;e++)this._paneViews.push(new U(this._model,this,t[e],"priceLabelText","showStudyPlotLabels"))},T.prototype.createViews=function(){var t,e,i,o,n,s,r,a,h,c,d,p,u;if(this._priceAxisViewsBase=[],this._paneViews=[],t={},this._priceAxisViewsCache={},e=[],this.metaInfo().plots)for(i=0;i<this.metaInfo().plots.length;i++)if(!(this.isSelfColorerPlot(i)||this.isBarColorerPlot(i)||this.isBarColorerPlot(i)||this.isOHLCColorerPlot(i)))if(o=this.metaInfo().plots[i].id,this.isBgColorerPlot(i))this._paneViews.push(new M(this,this._series,this._model,o));else if(this.isPlotShapesPlot(i))this._paneViews.push(new D(this,this._series,this._model,o));else if(this.isPlotCharsPlot(i))this._paneViews.push(new B(this,this._series,this._model,o));else if(this.isPlotArrowsPlot(i))this._paneViews.push(new O(this,this._series,this._model,o));else if(this.isOHLCSeriesPlot(i)){if(n=this.metaInfo().plots[i].target,t[n])continue;t[n]=n,this.isOHLCBarsPlot(i)?this._paneViews.push(new R(this,this._series,this._model,n)):this.isOHLCCandlesPlot(i)&&this._paneViews.push(new z(this,this._series,this._model,n)),s=new I(this,this._model,n),this._priceAxisViewsCache[n]=s,this._priceAxisViewsBase.push(s),e.push(n)}else s=new I(this,this._model,o),this._priceAxisViewsCache[o]=s,this._priceAxisViewsBase.push(s),this._paneViews.push(new V(this,this._series,this._model,o)),this.properties().styles[o].trackPrice.value()&&this._paneViews.push(new l(this,this._series,this._model,o)),e.push(o);if(this._properties.bands)for(i=0;i<this._properties.bands.childCount();i++)this._properties.bands[i].visible.value()&&this._paneViews.push(new L(this._properties.bands[i],this));this._properties.bandsBackground&&this._paneViews.push(new k(this)),r=[],this.metaInfo().graphics&&(r=Object.keys(this.metaInfo().graphics),r.sort(function(t,e){return T.graphicsZOrderPriority(t)-T.graphicsZOrderPriority(e)}));for(a in r)h=r[a],c="_paneView"+h,d="StudyPaneView_"+h,TradingView.Study[d]&&(this[c]=new TradingView.Study[d](this,this._model),this._paneViews.push(this[c])),this._dataWindowView||"hhists"!==h||(this._dataWindowView=new TradingView.StudyHHistsDataWindowView(this,this._model));if(this._properties.areaBackground&&this._paneViews.push(new H(this)),this._properties.filledAreas&&this._metaInfo.filledAreas)for(i=0;i<this._metaInfo.filledAreas.length;++i)p=this._metaInfo.filledAreas[i],u=this._properties.filledAreasStyle[p.id],p.type===rt.FilledArea.TYPE_PLOTS?this._paneViews.push(new F(this,p,u)):p.type===rt.FilledArea.TYPE_HLINES?this._paneViews.push(new E(this,p,u)):TradingView.logWarn("Unsupported filledArea type: "+p.type);this.createPlotLabels(e),this._dataWindowView||(this._dataWindowView=new q(this,this._model)),this._statusView||(this._statusView=new j(this,this._model.properties())),this._priceAxisViews=[].concat(this._priceAxisViewsBase,this._hlinesPriceAsisViews,this._horizlinesPriceAsisViews)},T.prototype.recalculate=function(t){var e=this._model.paneForSource(this);this._model.recalculatePane(e,t),this._model.updateSource(this)},T.prototype.data=function(){return this.m_data},T.prototype.metaInfo=function(){return this._metaInfo},T.prototype.status=function(){return this._status},T.prototype.title=function(t,e){var i,o,n,s,r=JSON.stringify([t,e]);return this._titleCache[r]?this._titleCache[r]:(i=t?this._metaInfo.shortDescription||this._properties.shortDescription&&this._properties.shortDescription.value()||"Study":this._metaInfo.description||this._properties.description&&this._properties.description.value()||"Study",i=$.t(i),o=this._showStudyArgumentsProperty.value(),n=this.inputsForGUI()||[],s=this,e&&"object"==typeof e||(e={}),o&&n.length>0&&(n=n.map(function(t){var i=isNumber(t)?s._numericFormatter.format(t):t;return e[i]&&(i=e[i]),i}),i+=" ("+n.join(", ")+")"),this._titleCache[r]=i,i)},T.prototype.graphics=function(){return this._graphics.graphics()},T.prototype._checkTurnaround=function(t){return t===this._turnaround||t===this._model.mainSeries()._turnaround||t===this._model.mainSeries()._turnaround+"_"+this._turnaround},T.prototype._makeJSONForNSData=function(t,e){var i,o=""!==t.params.nonseries.d?TradingView.parseJSONorNot(t.params.nonseries.d):e||"";return o.dataCompressed&&(i=new r(o.dataCompressed,{base64:!0}).file("").asText(),delete o.dataCompressed,o.data=TradingView.parseJSONorNot(i)),o.graphicsCmdsCompressed&&(i=new r(o.graphicsCmdsCompressed,{base64:!0}).file("").asText(),delete o.graphicsCmdsCompressed,o.graphicsCmds=TradingView.parseJSONorNot(i)),o},T.prototype.onData=function(t){var e,i,o,n,s=this;switch(t.method){case"study_loading":this._status=$.t("loading..."),this._failed=!1,this._statusView.update(),this._model.updateSource(this),this._clearLoadingTimer(),["Plot splits","Plot earnings","Plot dividends"].indexOf(s._metaInfo.description)==-1&&(s._loadingStartTime=(new Date).getTime(),s.loadingTimer=setTimeout(function(){var t={chartSession:s._chartApi._sessionid,studyName:s._metaInfo.description,arguments:s.inputs()};Telemetry.sendReport("study_loading",t)},15e3));break;case"study_error":this._clearLoadingTimer(),delete this._loadingStartTime,this._failed=!0,this.clearData(),t.params[2]?this._status=$.t(t.params[2].split(":",2)[0]):this._status="",["Sessions"].indexOf(s._metaInfo.description)==-1&&Telemetry.sendReport("study_error",{chartSession:s._chartApi._sessionid,studyName:s._metaInfo.description,arguments:s.inputs()}),this._statusView.update(),this._model.updateSource(this);break;case"study_completed":if(!this._checkTurnaround(t.params[1]))return;e="chartSession:"+s._chartApi._sessionid,TradingView.logDebugChart(e+", Study "+this._metaInfo.description+" loading took "+((new Date).getTime()-this._loadingStartTime)+" ms"),this._clearLoadingTimer(),delete this._loadingStartTime,this._status="",this._statusView.update(),i=this._model.paneForSource(this),this._model.recalculatePane(i),this._updateSources(),this._model.invalidate(new K(K.FULL_UPDATE));break;case"study_deleted":break;case"data_update":if(!this._checkTurnaround(t.params.turnaround))return;s._clearLoadingTimer(),this._studyModified&&(this.clearData(),this._studyModified=!1),o=0===this.m_data.size()&&this._metaInfo.plots.length>0,assert(!!t.params.nonseries,"data.params.nonseries is missing"),t.params.nonseries.d=this._makeJSONForNSData(t),this._processPlotOffsets(t.params),this.transformData(t.params.plots),n=this._mergeData(t.params.plots).earliestRow,this.hasBarColorer()&&(null!==n?this._model.mainSeries().invalidateBarStylesCache(n.index):TradingView.logNormalChart("ERROR: No earliestRow in studies plots, "+this._debugId())),this._graphics.process(t.params.nonseries),this._postProcessGraphics(),i=this._model.paneForSource(this),this._model.recalculatePane(i,o),this._updateSources()}},T.prototype.transformData=function(t){},T.prototype._updateSources=function(){this._model.updateSource(this),this.hasBarColorer()&&this._model.updateSource(this._model.mainSeries())},T.processPlotOffsets=function(t,e){if(!e.nonseries||"nochange"!==e.nonseries.indexes){var i=e.nonseries.d;if(!i||!i.indexes_replace)return i&&i.offsets?void(t._plotOffsets=i.offsets):void(t._plotOffsets={})}},T.prototype._processPlotOffsets=function(t){T.processPlotOffsets(this,t)},T.prototype._mergeData=function(t){return this.m_data.merge(t)},T.prototype._postProcessGraphics=function(){var t=this,e=function(e){var i,o,n,s=t._graphics.graphics(),r=[];if(s&&s[e])for(n=s[e],i=0;i<n.length;i+=1)if(n[i].data)for(o=0;o<n[i].data.length;o+=1)r.push(new T.StudyPriceAxisView_hlines(t,t._model,n[i].data[o],n[i].styleId,e));return r};this._hlinesPriceAsisViews=e("hlines"),this._horizlinesPriceAsisViews=e("horizlines"),this._priceAxisViews=[].concat(this._priceAxisViewsBase,this._hlinesPriceAsisViews,this._horizlinesPriceAsisViews)},T.prototype.firstValue=function(t){var e,i,o,n,s;return this._metaInfo.is_price_study&&"Compare@tv-basicstudies"!==this._metaInfo.id?this._series.data().firstValue():(e=this._model.timeScale().visibleBars(),i=e.firstBar(),o=e.lastBar(),0===this.m_data.size()?null:(s=this,this.m_data.range(i,o).each(function(e,i){var o,r,a;for(o=1;o<i.length;++o)if(!s.isSelfColorerPlot(o-1)&&(r=s._metaInfo.plots[o-1].id,a=s.properties().styles[r],a.visible&&a.visible.value()&&!(t&&Math.abs(i[o])<1e-10||void 0===i[o]||null===i[o]||n)))return n=i[o],!0}),n))},T.offset=function(t,e){var i=0;return t._plotOffsets&&void 0!==t._plotOffsets[e]&&(i+=t._plotOffsets[e]),void 0!==t._plotOffsetsMetaInfoOverride[e]?i+=t._plotOffsetsMetaInfoOverride[e]:t.properties().offsets&&void 0!==t.properties().offsets[e]&&(i+=t.properties().offsets[e].val.value()),t.properties().offset&&(i+=t.properties().offset.val.value()),i},T.prototype.offset=function(t){return T.offset(this,t)},T.prototype.priceRange=function(t,e){var i,o,n,s,r,l,h,c,d,p,u,_,f,g,m,v,y,w,b,S,T,C;if(!TradingView.isInteger(t))return void TradingView.logDebugChart("Study.priceRange: incorrect startBar");if(!TradingView.isInteger(e))return void TradingView.logDebugChart("Study.priceRange: incorrect endBar");if(0===this.m_data.size())return null;if(i=null,o=this,n=o._metaInfo,0===n.plots.length)return null;for(r=n.is_price_study,l=[],c=0;c<n.plots.length;++c)if(!(o.isSelfColorerPlot(c)||o.isTextColorerPlot(c)||o.isBarColorerPlot(c)||o.isBgColorerPlot(c)||o.isOHLCColorerPlot(c))&&(d=n.plots[c].id,o.isOHLCSeriesPlot(c)?(u=n.plots[c].target,p=o.properties().ohlcPlots[u]):p=o.properties().styles[d],p.visible.value()&&(h=null,p.location&&(h=p.location.value()),s||(_=[CanvasEx.MARKLOC_ABSOLUTE,CanvasEx.MARKLOC_TOP,CanvasEx.MARKLOC_BOTTOM].indexOf(h)<0,f=o.isPlotShapesPlot(c)||o.isPlotCharsPlot(c),s=f&&_||o.isPlotArrowsPlot(c)),g=o.isLinePlot(c)||(o.isPlotShapesPlot(c)||o.isPlotCharsPlot(c))&&p.location.value()==CanvasEx.MARKLOC_ABSOLUTE||o.isOHLCSeriesPlot(c)))){if(m={index:c+1,offset:o.offset(d)},v=o.properties().styles[d].plottype.value(),!o.properties().skipHistogramBaseOnAutoScale&&[at.PLOT_HISTOGRAM,at.PLOT_COLUMNS,at.PLOT_AREA].indexOf(v)>=0){if(y=o.properties().styles[d].histogramBase.value(),!isNumber(y))continue;m.baseValue=y}l.push(m)}if(w=o.m_data.minMaxOnRange2(t,e,l),s&&(l=[{index:TradingView.LOW_PLOT,offset:0},{index:TradingView.HIGH_PLOT,offset:0}],b=o.series().data().bars().minMaxOnRange2(t,e,l),w.min=null==w.min||void 0===w.min?b.min:Math.min(w.min,b.min),w.max=null==w.max||void 0===w.max?b.max:Math.max(w.max,b.max)),null!==w.min&&(i=new a(w.min,w.max)),n.bands)for(c=0;c<n.bands.length;c++)if(o.properties().bands[c].visible.value()){if(y=o.properties().bands[c].value.value(),!isNumber(y))continue;i?i.apply(y,y):i=new a(y,y)}return i&&i.minValue()===i.maxValue()&&(S=.005*i.minValue(),i=new a(i.minValue()-S,i.maxValue()+S)),T=this.priceScale(),T&&T.properties().percentage.value()&&i?(C=this.firstValue(),C?i.convertToPercents(C):null):T&&T.isLog()&&i?new a(o.priceScale().priceToLogical(i.minValue()),o.priceScale().priceToLogical(i.maxValue())):i},T.prototype.paneViews=function(t){return this.properties().visible.value()?this._paneViews:null},T.prototype.dataWindowView=function(){return this._dataWindowView},T.prototype.statusView=function(){return this._statusView},T.prototype.priceAxisViews=function(t,e){return this._model.paneForSource(this)===t&&e===this.priceScale()&&(this._model.properties().scalesProperties.showStudyLastValue.value()||this.properties().oldShowLastValue&&this.properties().oldShowLastValue.value())?this._priceAxisViews:null},T.prototype.isLinePlot=function(t){var e=this._metaInfo.plots[t];return e.type==at.PLOT_TYPE_LINE},T.isSelfColorerPlot=function(t,e){var i=t._metaInfo.plots[e];return i.type==at.PLOT_TYPE_COLORER},T.prototype.isSelfColorerPlot=function(t){return T.isSelfColorerPlot(this,t)},T.prototype.isTextColorerPlot=function(t){var e=this._metaInfo.plots[t];return e.type==at.PLOT_TYPE_TEXT_COLORER},T.prototype.isBarColorerPlot=function(t){var e=this._metaInfo.plots[t];return e.type==at.PLOT_TYPE_BAR_COLORER},T.prototype.isBgColorerPlot=function(t){var e=this._metaInfo.plots[t];return e.type==at.PLOT_TYPE_BG_COLORER},T.prototype.isPlotShapesPlot=function(t){var e=this._metaInfo.plots[t];return e.type==at.PLOT_TYPE_SHAPES},T.prototype.isPlotCharsPlot=function(t){var e=this._metaInfo.plots[t];return e.type==at.PLOT_TYPE_CHARS},T.prototype.isPlotArrowsPlot=function(t){var e=this._metaInfo.plots[t];return e.type==at.PLOT_TYPE_ARROWS},T.prototype.isOHLCBarsPlot=function(t){var e=this._metaInfo.plots[t].target,i=this.metaInfo().defaults.ohlcPlots[e];return i&&this.isOHLCSeriesPlot(t)&&i.plottype==at.OHLC_TYPE_BARS},T.prototype.isOHLCCandlesPlot=function(t){var e=this._metaInfo.plots[t].target,i=this.metaInfo().defaults.ohlcPlots[e];return i&&this.isOHLCSeriesPlot(t)&&i.plottype==at.OHLC_TYPE_CANDLES},T.prototype.isOHLCSeriesPlot=function(t){var e=this._metaInfo.plots[t].type;return e==at.PLOT_TYPE_OHLC_OPEN||e==at.PLOT_TYPE_OHLC_HIGH||e==at.PLOT_TYPE_OHLC_LOW||e==at.PLOT_TYPE_OHLC_CLOSE},T.prototype.isOHLCOpenPlot=function(t){var e=this._metaInfo.plots[t];return e.type==at.PLOT_TYPE_OHLC_OPEN},T.prototype.isOHLCHighPlot=function(t){var e=this._metaInfo.plots[t];return e.type==at.PLOT_TYPE_OHLC_HIGH},T.prototype.isOHLCLowPlot=function(t){var e=this._metaInfo.plots[t];return e.type==at.PLOT_TYPE_OHLC_LOW},T.prototype.isOHLCClosePlot=function(t){var e=this._metaInfo.plots[t];return e.type==at.PLOT_TYPE_OHLC_CLOSE},T.prototype.isOHLCColorerPlot=function(t){var e=this._metaInfo.plots[t];return e.type==at.PLOT_TYPE_OHLC_COLORER},T.prototype.isDataOffsetPlot=function(t){var e=this._metaInfo.plots[t];return e.type==at.PLOT_TYPE_DATAOFFSET},T.prototype.hasBarColorer=function(){for(var t=0;t<this._metaInfo.plots.length;++t)if(this.isBarColorerPlot(t))return!0;return!1},T.prototype.barColorer=function(){var t,e,i=null;for(t=0;t<this._metaInfo.plots.length;++t)this.isBarColorerPlot(t)&&(e=new C(this,t),null===i?i=e:i.pushBackBarColorer(e));if(null===i)throw Error("Cannot create BarColorer: study doesn't have a bar_colorer plot!");return i},T.prototype.base=function(){return"Volume"===this._metaInfo.id?1:0},T.prototype._createFormatter=function(){var t,e,i;"default"==this.properties().precision.value()?this.metaInfo().defaults&&(t=parseInt(this.metaInfo().defaults.precision)):t=parseInt(this.properties().precision.value()),isFinite(t)||(t=["Volume@tv-basicstudies","VbPVisible@tv-volumebyprice","VbPSessions@tv-volumebyprice"].indexOf(this._metaInfo.id)!==-1?0:1e4),e=this.series().symbolInfo(),0===t?(i=0,e&&(i=e.volume_precision?e.volume_precision:e.has_fractional_volume?2:0),this._formatter=new ot(i)):this._formatter=new it(Math.pow(10,t)),this.priceScale()&&this.priceScale().updateFormatter()},T.prototype.formatter=function(){return this._formatter},T.prototype.nearestIndex=function(t,e){if(!TradingView.isInteger(t))return void TradingView.logDebugChart("Study.nearestIndex: incorrect logicalPoint");var i=this._series.data().bars().search(t,e);return i?i.index:void 0},T.prototype.updateAllViews=function(){var t;for(t=0;t<this._paneViews.length;t++)this._paneViews[t].update();for(this._dataWindowView.update(),this._statusView.update(),t=0;t<this._priceAxisViews.length;t++)this._priceAxisViews[t].update()},T.prototype.tags=function(){return!this._metaInfo||!this._metaInfo.description||this._metaInfo.isTVScriptStub||this._metaInfo.is_hidden_study||this._metaInfo.isTVScript&&"tv-scripting"===this._metaInfo.productId?[]:[this._metaInfo.description]},T.isPointsBasedStudy=function(t){switch(t){case"VbPFixed@tv-volumebyprice":case"mtp_tsanalysis@mtp-mtpredictor":case"mtp_riskreward@mtp-mtpredictor":case"mtp_decisionpoint@mtp-mtpredictor":case"mtp_ew_main@mtp-mtpredictor":case"mtp_ew_major@mtp-mtpredictor":case"mtp_ew_minor@mtp-mtpredictor":case"mtp_wpt_down1ora@mtp-mtpredictor":case"mtp_wpt_down2orb@mtp-mtpredictor":case"mtp_wpt_down3@mtp-mtpredictor":case"mtp_wpt_down4@mtp-mtpredictor":case"mtp_wpt_down5@mtp-mtpredictor":case"mtp_wpt_downc@mtp-mtpredictor":case"mtp_wpt_up1ora@mtp-mtpredictor":case"mtp_wpt_up2orb@mtp-mtpredictor":case"mtp_wpt_up3@mtp-mtpredictor":case"mtp_wpt_up4@mtp-mtpredictor":case"mtp_wpt_up5@mtp-mtpredictor":case"mtp_wpt_upc@mtp-mtpredictor":return!0;default:return!1}},T.lineToolNameForPointsBasedStudy=function(t){switch(t){case"VbPFixed@tv-volumebyprice":return"LineToolVbPFixed";case"RegressionTrend@tv-basicstudies":return"LineToolRegressionTrend";case"mtp_tsanalysis@mtp-mtpredictor":return"LineStudyMtpAnalysis";case"mtp_riskreward@mtp-mtpredictor":return"LineStudyMtpRiskReward";case"mtp_decisionpoint@mtp-mtpredictor":return"LineStudyMtpDecisionPoint";case"mtp_ew_main@mtp-mtpredictor":return"LineStudyMtpElliotWaveMain";case"mtp_ew_major@mtp-mtpredictor":return"LineStudyMtpElliotWaveMajor";case"mtp_ew_minor@mtp-mtpredictor":return"LineStudyMtpElliotWaveMinor";case"mtp_wpt_down1ora@mtp-mtpredictor":return"LineStudyMtpDownWave1OrA";case"mtp_wpt_down2orb@mtp-mtpredictor":return"LineStudyMtpDownWave2OrB";case"mtp_wpt_down3@mtp-mtpredictor":return"LineStudyMtpDownWave3";case"mtp_wpt_down4@mtp-mtpredictor":return"LineStudyMtpDownWave4";case"mtp_wpt_down5@mtp-mtpredictor":return"LineStudyMtpDownWave5";case"mtp_wpt_downc@mtp-mtpredictor":return"LineStudyMtpDownWaveC";case"mtp_wpt_up1ora@mtp-mtpredictor":return"LineStudyMtpUpWave1OrA";case"mtp_wpt_up2orb@mtp-mtpredictor":return"LineStudyMtpUpWave2OrB";case"mtp_wpt_up3@mtp-mtpredictor":return"LineStudyMtpUpWave3";case"mtp_wpt_up4@mtp-mtpredictor":return"LineStudyMtpUpWave4";case"mtp_wpt_up5@mtp-mtpredictor":return"LineStudyMtpUpWave5";case"mtp_wpt_upc@mtp-mtpredictor":return"LineStudyMtpUpWaveC";default:throw Error("There is no line tool name, associated with study id "+t)}},T.isStudyLineTool=function(t){var e=i(136).StudyLineDataSource,o=TradingView[t];return"function"==typeof o&&o.prototype instanceof e},T.prototype.onExtendedHoursChanged=function(){this.restart()},T.prototype.hasSymbolInputs=function(){for(var t=this._metaInfo.inputs.length;t--;)if("symbol"===this._metaInfo.inputs[t].type)return!0;return!1},T.prototype._subscribeExtendedHours=function(){!this._isSubscribedToExtendedHours&&this.hasSymbolInputs()&&(this._series.extendedHours.listeners().subscribe(this,this.onExtendedHoursChanged),this._isSubscribedToExtendedHours=!0)},T.prototype._unsubscribeExtendedHours=function(){this._isSubscribedToExtendedHours&&(this._series.extendedHours.listeners().unsubscribe(this,this.onExtendedHoursChanged),delete this._isSubscribedToExtendedHours)},T.prototype.removeByRemoveAllStudies=function(){return!0},t.exports={Study:T,createStudy:c,prepareCallStudyArgs:m,prepareStudyProperties:d,prepareStudyPropertiesForLoadChart:u,prepareStudyPropsStateForLoadChart:g,shiftColor:S}}).call(e,i(21),i(63),i(32),i(1),i(142),i(78))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){(function(t){"use strict";function o(e,i){this._source=i,this._properties=e,this._points=[new t.Point((-1),(-1))],this._invalidated=!0}function n(t){this._data=t}function s(t){this._source=t,this._points=[]}function r(t,e,i){this._source=t,this._points=[],assert(e.type===h.FilledArea.TYPE_HLINES,"Wrong filledArea type: "+e.type),this._initBandIndexes(e.objAId,e.objBId),this._fillStyleProps=i}var a=i(96).HorzLineRenderer,l=i(88),h=i(107);o.prototype.update=function(){this._invalidated=!0},o.prototype.updateImpl=function(){var e,i=this._source.priceScale();return!i||i.isEmpty()?void(this._points[0]=new t.Point((-1),(-1))):(e=this._properties.value.value(),void(isNumber(e)?this._points[0]=new t.Point((-1),i.priceToCoordinate(e)):this._points[0]=new t.Point((-1),NaN)))},o.prototype.renderer=function(){this._invalidated&&(this.updateImpl(),this._invalidated=!1);var t={};return t.points=this._points,t.color=this._properties.color.value(),t.linewidth=this._properties.linewidth.value(),t.linestyle=this._properties.linestyle.value(),t.hitTestResult=l.REGULAR,new a(t)},n.prototype.draw=function(t){var e,i,o;0!==this._data.points.length&&(e=t.canvas.width,t.fillStyle=TradingView.generateColor(this._data.backcolor,this._data.transparency),i=Math.min(this._data.points[0],this._data.points[1]),o=Math.max(this._data.points[0],this._data.points[1]),t.fillRect(0,i,e,o-i))},n.prototype.hitTest=function(t){return null},s.prototype.update=function(){var t,e,i,o;this._points=[],t=this._source.properties().bandsBackground,t.fillBackground.value()&&(e=this._source.properties().bands[0],i=this._source.properties().bands[1],o=this._source.priceScale(),o&&!o.isEmpty()&&(this._points.push(o.priceToCoordinate(e.value.value())),this._points.push(o.priceToCoordinate(i.value.value()))))},s.prototype.renderer=function(){var t={};return t.points=this._points,t.backcolor=this._source.properties().bandsBackground.backgroundColor.value(),t.transparency=this._source.properties().bandsBackground.transparency.value(),new n(t)},r.prototype._initBandIndexes=function(t,e){var i,o;for(this._bandAKey=null,this._bandBKey=null,i=0;i<this._source.metaInfo().bands.length;++i)o=this._source.metaInfo().bands[i],null!==this._bandAKey||o.id!==t?null!==this._bandBKey||o.id!==e||(this._bandBKey=i):this._bandAKey=i},r.prototype.update=function(){var t,e,i;this._points=[],this._fillStyleProps.visible.value()&&(t=this._source.properties().bands[this._bandAKey],e=this._source.properties().bands[this._bandBKey],i=this._source.priceScale(),i&&!i.isEmpty()&&(this._points.push(i.priceToCoordinate(t.value.value())),this._points.push(i.priceToCoordinate(e.value.value()))))},r.prototype.renderer=function(){var t={};return t.points=this._points,t.backcolor=this._fillStyleProps.color.value(),t.transparency=this._fillStyleProps.transparency.value(),new n(t)},e.BandPaneView=o,e.BandBackgroundPaneView=s,e.HlineFillPaneView=r}).call(e,i(21))},function(t,e,i){"use strict";function o(t,e,i){this._study=t,this._model=e,this._plotIndex=i,this._text="",this._coordinate=0,this._background="black",this._color="white",this._invalidated=!0,this._cache=new n}var n=i(83),s=i(68),r=i(69);inherit(o,s),o.prototype.update=function(){this._invalidated=!0},o.prototype._updateImpl=function(){this._visible=!1,this._text="";var t=this._study.lastValueData(this._plotIndex);t.noData||(this._visible=!0,this._text=t.text,this._coordinate=t.coordinate,this._floatCoordinate=t.floatCoordinate,this._background!=t.color&&(this._background=t.color,this._color=this.color()))},o.prototype.coordinate=function(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),s.prototype.coordinate.call(this)},o.prototype.renderer=function(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);var t={text:this._text,coordinate:this._coordinate,color:this._color,background:this._background,visible:this._visible};return new r(t,this._cache)},o.prototype.text=function(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),s.prototype.text.call(this)},t.exports=o},function(t,e,i){(function(t){"use strict";function o(t,e,i,o){var n,s;for(this.m_study=t,this.m_series=e,this.m_model=i,this._plotName=o,this.m_items=[],this._invalidated=!0,n=this.m_study.metaInfo().plots,this._colorer=null,this._palette=null,this._paletterProps=null,this._plotIndex=0,s=0;s<n.length;s++)n[s].id===this._plotName&&(this._plotIndex=s),this.m_study.isSelfColorerPlot(s)&&n[s].target===this._plotName&&(this._colorer=s,this._palette=this.m_study.metaInfo().palettes[n[s].palette],this._paletterProps=this.m_study.properties().palettes[n[s].palette])}function n(t,e,i,o){var n,s;for(this._study=t,this._series=e,this._model=i,this._plotName=o,this._items=[],this._invalidated=!0,n=this._study.metaInfo().plots,s=0;s<n.length;s++)n[s].id===this._plotName&&(this._plotIndex=s,assert(this._study.isBgColorerPlot(s),"Plot '"+this._plotName+"' is not a background colorer!"))}function s(t,e,i,o){var n,s;for(this.m_study=t,this.m_series=e,this.m_model=i,this.m_plotName=o,this.m_items=[],this.m_invalidated=!0,this.m_plotIndex=null,n=this.m_study.metaInfo().plots,s=0;s<n.length;s++)if(n[s].id===this.m_plotName){this.m_plotIndex=s;break}for(n=this.m_study.metaInfo().plots,this._colorer=null,this._textColorer=null,this._palette=null,this._textPalette=null,this._paletterProps=null,this._textPaletterProps=null,this._plotIndex=0,s=0;s<n.length;s++)n[s].id===this.m_plotName&&(this._plotIndex=s),this.m_study.isSelfColorerPlot(s)&&n[s].target===this.m_plotName&&(this._colorer=s,this._palette=this.m_study.metaInfo().palettes[n[s].palette],this._paletterProps=this.m_study.properties().palettes[n[s].palette]),this.m_study.isTextColorerPlot(s)&&n[s].target===this.m_plotName&&(this._textColorer=s,this._textPalette=this.m_study.metaInfo().palettes[n[s].palette],this._textPaletterProps=this.m_study.properties().palettes[n[s].palette])}function r(t,e,i,o){s.call(this,t,e,i,o)}function a(t,e,i,o){r.call(this,t,e,i,o)}function l(t,e,i,o){s.call(this,t,e,i,o),this._maxAbsValue=0}function h(t,e,i,o){var n,s;for(this.m_study=t,this.m_series=e,this.m_model=i,this.m_plotName=o,this.m_bars=[],this._invalidated=!0,n=this.m_study.metaInfo().plots,this._colorer=null,this._palette=null,this._paletterProps=null,this._ohlcPlotIndexes={},s=0;s<n.length;s++)n[s].target===this.m_plotName&&(this.m_study.isOHLCOpenPlot(s)&&(this._ohlcPlotIndexes[TradingView.OPEN_PLOT]=s),this.m_study.isOHLCHighPlot(s)&&(this._ohlcPlotIndexes[TradingView.HIGH_PLOT]=s),this.m_study.isOHLCLowPlot(s)&&(this._ohlcPlotIndexes[TradingView.LOW_PLOT]=s),this.m_study.isOHLCClosePlot(s)&&(this._ohlcPlotIndexes[TradingView.CLOSE_PLOT]=s),this.m_study.isOHLCColorerPlot(s)&&(this._colorer=s,this._palette=this.m_study.metaInfo().palettes[n[s].palette],this._paletterProps=this.m_study.properties().palettes[n[s].palette]))}function c(t,e,i,o){h.call(this,t,e,i,o)}function d(t,e,i,o){h.call(this,t,e,i,o)}var p=i(88),u=i(87),_=u.SelectionRenderer,f=u.SelectionRendererArrowsUpDown,g=i(89),m=g.PaneRendererBars,v=g.PaneRendererHistogram,y=g.PaneRendererColumns,w=g.PaneRendererLine,b=g.PaneRendererArea,S=g.PaneRendererCandles,T=g.PaneRendererCross,C=g.PaneRendererCircles,x=g.PaneRendererArrowsUpDownItem,P=g.PaneRendererArrowsUpDown,L=g.PaneRendererUnicodeChar,k=g.PaneRendererBackground,E=i(91),I=i(92),A=i(93),V=i(59),M=V.RGBColor,$=V.rgbToHsl,D=V.hslToRgb,B=i(54).StudyConsts,O=i(54).StudyPlotShapes;o.isIndexValid=function(t,e){return t>=0&&t<e._length()},o.prototype.items=function(){return this.m_items},o.prototype.update=function(){this._invalidated=!0},o.prototype._updateImpl=function(){var e,i,n,s,r,a,l,h,c,d,u,_,f,g,m,v,y,w,b,S,T,C,x,P,L,k,E,I,V,M,$,D,O,R;if(this._histogramBase=null,this.m_items=[],!this.m_model.timeScale().isEmpty()&&!this.m_study.priceScale().isEmpty()&&(e=this.m_model.timeScale().visibleBars().clone(),!e.isEmpty())){if(i=this.m_series.nearestIndex(e.firstBar(),TradingView.SEARCH_NEAREST_RIGHT),n=this.m_series.nearestIndex(e.lastBar(),TradingView.SEARCH_NEAREST_LEFT),s=this.m_study.offset(this._plotName),s>0?(i-=s,n+=s):(i+=s,n-=s),r=this.m_study.properties().styles[this._plotName].plottype.value(),a=[B.PLOT_LINE,B.PLOT_AREA,B.PLOT_CIRCLES,B.PLOT_CROSS].indexOf(r)>=0,l=this.m_study.data(),h=this.m_study.firstValue(),a&&l._length()>0){for(c=l._bsearch(i);o.isIndexValid(c,l)&&void 0===l._valueAt(c)[this._plotIndex+1];)c-=1;for(i=o.isIndexValid(c,l)?l._indexAt(c):i,d=l._bsearch(n);o.isIndexValid(d,l)&&void 0===l._valueAt(d)[this._plotIndex+1];)d+=1;n=o.isIndexValid(d,l)?l._indexAt(d):n}for(u=l.range(i,n),_=this.m_study.priceScale(),f=_.properties().percentage.value(),g=this._getTranspValue(),m={},v=function(t,e){var i=t+"@"+e;return m[i]||(this._plotName&&"vol"===this._plotName?m[i]=TradingView.generateColor(t,e):m[i]=TradingView.generateColor(t,e,!0)),m[i]}.bind(this),y=u._start;y<u._end;++y)w=u._indexAt(y),w+=s,w=Math.floor(w),b=u._valueAt(y),S=b[this._plotIndex+1],T=void 0===S||null===S,S=T?NaN:S,f&&!T&&(S=100*(S-h)/h),a&&T||(C=new t.Point(w,S),x=void 0!==b[this._colorer+1]||this._palette&&this._palette.addDefaultColor,this._colorer&&x&&(S=b[this._colorer+1],C.style={},P=this.m_study.properties().styles[this._plotName],void 0!==S&&null!==S?(L=this._palette.valToIndex?this._palette.valToIndex[S]:S,k=this._paletterProps.colors[L],E=k.color.value(),C.style.color=TradingView.isHexColor(E)?v(E,g):E):(E=P.color.value(),C.style.color=v(E,100)),I=void 0!==L?k.width.value():P.linewidth.value(),V=void 0!==L?k.style.value():P.linestyle.value(),C.style.width=I,C.style.style=V),this.m_items.push(C));if(_.pricesToCoordinates(this.m_items),this.m_model.timeScale().indexesToCoordinates(this.m_items),this.m_study.properties().styles[this._plotName].histogramBase&&(this._histogramBase=this.m_study.priceScale().priceToCoordinate(this.m_study.properties().styles[this._plotName].histogramBase.value())),this.m_study===this.m_model.selectedSource())for(M=A(i,n),this._selectionData={points:[]},this._selectionData.hittestResult=p.REGULAR,y=0;y<M.length;y++)w=M[y],b=this.m_study.data().valueAt(w),w+=s,void 0!==b&&(S=b[this._plotIndex+1],_.properties().percentage.value()&&(S=100*(S-h)/h),$=this.m_model.timeScale().indexToCoordinate(Math.floor(w)),D=this.m_study.priceScale().priceToCoordinate(S),this._selectionData.points.push(new t.Point($,D)));
O=this.m_study.properties().styles[this._plotName],this._lineColor=TradingView.generateColor(O.color.value(),g),this._lineWidth=O.linewidth.value(),R=O.color.value(),this._colorer&&(R=this._paletterProps.colors[0].color.value(),this._lineWidth=this._paletterProps.colors[0].width.value(),this._lineColor=TradingView.generateColor(this._paletterProps.colors[0].color.value(),g)),this._color2=TradingView.generateColor(R,g),this._color1=TradingView.generateColor(o.addHueForColor(R),g)}},o.addHueForColor=TradingView.memoize(function(t){var e,i=new M(t),o=$(i.r,i.g,i.b),n=o[0]+.05;return o[0]=n-Math.floor(n),e=D(o[0],o[1],o[2]),i.r=e[0],i.g=e[1],i.b=e[2],i.toHex()}),o.prototype._getTranspValue=function(){var t=this.m_study.properties(),e=t.styles[this._plotName],i=0,o=0,n=this.m_study.metaInfo();return"Volume@tv-basicstudies"===n.id&&n.version<=46&&"transparency"in t?(i=t.transparency.value(),i=isNumber(i)?i:o):(e.transparency&&(i=e.transparency.value(),i=isNumber(i)?i:o),i)},o.prototype.renderer=function(){var t,e,i,o,n,s,r=this.m_study.properties().styles[this._plotName];if(r.visible.value()&&this.m_study.priceScale()){switch(this._invalidated&&(this._updateImpl(),this._invalidated=!1),t={},e=this._getTranspValue(),i=r.color.value(),t.barSpacing=this.m_model.timeScale().barSpacing(),t.items=this.m_items,t.histogramBase=this._histogramBase?this._histogramBase:this.m_study.priceScale().height(),t.lineIndex=0,t.lineStyle=r.linestyle.value(),t.lineColor=this._lineColor,t.lineWidth=this._lineWidth,t.lineWidth=isNumber(t.lineWidth)?t.lineWidth:1,t.color1=this._color1,t.color2=this._color2,t.bottom=t.histogramBase,this._colorer||(t.simpleMode=!0),o=new I,n=!!r.joinPoints&&r.joinPoints.value(),r.plottype.value()){case B.PLOT_LINE:case B.PLOT_LINE_WITH_BREAKS:o.append(new w(t));break;case B.PLOT_AREA:case B.PLOT_AREA_WITH_BREAKS:o.append(new b(t));break;case B.PLOT_HISTOGRAM:o.append(new v(t));break;case B.PLOT_COLUMNS:o.append(new y(t));break;case B.PLOT_CROSS:o.append(new T(t)),n&&(s=TradingView.merge({},t),s.lineWidth=1,s.forceLineWidth=!0,o.append(new w(s)));break;case B.PLOT_CIRCLES:o.append(new C(t)),n&&(s=TradingView.merge({},t),s.lineWidth=1,s.ignorePaletteLineWidth=!0,o.append(new w(s)));break;default:o.append(new w(t))}return this.m_study===this.m_model.selectedSource()&&o.append(new _(this._selectionData)),o}},n.prototype.items=function(){return this._items},n.prototype.update=function(){this._invalidated=!0},n.prototype._scalesReady=function(){var t=this._model.timeScale(),e=this._study.priceScale();return t&&e&&!t.isEmpty()&&!e.isEmpty()},n.prototype._updateImpl=function(){var e,i,o,n,s,r,a,l,h,c,d,p,u,_,f,g,m,v,y;if(this._items=[],assert(this._scalesReady(),"Scales must be ready!"),e=this._model.timeScale().visibleBars().clone(),!e.isEmpty()){for(i=this._study.metaInfo().plots,o=i[this._plotIndex].palette,n=this._study.properties().palettes[o],s=n.colors,r=this._study.metaInfo().palettes[o],a=this._study.properties().styles[this._plotName].transparency.value(),l=this._series.nearestIndex(e.firstBar(),TradingView.SEARCH_NEAREST_RIGHT),h=this._series.nearestIndex(e.lastBar(),TradingView.SEARCH_NEAREST_LEFT),c=this._study.offset(this._plotName),c>0?(l-=c,h+=c):(l+=c,h-=c),d=this._study.data(),p=d.range(l,h),u=p._start;u<p._end;++u)_=p._indexAt(u),_+=c,f=p._valueAt(u),g=f[this._plotIndex+1],m=new t.Point(Math.floor(_)-.5),v=isNumber(a)?a:50,v=Math.min(v,100),v=Math.max(v,0),void 0!==g&&null!==g?(y=r.valToIndex?r.valToIndex[g]:g,m.color=TradingView.generateColor(s[y].color.value(),v)):m.color=null,this._items.push(m);this._model.timeScale().indexesToCoordinates(this._items)}},n.prototype.renderer=function(){var t,e;if(this._study.properties().styles[this._plotName].visible&&this._study.properties().styles[this._plotName].visible.value()&&this._scalesReady())return this._invalidated&&(this._updateImpl(),this._invalidated=!1),t={items:this._items,y:0,h:this._study.priceScale().height(),w:Math.ceil(this._model.timeScale().barSpacing())},e=new I,e.append(new k(t)),e},s.prototype.items=function(){return this.m_items},s.prototype.update=function(){this.m_invalidated=!0},s.prototype._scalesReady=function(){var t=this.m_model.timeScale(),e=this.m_study.priceScale();return t&&e&&!t.isEmpty()&&!e.isEmpty()},s.prototype._updateImpl=function(){var t,e,i,o,n,s,r,a,l,h,c,d,u,_,f,g,m,v,y,w,b,S,T,C,x,P,L,k,E,I,V,M;if(this.m_items=[],this._scalesReady()&&(t=this.m_model.timeScale(),e=this.m_study.priceScale(),i=t.visibleBars().clone(),!i.isEmpty())){for(o=this.m_series.nearestIndex(i.firstBar(),TradingView.SEARCH_NEAREST_RIGHT),n=this.m_series.nearestIndex(i.lastBar(),TradingView.SEARCH_NEAREST_LEFT),s=this.m_study.offset(this.m_plotName),s>0?(o-=s,n+=s):(o+=s,n-=s),r=this.m_study.data(),a=this.m_study.firstValue(),l=r.range(o,n),h=e.properties().percentage.value(),c=e.priceRange(),d=this._getTranspValue(),u=A(o,n),_=this.m_study===this.m_model.selectedSource(),_&&(this.m_selectionData={points:[],hittestResult:p.REGULAR,vertOffset:0}),f=this.m_series.properties().style.value(),g=f===TradingView.Series.STYLE_LINE?"lineStyle":f===TradingView.Series.STYLE_AREA?"areaStyle":null,g?(m=this.m_series.properties()[g].priceSource.value(),v=m):(m="high",v="low"),this._topCoord=e.coordinateToPrice(e.height()*e.topMargin()),this._bottomCoord=e.coordinateToPrice(e.height()*(1-e.bottomMargin())),y=l._start;y<l._end;++y)w=l._indexAt(y),b=Math.floor(w+s),S=l._valueAt(y),T=S[this.m_plotIndex+1],null!==T&&void 0!==T&&(C=this._createItem(b,T,m,v,h,a),void 0!==C&&null!==C&&(x=void 0!==S[this._colorer+1]||this._palette&&this._palette.addDefaultColor,this._colorer&&x&&(T=S[this._colorer+1],C.style={},void 0!==T&&null!==T?(L=this._palette.valToIndex?this._palette.valToIndex[T]:T,P=this._paletterProps.colors[L].color.value(),C.style.color=TradingView.generateColor(P,d)):(P=this.m_study.properties().styles[this.m_plotName].color.value(),C.style.color=TradingView.generateColor(P,100)),k=d>9?d-10:0,C.style.borderColor=TradingView.generateColor(P,k)),E=void 0!==S[this._textColorer+1]||this._textPalette&&this._textPalette.addDefaultColor,this._textColorer&&E&&(T=S[this._textColorer+1],C.style||(C.style={}),void 0!==T&&null!==T?(L=this._textPalette.valToIndex?this._textPalette.valToIndex[T]:T,I=this._textPaletterProps.colors[L].color.value(),C.style.textColor=TradingView.generateColor(I,d)):(I=this.m_study.properties().styles[this.m_plotName].textColor.value(),C.style.textColor=TradingView.generateColor(I,100))),V=this.m_model.timeScale().indexToCoordinate(Math.floor(b)),M=this.m_study.priceScale().priceToCoordinate(S),_&&u.indexOf(w)!==-1&&this.m_selectionData.points.push(C),this.m_items.push(C)));this._convertItemsToCoordinates()}},s.prototype._getSeriesVal=function(t,e){var i;t=t||"close",i=null;try{i=this.m_series[t](e)}catch(o){}return i},s.prototype._getTranspValue=function(){var t,e=0;return this.m_study.properties().transparency&&(e=this.m_study.properties().transparency.value(),e=isNumber(e)?e:50),t=this.m_study.properties().styles[this.m_plotName],t.transparency&&(e=t.transparency.value(),e=isNumber(e)?e:50),e},s.prototype._createItem=function(e,i,o,n,s,r){var a,l,h,c,d=this.m_study.properties().styles[this.m_plotName].location.value();if(!i&&d!=CanvasEx.MARKLOC_ABSOLUTE)return null;switch(d){case CanvasEx.MARKLOC_ABOVEBAR:if(a=this._getSeriesVal(o,e),void 0===a||null==a)return null;l=a;break;case CanvasEx.MARKLOC_BELOWBAR:if(h=this._getSeriesVal(n,e),void 0===h||null==h)return null;l=h;break;case CanvasEx.MARKLOC_TOP:l=this._topCoord;break;case CanvasEx.MARKLOC_BOTTOM:l=this._bottomCoord;break;case CanvasEx.MARKLOC_ABSOLUTE:l=i;break;default:throw Error("Bad value: "+d)}return s&&d!=CanvasEx.MARKLOC_TOP&&d!=CanvasEx.MARKLOC_BOTTOM&&(l=100*(l-r)/r),c=new t.Point(e,l)},s.prototype._convertItemsToCoordinates=function(){var t=this.m_model.timeScale(),e=this.m_study.priceScale();t.indexesToCoordinates(this.m_items),e.pricesToCoordinatesEx(this.m_items,function(t){return t.y},function(t,e){t.y=e})},s.prototype._calculateVerticalOffset=function(t,e){var i=0;switch(t){case CanvasEx.MARKLOC_ABOVEBAR:case CanvasEx.MARKLOC_BOTTOM:i=-e;break;case CanvasEx.MARKLOC_BELOWBAR:case CanvasEx.MARKLOC_TOP:i=e}return i},s.prototype._calculateShapeHeight=function(t,e){var i=t;switch(e){case CanvasEx.SIZE_TINY:i=.3*t;break;case CanvasEx.SIZE_SMALL:i=.6*t;break;case CanvasEx.SIZE_NORMAL:i=t;break;case CanvasEx.SIZE_LARGE:i=1.5*t;break;case CanvasEx.SIZE_HUGE:i=2*t}return i},s.prototype.renderer=function(){var t,e,i,o,n,s,r,a,l,h;if(this.m_study.properties().styles[this.m_plotName].visible&&this.m_study.properties().styles[this.m_plotName].visible.value()&&this._scalesReady())return t=this.m_model.timeScale(),this.m_invalidated&&(this._updateImpl(),this.m_invalidated=!1),e={},i=this._getTranspValue(),o=t.barSpacing(),n=this._calculateShapeHeight(o),s=this.m_study.properties().styles[this.m_plotName].location.value(),r=this._calculateVerticalOffset(s,n+n/2),e.barSpacing=o,e.items=this.m_items,e.color=TradingView.generateColor(this.m_study.properties().styles[this.m_plotName].color.value(),i),e.height=n,e.vertOffset=r,a=this.m_study.properties().styles[this.m_plotName].plottype.value(),l=O.Data[a],void 0===l&&TradingView.logError("Unknown style "+a),h=new I,h.append(new TradingView[l.paneRendererClass](e)),this.m_study===this.m_model.selectedSource()&&(this.m_selectionData.vertOffset=r,h.append(new _(this.m_selectionData))),h},inherit(r,s),r.prototype.renderer=function(){var t,e,i,o,n,s,r,a,l,h,c,d,p,u,f,g,m,v,y,w,b=this.m_study.properties().styles[this.m_plotName];if(b.visible&&b.visible.value()&&this._scalesReady())return t=this.m_model.timeScale(),this.m_invalidated&&(this._updateImpl(),this.m_invalidated=!1),e={},i=this._getTranspValue(),o=t.barSpacing(),b.size?(s=b.size.value(),n=this._calculateShapeHeight(25,s)):n=Math.round(o/2),r=b.location.value(),a=TradingView.generateColor(b.color.value(),i),l=i>19?i-10:0,h=this._calculateVerticalOffset(r,Math.round(1.5*n)),e.barSpacing=o,e.items=this.items(),e.color=a,e.borderColor=TradingView.generateColor(b.color.value(),l),e.height=n,e.vertOffset=h,c=b.plottype.value(),d=O.Data[c],void 0===d&&TradingView.logError("Unknown style "+c),p=new I,u=b.text?b.text.value():void 0,void 0!==u&&""!==u.trim()&&(f=u.trim().replace(/\\n/gm,"\n"),f=TradingView.cleanButAmpersand(f,!0),g=!1,m=!1,v="Arial",y=12,e.textCache=new E(f,g,m,v,y),w=b.textColor?b.textColor.value():void 0,e.textColor=w?TradingView.generateColor(w,i):a),p.append(new TradingView[d.paneRendererClass](e)),this.m_study===this.m_model.selectedSource()&&(this.m_selectionData.vertOffset=h,p.append(new _(this.m_selectionData))),p},inherit(a,r),a.prototype.renderer=function(){var t,e,i,o,n,s,r,a,l,h,c,d,p,u,f,g,m,v,y=this.m_study.properties().styles[this.m_plotName];if(y.visible&&y.visible.value()&&this._scalesReady())return t=this.m_model.timeScale(),e=this.m_study.priceScale(),this.m_invalidated&&(this._updateImpl(),this.m_invalidated=!1),i={},o=this._getTranspValue(),n=t.barSpacing(),y.size?(r=y.size.value(),s=this._calculateShapeHeight(50,r)):s=Math.round(n),a=y.location.value(),l=TradingView.generateColor(y.color.value(),o),h=this._calculateVerticalOffset(a,s),i.items=this.items(),i["char"]=y["char"].value(),i.height=s,i.vertOffset=h,i.color=l,c=new I,d=y.text?y.text.value():void 0,void 0!==d&&""!==d.trim()&&(p=d.trim().replace(/\\n/gm,"\n"),p=TradingView.cleanButAmpersand(p,!0),u=!1,f=!1,g="Arial",m=12,i.textCache=new E(p,u,f,g,m),v=y.textColor?y.textColor.value():void 0,i.textColor=v?TradingView.generateColor(v,o):l),c.append(new L(i)),this.m_study===this.m_model.selectedSource()&&(this.m_selectionData.vertOffset=h,c.append(new _(this.m_selectionData))),c},inherit(l,s),l.prototype.renderer=function(){var t,e,i,o,n;if(this.m_study.properties().styles[this.m_plotName].visible&&this.m_study.properties().styles[this.m_plotName].visible.value()&&this._scalesReady())return this.m_invalidated&&(this._updateImpl(),this.m_invalidated=!1),t={},e=this._getTranspValue(),i=this.m_model.timeScale().barSpacing(),t.items=this.m_items,t.barSpacing=i,t.colorup=TradingView.generateColor(this.m_study.properties().styles[this.m_plotName].colorup.value(),e),t.colordown=TradingView.generateColor(this.m_study.properties().styles[this.m_plotName].colordown.value(),e),t.colorBorder=TradingView.generateColor("#000000",e),t.minHeight=this.m_study.properties().styles[this.m_plotName].minHeight.value(),t.maxHeight=this.m_study.properties().styles[this.m_plotName].maxHeight.value(),o=new I,o.append(new P(t)),this.m_study===this.m_model.selectedSource()&&(n=this.m_selectionData,n.barSpacing=i,o.append(new f(n))),o},l.prototype._createItem=function(t,e,i,o,n,s){var r,a,l,h,c;if(0!==e){if(Math.abs(e)>this._maxAbsValue&&(this._maxAbsValue=Math.abs(e)),r=e>0){if(l=this._getSeriesVal(o,t),void 0===l||null==l)return null;a=l}else{if(h=this._getSeriesVal(i,t),void 0===h||null==h)return null;a=h}return n&&(a=100*(a-s)/s),c=new x(t,a,e,r)}},l.prototype._convertItemsToCoordinates=function(){var t,e,i,o,n,s,r,a,l,h=this.m_model.timeScale(),c=this.m_study.priceScale();for(h.indexesToCoordinates(this.m_items),c.pricesToCoordinatesEx(this.m_items,function(t){return t.y},function(t,e){t.y=e}),t=Math.abs(this.m_study.properties().styles[this.m_plotName].minHeight.value()),e=Math.abs(this.m_study.properties().styles[this.m_plotName].maxHeight.value()),t>e&&(i=t,t=e,e=i),o=e-t,n=o/this._maxAbsValue,s=this.m_items,r=0;r<s.length;r++)a=s[r],l=Math.abs(a.height),a.height=l*n+t},h.prototype.update=function(){this._invalidated=!0},h.prototype._updateImpl=function(){var e,i,o,n,s,r,a,l,h,c,d,u,_,f,g,m,v,y,w,b,S,T,C,x,P,L,k,E,I,V,B,O,R,z,N,F;if(this.m_bars.length=0,!this.m_model.timeScale().isEmpty()&&!this.m_study.priceScale().isEmpty()&&(e=this.m_model.timeScale().visibleBars().clone(),!e.isEmpty())){for(i=this.m_series.nearestIndex(e.firstBar(),TradingView.SEARCH_NEAREST_RIGHT),o=this.m_series.nearestIndex(e.lastBar(),TradingView.SEARCH_NEAREST_LEFT),n=this.m_study.data(),s=this.m_study.firstValue(),r=n.range(i,o),a=this.m_study.priceScale(),l=a.properties().percentage.value(),h=0,c=this.m_study.properties().ohlcPlots[this.m_plotName],d=c.wickColor?c.wickColor.value():void 0,u={},_=function(t,e){var i=t+"@"+e;return u[i]||(u[i]=TradingView.generateColor(t,e)),u[i]},f=r._start;f<r._end;++f){for(g=r._indexAt(f),g=Math.floor(g),m=r._valueAt(f),v=!0,y={},w=TradingView.OPEN_PLOT;w<=TradingView.CLOSE_PLOT;++w){if(b=m[this._ohlcPlotIndexes[w]+1],void 0===b||null===b){v=!1;break}y[w]=b}v&&(S=y[TradingView.OPEN_PLOT],T=y[TradingView.CLOSE_PLOT],C=Math.max(S,y[TradingView.HIGH_PLOT],y[TradingView.LOW_PLOT],T),x=Math.min(S,y[TradingView.HIGH_PLOT],y[TradingView.LOW_PLOT],T),P={},P.time=Math.round(g),l?(P.open=100*(S-s)/s,P.high=100*(C-s)/s,P.low=100*(x-s)/s,P.close=100*(T-s)/s):(P.open=S,P.high=C,P.low=x,P.close=T),L=c.color.value(),k=void 0!==m[this._colorer+1]||this._palette&&this._palette.addDefaultColor,this._colorer&&k&&(b=m[this._colorer+1],void 0!==b&&null!==b&&(E=this._palette.valToIndex?this._palette.valToIndex[b]:b,I=this._paletterProps.colors[E],L=I.color.value())),P.color=_(L,h),V=new M(L),B=$(V.r,V.g,V.b),O=B[2]>.25?B[2]-.26:B[2]+.75,R=D(B[0],B[1],O),V.r=R[0],V.g=R[1],V.b=R[2],P.borderColor=_(V.toHex(),h),P.hollow=null,this.m_bars.push(P))}if(a.barPricesToCoordinates(this.m_bars),this.m_model.timeScale().barIndexesToCoordinates(this.m_bars),this.m_study===this.m_model.selectedSource())for(z=A(i,o),this._selectionData={points:[],hittestResult:p.REGULAR},f=0;f<z.length;f++)g=z[f],m=this.m_study.data().valueAt(g),void 0!==m&&(b=m[this._plotIndex+1],a.properties().percentage.value()&&(b=100*(b-s)/s),N=this.m_model.timeScale().indexToCoordinate(Math.floor(g)),F=this.m_study.priceScale().priceToCoordinate(b),this._selectionData.points.push(new t.Point(N,F)))}},h.prototype.items=function(){return this.m_bars},inherit(c,h),c.prototype.renderer=function(){var t,e,i=this.m_study.properties().ohlcPlots[this.m_plotName];if(i.visible.value())return this._invalidated&&(this._updateImpl(),this._invalidated=!1),t={},t.bars=this.m_bars,t.barSpacing=this.m_model.timeScale().barSpacing(),t.dontDrawOpen=this.m_series.properties().barStyle.dontDrawOpen.value(),e=new I,e.append(new m(t)),this.m_series===this.m_model.selectedSource()&&e.append(new _(this._selectionData)),e},inherit(d,h),d.prototype.renderer=function(){var t,e,i,o=this.m_study.properties().ohlcPlots[this.m_plotName];if(o.visible.value())return this._invalidated&&(this._updateImpl(),this._invalidated=!1),t={},t.bars=this.m_bars,t.barSpacing=this.m_model.timeScale().barSpacing(),t.drawWick=o.drawWick.value(),t.drawBorder=o.drawBorder.value(),e=o.wickColor.value(),t.borderColor=e,t.wickColor=e,i=new I,i.append(new S(t)),this.m_series===this.m_model.selectedSource()&&i.append(new _(this._selectionData)),i},e.StudyPaneView=o,e.StudyBackgroundPaneView=n,e.StudyPlotShapesPaneView=r,e.StudyPlotCharsPaneView=a,e.StudyPlotArrowsPaneView=l,e.StudyPlotCandlesPaneView=d,e.StudyPlotBarsPaneView=c}).call(e,i(21))},function(t,e,i){"use strict";function o(t){this._data=t}function n(t){this._source=t,this._points1=[],this._points2=[],this._timePoints=[],this._getBarSpacing=t.model().timeScale().barSpacing.bind(t.model().timeScale()),this._invalidated=!0}function s(t){n.call(this,t)}function r(t,e,i){n.call(this,t),assert(e.type===h.FilledArea.TYPE_PLOTS,"Wrong filledArea type: "+e.type),this._fillMetaInfo=e,this._fillStyleProps=i}var a=i(88),l=i(90),h=i(107);o.prototype.hitTest=function(t){var e,i,o,n;l.selectionTolerance(this.lineWidth);for(n=1;n<this._data.points1.length;++n)if(e=this._data.points1[n],i=this._data.points2[n],o=this._data.timePoints[n],o==t.x&&(t.y>=e&&t.y<=i||t.y<=e&&t.y>=i))return new a(a.REGULAR);return null},o.prototype.draw=function(t){var e,i,o,n,s,r,a,h,c,d,p,u,_,f,g;if(0!==this._data.points1.length&&0!==this._data.points2.length)for(e=this._data.timePoints,i=this._data.points1,o=this._data.points2,n=this._data.getBarSpacing()/24,s=l.paneRendererCoordinateIsValid,r=isNumber(this._data.transparency)?this._data.transparency:50,r=Math.min(r,100),r=Math.max(r,0),a=TradingView.generateColor(this._data.backcolor,r),f=0;f<this._data.timePoints.length;f++)if(c=e[f],d=i[f],p=o[f],u=i[f+1],_=o[f+1],s(d)&&s(p)&&(h||(h={points1:[],points2:[],timePoints:[]}),h.points1.push(d),h.points2.push(p),h.timePoints.push(c)),h&&(!s(u)||!s(_))){for(1===h.timePoints.length&&(h.timePoints=[h.timePoints[0]-n,h.timePoints[0]+n],h.points1.push(h.points1[0]),h.points2.push(h.points2[0])),t.beginPath(),t.moveTo(h.timePoints[0],h.points1[0]),g=1;g<h.timePoints.length;g++)t.lineTo(h.timePoints[g],h.points1[g]);for(h.timePoints.length>0&&h.points2.length>0&&t.lineTo(h.timePoints[h.timePoints.length-1],h.points2[h.timePoints.length-1]),g=h.timePoints.length-2;g>=0;g--)t.lineTo(h.timePoints[g],h.points2[g]);t.closePath(),t.fillStyle=a,t.fill(),h=null}},n.prototype.update=function(){this._invalidated=!0},n.prototype._updateImpl=function(){var t,e,i,o,n,s,r,a,l,h,c,d,p,u,_,f,g,m,v,y,w,b,S,T,C;if(this._points1=[],this._points2=[],this._timePoints=[],this._visible()&&(t=this._source.priceScale(),e=this._source._model.timeScale(),t&&!t.isEmpty()&&!this._source._model.timeScale().isEmpty()&&!this._source._series.bars().isEmpty()&&(i=this._source.data()._columns.indexOf(this._plotAId())+1,o=this._source.data()._columns.indexOf(this._plotBId())+1,n=this._source._model.timeScale().visibleBars(),!n.isEmpty()))){if(s=this._source._series.nearestIndex(n.firstBar(),TradingView.SEARCH_NEAREST_RIGHT),r=this._source._series.nearestIndex(n.lastBar(),TradingView.SEARCH_NEAREST_LEFT),a=this._source.data().range(s,r),this._source.data()._items.length>0)for(l=this._source.firstValue(),h=a._start,c=a._end,d=this._source.offset(this._plotAId()),p=this._source.offset(this._plotBId()),u=Math.max(d,p),_=Math.min(d,p),f=h+u,g=0,h>g&&(f=h<u?u:h),m=c+_,v=a._items.length,c>v+_&&c<v&&(m=v+_),_<0&&c<=v+_&&(m=c),y=a._indexAt(h),f<h?y+=u:f>c?y+=u:y=a._indexAt(f),w=f;w<m;++w)b=a._valueAt(w-d),S=a._valueAt(w-p),T=b[i],C=S[o],t.properties().percentage.value()&&(T=100*(T-l)/l,C=100*(C-l)/l),this._points1.push(T),this._points2.push(C),this._timePoints.push(e.indexToCoordinate(y++));t.pricesArrayToCoordinates(this._points1),t.pricesArrayToCoordinates(this._points2)}},n.prototype.renderer=function(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);var t={};return t.points1=this._points1,t.points2=this._points2,t.timePoints=this._timePoints,t.getBarSpacing=this._getBarSpacing,t.backcolor=this._color(),t.transparency=this._transparency(),new o(t)},n.prototype._plotAId=function(){assert(!1,"Pure virtual call!")},n.prototype._plotBId=function(){assert(!1,"Pure virtual call!")},n.prototype._color=function(){assert(!1,"Pure virtual call!")},n.prototype._transparency=function(){assert(!1,"Pure virtual call!")},n.prototype._visible=function(){assert(!1,"Pure virtual call!")},inherit(s,n),s.prototype._plotAId=function(){var t=this._source.properties().area[0];return t.name.value()},s.prototype._plotBId=function(){var t=this._source.properties().area[1];return t.name.value()},s.prototype._color=function(){return this._source.properties().areaBackground.backgroundColor.value()},s.prototype._transparency=function(){return this._source.properties().areaBackground.transparency.value()},s.prototype._visible=function(){return this._source.properties().areaBackground.fillBackground.value()},inherit(r,n),r.prototype._plotAId=function(){return this._fillMetaInfo.objAId},r.prototype._plotBId=function(){return this._fillMetaInfo.objBId},r.prototype._color=function(){return this._fillStyleProps.color.value()},r.prototype._transparency=function(){return this._fillStyleProps.transparency.value()},r.prototype._visible=function(){return this._fillStyleProps.visible.value()},e.PlotFillPaneView=r,e.AreaBackgroundPaneView=s},function(t,e,i){(function(t){"use strict";function o(t,e){var i,o,n,s,l;if(r.call(this),this._study=t,this._model=e,i=t.metaInfo().plots){for(o=0;o<i.length;++o)if(!(this._study.isSelfColorerPlot(o)||this._study.isBarColorerPlot(o)||this._study.isBgColorerPlot(o)||this._study.isDataOffsetPlot(o)||this._study.isOHLCColorerPlot(o))){if(n=i[o].id,"Compare@tv-basicstudies"===this._study.metaInfo().id)s=new a(this._study.inputsForGUI()[1],"");else{l=this._study.title();try{l=this._study.properties().styles[n].title.value()}catch(h){}s=new a(l,"")}s.plotId=n,s.plotIndex=o,this._items.push(s)}this.update(),this._invalidated=!0}}function n(t,e){o.call(this,t,e)}var s=i(85),r=s.DataWindowView,a=s.DataWindowItem,l=i(103);inherit(o,r),o.prototype.update=function(){this._invalidated=!0},o.prototype._updateImpl=function(){var e,i,o,n,s,r,a,l,h,c,d,p,u,_,f,g,m,v,y,w,b,S=!0;for(this._header=this._study.title(S),this._title=this._study.title(),e=this._study.isVisible()?$.t("n/a"):"",i=0;i<this._items.length;++i)this._items[i].setValue(e);if(t.enabled("hide_last_na_study_output")&&this._items.length&&this._items[this._items.length-1].setValue(""),!this._model.timeScale().isEmpty()){if(o=this._study.metaInfo().plots,n=null,s=null,r=null,a={},o)for(i=0;i<o.length;i++)(this._study.isSelfColorerPlot(i)||this._study.isOHLCColorerPlot(i))&&(a[o[i].target]={index:i},a[o[i].target].palette=this._study.metaInfo().palettes[o[i].palette],a[o[i].target].paletterProps=this._study.properties().palettes[o[i].palette]);for(l=this._study.data().size()-1,h=this._model.crossHairSource().appliedIndex(),c=this._study.formatter(),i=0;i<this._items.length;++i)d=this._items[i],p=d.plotId,u=d.plotIndex,_=this._study.offset(p),f=isNumber(h)?this._study.nearestIndex(h-_,TradingView.SEARCH_NEAREST_LEFT):l,void 0!==f&&(g=this._study.data().valueAt(f)||this._study.data().last(),g&&(m=g[u+1],isNumber(m)&&(d.setValue(c.format(m)),v=this._study.properties().styles[p].color.value(),this._study.isOHLCSeriesPlot(u)&&(p=o[u].target,v=this._study.properties().ohlcPlots[p].color.value()),a[p]&&g.length>a[p].index+1?(y=g[a[p].index+1],void 0!==y&&null!==y?(s=a[p].palette,w=a[p].paletterProps,b=s.valToIndex?s.valToIndex[y]:y,this._items[i].setColor(w.colors[b].color.value())):this._items[i].setColor(v)):this._items[i].setColor(v))))}},o.prototype.items=function(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._items},inherit(n,o),n.prototype.additional=function(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._additional},n.prototype._updateImpl=function(){var t=l(this._study.symbolInfo());return t?this._additional="(Data Provided by "+t+")":this._additional=void 0,o.prototype._updateImpl.call(this)},e.StudyDataWindowView=o,e.DataVendorStudyDataWindowView=n}).call(e,i(1))},function(t,e,i){"use strict";function o(t,e){n.call(this,e),this._study=t,this._inputValueReplacements={NONE:"Default"}}var n=i(80);inherit(o,n),o.prototype.color=function(){return this._study._failed||this._study.metaInfo&&this._study.metaInfo().isTVScriptStub?"#ff0000":n.prototype.color.call(this)},o.prototype.update=function(){this._study._failed?this._text=this._study.title(!0,this._inputValueReplacements)+": "+this._study.status():this._text=this._study.title(!0,this._inputValueReplacements)+" "+this._study.status()},t.exports=o},function(t,e,i){(function(e){"use strict";function o(t){this._data=t}function n(t){this._data=t}function s(t,e){for(var i,o,n,s=0,r=t.length-1;s<=r;)if(i=s+r>>>1,o=t[i].y1,n=t[i].y2,o>e)s=i+1;else{if(!(n<e))return t[i+1]&&o==t[i+1].y1?i+1:i;r=i-1}return-1}var r=i(98).TextRenderer,a=i(96).HorzLineRenderer,l=i(122).TrendLineRenderer,h=i(68),c=i(69),d=i(192),p=TradingView.Study,u=i(193),_=i(88),f=i(92),g=i(50),m=g.clearRect;p.graphicsZOrderPriority=function(t){switch(t){case"polygons":return-100;case"trendchannels":return-90;default:return 0}},p.StudyPaneView_horizlines=function(t,e){this._study=t,this._model=e,this._data=[]},p.StudyPaneView_horizlines.prototype.update=function(){this._invalidated=!0},p.StudyPaneView_horizlines.prototype.renderer=function(){var t,e;for(this._invalidated&&(this._updateViewInternal(),this._invalidated=!1),t=new f,e=0;e<this._data.length;e++)t.append(new l(this._data[e],new _(_.REGULAR)));return t},p.StudyPaneView_horizlines.prototype._updateViewInternal=function(){var t,i,o,n,s,r,a,l,h,c,d,p,u,_,f,g,m,v,y,w,b,S;if(this._data=[],t=this._study.graphics().horizlines,t&&(i=this._study.priceScale(),o=this._study._model.timeScale(),i&&!i.isEmpty()&&o&&!o.isEmpty()))for(n=this._study.graphics().indexes,s=this._model.timeScale().visibleBars(),r=s.firstBar(),a=s.lastBar(),l=0;l<t.length;l++)if(h=t[l],h.data&&(c=this._study.properties().graphics.horizlines[h.styleId],c.visible.value()))for(d=0;d<h.data.length;d++)p=h.data[d],u=n[p.startIndex],_=n[p.endIndex],!p.extendRight&&Math.max(u,_)<r||!p.extendLeft&&Math.min(u,_)>a||(f={},g=o.indexToCoordinate(u),m=o.indexToCoordinate(_),v=p.level,i.isPercent()&&(y=this._study.firstValue(),v=i.priceRange().convertToPercent(v,y)),w=i.priceToCoordinate(v),b=new e.Point(g,w),S=new e.Point(m,w),f.points=[b,S],f.extendleft=p.extendLeft,f.extendright=p.extendRight,f.width=o.width(),f.height=i.height(),f.color=c.color.value(),f.linewidth=c.width.value(),f.linestyle=c.style.value(),this._data.push(f))},p.StudyPaneView_vertlines=function(t,e){this._study=t,this._model=e,this._data=[]},p.StudyPaneView_vertlines.prototype.update=function(){this._invalidated=!0},p.StudyPaneView_vertlines.prototype.renderer=function(){var t,e;for(this._invalidated&&(this._updateViewInternal(),this._invalidated=!1),t=new f,e=0;e<this._data.length;e++)t.append(new l(this._data[e],new _(_.REGULAR)));return t},p.StudyPaneView_vertlines.prototype._updateViewInternal=function(){var t,i,o,n,s,r,a,l,h,c,d,p,u,_,f,g,m,v,y,w,b;if(this._data=[],t=this._study.graphics().vertlines,t&&(i=this._study.priceScale(),o=this._study._model.timeScale(),i&&!i.isEmpty()&&o&&!o.isEmpty()))for(n=this._study.graphics().indexes,s=this._model.timeScale().visibleBars(),r=s.firstBar(),a=s.lastBar(),l=0;l<t.length;l++)if(h=t[l],h.data&&(c=this._study.properties().graphics.vertlines[h.styleId],c.visible.value()))for(d=0;d<h.data.length;d++)p=h.data[d],u={},n[p.index]<r||n[p.index]>a||(_=o.indexToCoordinate(n[p.index])+1,f=null,p.extendBottom?g=i.height():(v=p.startPrice,i.isPercent()&&(f=f||this._study.firstValue(),v=i.priceRange().convertToPercent(v,f)),g=i.priceToCoordinate(v)),p.extendTop?m=0:(y=p.endPrice,i.isPercent()&&(f=f||this._study.firstValue(),y=i.priceRange().convertToPercent(y,f)),m=i.priceToCoordinate(y)),w=new e.Point(_,g),b=new e.Point(_,m),u.points=[w,b],u.extendleft=p.extendBottom,u.extendright=p.extendTop,u.width=o.width(),u.height=i.height(),u.color=c.color.value(),u.linewidth=c.width.value(),u.linestyle=c.style.value(),this._data.push(u))},p.StudyPaneView_lines=function(t,e){this._study=t,this._model=e,this._data=[]},p.StudyPaneView_lines.prototype.update=function(){this._invalidated=!0},p.StudyPaneView_lines.prototype.renderer=function(){var t,e;for(this._invalidated&&(this._updateViewInternal(),this._invalidated=!1),t=new f,e=0;e<this._data.length;e++)t.append(new l(this._data[e],new _(_.REGULAR)));return t},p.StudyPaneView_lines.prototype._updateViewInternal=function(){var t,i,o,n,s,r,a,l,h,c,d,p,u,_,f,g,m,v,y,w,b,S,T,C;if(this._data=[],t=this._study.graphics().lines,t&&(i=this._study.priceScale(),o=this._study._model.timeScale(),i&&!i.isEmpty()&&o&&!o.isEmpty()))for(n=this._study.graphics().indexes,s=this._model.timeScale().visibleBars(),r=s.firstBar(),a=s.lastBar(),l=0;l<t.length;l++)if(h=t[l],h.data&&(c=this._study.properties().graphics.lines[h.styleId],c.visible.value()))for(d=0;d<h.data.length;d++)p=h.data[d],u=n[p.startIndex]+(p.startOffset||0),_=n[p.endIndex]+(p.endOffset||0),!p.extendRight&&Math.max(u,_)<r||!p.extendLeft&&Math.min(u,_)>a||(f={},g=o.indexToCoordinate(u),m=o.indexToCoordinate(_),v=p.startPrice,y=p.endPrice,i.isPercent()&&(w=this._study.firstValue(),v=i.priceRange().convertToPercent(v,w),y=i.priceRange().convertToPercent(y,w)),b=i.priceToCoordinate(v),S=i.priceToCoordinate(y),T=new e.Point(g,b),C=new e.Point(m,S),f.points=[T,C],f.color=c.color.value(),f.linewidth=c.width.value(),f.linestyle=c.style.value(),this._data.push(f))},p.StudyPaneView_hlines=function(t,e){this._study=t,this._model=e,this._data=[],this._textData=[],this._textRendererCache={}},p.StudyPaneView_hlines.prototype.update=function(){this._invalidated=!0},p.StudyPaneView_hlines.prototype.renderer=function(){var t,e;for(this._invalidated&&(this._updateViewInternal(),this._invalidated=!1),t=new f,e=0;e<this._data.length;e++)t.append(new a(this._data[e]));for(e=0;e<this._textData.length;e++)t.append(new r(this._textData[e],this._textRendererCache,new _(_.REGULAR)));return t},p.StudyPaneView_hlines.prototype._updateViewInternal=function(){this._calcHorzLinesData(),this._calcTextData()},p.StudyPaneView_hlines.prototype._calcTextData=function(){var t,i,o,n,s,r,a,l,h,c,d,p,u,_,f;if(this._textData=[],t=this._study.graphics().hlines,t&&(i=this._study.priceScale(),o=this._study._model.timeScale(),i&&!i.isEmpty()&&o&&!o.isEmpty()))for(n=0;n<t.length;n++)if(s=t[n],s.data&&(r=this._study.properties().graphics.hlines[s.styleId],r.enableText.value()&&r.showText.value()))for(a=0;a<s.data.length;a++)l=s.data[a],h={},h.text=void 0===l.text?"":l.text,h.color=r.color.value(),h.font="arial",h.fontsize=r.fontSize.value(),c=l.level,i.isPercent()&&(d=this._study.firstValue(),c=i.priceRange().convertToPercent(c,d)),p=i.priceToCoordinate(c),u=r.textPos.value(),u==CanvasEx.TEXTPOS_TOPLEFT||u==CanvasEx.TEXTPOS_MIDDLELEFT||u==CanvasEx.TEXTPOS_BOTTOMLEFT?(_=4,h.horzAlign="left"):u==CanvasEx.TEXTPOS_TOPCENTER||u==CanvasEx.TEXTPOS_MIDDLECENTER||u==CanvasEx.TEXTPOS_BOTTOMCENTER?(_=o.width()/2,h.horzAlign="center"):u!=CanvasEx.TEXTPOS_TOPRIGHT&&u!=CanvasEx.TEXTPOS_MIDDLERIGHT&&u!=CanvasEx.TEXTPOS_BOTTOMRIGHT||(_=o.width(),h.horzAlign="right"),u==CanvasEx.TEXTPOS_TOPLEFT||u==CanvasEx.TEXTPOS_TOPCENTER||u==CanvasEx.TEXTPOS_TOPRIGHT?(h.vertAlign="bottom",
p-=4):u==CanvasEx.TEXTPOS_MIDDLELEFT||u==CanvasEx.TEXTPOS_MIDDLECENTER||u==CanvasEx.TEXTPOS_MIDDLERIGHT?(h.vertAlign="middle",p-=2):u!=CanvasEx.TEXTPOS_BOTTOMLEFT&&u!=CanvasEx.TEXTPOS_BOTTOMCENTER&&u!=CanvasEx.TEXTPOS_BOTTOMRIGHT||(h.vertAlign="top"),f=new e.Point(_,p),h.points=[f],h.offsetX=0,h.offsetY=0,this._textData.push(h)},p.StudyPaneView_hlines.prototype._calcHorzLinesData=function(){var t,i,o,n,s,r,a,l,h,c,d,p;if(this._data=[],t=this._study.graphics().hlines,t&&(i=this._study.priceScale(),i&&!i.isEmpty()))for(o=0;o<t.length;o++)if(n=t[o],n.data&&(s=this._study.properties().graphics.hlines[n.styleId],s.visible.value()))for(r=0;r<n.data.length;r++)a=n.data[r],l={},h=0,c=a.level,i.isPercent()&&(d=this._study.firstValue(),c=i.priceRange().convertToPercent(c,d)),p=i.priceToCoordinate(c),l.points=[new e.Point(h,p)],l.color=s.color.value(),l.linewidth=s.width.value(),l.linestyle=s.style.value(),l.hitTestResult=_.REGULAR,this._data.push(l)},p.StudyPriceAxisView_hlines=function(t,e,i,o,n){this._study=t,this._model=e,this._line=i,this._styleId=o,this._data={},this._lineType=n,this._invalidated=!0},inherit(p.StudyPriceAxisView_hlines,h),p.StudyPriceAxisView_hlines.prototype.update=function(){this._invalidated=!0},p.StudyPriceAxisView_hlines.prototype.updateImpl=function(){var t,e,i,o,n;if(this._data={},this._data.visible=!1,t=this._study.priceScale(),t&&!t.isEmpty()&&(e=this._study.properties().visible.value(),e&&(i=this._study.properties().graphics[this._lineType][this._styleId],i.visible&&i.visible.value()&&i.showPrice&&i.showPrice.value()))){if(this._data.visible=!0,this._data.color="white",this._data.background=i.color.value(),o=this._line.level,t.isPercent()){if(n=this._study.firstValue(),!isNumber(n))return;o=t.priceRange().convertToPercent(o,n)}this._data.coordinate=t.priceToCoordinate(o),this._data.text=t.formatter().format(o)}},p.StudyPriceAxisView_hlines.prototype.renderer=function(){return this._invalidated&&(this.updateImpl(),this._invalidated=!1),new c(this._data)},TradingView.TriangleTextMarkRenderer=function(t,e){this._data=t,this._textCache=e},TradingView.TriangleTextMarkRenderer.prototype.fontStyle=function(){return(this._data.bold?"bold ":"")+(this._data.italic?"italic ":"")+this._data.fontSize+"px "+this._data.font},TradingView.TriangleTextMarkRenderer.prototype.draw=function(t){var e,i,o,n,s,r,a;if(this._data){switch(e="up"==this._data.direction?1:-1,i=this._data.point.x,"left"==this._data.halign?i-=this._data.size:"right"==this._data.halign&&(i+=this._data.size),o=this._data.point.y,t.font=this.fontStyle(),n=t.measureText(this._data.text).width,this._textCache.textWidth=n,s=this._data.fontSize,r=.65*s,a=1*s,t.save(),t.translate(i+.5,o+.5),t.beginPath(),t.moveTo(0,0),this._data.direction){case"up":case"down":t.lineTo(r,a*e),t.lineTo(.5*n+r,a*e),t.lineTo(.5*n+r,(a+1.75*s)*e),t.lineTo(.5*-n-r,(a+1.75*s)*e),t.lineTo(.5*-n-r,a*e),t.lineTo(-r,a*e),t.lineTo(0,0),t.strokeStyle=this._data.borderColor,t.stroke(),t.fillStyle=this._data.color,t.fill(),t.fillStyle=this._data.fontColor,t.fillText(this._data.text,.5*-n,e<0?e*a-.5*s:a+1.25*s);break;default:throw this._data.direction+" doesn't supported by TradingView.TriangleTextMarkRenderer"}t.restore()}},TradingView.TriangleTextMarkRenderer.prototype.hitTest=function(t){var i,o,n,s,r,a,l,h,c,d,p,u=this._textCache.textWidth,f=this._data.fontSize;switch(this._data.direction){case"up":case"down":if(i="up"==this._data.direction?1:-1,o=.65*f,n=1*f,s=this._data.point.x,"left"==this._data.halign?s-=this._data.size:"right"==this._data.halign&&(s+=this._data.size),r=this._data.point.y,a=s-.5*u-o,l=s+.5*u+o,h=r+n*i,c=r+(n+1.75*f)*i,c<h&&(r=h,h=c,c=r),e.pointInRect(t,new e.Point(a,h),new e.Point(l,c)))return new _(_.REGULAR);if(d=[],d[0]={},d[0].x=this._data.point.x,d[0].y=this._data.point.y,d[1]={},d[1].x=this._data.point.x+.65*f,d[1].y=this._data.point.y+f*i,d[2]={},d[2].x=this._data.point.x-.65*f,d[2].y=this._data.point.y+f*i,p=(t.x-d[0].x)*(d[1].y-d[0].y)-(t.y-d[0].y)*(d[1].x-d[0].x),((t.x-d[1].x)*(d[2].y-d[1].y)-(t.y-d[1].y)*(d[2].x-d[1].x))*p>0&&((t.x-d[2].x)*(d[0].y-d[2].y)-(t.y-d[2].y)*(d[0].x-d[2].x))*p>0)return new _(_.REGULAR);break;default:throw this._data.direction+" doesn't supported by TradingView.TriangleTextMarkRenderer"}return null},TradingView.RectangleTextMarkRenderer=function(t,e){this._data=t,this._textCache=e},TradingView.RectangleTextMarkRenderer.prototype.fontStyle=function(){return(this._data.bold?"bold ":"")+(this._data.italic?"italic ":"")+this._data.fontSize+"px "+this._data.font},TradingView.RectangleTextMarkRenderer.prototype.draw=function(t){var e,i,o,n,s,r;if(this._data){switch(e=this._data.point.x,i=this._data.point.y,t.font=this.fontStyle(),o=t.measureText(this._data.text).width,this._textCache.textWidth=o,n=this._data.fontSize,t.save(),t.translate(e+.5,i+.5),t.beginPath(),t.moveTo(0,0),s=this._data.halign,r=this._data.valign,t.textAlign=s,r){case"middle":t.textBaseline="middle";break;case"top":t.textBaseline="bottom";break;case"bottom":t.textBaseline="hanging"}t.fillStyle=this._data.fontColor,t.fillText(this._data.text,0,0),t.restore()}},TradingView.RectangleTextMarkRenderer.prototype.hitTest=function(t){var i,o,n=this._data.point.x+.5,s=this._data.point.y+.5,r=this._textCache.textWidth,a=this._data.fontSize,l=this._data.halign,h=this._data.valign;switch(h){case"middle":s-=a/2;break;case"bottom":s-=a}switch(l){case"right":n-=r;break;case"center":n-=r/2}return i=new e.Point(n,s),o=new e.Point(n+r,s+a),e.pointInRect(t,i,o)?new _(_.REGULAR):null},TradingView.CircleShapeMarkRenderer=function(t,e){this._data=t,this._textCache=e},TradingView.CircleShapeMarkRenderer.prototype.draw=function(t){var e,i,o;this._data&&(e="down"==this._data.direction?1:"up"==this._data.direction?-1:0,i=this._data.point.x,o=this._data.point.y,t.save(),t.fillStyle=this._data.color,t.beginPath(),t.arc(i+1,o+2*this._data.size*e+.5,this._data.size,0,2*Math.PI),t.closePath(),t.fill(),t.stroke())},TradingView.CircleShapeMarkRenderer.prototype.hitTest=function(t){var e="down"==this._data.direction?1:"up"==this._data.direction?-1:0;return Math.pow(this._data.point.x+.5-t.x,2)+Math.pow(this._data.point.y+.5+2*this._data.size*e-t.y,2)<=Math.pow(this._data.size,2)?new _(_.REGULAR):null},TradingView.SquareShapeMarkRenderer=function(t,e){this._data=t,this._textCache=e},TradingView.SquareShapeMarkRenderer.prototype.draw=function(t){var i,o,n,s,r,a,l;this._data&&(i="down"==this._data.direction?1:"up"==this._data.direction?-1:0,o=parseInt(this._data.size),n=new e.Point(this._data.point.x-o/2,this._data.point.y-o/2+i*o),s=new e.Point(this._data.point.x+o/2,this._data.point.y+o/2+i*o),r=s.substract(n),a=t.canvas.width,l=t.canvas.height,t.beginPath(),t.fillStyle=this._data.color,t.rect(n.x,n.y,r.x,r.y),t.stroke(),t.fill())},TradingView.SquareShapeMarkRenderer.prototype.hitTest=function(t){var i="down"==this._data.direction?1:"up"==this._data.direction?-1:0,o=parseInt(this._data.size),n=new e.Point(this._data.point.x-o/2,this._data.point.y-o/2+i*o),s=new e.Point(this._data.point.x+o/2,this._data.point.y+o/2+i*o),r=new e.Point(Math.min(n.x,s.x),Math.min(n.y,s.y)),a=new e.Point(Math.max(n.x,s.x),Math.max(n.y,s.y));return e.pointInRect(t,r,a)?new _(_.REGULAR):null},TradingView.ArrowShapeMarkRenderer=function(t,e,i){this._data=t,this._textCache=e,this._arrowDirection=i},TradingView.ArrowShapeMarkRenderer.prototype.draw=function(t){var e,i,o,n,s,r,a,l,h,c,d,p;if(this._data){switch(e=this._arrowDirection,i=1*this._data.size,o=this._data.color,n=this._data.point.x+1,s=this._data.point.y,r=1.1*i,e){case"up":s-=r;break;case"down":s+=r}switch(a=i/6,l=i/4,h=i/3,c=i/2,d=.6666666*i,p=.4166666666667*i,t.save(),t.fillStyle=o,t.beginPath(),e){case"up":t.moveTo(n,s),t.lineTo(n-c,s+d),t.lineTo(n-l,s+d),t.lineTo(n,s+h),t.lineTo(n+l,s+d),t.lineTo(n+c,s+d),t.lineTo(n,s);break;case"down":t.moveTo(n,s+i),t.lineTo(n-c,s+h),t.lineTo(n-l,s+h),t.lineTo(n,s+d),t.lineTo(n+l,s+h),t.lineTo(n+c,s+h),t.lineTo(n,s+i);break;case"right":t.moveTo(n+a,s),t.lineTo(n-a,s-l),t.lineTo(n-a,s+l),t.lineTo(n+a,s);break;case"left":t.moveTo(n-a,s),t.lineTo(n+a,s-l),t.lineTo(n+a,s+l),t.lineTo(n-a,s)}t.closePath(),t.fill(),t.stroke()}},TradingView.ArrowShapeMarkRenderer.prototype.hitTest=function(t){var i,o,n,s,r,a,l,h=this._data.point.x,c=this._data.point.y,d=this._arrowDirection,p=1*this._data.size,u=p/2,f=1.1*p;switch(d){case"up":c-=f;break;case"down":c+=f}switch(i=p/6,o=p/4,n=p/3,u=p/2,s=.6666666*p,d){case"up":r=new e.Point(h,c),a=new e.Point(h+u,c+s),l=new e.Point(h-u,c+s);break;case"down":r=new e.Point(h,c+p),a=new e.Point(h+u,c+n),l=new e.Point(h-u,c+n);break;case"right":r=new e.Point(h+i,c),a=new e.Point(h-i,c-o),l=new e.Point(h-i,c+o);break;case"left":r=new e.Point(h-i,c),a=new e.Point(h+i,c-o),l=new e.Point(h+i,c+o)}return e.pointInTriangle(r,a,l,t)?new _(_.REGULAR):null},p.StudyPaneView_textmarks=function(t,e){this._study=t,this._model=e,this._data=[],this._textCache=[]},inherit(p.StudyPaneView_textmarks,u),p.StudyPaneView_textmarks.prototype.update=function(){this._invalidated=!0},p.StudyPaneView_textmarks.prototype.renderer=function(){var t,e;for(this._invalidated&&(this._updateViewInternal(),this._invalidated=!1),t=new f,e=0;e<this._data.length;e++)switch(this._data[e].shape){case"triangle":t.append(new TradingView.TriangleTextMarkRenderer(this._data[e],this._textCache[e]));break;case"rectangle":t.append(new TradingView.RectangleTextMarkRenderer(this._data[e],this._textCache[e]))}return t},p.StudyPaneView_textmarks.prototype._updateViewInternal=function(){var t,i,o,n,s,r,a,l,h,c,d,p,u,_,f,g,m,v,y,w,b,S;if(this._data=[],t=this._study.graphics().textmarks,t&&(i=this._study.priceScale(),o=this._model.timeScale(),i&&!i.isEmpty()&&o&&!o.isEmpty()))for(n=this._study.graphics().indexes,s=this._model.timeScale().visibleBars(),r=s.firstBar(),a=s.lastBar(),l=0;l<t.length;l++)if(h=t[l],h.data&&(c=this._study.properties().graphics.textmarks[h.styleId],c.visible.value()))for(d=h.data,p=0;p<d.length;p++)if(u=d[p],_={},f=c.location.value(),g=c.shape.value(),m=n[u.time],!(m<r||m>a)&&(v=this._study.series().bars().valueAt(m))){switch(m=n[u.time]+(u.offset||0),_.font=c.fontFamily.value(),_.color=TradingView.generateColor(c.color.value(),c.transparency.value()),_.bold=c.fontBold.value(),_.fontColor=TradingView.generateColor(c.fontColor.value(),c.transparency.value()),_.italic=c.fontItalic.value(),_.fontSize=c.fontSize.value(),_.text=u.text?u.text:"",_.halign=c.halign.value(),_.valign=void 0!==c.valign?c.valign.value():"middle",_.shape=c.shape.value(),_.size=.5*o.barSpacing(),_.borderColor="rgb(0, 0, 0)",y=50,g){case"triangle":S=this._calcCoordsForTriangleShape(f,m,y,u.price,i),_.direction=S.direction,w=Math.round(o.indexToCoordinate(m)),b=S.y;break;case"rectangle":S=this._calcCoordsForRectangleShape(f,m,u.price,i,o),w=S.x,b=S.y}_.point=new e.Point(w,b),this._data.push(_),this._textCache.push({})}},p.StudyPaneView_textmarks.prototype._calcCoordsForTriangleShape=function(t,e,i,o,n){var s,r,a;switch(t){case CanvasEx.MARKLOC_TOP:s=n.height()-i,r="down";break;case CanvasEx.MARKLOC_BOTTOM:s=i,r="up";break;case CanvasEx.MARKLOC_ABSOLUTEDOWN:n.isPercent()&&(a=this._study.firstValue(),o=n.priceRange().convertToPercent(o,a)),s=n.priceToCoordinate(o),r="down";break;case CanvasEx.MARKLOC_ABSOLUTEUP:n.isPercent()&&(a=this._study.firstValue(),o=n.priceRange().convertToPercent(o,a)),s=n.priceToCoordinate(o),r="up";break;case CanvasEx.MARKLOC_ABOVEBAR:s=this._locationToY(t,e),r="down";break;case CanvasEx.MARKLOC_BELOWBAR:s=this._locationToY(t,e),r="up";break;default:s=this._locationToY(t,e),r="up"}return{y:s,direction:r}},p.StudyPaneView_textmarks.prototype._calcCoordsForRectangleShape=function(t,e,i,o,n){var s,r,a=Math.round(n.indexToCoordinate(e));switch(t){case CanvasEx.MARKLOC_ABSOLUTEDOWN:case CanvasEx.MARKLOC_ABSOLUTEUP:case CanvasEx.MARKLOC_ABSOLUTE:o.isPercent()&&(r=this._study.firstValue(),i=o.priceRange().convertToPercent(i,r)),s=o.priceToCoordinate(i);break;case CanvasEx.MARKLOC_ABOVEBAR:s=this._locationToY(t,e);break;case CanvasEx.MARKLOC_BELOWBAR:s=this._locationToY(t,e);break;case CanvasEx.MARKLOC_RIGHT:a=n.width(),o.isPercent()&&(r=this._study.firstValue(),i=o.priceRange().convertToPercent(i,r)),s=o.priceToCoordinate(i);break;case CanvasEx.MARKLOC_LEFT:a=n.width(),o.isPercent()&&(r=this._study.firstValue(),i=o.priceRange().convertToPercent(i,r)),s=o.priceToCoordinate(i);break;default:s=this._locationToY(t,e)}return{x:a,y:s}},p.StudyPaneView_shapemarks=function(t,e){this._study=t,this._model=e,this._data=[],this._textCache=[]},inherit(p.StudyPaneView_shapemarks,u),p.StudyPaneView_shapemarks.prototype.update=function(){this._invalidated=!0},p.StudyPaneView_shapemarks.prototype.renderer=function(){var t,e;for(this._invalidated&&(this._updateViewInternal(),this._invalidated=!1),t=new f,e=0;e<this._data.length;e++)switch(this._data[e].shape){case"circle":t.append(new TradingView.CircleShapeMarkRenderer(this._data[e],this._textCache[e]));break;case"square":t.append(new TradingView.SquareShapeMarkRenderer(this._data[e],this._textCache[e]));break;case"arrowUp":t.append(new TradingView.ArrowShapeMarkRenderer(this._data[e],this._textCache[e],"up"));break;case"arrowDown":t.append(new TradingView.ArrowShapeMarkRenderer(this._data[e],this._textCache[e],"down"));break;case"arrowRight":t.append(new TradingView.ArrowShapeMarkRenderer(this._data[e],this._textCache[e],"right"));break;case"arrowLeft":t.append(new TradingView.ArrowShapeMarkRenderer(this._data[e],this._textCache[e],"left"))}return t},p.StudyPaneView_shapemarks.prototype._updateViewInternal=function(){var t,i,o,n,s,r,a,l,h,c,d,p,u,_,f,g,m,v,y,w,b,S;if(this._data=[],t=this._study.graphics().shapemarks,t&&(i=this._study.priceScale(),o=this._model.timeScale(),i&&!i.isEmpty()&&o&&!o.isEmpty()))for(n=this._study.graphics().indexes,s=this._model.timeScale().visibleBars(),r=s.firstBar(),a=s.lastBar(),l=0;l<t.length;l++)if(h=t[l],h.data&&(c=this._study.properties().graphics.shapemarks[h.styleId],c.visible.value()))for(d=h.data,p=0;p<d.length;p++)if(u=d[p],_=n[u.time],!(_<r||_>a)&&(f={},null!=u.time&&(g=this._study.series().bars().valueAt(_)))){switch(f.color=TradingView.generateColor(c.color.value(),c.transparency.value()),m=0,"left"==c.halign.value()?m-=o.barSpacing()/2+1:"right"==c.halign.value()&&(m+=o.barSpacing()/2+1),f.size=c.size.value(),f.shape=c.shape.value(),v=Math.round(o.indexToCoordinate(_))+m,y=u.price,i.isPercent()&&(w=this._study.firstValue(),y=i.priceRange().convertToPercent(y,w)),b=i.priceToCoordinate(y),S=c.location.value()){case CanvasEx.MARKLOC_ABSOLUTE:f.direction="";break;case CanvasEx.MARKLOC_ABSOLUTEDOWN:f.direction="down";break;case CanvasEx.MARKLOC_ABSOLUTEUP:f.direction="up";break;case CanvasEx.MARKLOC_ABOVEBAR:b=this._locationToY(S,_,Math.floor(2*f.size/o.barSpacing())+1),f.direction="up";break;case CanvasEx.MARKLOC_BELOWBAR:b=this._locationToY(S,_,Math.floor(2*f.size/o.barSpacing())+1),f.direction="down";break;default:TradingView.logWarn("Bad location value: "+S),b=this._locationToY(CanvasEx.MARKLOC_ABSOLUTEUP,_),f.direction="up"}f.point=new e.Point(v,b),this._data.push(f),this._textCache.push({})}},o.prototype.draw=function(t){},o.prototype.drawBackground=function(t){var e=this._data;m(t,e.x1,e.y1,e.x2-e.x1,e.y2-e.y1,TradingView.generateColor(this._data.color,this._data.transparency))},o.prototype.hitTest=function(t){return null},p.StudyPaneView_backgrounds=function(t,e){this._study=t,this._model=e,this._data=[]},p.StudyPaneView_backgrounds.prototype.update=function(){this._invalidated=!0},p.StudyPaneView_backgrounds.prototype.renderer=function(){var t,e;for(this._invalidated&&(this._updateViewInternal(),this._invalidated=!1),t=new f,e=0;e<this._data.length;e++)t.append(new o(this._data[e]));return t},p.StudyPaneView_backgrounds.prototype._hideExtendedHours=function(t){return("inSession"===t||"outOfSession"===t)&&!this._study._series.properties().extendedHours.value()},p.StudyPaneView_backgrounds.prototype._updateViewInternal=function(){var t,e,i,o,n,s,r,a,l,h,c,d,p,u,_,f,g,m,v,y,w;if(this._data=[],t=this._study.graphics().backgrounds,t&&(e=this._model.timeScale(),i=this._study.priceScale(),i&&!i.isEmpty()&&e&&!e.isEmpty()))for(o=this._study.graphics().indexes,n=this._model.timeScale().visibleBars(),s=n.firstBar(),r=n.lastBar(),a=0;a<t.length;a++)if(l=t[a],h=l.styleId,c=l.data,d=this._study.properties().graphics.backgrounds[h],!this._hideExtendedHours(h)&&d.visible.value())for(_=0;_<c.length;_++)f=c[_],g={},m=o[f.start],v=o[f.stop],v<s||m>r||null!=f.start&&null!=f.stop&&(y=Math.ceil(e.indexToCoordinate(m,!0)-.5*e.barSpacing()),w=Math.ceil(e.indexToCoordinate(v,!0)+.5*e.barSpacing()),u==m-1&&(y=p),p=w,u=v,y<0&&w<0||y>e.width()&&w>e.width()||(g.x1=y,g.x2=w,g.y1=0,g.y2=i.height(),g.color=d.color.value(),g.transparency=d.transparency.value(),this._data.push(g)))},p.StudyPaneView_polygons=function(t,e){this._study=t,this._model=e,this._data=[]},p.StudyPaneView_polygons.prototype.update=function(){this._invalidated=!0},p.StudyPaneView_polygons.prototype.renderer=function(){var t,e;for(this._invalidated&&(this._updateViewInternal(),this._invalidated=!1),t=new f,e=0;e<this._data.length;e++)t.append(new d(this._data[e],new _(_.REGULAR)));return t},p.StudyPaneView_polygons.prototype._updateViewInternal=function(){var t,i,o,n,s,r,a,l,h,c,d,p,u,_,f,g,m,v,y,w,b,S,T;if(this._data=[],t=this._study.graphics().polygons,t&&(i=this._study.priceScale(),o=this._study._model.timeScale(),i&&!i.isEmpty()&&o&&!o.isEmpty()))for(n=this._study.graphics().indexes,s=this._model.timeScale().visibleBars(),r=s.firstBar(),a=s.lastBar(),l=0;l<t.length;l++)if(h=t[l],h.data&&(c=this._study.properties().graphics.polygons[h.styleId],100!=c.transparency.value()))for(d=0;d<h.data.length;d++){for(p=h.data[d],u=1/0,_=-(1/0),f=0;p.points&&f<p.points.length;f++)g=n[p.points[f].index]+(p.points[f].offset||0),u=Math.min(u,g),_=Math.max(_,g);if(!(_<r||u>a)){for(m={},m.points=[],f=0;p.points&&f<p.points.length;f++)v=p.points[f],y=o.indexToCoordinate(n[v.index]+(v.offset||0)),w=v.level,i.isPercent()&&(b=this._study.firstValue(),w=i.priceRange().convertToPercent(w,b)),S=i.priceToCoordinate(w),T=new e.Point(y,S),T.data=f,m.points.push(T);m.color=c.color.value(),m.backcolor=c.color.value(),m.linewidth=void 0!==c.showBorder&&c.showBorder.value()?1:0,m.linestyle=CanvasEx.LINESTYLE_SOLID,m.filled=!0,m.fillBackground=!0,m.transparency=c.transparency.value(),m.mouseTouchable=c.mouseTouchable.value(),this._data.push(m)}}},p.StudyPaneView_trendchannels=function(t,e){this._study=t,this._model=e,this._data=[]},p.StudyPaneView_trendchannels.prototype.update=function(){this._invalidated=!0},p.StudyPaneView_trendchannels.prototype.renderer=function(){var t,e;for(this._invalidated&&(this._updateViewInternal(),this._invalidated=!1),t=new f,e=0;e<this._data.length;e++)t.append(new d(this._data[e],new _(_.REGULAR)));return t},p.StudyPaneView_trendchannels.prototype._convertToYCoord=function(t){var e=this._study.priceScale(),i=this._study.firstValue();return e.isPercent()&&(t=e.priceRange().convertToPercent(t,i)),e.priceToCoordinate(t)},p.StudyPaneView_trendchannels.prototype._updateViewInternal=function(){var t,i,o,n,s,r,a,l,h,c,d,p,u,_,f,g,m,v,y,w,b,S,T,C,x,P,L,k,E,I;if(this._data=[],t=this._study.graphics().trendchannels,t&&(i=this._study.priceScale(),o=this._study._model.timeScale(),i&&!i.isEmpty()&&o&&!o.isEmpty()))for(n=function(t,i,o,n,s,r){var a,l,h=new e.Point(0,0),c=new e.Point(o,n);return s&&(a=t.substract(i),l=e.intersectRayWithRect(t,t.add(a),h,c),l?t=l:i.x=o),r&&(a=i.substract(t),l=e.intersectRayWithRect(i,i.add(a),h,c),l?i=l:i.x=o),[t,i]},s=this._study.graphics().indexes,r=this._model.timeScale().visibleBars(),a=r.firstBar(),l=r.lastBar(),h=0;h<t.length;h++)if(c=t[h],c.data)for(d=this._study.properties().graphics.trendchannels[c.styleId],p=0;p<c.data.length;p++)u=c.data[p],_=s[u.startIndex],f=s[u.endIndex],Math.max(_,f)<a&&!u.extendRight||Math.min(_,f)>l&&!u.extendLeft||(g=this._convertToYCoord(u.startHighPrice),m=this._convertToYCoord(u.startLowPrice),v=this._convertToYCoord(u.endHighPrice),y=g-m,w=v-y,b=o.indexToCoordinate(_),S=o.indexToCoordinate(f),T=new e.Point(b,g),C=new e.Point(b,m),x=new e.Point(S,v),P=new e.Point(S,w),L=n(T,x,o.width(),i.height(),u.extendLeft,u.extendRight),k=n(C,P,o.width(),i.height(),u.extendLeft,u.extendRight),T=L[0],x=L[1],C=k[0],P=k[1],E={},E.points=[T,C,P,x],E.color=d.color.value(),E.backcolor=d.color.value(),E.linewidth=void 0!==d.borderWidth?d.borderWidth.value():0,E.linestyle=CanvasEx.LINESTYLE_SOLID,E.filled=!0,E.fillBackground=!0,u.transparency?(I=u.transparency+d.transparency.value(),E.transparency=Math.min(I,100)):E.transparency=d.transparency.value(),E.mouseTouchable=!0,this._data.push(E))},p.StudyPaneView_hhists=function(t,e){this._study=t,this._model=e,this._data=[],this._textData=[],this._textRendererCache={}},p.StudyPaneView_hhists.prototype.update=function(){this._invalidated=!0},p.StudyPaneView_hhists.prototype.renderer=function(){var t,e;this._invalidated&&(this._updateViewInternal(),this._invalidated=!1),t=new f;for(e in this._data)t.append(new n(this._data[e]));for(e=0;e<this._textData.length;e++)t.append(new r(this._textData[e],this._textRendererCache,new _(_.REGULAR)));return t},p.StudyPaneView_hhists.prototype._updateViewInternal=function(){var t,e,i,o,n,s,r,a,l,h,c,d,p,u,_,f;if(this._data=[],this._textData=[],t=this._study.priceScale(),e=this._model.timeScale(),t&&!t.isEmpty()&&e&&!e.isEmpty()&&(i=this._study.graphics().hhists))for(o=this._study.graphics().indexes,n=this._model.timeScale().visibleBars(),s=n.firstBar(),r=n.lastBar(),a=0;a<i.length;a++)if(l=i[a],h=this._study.properties().graphics.hhists[l.styleId],h.visible.value()){c=l.dataObj;for(d in c){for(p=c[d],u=1/0,_=-(1/0),f=p.length;f--;)u=Math.min(u,o[p[f].firstBarTime]),_=Math.max(_,o[p[f].lastBarTime]);_<s||u>r||this._updateDataForRenderers(p,h,t,e,o)}}},p.StudyPaneView_hhists.prototype._updateDataForRenderers=function(t,o,n,s,r){var a,l,h,c,d,p,u,_,f,g,m,v,y,w,b,S,T,C,x,P,L,k,E,I=[],A=this._findMaxRate(t),V=null,M=null,$=null,D={},B=i(141).shiftColor,O=function(t,e,i){if(i==CanvasEx.HHISTDIR_LEFTTORIGHT)return t+e;if(i==CanvasEx.HHISTDIR_RIGHTTOLEFT)return e+t;throw Error("Unknown direction value: "+i)};for(p=0;p<t.length;p++)for(u=t[p],null===M&&(M=this._findActualRateLength(u.rate)),null===V&&(_=Math.abs(s.indexToCoordinate(r[u.firstBarTime])-s.indexToCoordinate(r[u.lastBarTime])),V=o.percentWidth.value()*_/100,V-=M,V=Math.max(V,0)),f=!1,v=0;v<M;v++)if(0!==u.rate[v]){if(void 0===D[v]?D[v]=u.rate[v]:D[v]+=u.rate[v],n.isPercent()?(y=this._study.firstValue(),a=n.priceRange().convertToPercent(u.priceHigh,y),l=n.priceRange().convertToPercent(u.priceLow,y)):(a=u.priceHigh,l=u.priceLow),w={},w.y1=n.priceToCoordinate(a)+1,w.y2=n.priceToCoordinate(l)-1,0===p&&(g=w.y2,m=w.y2-w.y1),b=o.location.value(),S=o.direction.value(),b==CanvasEx.HHISTLOC_ABSOLUTE&&S==CanvasEx.HHISTDIR_LEFTTORIGHT)c=s.indexToCoordinate(r[u.firstBarTime]),h=1,d="left";else if(b==CanvasEx.HHISTLOC_ABSOLUTE&&S==CanvasEx.HHISTDIR_RIGHTTOLEFT)c=s.indexToCoordinate(r[u.lastBarTime]),h=-1,d="right";else if(b==CanvasEx.HHISTLOC_RELATIVE&&S==CanvasEx.HHISTDIR_LEFTTORIGHT)c=0,h=1,d="left";else{if(b!=CanvasEx.HHISTLOC_RELATIVE||S!=CanvasEx.HHISTDIR_RIGHTTOLEFT)throw Error("Unknown location/direction values: "+b+"/"+S);c=s.width(),h=-1,d="right"}if(0===v?w.x1=c:w.x1=c+h*(V*u.rate[v-1]/A+M),w.x2=w.x1+h*(V*u.rate[v]/A),w.colorBg=o.colors[v].value(),w.transparency=o.transparencies[v].value(),w.blendedColor=TradingView.generateColor(w.colorBg,w.transparency),w.x0=c,I.push(w),$||($=.6*(w.y2-w.y1)),!f&&o.showValues.value()&&$>=7.5){for(f=!0,T={},C=this._study.formatter(),T.text="",x=0;x<M;x++)T.text=O(T.text,C.format(u.rate[x]),S),x!=M-1&&(T.text=O(T.text,"x",S));if(T.color=o.valuesColor.value(),T.font="arial",T.fontsize=$,T.horzAlign=d,T.vertAlign="middle",P=new e.Point(c+3*h,w.y2-.61*(w.y2-w.y1)),T.points=[P],T.offsetX=0,T.offsetY=0,this._textData.push(T),p===t.length-1){for(L=c+3*h,k=g+.39*m,E={text:"",color:B(o.valuesColor.value(),1.5),font:"arial",fontsize:$,horzAlign:d,vertAlign:"middle",points:[new e.Point(L,k)],offsetX:0,offsetY:0},x=0;x<M;x++)E.text=O(E.text,C.format(D[x]),S),x!=M-1&&(E.text=O(E.text,"x",S));this._textData.push(E)}}}I.length>0&&this._data.push(I)},p.StudyPaneView_hhists.prototype._findMaxRate=function(t){var e,i,o=0,n=0;for(e=0;e<t.length;e++){for(n=0,i=0;i<t[e].rate.length;i++)n+=t[e].rate[i];o=Math.max(o,n)}return o},p.StudyPaneView_hhists.prototype._findActualRateLength=function(t){var e,i,o=0;for(e=0;e<t.length&&(i=t[e],null!==i&&void 0!==i);++e)o++;return o},n.prototype.hitTest=function(t){var e,i,o=s(this._data,t.y);return o<0?null:(e=Math.min(this._data[o].x0,this._data[o].x2),i=Math.max(this._data[o].x0,this._data[o].x2),e<=t.x&&t.x<=i?new _(_.REGULAR):null)},n.prototype.draw=function(t){var e,i,o,n,s,r,a;for(t.save(),e={},i=[],n=0;n<this._data.length;n++)s=this._data[n],e[s.blendedColor]?e[s.blendedColor].push(s):(i.push(s.blendedColor),e[s.blendedColor]=[s]);for(r=0;r<i.length;r++){for(a=i[r],t.fillStyle=a,t.strokeStyle=a,t.beginPath(),o=e[a],n=0;n<o.length;n++)s=o[n],t.rect(s.x1,s.y1,s.x2-s.x1,s.y2-s.y1);t.stroke(),t.fill()}t.restore()},t.exports=p}).call(e,i(21))},function(t,e,i){(function(e){"use strict";function o(t,e,i){this._data=t,this._hittest=e?e:new r(r.MOVEPOINT),this._backHittest=i?i:new r(r.MOVEPOINT_BACKGROUND),this._points=t.points}var n=i(67).LineDataSource,s=i(122).TrendLineRenderer,r=i(88);o.prototype.draw=function(t){var e,i,o;if(0!==this._points.length){for(t.beginPath(),t.lineCap="butt",t.strokeStyle=this._data.color,t.lineWidth=this._data.linewidth,t.lineStyle=this._data.linestyle,e=this._points[0],t.moveTo(e.x,e.y),i=0;i<this._points.length;i++)o=this._points[i],t.lineTo(o.x,o.y);this._data.filled&&this._data.fillBackground&&(t.fillStyle=TradingView.generateColor(this._data.backcolor,this._data.transparency),t.fill()),this._data.filled&&!this._data.skipClosePath&&t.closePath(),this._data.linewidth>0&&t.stroke(),this._points.length>1&&(this._data.leftend==n.LINEEND_ARROW&&s.prototype.drawArrow(this._points[1],this._points[0],t,t.lineWidth),this._data.rightend==n.LINEEND_ARROW&&s.prototype.drawArrow(this._points[this._points.length-2],this._points[this._points.length-1],t,t.lineWidth))}},o.prototype.hitTest=function(t){var i,o,n,s,r;if(void 0!==this._data.mouseTouchable&&!this._data.mouseTouchable)return null;for(i=TradingView.isMobile.any()?24:3,o=1;o<this._points.length;o++)if(n=this._points[o-1],s=this._points[o],r=e.distanceToSegment(n,s,t),r.distance<=i)return this._hittest;return this._data.filled&&this._data.fillBackground&&this._points.length>0&&(n=this._points[0],s=this._points[this._points.length-1],r=e.distanceToSegment(n,s,t),r.distance<=i)?this._hittest:this._data.filled&&this._data.fillBackground&&e.isInPolygon(this._data.points,t)?this._backHittest:null},t.exports=o}).call(e,i(21))},function(t,e,i){(function(e){"use strict";function i(){}i.prototype._locationToY=function(t,i,o){var n,s,r,a,l,h,c;switch(o||(o=0),n=[],s=this._study.priceScale(),t){case CanvasEx.MARKLOC_ABOVEBAR:r=TradingView.HIGH_PLOT;break;case CanvasEx.MARKLOC_BELOWBAR:r=TradingView.LOW_PLOT}for(a=this._study.firstValue(),o>=1&&(o-=1),l=-o;l<=o;l++)h=this._study.series().bars().valueAt(i+l),h&&(c=h[r],s.isPercent()&&(c=s.priceRange().convertToPercent(c,a)),n.push(s.priceToCoordinate(c)));switch(t){case CanvasEx.MARKLOC_ABOVEBAR:return e.min(n)-15;case CanvasEx.MARKLOC_BELOWBAR:return e.max(n)+15}},t.exports=i}).call(e,i(21))},function(t,e,i){"use strict";function o(t,e,i){var o=this._mtpStudyId()+"@mtp-mtpredictor",n=i||p.findStudyMetaInfo(t.studiesMetaData(),o),r=e||l(n,null,null,t.studyVersioning()),a=TradingView.Study.lineToolNameForPointsBasedStudy(o);s.call(this,t,this.createPaneViews(t),r,a),this._doNotNeedLine=!0,this._turnaroundCounter=0,this._nextTurnaround(),this._metaInfo=n,this._graphics=new c(n),this._formatter=new d}var n=i(136),s=n.StudyLineDataSource,r=n.StudyLineDataSourcePaneView,a=i(141),l=a.prepareStudyProperties,h=i(67).LineDataSource,c=i(138),d=i(75).VolumeFormatter,p=i(107);inherit(o,s),o.prototype.series=function(){return TradingView.isInherited(this._ownerSource.constructor,TradingView.Series)?this._ownerSource:this._ownerSource.series()},o.prototype.calcIsActualSymbol=function(){return h.prototype.calcIsActualSymbol.call(this)},o.prototype._nextTurnaround=function(){this._turnaround=this._mtpStudyId()+"_"+ ++this._turnaroundCounter},o.prototype.createPaneViews=function(t){return[new r(this,t),new TradingView.Study.StudyPaneView_textmarks(this,t),new TradingView.Study.StudyPaneView_polygons(this,t),new TradingView.Study.StudyPaneView_lines(this,t)]},o.prototype.onData=function(t){if("data_update"===t.method&&t.params.customId==="pointset_"+this._currentPointsetId)h.prototype.onData.call(this,t),this._points.length==this.pointsCount()&&this._requestStudy();else if("data_update"===t.method&&t.params.customId===this._studyId){if(!this._checkTurnaround(t.params.turnaround))return;t.params.nonseries.d=TradingView.Study.prototype._makeJSONForNSData.call(this,t),""!==t.params.nonseries.d&&this._graphics.process(t.params.nonseries),t.params.nonseries.indexes.length>0&&(this._indexes=t.params.nonseries.indexes),this.updateAllViews(),this._model.updateSource(this)}},o.prototype._requestStudy=function(){var t=this,e=function(e){t.onData(e)},i=this._studyInputs();i&&(this._studyId?(this._nextTurnaround(),this._model.chartApi().modifyStudy(this._studyId,this._turnaround,i,e)):(this._studyId=TradingView.Study.makeNextStudyId(),this._model.chartApi().createStudy(this._studyId,this._turnaround,this._model.mainSeries()._seriesId,this._metaInfo.id+"-1!",i,e)))},t.exports=o},function(t,e,i){(function(e){"use strict";function o(t,e){s.call(this,t,e),this._invalidated=!0}function n(t,e){this._constructor="LineToolBarsPattern";var i=e?e:new _("linetoolbarspattern");r.call(this,t,new o(this,t),i),i.mirrored.listeners().subscribe(this,n.prototype.mirror),i.flipped.listeners().subscribe(this,n.prototype.flip),i.addExclusion("mirrored"),i.addExclusion("flipped"),this._scaleCoeff=1,this.version=n.version,this._pattern=[],this._properties.mode.listeners().subscribe(this,n.prototype.onModeChanged)}var s=i(97),r=i(67).LineDataSource,a=i(137).VertLineRenderer,l=i(120).RectangleRenderer,h=i(122).TrendLineRenderer,c=i(132).Action,d=i(88),p=i(89).PaneRendererLine,u=i(92),_=i(73).DefaultProperty;inherit(o,s),o.prototype.renderer=function(){var t,i,o,s,c,_,f,g,m,v,y,w,b,S,T,C,x,P,L,k;if(this._invalidated&&(this.updateImpl(),this._invalidated=!1),this._pattern&&2==this._source.points().length){if(t=this._source.points()[0].index,i=this._source.points()[1].index,o=t<i?this._points[0]:this._points[1],!o)return new u;if(s=Math.abs((this._points[0].x-this._points[1].x)/(this._pattern.length-1)),this._source.properties().mode.value()==n.BARS_MODE||this._source.properties().mode.value()==n.OPENCLOSE_MODE){for(c=new u,_=this._source.properties().mode.value()==n.BARS_MODE?["high","low"]:["open","close"],f=_[0],g=_[1],m=0;m<this._pattern.length;m++)v=Math.round(o.x+m*s+.5),y=o.y+Math.round(this._pattern[m][f]),w=o.y+Math.round(this._pattern[m][g]),b={},b.points=[new e.Point(v-1,y),new e.Point(v+1,w)],b.color=this._source.properties().color.value(),b.linewidth=1,b.backcolor=this._source.properties().color.value(),b.fillBackground=!0,b.transparency=10,c.append(new l(b));return this.isAnchorsRequired()&&c.append(this.createLineAnchor({points:this._points})),c}return c=new u,b={},b.barSpacing=s,b.items=this._pattern,b.histogramBase=0,b.lineIndex=0,b.lineColor=TradingView.generateColor(this._source.properties().color.value(),10),b.lineStyle=CanvasEx.LINESTYLE_SOLID,b.lineWidth=2,b.hittest=new d(d.MOVEPOINT),c.append(new p(b)),this.isAnchorsRequired()&&c.append(this.createLineAnchor({points:this._points})),c}return c=new u,this._points.length<2?c:(S=this._points[0],T=this._points[1],C=Math.min(S.x,T.x),x=Math.max(S.x,T.x),
P={},P.points=[S],P.color="#808080",P.linewidth=1,P.linestyle=CanvasEx.LINESTYLE_SOLID,c.append(new a(P)),L={},L.points=[T],L.color="#808080",L.linewidth=1,L.linestyle=CanvasEx.LINESTYLE_SOLID,c.append(new a(L)),k={points:[S,T],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:"#808080",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,extendleft:!1,extendright:!1,leftend:r.LINEEND_NORMAL,rightend:r.LINEEND_NORMAL},c.append(new h(k)),c)},o.prototype.update=function(){s.prototype.update.call(this),this._invalidated=!0},o.prototype.updateImpl=function(){var t,i,o,n,s,r,a,l,h,c,d,p,u,_,f,g,m,v,y,w;!this._source.priceScale()||this._source.priceScale().isEmpty()||this._points.length<2||(this._source._pattern&&this._source._pattern.length>0&&2==this._source.points().length?(t=this._source.priceScale(),i=this._source._pattern,o=this._source.firstPatternPrice(),n=this._source.lastPatternPrice(),s=this._source.points()[0].price,r=this._source.points()[1].price,a=this._source.pressCoeff(),t=this._source.priceScale(),l=this._source.ownerSource().firstValue(),h=t.priceRange(),t.isPercent()?(d=h.convertToPercent(o,l),c=t.priceToCoordinate(d)):c=t.priceToCoordinate(o),p=function(e){var i,n=(e-o)*a+o;return t.isPercent()&&(n=h.convertToPercent(n,l)),i=t.priceToCoordinate(n)-c},u=parseInt(this._source.properties().mode.value()),_=this._source.points()[0].index,f=this._source.points()[1].index,g=_>f?1:0,m=this._points[g],v=m.x,y=Math.abs((this._points[0].x-this._points[1].x)/(this._source._pattern.length-1)),w={0:function(t){return{high:p(t[TradingView.HIGH_PLOT]),low:p(t[TradingView.LOW_PLOT])}},1:function(t,i){return new e.Point(v+i*y,p(t[TradingView.CLOSE_PLOT])+m.y)},2:function(t){return{open:p(t[TradingView.OPEN_PLOT]),close:p(t[TradingView.CLOSE_PLOT])}},3:function(t,i){return new e.Point(v+i*y,p(t[TradingView.OPEN_PLOT])+m.y)},4:function(t,i){return new e.Point(v+i*y,p(t[TradingView.HIGH_PLOT])+m.y)},5:function(t,i){return new e.Point(v+i*y,p(t[TradingView.LOW_PLOT])+m.y)},6:function(t,i){return new e.Point(v+i*y,p((t[TradingView.HIGH_PLOT]+t[TradingView.LOW_PLOT])/2)+m.y)}},this._pattern=this._source._pattern.map(w[u])):delete this._pattern)},inherit(n,r),n.version=2,n.BARS_MODE=0,n.LINE_MODE=1,n.OPENCLOSE_MODE=2,n.LINEOPEN_MODE=3,n.LINEHIGH_MODE=4,n.LINELOW_MODE=5,n.LINEHL2_MODE=6,n.prototype.onModeChanged=function(){var t=this.patternPriceDiff();t*=this._pressCoeff,this._points[1].price=this._timePoint[1].price=this._points[0].price+t},n.prototype.additionalActions=function(t){var e,i,o=new c({checked:this.properties().mirrored.value(),checkable:!0,text:$.t("Mirrored"),callbackContext:{target:this}}),n=new c({checked:this.properties().flipped.value(),checkable:!0,text:$.t("Flipped"),callbackContext:{target:this}});return o.callbacks().subscribe(null,function(e){var i=e.callbackContext(),o=i.target;t.setProperty(o.properties().mirrored,!o.properties().mirrored.value(),"Bats Pattern Mirroring"),o.updateAllViews(),o._model.updateSource(o)}),n.callbacks().subscribe(null,function(e){var i=e.callbackContext(),o=i.target;t.setProperty(o.properties().flipped,!o.properties().flipped.value(),"Bats Pattern Flipping"),o.updateAllViews(),o._model.updateSource(o)}),e=new c({checkable:!0,text:$.t("Restore Size")}),i=this,e.callbacks().subscribe(null,function(e){var o=i.points()[0],n=i.patternPriceDiff(),s=o.price+n,r=o.index+i._pattern.length-1;t.startChangingLinetool(i,{price:s,index:r},1,{}),t.changeLinePoint({price:s,index:r},{}),t.endChangingLinetool()}),[o,n,e]},n.prototype.pointsCount=function(){return 2},n.prototype.state=function(t){var e=r.prototype.state.call(this,t);return e.pattern=this._pattern,e},n.prototype.restoreData=function(t){t.pattern&&(this._pattern=t.pattern)},n.prototype.title=function(){return"Bars Pattern"},n.prototype.cloneData=function(t){this._pattern=TradingView.clone(t._pattern)},n.prototype.mirror=function(){var t,e,i,o,n,s=this._pattern,r=s[0][TradingView.HIGH_PLOT],a=(s[s.length-1][TradingView.LOW_PLOT],Math.min(s[0][TradingView.LOW_PLOT],s[0][TradingView.HIGH_PLOT])),l=Math.max(s[0][TradingView.LOW_PLOT],s[0][TradingView.HIGH_PLOT]);for(t=1;t<s.length;t++)a=Math.min(a,s[t][TradingView.LOW_PLOT]),l=Math.max(l,s[t][TradingView.HIGH_PLOT]);if(a<l)for(e=(a+l)/2,i=function(t){var i=t-e,o=e-i;return o},t=0;t<s.length;t++)s[t][TradingView.HIGH_PLOT]=i(s[t][TradingView.HIGH_PLOT]),s[t][TradingView.LOW_PLOT]=i(s[t][TradingView.LOW_PLOT]),s[t][TradingView.OPEN_PLOT]=i(s[t][TradingView.OPEN_PLOT]),s[t][TradingView.CLOSE_PLOT]=i(s[t][TradingView.CLOSE_PLOT]);o=s[0][TradingView.HIGH_PLOT]-r,n=s[s.length-1][TradingView.LOW_PLOT]-s[0][TradingView.HIGH_PLOT],this._points[0].price+=o,this._points[1].price=this._points[0].price+n,this.updateAllViews()},n.prototype.flip=function(){var t,e,i;for(this._points[0].price=this._points[1].price,t=0;t<this._pattern.length/2;t++)e=this._pattern[t],this._pattern[t]=this._pattern[this._pattern.length-t-1],this._pattern[this._pattern.length-t-1]=e;i=this._pattern[this._pattern.length-1][TradingView.LOW_PLOT]-this._pattern[0][TradingView.HIGH_PLOT],this._points[1].price=this._points[0].price+i,this.updateAllViews()},n.prototype.firstPatternPrice=function(){var t,e,i,o=parseInt(this.properties().mode.value(),10);return o==n.LINEHL2_MODE?t=(this._pattern[0][TradingView.HIGH_PLOT]+this._pattern[0][TradingView.LOW_PLOT])/2:(e={0:TradingView.HIGH_PLOT,1:TradingView.CLOSE_PLOT,2:TradingView.OPEN_PLOT,3:TradingView.OPEN_PLOT,4:TradingView.HIGH_PLOT,5:TradingView.LOW_PLOT},i=e[o],t=this._pattern[0][i])},n.prototype.lastPatternPrice=function(){var t,e,i,o=parseInt(this.properties().mode.value(),10);return o==n.LINEHL2_MODE?t=(this._pattern[this._pattern.length-1][TradingView.HIGH_PLOT]+this._pattern[this._pattern.length-1][TradingView.LOW_PLOT])/2:(e={0:TradingView.LOW_PLOT,1:TradingView.CLOSE_PLOT,2:TradingView.CLOSE_PLOT,3:TradingView.OPEN_PLOT,4:TradingView.HIGH_PLOT,5:TradingView.LOW_PLOT},i=e[o],t=this._pattern[this._pattern.length-1][i])},n.prototype.patternPriceDiff=function(){return this.lastPatternPrice()-this.firstPatternPrice()},n.prototype.pressCoeff=function(){var t=this.patternPriceDiff(),e=this.points()[0].price,i=this.points()[1].price,o=i-e,n=o/t;return this._pressCoeff=n,n},n.prototype.addPoint=function(t,e){var i,o,s,a,l,h,c,d,p,u,_=this._model.mainSeries(),f=_.nearestIndex(t.index,TradingView.SEARCH_NEAREST_RIGHT);if(this.properties().mode.value()==n.BARS_MODE?t.price=_.bars().valueAt(f)[TradingView.HIGH_PLOT]:t.price=_.bars().valueAt(f)[TradingView.CLOSE_PLOT],i=this.priceScale().priceRange().length(),t.price+=.05*i,o=_.priceScale(),o.isPercent()&&(s=_.firstValue(),t.price=o.priceRange().convertToPercent(t.price,s)),a=r.prototype.addPoint.call(this,t,e,!0)){for(l=Math.min(this.points()[0].index,this.points()[1].index),h=Math.max(this.points()[0].index,this.points()[1].index),f=this._model.mainSeries().nearestIndex(l,TradingView.SEARCH_NEAREST_RIGHT),c=this._model.mainSeries().nearestIndex(h,TradingView.SEARCH_NEAREST_LEFT),this.points()[0].index>this.points()[1].index&&(this._points[0].price=this._points[1].price),this._pattern=[],d=f;d<=c;d++)p=this._model.mainSeries().data().valueAt(d),this._pattern.push(TradingView.clone(p));this._pattern.length>0&&(u=this.patternPriceDiff(),this._points[1].price=this._points[0].price+u,this._points[1].index=this._points[0].index+(c-f),this.normalizePoints(),this.createServerPoints())}return a},n.prototype.setPoint=function(t,e,i){var o=this._points[0].price-this._points[1].price;1==t&&e.index<=this._points[0].index&&(e.index=this._points[0].index+1),0===t&&e.index>=this._points[1].index&&(e.index=this._points[1].index-1),r.prototype.setPoint.call(this,t,e,i),1==t?this._points[0].price=this._points[1].price+o:this._points[1].price=this._points[0].price-o},n.prototype.migrateVersion=function(t,e,i){if(1==t&&this._pattern.length>0){var o=this.patternPriceDiff();2==this._timePoint.length&&(this._timePoint[1].price=this._timePoint[0].price+o),2==this._points.length&&(this._points[1].price=this._points[0].price+o)}},t.exports=n}).call(e,i(21))},function(t,e,i){(function(e){"use strict";function o(t,e){r.call(this,t,e),this._rendererCache={},this._invalidated=!0}function n(t,e){this._constructor="LineToolTrendBasedFibTime";var i=e?e:new this.createPropertiesObject("linetooltrendbasedfibtime");a.call(this,t,new o(this,t),i),this.version=n.version}var s=i(137).VertLineRenderer,r=i(97),a=i(67).LineDataSource,l=i(118),h=i(98).TextRenderer,c=i(120).RectangleTransparencyRenderer,d=i(122).TrendLineRenderer,p=i(88),u=i(92);inherit(o,r),o.prototype.update=function(){this._invalidated=!0},o.prototype.updateImpl=function(){var t,e,i,o,n,s,a,l,h,c,d,p,u,_,f;if(r.prototype.update.call(this),!(this._source.points().length<3)&&this._source.priceScale()&&!this._source.priceScale().isEmpty()&&!this._model.timeScale().isEmpty()&&(t=this._source.points()[0],e=this._source.points()[1],i=this._source.points()[2],this._levels=[],e.index!=t.index&&(o=e.index-t.index,n=this._source.properties(),s=i.index,a=this._model.timeScale().visibleBars(),!a.isEmpty())))for(l=1;l<=11;l++)h="level"+l,c=n[h],c.visible.value()&&(d=c.coeff.value(),p=c.color.value(),u=Math.round(s+d*o),_=this._model.timeScale().indexToCoordinate(u),f={x:_,coeff:d,color:p,linewidth:c.linewidth.value(),linestyle:c.linestyle.value(),index:l},n.showCoeffs.value()&&(f.text=d,f.y=this._source.priceScale().height()),this._levels.push(f))},o.prototype.renderer=function(){var t,i,o,n,r,l,_,f,g,m,v,y,w,b,S,T,C,x;if(this._invalidated&&(this.updateImpl(),this._invalidated=!1),t=new u,this._points.length<2)return t;if(i=this._points[0],o=this._points[1],n=this._source.properties(),n.trendline.visible.value()&&(r={points:[i,o],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:n.trendline.color.value(),linewidth:n.trendline.linewidth.value(),linestyle:n.trendline.linestyle.value(),extendleft:!1,extendright:!1,leftend:a.LINEEND_NORMAL,rightend:a.LINEEND_NORMAL},t.append(new d(r))),this._points.length<3)return this.addAnchors(t),t;for(l=this._points[2],n.trendline.visible.value()&&(r={points:[o,l],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:n.trendline.color.value(),linewidth:n.trendline.linewidth.value(),linestyle:n.trendline.linestyle.value(),extendleft:!1,extendright:!1,leftend:a.LINEEND_NORMAL,rightend:a.LINEEND_NORMAL},t.append(new d(r))),_=n.fillBackground.value(),f=n.transparency.value(),g=0;g<this._levels.length;g++){if(g>0&&_&&(m=this._levels[g-1],i=new e.Point(m.x,0),o=new e.Point(this._levels[g].x,this._source.priceScale().height()),v={},v.points=[i,o],v.color=this._levels[g].color,v.linewidth=0,v.backcolor=this._levels[g].color,v.fillBackground=!0,v.transparency=f,t.append(new c(v))),void 0!==this._levels[g].text){switch(S=n.horzLabelsAlign.value(),S="left"==S?"right":"right"==S?"left":"center"){case"left":w=3;break;case"center":w=0;break;case"right":w=-3}switch(n.vertLabelsAlign.value()){case"top":y=new e.Point(this._levels[g].x,0),b=5;break;case"middle":y=new e.Point(this._levels[g].x,.5*this._levels[g].y),b=0;break;case"bottom":y=new e.Point(this._levels[g].x,this._levels[g].y),b=-10}T={points:[y],text:""+this._levels[g].text,color:this._levels[g].color,vertAlign:"middle",horzAlign:S,font:n.font.value(),offsetX:w,offsetY:b,fontsize:12},t.append(new h(T,this._rendererCache))}C={},C.points=[new e.Point(this._levels[g].x,0)],C.color=this._levels[g].color,C.linewidth=this._levels[g].linewidth,C.linestyle=this._levels[g].linestyle,x=new p(p.MOVEPOINT,null,this._levels[g].index),t.append(new s(C,x))}return this.addAnchors(t),t},inherit(n,a),n.version=1,n.prototype.pointsCount=function(){return 3},n.prototype.title=function(){return"Trend-Based Fib Time"},n.prototype.migrateVersion=function(t,e,i){},n.prototype.processErase=function(t,e){var i="level"+e,o=this.properties()[i].visible;t.setProperty(o,!1,"Erase level line")},n.prototype.createPropertiesObject=function(t,e,i){return new l(t,e,i,{range:[1,11]})},t.exports=n}).call(e,i(21))},function(t,e,i){(function(e){"use strict";function o(t,e){s.call(this,t,e),this._levels=[],this._rendererCache={},this._invalidated=!0}function n(t,e){this._constructor="LineToolFibTimeZone";var i=e?e:new this.createPropertiesObject("linetoolfibtimezone");r.call(this,t,new o(this,t),i),this.version=n.version}var s=i(97),r=i(67).LineDataSource,a=i(137).VertLineRenderer,l=i(118),h=i(98).TextRenderer,c=i(120).RectangleTransparencyRenderer,d=i(122).TrendLineRenderer,p=i(88),u=i(92);inherit(o,s),o.prototype.update=function(){this._invalidated=!0},o.prototype.updateImpl=function(){var t,e,i,o,n,r,a,l,h,c,d;if(s.prototype.update.call(this),!(this._source.points().length<1)&&this._source.priceScale()&&!this._source.priceScale().isEmpty()&&!this._model.timeScale().isEmpty()&&(t=this._source.points()[0],2===this._source.points().length&&(e=this._source.points()[1]),i=this._source.properties(),o=this._source.points()[0].index,n=this._model.timeScale().visibleBars(),!n.isEmpty()))for(this._levels=[],r=e?e.index-t.index:1,a=1;a<=11;a++)l=i["level"+a],l.visible.value()&&(h=Math.round(o+l.coeff.value()*r),c=this._model.timeScale().indexToCoordinate(h),d={index:a,x:c,color:l.color.value(),width:l.linewidth.value(),style:l.linestyle.value()},i.showLabels.value()&&(d.text=l.coeff.value(),d.y=this._source.priceScale().height()),this._levels.push(d))},o.prototype.renderer=function(){var t,i,o,n,s,l,_,f,g,m,v,y,w,b,S;for(this._invalidated&&(this.updateImpl(),this._invalidated=!1),t=new u,i=this._source.properties(),o=0;o<this._levels.length;o++)if(n={},n.points=[new e.Point(this._levels[o].x,0)],n.color=this._levels[o].color,n.linewidth=this._levels[o].width,n.linestyle=this._levels[o].style,s=new p(p.MOVEPOINT,null,this._levels[o].index),t.append(new a(n,s)),o>0&&i.fillBackground.value()&&(l=this._levels[o-1],_=new e.Point(this._levels[o].x,0),f=new e.Point(l.x,this._source.priceScale().height()),g={},g.points=[_,f],g.color=this._levels[o].color,g.linewidth=0,g.backcolor=this._levels[o].color,g.fillBackground=!0,g.transparency=i.transparency.value(),t.append(new c(g))),void 0!==this._levels[o].text){switch(w=i.horzLabelsAlign.value(),w="left"==w?"right":"right"==w?"left":"center"){case"left":v=3;break;case"center":v=0;break;case"right":v=-3}switch(i.vertLabelsAlign.value()){case"top":m=new e.Point(this._levels[o].x,0),y=5;break;case"middle":m=new e.Point(this._levels[o].x,.5*this._levels[o].y),y=0;break;case"bottom":m=new e.Point(this._levels[o].x,this._levels[o].y),y=-10}b={points:[m],text:""+this._levels[o].text,color:n.color,vertAlign:"middle",horzAlign:w,font:i.font.value(),offsetX:v,offsetY:y,fontsize:12},t.append(new h(b,this._rendererCache))}return 2===this._points.length&&(S={points:[this._points[0],this._points[1]],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:i.trendline.color.value(),linewidth:i.trendline.linewidth.value(),linestyle:i.trendline.linestyle.value(),extendleft:!1,extendright:!1,leftend:r.LINEEND_NORMAL,rightend:r.LINEEND_NORMAL},t.append(new d(S))),this.isAnchorsRequired()&&(2===this._source.points().length?t.append(this.createLineAnchor({points:this._points})):this._points.length>0&&t.append(this.createLineAnchor({points:[new e.Point(this._points[0].x,this._source.priceScale().height()/2)],hittestResult:p.MOVEPOINT}))),t},inherit(n,r),n.version=2,n.prototype.migrateVersion=function(t,e,i){var o;if(1===t){for(i.properties.level1.color.setValue(i.properties.baselinecolor.value()),o=2;o<=11;o++)i.properties["level"+o].color.setValue(i.properties.linecolor.value());for(o=1;o<=11;o++)i.properties["level"+o].linewidth.setValue(i.properties.linewidth.value()),i.properties["level"+o].linestyle.setValue(i.properties.linestyle.value())}},n.prototype.pointsCount=function(){return 2},n.prototype.title=function(){return"Fib Time Zone"},n.prototype.processErase=function(t,e){var i="level"+e,o=this.properties()[i].visible;t.setProperty(o,!1,"Erase level line")},n.prototype.createPropertiesObject=function(t,e,i){return new l(t,e,i,{range:[1,11]})},t.exports=n}).call(e,i(21))},function(t,e,i){(function(e){"use strict";function o(t,e){s.call(this,t,e),this._lines=[],this._invalidated=!0}function n(t,e){this._constructor="LineToolCircleLines";var i=e?e:new d("linetoolcirclelines");r.call(this,t,new o(this,t),i)}var s=i(97),r=i(67).LineDataSource,a=i(137).VertLineRenderer,l=i(122).TrendLineRenderer,h=i(88),c=i(92),d=i(73).DefaultProperty;inherit(o,s),o.prototype.update=function(){this._invalidated=!0},o.prototype.updateImpl=function(){var t,e,i,o,n,r,a;if(s.prototype.update.call(this),!(this._source.points().length<2)&&(t=this._model.timeScale(),this._source.priceScale()&&!this._source.priceScale().isEmpty()&&!t.isEmpty()&&(e=this._source.points()[0],i=this._source.points()[1],o=i?i.index-e.index:1,this._lines=[],0!==o)))if(n=t.visibleBars(),o>0)for(r=e.index,a=r;a<=n.lastBar();a+=o)this._lines.push({x:t.indexToCoordinate(a)});else for(r=e.index,a=r;a>=n.firstBar();a+=o)this._lines.push({x:t.indexToCoordinate(a)})},o.prototype.renderer=function(){var t,i,o,n,s,d,p,u;if(this._invalidated&&(this.updateImpl(),this._invalidated=!1),t=new c,this._points.length<2)return t;for(i=this._points[0],o=this._points[1],n=this._source.properties(),s={points:[i,o],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:n.trendline.color.value(),linewidth:n.trendline.linewidth.value(),linestyle:n.trendline.linestyle.value(),extendleft:!1,extendright:!1,leftend:r.LINEEND_NORMAL,rightend:r.LINEEND_NORMAL},t.append(new l(s)),n=this._source.properties(),d=0;d<this._lines.length;d++)p={points:[new e.Point(this._lines[d].x,0)],color:n.linecolor.value(),linewidth:n.linewidth.value(),linestyle:n.linestyle.value()},t.append(new a(p));return this.isAnchorsRequired()&&(2===this._source.points().length?(u=[].concat(this._points),t.append(this.createLineAnchor({points:u}))):t.append(this.createLineAnchor({points:[new e.Point(this._points[0].x,this._source.priceScale().height()/2)],hittestResult:h.MOVEPOINT}))),t},inherit(n,r),n.prototype.pointsCount=function(){return 2},n.prototype.title=function(){return"Cyclic Lines"},t.exports=n}).call(e,i(21))},function(t,e,i){(function(e){"use strict";function o(t,e){r.call(this,t,e),this._rendererCache={},this._invalidated=!0}function n(t,e){this._constructor="LineToolDateRange";var i=e?e:new d("linetooldaterange");s.call(this,t,new o(this,t),i)}var s=i(67).LineDataSource,r=i(97),a=i(98).TextRenderer,l=i(120).RectangleRenderer,h=i(122).TrendLineRenderer,c=i(92),d=i(73).DefaultProperty,p=i(75).TimeSpanFormatter;inherit(o,r),o.prototype.update=function(){this._invalidated=!0},o.prototype.updateImpl=function(){r.prototype.update.call(this),this._invalidated=!1},o.prototype.renderer=function(){var t,i,o,n,r,d,u,_,f,g,m,v,y,w,b,S,T,C,x,P,L,k,E,I,A;return this._invalidated&&this.updateImpl(),t=new c,this._points.length<2||this._source.points().length<2?t:(i=this._source.properties(),i.fillBackground&&i.fillBackground.value()&&(o={},o.points=this._points,o.color="white",o.linewidth=0,o.backcolor=i.backgroundColor.value(),o.fillBackground=!0,o.transparency=i.backgroundTransparency.value(),t.append(new l(o))),n=this,r=function(e,i){var o={};o.points=[e,i],o.width=n._model.timeScale().width(),o.height=n._source.priceScale().height(),o.color=n._source.properties().linecolor.value(),o.linewidth=n._source.properties().linewidth.value(),o.linestyle=CanvasEx.LINESTYLE_SOLID,o.extendleft=!1,o.extendright=!1,o.leftend=s.LINEEND_NORMAL,o.rightend=s.LINEEND_NORMAL,t.append(new h(o))},d=this._points[0],u=this._points[1],r(d,new e.Point(d.x,u.y)),r(new e.Point(u.x,d.y),u),_=(d.y+u.y)/2,f=new e.Point(d.x,_),g=new e.Point(u.x,_),o={},o.points=[f,g],o.width=n._model.timeScale().width(),o.height=n._source.priceScale().height(),o.color=n._source.properties().linecolor.value(),o.linewidth=n._source.properties().linewidth.value(),o.linestyle=CanvasEx.LINESTYLE_DASHED,o.extendleft=!1,o.extendright=!1,o.leftend=s.LINEEND_NORMAL,o.rightend=s.LINEEND_ARROW,t.append(new h(o)),m=this._source.points()[0].index,v=this._source.points()[1].index,y=v-m,w=this._model.timeScale().indexToUserTime(m),b=this._model.timeScale().indexToUserTime(v),S="",w&&b&&(T=(b.valueOf()-w.valueOf())/1e3,S=", "+(new p).format(T)),C=$.t("{0} bars").format(y)+S,o={},x={x:0,y:10},o.text=C,o.color=i.textcolor.value(),o.height=n._source.priceScale().height(),o.font=i.font.value(),o.offsetX=x.x,o.offsetY=x.y,o.vertAlign="middle",o.horzAlign="center",o.fontsize=i.fontsize.value(),o.backgroundRoundRect=4,o.backgroundHorzInflate=.4*i.fontsize.value(),o.backgroundVertInflate=.2*i.fontsize.value(),i.fillLabelBackground&&i.fillLabelBackground.value()&&(o.backgroundColor=i.labelBackgroundColor.value(),o.backgroundTransparency=1-i.labelBackgroundTransparency.value()/100||0),i.drawBorder&&i.drawBorder.value()&&(o.borderColor=i.borderColor.value()),P=.5*(d.x+u.x),L=u.y,k=new e.Point(P,L),E=new a(o,this._rendererCache),I=E.measure(),A={x:P+o.backgroundHorzInflate+I.textBgPadding-I.width/I.textBgPadding,y:d.y>u.y?k.y-I.height-2*I.textBgPadding-x.y>0?L-I.height-x.y-2*I.textBgPadding:x.y-2*I.textBgPadding:k.y+I.height+I.textBgPadding+x.y>o.height?o.height-I.height-x.y:L+I.textBgPadding},E.setPoints([new e.Point(P,A.y)]),t.append(E),this.addAnchors(t),t)},inherit(n,s),n.prototype.pointsCount=function(){return 2},n.prototype.title=function(){return"Date Range"},t.exports=n}).call(e,i(21))},function(t,e,i){(function(e){"use strict";function o(t,e){s.call(this,t,e),this._rendererCache={},this._invalidated=!0,this._percentageFormatter=new p}function n(t,e){this._constructor="LineToolPriceRange";var i=e?e:new d("linetoolpricerange");r.call(this,t,new o(this,t),i)}var s=i(97),r=i(67).LineDataSource,a=i(98).TextRenderer,l=i(120).RectangleRenderer,h=i(122).TrendLineRenderer,c=i(92),d=i(73).DefaultProperty,p=i(75).PercentageFormatter;inherit(o,s),o.prototype.update=function(){this._invalidated=!0},o.prototype.updateImpl=function(){s.prototype.update.call(this)},o.prototype.renderer=function(){var t,i,o,n,s,d,p,u,_,f,g,m,v,y,w,b,S,T,C,x,P,L,k;return this._invalidated&&(this.updateImpl(),this._invalidated=!1),t=new c,this._points.length<2||this._source.points().length<2?t:(i=this._source.properties(),i.fillBackground&&i.fillBackground.value()&&(s={},s.points=this._points,s.color="white",s.linewidth=0,s.backcolor=i.backgroundColor.value(),s.fillBackground=!0,s.transparency=i.backgroundTransparency.value(),t.append(new l(s))),d=this,p=function(e,i){var o={};o.points=[e,i],o.width=d._model.timeScale().width(),o.height=d._source.priceScale().height(),o.color=d._source.properties().linecolor.value(),o.linewidth=d._source.properties().linewidth.value(),o.linestyle=CanvasEx.LINESTYLE_SOLID,o.extendleft=!1,o.extendright=!1,o.leftend=r.LINEEND_NORMAL,o.rightend=r.LINEEND_NORMAL,t.append(new h(o))},o=this._points[0],n=this._points[1],n=new e.Point(n.x,o.y),p(o,n),o=this._points[0],n=this._points[1],o=new e.Point(o.x,n.y),p(o,n),o=this._points[0],n=this._points[1],u=(o.x+n.x)/2,_=new e.Point(u,o.y),f=new e.Point(u,n.y),s={},s.points=[_,f],s.width=d._model.timeScale().width(),s.height=d._source.priceScale().height(),s.color=d._source.properties().linecolor.value(),s.linewidth=d._source.properties().linewidth.value(),s.linestyle=CanvasEx.LINESTYLE_DASHED,s.extendleft=!1,s.extendright=!1,s.leftend=r.LINEEND_NORMAL,s.rightend=r.LINEEND_ARROW,t.append(new h(s)),g=this._source.points()[0].price,m=this._source.points()[1].price,v=m-g,y=100*v/g,w=this._source.priceScale().formatter().format(v)+" ("+this._percentageFormatter.format(y)+")",s={},m>g?(b=n.clone(),b.y-=2*i.fontsize.value(),b.x=.5*(o.x+n.x),s.points=[b]):(b=n.clone(),b.x=.5*(o.x+n.x),b.y+=.7*i.fontsize.value(),s.points=[b]),S={x:0,y:10},s.text=w,s.color=i.textcolor.value(),s.height=d._source.priceScale().height(),s.font=i.font.value(),s.offsetX=S.x,s.offsetY=S.y,s.vertAlign="middle",s.horzAlign="center",s.fontsize=i.fontsize.value(),s.backgroundRoundRect=4,s.backgroundHorzInflate=.4*i.fontsize.value(),s.backgroundVertInflate=.2*i.fontsize.value(),i.fillLabelBackground&&i.fillLabelBackground.value()&&(s.backgroundColor=i.labelBackgroundColor.value(),s.backgroundTransparency=1-i.labelBackgroundTransparency.value()/100||0),i.drawBorder&&i.drawBorder.value()&&(s.borderColor=i.borderColor.value()),T=.5*(o.x+n.x),C=n.y,x=new e.Point(T,C),P=new a(s,this._rendererCache),L=P.measure(),k={x:T+s.backgroundHorzInflate+L.textBgPadding-L.width/L.textBgPadding,y:o.y>n.y?x.y-L.height-2*L.textBgPadding-S.y>0?C-L.height-S.y-2*L.textBgPadding:S.y-2*L.textBgPadding:x.y+L.height+L.textBgPadding+S.y>s.height?s.height-L.height-S.y:C+L.textBgPadding},P.setPoints([new e.Point(T,k.y)]),t.append(P),this.addAnchors(t),t)},inherit(n,r),n.prototype.pointsCount=function(){return 2},n.prototype.title=function(){return"Price Range"},t.exports=n}).call(e,i(21))},function(t,e,i){(function(e){"use strict";function o(t,e){s.call(this,t,e),this._rendererCache={},this._percentageFormatter=new u,this._invalidated=!0}function n(t,e){this._constructor="LineToolDateAndPriceRange";var i=e?e:new d("linetooldateandpricerange");r.call(this,t,new o(this,t),i)}var s=i(97),r=i(67).LineDataSource,a=i(98).TextRenderer,l=i(120).RectangleRenderer,h=i(122).TrendLineRenderer,c=i(92),d=i(73).DefaultProperty,p=i(75),u=p.PercentageFormatter,_=p.TimeSpanFormatter;inherit(o,s),o.prototype.update=function(){this._invalidated=!0},o.prototype.updateImpl=function(){s.prototype.update.call(this),this._invalidated=!1},o.prototype.renderer=function(){var t,i,o,n,s,d,p,u,f,g,m,v,y,w,b,S,T,C,x,P,L,k,E,I,A,V,M,D,B,O,R;return this._invalidated&&this.updateImpl(),t=new c,this._points.length<2||this._source.points().length<2?t:(i=this._source.properties(),i.fillBackground&&i.fillBackground.value()&&(o={},o.points=this._points,o.color="white",o.linewidth=0,o.backcolor=i.backgroundColor.value(),o.fillBackground=!0,o.transparency=i.backgroundTransparency.value(),t.append(new l(o))),n=this,s=function(e,i){var o={};o.points=[e,i],o.width=n._model.timeScale().width(),o.height=n._source.priceScale().height(),o.color=n._source.properties().linecolor.value(),o.linewidth=n._source.properties().linewidth.value(),o.linestyle=CanvasEx.LINESTYLE_SOLID,o.extendleft=!1,o.extendright=!1,o.leftend=r.LINEEND_NORMAL,o.rightend=r.LINEEND_NORMAL,t.append(new h(o))},d=this._points[0],p=this._points[1],s(d,new e.Point(p.x,d.y)),s(new e.Point(d.x,p.y),p),s(d,new e.Point(d.x,p.y)),s(new e.Point(p.x,d.y),p),u=(d.y+p.y)/2,f=new e.Point(d.x,u),g=new e.Point(p.x,u),o={},o.points=[f,g],o.width=n._model.timeScale().width(),o.height=n._source.priceScale().height(),o.color=n._source.properties().linecolor.value(),o.linewidth=n._source.properties().linewidth.value(),o.linestyle=CanvasEx.LINESTYLE_DASHED,o.extendleft=!1,o.extendright=!1,o.leftend=r.LINEEND_NORMAL,o.rightend=r.LINEEND_ARROW,t.append(new h(o)),d=this._points[0],p=this._points[1],m=(d.x+p.x)/2,f=new e.Point(m,d.y),g=new e.Point(m,p.y),o={},o.points=[f,g],o.width=n._model.timeScale().width(),o.height=n._source.priceScale().height(),o.color=n._source.properties().linecolor.value(),o.linewidth=n._source.properties().linewidth.value(),o.linestyle=CanvasEx.LINESTYLE_DASHED,o.extendleft=!1,o.extendright=!1,o.leftend=r.LINEEND_NORMAL,o.rightend=r.LINEEND_ARROW,t.append(new h(o)),v=this._source.points()[0].price,y=this._source.points()[1].price,w=y-v,b=100*w/v,S=this._source.points()[0].index,T=this._source.points()[1].index,C=T-S,x=this._model.timeScale().indexToUserTime(S),P=this._model.timeScale().indexToUserTime(T),L="",x&&P&&(k=(P.valueOf()-x.valueOf())/1e3,L=", "+(new _).format(k)),E=this._source.priceScale().formatter().format(w)+" ("+this._percentageFormatter.format(Math.round(100*b)/100)+")\n"+$.t("{0} bars").format(C)+L,o={},y>v?(I=p.clone(),I.y-=2*i.fontsize.value(),I.x=.5*(d.x+p.x),o.points=[I]):(I=p.clone(),I.x=.5*(d.x+p.x),I.y+=.7*i.fontsize.value(),o.points=[I]),A={x:0,y:10},o.text=E,o.color=i.textcolor.value(),o.height=n._source.priceScale().height(),o.font=i.font.value(),o.offsetX=A.x,o.offsetY=A.y,o.padding=5,o.vertAlign="middle",o.horzAlign="center",o.fontsize=i.fontsize.value(),o.backgroundRoundRect=4,o.backgroundHorzInflate=.4*i.fontsize.value(),o.backgroundVertInflate=.2*i.fontsize.value(),i.fillLabelBackground&&i.fillLabelBackground.value()&&(o.backgroundColor=i.labelBackgroundColor.value(),o.backgroundTransparency=1-i.labelBackgroundTransparency.value()/100||0),i.drawBorder&&i.drawBorder.value()&&(o.borderColor=i.borderColor.value()),V=.5*(d.x+p.x),M=p.y,D=new e.Point(V,M),B=new a(o,this._rendererCache),O=B.measure(),R={x:V+o.backgroundHorzInflate+O.textBgPadding-O.width/O.textBgPadding,y:d.y>p.y?D.y-O.height-2*O.textBgPadding-A.y>0?M-O.height-A.y+O.textBgPadding:A.y-2*O.textBgPadding:D.y+O.height+O.textBgPadding+A.y>o.height?o.height-O.height-A.y:M+O.textBgPadding},window.t1=n._source.priceScale().height(),window.t2=D.y+O.height+2*O.textBgPadding+A.y,B.setPoints([new e.Point(V,R.y)]),t.append(B),this.addAnchors(t),t)},inherit(n,r),n.prototype.pointsCount=function(){return 2},n.prototype.title=function(){return"Date and Price Range"},t.exports=n}).call(e,i(21))},function(t,e,i){(function(e,o){"use strict";function n(t){this._data=t}function s(t,e){a.call(this,t,e),this._label=null,this._rendererCache={},this._invalidated=!0}function r(t,e){this._constructor="LineToolTrendAngleLine";var i=e?e:new f("linetooltrendangle");l.call(this,t,new s(this,t),i),this._properties.addProperty("angle"),this._properties.angle=new r.AngleProperty(this)}var a=i(97),l=i(67).LineDataSource,h=i(122),c=h.TrendLineStatsRenderer,d=h.LineToolTrendLine,p=i(98).TextRenderer,u=i(122).TrendLineRenderer,_=i(92),f=i(73).DefaultProperty,g=i(75),m=g.PercentageFormatter;n.prototype.hitTest=function(){return null},n.prototype.draw=function(t){var e,i;t.save(),t.translate(this._data.point.x,this._data.point.y),t.strokeStyle=this._data.color,e=[1,2],"function"==typeof t.setLineDash?t.setLineDash(e):void 0!==t.mozDash?t.mozDash=e:void 0!==t.webkitLineDash&&(t.webkitLineDash=e),i=this._data.size,t.beginPath(),t.moveTo(0,0),t.lineTo(i,0),t.arc(0,0,i,0,-this._data.angle,this._data.angle>0),t.stroke(),t.restore()},inherit(s,a),s.prototype.update=function(){this._invalidated=!0},s.prototype.updateImpl=function(){var t,i,o,n,s,r,l,h,c,d,p,u,_,f;a.prototype.update.call(this),this._points.length>0&&void 0!==this._source._angle&&(t=this._points[0],i=Math.cos(this._source._angle),o=-Math.sin(this._source._angle),n=new e.Point(i,o),this._secondPoint=t.addScaled(n,this._source._distance),this._secondPoint.data=1),this._label=null,this._source.points().length<2||(t=this._source.points()[0],s=this._source.points()[1],r=[],this._source.properties().showPriceRange.value()&&this._source.priceScale()&&(c=s.price-t.price,d=c/t.price,l=this._source.priceScale().formatter().format(c)+" ("+(new m).format(100*d)+")",p=this._model.mainSeries().base(),p&&(u=Math.round(c*p),l+=", "+u),r.push("priceRange")),_=this._source.properties().showBarsRange.value(),_&&(h="",f=s.index-t.index,h+=$.t("{0} bars").format(f),r.push("barsRange")),this._label=[l,h].filter(function(t){return t}).join("\n")||null,this._icons=r)},s.prototype.renderer=function(){var t,e,i,o,s,r,a,h,f,g;return this._invalidated&&(this.updateImpl(),this._invalidated=!1),t=new _,e={},i=this.isAnchorsRequired(),o=i||this._source.properties().alwaysShowStats.value(),this._secondPoint&&this._points.length>0&&(e.points=[this._points[0],this._secondPoint],e.width=this._model.timeScale().width(),e.height=this._source.priceScale().height(),e.color=this._source.properties().linecolor.value(),e.linewidth=this._source.properties().linewidth.value(),e.linestyle=this._source.properties().linestyle.value(),e.extendleft=this._source.properties().extendLeft.value(),e.extendright=this._source.properties().extendRight.value(),e.leftend=l.LINEEND_NORMAL,e.rightend=l.LINEEND_NORMAL,
t.append(new u(e)),o&&this._label&&2==this._points.length&&(s={points:[this._secondPoint],text:this._label,color:this._source.properties().textcolor.value(),font:d.LABEL_FONT,fontsize:d.LABEL_FONTSIZE,lineSpacing:d.LABEL_LINESPACING,backgroundColor:d.LABEL_BGCOLOR,borderColor:d.LABEL_BORDERCOLOR,borderWidth:1,padding:d.LABEL_PADDING,paddingLeft:30,doNotAlignText:!0,icons:this._icons},r=d.LABEL_OFFSET,this._points[1].y<this._points[0].y?(s.vertAlign="bottom",s.offsetY=-r):s.offsetY=r,this._points[1].x<this._points[0].x?(s.horzAlign="right",s.offsetX=-r):s.offsetX=r,t.append(new c(s,this._rendererCache))),a={},a.point=this._points[0],a.angle=this._source._angle,a.color=this._source.properties().linecolor.value(),a.size=50,t.append(new n(a)),h=Math.round(180*a.angle/Math.PI)+"",f=this._points[0].clone(),f.x=f.x+50,g={points:[f],text:h,color:this._source.properties().textcolor.value(),horzAlign:"left",font:this._source.properties().font.value(),offsetX:5,offsetY:0,bold:this._source.properties().bold.value(),italic:this._source.properties().italic.value(),fontsize:this._source.properties().fontsize.value(),vertAlign:"middle"},t.append(new p(g,this._rendererCache))),!TradingView.printing&&this._source.hasAlert.value()&&!this._model.readOnly()&&e&&e.points&&e.points.length>=2&&this._source.getAlertIsActive(function(i){t.append(new TradingView.PaneRendererClockIcon({point1:e.points[0],point2:e.points[1],color:i?e.color:defaults("chartproperties.alertsProperties.drawingIcon.color")}))}),this._secondPoint&&this._points.length>0&&i&&t.append(this.createLineAnchor({points:[this._points[0],this._secondPoint]})),t},inherit(r,l),r.AngleProperty=function(t){o.call(this),this._lineSource=t},inherit(r.AngleProperty,o),r.AngleProperty.prototype.value=function(){var t=this._lineSource._angle,e=180*t/Math.PI;return Math.round(e)},r.AngleProperty.prototype.setValue=function(t){var i,o,n,s,r,a,l=t*Math.PI/180;this._lineSource._angle=l,i=this._lineSource.pointToScreenPoint(this._lineSource.points()[0])[0],o=Math.cos(this._lineSource._angle),n=-Math.sin(this._lineSource._angle),s=new e.Point(o,n),r=i.addScaled(s,this._lineSource._distance),a=this._lineSource.screenPointToPoint(r),this._lineSource._points[1]=a,this._lineSource._model.updateSource(this._lineSource),this._lineSource.updateAllViews(),this._lineSource._model.updateSource(this._lineSource)},r.prototype.pointsCount=function(){return 2},r.prototype.title=function(){return"Trend Angle"},r.prototype._calculateAngle=function(){var t,e=this.pointToScreenPoint(this.points()[0])[0],i=this.pointToScreenPoint(this.points()[1])[0],o=i.substract(e);o.length()>0?(o=o.normalized(),this._angle=Math.acos(o.x),o.y>0&&(this._angle=-this._angle),this._distance=i.substract(e).length()):delete this._angle,t=this.properties(),t.hasOwnProperty("angle")&&this.properties().angle.listeners().fire(this.properties().angle)},r.prototype.addPoint=function(t,e){var i=l.prototype.addPoint.call(this,t,e);return i&&this._calculateAngle(),i},r.prototype.setLastPoint=function(t,e){l.prototype.setLastPoint.call(this,t,e),this.points().length>1&&this._calculateAngle()},r.prototype.axisPoints=function(){var t,i,o,n,s,r,a=this.points();return a.length<2?[]:(t=[this.points()[0]],i=this.pointToScreenPoint(this.points()[0])[1],o=Math.cos(this._angle)*this._distance,n=-Math.sin(this._angle)*this._distance,s=i.add(new e.Point(o,n)),r=this.screenPointToPoint(s),t.push(r),t)},r.prototype.setPoint=function(t,e,i){l.prototype.setPoint.call(this,t,e,i),this.points().length>1&&1==t&&this._calculateAngle()},r.prototype.restoreData=function(t){this._angle=t.angle,this._distance=t.distance},r.prototype.state=function(t){var e=l.prototype.state.call(this,t);return e.angle=this._angle,e.distance=this._distance,e},r.prototype.cloneData=function(t){this._angle=t._angle,this._distance=t._distance},r.prototype.canHasAlert=function(){return!0},r.prototype._getAlertPlots=function(){return[this._linePointsToAlertPlot(this._points,null,this.properties().extendLeft.value(),this.properties().extendRight.value())]},t.exports=r}).call(e,i(21),i(63))},function(t,e,i){(function(t){"use strict";function o(t,e){var i=e?e:new d("linetoolarrowmark");l.call(this,t,new c(this,t,this.image,this.width,this.height,this.offsetX,this.offsetY),i)}function n(t,e){this._constructor="LineToolArrowMarkLeft",o.call(this,t,e),this._textPaneView=new h(this,t,22,(-3),"middle","left"),this._textPaneView._noSelection=!0}function s(t,e){this._constructor="LineToolArrowMarkUp",o.call(this,t,e),this._textPaneView=new h(this,t,0,18,"top","center"),this._textPaneView._noSelection=!0}function r(t,e){this._constructor="LineToolArrowMarkRight",o.call(this,t,e),this._textPaneView=new h(this,t,(-22),(-3),"middle","right"),this._textPaneView._noSelection=!0}function a(t,e){this._constructor="LineToolArrowMarkDown",o.call(this,t,e),this._textPaneView=new h(this,t,0,(-23),"bottom","center"),this._textPaneView._noSelection=!0}var l=i(67).LineDataSource,h=i(98).TextPaneView,c=i(204),d=i(73).DefaultProperty;inherit(o,l),o.prototype.width=21,o.prototype.height=21,o.prototype.offsetX=0,o.prototype.offsetY=0,o.prototype.paneViews=function(t){var e=l.prototype.paneViews.call(this,t);return null!==e&&this._textPaneView&&e.push(this._textPaneView),e},o.prototype.pointsCount=function(){return 1},o.prototype.title=function(){return"Arrow Mark"},inherit(n,o),n.prototype.image=new Image,n.prototype.image.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAB50lEQVR4AWMgETAKKAgIAGkQ5mCgAmCWdtTWV4yxvgFkWwKxOKUGssr5Gccrx9t+Vk6w+w/kxwKxIrmGMTKIivIohFvONKsI+e/cl/ofamgGECuTYyCTqJ2mqlK01Vnr+uj/HjNy/1v1J8AMzSTHUBYZP6MgpTjb97bNsf9dpmf9N++J/W/UEQEztAiIbUEGo2EpIObE8C4oVuVDzLuBmv869aT8t5+c+t+0K/q/YXs4GGsWeIAMRscwy/yhBiO8K2ijJKcYZXXYuj7qv/u0nP/W/Yn/jTsjQYYRwliDhUXKy8BVKdbmuW1T7H+3Gdn/LXrjQN4FaSDLUBa5MItyoOAvp67k/45T0pC9S56hSrHWhY4tif9D5pUDXZjz36w7Blkx+S5VDLNoBUWMY3fKfwdExMAw+WEq7Wvkoxhn+waUhFwRSYhcQxGxL26jpqQYbX3CBpjY3aeDYj+BothHpFNxcW75cIvJpmXB/516Uv/bT0r5b9IVRUY6xQSssr6GkcAc9dGuNe6/y7RMMnMUJmCWcNTSBgbHZeuG6P+eM/P+W/VRlPcRwSGoJMgvH265yKIq/L9LfzqKoZSXp0Em6cDy9BvU0Dhyy1PM4PAwMFWKs7kFZFsBsQQDlQAjr4a0MJAWxFdHAQAcI3sGHsO1dgAAAABJRU5ErkJggg==",n.prototype.offsetX=1,n.prototype.offsetY=-10,n.prototype.title=function(){return"Arrow Mark Left"},inherit(s,o),s.prototype.image=new Image,s.prototype.image.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAACBklEQVR4AWMgErAoxVoXgmgGKgEWxTCLVseWxP9yYRbl1DCYSdrXyEc5we5vyLzy/0D6l5SXgStInFwDGcVt1JQU42zfOHan/HebkfPfqSv5v1KszXNBGyU5kDzpRoqLcytGW5+wbY797zA59b9Zd8x/xylp/22bYv8rRlkdBqrgINVIVvlwi8k29dH/Xadn/Tftiv5v2B4Opt1mZP+3ro/6Lx9i3k1K+DLL+hpGmpYF/3efnvPfvCcWZCAcW/TG/XeflvMfFM4yfkZBxIQvo4SjlrZSnO1Hp57U/9b9Cf+NOiKQDQXxgeKJ/516Uv4D1b0XtdNUxRu+gkqC/MBwvGzXGvffflLKf+POSISBCAwWtweGMyi8laKtzjKIivLgCUfLRdYN0f9dpmX+N+mKghiCieHh6wIMb2tguCuEW84E6ccIR7kgk3SLqvD/njPzYOFICIPVeczI/W9WEfJfzs84HmQOIhw9DEyV422/ufSn/7fqg4cjIQxWZwUMd+e+1P9A/Z+lHbX1weHLqyEtrBRncwsYm/+RsWaBBz4DwfLoehRjrG8IKAgIgOMHiK2AOA6IM6G4CKgIr6EgeZA6qPoMII4FYksgFmCA5gwJIFYEYmUotiXSUFuYHqh+cXw5TZlIQ5WxaR4mhuLBZBkqBcT+oJjFg/3B6kgAnFANyniwFEQdJgAAOuN7Bp7MBuYAAAAASUVORK5CYII=",s.prototype.offsetX=-9,s.prototype.offsetY=0,s.prototype.title=function(){return"Arrow Mark Up"},inherit(r,o),r.prototype.image=new Image,r.prototype.image.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAB60lEQVR4AWPAAziAWJBXQ1oYSDMyUAlIALGVUpzNLQkPA1Mgm5kahioCcZxygt1/5Xjbb3JBJulAPiulhioDcSbIUJf+9P8WVeH/5cMtFwkqCfKDgoNiQ636Ev57zsz7b90Q/V8x2vqyhKOWNqHg4ARiKZAhaNgWiItAhhp1RPw374n97zIt879da9x/pTjbj7K+hpE4gwNqoD9IMzasWeDx37A9HIxNuqL+209K+e/Uk/rftCwYGBwWkxnExbkRwYHpTZBGgti4M/K/dX/Cf/fpOf9t6sHBcULcRk0JaAYT6YYiMDw4XKdn/bdtjv2vGGf7RtrXyAdoDguZhiKwaVf0f4fJqf8du1NAQfVXMcyiFWQwmYYisFl3zH+3GTn/Q+aV/3dsSfyvFGtdSLFLHaek/XfqSga59JdcmEU5yKVkh6lFbxzQhdn/bZtiga6zeS7lZeAKMpCC2E/87z4t5791fdR/xSirw4I2SnKg2CcxnSK8aw+MGKceSMTIh5h3Q0szRvJzFCQJgXLUexk/oyCQd8nP+8DE7jEjF+jd6P9K0VZnRe00VWHeJcfQDJChzn2p/80qQv4rhFvOZBAV5QF5l5LyNBZann6W8zOOp0Z5Kg7Eloox1jekHbX1qVLyQ2NVQEBBQIBU7wIAOFZ7BmG7RzYAAAAASUVORK5CYII=",r.prototype.offsetX=-19,r.prototype.offsetY=-10,r.prototype.title=function(){return"Arrow Mark Right"},inherit(a,o),a.prototype.image=new Image,a.prototype.image.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAB/UlEQVR4AWPAATj3Wij8J4RB6hhIAFIgTS9a8nBhmKFSpBiqDNJ0P80PF4YZqkyyobfD7HDh4WJolaKY+G5zhXvoMXva2xifoWB5dD07zeTvFKvxioDMFY6RFUgEGvzzQVk8OGafVib9v5fkhc9QkDxIHVj9vaKY/7vM5b+HS/JFA80TAhnKA8TGZSoiS057GYFiFqzhTpQTPkNB8iB1YPUnPQz+5ykKzQGaYwjE3CBDmUCuBWKHabqSZ0656oI0EY1B6idoSx4F6reDupIJFrTMQCwtxsYcvNZY5uU5T0OiDDwLdOFKI9knvMzM/kD9kmBz0AAbEKs6iHAX7zSX/3nF3xyvgZd8Tf9vM5P/ZiXAmQdNBazYEgIjEHOBwiVHXmjWcSctnAbeDLH5f8xR83+SjNBEoHo9sD4owGWwIBDb9mtJHMIVviDxDg3x3UB11kDMD9ZHADCDwkeAmdlvhZHMI2C4oRh4xl3//1IDmbvszAxeQHXiUPWEATR8lE0EubJB4QYMP7CBF31M/m82k/usy8uRCpRXAKsjEXCCwiteVqD/qIPG/+tBVv/3WCj8C5Pi7wCKawMxBwMZgBEaXlbtGuI7T7ro/G9QFdsI5JsDMR/+cCQcvuLsLAzubRoSa4FsJyAWBSdwsgEifKVBXoYmcBYGagCoQZzEGggAoyq6zKXuV5gAAAAASUVORK5CYII=",a.prototype.offsetX=-9,a.prototype.offsetY=-18,a.prototype.title=function(){return"Arrow Mark Down"},r.prototype.version=n.prototype.version=a.prototype.version=s.prototype.version=2,a.prototype.migrateVersion=function(e){1==e&&(this.version=1,this._paneViews[0]._offsetX=-10,this._paneViews[0]._offsetY=0,this._paneViews[0].setAnchors(new t.Point(0,21)),this._textPaneView._offsetX=0,this._textPaneView._offsetY=-4)},s.prototype.migrateVersion=function(e){1==e&&(this.version=1,this._paneViews[0]._offsetX=-10,this._paneViews[0]._offsetY=0,this._paneViews[0].setAnchors(new t.Point(0,0)),this._textPaneView._offsetX=0,this._textPaneView._offsetY=18)},r.prototype.migrateVersion=function(e){1==e&&(this.version=1,this._paneViews[0]._offsetX=0,this._paneViews[0]._offsetY=0,this._paneViews[0].setAnchors(new t.Point(0,0)),this._textPaneView._offsetX=0,this._textPaneView._offsetY=10)},n.prototype.migrateVersion=function(e){1==e&&(this.version=1,this._paneViews[0]._offsetX=0,this._paneViews[0]._offsetY=0,this._paneViews[0].setAnchors(new t.Point(0,0)),this._textPaneView._offsetX=21,this._textPaneView._offsetY=10)},e.LineToolArrowMark=o,e.LineToolArrowMarkLeft=n,e.LineToolArrowMarkRight=r,e.LineToolArrowMarkUp=s,e.LineToolArrowMarkDown=a}).call(e,i(21))},function(t,e,i){(function(e){"use strict";function o(t){this._data=t}function n(t,e,i,o,n,r,a){s.call(this,t,e),this._image=i,this._offsetX=r||0,this._offsetY=a||0,this._width=o,this._height=n,this._invalidated=!0}var s=i(97),r=i(88),a=i(87).SelectionRenderer,l=i(92);o.prototype.draw=function(t){var e,i;0!==this._data.points.length&&(e=this._data.points[0].x+this._data.offsetX,i=this._data.points[0].y+this._data.offsetY,t.translate(-.5,-.5),t.drawImage(this._data.image,e,i,this._data.width,this._data.height))},o.prototype.hitTest=function(t){if(0===this._data.points.length)return null;var i=this._data.points[0].clone();return this._data.offsetX&&(i.x+=this._data.offsetX),this._data.offsetY&&(i.y+=this._data.offsetY),e.pointInRect(t,i,i.add(new e.Point(this._data.width,this._data.height)))?new r(r.MOVEPOINT):null},inherit(n,s),n.prototype.setAnchors=function(t){this._anchorsOffset=t},n.prototype.renderer=function(){var t,e,i,n;if(this._invalidated&&this.updateImpl(),t={},t.points=this._points,t.color=this._source.properties().color.value(),t.image=this._image,t.offsetX=this._offsetX,t.offsetY=this._offsetY,t.width=this._width,t.height=this._height,this.isAnchorsRequired()&&1==t.points.length){if(e=new l,e.append(new o(t)),this._anchorsOffset){for(i=[],n=0;n<t.points.length;n++)i.push(t.points[n].clone().add(this._anchorsOffset));e.append(new a({points:i}))}else e.append(new a({points:t.points}));return e}return new o(t)},n.prototype.update=function(){this._invalidated=!0},n.prototype.updateImpl=function(){s.prototype.update.call(this),this._invalidated=!1},t.exports=n}).call(e,i(21))},function(t,e,i){"use strict";function o(t,e){s.call(this,t,e),this._invalidated=!0}function n(t,e){this._constructor="LineToolPitchfan";var i=e?e:new this.createPropertiesObject("linetoolpitchfan");r.call(this,t,new o(this,t),i)}var s=i(97),r=i(67).LineDataSource,a=i(118),l=i(206).ChannelRenderer,h=i(122).TrendLineRenderer,c=i(88),d=i(92);inherit(o,s),o.prototype.update=function(){this._invalidated=!0},o.prototype.updateImpl=function(){s.prototype.update.call(this),0!==this._points.length&&(3===this._points.length?(this._medianPoint=this._points[1].add(this._points[2]).scaled(.5),this._medianPoint.data=3):2===this._points.length?(this._medianPoint=this._points[1],this._medianPoint.data=3):(this._medianPoint=this._points[0],this._medianPoint.data=3))},o.prototype.renderer=function(){var t,e,i,o,n,s,a,p,u,_,f,g,m,v,y,w;if(this._invalidated&&(this.updateImpl(),this._invalidated=!1),t=new d,this._points.length<2)return t;if(!this._medianPoint)return t;if(e={points:[this._points[0],this._medianPoint],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:this._source.properties().median.color.value(),linewidth:this._source.properties().median.linewidth.value(),linestyle:this._source.properties().median.linestyle.value(),extendleft:!1,extendright:!0,leftend:r.LINEEND_NORMAL,rightend:r.LINEEND_NORMAL},t.append(new h(e)),this._points.length<3)return this.addAnchors(t),t;for(i={points:[this._points[1],this._points[2]],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:this._source.properties().median.color.value(),linewidth:this._source.properties().median.linewidth.value(),linestyle:this._source.properties().median.linestyle.value(),extendleft:!1,extendright:!1,leftend:r.LINEEND_NORMAL,rightend:r.LINEEND_NORMAL},t.append(new h(i)),o=0,n=this._points[2].substract(this._points[1]).scaled(.5),s=this._source.properties().fillBackground.value(),a=this._source.properties().transparency.value(),p=0;p<=8;p++)u="level"+p,_=this._source.properties()[u],_.visible.value()&&(f=this._medianPoint.addScaled(n,_.coeff.value()),g=this._medianPoint.addScaled(n,-_.coeff.value()),s&&(m={},m.width=this._model.timeScale().width(),m.p1=this._points[0],m.p2=f,m.p3=this._points[0],m.p4=this._medianPoint.addScaled(n,o),m.color=_.color.value(),m.transparency=a,m.hittestOnBackground=!0,t.append(new l(m)),m={},m.width=this._model.timeScale().width(),m.p1=this._points[0],m.p2=g,m.p3=this._points[0],m.p4=this._medianPoint.addScaled(n,-o),m.color=_.color.value(),m.transparency=a,m.hittestOnBackground=!0,t.append(new l(m))),o=_.coeff.value(),v={points:[this._points[0],f],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:_.color.value(),linewidth:_.linewidth.value(),linestyle:_.linestyle.value(),extendleft:!1,extendright:!0,leftend:r.LINEEND_NORMAL,rightend:r.LINEEND_NORMAL},y=new c(c.MOVEPOINT,null,p),t.append(new h(v,y)),w={points:[this._points[0],g],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:_.color.value(),linewidth:_.linewidth.value(),linestyle:_.linestyle.value(),extendleft:!1,extendright:!0,leftend:r.LINEEND_NORMAL,rightend:r.LINEEND_NORMAL},y=new c(c.MOVEPOINT,null,p),t.append(new h(w,y)));return this.addAnchors(t),t},inherit(n,r),n.prototype.pointsCount=function(){return 3},n.prototype.title=function(){return"Pitchfan"},n.prototype.processErase=function(t,e){var i="level"+e,o=this.properties()[i].visible;t.setProperty(o,!1,"Erase level line")},n.prototype.createPropertiesObject=function(t,e,i){return new a(t,e,i,{range:[0,8]})},t.exports=n},function(t,e,i){(function(t){"use strict";function o(t){this._data=t}function n(t,e){h.call(this,t,e),this._invalidated=!0}function s(t,e){n.call(this,t,e),this._invalidated=!0}function r(t,e){s.call(this,t,e),this._invalidated=!0}function a(t,e){n.call(this,t,e),this._invalidated=!0}function l(t,e){this._constructor="LineToolPitchfork";var i=e?e:new this.createPropertiesObject("linetoolpitchfork");c.call(this,t,new n(this,t),i),this._properties.style.listeners().subscribe(this,l.prototype._recreatePaneView),this._recreatePaneView()}var h=i(97),c=i(67).LineDataSource,d=i(118),p=i(122).TrendLineRenderer,u=i(132).Action,_=i(88),f=i(92);o.prototype.extendPoints=function(e,i,o){var n=new t.Point(0,(-5e3)),s=new t.Point(o,5e3),r=i.substract(e),a=t.intersectRayWithRect(i,i.add(r),n,s);return a&&(i=a),!t.pointInRect(e,n,s)&&t.pointInRect(i,n,s)&&(a=t.intersectRayWithRect(i,e,n,s),a&&(e=a)),!t.pointInRect(i,n,s)&&t.pointInRect(e,n,s)&&(a=t.intersectRayWithRect(e,i,n,s),a&&(i=a)),[e,i]},o.prototype.draw=function(t){var e=t.canvas.width,i=(t.canvas.height,this.extendPoints(this._data.p1,this._data.p2,e)),o=this.extendPoints(this._data.p3,this._data.p4,e);t.beginPath(),t.moveTo(i[0].x,i[0].y),t.lineTo(i[1].x,i[1].y),i[1].x<o[1].x&&t.lineTo(o[1].x,i[1].y),t.lineTo(o[1].x,o[1].y),t.lineTo(o[0].x,o[0].y),t.lineTo(i[0].x,i[0].y),t.fillStyle=TradingView.generateColor(this._data.color,this._data.transparency,!0),t.fill()},o.prototype.hitTest=function(e){var i,o,n,s;return this._data.hittestOnBackground?(i=this._data.width,o=this.extendPoints(this._data.p1,this._data.p2,i),n=this.extendPoints(this._data.p3,this._data.p4,i),s=[new t.Point(o[0].x,o[0].y),new t.Point(o[1].x,o[1].y)],o[1].x<n[1].x&&s.push(new t.Point(n[1].x,o[1].y)),s.push(new t.Point(n[1].x,n[1].y)),s.push(new t.Point(n[0].x,n[0].y)),s.push(new t.Point(o[0].x,o[0].y)),t.isInPolygon(s,e)?new _(_.MOVEPOINT_BACKGROUND):null):null},inherit(n,h),n.prototype.update=function(){this._invalidated=!0},n.prototype.updateImpl=function(){h.prototype.update.call(this),0!==this._points.length&&(3===this._points.length?(this._medianPoint=this._points[1].add(this._points[2]).scaled(.5),this._medianPoint.data=3):2===this._points.length?(this._medianPoint=this._points[1],this._medianPoint.data=3):(this._medianPoint=this._points[0],this._medianPoint.data=3))},n.prototype.renderer=function(){var t,e,i,n,s,r,a,l,h,d,u,g,m,v,y,w,b,S,T;if(this._invalidated&&(this.updateImpl(),this._invalidated=!1),t=new f,this._points.length<2)return t;if(!this._medianPoint)return t;if(e={points:[this._points[0],this._medianPoint],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:this._source.properties().median.color.value(),linewidth:this._source.properties().median.linewidth.value(),linestyle:this._source.properties().median.linestyle.value(),extendleft:!1,extendright:!0,leftend:c.LINEEND_NORMAL,rightend:c.LINEEND_NORMAL},t.append(new p(e)),this._points.length<3)return this.addAnchors(t),t;for(i={points:[this._points[1],this._points[2]],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:this._source.properties().median.color.value(),linewidth:this._source.properties().median.linewidth.value(),linestyle:this._source.properties().median.linestyle.value(),extendleft:!1,extendright:!1,leftend:c.LINEEND_NORMAL,rightend:c.LINEEND_NORMAL},t.append(new p(i)),n=this._points[2].substract(this._points[1]).scaled(.5),s=this._medianPoint.substract(this._points[0]),r=0,a=this._source.properties().fillBackground.value(),l=this._source.properties().transparency.value(),h=0;h<=8;h++)d="level"+h,u=this._source.properties()[d],u.visible.value()&&(g=this._medianPoint.addScaled(n,u.coeff.value()),m=g.add(s),v=this._medianPoint.addScaled(n,-u.coeff.value()),y=v.add(s),a&&(w={},w.width=this._model.timeScale().width(),w.p1=g,w.p2=m,w.p3=this._medianPoint.addScaled(n,r),w.p4=w.p3.add(s),w.color=u.color.value(),w.width=this._model.timeScale().width(),w.transparency=l,w.hittestOnBackground=!0,t.append(new o(w)),w={},w.width=this._model.timeScale().width(),w.p1=v,w.p2=y,w.p3=this._medianPoint.addScaled(n,-r),w.p4=w.p3.add(s),w.color=u.color.value(),w.width=this._model.timeScale().width(),w.transparency=l,w.hittestOnBackground=!0,t.append(new o(w))),r=u.coeff.value(),b={points:[g,m],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:u.color.value(),linewidth:u.linewidth.value(),linestyle:u.linestyle.value(),extendleft:!1,extendright:!0,leftend:c.LINEEND_NORMAL,rightend:c.LINEEND_NORMAL},S=new _(_.MOVEPOINT,null,h),t.append(new p(b,S)),T={points:[v,y],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:u.color.value(),linewidth:u.linewidth.value(),linestyle:u.linestyle.value(),extendleft:!1,extendright:!0,leftend:c.LINEEND_NORMAL,rightend:c.LINEEND_NORMAL},S=new _(_.MOVEPOINT,null,h),t.append(new p(T,S)));return this.addAnchors(t),t},inherit(s,n),s.prototype.renderer=function(){var t,e,i,n,s,r,a,l,h,d,u,g,m,v,y,w,b,S,T;if(this._invalidated&&(this.updateImpl(),this._invalidated=!1),t=new f,this._points.length<2)return t;if(e={points:[this._points[0],this._points[1]],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:this._source.properties().median.color.value(),linewidth:this._source.properties().median.linewidth.value(),linestyle:this._source.properties().median.linestyle.value(),extendleft:!1,extendright:!1,leftend:c.LINEEND_NORMAL,rightend:c.LINEEND_NORMAL},t.append(new p(e)),!this._medianPoint||!this._modifiedBase)return this.addAnchors(t),t;if(i={points:[this._modifiedBase,this._medianPoint],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:this._source.properties().median.color.value(),linewidth:this._source.properties().median.linewidth.value(),linestyle:this._source.properties().median.linestyle.value(),extendleft:!1,extendright:!0,leftend:c.LINEEND_NORMAL,rightend:c.LINEEND_NORMAL},t.append(new p(i)),this._points.length<3)return this.addAnchors(t),t;for(n={points:[this._points[1],this._points[2]],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:this._source.properties().median.color.value(),linewidth:this._source.properties().median.linewidth.value(),linestyle:this._source.properties().median.linestyle.value(),extendleft:!1,extendright:!1,leftend:c.LINEEND_NORMAL,rightend:c.LINEEND_NORMAL},t.append(new p(n)),s=this._points[2].substract(this._points[1]).scaled(.5),r=this._medianPoint.substract(this._modifiedBase),a=0,l=this._source.properties().fillBackground.value(),h=this._source.properties().transparency.value(),d=0;d<=8;d++)u="level"+d,g=this._source.properties()[u],g.visible.value()&&(m=this._medianPoint.addScaled(s,g.coeff.value()),v=m.add(r),y=this._medianPoint.addScaled(s,-g.coeff.value()),w=y.add(r),l&&(e={},e.p1=m,e.p2=v,e.p3=this._medianPoint.addScaled(s,a),e.p4=e.p3.add(r),e.color=g.color.value(),e.width=this._model.timeScale().width(),e.transparency=h,e.hittestOnBackground=!0,t.append(new o(e)),e={},e.p1=y,e.p2=w,e.p3=this._medianPoint.addScaled(s,-a),e.p4=e.p3.add(r),e.color=g.color.value(),e.width=this._model.timeScale().width(),e.transparency=h,e.hittestOnBackground=!0,t.append(new o(e))),a=g.coeff.value(),b={points:[m,v],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:g.color.value(),linewidth:g.linewidth.value(),linestyle:g.linestyle.value(),extendleft:!1,extendright:!0,leftend:c.LINEEND_NORMAL,rightend:c.LINEEND_NORMAL},S=new _(_.MOVEPOINT,null,d),t.append(new p(b,S)),T={points:[y,w],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:g.color.value(),linewidth:g.linewidth.value(),linestyle:g.linestyle.value(),extendleft:!1,extendright:!0,leftend:c.LINEEND_NORMAL,rightend:c.LINEEND_NORMAL},S=new _(_.MOVEPOINT,null,d),t.append(new p(T,S)));return this.addAnchors(t),t},s.prototype.update=function(){this._invalidated=!0},s.prototype.updateImpl=function(){n.prototype.updateImpl.call(this),this._points.length>1&&(this._modifiedBase=this._points[0].add(this._points[1]).scaled(.5))},inherit(r,s),r.prototype.update=function(){this._invalidated=!0},r.prototype.updateImpl=function(){var e,i,o;n.prototype.updateImpl.call(this),this._points.length>2&&(e=this._points[0].x,i=.5*(this._points[0].y+this._points[1].y),o=new t.Point(e,i),this._modifiedBase=o)},inherit(a,n),a.prototype.update=function(){this._invalidated=!0},a.prototype.updateImpl=function(){n.prototype.updateImpl.call(this),this._points.length>1&&(this._modifiedBase=this._points[0].add(this._points[1]).scaled(.5))},a.prototype.renderer=function(){var t,e,i,n,s,r,a,l,h,d,u,g,m,v,y,w,b,S,T,C;if(this._invalidated&&(this.updateImpl(),this._invalidated=!1),t=new f,this._points.length<2)return t;if(!this._medianPoint||!this._modifiedBase)return this.addAnchors(t),t;if(3==this._points.length&&(e={points:[this._modifiedBase,this._points[2]],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:this._source.properties().median.color.value(),linewidth:this._source.properties().median.linewidth.value(),linestyle:this._source.properties().median.linestyle.value(),extendleft:!1,extendright:!1,leftend:c.LINEEND_NORMAL,rightend:c.LINEEND_NORMAL},t.append(new p(e))),i={points:[this._points[0],this._points[1]],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:this._source.properties().median.color.value(),linewidth:this._source.properties().median.linewidth.value(),linestyle:this._source.properties().median.linestyle.value(),extendleft:!1,extendright:!1,leftend:c.LINEEND_NORMAL,rightend:c.LINEEND_NORMAL},t.append(new p(i)),this._points.length<3)return this.addAnchors(t),t;for(n={points:[this._points[1],this._points[2]],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:this._source.properties().median.color.value(),linewidth:this._source.properties().median.linewidth.value(),linestyle:this._source.properties().median.linestyle.value(),extendleft:!1,extendright:!1,leftend:c.LINEEND_NORMAL,rightend:c.LINEEND_NORMAL},t.append(new p(n)),s=this._points[2].substract(this._points[1]).scaled(.5),r=this._points[2].substract(this._modifiedBase),a=0,l=this._source.properties().fillBackground.value(),h=this._source.properties().transparency.value(),d={points:[this._medianPoint,this._medianPoint.add(r)],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:this._source.properties().median.color.value(),linewidth:this._source.properties().median.linewidth.value(),linestyle:this._source.properties().median.linestyle.value(),extendleft:!1,extendright:!0,leftend:c.LINEEND_NORMAL,rightend:c.LINEEND_NORMAL},t.append(new p(d)),u=0;u<=8;u++)g="level"+u,m=this._source.properties()[g],m.visible.value()&&(v=this._medianPoint.addScaled(s,m.coeff.value()),y=v.add(r),w=this._medianPoint.addScaled(s,-m.coeff.value()),b=w.add(r),l&&(i={},i.p1=v,i.p2=y,i.p3=this._medianPoint.addScaled(s,a),i.p4=i.p3.add(r),i.color=m.color.value(),i.width=this._model.timeScale().width(),i.transparency=h,i.hittestOnBackground=!0,t.append(new o(i)),i={},i.p1=w,i.p2=b,i.p3=this._medianPoint.addScaled(s,-a),i.p4=i.p3.add(r),i.color=m.color.value(),i.width=this._model.timeScale().width(),i.transparency=h,i.hittestOnBackground=!0,t.append(new o(i))),a=m.coeff.value(),S={points:[v,y],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:m.color.value(),linewidth:m.linewidth.value(),linestyle:m.linestyle.value(),extendleft:!1,extendright:!0,leftend:c.LINEEND_NORMAL,rightend:c.LINEEND_NORMAL},T=new _(_.MOVEPOINT,null,u),t.append(new p(S,T)),C={points:[w,b],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:m.color.value(),linewidth:m.linewidth.value(),linestyle:m.linestyle.value(),extendleft:!1,extendright:!0,leftend:c.LINEEND_NORMAL,rightend:c.LINEEND_NORMAL},T=new _(_.MOVEPOINT,null,u),t.append(new p(C,T)));return this.addAnchors(t),t},inherit(l,c),l.STYLE_ORIGINAL=0,l.STYLE_SCHIFF=1,l.STYLE_INSIDE=2,l.STYLE_SCHIFF2=3,l.prototype.additionalActions=function(){var t,e,i=[],o=["Original","Modified Schiff","Inside","Schiff"];for(t=0;t<4;t++)e=new u({checked:this.properties().style.value()==t,checkable:!0,text:$.t(o[t]),callbackContext:{target:this,value:t}}),e.callbacks().subscribe(null,function(t){var e=t.callbackContext(),i=e.target,o=e.value;i.properties().style.setValue(o),i.updateAllViews(),i._model.updateSource(i)}),i.push(e);return[i[0],i[3],i[1],i[2]]},l.prototype._recreatePaneView=function(){this._properties.style.value()==l.STYLE_ORIGINAL?this._paneViews=[new n(this,this._model)]:this._properties.style.value()==l.STYLE_SCHIFF?this._paneViews=[new s(this,this._model)]:this._properties.style.value()==l.STYLE_SCHIFF2?this._paneViews=[new r(this,this._model)]:this._properties.style.value()==l.STYLE_INSIDE&&(this._paneViews=[new a(this,this._model)])},l.prototype.pointsCount=function(){return 3},l.prototype.title=function(){return $.t("Pitchfork")},l.prototype.processErase=function(t,e){var i="level"+e,o=this.properties()[i].visible;t.setProperty(o,!1,"Erase level line")},l.prototype.createPropertiesObject=function(t,e,i){return new d(t,e,i,{range:[0,8]})},e.ChannelRenderer=o,e.LineToolPitchfork=l}).call(e,i(21))},function(t,e,i){(function(e){"use strict";function o(t,e){s.call(this,t,e),this._rendererCache={},this._numericFormatter=new p,this._invalidated=!0}function n(t,e){this._constructor="LineToolGannSquare";var i=e?e:new this.createPropertiesObject("linetoolgannsquare");r.call(this,t,new o(this,t),i)}var s=i(97),r=i(67).LineDataSource,a=i(118),l=i(98).TextRenderer,h=i(120).RectangleTransparencyRenderer,c=i(122).TrendLineRenderer,d=i(92),p=i(75).NumericFormatter;inherit(o,s),o.prototype.renderer=function(){var t,i,o,n,s,a,p,u,_,f,g,m,v,y,w,b,S,T,C,x,P;if(this._invalidated&&(this.updateImpl(),this._invalidated=!1),t=new d,this._points.length<2)return this.addAnchors(t),t;for(i=this._points[0],o=this._points[1],n=Math.min(i.x,o.x),s=Math.min(i.y,o.y),a=Math.max(i.x,o.x),p=Math.max(i.y,o.y),u=this._source.properties(),_=this._source.properties().fillHorzBackground.value(),f=this._source.properties().horzTransparency.value(),g=this._source.properties().fillVertBackground.value(),m=this._source.properties().vertTransparency.value(),v=0;v<this._hlevels.length;v++)v>0&&_&&(y=this._hlevels[v-1],i=new e.Point(n,this._hlevels[v].y),o=new e.Point(a,y.y),w={},w.points=[i,o],w.color=this._hlevels[v].color,w.linewidth=0,w.backcolor=this._hlevels[v].color,w.fillBackground=!0,w.transparency=f,t.append(new h(w))),i=new e.Point(n,this._hlevels[v].y),o=new e.Point(a,this._hlevels[v].y),b={points:[i,o],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:this._hlevels[v].color,linewidth:u.linewidth.value(),linestyle:u.linestyle.value(),extendleft:!1,extendright:!1,leftend:r.LINEEND_NORMAL,rightend:r.LINEEND_NORMAL},t.append(new c(b)),u.showLeftLabels.value()&&(S={points:[i],text:this._numericFormatter.format(this._hlevels[v].coeff),color:this._hlevels[v].color,vertAlign:"middle",horzAlign:"right",font:u.font.value(),offsetX:-5,offsetY:0,fontsize:12},t.append(new l(S,this._rendererCache))),u.showRightLabels.value()&&(T={points:[o],text:this._numericFormatter.format(this._hlevels[v].coeff),color:this._hlevels[v].color,vertAlign:"middle",horzAlign:"left",font:u.font.value(),offsetX:5,offsetY:0,fontsize:12},t.append(new l(T,this._rendererCache)));for(v=0;v<this._vlevels.length;v++)i=new e.Point(this._vlevels[v].x,s),o=new e.Point(this._vlevels[v].x,p),v>0&&g&&(y=this._vlevels[v-1],C=new e.Point(y.x,s),w={},w.points=[C,o],w.color=this._vlevels[v].color,w.linewidth=0,w.backcolor=this._vlevels[v].color,w.fillBackground=!0,w.transparency=m,t.append(new h(w))),b={points:[i,o],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:this._vlevels[v].color,linewidth:u.linewidth.value(),linestyle:u.linestyle.value(),extendleft:!1,extendright:!1,leftend:r.LINEEND_NORMAL,rightend:r.LINEEND_NORMAL},t.append(new c(b)),u.showTopLabels.value()&&(x={points:[i],text:this._numericFormatter.format(this._vlevels[v].coeff),color:this._vlevels[v].color,vertAlign:"bottom",horzAlign:"center",font:u.font.value(),offsetX:0,offsetY:-5,fontsize:12},t.append(new l(x,this._rendererCache))),u.showBottomLabels.value()&&(P={points:[o],text:this._numericFormatter.format(this._vlevels[v].coeff),
color:this._vlevels[v].color,vertAlign:"top",horzAlign:"center",font:u.font.value(),offsetX:0,offsetY:5,fontsize:12},t.append(new l(P,this._rendererCache)));return this.addAnchors(t),t},o.prototype.update=function(){this._invalidated=!0},o.prototype.updateImpl=function(){var t,e,i,o,n,r,a,l,h,c,d,p,u,_;if(s.prototype.update.call(this),!(this._source.points().length<2)&&this._source.priceScale()&&!this._source.priceScale().isEmpty()&&!this._model.timeScale().isEmpty()){for(t=this._source.points()[0],e=this._source.points()[1],this._hlevels=[],i=e.price-t.price,this._source.priceScale().isPercent()&&(o=this._source.ownerSource().firstValue()),n=1;n<=7;n++)r="hlevel"+n,a=this._source.properties()[r],a.visible.value()&&(l=a.coeff.value(),h=a.color.value(),c=t.price+l*i,this._source.priceScale().isPercent()&&(c=this._source.priceScale().priceRange().convertToPercent(c,o)),d=this._source.priceScale().priceToCoordinate(c),this._hlevels.push({coeff:l,color:h,y:d}));for(this._vlevels=[],p=e.index-t.index,n=1;n<=7;n++)r="vlevel"+n,a=this._source.properties()[r],a.visible.value()&&(l=a.coeff.value(),h=a.color.value(),u=Math.round(t.index+l*p),_=this._model.timeScale().indexToCoordinate(u),this._vlevels.push({coeff:l,color:h,x:_}))}},inherit(n,r),n.prototype.pointsCount=function(){return 2},n.prototype.title=function(){return"Gann Box"},n.prototype.createPropertiesObject=function(t,e,i){return new a(t,e,i,{range:[1,7],prefixes:["h","v"],names:["coeff","color","visible"]})},t.exports=n}).call(e,i(21))},function(t,e,i){(function(e){"use strict";function o(t,e){s.call(this,t,e),this._rendererCache={},this._numericFormatter=new u,this._invalidated=!0}function n(t,e){this._constructor="LineToolFibSpeedResistanceFan";var i=e?e:new this.createPropertiesObject("linetoolfibspeedresistancefan");r.call(this,t,new o(this,t),i)}var s=i(97),r=i(67).LineDataSource,a=i(118),l=i(206).ChannelRenderer,h=i(98).TextRenderer,c=i(122).TrendLineRenderer,d=i(88),p=i(92),u=i(75).NumericFormatter;inherit(o,s),o.prototype.update=function(){this._invalidated=!0},o.prototype.updateImpl=function(){var t,e,i,o,n,r,a,l,h,c,d,p,u,_;if(s.prototype.update.call(this),!(this._source.points().length<2)&&this._source.priceScale()&&!this._source.priceScale().isEmpty()&&!this._model.timeScale().isEmpty()){for(t=this._source.points()[0],e=this._source.points()[1],this._hlevels=[],i=e.price-t.price,this._source.priceScale().isPercent()&&(o=this._source.ownerSource().firstValue()),n=1;n<=7;n++)r="hlevel"+n,a=this._source.properties()[r],a.visible.value()&&(l=a.coeff.value(),h=a.color.value(),c=t.price+l*i,this._source.priceScale().isPercent()&&(c=this._source.priceScale().priceRange().convertToPercent(c,o)),d=this._source.priceScale().priceToCoordinate(c),this._hlevels.push({coeff:l,color:h,y:d,index:n}));for(this._vlevels=[],p=e.index-t.index,n=1;n<=7;n++)r="vlevel"+n,a=this._source.properties()[r],a.visible.value()&&(l=a.coeff.value(),h=a.color.value(),u=Math.round(t.index+l*p),_=this._model.timeScale().indexToCoordinate(u),this._vlevels.push({coeff:l,color:h,x:_,index:n}))}},o.prototype.renderer=function(){var t,i,o,n,s,a,u,_,f,g,m,v,y,w,b,S,T,C,x,P,L,k,E,I;if(this._invalidated&&(this.updateImpl(),this._invalidated=!1),t=new p,this._points.length<2)return t;for(i=this._points[0],o=this._points[1],n=Math.min(i.x,o.x),s=Math.min(i.y,o.y),a=Math.max(i.x,o.x),u=Math.max(i.y,o.y),_=this._source.properties(),f=_.grid.color.value(),g=_.grid.linewidth.value(),m=_.grid.linestyle.value(),v=0;v<this._hlevels.length;v++)i=new e.Point(n,this._hlevels[v].y),o=new e.Point(a,this._hlevels[v].y),_.grid.visible.value()&&(y={points:[i,o],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:f,linewidth:g,linestyle:m,extendleft:!1,extendright:!1,leftend:r.LINEEND_NORMAL,rightend:r.LINEEND_NORMAL},t.append(new c(y))),_.showLeftLabels.value()&&(w={points:[i],text:this._numericFormatter.format(this._hlevels[v].coeff),color:this._hlevels[v].color,vertAlign:"middle",horzAlign:"right",font:_.font.value(),offsetX:-5,offsetY:0,fontsize:12},t.append(new h(w,this._rendererCache))),_.showRightLabels.value()&&(b={points:[o],text:this._numericFormatter.format(this._hlevels[v].coeff),color:this._hlevels[v].color,vertAlign:"middle",horzAlign:"left",font:_.font.value(),offsetX:5,offsetY:0,fontsize:12},t.append(new h(b,this._rendererCache)));for(v=0;v<this._vlevels.length;v++)i=new e.Point(this._vlevels[v].x,s),o=new e.Point(this._vlevels[v].x,u),_.grid.visible.value()&&(y={points:[i,o],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:f,linewidth:g,linestyle:m,extendleft:!1,extendright:!1,leftend:r.LINEEND_NORMAL,rightend:r.LINEEND_NORMAL},t.append(new c(y))),_.showTopLabels.value()&&(S={points:[i],text:this._numericFormatter.format(this._vlevels[v].coeff),color:this._vlevels[v].color,vertAlign:"bottom",horzAlign:"center",font:_.font.value(),offsetX:0,offsetY:-5,fontsize:12},t.append(new h(S,this._rendererCache))),_.showBottomLabels.value()&&(T={points:[o],text:this._numericFormatter.format(this._vlevels[v].coeff),color:this._vlevels[v].color,vertAlign:"top",horzAlign:"center",font:_.font.value(),offsetX:0,offsetY:5,fontsize:12},t.append(new h(T,this._rendererCache)));for(C=_.fillBackground.value(),x=_.transparency.value(),i=this._points[0],o=this._points[1],v=0;v<this._hlevels.length;v++)P=new e.Point(o.x,this._hlevels[v].y),v>0&&C&&(L=new e.Point(o.x,this._hlevels[v-1].y),k={},k.width=this._model.timeScale().width(),k.p1=i,k.p2=P,k.p3=i,k.p4=L,k.color=this._hlevels[v].color,k.transparency=x,k.hittestOnBackground=!0,t.append(new l(k))),y={points:[i,P],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:this._hlevels[v].color,linewidth:_.linewidth.value(),linestyle:_.linestyle.value(),extendleft:!1,extendright:!0,leftend:r.LINEEND_NORMAL,rightend:r.LINEEND_NORMAL},E=new d(d.MOVEPOINT,null,{type:"h",index:this._hlevels[v].index}),t.append(new c(y,E));for(v=0;v<this._vlevels.length;v++)I=new e.Point(this._vlevels[v].x,o.y),v>0&&C&&(L=new e.Point(this._vlevels[v-1].x,o.y),k={},k.width=this._model.timeScale().width(),k.p1=i,k.p2=I,k.p3=i,k.p4=L,k.color=this._vlevels[v].color,k.transparency=x,k.hittestOnBackground=!0,t.append(new l(k))),y={points:[i,I],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:this._vlevels[v].color,linewidth:_.linewidth.value(),linestyle:_.linestyle.value(),extendleft:!1,extendright:!0,leftend:r.LINEEND_NORMAL,rightend:r.LINEEND_NORMAL},E=new d(d.MOVEPOINT,null,{type:"v",index:this._vlevels[v].index}),t.append(new c(y,E));return this.addAnchors(t),t},inherit(n,r),n.prototype.pointsCount=function(){return 2},n.prototype.title=function(){return"Fib Speed Resistance Fan"},n.prototype.processErase=function(t,e){var i="h"==e.type?"hlevel"+e.index:"vlevel"+e.index,o=this.properties()[i].visible;t.setProperty(o,!1,"Erase level line")},n.prototype.createPropertiesObject=function(t,e,i){return new a(t,e,i,{range:[1,7],prefixes:["h","v"],names:["coeff","color","visible"]})},t.exports=n}).call(e,i(21))},function(t,e,i){(function(e){"use strict";function o(t){if(this._data=t,this._data.point.y==this._data.center.y);}function n(t,e){l.call(this,t,e),this._rendererCache={},this._invalidated=!0}function s(t,e){this._constructor="LineToolGannComplex";var i=e?e:new this.createPropertiesObject("linetoolganncomplex");a.call(this,t,new n(this,t),i)}function r(t,e,i){h.call(this,t,e,i,{names:["width","color","visible"]})}var a=i(67).LineDataSource,l=i(97),h=i(118),c=i(122).TrendLineRenderer,d=i(19).isSameType,p=i(88),u=i(92);o.prototype.draw=function(t){var e,i,o,n,s,r;t.lineCap="butt",t.strokeStyle=this._data.color,t.lineWidth=this._data.linewidth,t.translate(this._data.center.x,this._data.center.y),e=this._data.edge.substract(this._data.center),i=e.y/e.x,o=this._data.point.substract(this._data.center),o.y/=i,n=o.length(),s=this._data.prevPoint.substract(this._data.center),s.y/=i,r=s.length(),t.scale(1,i),this._data.fillBack&&(this._data.point.x<this._data.center.x&&(n=-n,r=-r),t.beginPath(),t.moveTo(r,0),t.lineTo(n,0),t.arcTo(n,n,0,n,Math.abs(n)),t.lineTo(0,r),t.arcTo(r,r,r,0,Math.abs(r)),t.fillStyle=TradingView.generateColor(this._data.color,this._data.transparency,!0),t.fill()),t.beginPath(),this._data.point.x>this._data.center.x?t.arc(0,0,Math.abs(n),0,Math.PI/2,!1):t.arc(0,0,Math.abs(n),-Math.PI/2,-Math.PI,!0),t.scale(1,1/i),t.stroke()},o.prototype.hitTest=function(t){var e,i,o,n,s,r=t.substract(this._data.center),a=this._data.edge.substract(this._data.center),l=a.y/a.x;return r.y/=l,e=this._data.point.substract(this._data.center),e.y/=l,i=e.length(),o=r.length(),n=this._data.prevPoint.substract(this._data.center),n.y/=l,s=n.length(),Math.abs(o-i)<5&&a.x*r.x>=0&&a.y*r.y>=0?new p(p.MOVEPOINT):this._data.fillBack&&o>=s&&o<=i&&a.x*r.x>=0&&a.y*r.y>=0?new p(p.MOVEPOINT_BACKGROUND):null},inherit(n,l),n.prototype.update=function(){this._invalidated=!0},n.prototype.updateImpl=function(){l.prototype.update.call(this),this._source._cornerPoint&&this._points.push(this._source.pointToScreenPoint(this._source._cornerPoint)[0])},n.prototype.renderer=function(){var t,i,n,s,r,l,h,d,p,_,f,g,m,v,y,w,b,S,T,C,x,P,L;if(this._invalidated&&(this.updateImpl(),this._invalidated=!1),t=this._source.properties(),i=new u,this._points.length<2)return this.addAnchors(i),i;for(n=this._points[0],s=3==this._points.length?this._points[2]:this._points[1],r=this._points[1],d=0;d<6;d++)p=t.levels[d],p.visible.value()&&(_=d/5,l=n.x+_*(s.x-n.x),f=n.y,g=s.y,m={points:[new e.Point(l,f),new e.Point(l,g)],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:p.color.value(),linewidth:p.width.value(),linestyle:CanvasEx.LINESTYLE_SOLID,extendleft:!1,extendright:!1,leftend:a.LINEEND_NORMAL,rightend:a.LINEEND_NORMAL},i.append(new c(m)),h=n.y+_*(s.y-n.y),v=n.x,y=s.x,m={points:[new e.Point(v,h),new e.Point(y,h)],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:p.color.value(),linewidth:p.width.value(),linestyle:CanvasEx.LINESTYLE_SOLID,extendleft:!1,extendright:!1,leftend:a.LINEEND_NORMAL,rightend:a.LINEEND_NORMAL},i.append(new c(m)));for(d in t.fanlines._childs)w=t.fanlines[d],w.visible.value()&&(b=w.x.value(),S=w.y.value(),b>S?(l=s.x,_=S/b,h=n.y+_*(s.y-n.y)):(h=s.y,_=b/S,l=n.x+_*(s.x-n.x)),m={points:[n,new e.Point(l,h)],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:w.color.value(),linewidth:w.width.value(),linestyle:CanvasEx.LINESTYLE_SOLID,extendleft:!1,extendright:!1,leftend:a.LINEEND_NORMAL,rightend:a.LINEEND_NORMAL},i.append(new c(m)));T=n;for(d in t.arcs._childs)C=t.arcs[d],C.visible.value()&&(b=C.x.value()/5,S=C.y.value()/5,l=n.x+b*(s.x-n.x),h=n.y+S*(s.y-n.y),x=new e.Point(l,h).substract(n).length(),P={center:n,point:new e.Point(l,h),edge:s,color:C.color.value(),linewidth:C.width.value(),fillBack:t.arcsBackground.fillBackground.value(),transparency:t.arcsBackground.transparency.value(),prevPoint:T},i.append(new o(P)),T=P.point);return this.isAnchorsRequired()&&(L=[n,r],this._model.lineBeingCreated()==this._source&&L.pop(),i.append(this.createLineAnchor({points:L}))),i},inherit(s,a),s.prototype._recalcSecondPoint=function(){var t,e,i,o,n,s,r=this._model.mainSeries().properties().style.value(),a=this._model.mainSeries().interval();r===this._currentStyle&&a===this._currentInterval||(t=this.pointToScreenPoint(this.points()[0])[0],e=this.pointToScreenPoint(this.points()[2])[0],i=e.substract(t),o=i.x/i.y,n=t.add(i.scaled(.2/Math.sqrt(2))),s=this.screenPointToPoint(n),this._points[1]=s)},s.prototype.pointsCount=function(){return 2},s.prototype.title=function(){return"Gann Square"},s.prototype._fixThirdPoint=function(t){var i,o,n,s,r,a,l,h,c;this.points().length<2||(i=this.pointToScreenPoint(this.points()[0])[0],o=this.pointToScreenPoint(this.points()[1])[0],n=o.substract(i),t?(s=n.x/n.y,r=i.add(n.scaled(5*Math.sqrt(2))),this._cornerPoint=this.screenPointToPoint(r)):(a=n.x<0?-1:1,l=n.y<0?-1:1,h=o.substract(i).length(),r=i.add(new e.Point(5*h*a,5*h*l)),c=this.screenPointToPoint(r),this._cornerPoint=c))},s.prototype.setPoint=function(t,e,i){var o,n,s=a.prototype.setPoint.call(this,t,e,i),r=i&&i.shift;return this._fixThirdPoint(r),this._points[2]=this._cornerPoint,delete this._cornerPoint,o=this._model.mainSeries().properties().style.value(),n=this._model.mainSeries().interval(),this._currentStyle=o,this._currentInterval=n,s},s.prototype.setLastPoint=function(t,e){var i=a.prototype.setLastPoint.call(this,t,e),o=e&&e.shift;return this._fixThirdPoint(o),i},s.prototype.addPoint=function(t,e){var i,o,n,s,r=$.extend({},t),a=this._model.mainSeries().properties().style.value(),l=this._model.mainSeries().interval();return this._currentStyle=a,this._currentInterval=l,i=this.priceScale(),i.isPercent()&&(o=this.ownerSource().firstValue(),r.price=i.priceRange().convertFromPercent(r.price,o)),n=e&&e.shift,this._points.push(r),this._lastPoint=null,s=this._points.length==this.pointsCount(),s?(this._fixThirdPoint(n),this._points.push(this._cornerPoint),delete this._cornerPoint,this.normalizePoints(),this.createServerPoints()):this._lastPoint=r,s},s.prototype.onData=function(t){a.prototype.onData.call(this,t),this._recalcSecondPoint()},inherit(r,h),r.prototype._iterateLevels=function(t,e){var i,o,n;for(i in t.levels)if(t.levels[i]&&d(t.levels[i],e.typecheck())){o=e.tpl();for(n in this._map.names)o=e.fill(n,this._map.names[n],t.levels[i],o);t.levels[i]=o}return t},s.prototype.createPropertiesObject=function(t,e,i){return new r(t,e,i)},t.exports=s}).call(e,i(21))},function(t,e,i){(function(e){"use strict";function o(t,e){r.call(this,t,e),this._rendererCache={},this._invalidated=!0}function n(t,e){this._constructor="LineToolGannFan";var i=e?e:new this.createPropertiesObject("linetoolgannfan");s.call(this,t,new o(this,t),i)}var s=i(67).LineDataSource,r=i(97),a=i(118),l=i(206).ChannelRenderer,h=i(98).TextRenderer,c=i(122).TrendLineRenderer,d=i(88),p=i(92);inherit(o,r),o.prototype.update=function(){this._invalidated=!0},o.prototype.updateImpl=function(){var t,e,i,o,n,s,a,l,h,c,d,p,u,_;if(r.prototype.update.call(this),!(this._source.points().length<2)&&this._source.priceScale()&&!this._source.priceScale().isEmpty()&&!this._model.timeScale().isEmpty())for(t=this._points[0],e=this._points[1],this._fans=[],i=e.x-t.x,o=e.y-t.y,a=1;a<=9;a++)l="level"+a,h=this._source.properties()[l],h.visible.value()&&(c=h.coeff1.value(),d=h.coeff2.value(),p=c/d,u=h.color.value(),_=""+c+"/"+d,c>d?(n=e.x,s=t.y+o/p):(n=t.x+i*p,s=e.y),this._fans.push({label:_,color:u,x:n,y:s,linewidth:h.linewidth.value(),linestyle:h.linestyle.value(),index:a}))},o.prototype.renderer=function(){var t,i,o,n,r,a,u,_,f,g,m,v,y;if(this._invalidated&&(this.updateImpl(),this._invalidated=!1),t=new p,this._points.length<2)return t;for(i=this._points[0],o=this._points[1],n=this._source.properties(),r=this._source.properties().fillBackground.value(),a=this._source.properties().transparency.value(),u=0;u<this._fans.length;u++)_=new e.Point(this._fans[u].x,this._fans[u].y),r&&(this._fans[u].index<4?(f=new e.Point(this._fans[u+1].x,this._fans[u+1].y),g={},g.width=this._model.timeScale().width(),g.p1=i,g.p2=_,g.p3=i,g.p4=f,g.color=this._fans[u].color,g.transparency=a,g.hittestOnBackground=!0,t.append(new l(g))):this._fans[u].index>4&&u>0&&(f=new e.Point(this._fans[u-1].x,this._fans[u-1].y),g={},g.width=this._model.timeScale().width(),g.p1=i,g.p2=_,g.p3=i,g.p4=f,g.color=this._fans[u].color,g.transparency=a,g.hittestOnBackground=!0,t.append(new l(g)))),m={points:[i,_],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:this._fans[u].color,linewidth:this._fans[u].linewidth,linestyle:this._fans[u].linestyle,extendleft:!1,extendright:!0,leftend:s.LINEEND_NORMAL,rightend:s.LINEEND_NORMAL},v=new d(d.MOVEPOINT,null,this._fans[u].index),t.append(new c(m,v)),n.showLabels.value()&&(y={points:[_],text:this._fans[u].label,color:this._fans[u].color,vertAlign:"middle",horzAlign:"left",font:n.font.value(),offsetX:0,offsetY:-5,fontsize:12},t.append(new h(y,this._rendererCache)));return this.addAnchors(t),t},inherit(n,s),n.prototype.pointsCount=function(){return 2},n.prototype.title=function(){return"Gann Fan"},n.prototype.processErase=function(t,e){var i="level"+e,o=this.properties()[i].visible;t.setProperty(o,!1,"Erase level line")},n.prototype.createPropertiesObject=function(t,e,i){return new a(t,e,i,{range:[1,9]})},t.exports=n}).call(e,i(21))},function(t,e,i){"use strict";function o(t,e){a.call(this,t,e),this._label=null,this._rendererCache={},this._invalidated=!0}function n(t,e){this._constructor="LineToolDisjointAngle";var i=e?e:new p("linetooldisjointangle");l.call(this,t,new o(this,t),i),this.version=n.version}var s=i(122).TrendLineRenderer,r=i(206).ChannelRenderer,a=i(97),l=i(67).LineDataSource,h=i(98).TextRenderer,c=i(192),d=i(92),p=i(73).DefaultProperty;inherit(o,a),o.prototype.update=function(){this._invalidated=!0},o.prototype.updateImpl=function(){var t,e,i,o;a.prototype.update.call(this),this._label=null,this._source.points().length<2||this._source.priceScale()&&(t=this._source.points()[0],e=this._source.points()[1],this._price1=this._source.priceScale().formatter().format(t.price),this._price2=this._source.priceScale().formatter().format(e.price),3==this._source.points().length&&(i=this._source.points()[2],this._price3=this._source.priceScale().formatter().format(i.price),o=e.price-t.price,this._price4=this._source.priceScale().formatter().format(i.price+o)))},o.prototype.renderer=function(){var t,e,i,o,n,a,l,p,u,_,f,g,m,v,y,w,b,S,T,C,x,P,L,k;return this._invalidated&&(this.updateImpl(),this._invalidated=!1),t=new d,this._points.length<2?t:(e=this._points[0],i=this._points[1],a=this._source.properties(),l=this._model,p=this._source,a=p.properties(),this._points.length>=3&&(o=this._points[2],o.x=i.x,u=i.y-e.y,_=i.y-o.y,n=e.clone(),n.y=o.y+u,n.data=3,a.fillBackground.value()&&(f={},g=l.timeScale().width(),m=p.priceScale().height(),v=a.extendLeft.value(),y=a.extendRight.value(),v||y?!v&&y?(w={},w.width=g,w.p1=e,w.p2=i,w.p3=n,w.p4=o,w.color=a.backgroundColor.value(),w.transparency=a.transparency.value(),w.hittestOnBackground=TradingView.isMobile.any(),t.append(new r(w))):v&&!y?(w={},w.width=g,w.p1=i,w.p2=e,w.p3=o,w.p4=n,w.color=a.backgroundColor.value(),w.transparency=a.transparency.value(),w.hittestOnBackground=TradingView.isMobile.any(),t.append(new r(w))):(b=e.add(i).scaled(.5),S=n.add(o).scaled(.5),T={},T.width=g,T.p1=b,T.p2=i,T.p3=S,T.p4=o,T.color=a.backgroundColor.value(),T.transparency=a.transparency.value(),T.hittestOnBackground=TradingView.isMobile.any(),t.append(new r(T)),C={},C.width=g,C.p1=b,C.p2=e,C.p3=S,C.p4=n,C.color=a.backgroundColor.value(),C.transparency=a.transparency.value(),C.hittestOnBackground=TradingView.isMobile.any(),t.append(new r(C))):(f.points=[e,i,o,n],f.color="rgba(0,0,0,0)",f.linewidth=0,f.linestyle=CanvasEx.LINESTYLE_SOLID,f.filled=!0,f.backcolor=a.backgroundColor.value(),f.fillBackground=!0,f.transparency=a.transparency.value(),t.append(new c(f))))),x=function(t,e){var i={points:[t,e],width:l.timeScale().width(),height:p.priceScale().height(),color:a.linecolor.value(),linewidth:a.linewidth.value(),linestyle:a.linestyle.value(),extendleft:a.extendLeft.value(),extendright:a.extendRight.value(),leftend:a.leftEnd.value(),rightend:a.rightEnd.value()};return i},t.append(new s(x(e,i))),P=this,L=function(e,i,o,n){var s;P._source.properties().showPrices.value()&&(s={points:[e],text:o,color:P._source.properties().textcolor.value(),horzAlign:e.x>i.x?"left":"right",vertAlign:"middle",font:P._source.properties().font.value(),offsetX:e.x>i.x?-5:5,offsetY:-5,bold:P._source.properties().bold.value(),italic:P._source.properties().italic.value(),fontsize:P._source.properties().fontsize.value()},t.append(new h(s,P._rendererCache)),s={points:[i],text:n,color:P._source.properties().textcolor.value(),horzAlign:e.x<i.x?"left":"right",vertAlign:"middle",font:P._source.properties().font.value(),offsetX:e.x>i.x?-5:5,offsetY:-5,bold:P._source.properties().bold.value(),italic:P._source.properties().italic.value(),fontsize:P._source.properties().fontsize.value()},t.append(new h(s,P._rendererCache)))},t.append(new s(x(e,i))),L(e,i,this._price1,this._price2),2==this._points.length?(this.addAnchors(t),t):(t.append(new s(x(n,o))),L(o,n,this._price3,this._price4),this.isAnchorsRequired()&&(k=[e,i,o,n],this._model.lineBeingCreated()==this._source&&k.pop(),t.append(this.createLineAnchor({points:k}))),!TradingView.printing&&this._source.hasAlert.value()&&!this._model.readOnly()&&e&&i&&this._source.getAlertIsActive(function(o){t.append(new TradingView.PaneRendererClockIcon({point1:e,point2:i,color:o?a.linecolor.value():defaults("chartproperties.alertsProperties.drawingIcon.color")}))}),t))},inherit(n,l),n.version=1,n.prototype.pointsCount=function(){return 3},n.prototype.title=function(){return"Disjoint Angle"},n.prototype.addPoint=function(t,e){return e&&e.shift&&2==this.points().length&&this._snapPoint45Degree(t,this.points()[this.points().length-2]),l.prototype.addPoint.call(this,t)},n.prototype.setLastPoint=function(t,e){return e&&e.shift&&2==this.points().length&&this._snapPoint45Degree(t,this.points()[this.points().length-2]),l.prototype.setLastPoint.call(this,t)},n.prototype.setPoint=function(t,e,i){var o,n,s,r,a,h=.5*(this._points[1].price+this._points[2].price);i&&i.shift&&1==t&&(o=0,this._snapPoint45Degree(e,this.points()[o])),t<3&&l.prototype.setPoint.call(this,t,e),0!==t&&2!==t&&(1==t?(n=this._points[1].price-h,this._points[2].price=this._points[1].price-2*n):3==t&&(s=this.priceScale(),r=e.price,s.isPercent()&&(a=this.ownerSource().firstValue(),r=s.priceRange().convertFromPercent(r,a)),n=r-this._points[2].price,this._points[0].price=this._points[1].price-n,this._points[0].index=e.index))},n.prototype.canHasAlert=function(){return!0},n.prototype._getAlertPlots=function(){var t,e,i,o,n,s,r,a,l,h=this._points[0],c=this._points[1],d=[];return h.index<=c.index?(d.push(h),d.push(c)):(d.push(c),d.push(h)),t=this._points[2],t.time=c.time,t.index=c.index,e={price:t.price+(c.price-h.price),time:h.time,index:h.index},i=[],t.index<=e.index?(i.push(t),i.push(e)):(i.push(e),i.push(t)),d[0].price>i[0].price?(o=d,n=i):i[0].price>d[0].price?(o=i,n=d):i[1].price>d[1].price?(o=i,n=d):(o=d,n=i),a=this.properties().extendLeft.value(),l=this.properties().extendRight.value(),h.index<=c.index?(s=a,r=l):(s=l,r=a),[this._linePointsToAlertPlot(o,"Upper",s,r),this._linePointsToAlertPlot(n,"Lower",s,r)]},t.exports=n},function(t,e,i){"use strict";function o(t,e){s.call(this,t,e),this._label1=null,this._label2=null,this._rendererCache={},this._invalidated=!0}function n(t,e){this._constructor="LineToolFlatBottom";var i=e?e:new p("linetoolflatbottom");r.call(this,t,new o(this,t),i),this.version=n.version}var s=i(97),r=i(67).LineDataSource,a=i(206).ChannelRenderer,l=i(122).TrendLineRenderer,h=i(98).TextRenderer,c=i(192),d=i(92),p=i(73).DefaultProperty;inherit(o,s),o.prototype.update=function(){this._invalidated=!0},o.prototype.updateImpl=function(){var t,e,i;s.prototype.update.call(this),this._label1=null,this._label2=null,this._source.points().length<2||this._source.priceScale()&&(t=this._source.points()[0],e=this._source.points()[1],this._price1=this._source.priceScale().formatter().format(t.price),this._price2=this._source.priceScale().formatter().format(e.price),3==this._source.points().length&&(i=this._source.points()[2],this._price3=this._source.priceScale().formatter().format(i.price)))},o.prototype.renderer=function(){var t,e,i,o,n,s,r,p,u,_,f,g,m,v,y,w,b,S,T,C,x,P,L,k;return this._invalidated&&(this.updateImpl(),this._invalidated=!1),t=new d,this._points.length<2?t:(e=this._points[0],i=this._points[1],s=this._source.properties(),r=this._model,p=this._source,3==this._points.length&&(o=this._points[2],o.x=i.x,u=i.y-e.y,_=i.y-o.y,n=e.clone(),n.y=o.y,n.data=3,s.fillBackground.value()&&(f={},g=r.timeScale().width(),m=p.priceScale().height(),v=s.extendLeft.value(),y=s.extendRight.value(),v||y?!v&&y?(w={},w.width=g,w.p1=e,w.p2=i,w.p3=n,w.p4=o,w.color=s.backgroundColor.value(),w.transparency=s.transparency.value(),w.hittestOnBackground=TradingView.isMobile.any(),t.append(new a(w))):v&&!y?(w={},w.width=g,w.p1=i,w.p2=e,w.p3=o,w.p4=n,w.color=s.backgroundColor.value(),w.transparency=s.transparency.value(),w.hittestOnBackground=TradingView.isMobile.any(),t.append(new a(w))):(b=e.add(i).scaled(.5),S=n.add(o).scaled(.5),T={},T.width=g,T.p1=b,T.p2=i,T.p3=S,T.p4=o,T.color=s.backgroundColor.value(),T.transparency=s.transparency.value(),T.hittestOnBackground=TradingView.isMobile.any(),t.append(new a(T)),C={},C.width=g,C.p1=b,C.p2=e,C.p3=S,C.p4=n,C.color=s.backgroundColor.value(),C.transparency=s.transparency.value(),C.hittestOnBackground=TradingView.isMobile.any(),t.append(new a(C))):(f.points=[e,i,o,n],f.color="rgba(0,0,0,0)",f.linewidth=0,f.linestyle=CanvasEx.LINESTYLE_SOLID,f.filled=!0,f.backcolor=s.backgroundColor.value(),f.fillBackground=!0,f.transparency=s.transparency.value(),t.append(new c(f))))),x=function(t,e){var i={points:[t,e],width:r.timeScale().width(),height:p.priceScale().height(),color:s.linecolor.value(),linewidth:s.linewidth.value(),linestyle:s.linestyle.value(),extendleft:s.extendLeft.value(),extendright:s.extendRight.value(),leftend:s.leftEnd.value(),rightend:s.rightEnd.value()};return i},t.append(new l(x(e,i))),2==this._points.length?(this.addAnchors(t),t):(P=this,L=function(e,i,o,n){var s;P._source.properties().showPrices.value()&&(s={points:[e],text:o,color:P._source.properties().textcolor.value(),horzAlign:e.x>i.x?"left":"right",vertAlign:"middle",font:P._source.properties().font.value(),offsetX:e.x>i.x?-5:5,offsetY:-5,bold:P._source.properties().bold.value(),italic:P._source.properties().italic.value(),fontsize:P._source.properties().fontsize.value()},t.append(new h(s,P._rendererCache)),s={points:[i],text:n,color:P._source.properties().textcolor.value(),horzAlign:e.x<i.x?"left":"right",vertAlign:"middle",font:P._source.properties().font.value(),offsetX:e.x>i.x?-5:5,offsetY:-5,bold:P._source.properties().bold.value(),italic:P._source.properties().italic.value(),fontsize:P._source.properties().fontsize.value()},t.append(new h(s,P._rendererCache)))},t.append(new l(x(e,i))),L(e,i,this._price1,this._price2),2==this._points.length?t:(t.append(new l(x(n,o))),L(o,n,this._price3,this._price3),this.isAnchorsRequired()&&(k=[e,i,o,n],this._model.lineBeingCreated()==this._source&&k.pop(),t.append(this.createLineAnchor({points:k}))),!TradingView.printing&&this._source.hasAlert.value()&&!this._model.readOnly()&&e&&i&&this._source.getAlertIsActive(function(o){t.append(new TradingView.PaneRendererClockIcon({point1:e,point2:i,color:o?s.linecolor.value():defaults("chartproperties.alertsProperties.drawingIcon.color")}))}),t)))},inherit(n,r),n.version=1,n.prototype.pointsCount=function(){return 3},n.prototype.title=function(){return"Flat Bottom"},n.prototype.addPoint=function(t,e){return e&&e.shift&&2==this.points().length&&this._snapPoint45Degree(t,this.points()[this.points().length-2]),r.prototype.addPoint.call(this,t)},n.prototype.setLastPoint=function(t,e){return e&&e.shift&&2==this.points().length&&this._snapPoint45Degree(t,this.points()[this.points().length-2]),r.prototype.setLastPoint.call(this,t)},n.prototype.setPoint=function(t,e,i){var o;.5*(this._points[1].price+this._points[2].price);i&&i.shift&&1==t&&(o=0,this._snapPoint45Degree(e,this.points()[o])),t<3?r.prototype.setPoint.call(this,t,e):this._points[0].index=e.index},n.prototype.canHasAlert=function(){return!0},n.prototype._getAlertPlots=function(){var t,e,i,o,n,s,r,a,l,h=this._points[0],c=this._points[1],d=[];return h.index<=c.index?(d.push(h),d.push(c)):(d.push(c),d.push(h)),t=this._points[2],t.time=c.time,t.index=c.index,e={price:t.price,time:h.time,index:h.index},i=[],t.index<=e.index?(i.push(t),i.push(e)):(i.push(e),i.push(t)),d[0].price>i[0].price?(o=d,n=i):i[0].price>d[0].price?(o=i,n=d):i[1].price>d[1].price?(o=i,n=d):(o=d,n=i),a=this.properties().extendLeft.value(),l=this.properties().extendRight.value(),h.index<=c.index?(s=a,r=l):(s=l,r=a),[this._linePointsToAlertPlot(o,"Upper",s,r),this._linePointsToAlertPlot(n,"Lower",a,r)]},t.exports=n},function(t,e,i){(function(e){"use strict";function o(t,e){this._data=t,this._cache=e}function n(t,e){r.call(this,t,e),this._cache={},this._invalidated=!0}function s(t,e){this._constructor="LineToolIcon";var i=e?e:new d("linetoolicon");i.addExclusion("angle"),i.addExclusion("scale"),a.call(this,t,new n(this,t),i),this.version=s.version}var r=i(97),a=i(67).LineDataSource,l=i(122).TrendLineRenderer,h=i(88),c=i(92),d=i(73).DefaultProperty;o.prototype.draw=function(t){var e,i,o,n=String.fromCharCode(this._data.icon);t.font=this._data.size+"px FontAwesome",e=t.measureText(n).width,t.textBaseline="middle",i=this._data.point,t.translate(i.x,i.y),t.rotate(this._data.angle-Math.PI/2),t.scale(this._data.scale,1),o=65536*this._data.icon+this._data.size,this._cache[o]=e,this._data.selected&&(t.fillStyle="rgba(80, 80, 80, 0.2)",t.fillRect(-this._cache[o]/2,-this._data.size/2,this._cache[o],this._data.size)),t.fillStyle=this._data.color,t.fillText(n,-this._cache[o]/2,0)},o.prototype.hitTest=function(t){var i=65536*this._data.icon+this._data.size,o=this._cache[i]*this._data.scale,n=e.Matrix.rotate(-this._data.angle),s=t.substract(this._data.point);return s=n.mult(s),Math.abs(s.y)<=o/2&&Math.abs(s.x)<=this._data.size/2?new h(h.MOVEPOINT):null},inherit(n,r),n.anchorLimit=80,n.prototype.update=function(){this._invalidated=!0},n.prototype.updateImpl=function(){r.prototype.update.call(this),this._invalidated=!1},n.prototype.renderer=function(){var t,i,s,r,h,d,p,u,_,f,g,m,v,y,w,b,S,T;return this._invalidated&&this.updateImpl(),t=new c,this._points.length<1?t:(i=this._source.properties(),s={point:this._points[0],color:i.color.value(),size:i.size.value(),icon:i.icon.value(),angle:i.angle.value(),scale:i.scale.value(),selected:this.isAnchorsRequired()},r=this._model,h=this._source,t.append(new o(s,this._cache)),this.isAnchorsRequired()&&(d=65536*s.icon+s.size,p=this._cache[d],u=s.size,_=this._points[0],f=i.scale.value(),g=new e.Point(Math.max(n.anchorLimit,u)/2,0),m=new e.Point(0,Math.max(n.anchorLimit,f*p)/2),v=e.Matrix.rotate(i.angle.value()),g=v.mult(g),m=v.mult(m),y=_.add(g),y.data=0,w=_.substract(g),w.data=1,b=_.add(m),b.data=2,b.square=!0,S=_.substract(m),S.data=3,S.square=!0,s={points:[y,w],width:r.timeScale().width(),height:h.priceScale().height(),color:"#808080",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED,extendleft:!1,extendright:!1,leftend:a.LINEEND_NORMAL,rightend:a.LINEEND_NORMAL},T=new l(s),T._hittest=null,t.append(T),t.append(this.createLineAnchor({points:[y,w,b,S]}))),t)},s._getAvailIcons=function(){var t,e,i=[];for(i=i.concat([61536,61537,61538,61539]),i=i.concat([61725,61726]),i=i.concat([61575,61576,61796,61797]),i=i.concat([61779,61780,61781,61782,61783,61784,61785,61786]),t=i.slice(0),e=61440;e<=61846;e++)$.inArray(e,i)==-1&&(e%16==15&&61487!==e||e>=61620&&e<=61630||61718!=e&&61719!=e&&61472!=e&&61619!=e&&t.push(e));return t},s.availIcons=s._getAvailIcons(),inherit(s,a),s.version=1,s.prototype.pointsCount=function(){return 1},s.prototype.title=function(){return"Icon"},s.prototype.startChanging=function(t,e){var i,o;a.prototype.startChanging.call(this,t,e),i=this.properties(),o=65536*i.icon.value()+i.size.value(),this._startChangeWidth=this._paneViews[0]._cache[o],i.size.value()<n.anchorLimit?this._sizeScale=i.size.value()/n.anchorLimit:this._sizeScale=1,this._origScale=i.scale.value(),this._startChangeWidth*this._origScale<n.anchorLimit?this._resizeRatio=this._startChangeWidth/n.anchorLimit:this._resizeRatio=1},s.prototype.endChanging=function(){a.prototype.endChanging.call(this),delete this._startChangeWidth,delete this._sizeScale,delete this._resizeRatio},s.prototype.setPoint=function(t,e,i){var o,s,r,a,l,h,c,d,p,u,_,f=$.extend({},e),g=this.priceScale();
g.isPercent()&&(o=this.ownerSource().firstValue(),f.price=g.priceRange().convertFromPercent(f.price,o)),i&&i.shift&&this._properties.snapTo45Degrees&&this._snapPoint45Degree(f,this.points()[0]),s=this.pointToScreenPoint(this.points()[0])[1],r=this.pointToScreenPoint(f)[1],0===t||1==t?(a=r.substract(s).normalized(),l=2*r.substract(s).length(),l*=this._sizeScale,this._properties.size.setValue(l),h=-a.x,c=a.y,d=Math.acos(h),Math.asin(a.y)>0&&(d=2*Math.PI-d),0===t&&(d+=Math.PI),this._properties.angle.setValue(d)):(p=this._startChangeWidth,u=r.substract(s).length(),this._origScale*p<n.anchorLimit?(_=n.anchorLimit/2,this._properties.scale.setValue(this._origScale*u/_)):(_=p/2,this._properties.scale.setValue(u/_)))},t.exports=s}).call(e,i(21))},function(t,e,i){(function(e){"use strict";function o(t,e){r.call(this,t,e),this._invalidated=!0}function n(t,e){this._constructor="LineToolRotatedRectangle";var i=e?e:new c("linetoolrotatedrectangle");s.call(this,t,new o(this,t),i)}var s=i(67).LineDataSource,r=i(97),a=i(122).TrendLineRenderer,l=i(192),h=i(92),c=i(73).DefaultProperty;inherit(o,r),o.prototype.update=function(){this._invalidated=!0},o.prototype.updateImpl=function(){r.prototype.update.call(this),this._distance=0,3==this._points.length&&(this._distance=e.distanceToLine(this._points[0],this._points[1],this._points[2]).distance)},o.prototype.renderer=function(){var t,i,o,n,r,c,d,p,u,_,f,g,m,v;return this._invalidated&&(this.updateImpl(),this._invalidated=!1),t=new h,i=this._source.properties(),o=this._points[0],n=this._points[1],2==this._points.length?(u={},u.points=this._points,u.floatPoints=this._floatPoints,u.width=this._model.timeScale().width(),u.height=this._source.priceScale().height(),u.color=i.color.value(),u.linewidth=1,u.linestyle=CanvasEx.LINESTYLE_SOLID,u.extendleft=!1,u.extendright=!1,u.leftend=s.LINEEND_NORMAL,u.rightend=s.LINEEND_NORMAL,t.append(new a(u))):3==this._points.length&&(_=this._points[2],f=n.substract(o),g=new e.Point(f.y,(-f.x)).normalized().scaled(this._distance),m=g.scaled(-1),r=o.add(g),c=n.add(g),d=o.add(m),p=n.add(m),u={},u.points=[r,c,p,d],u.color=i.color.value(),u.linewidth=this._source.properties().linewidth.value(),u.linestyle=CanvasEx.LINESTYLE_SOLID,u.filled=!0,u.backcolor=i.backgroundColor.value(),u.fillBackground=i.fillBackground.value(),u.transparency=i.transparency.value(),t.append(new l(u))),this.isAnchorsRequired()&&(v=[],v.push(o),this._points.length>=2&&v.push(n),3==this._points.length&&(r.data=2,d.data=2,c.data=2,p.data=2,v.push(r),v.push(d),v.push(c),v.push(p)),t.append(this.createLineAnchor({points:v}))),t},inherit(n,s),n.prototype.startChanging=function(t,i){var o,n,r,a;s.prototype.startChanging.call(this,t,i),0!==t&&1!==t||(o=this._paneViews[0],n=o._points[0],r=o._points[1],a=o._points[2],this._distance=e.distanceToLine(n,r,a).distance)},n.prototype.setPoint=function(t,i,o){var n,r,a,l,h,c,d;s.prototype.setPoint.call(this,t,i,o),0!==t&&1!==t||(n=this._paneViews[0],n.update(),r=n._points[0],a=n._points[1],l=a.substract(r),h=new e.Point(l.y,(-l.x)).normalized().scaled(this._distance),c=r.add(h),d=this.screenPointToPoint(c),this._points[2]=d)},n.prototype.endChanging=function(){delete this._distance},n.prototype.pointsCount=function(){return 3},n.prototype.title=function(){return"Rotated Rectangle"},t.exports=n}).call(e,i(21))},function(t,e,i){"use strict";function o(t){this._data=t}function n(t,e){a.call(this,t,e),this._invalidated=!0}function s(t,e){this._constructor="LineToolFibSpiral";var i=e?e:new d("linetoolfibspiral");r.call(this,t,new n(this,t),i)}var r=i(67).LineDataSource,a=i(97),l=i(122).TrendLineRenderer,h=i(88),c=i(92),d=i(73).DefaultProperty;o.prototype._fibNumbers=function(){return[0,1,2,3,5,8,13,21,34,55,89]},o.prototype._continiusFib=function(t){var e,i,o,n=this._fibNumbers(),s=Math.floor(t),r=Math.ceil(t);return r>=n.length?null:(e=t-s,e=Math.pow(e,1.15),i=n[r]-n[s],o=n[s]+i*e)},o.prototype.hitTest=function(t){var e,i,o,n,s=this._data.points[0],r=this._data.points[1],a=r.substract(s),l=t.substract(s),c=a.normalized(),d=c.transponed(),p=l.normalized(),u=Math.acos(c.dotProduct(p)),_=Math.asin(d.dotProduct(p));for(_<0&&(u=2*Math.PI-u),e=l.length(),i=0;i<4;i++)if(o=u/(.5*Math.PI),n=this._continiusFib(o+4*i),n=n*a.length()/5,null!==n&&Math.abs(n-e)<5)return new h(h.MOVEPOINT);return null},o.prototype.draw=function(t){var e,i,o,n,s,r,a,l,h,c,d,p,u;for(t.lineCap="round",t.strokeStyle=this._data.color,e=this._data.points[0],i=this._data.points[1],t.translate(e.x,e.y),o=i.substract(e),n=o.length(),o=o.normalized(),s=Math.acos(o.x),Math.asin(o.y)<0&&(s=2*Math.PI-s),t.rotate(s),t.scale(n/5,n/5),t.lineWidth=this._data.linewidth,CanvasEx.setLineStyle(t,this._data.linestyle),r=50,a=Math.PI/(2*r),t.moveTo(0,0),l=0;l<(this._fibNumbers().length-1)*r;l++)h=l*a,c=this._continiusFib(l/r),d=Math.cos(h)*c,p=Math.sin(h)*c,t.lineTo(d,p);t.scale(5/n,5/n),t.rotate(-s),t.stroke(),u=5},inherit(n,a),n.prototype.update=function(){this._invalidated=!0},n.prototype.updateImpl=function(){a.prototype.update.call(this),this._invalidated=!1},n.prototype.renderer=function(){var t,e;return this._invalidated&&this.updateImpl(),t=new c,this._points.length<2?t:(e={},e.points=this._points,e.width=this._model.timeScale().width(),e.height=this._source.priceScale().height(),e.color=this._source.properties().linecolor.value(),e.linewidth=this._source.properties().linewidth.value(),e.linestyle=this._source.properties().linestyle.value(),e.extendleft=!1,e.extendright=!0,e.leftend=r.LINEEND_NORMAL,e.rightend=r.LINEEND_NORMAL,t.append(new l(e)),e={},e.points=this._points,e.floatPoints=this._floatPoints,e.width=this._model.timeScale().width(),e.height=this._source.priceScale().height(),e.color=this._source.properties().linecolor.value(),e.linewidth=this._source.properties().linewidth.value(),e.linestyle=this._source.properties().linestyle.value(),t.append(new o(e)),this.isAnchorsRequired()&&(t.append(new l(e)),this.addAnchors(t)),t)},inherit(s,r),s.prototype.pointsCount=function(){return 2},s.prototype.title=function(){return"Fib Spiral"},t.exports=s},function(t,e,i){(function(e){"use strict";function o(t,e){s.call(this,t,e),this._rendererCache={},this._invalidated=!0}function n(t,e){this._constructor="LineToolHeadAndShoulders";var i=e?e:new d("linetoolheadandshoulders");r.call(this,t,new o(this,t),i)}var s=i(97),r=i(67).LineDataSource,a=i(122).TrendLineRenderer,l=i(217).TriangleRenderer,h=i(98).TextRenderer,c=i(92),d=i(73).DefaultProperty;inherit(o,s),o.prototype.renderer=function(){var t,e,i,o,n,s,d,p,u,_,f,g,m,v,y;if(this._invalidated&&(this.updateImpl(),this._invalidated=!1),this._points.length<2)return null;for(t=this._source.properties(),e=new c,i=this,o=function(e,o){var n={points:[e],text:$.t(o),color:t.textcolor.value(),horzAlign:"center",font:t.font.value(),offsetX:0,offsetY:0,bold:t.bold&&t.bold.value(),italic:t.italic&&t.italic.value(),fontsize:t.fontsize.value(),backgroundColor:i._source.properties().color.value(),backgroundRoundRect:4};return n},n=function(e,o,n,s){var a={points:[e,o],width:i._model.timeScale().width(),height:i._source.priceScale().height(),color:TradingView.generateColor(i._source.properties().color.value(),n),linewidth:s?s:t.linewidth.value(),linestyle:CanvasEx.LINESTYLE_SOLID,extendleft:!1,extendright:!1,leftend:r.LINEEND_NORMAL,rightend:r.LINEEND_NORMAL};return a},s=function(e,i,o){var n=[e,i,o],s={};return s.points=n,s.color=t.color.value(),s.linewidth=0,s.backcolor=t.backgroundColor.value(),s.fillBackground=t.fillBackground.value(),s.transparency=t.transparency.value(),s},d=1;d<this._points.length;d++)p=n(this._points[d-1],this._points[d],0),e.append(new a(p));return this._points.length>=5&&(f=!1,g=!1,this._intersect1?u=this._intersect1:(u=this._points[2],f=!0),this._intersect2?_=this._intersect2:(_=this._points[4],g=!0),p=n(u,_,0),p.extendleft=f,p.extendright=g,e.append(new a(p)),m=s(this._points[2],this._points[3],this._points[4]),e.append(new l(m))),this._intersect1&&(m=s(this._intersect1,this._points[1],this._points[2]),e.append(new l(m))),this._intersect2&&(m=s(this._points[4],this._points[5],this._intersect2),e.append(new l(m))),this._points.length>=2&&(v=this._points[1],y=o(v,"Left Shoulder"),this._points[1].y<this._points[0].y?(y.vertAlign="bottom",y.offsetY=-10):(y.vertAlign="top",y.offsetY=5),e.append(new h(y,this._rendererCache))),this._points.length>=4&&(v=this._points[3],y=o(v,"Head"),this._points[3].y<this._points[2].y?(y.vertAlign="bottom",y.offsetY=-10):(y.vertAlign="top",y.offsetY=5),e.append(new h(y,this._rendererCache))),this._points.length>=6&&(v=this._points[5],y=o(v,"Right Shoulder"),this._points[5].y<this._points[4].y?(y.vertAlign="bottom",y.offsetY=-10):(y.vertAlign="top",y.offsetY=5),e.append(new h(y,this._rendererCache))),this.addAnchors(e),e},o.prototype.update=function(){this._invalidated=!0},o.prototype.updateImpl=function(){var t,i,o,n,r,a,l,h,c;s.prototype.update.call(this),delete this._intersect1,delete this._intersect2,this._points.length>=5&&(t=this._points[0],i=this._points[1],o=this._points[2],n=this._points[3],r=this._points[4],a=e.intersectSegment(o,r,t,i),null!==a&&(l=r.substract(o),this._intersect1=o.add(l.scaled(a))),7==this._points.length&&(h=this._points[5],c=this._points[6],a=e.intersectSegment(o,r,h,c),null!==a&&(l=r.substract(o),this._intersect2=o.add(l.scaled(a)))))},inherit(n,r),n.prototype.pointsCount=function(){return 7},n.prototype.title=function(){return"Head & Shoulders"},t.exports=n}).call(e,i(21))},function(t,e,i){(function(t){"use strict";function o(t){this._data=t}function n(t,e){a.call(this,t,e),this._invalidated=!0}function s(t,e){this._constructor="LineToolTriangle";var i=e?e:new c("linetooltriangle");r.call(this,t,new n(this,t),i)}var r=i(67).LineDataSource,a=i(97),l=i(88),h=i(92),c=i(73).DefaultProperty;o.prototype.draw=function(t){var e,i,o;this._data.points.length<2||(t.lineCap="butt",t.strokeStyle=this._data.color,t.lineWidth=this._data.linewidth,t.lineStyle=this._data.linestyle,e=this._data.points[0],i=this._data.points[1],o=2==this._data.points.length?i:this._data.points[2],t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(i.x,i.y),t.lineTo(o.x,o.y),t.lineTo(e.x,e.y),this._data.fillBackground&&(t.fillStyle=TradingView.generateColor(this._data.backcolor,this._data.transparency),t.fill()),t.stroke())},o.prototype.hitTest=function(e){var i,o,n,s,r;return this._data.points.length<2?null:(i=this._data.points[0],o=this._data.points[1],n=this._data.points[2],s=3,r=t.distanceToSegment(i,o,e),r.distance<=s?new l(l.MOVEPOINT):(r=t.distanceToSegment(o,n,e),r.distance<=s?new l(l.MOVEPOINT):(r=t.distanceToSegment(n,i,e),r.distance<=s?new l(l.MOVEPOINT):this._data.fillBackground&&t.pointInTriangle(i,o,n,e)?new l(l.MOVEPOINT_BACKGROUND):null)))},inherit(n,a),n.prototype.update=function(){this._invalidated=!0},n.prototype.updateImpl=function(){a.prototype.update.call(this),this._invalidated=!1},n.prototype.renderer=function(){var t,e;return this._invalidated&&this.updateImpl(),t={},t.points=this._points,t.color=this._source.properties().color.value(),t.linewidth=this._source.properties().linewidth.value(),t.backcolor=this._source.properties().backgroundColor.value(),t.fillBackground=this._source.properties().fillBackground.value(),t.transparency=this._source.properties().transparency.value(),this.isAnchorsRequired()?(e=new h,e.append(new o(t)),this.addAnchors(e),e):new o(t)},inherit(s,r),s.prototype.pointsCount=function(){return 3},s.prototype.title=function(){return"Triangle"},e.TriangleRenderer=o,e.LineToolTriangle=s}).call(e,i(21))},function(t,e,i){(function(e){"use strict";function o(t,e){s.call(this,t,e),this._rendererCache={},this._invalidated=!0}function n(t,e){this._constructor="LineToolTrianglePattern";var i=e?e:new p("linetooltrianglepattern");r.call(this,t,new o(this,t),i)}var s=i(97),r=i(67).LineDataSource,a=i(217).TriangleRenderer,l=i(122).TrendLineRenderer,h=i(98).TextRenderer,c=i(192),d=i(92),p=i(73).DefaultProperty;inherit(o,s),o.prototype.renderer=function(){var t,e,i,o,n,s,p,u,_;return this._invalidated&&(this.updateImpl(),this._invalidated=!1),this._points.length<2?null:(t=this._source.properties(),e=new d,i=this,o=function(e,o){var n={points:[e],text:o,color:t.textcolor.value(),vertAlign:"middle",horzAlign:"center",font:t.font.value(),offsetX:0,offsetY:0,bold:t.bold&&t.bold.value(),italic:t.italic&&t.italic.value(),fontsize:t.fontsize.value(),backgroundColor:i._source.properties().color.value(),backgroundRoundRect:4};return n},n=function(e,o){var n={points:[e,o],width:i._model.timeScale().width(),height:i._source.priceScale().height(),color:i._source.properties().color.value(),linewidth:t.linewidth.value(),linestyle:CanvasEx.LINESTYLE_SOLID,extendleft:!1,extendright:!1,leftend:r.LINEEND_NORMAL,rightend:r.LINEEND_NORMAL};return n},s=n(this._points[0],this._points[1]),e.append(new l(s)),this._points.length>=3&&(s=n(this._points[1],this._points[2]),e.append(new l(s))),4==this._points.length&&(s=n(this._points[2],this._points[3]),e.append(new l(s)),this._intersectPoint?(p=[this._startPoint1,this._startPoint2,this._intersectPoint],u={},u.points=p,u.color=t.color.value(),u.linewidth=t.linewidth.value(),u.backcolor=t.backgroundColor.value(),u.fillBackground=t.fillBackground.value(),u.transparency=t.transparency.value(),e.append(new a(u))):this._intersectPoint1&&this._intersectPoint2&&(p=[this._startPoint1,this._startPoint2,this._intersectPoint2,this._intersectPoint1],u={},u.filled=!0,u.fillBackground=!0,u.points=p,u.color=t.color.value(),u.linewidth=t.linewidth.value(),u.backcolor=t.backgroundColor.value(),u.transparency=t.transparency.value(),e.append(new c(u)))),_=o(this._points[0],"A"),this._points[1].y>this._points[0].y?(_.vertAlign="bottom",_.offsetY=-10):(_.vertAlign="top",_.offsetY=5),e.append(new h(_,this._rendererCache)),_=o(this._points[1],"B"),this._points[1].y<this._points[0].y?(_.vertAlign="bottom",_.offsetY=-10):(_.vertAlign="top",_.offsetY=5),e.append(new h(_,this._rendererCache)),this._points.length>2&&(_=o(this._points[2],"C"),this._points[2].y<this._points[1].y?(_.vertAlign="bottom",_.offsetY=-10):(_.vertAlign="top",_.offsetY=5),e.append(new h(_,this._rendererCache))),this._points.length>3&&(_=o(this._points[3],"D"),this._points[3].y<this._points[2].y?(_.vertAlign="bottom",_.offsetY=-10):(_.vertAlign="top",_.offsetY=5),e.append(new h(_,this._rendererCache))),this.addAnchors(e),e)},o.prototype.update=function(){this._invalidated=!0},o.prototype.updateImpl=function(){var t,i,o,n,r,a,l,h,c,d,p,u;if(s.prototype.update.call(this),this._valid=!1,delete this._intersectPoint,delete this._intersectPoint1,delete this._intersectPoint2,4==this._points.length){if(t=this._points[0],i=this._points[1],o=this._points[2],n=this._points[3],Math.abs(o.x-t.x)<1||Math.abs(n.x-i.x)<1)return;if(r=Math.min(t.x,i.x),r=Math.min(r,o.x),r=Math.min(r,n.x),a=(o.y-t.y)/(o.x-t.x),l=t.y+(r-t.x)*a,h=(n.y-i.y)/(n.x-i.x),c=i.y+(r-i.x)*h,Math.abs(a-h)<1e-6)return;this._startPoint1=new e.Point(r,l),this._startPoint2=new e.Point(r,c),d=(i.y-t.y+(t.x*a-i.x*h))/(a-h),this._valid=!0,d<r&&(p=Math.max(t.x,i.x),p=Math.max(p,o.x),p=Math.max(p,n.x),l=t.y+(p-t.x)*a,c=i.y+(p-i.x)*h,this._startPoint1=new e.Point(p,l),this._startPoint2=new e.Point(p,c)),u=t.y+(d-t.x)*a,this._intersectPoint=new e.Point(d,u)}},inherit(n,r),n.prototype.pointsCount=function(){return 4},n.prototype.title=function(){return"Triangle Pattern"},t.exports=n}).call(e,i(21))},function(t,e,i){"use strict";function o(t,e){a.call(this,t,e),this._rendererCache={},this._numericFormatter=new g,this._invalidated=!0}function n(t,e){this._constructor="LineTool5PointsPattern";var i=e?e:new u("linetool5pointspattern");l.call(this,t,new o(this,t),i)}function s(t,e){this._constructor="LineToolCypherPattern";var i=e?e:new u("linetoolcypherpattern");l.call(this,t,new r(this,t),i)}function r(t,e){a.call(this,t,e),this._rendererCache={},this._numericFormatter=new g,this._invalidated=!0}var a=i(97),l=i(67).LineDataSource,h=i(122).TrendLineRenderer,c=i(217).TriangleRenderer,d=i(98).TextRenderer,p=i(92),u=i(73).DefaultProperty,_=i(75),f=_.DateTimeFormatter,g=_.NumericFormatter;inherit(o,a),o.prototype.renderer=function(){var t,e,i,o,n,s,r,a,u,_;return this._invalidated&&(this.updateImpl(),this._invalidated=!1),this._points.length<2?null:(t=this._source.properties(),e=new p,i=[this._points[0],this._points[1],this._points.length<3?this._points[1]:this._points[2]],o=this,n=function(e,i){var n={points:[e],text:i,color:t.textcolor.value(),vertAlign:"middle",horzAlign:"center",font:t.font.value(),offsetX:0,offsetY:0,bold:t.bold&&t.bold.value(),italic:t.italic&&t.italic.value(),fontsize:t.fontsize.value(),backgroundColor:o._source.properties().color.value(),backgroundRoundRect:4};return n},s=function(t,e){var i={points:[t,e],width:o._model.timeScale().width(),height:o._source.priceScale().height(),color:o._source.properties().color.value(),linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,extendleft:!1,extendright:!1,leftend:l.LINEEND_NORMAL,rightend:l.LINEEND_NORMAL};return i},r={},r.points=i,r.color=t.color.value(),r.linewidth=t.linewidth.value(),r.backcolor=t.backgroundColor.value(),r.fillBackground=t.fillBackground.value(),r.transparency=t.transparency.value(),e.append(new c(r)),this._points.length>3&&(i=[this._points[2],this._points[3],5==this._points.length?this._points[4]:this._points[3]],r={},r.points=i,r.color=t.color.value(),r.linewidth=t.linewidth.value(),r.backcolor=t.backgroundColor.value(),r.fillBackground=t.fillBackground.value(),r.transparency=t.transparency.value(),e.append(new c(r))),this._points.length>=3&&(a=this._points[0].add(this._points[2]).scaled(.5),u=n(a,this._numericFormatter.format(this._ABRetracement)),e.append(new d(u,this._rendererCache))),this._points.length>=4&&(a=this._points[1].add(this._points[3]).scaled(.5),_=s(this._points[1],this._points[3]),e.append(new h(_)),u=n(a,this._numericFormatter.format(this._BCRetracement)),e.append(new d(u,this._rendererCache))),this._points.length>=5&&(a=this._points[2].add(this._points[4]).scaled(.5),u=n(a,this._numericFormatter.format(this._CDRetracement)),e.append(new d(u,this._rendererCache)),_=s(this._points[0],this._points[4]),e.append(new h(_)),a=this._points[0].add(this._points[4]).scaled(.5),u=n(a,this._numericFormatter.format(this._XDRetracement)),e.append(new d(u,this._rendererCache))),u=n(this._points[0],"X"),this._points[1].y>this._points[0].y?(u.vertAlign="bottom",u.offsetY=-10):(u.vertAlign="top",u.offsetY=5),e.append(new d(u,this._rendererCache)),u=n(this._points[1],"A"),this._points[1].y<this._points[0].y?(u.vertAlign="bottom",u.offsetY=-10):(u.vertAlign="top",u.offsetY=5),e.append(new d(u,this._rendererCache)),this._points.length>2&&(u=n(this._points[2],"B"),this._points[2].y<this._points[1].y?(u.vertAlign="bottom",u.offsetY=-10):(u.vertAlign="top",u.offsetY=5),e.append(new d(u,this._rendererCache))),this._points.length>3&&(u=n(this._points[3],"C"),this._points[3].y<this._points[2].y?(u.vertAlign="bottom",u.offsetY=-10):(u.vertAlign="top",u.offsetY=5),e.append(new d(u,this._rendererCache))),this._points.length>4&&(u=n(this._points[4],"D"),this._points[4].y<this._points[3].y?(u.vertAlign="bottom",u.offsetY=-10):(u.vertAlign="top",u.offsetY=5),e.append(new d(u,this._rendererCache))),this.addAnchors(e),e)},o.prototype.update=function(){this._invalidated=!0},o.prototype.updateImpl=function(){var t,e,i,o,n;a.prototype.update.call(this),this._source.points().length>=3&&(t=this._source.points()[0],e=this._source.points()[1],i=this._source.points()[2],this._ABRetracement=Math.round(1e3*Math.abs((i.price-e.price)/(e.price-t.price)))/1e3),this._source.points().length>=4&&(o=this._source.points()[3],this._BCRetracement=Math.round(1e3*Math.abs((o.price-i.price)/(i.price-e.price)))/1e3),this._source.points().length>=5&&(n=this._source.points()[4],this._CDRetracement=Math.round(1e3*Math.abs((n.price-o.price)/(o.price-i.price)))/1e3,this._XDRetracement=Math.round(1e3*Math.abs((n.price-e.price)/(e.price-t.price)))/1e3)},inherit(n,l),n.prototype.pointsCount=function(){return 5},n.prototype.title=function(){return"XABCD Pattern"},n.prototype._tooltipFieldsHash={time0:{title:"Date 1",value:null},price0:{title:"Price 1",value:null},time1:{title:"Date 2",value:null},price1:{title:"Price 2",value:null},time2:{title:"Date 3",value:null},price2:{title:"Price 3",value:null},time3:{title:"Date 4",value:null},price3:{title:"Price 4",value:null},time4:{title:"Date 5",value:null},price4:{title:"Price 5",value:null}},n.prototype._updateTooltip=function(){var t,e,i,o,n,s=this._tooltipFieldsHash,r=this.points().m_values;r[0]&&(e=this._model.timeScale().indexToUserTime(r[0].index),s.time0.value=e?new f(this._model.mainSeries().isDWM()).format(e):0,s.price0.value=this._model.mainSeries()._formatter.format(r[0].price)),r[1]&&(t=this._model.timeScale().indexToUserTime(r[1].index),s.time1.value=t?new f(this._model.mainSeries().isDWM()).format(t):0,s.price1.value=this._model.mainSeries()._formatter.format(r[1].price)),r[2]&&(i=this._model.timeScale().indexToUserTime(r[2].index),s.time2.value=i?new f(this._model.mainSeries().isDWM()).format(i):0,s.price2.value=this._model.mainSeries()._formatter.format(r[2].price)),r[3]&&(o=this._model.timeScale().indexToUserTime(r[3].index),s.time3.value=o?new f(this._model.mainSeries().isDWM()).format(o):0,s.price3.value=this._model.mainSeries()._formatter.format(r[3].price)),r[4]&&(n=this._model.timeScale().indexToUserTime(r[4].index),s.time4.value=t?new f(this._model.mainSeries().isDWM()).format(n):0,s.price4.value=this._model.mainSeries()._formatter.format(r[4].price))},n.prototype.tooltip=function(){return this._updateTooltip(),this._formatTooltip()},inherit(s,n),inherit(r,o),r.prototype.update=function(){this._invalidated=!0},r.prototype.updateImpl=function(){var t,e,i,o,n;a.prototype.update.call(this),this._source.points().length>=3&&(t=this._source.points()[0],e=this._source.points()[1],i=this._source.points()[2],this._ABRetracement=Math.round(1e3*Math.abs((i.price-e.price)/(e.price-t.price)))/1e3),this._source.points().length>=4&&(o=this._source.points()[3],this._BCRetracement=Math.round(1e3*Math.abs((o.price-t.price)/(e.price-t.price)))/1e3),this._source.points().length>=5&&(n=this._source.points()[4],this._CDRetracement=Math.round(1e3*Math.abs((n.price-o.price)/(o.price-i.price)))/1e3,this._XDRetracement=Math.round(1e3*Math.abs((n.price-o.price)/(t.price-o.price)))/1e3)},e.LineTool5PointsPattern=n,e.LineToolCypherPattern=s},function(t,e,i){"use strict";function o(t,e){s.call(this,t,e),this._rendererCache={},this._numericFormatter=new d,this._invalidated=!0}function n(t,e){this._constructor="LineToolThreeDrivers";var i=e?e:new c("linetoolthreedrivers");r.call(this,t,new o(this,t),i)}var s=i(97),r=i(67).LineDataSource,a=i(122).TrendLineRenderer,l=i(98).TextRenderer,h=i(92),c=i(73).DefaultProperty,d=i(75).NumericFormatter;inherit(o,s),o.prototype.renderer=function(){var t,e,i,o,n,s,c,d,p;if(this._invalidated&&(this.updateImpl(),this._invalidated=!1),this._points.length<2)return null;for(t=this._source.properties(),e=new h,i=this,o=function(e,o){var n={points:[e],text:o,color:t.textcolor.value(),vertAlign:"middle",horzAlign:"center",font:t.font.value(),offsetX:0,offsetY:0,bold:t.bold&&t.bold.value(),italic:t.italic&&t.italic.value(),fontsize:t.fontsize.value(),backgroundColor:i._source.properties().color.value(),backgroundRoundRect:4};return n},n=function(e,o,n,s){var a={points:[e,o],width:i._model.timeScale().width(),height:i._source.priceScale().height(),color:TradingView.generateColor(i._source.properties().color.value(),n),linewidth:s?s:t.linewidth.value(),linestyle:CanvasEx.LINESTYLE_SOLID,extendleft:!1,extendright:!1,leftend:r.LINEEND_NORMAL,rightend:r.LINEEND_NORMAL};return a},s=1;s<this._points.length;s++)c=n(this._points[s-1],this._points[s],0),e.append(new a(c));return this._retrace1&&(c=n(this._points[1],this._points[3],70,1),e.append(new a(c)),d=this._points[1].add(this._points[3]).scaled(.5),p=o(d,this._numericFormatter.format(this._retrace1)),e.append(new l(p,this._rendererCache))),this._retrace2&&(c=n(this._points[3],this._points[5],70,1),e.append(new a(c)),d=this._points[5].add(this._points[3]).scaled(.5),p=o(d,this._numericFormatter.format(this._retrace2)),e.append(new l(p,this._rendererCache))),this.addAnchors(e),e},o.prototype.update=function(){this._invalidated=!0},o.prototype.updateImpl=function(){var t,e,i,o,n;s.prototype.update.call(this),delete this._retrace1,delete this._retrace2,this._source.points().length>=4&&(t=this._source.points()[1],e=this._source.points()[2],i=this._source.points()[3],this._retrace1=Math.round(100*Math.abs((i.price-e.price)/(e.price-t.price)))/100),this._source.points().length>=6&&(i=this._source.points()[3],o=this._source.points()[4],n=this._source.points()[5],this._retrace2=Math.round(100*Math.abs((n.price-o.price)/(o.price-i.price)))/100)},inherit(n,r),n.prototype.pointsCount=function(){return 7},n.prototype.title=function(){return"Three Drivers Pattern"},t.exports=n},function(t,e,i){"use strict";function o(t,e){s.call(this,t,e),this._rendererCache={},this._numericFormatter=new u,this._invalidated=!0}function n(t,e){this._constructor="LineToolABCD";var i=e?e:new c("linetoolabcd");r.call(this,t,new o(this,t),i)}var s=i(97),r=i(67).LineDataSource,a=i(122).TrendLineRenderer,l=i(98).TextRenderer,h=i(92),c=i(73).DefaultProperty,d=i(75),p=d.DateTimeFormatter,u=d.NumericFormatter;inherit(o,s),o.prototype.renderer=function(){var t,e,i,o,n,s,c,d,p;return this._invalidated&&(this.updateImpl(),this._invalidated=!1),this._points.length<2?null:(t=this._source.properties(),e=new h,i=this._points,o=this,n=function(e,i){var n={points:[e],text:i,color:t.textcolor.value(),vertAlign:"middle",horzAlign:"center",font:t.font.value(),offsetX:0,offsetY:0,bold:t.bold&&t.bold.value(),italic:t.italic&&t.italic.value(),fontsize:t.fontsize.value(),backgroundColor:o._source.properties().color.value(),backgroundRoundRect:4};return n},s=function(e,i,n,s){var a={points:[e,i],width:o._model.timeScale().width(),height:o._source.priceScale().height(),color:TradingView.generateColor(o._source.properties().color.value(),n),linewidth:s?s:t.linewidth.value(),linestyle:CanvasEx.LINESTYLE_SOLID,extendleft:!1,extendright:!1,leftend:r.LINEEND_NORMAL,rightend:r.LINEEND_NORMAL};return a},c=s(i[0],i[1],0),e.append(new a(c)),i.length>=3&&(c=s(i[1],i[2],0),e.append(new a(c))),4==i.length&&(c=s(i[2],i[3],0),e.append(new a(c))),d=n(this._points[0],"A"),this._points[1].y>this._points[0].y?(d.vertAlign="bottom",d.offsetY=-10):(d.vertAlign="top",d.offsetY=5),e.append(new l(d,this._rendererCache)),d=n(this._points[1],"B"),this._points[1].y<this._points[0].y?(d.vertAlign="bottom",d.offsetY=-10):(d.vertAlign="top",d.offsetY=5),e.append(new l(d,this._rendererCache)),this._points.length>2&&(d=n(this._points[2],"C"),this._points[2].y<this._points[1].y?(d.vertAlign="bottom",d.offsetY=-10):(d.vertAlign="top",d.offsetY=5),e.append(new l(d,this._rendererCache))),this._points.length>3&&(d=n(this._points[3],"D"),this._points[3].y<this._points[2].y?(d.vertAlign="bottom",d.offsetY=-10):(d.vertAlign="top",d.offsetY=5),e.append(new l(d,this._rendererCache))),this._points.length>=3&&(p=this._points[0].add(this._points[2]).scaled(.5),c=s(this._points[0],this._points[2],70,1),e.append(new a(c)),d=n(p,this._numericFormatter.format(this._ABRetracement)),e.append(new l(d,this._rendererCache))),this._points.length>=4&&(p=this._points[1].add(this._points[3]).scaled(.5),c=s(this._points[1],this._points[3],70,1),e.append(new a(c)),d=n(p,this._numericFormatter.format(this._CDRetracement)),e.append(new l(d,this._rendererCache))),this.addAnchors(e),e)},o.prototype.update=function(){this._invalidated=!0},o.prototype.updateImpl=function(){var t,e,i,o;s.prototype.update.call(this),this._source.points().length>=3&&(t=this._source.points()[0],e=this._source.points()[1],i=this._source.points()[2],this._ABRetracement=Math.round(1e3*Math.abs((i.price-e.price)/(e.price-t.price)))/1e3),4==this._source.points().length&&(o=this._source.points()[3],this._CDRetracement=Math.round(1e3*Math.abs((o.price-i.price)/(i.price-e.price)))/1e3)},inherit(n,r),n.prototype.pointsCount=function(){return 4},n.prototype.title=function(){return"ABCD Pattern"},n.prototype._tooltipFieldsHash={time0:{title:"Date 1",value:null},price0:{title:"Price 1",value:null},time1:{title:"Date 2",value:null},price1:{title:"Price 2",value:null},time2:{title:"Date 3",value:null},price2:{title:"Price 3",value:null},time3:{title:"Date 4",value:null},price3:{title:"Price 4",value:null}},n.prototype._updateTooltip=function(){var t,e,i,o,n=this._tooltipFieldsHash,s=this.points().m_values;s[0]&&(t=this._model.timeScale().indexToUserTime(s[0].index),n.time0.value=t?new p(this._model.mainSeries().isDWM()).format(t):0,n.price0.value=this._model.mainSeries()._formatter.format(s[0].price)),s[1]&&(e=this._model.timeScale().indexToUserTime(s[1].index),n.time1.value=e?new p(this._model.mainSeries().isDWM()).format(e):0,n.price1.value=this._model.mainSeries()._formatter.format(s[1].price)),s[2]&&(i=this._model.timeScale().indexToUserTime(s[2].index),n.time2.value=i?new p(this._model.mainSeries().isDWM()).format(i):0,n.price2.value=this._model.mainSeries()._formatter.format(s[2].price)),s[3]&&(o=this._model.timeScale().indexToUserTime(s[3].index),n.time3.value=o?new p(this._model.mainSeries().isDWM()).format(o):0,n.price3.value=this._model.mainSeries()._formatter.format(s[3].price))},n.prototype.tooltip=function(){return this._updateTooltip(),this._formatTooltip()},t.exports=n},function(t,e,i){(function(t,o){"use strict";function n(t,e){h.call(this,t,e),this._rendererCache={},this._invalidated=!0,this._percentageFormatter=new b,this._numericFormatter=new S}function s(t,e,i,o){this._source=t,this._model=e,this._text="",this._invalidated=!0,this._coordinate=0,this._background="black",this._pricePropName=i,this._colorPropName=o}function r(t,e){var i,a,l,h,d,p,u,_,f,g,m=e?e:new y("linetoolriskreward");this._entryPriceAxisView=new s(this,t,"entryPrice","linecolor"),this._stopPriceAxisView=new s(this,t,"stopPrice","stopBackground"),this._profitPriceAxisView=new s(this,t,"targetPrice","profitBackground"),c.call(this,t,new n(this,t),m),this._properties.addExclusion&&(this._properties.addExclusion("stopLevel"),this._properties.addExclusion("profitLevel")),e.stopLevel||e.profitLevel||(i=t.timeScale().visibleBars(),a=i.firstBar(),l=i.lastBar(),h=t.mainSeries().priceRange(a,l),d=t.mainSeries().priceScale(),d.isLog()&&(p=d.logicalToPrice(h.minValue()),u=d.logicalToPrice(h.maxValue()),h=new o(p,u)),d.isPercent()&&(_=t.mainSeries().firstValue(),p=d.priceRange().convertFromPercent(h.minValue(),_),u=d.priceRange().convertFromPercent(h.maxValue(),_),h=new o(p,u)),h&&!h.isEmpty()&&(f=Math.round(.2*h.length()*t.mainSeries().base()),m.merge({stopLevel:f,profitLevel:f}))),g=this,m.stopLevel.listeners().subscribe(this,r.prototype.recalculate),m.stopLevel.listeners().subscribe(null,function(){g.properties().stopPrice._listeners.fire(g.properties().stopPrice)}),m.profitLevel.listeners().subscribe(this,r.prototype.recalculate),m.profitLevel.listeners().subscribe(null,function(){g.properties().targetPrice._listeners.fire(g.properties().targetPrice)}),m.addProperty("entryPrice"),m.entryPrice=new r.PriceProperty(this,0),m.addProperty("stopPrice"),m.stopPrice=new r.StopPriceProperty(this),m.addProperty("targetPrice"),m.targetPrice=new r.TargetPriceProperty(this),this.version=r.version}function a(t,e){this._constructor="LineToolRiskRewardShort";var i=e?e:new y("linetoolriskrewardshort");r.call(this,t,i)}function l(t,e){this._constructor="LineToolRiskRewardLong";var i=e?e:new y("linetoolriskrewardlong");r.call(this,t,i)}var h=i(97),c=i(67).LineDataSource,d=i(122).TrendLineRenderer,p=i(68),u=i(69),_=i(98).TextRenderer,f=i(120).RectangleRenderer,g=i(74),m=i(88),v=i(92),y=i(73).DefaultProperty,w=i(75),b=w.PercentageFormatter,S=w.NumericFormatter;inherit(n,h),n.prototype.i18nCache={pnl:$.t("{0} P&L: {1}"),open:$.t("Open",{
context:"line_tool_position"}),closed:$.t("Closed",{context:"line_tool_position"}),ratio:$.t("Risk/Reward Ratio: {0}"),stop:$.t("Stop: {0} ({1})"),target:$.t("Target: {0} ({1})")},n.prototype._formatInTicks=function(t){var e=this._model.mainSeries().base();return Math.round(t*e)},n.INDEX_ENTRY=0,n.INDEX_CLOSE=1,n.INDEX_ACTUALENTRY=2,n.INDEX_ACTUALCLOSE=3,n.prototype.isLabelVisible=function(){return this.isHoveredSource()||this.isSelectedSource()},n.prototype.update=function(){this._invalidated=!0},n.prototype._updateImpl=function(){var t,e,i,o,s,r,a,l,c;if(h.prototype.update.call(this),this._stopLevel=null,this._profitLevel=null,t=this._model.timeScale(),e=this._source.priceScale(),e&&!e.isEmpty()&&!t.isEmpty()&&0!==this._source.points().length&&0!==this._points.length&&this._model.mainSeries().bars().last()&&!(this._source.points().length<2)&&0!==this._model.mainSeries().bars().length){if(this._isClosed=4==this._source.points().length,this._isClosed){if(i=this._source.points()[n.INDEX_ACTUALCLOSE].price,this._source.points()[n.INDEX_ACTUALCLOSE].index<parseInt(this._source._model.mainSeries().bars().first()))return;o=Math.min(parseInt(this._source._model.mainSeries().bars().last()),this._source.points()[n.INDEX_ACTUALCLOSE].index),this._closeBar=this._source._model.timeScale().indexToCoordinate(o)}else{if(this._source.points()[n.INDEX_CLOSE].index<parseInt(this._source._model.mainSeries().bars().first()))return;o=Math.min(parseInt(this._source._model.mainSeries().bars().last()),this._source.points()[n.INDEX_CLOSE].index),s=this._model.mainSeries().bars().valueAt(o),i=s[TradingView.CLOSE_PLOT],this._closeBar=this._source._model.timeScale().indexToCoordinate(o)}r=this._source.priceScale(),a=this._source.stopPrice(),l=this._source.profitPrice(),this._pl=this._source.points().length>1?this._source.calculatePL(i):0,r.isPercent()&&(c=this._source.ownerSource().firstValue(),a=r.priceRange().convertToPercent(a,c),l=r.priceRange().convertToPercent(l,c),i=r.priceRange().convertToPercent(i,c)),this._entryLevel=this._points[n.INDEX_ENTRY].y,this._stopLevel=e.priceToCoordinate(a),this._profitLevel=e.priceToCoordinate(l),this._closeLevel=e.priceToCoordinate(i),this._closeBar=this._source._model.timeScale().indexToCoordinate(o)}},n.prototype.renderer=function(){var e,i,o,s,r,a,l,h,p,u,g,y,w,b,S,T,C,x,P,L,k,E,I,A,V,M,$,D,B,O,R,z,N,F;return this._invalidated&&(this._updateImpl(),this._invalidated=!1),e=new v,this._points.length<2||this._source.points().length<2?e:(i=this,o=this._source.properties(),s=this._model.timeScale(),r=this._points[n.INDEX_ENTRY].x,a=this._points[n.INDEX_ACTUALENTRY]?this._points[n.INDEX_ACTUALENTRY].x:this._points[n.INDEX_CLOSE].x,l=this._points[n.INDEX_ACTUALCLOSE]?this._points[n.INDEX_ACTUALCLOSE].x:this._points[n.INDEX_CLOSE].x,h=this._points[n.INDEX_CLOSE].x,p=new t.Point(r,this._entryLevel),u=new t.Point(h,this._stopLevel),g={},g.points=[p,u],g.color="white",g.linewidth=0,g.backcolor=o.stopBackground.value(),g.fillBackground=!0,g.transparency=o.stopBackgroundTransparency.value(),e.append(new f(g,new m(m.MOVEPOINT),new m(m.MOVEPOINT))),this._pl<0&&(p=new t.Point(a,this._entryLevel),u=new t.Point(l,this._closeLevel),g={},g.points=[p,u],g.color="white",g.linewidth=0,g.backcolor=o.stopBackground.value(),g.fillBackground=!0,y=.01*o.stopBackgroundTransparency.value(),w=100*(1-y*y*y),b=100-w,g.transparency=b,e.append(new f(g,new m(m.MOVEPOINT),new m(m.MOVEPOINT)))),p=new t.Point(r,this._entryLevel),u=new t.Point(h,this._profitLevel),g={},g.points=[p,u],g.color="white",g.linewidth=0,g.backcolor=o.profitBackground.value(),g.fillBackground=!0,g.transparency=o.profitBackgroundTransparency.value(),e.append(new f(g,new m(m.MOVEPOINT),new m(m.MOVEPOINT))),this._pl>0&&(p=new t.Point(a,this._entryLevel),u=new t.Point(l,this._closeLevel),g={},g.points=[p,u],g.color="white",g.linewidth=0,g.backcolor=o.profitBackground.value(),g.fillBackground=!0,y=.01*o.profitBackgroundTransparency.value(),S=100*(1-y*y*y),T=100-S,g.transparency=T,e.append(new f(g,new m(m.MOVEPOINT),new m(m.MOVEPOINT)))),C=function(t,o,n){var s={};s.points=[t,o],s.width=i._model.timeScale().width(),s.height=i._source.priceScale().height(),s.color=n?n:i._source.properties().linecolor.value(),s.linewidth=i._source.properties().linewidth.value(),s.linestyle=CanvasEx.LINESTYLE_SOLID,s.extendleft=!1,s.extendright=!1,s.leftend=c.LINEEND_NORMAL,s.rightend=c.LINEEND_NORMAL,e.append(new d(s))},this._points[n.INDEX_ACTUALENTRY]&&(p=this._points[n.INDEX_ACTUALENTRY],u=this._isClosed?this._points[n.INDEX_ACTUALCLOSE]:new t.Point(this._closeBar,this._closeLevel),g={},g.points=[p,u],g.width=i._model.timeScale().width(),g.height=i._source.priceScale().height(),g.color=i._source.properties().linecolor.value(),g.linewidth=1,g.linestyle=CanvasEx.LINESTYLE_DASHED,g.extendleft=!1,g.extendright=!1,g.leftend=c.LINEEND_NORMAL,g.rightend=c.LINEEND_ARROW,e.append(new d(g))),i=this,x=function(t,n,s,r,a,l){if(i.isLabelVisible()||TradingView.printing){var h={};h.points=[t],h.text=n,h.color=o.textcolor.value(),h.font=o.font.value(),h.offsetX=3,h.offsetY=a,h.vertAlign=r,h.horzAlign="center",h.backgroundRoundRect=4,h.backgroundColor=TradingView.resetTransparency(s),h.fontsize=o.fontsize.value(),h.backgroundHorzInflate=4,h.backgroundVertInflate=2,l&&(h.borderColor=l),e.append(new _(h,i._rendererCache))}},P=this._source.entryPrice(),L=this._source.stopPrice(),k=this._source.profitPrice(),E=Math.abs(L-P),I=Math.round(1e4*E/P)/100,A=Math.abs(k-P),V=Math.round(1e4*A/P)/100,M=Math.abs(P-k)/Math.abs(P-L),p=new t.Point(r,this._points[n.INDEX_ENTRY].y),u=new t.Point(h,this._points[n.INDEX_ENTRY].y),C(p,u),$=new t.Point((r+h)/2,Math.round(this._points[0].y)+.5),D="",this._points[1]&&void 0!==this._pl&&(B=this._isClosed?this.i18nCache.closed:this.i18nCache.open,D=this.i18nCache.pnl.format(B,this._source.priceScale().formatter().format(this._pl))+"\n"),D+=this.i18nCache.ratio.format(this._numericFormatter.format(Math.round(100*M)/100))+" ",O=o.linecolor.value(),this._pl<0?O=o.stopBackground.value():this._pl>0&&(O=o.profitBackground.value()),x($,D,O,"middle",0,"white"),p=new t.Point(r,this._stopLevel),u=new t.Point(h,this._stopLevel),C(p,u,o.stopBackground.value()),$=new t.Point((r+h)/2,this._stopLevel),D=this.i18nCache.stop.format(this._source.priceScale().formatter().format(E),this._percentageFormatter.format(I)),x($,D,o.stopBackground.value(),P<L?"bottom":"top",P<L?-12:-1),p=new t.Point(r,this._profitLevel),u=new t.Point(h,this._profitLevel),C(p,u,o.profitBackground.value()),$=new t.Point((r+h)/2,this._profitLevel),D=this.i18nCache.target.format(this._source.priceScale().formatter().format(A),this._percentageFormatter.format(V)),x($,D,o.profitBackground.value(),P<L?"top":"bottom",P<L?-1:-12),this.isAnchorsRequired()&&(R=this._points[0].clone(),R.data=0,z=new t.Point(r,this._stopLevel),z.data=1,N=new t.Point(r,this._profitLevel),N.data=2,F=new t.Point(h,R.y),F.data=3,e.append(this.createLineAnchor({points:[R,z,N,F]}))),e)},inherit(s,p),s.prototype.update=function(){this._invalidated=!0},s.prototype.updateImpl=function(){if(0!==this._source.points().length&&this._source.priceScale()&&!this._source.priceScale().isEmpty()){var t=this._source.properties()[this._pricePropName].value();this._background=this._source.properties()[this._colorPropName].value(),this._coordinate=this._source.priceScale().priceToCoordinate(t),this._text=this._source.priceScale()?this._source.priceScale().formatter().format(t):""}},s.prototype.renderer=function(){this._invalidated&&(this.updateImpl(),this._invalidated=!1);var t={text:this._text,coordinate:this._coordinate,color:this.color(),background:TradingView.resetTransparency(this._background),visible:!0};return new u(t)},inherit(r,c),r.version=2,r.prototype.i18nCache={title:$.t("Risk/Reward")},r.prototype.migrateVersion=function(t,e,i){var o,n,s,r;1==t&&this._points.length>=1&&(o=[],o.push(this._points[0]),n=this._points[0],n={price:n.price,index:n.index+50},o.push(n),this._points[1]&&o.push(this._points[1]),this._points[2]&&o.push(this._points[2]),this._points=o,this._timePoint.length>=1&&(s=[],n=this._timePoint[0],s.push(n),r={price:n.price,time_t:n.time_t,offset:n.offset+50},s.push(r),this._timePoint[1]&&o.push(this._points[1]),this._timePoint[2]&&o.push(this._points[2]),this._timePoint=s))},r.prototype.checkAlert=function(){this.recalculate()},r.prototype.priceAxisViews=function(t,e){return this._isActualSymbol?e!==this.priceScale()||this._model.paneForSource(this)!==t?null:[this._entryPriceAxisView,this._stopPriceAxisView,this._profitPriceAxisView]:null},r.prototype.updateAllViews=function(){this._isActualSymbol&&this._properties.visible.value()&&(g.hideAllDrawings().value()&&this.userEditEnabled()||(c.prototype.updateAllViews.call(this),this._entryPriceAxisView.update(),this._stopPriceAxisView.update(),this._profitPriceAxisView.update()))},r.prototype.setPoint=function(t,e){var i,o=this.priceScale();switch(o.isPercent()&&(i=this.ownerSource().firstValue(),e.price=o.priceRange().convertFromPercent(e.price,i)),t){case 0:e.price=this._roundPrice(e.price),o.isPercent()&&(e.price=o.priceRange().convertToPercent(e.price,i)),c.prototype.setPoint.call(this,t,e),this.recalculate();break;case 1:this.properties().stopPrice.setValue(this.preparseStopPrice(e.price));break;case 2:this.properties().targetPrice.setValue(this.preparseProfitPrice(e.price));break;case 3:e.price=this._roundPrice(e.price),o.isPercent()&&(e.price=o.priceRange().convertToPercent(e.price,i)),c.prototype.setPoint.call(this,1,e),this.recalculate()}},r.PriceProperty=function(t,e){c.PointPriceProperty.call(this,t,e)},inherit(r.PriceProperty,c.PointPriceProperty),r.PriceProperty.prototype.setValue=function(t){var e=this._lineSource.points()[this._pointIndex];e.price=parseFloat(t),this._lineSource.setPoint(this._pointIndex,e),this._lineSource.recalculate(),this._lineSource._model.updateSource(this._lineSource),this._listeners.fire(this),this._lineSource.endChanging()},r.StopPriceProperty=function(t){r.PriceProperty.call(this,t,1)},inherit(r.StopPriceProperty,r.PriceProperty),r.StopPriceProperty.prototype.value=function(){var t=this._lineSource.stopPrice(),e=this._lineSource.ownerSource().formatter(),i=e.parse(e.format(t));return i.price?i.price:i.value},r.StopPriceProperty.prototype.setValue=function(t){var e=Math.round(Math.abs(t-this._lineSource.entryPrice())*this._lineSource._model.mainSeries().base());this._lineSource.properties().stopLevel.setValue(e),this._lineSource.properties().stopLevel.listeners().fire(this._lineSource.properties().stopLevel)},r.TargetPriceProperty=function(t){r.PriceProperty.call(this,t,2)},inherit(r.TargetPriceProperty,r.PriceProperty),r.TargetPriceProperty.prototype.value=function(){var t=this._lineSource.profitPrice(),e=this._lineSource.ownerSource().formatter(),i=e.parse(e.format(t));return i.price?i.price:i.value},r.TargetPriceProperty.prototype.setValue=function(t){var e=Math.round(Math.abs(t-this._lineSource.entryPrice())*this._lineSource._model.mainSeries().base());this._lineSource.properties().profitLevel.setValue(e),this._lineSource.properties().profitLevel.listeners().fire(this._lineSource.properties().profitLevel)},r.prototype.pointsCount=function(){return 1},r.prototype.title=function(){return this.i18nCache.title},r.prototype.addPoint=function(t){var e,i,o,n=$.extend({},t),s=this.priceScale();return s.isPercent()&&(e=this.ownerSource().firstValue(),n.price=s.priceRange().convertFromPercent(n.price,e)),n.price=this._roundPrice(n.price),this._points.push(n),i={price:n.price,index:n.index+50},this._points.push(i),o=this.calculateActualEntry(n,i),o&&(this._points.push(o),i=this.findClosePoint(o,i),i&&this._points.push(i)),this._lastPoint=null,this.normalizePoints(),this.createServerPoints(),!0},r.prototype._roundPrice=function(t){var e=this._model.mainSeries().base(),i=Math.round(t*e);return i/e},r.prototype.recalculate=function(){var t,e,i,o,n;this.properties().interval.value()==this._model.mainSeries().interval()&&0!==this.points().length&&(t=this.properties().targetPrice.value(),e=this.properties().stopPrice.value(),i=[this._points[0],this._points[1]],o=this.calculateActualEntry(this.points()[0],this.points()[1]),o&&(i.push(o),n=this.findClosePoint(o,this.points()[1]),n&&i.push(n)),this._points=i,t!==this.properties().targetPrice.value()&&this.properties().targetPrice._listeners.fire(this.properties().targetPrice),e!==this.properties().stopPrice.value()&&this.properties().stopPrice._listeners.fire(this.properties().stopPrice))},r.prototype.startMoving=function(t){t.price=this._roundPrice(t.price),c.prototype.startMoving.call(this,t)},r.prototype.move=function(t){t.price=this._roundPrice(t.price),c.prototype.move.call(this,t),this.recalculate(),this._entryPriceAxisView.update()},r.prototype.correctPoints=function(t){c.prototype.correctPoints.call(this,[t[0],t[1]])},r.prototype.entryPrice=function(){return this.points()[0].price},r.prototype.findClosePoint=function(t,e){var i,o,n,s=this._model.mainSeries().bars(),r=parseInt(s.first(),10),a=Math.max(t.index,r),l=(t.price,parseInt(s.last(),10));for(i=a;i<=Math.min(l,e.index);i++)if(o=s.valueAt(i),n=this.checkStopPrice(o),null!=n)return{index:i,price:n};return null},r.prototype.calculateActualEntry=function(t,e){var i,o,n=this._model.mainSeries().bars(),s=parseInt(n.first(),10),r=Math.max(t.index,s),a=t.price,l=parseInt(n.last(),10);for(i=r;i<=Math.min(l,e.index);i++)if(o=n.valueAt(i),o[TradingView.HIGH_PLOT]>=a&&o[TradingView.LOW_PLOT]<=a)return{index:i,price:a};return null},inherit(a,r),a.prototype.i18nCache={title:$.t("Risk/Reward short")},a.prototype.title=function(){return this.i18nCache.title},a.prototype.stopPrice=function(){return this.entryPrice()+this.properties().stopLevel.value()/this._model.mainSeries().base()},a.prototype.profitPrice=function(){return this.entryPrice()-this.properties().profitLevel.value()/this._model.mainSeries().base()},a.prototype.calculatePL=function(t){return this.entryPrice()-t},a.prototype.preparseStopPrice=function(t){t=this._roundPrice(t);var e=this.entryPrice()+1/this._model.mainSeries().base();return Math.max(t,e)},a.prototype.preparseProfitPrice=function(t){t=this._roundPrice(t);var e=this.entryPrice()-1/this._model.mainSeries().base();return Math.min(t,e)},a.prototype.checkStopPrice=function(t){var e=this.stopPrice(),i=this.profitPrice();return t[TradingView.HIGH_PLOT]>=e?this.stopPrice():t[TradingView.LOW_PLOT]<=i?this.profitPrice():null},l.prototype.i18nCache={title:$.t("Risk/Reward long")},inherit(l,r),l.prototype.stopPrice=function(){return this.entryPrice()-this.properties().stopLevel.value()/this._model.mainSeries().base()},l.prototype.profitPrice=function(){return this.entryPrice()+this.properties().profitLevel.value()/this._model.mainSeries().base()},l.prototype.calculatePL=function(t){return t-this.entryPrice()},l.prototype.preparseStopPrice=function(t){t=this._roundPrice(t);var e=this.entryPrice()-1/this._model.mainSeries().base();return Math.min(t,e)},l.prototype.preparseProfitPrice=function(t){t=this._roundPrice(t);var e=this.entryPrice()+1/this._model.mainSeries().base();return Math.max(t,e)},l.prototype.checkStopPrice=function(t){var e=this.stopPrice(),i=this.profitPrice();return t[TradingView.LOW_PLOT]<=e?this.stopPrice():t[TradingView.HIGH_PLOT]>=i?this.profitPrice():null},l.prototype.title=function(){return this.i18nCache.title},e.LineToolRiskReward=r,e.LineToolRiskRewardLong=l,e.LineToolRiskRewardShort=a}).call(e,i(21),i(78))},function(t,e,i){(function(e){"use strict";function o(t,e){s.call(this,t,e),this._invalidated=!0}function n(t,e){this._constructor="LineToolPolyline";var i;e?i=e:(i=new h("linetoolpolyline"),i.filled.setValue(!1)),r.call(this,t,new o(this,t),i),i.addExclusion("filled")}var s=i(97),r=i(67).LineDataSource,a=i(192),l=i(92),h=i(73).DefaultProperty;inherit(o,s),o.prototype.update=function(){this._invalidated=!0},o.prototype.updateImpl=function(){s.prototype.update.call(this),this._invalidated=!1},o.prototype.renderer=function(){var t,e;return this._invalidated&&this.updateImpl(),t={},t.points=this._points,t.color=this._source.properties().linecolor.value(),t.linewidth=this._source.properties().linewidth.value(),t.linestyle=this._source.properties().linestyle.value(),t.filled=this._source.properties().filled.value(),t.backcolor=this._source.properties().backgroundColor.value(),t.fillBackground=this._source.properties().fillBackground.value(),t.transparency=this._source.properties().transparency.value(),this.isAnchorsRequired()?(e=new l,e.append(new a(t)),this.addAnchors(e),e):new a(t)},inherit(n,r),n.prototype.pointsCount=function(){return-1},n.prototype.title=function(){return"Polyline"},n.prototype.addPoint=function(t){var i,o,n,s,a,l,h,c,d,p,u,_,f=this._model.timeScale().indexToCoordinate(t.index),g=t.price,m=null;if(this.priceScale().isPercent()&&(m=this.ownerSource().firstValue()),i=this.priceScale().priceToCoordinate(g),o=5,this._points.length>0){if(n=this._points[this._points.length-1],s=this._model.timeScale().indexToCoordinate(n.index),a=n.price,this.priceScale().isPercent()&&(a=this.priceScale().priceRange().convertToPercent(a,m)),l=this.priceScale().priceToCoordinate(a),h=new e.Point(f,i).substract(new e.Point(s,l)).length(),h<o)return this._lastPoint=null,this.normalizePoints(),this.createServerPoints(),!0;if(c=this._points[0],d=this._model.timeScale().indexToCoordinate(c.index),p=c.price,this.priceScale().isPercent()&&(p=this.priceScale().priceRange().convertToPercent(p,m)),u=this.priceScale().priceToCoordinate(p),_=new e.Point(f,i).substract(new e.Point(d,u)).length(),_<o)return this._properties.filled.setValue(!0),this._lastPoint=null,this.normalizePoints(),this.createServerPoints(),!0}return r.prototype.addPoint.call(this,t)},n.prototype.setPoint=function(t,i){var o,n,s,a,l,h,c;r.prototype.setPoint.call(this,t,i),this._model.timeScale().isEmpty()||this.priceScale().isEmpty()||t!==this._points.length-1&&0!==t||(o=5,n=this._model.timeScale().indexToCoordinate(i.index),s=this.priceScale().priceToCoordinate(i.price),a=t===this._points.length-1?this._points[0]:this._points[this._points.length-1],l=this._model.timeScale().indexToCoordinate(a.index),h=this.priceScale().priceToCoordinate(a.price),c=new e.Point(n,s).substract(new e.Point(l,h)).length(),c<o&&this._properties.filled.setValue(!0))},t.exports=n}).call(e,i(21))},function(t,e,i){(function(e){"use strict";function o(t){this._data=t,this._targetFontSize1=11,this._targetFontSize2=11,this._targetFontSize3=14,this._font="Arial",this._sourceFontSize1=12,this._sourceFontSize2=10}function n(t,e){r.call(this,t,e),this._clockWhite=d("prediction-clock-white",TradingView.wrapUrl("images/prediction-clock-white.png")),this._clockBlack=d("prediction-clock-black",TradingView.wrapUrl("images/prediction-clock-black.png")),this._successIcon=d("prediction-success-white",TradingView.wrapUrl("images/prediction-success-white.png")),this._failureIcon=d("prediction-failure-white",TradingView.wrapUrl("images/prediction-failure-white.png")),this._percentageFormatter=new f,this._invalidated=!0}function s(t,e){this._constructor="LineToolPrediction";var i=e?e:new u("linetoolprediction");i.merge({status:s.ALERT_STATUS_WAITING}),a.call(this,t,new n(this,t),i)}var r=i(97),a=i(67).LineDataSource,l=i(43),h=i(88),c=i(92),d=i(225),p=i(59).RGBColor,u=i(73).DefaultProperty,_=i(75),f=_.PercentageFormatter,g=_.DateFormatter,m=_.TimeFormatter,v=_.TimeSpanFormatter;o.prototype.drawBalloon=function(t,i,o,n,s,r){var a,l,h=6,c=5,d=5,p=r||20,u=3;return t.beginPath(),"down"===s?(a=new e.Point(i.x-p,i.y-h-d-n),t.moveTo(a.x+u,a.y),t.lineTo(a.x+o-u,a.y),t.arcTo(a.x+o,a.y,a.x+o,a.y+u,u),t.lineTo(a.x+o,a.y+n-u),t.arcTo(a.x+o,a.y+n,a.x+o-u,a.y+n,u),t.lineTo(a.x+p+c,a.y+n),t.lineTo(a.x+p,a.y+n+d),t.lineTo(a.x+p-c,a.y+n),t.lineTo(a.x+u,a.y+n),t.arcTo(a.x,a.y+n,a.x,a.y+n-u,u),t.lineTo(a.x,a.y+u),t.arcTo(a.x,a.y,a.x+u,a.y,u),a):(l=new e.Point(i.x-p,i.y+h+d+n),t.moveTo(l.x+u,l.y),t.lineTo(l.x+o-u,l.y),t.arcTo(l.x+o,l.y,l.x+o,l.y-u,u),t.lineTo(l.x+o,l.y-n+u),t.arcTo(l.x+o,l.y-n,l.x+o-u,l.y-n,u),t.lineTo(l.x+p+c,l.y-n),t.lineTo(l.x+p,l.y-n-d),t.lineTo(l.x+p-c,l.y-n),t.lineTo(l.x+u,l.y-n),t.arcTo(l.x,l.y-n,l.x,l.y-n+u,u),t.lineTo(l.x,l.y-u),t.arcTo(l.x,l.y,l.x+u,l.y,u),new e.Point(l.x,l.y-n))},o.prototype.drawTargetLabel=function(t){var e,i,o,n,r,a,l,h,c,d,p,u,_,f,g,m,v,y,w,b,S,T,C,x=this._data.points[1];if(t.save(),t.translate(.5,.5),t.font="normal "+this._targetFontSize3+"px "+this._font,e=1.5*this._targetFontSize1+1.5*this._targetFontSize2+3,i=t.measureText(this._data.targetLine1).width,o=t.measureText(this._data.targetLine2).width,t.font="normal "+this._targetFontSize2+"px "+this._font,n=t.measureText(this._data.targetLine3).width,r=t.measureText(this._data.targetLine4).width,a=Math.max(i+o,n+r+10)+20,l="up"===this._data.direction?"down":"up",h=x.x+a-t.canvas.width+5,h=Math.max(20,Math.min(a-15,h)),c=this.drawBalloon(t,x,a,e,l,h),t.save(),t.fillStyle=TradingView.generateColor(this._data.targetBackColor,this._data.transparency),t.fill(),t.restore(),t.save(),t.lineWidth=2,t.strokeStyle=TradingView.generateColor(this._data.targetStrokeColor,this._data.transparency),t.stroke(),t.restore(),d=3,t.beginPath(),t.arc(x.x,x.y,d,0,2*Math.PI,!1),t.fillStyle=this._data.centersColor,t.fill(),t.textAlign="left",p=6,u=4,t.fillStyle=this._data.targetTextColor,t.font="normal "+this._targetFontSize3+"px "+this._font,t.fillText(this._data.targetLine1,c.x+p,c.y+this._targetFontSize1+u),_=13,f=15,g=5,t.fillText(this._data.targetLine2,c.x+p+i+g,c.y+this._targetFontSize1+u),t.font="normal "+this._targetFontSize2+"px "+this._font,m=c.y+this._targetFontSize1+2*u+this._targetFontSize2,t.fillText(this._data.targetLine3,c.x+p,m),t.drawImage(this._data.clockWhite,c.x+p+n+6,m-this._targetFontSize2+3),t.fillText(this._data.targetLine4,c.x+p+n+_+5,m),!this._data.status)return void t.restore();switch(v=this._targetFontSize1+4,t.font="bold "+this._targetFontSize1+"px "+this._font,this._data.status){case s.ALERT_STATUS_SUCCESS:y=$.t("SUCCESS"),w=TradingView.generateColor(this._data.successBackground,this._data.transparency),b=this._data.successTextColor,S=this._data.successIcon;break;case s.ALERT_STATUS_FAILURE:y=$.t("FAILURE"),w=TradingView.generateColor(this._data.failureBackground,this._data.transparency),b=this._data.failureTextColor,S=this._data.failureIcon}T=t.measureText(y).width,C=Math.round((a-T)/2),t.fillStyle=w,"up"===this._data.direction?(t.roundRect(c.x-1,c.y-v-2,a+2,v,5),t.fill(),t.fillStyle=b,t.fillText(y,c.x+C,c.y-5),t.drawImage(S,c.x+C-13,c.y-14)):(t.roundRect(c.x-1,c.y+e+3,a+2,v,5),t.fill(),t.fillStyle=b,t.fillText(y,c.x+C,c.y+e+v-1),t.drawImage(S,c.x+C-13,c.y+e+5)),t.restore()},o.prototype.drawStartLabel=function(t){var e,i,o,n,s,r,a,l,h;t.save(),t.translate(.5,.5),t.font="normal "+this._sourceFontSize1+"px "+this._font,e=1.5*this._sourceFontSize1+1.5*this._sourceFontSize2,i=t.measureText(this._data.sourceLine1).width,t.font="normal "+this._fontsize2+"px "+this._font,o=t.measureText(this._data.sourceLine2).width,n=Math.max(i,o)-5,s=this._data.points[0],r=this.drawBalloon(t,s,n,e,this._data.direction),t.fillStyle=TradingView.generateColor(this._data.sourceBackColor,this._data.transparency),t.fill(),t.lineWidth=2,t.strokeStyle=TradingView.generateColor(this._data.sourceStrokeColor,this._data.transparency),t.stroke(),a=3,t.beginPath(),t.arc(s.x,s.y,a,0,2*Math.PI,!1),t.fillStyle=this._data.centersColor,t.fill(),t.textAlign="left",l=3,h=2,t.fillStyle=this._data.sourceTextColor,t.font="normal "+this._sourceFontSize1+"px "+this._font,t.fillText(this._data.sourceLine1,r.x+l,r.y+this._sourceFontSize1+h),t.font="normal "+this._sourceFontSize2+"px "+this._font,t.fillText(this._data.sourceLine2,r.x+l,r.y+this._sourceFontSize1+2*h+this._sourceFontSize2),t.restore()},o.prototype.draw=function(t){var i,o,n,s,r,a,l,h,c,d,p,u,_,f,g,m,v;if(!(this._data.points.length<2)){if(t.lineCap="butt",t.strokeStyle=this._data.color,t.lineWidth=this._data.linewidth,t.lineStyle=this._data.linestyle,i=this._data.points[0],o=this._data.points[1],n=new e.Point(i.y,o.x),s=o.substract(i),Math.abs(s.x)<1||Math.abs(s.y)<1?(t.beginPath(),t.moveTo(i.x,i.y),t.lineTo(o.x,o.y),t.stroke()):(t.save(),t.beginPath(),t.translate(i.x,i.y),t.scale(1,s.y/s.x),t.moveTo(0,0),t.arcTo(s.x,0,s.x,s.x,Math.abs(s.x)),t.lineTo(s.x,s.x),t.restore(),t.stroke()),this.drawTargetLabel(t),this.drawStartLabel(t),r=Math.max(8,4*this._data.linewidth),t.fillStyle=this._data.color,a=s.y<0?1:-1,Math.abs(s.x)<1||Math.abs(s.y)<1)l=Math.atan(s.x/s.y);else{if(h=Math.abs(s.x),c=Math.abs(s.y),d=Math.PI*(3*(h+c)-Math.sqrt((3*h+c)*(3*c+h))),p=d/4,u=0,_=Math.PI/2,f=(u+_)/2,s.length()>r)for(;;){if(g=h*Math.sin(f),m=c*(1-Math.cos(f)),v=Math.sqrt((g-h)*(g-h)+(m-c)*(m-c)),Math.abs(v-r)<1)break;v>r?u=f:_=f,f=(u+_)/2}l=Math.atan((h-g)/(c-m)),s.x*s.y<0&&(l=-l)}t.save(),t.beginPath(),t.translate(o.x,o.y),t.rotate(-l),t.moveTo(0,0),t.lineTo(-r/2,a*r),t.lineTo(r/2,a*r),t.lineTo(0,0),t.restore(),t.fill()}},o.prototype.targetLabelHitTest=function(t){var e,i,o,n,s,r,a,l,c,d=this._data.points[1],p=1.5*this._targetFontSize1+1.5*this._targetFontSize2,u=this._targetFontSize1*this._data.targetLine1.length,_=this._targetFontSize1*this._data.targetLine2.length,f=this._targetFontSize2*this._data.targetLine3.length,g=this._targetFontSize2*this._data.targetLine4.length;return this._data.status&&(p+=1.5*this._targetFontSize1),e=Math.max(u+_,f+g)-20,i=20,o=5,n="up"===this._data.direction?-1:1,s=d.x-i,r=d.y+o*n,a=d.y+(o+p)*n,l=Math.min(r,a),c=Math.max(r,a),t.x>=s&&t.x<=s+e&&t.y>=l&&t.y<=c?new h(h.MOVEPOINT):null},o.prototype.sourceLabelHitTest=function(t){var e=1.5*this._sourceFontSize1+1.5*this._sourceFontSize2,i=this._sourceFontSize1*this._data.sourceLine1.length,o=this._sourceFontSize2*this._data.sourceLine2.length,n=Math.max(i,o),s=this._data.points[0],r=20,a=5,l="up"===this._data.direction?1:-1,c=s.x-r,d=s.y+a*l,p=s.y+(a+e)*l,u=Math.min(d,p),_=Math.max(d,p);return t.x>=c&&t.x<=c+n&&t.y>=u&&t.y<=_?new h(h.MOVEPOINT):null},o.prototype.hitTest=function(t){var i,o,n,s,r,a,l,c,d,p;return this._data.points.length<2?null:(i=this._data.points[0],o=this._data.points[1],n=o.substract(i),s=new e.Point(i.y,o.x),n=o.substract(i),r=t.substract(i),a=Math.abs(n.x),l=Math.abs(n.y),c=e.sign(n.y)*(l-l*Math.sqrt(1-r.x*r.x/(a*a))),d=3,Math.abs(c-r.y)<d?new h(h.MOVEPOINT):(p=this.targetLabelHitTest(t),p?p:this.sourceLabelHitTest(t)))},inherit(n,r),n.prototype.renderer=function(){var t,e;return this._invalidated&&(this.updateImpl(),this._invalidated=!1),t={},t.points=this._points,t.color=this._source.properties().linecolor.value(),t.linewidth=this._source.properties().linewidth.value(),t.targetLine1=this._targetLine1,t.targetLine2=this._targetLine2,t.targetLine3=this._targetLine3,t.targetLine4=this._targetLine4,t.status=this._source.properties().status.value(),t.transparency=this._source.properties().transparency.value(),t.targetBackColor=this._source.properties().targetBackColor.value(),t.targetStrokeColor=this._source.properties().targetStrokeColor.value(),t.targetTextColor=this._source.properties().targetTextColor.value(),t.sourceBackColor=this._source.properties().sourceBackColor.value(),t.sourceStrokeColor=this._source.properties().sourceStrokeColor.value(),t.sourceTextColor=this._source.properties().sourceTextColor.value(),t.successBackground=this._source.properties().successBackground.value(),t.successTextColor=this._source.properties().successTextColor.value(),t.failureBackground=this._source.properties().failureBackground.value(),t.failureTextColor=this._source.properties().failureTextColor.value(),t.intermediateBackColor=this._source.properties().intermediateBackColor.value(),t.intermediateTextColor=this._source.properties().intermediateTextColor.value(),t.sourceLine1=this._sourceLine1,t.sourceLine2=this._sourceLine2,t.direction=this._direction,t.clockWhite=this._clockWhite,t.clockBlack=this._clockBlack,t.successIcon=this._successIcon,t.failureIcon=this._failureIcon,t.finished=this._finished,t.centersColor=new p(this._model._properties.paneProperties.background._value).blackWhiteContrast(),this.isAnchorsRequired()?(e=new c,e.append(new o(t)),this.addAnchors(e),e):new o(t)},n.prototype.update=function(){this._invalidated=!0},n.prototype.updateImpl=function(){var t,e,i,o,n,a,h,c,d,p,u,_;r.prototype.update.call(this),this._targetLine1="",this._targetLine2="",this._targetLine3="",this._targetLine4="",this._source.points().length<2||this._source.priceScale()&&(t=this._source.points()[1],e=this._source.points()[0],this._targetLine3=this._source.priceScale().formatter().format(t.price),i=t.price-e.price,o=i<0?"-":"+",this._targetLine1=this._source.priceScale().formatter().format(Math.abs(i)),n=Math.abs(Math.round(1e4*(i/e.price))/100),this._targetLine1=o+this._targetLine1+" ("+o+this._percentageFormatter.format(n)+")",a=this._model.timeScale().indexToUserTime(e.index),h=this._model.timeScale().indexToUserTime(t.index),c=e.time&&t.time,c&&(a=TradingView.isString(e.time)?new Date(Date.parse(e.time)):e.time,h=TradingView.isString(t.time)?new Date(Date.parse(t.time)):t.time),d=this._model.mainSeries().isDWM(),p=l.kind(this._model.mainSeries().interval())===l.SECONDS,h&&a&&(this._targetLine4=(new g).format(h),d||(this._targetLine4=this._targetLine4+"  "+new m(p?"%h:%m:%s":"%h:%m").format(h)),u=(h.valueOf()-a.valueOf())/1e3,this._targetLine2=$.t("in",{context:"dates"})+" "+(new v).format(u)),this._sourceLine1=this._source.priceScale().formatter().format(e.price),this._sourceLine2="",_=this._model.timeScale().indexToUserTime(e.index),_&&(this._sourceLine2=(new g).format(_),d||(this._sourceLine2=this._sourceLine2+" "+new m(p?"%h:%m:%s":"%h:%m").format(_))),this._direction=this._source.direction()===s.DIRECTION_UP?"up":"down",this._finished=this._model.lineBeingCreated()!==this._source&&this._model.lineBeingEdited()!==this._source&&this._model.sourceBeingMoved()!==this._source)},s.ALERT_STATUS_WAITING=0,s.ALERT_STATUS_SUCCESS=1,s.ALERT_STATUS_FAILURE=2,s.DIRECTION_UP=1,s.DIRECTION_DOWN=2,inherit(s,a),s.prototype.status=function(){return this._properties.status.value()},s.prototype.setStatus=function(t){return this._properties.status.setValue(t)},s.prototype.pointsCount=function(){return 2},s.prototype.title=function(){return"Forecast"},s.prototype.restorePoints=function(t,e,i){a.prototype.restorePoints.call(this,t,e,i),this.checkAlert()},s.prototype.checkAlert=function(){var t,e,i,o,n,r,a;if(!(this._points.length<2||this._model.mainSeries().bars().isEmpty())){if(t=this._points[1],this.status())return void(t.index>this._model.timeScale().points().lastTimePointIndex()&&this.setStatus(s.ALERT_STATUS_WAITING));e=this._model.mainSeries().bars().last().value[TradingView.TIME_PLOT],i=this._model.timeScale().indexToTimePoint(t.index),i&&(o=i.valueOf()/1e3,n=this._model.mainSeries().bars().valueAt(t.index),r=this.direction(),r===s.DIRECTION_UP&&n[TradingView.HIGH_PLOT]>=t.price?this.setStatus(s.ALERT_STATUS_SUCCESS):r===s.DIRECTION_DOWN&&n[TradingView.LOW_PLOT]<=t.price?this.setStatus(s.ALERT_STATUS_SUCCESS):(a=this._model.mainSeries().bars().last().value,n[TradingView.TIME_PLOT]!==a[TradingView.TIME_PLOT]&&this.setStatus(s.ALERT_STATUS_FAILURE)))}},s.prototype.addPoint=function(t){var e=a.prototype.addPoint.call(this,t);return e&&this.checkAlert(),e},s.prototype.endChanging=function(){a.prototype.endChanging.call(this),this.setStatus(s.ALERT_STATUS_WAITING),this.checkAlert()},s.prototype.onData=function(t){a.prototype.onData.call(this,t),this.checkAlert()},s.prototype.endMoving=function(){a.prototype.endMoving.call(this),this.setStatus(s.ALERT_STATUS_WAITING),this.checkAlert()},s.prototype.direction=function(){var t,e;return this.points().length<2?s.DIRECTION_UP:(t=this.points()[0],e=this.points()[1],e.price>t.price?s.DIRECTION_UP:s.DIRECTION_DOWN)},t.exports=s}).call(e,i(21))},function(t,e){"use strict";t.exports=function(t,e){var i=document.body,o=i[t];return o||(o=document.createElement("img"),o.src=e,i[t]=o),o}},function(t,e,i){
(function(e){"use strict";function o(t,e,i){this._data=t,this._measureCache=e,this._chartModel=i,this._points=t.points}function n(t,e,i){r.call(this,t,e),this._image=d("price_label",TradingView.wrapUrl("images/price_label.png")),this._rendererCache={},this._invalidated=!0}function s(t,e){this._constructor="LineToolPriceLabel";var i=e||new p("linetoolpricelabel");a.call(this,t,new n(this,t),i)}var r=i(97),a=i(67).LineDataSource,l=i(87).SelectionRenderer,h=i(88),c=i(92),d=i(225),p=i(73).DefaultProperty;o.prototype.draw=function(t){var e,i,o,n,s,r,a,l,h;0!==this._points.length&&(t.font=[this._data.fontWeight,this._data.fontSize+"px",this._data.fontFamily].join(" "),e=t.measureText(this._data.label),e.height=this._data.fontSize,i=3,o=15,n=-9,s={left:10,top:5},r=e.width+2*s.left,a=e.height+2*s.top,l=this._points[0].x-n,h=this._points[0].y-(a+o),this._measureCache&&$.extend(this._measureCache,{innerWidth:r,innerHeight:a,tailLeft:n,tailHeight:o}),t.translate(.5+l,.5+h),t.beginPath(),t.moveTo(12,a),t.lineTo(n,a+o),t.lineTo(n-1,a+o-1),t.lineTo(5,a),t.lineTo(i,a),t.arcTo(0,a,0,0,i),t.lineTo(0,i),t.arcTo(0,0,r,0,i),t.lineTo(r-i,0),t.arcTo(r,0,r,a,i),t.lineTo(r,a-i),t.arcTo(r,a,0,a,i),t.lineTo(12,a),t.fillStyle=TradingView.generateColor(this._data.backgroundColor,this._data.transparency),t.fill(),t.strokeStyle=this._data.borderColor,t.lineWidth=2,t.stroke(),t.closePath(),t.textBaseline="top",t.fillStyle=this._data.color,t.fillText(this._data.label,s.left,s.top-1),t.translate(-.5,-.5),t.beginPath(),t.arc(n,a+o,2.5,0,2*Math.PI,!1),t.fillStyle=TradingView.generateColor(this._data.borderColor,this._data.transparency),t.fill(),t.strokeStyle=this._chartModel.backgroundColor(),t.lineWidth=1,t.stroke(),t.closePath())},o.prototype.hitTest=function(t){var i,o;return 0===this._points.length?null:(i=this._points[0].x-this._measureCache.tailLeft,o=this._points[0].y-(this._measureCache.innerHeight+this._measureCache.tailHeight),e.pointInRect(t,new e.Point(i,o),new e.Point(i+this._measureCache.innerWidth,o+this._measureCache.innerHeight))?new h(h.MOVEPOINT):null)},inherit(n,r),n.prototype.update=function(){this._invalidated=!0},n.prototype.updateImpl=function(){var t,e,i;if(r.prototype.update.call(this),this._source.points().length>0){if(t=this._source.points()[0].price,e=this._source.priceScale(),!e||e.isEmpty())return;e.isPercent()&&(i=this._source.ownerSource().firstValue(),t=e.priceRange().convertToPercent(t,i)),this._priceLabel=e.formatter().format(t)}},n.prototype.renderer=function(){var t,e;return this._invalidated&&(this.updateImpl(),this._invalidated=!1),t={},t.points=this._points,t.borderColor=this._source.properties().borderColor.value(),t.backgroundColor=this._source.properties().backgroundColor.value(),t.color=this._source.properties().color.value(),t.fontWeight=this._source.properties().fontWeight.value(),t.fontSize=this._source.properties().fontsize.value(),t.fontFamily=this._source.properties().font.value(),t.transparency=this._source.properties().transparency.value(),t.label=this._priceLabel,t.image=this._image,this.isAnchorsRequired()&&1==t.points.length?(e=new c,e.append(new o(t,this._rendererCache,this._model)),e.append(new l({points:t.points})),e):new o(t,this._rendererCache,this._model)},inherit(s,a),s.prototype.pointsCount=function(){return 1},s.prototype.title=function(){return"Price Label"},t.exports=s}).call(e,i(21))},function(t,e,i){(function(t){"use strict";function o(){}function n(t,e){this._source=t,this._data=e}function s(t,e){l.call(this,t,e),this._rendererSource=new o,this._invalidated=!0}function r(t,e){this._constructor="LineToolNote";var i=e?e:new _("linetoolnote");h.call(this,t,new s(this,t),i),this.version=r.version}function a(t,e){var i=e?e:new _("linetoolnoteabsolute");i.locked.value()||i.locked.setValue(!0),r.call(this,t,i)}var l=i(97),h=i(67).LineDataSource,c=i(98).TextRenderer,d=i(87).SelectionRenderer,p=i(88),u=i(92),_=i(73).DefaultProperty;o.prototype.update=function(t){this._data&&(!this._data||t.markerColor==this._data.markerColor&&t.width==this._data.width&&t.height==this._data.height)||this._createSource(t.width,t.height,t.markerColor),this._data=t},o.prototype._createSource=function(e,i,o){var n,s;this._sourceCanvas=document.createElement("canvas"),this._sourceCanvas.width=e,this._sourceCanvas.height=i,this._translate=new t.Point(-e/2,-i+.5),this._translate.x%1===0&&(this._translate.x+=.5),n=this._sourceCanvas.getContext("2d"),s=.6*e,n.fillStyle=o,n.beginPath(),n.moveTo(e/2,i),n.quadraticCurveTo(e,e/1.15,e,e/2),n.arc(e/2,e/2,e/2,0,Math.PI,!0),n.quadraticCurveTo(0,e/1.15,e/2,i),n.fill(),n.globalCompositeOperation="destination-out",n.beginPath(),n.moveTo((e-s)/2,e/2),n.arc(e/2,e/2,s/2,0,2*Math.PI),n.fill()},o.prototype.drawOn=function(e){var i=new t.Point(Math.round(this._data.point.x),Math.round(this._data.point.y)).add(this._translate);e.drawImage(this._sourceCanvas,i.x,i.y)},o.prototype.hasPoint=function(e){var i=this._data.point.add(this._translate),o=new t.Point(this._data.point.x-this._translate.x,this._data.point.y);return t.pointInRect(e,i,o)},n.prototype.draw=function(t){this._source.drawOn(t),this._data.tooltipVisible&&this.drawTooltipOn(t)},n.prototype.drawTooltipOn=function(t){var e,i,o,n,s,a,l,h,d,p,u,_,f,g,m;for(t.save(),e=(this._data.text+"").replace(/^\s+|\s+$/g,"").replace(/[\r\n]+/g,"\n"),t.font=(this._data.bold?"bold ":"")+(this._data.italic?"italic ":"")+this._data.fontSize+"px "+this._data.font,i=r.TOOLTIP_WIDTH-2*r.TOOLTIP_PADDING,o=c.prototype.wordWrap(e,i,t.font),n=this._data.point,s=r.TOOLTIP_LINESPACING,a=r.TOOLTIP_WIDTH,l=o.length*this._data.fontSize+2*r.TOOLTIP_PADDING,o.length>1&&(l+=(o.length-1)*s),h=Math.round(n.x-a/2),d=Math.round(n.y-this._data.height-l-8),p=n.x<20||n.x+20>this._data.vpWidth,u=p?null:"top",_=p?null:Math.round(n.x),d<10?d=n.y+13:u="bottom",h<10?h+=Math.abs(h-10):h+a+10>this._data.vpWidth&&(h-=h+a+10-this._data.vpWidth),t.fillStyle=TradingView.generateColor(this._data.backgroundColor,this._data.backgroundTransparency),t.strokeStyle=this._data.markerColor,t.lineWidth=1,t.beginPath(),t.moveTo(h,d),p||"top"!=u||(t.lineTo(_-7,d),t.lineTo(_,d-7),t.lineTo(_+7,d)),t.lineTo(h+a,d),t.lineTo(h+a,d+l),p||"bottom"!=u||(t.lineTo(_+7,d+l),t.lineTo(_,d+l+7),t.lineTo(_-7,d+l)),t.lineTo(h,d+l),t.closePath(),t.fill(),t.stroke(),t.textBaseline="middle",t.fillStyle=this._data.textColor,f=h+r.TOOLTIP_PADDING,g=d+r.TOOLTIP_PADDING+this._data.fontSize/2,m=0;m<o.length;m++)t.fillText(o[m].replace(/^\s+/,""),f,g),g+=this._data.fontSize+s;t.restore()},n.prototype.hitTest=function(t){if(this._source.hasPoint(t))return new p(p.MOVEPOINT)},inherit(s,l),s.prototype.update=function(){this._invalidated=!0},s.prototype.updateImpl=function(){l.prototype.update.call(this),this._invalidated=!1},s.prototype.isLabelVisible=function(){return this.isHoveredSource()||this.isSelectedSource()},s.prototype.renderer=function(){var t,e,i,o,s,r,a;return this._invalidated&&this.updateImpl(),t=new u,e=this._source.properties(),i=e.locked&&e.locked.value(),o=i?this._source.fixedPoints():this._points,o.length<1?t:(s=this.isLabelVisible(),r=s,a=$.extend(e.state(),{point:o[0],width:24,height:32,tooltipVisible:r,vpWidth:this._model.m_timeScale.m_width,vpHeight:this._source.m_priceScale.m_height}),this._rendererSource.update(a),t.append(new n(this._rendererSource,a)),s&&t.append(new d({points:o})),t)},inherit(r,h),r.TOOLTIP_WIDTH=300,r.TOOLTIP_PADDING=10,r.TOOLTIP_LINESPACING=5,r.version=1,r.prototype.pointsCount=function(){return 1},r.prototype.title=function(){return $.t("Note")},r.prototype.restoreTemplate=function(t){delete t.locked,delete t.text,h.prototype.restoreTemplate.call(this,t)},inherit(a,r),a.prototype.title=function(){return $.t("Anchored Note")},r.prototype.state=function(t){var e=h.prototype.state.call(this,t);return t&&(e.state.fixedSize=!1),e},e.LineToolNote=r,e.LineToolNoteAbsolute=a}).call(e,i(21))},function(t,e,i){(function(e){"use strict";function o(t,e){s.call(this,t,e),this._invalidated=!0,this._model=e,this._source=t}function n(t,e){this._constructor="LineToolBrush";var i=e?e:new c("linetoolbrush");r.call(this,t,new o(this,t),i),this._finished=!1}var s=i(97),r=i(67).LineDataSource,a=i(192),l=i(87).SelectionRenderer,h=i(92),c=i(73).DefaultProperty;inherit(o,s),o.prototype.update=function(){this._invalidated=!0},o.prototype._smoothArray=function(t,i){var o,n,s,r,a,l=Array(t.length);for(o=0;o<t.length;o++){for(n=new e.Point(0,0),s=0;s<i;s++)r=Math.max(o-s,0),a=Math.min(o+s,t.length-1),n=n.add(t[r]),n=n.add(t[a]);l[o]=n.scaled(.5/i)}return l.push(t[t.length-1]),l},o.prototype._updateInternal=function(){var t,e,i,o,n,r,a,l,h;if(s.prototype.update.call(this),t=Math.max(1,this._source.properties().smooth.value()),e=this._points,0!==e.length){for(i=[e[0]],o=1;o<e.length;o++){for(n=e[o].substract(e[o-1]),r=n.length(),a=Math.min(5,Math.floor(r/t)),l=n.normalized().scaled(r/a),h=0;h<a-1;h++)i.push(e[o-1].add(l.scaled(h)));i.push(e[o])}this._points=this._smoothArray(i,t)}},o.prototype.renderer=function(){var t,e,i,o;return this._invalidated&&(this._updateInternal(),this._invalidated=!1),t={},e=this._source.properties(),t.points=this._points,t.color=e.linecolor.value(),t.linewidth=e.linewidth.value(),t.linestyle=e.linestyle.value(),t.skipClosePath=!0,t.leftend=this._source.properties().leftEnd.value(),t.rightend=this._source.properties().rightEnd.value(),e.fillBackground.value()&&this._model.lineBeingCreated()!==this._source&&(t.filled=!0,t.fillBackground=!0,t.backcolor=e.backgroundColor.value(),t.transparency=e.transparency.value()),this.isAnchorsRequired()&&this._source.finished()?(i=new h,i.append(new a(t)),t.points.length>0&&(o=[t.points[0],t.points[t.points.length-1]],i.append(new l({points:o}))),i):new a(t)},inherit(n,r),n.prototype.pointsCount=function(){return-1},n.prototype.finished=function(){return this._finished},n.prototype.finish=function(){this._finished=!0,this._lastPoint=null,this.normalizePoints(),this.createServerPoints()},n.prototype.title=function(){return"Brush"},n.prototype.percentDistance=function(t,e){return Math.abs((e-t)/t)},n.prototype.addPoint=function(t){var e,i,o,n;return!!this._finished||(this._lastPoint=null,this._points.length>0&&(e=this._points[this._points.length-1],i=this.pointToScreenPoint(e)[1],o=this.pointToScreenPoint(t)[1],n=o.substract(i).length(),n<2)?this._finished:(r.prototype.addPoint.call(this,t),this._finished))},n.prototype.restorePoints=function(t,e,i){r.prototype.restorePoints.call(this,t,e,i),this._finished=!0},t.exports=n}).call(e,i(21))},function(t,e,i){(function(e){"use strict";function o(t){this._data=t,this._data.angleFrom=0,this._data.angleTo=Math.PI,this._data.clockwise=!1}function n(t,e){r.call(this,t,e),this._invalidated=!0}function s(t,e){this._constructor="LineToolArc";var i=e?e:new c("linetoolarc");a.call(this,t,new n(this,t),i),this.version=s.version}var r=i(97),a=i(67).LineDataSource,l=i(88),h=i(92),c=i(73).DefaultProperty;o.prototype.draw=function(t){var i,o,n,s,r,a,l,h,c,d,p,u,_,f,g;if(!(this._data.points.length<2)){if(i=this._data.points[0],o=this._data.points[1],this._data.points.length<3)return t.strokeStyle=this._data.color,t.lineWidth=this._data.linewidth,t.beginPath(),t.moveTo(i.x,i.y),t.lineTo(o.x,o.y),void t.stroke();if(n=this._data.points[2],s=e.distanceToLine(i,o,n).distance,s<1)return t.strokeStyle=this._data.color,t.lineWidth=this._data.linewidth,t.beginPath(),t.moveTo(i.x,i.y),t.lineTo(o.x,o.y),void t.stroke();r=o.substract(i),a=i.add(o).scaled(.5),l=new e.Point((-r.y),r.x),l=l.normalized(),n=a.add(l.scaled(s)),h=a.add(l.scaled(-s)),t.strokeStyle=this._data.color,t.lineWidth=this._data.linewidth,c=r.length(),d=r.x/c,p=r.y/c,u=Math.acos(d),p<0&&(u=-u),_=this._data.points[2],f=e.Matrix.translate(-a.x,-a.y),_=f.mult(_),f=e.Matrix.rotate(-u),_=f.mult(_),f=e.Matrix.scale(1,c/(2*s)),_=f.mult(_),_.y<0?this._data.clockwise=!0:this._data.clockwise=!1,t.save(),t.beginPath(),t.translate(i.x,i.y),t.rotate(u),g=1-Math.sqrt(3)/2,t.scale(1,s/(c*g)),this._data.clockwise?t.arc(.5*c,c*Math.sqrt(3)/2,c,-2*Math.PI/3,-Math.PI/3,!1):t.arc(.5*c,-c*Math.sqrt(3)/2,c,Math.PI/3,2*Math.PI/3,!1),t.restore(),t.stroke(),this._data.fillBackground&&(t.fillStyle=TradingView.generateColor(this._data.backcolor,this._data.transparency),t.fill())}},o.prototype.hitTest=function(t){var i,o,n,s,r,a,h,c,d,p,u,_,f,g,m,v,y,w;return this._data.points.length<3?null:(i=5,o=this._data.points[0],n=this._data.points[1],s=this._data.points[2],r=e.distanceToLine(o,n,s).distance,r<1?(r=e.distanceToLine(o,n,t).distance,r<i?new l(l.MOVEPOINT):null):(a=n.substract(o),h=a.length(),c=o.add(n).scaled(.5),d=s.substract(c),d=d.normalized(),s=c.add(d.scaled(r)),p=c.add(d.scaled(-r)),u=a.x/h,_=a.y/h,f=Math.acos(u),_<0&&(f=-f),g=e.Matrix.translate(-o.x,-o.y),t=g.mult(t),g=e.Matrix.rotate(-f),t=g.mult(t),d=g.mult(d),m=1-Math.sqrt(3)/2,g=e.Matrix.scale(1,h*m/r),t=g.mult(t),d=g.mult(d),t.y*d.y<0?null:(v=t.y<0?new e.Point(.5*h,h*Math.sqrt(3)/2):new e.Point(.5*h,-h*Math.sqrt(3)/2),y=t.substract(v),w=y.length(),Math.abs(w-h)<=i?new l(l.MOVEPOINT):null)))},inherit(n,r),n.prototype.update=function(){this._invalidated=!0},n.prototype.updateImpl=function(){r.prototype.update.call(this),this._invalidated=!1},n.prototype.renderer=function(){var t,i,n,s,r,a,l,c,d,p,u,_,f,g,m,v,y,w,b,S;return this._invalidated&&this.updateImpl(),t={},t.points=this._points,t.color=this._source.properties().color.value(),t.linewidth=this._source.properties().linewidth.value(),t.backcolor=this._source.properties().backgroundColor.value(),t.fillBackground=this._source.properties().fillBackground.value(),t.transparency=this._source.properties().transparency.value(),this.isAnchorsRequired()?(i=new h,i.append(new o(t)),n=[],s=t.points[0],r=new e.Point(s.x,s.y),r.data=0,n.push(r),1==t.points.length?i:(a=t.points[1],l=new e.Point(a.x,a.y),l.data=1,2==t.points.length?(this.addAnchors(i),i):(n.push(l),c=t.points[2],d=e.distanceToLine(s,a,c).distance,p=a.substract(s),u=s.add(a).scaled(.5),_=new e.Point((-p.y),p.x),_=_.normalized(),c=u.add(_.scaled(d)),f=u.add(_.scaled(-d)),g=p.length(),m=p.x/g,v=p.y/g,y=Math.acos(m),v<0&&(y=-y),w=t.points[2],b=e.Matrix.translate(-u.x,-u.y),w=b.mult(w),b=e.Matrix.rotate(-y),w=b.mult(w),b=e.Matrix.scale(1,g/(2*d)),w=b.mult(w),S=w.y>=0?new e.Point(c.x,c.y):new e.Point(f.x,f.y),S.data=2,n.push(S),i.append(this.createLineAnchor({points:n})),i))):new o(t)},inherit(s,a),s.prototype.startChanging=function(t,i){var o,n,s,r,l,h,c,d;a.prototype.startChanging.call(this,t,i),0!==t&&1!==t||(o=this.pointToScreenPoint(this._points[0])[0],n=this.pointToScreenPoint(this._points[1])[0],s=this.pointToScreenPoint(this._points[2])[0],this._dist=e.distanceToLine(o,n,s).distance,r=n.substract(o),l=new e.Point((-r.y),r.x),h=o.add(n).scaled(.5),c=s.substract(h),d=c.dotProduct(l),d<0&&(this._dist=-this._dist))},s.prototype.pointsCount=function(){return 3},s.prototype.title=function(){return"Arc"},s.prototype.setPoint=function(t,i){var o,n,s,r,a,l,h,c,d,p,u,_,f,g=$.extend({},i),m=this.pointToScreenPoint(this._points[0])[0],v=this.pointToScreenPoint(this._points[1])[0],y=this.pointToScreenPoint(this._points[2])[0],w=this.priceScale();switch(w.isPercent()&&(o=this.ownerSource().firstValue(),g.price=w.priceRange().convertFromPercent(g.price,o)),t){case 0:m=this.pointToScreenPoint(g)[0],n=v.substract(m),s=m.add(v).scaled(.5),r=new e.Point((-n.y),n.x),r=r.normalized(),y=s.add(r.scaled(this._dist)),y=this.screenPointToPoint(y),this._points[0]=g,this._points[2]=y;break;case 1:a=e.distanceToLine(m,v,y).distance,v=this.pointToScreenPoint(g)[0],n=v.substract(m),s=m.add(v).scaled(.5),r=new e.Point((-n.y),n.x),r=r.normalized(),y=s.add(r.scaled(this._dist)),y=this.screenPointToPoint(y),this._points[1]=g,this._points[2]=y;break;case 2:g=this.pointToScreenPoint(g)[0],a=e.distanceToLine(m,v,g).distance,n=v.substract(m),s=m.add(v).scaled(.5),r=new e.Point((-n.y),n.x),r=r.normalized(),y=s.add(r.scaled(a)),l=s.add(r.scaled(-a)),h=n.length(),c=n.x/h,d=n.y/h,p=Math.acos(c),d<0&&(p=-p),u=e.Matrix.translate(-s.x,-s.y),g=u.mult(g),_=u.mult(y),u=e.Matrix.rotate(-p),g=u.mult(g),_=u.mult(_),u=e.Matrix.scale(1,h/(2*a)),g=u.mult(g),_=u.mult(_),f=g.y*_.y>=0?new e.Point(y.x,y.y):new e.Point(l.x,l.y),f=this.screenPointToPoint(f),this._points[2]=f}this.normalizePoints()},s.version=2,s.prototype.migrateVersion=function(t,e,i){var o,n;1==t&&2==this._points.length&&(o=(2*this._points[0].price+3*this._points[1].price)/5,this._points.append({price:o,index:this._points[1].index})),1==t&&2==this._timePoint.length&&(o=(2*this._timePoint[0].price+3*this._timePoint[1].price)/5,n={price:o,offset:this._timePoint[1].offset,time_t:this._timePoint[1].time_t},this._timePoint.append(n))},t.exports=s}).call(e,i(21))},function(t,e,i){(function(e){"use strict";function o(t,e){this._data=t,t.lines=this.wordWrap(t.text,t.wordWrapWidth),this._textSizeCache=e}function n(t,e){r.call(this,t,e),this._textSizeCache={},this._invalidated=!0}function s(t,e){this._constructor="LineToolCallout";var i=e?e:new d("linetoolcallout");a.call(this,t,new n(this,t),i),this._barOffset=0,this._timeScale=t.timeScale()}var r=i(97),a=i(67).LineDataSource,l=i(72).DataSource,h=i(88),c=i(92),d=i(73).DefaultProperty;o.ROUND_RADIUS=8,o.TEXT_MARGINS=2,function(){function t(){var t=document.createElement("canvas");t.width=0,t.height=0,e=t.getContext("2d"),t=null}var e;o.prototype.wordWrap=function(i,o){var n,s,r,a,l,h,c,d,p;if(e||t(),o=+o,i+="",n=i.split(/[^\S\r\n]*(?:\r\n|\r|\n|$)/),n[n.length-1]||n.pop(),!isFinite(o)||o<=0)return n;for(e.font=this.fontStyle(),s=[],r=0;r<n.length;r++)if(a=n[r],l=e.measureText(a).width,l<=o)s.push(a);else for(h=a.split(/([-\)\]\},.!?:;])|(\s+)/);h.length;){if(c=~~(o/l*(h.length+2)/3),c<=0||e.measureText(h.slice(0,3*c-1).join("")).width<=o)for(;e.measureText(h.slice(0,3*(c+1)-1).join("")).width<=o;)c++;else for(;c>0&&e.measureText(h.slice(0,3*--c-1).join("")).width>o;);if(c>0)s.push(h.slice(0,3*c-1).join("")),h.splice(0,3*c);else{if(d=h[0]+(h[1]||""),p=1===p?1:~~(o/e.measureText(d)*d.length),e.measureText(d.substr(0,p)).width<=o)for(;e.measureText(d.substr(0,p+1)).width<=o;)p++;else for(;p>1&&e.measureText(d.substr(0,--p)).width>o;);p<1&&(p=1),s.push(d.substr(0,p)),h[0]=d.substr(p),h[1]=""}if(l=e.measureText(h.join("")).width,l<=o){s.push(h.join(""));break}}return s}}(),o.prototype.hitTest=function(t){var e,i,o,n,s;return this._data.points.length<2?null:(e=this._data.points[0],i=this._data.points[1],o=3,e.substract(t).length()<o?new h(h.CHANGEPOINT,0):(n=i.x-this._textSizeCache.totalWidth/2,s=i.y-this._textSizeCache.totalHeight/2,t.x>=n&&t.x<=n+this._textSizeCache.totalWidth&&t.y>=s&&t.y<=s+this._textSizeCache.totalHeight?new h(h.MOVEPOINT):null))},o.prototype.fontStyle=function(){return(this._data.bold?"bold ":"")+(this._data.italic?"italic ":"")+this._data.fontSize+"px "+this._data.font},o.prototype.draw=function(t){var e,i,n,s,r,a,l,h,c,d,p,u,_,f;if(!(this._data.points.length<2)){for(e=this._data.points[0].clone(),i=this._data.points[1].clone(),t.lineCap="butt",t.strokeStyle=this._data.bordercolor,t.lineWidth=this._data.linewidth,t.textBaseline="bottom",t.font=this.fontStyle(),n=this._data.fontSize*this._data.lines.length,s=this._data.wordWrapWidth||this._data.lines.reduce(function(e,i){return Math.max(e,t.measureText(i).width)},0),this._textSizeCache.textHeight=n,this._textSizeCache.textHeight=s,r=o.ROUND_RADIUS,a=o.TEXT_MARGINS,l=s+2*a+2*r,h=n+2*a+2*r,this._textSizeCache.totalWidth=l,this._textSizeCache.totalHeight=h,c=i.x-l/2,d=i.y-h/2,p=0,u=s+2*a>2*r,_=n+2*a>2*r,e.x>c+l?p=20:e.x>c&&(p=10),e.y>d+h?p+=2:e.y>d&&(p+=1),t.save(),t.translate(c,d),e.x-=c,e.y-=d,i.x-=c,i.y-=d,t.beginPath(),t.moveTo(r,0),10==p?u?(t.lineTo(i.x-r,0),t.lineTo(e.x,e.y),t.lineTo(i.x+r,0),t.lineTo(l-r,0)):(t.lineTo(e.x,e.y),t.lineTo(l-r,0)):t.lineTo(l-r,0),20==p?(t.lineTo(e.x,e.y),t.lineTo(l,r)):t.arcTo(l,0,l,r,r),21==p?_?(t.lineTo(l,i.y-r),t.lineTo(e.x,e.y),t.lineTo(l,i.y+r),t.lineTo(l,h-r)):(t.lineTo(e.x,e.y),t.lineTo(l,h-r)):t.lineTo(l,h-r),22==p?(t.lineTo(e.x,e.y),t.lineTo(l-r,h)):t.arcTo(l,h,l-r,h,r),12==p?u?(t.lineTo(i.x+r,h),t.lineTo(e.x,e.y),t.lineTo(i.x-r,h),t.lineTo(r,h)):(t.lineTo(e.x,e.y),t.lineTo(r,h)):t.lineTo(r,h),2==p?(t.lineTo(e.x,e.y),t.lineTo(0,h-r)):t.arcTo(0,h,0,h-r,r),1==p?_?(t.lineTo(0,i.y+r),t.lineTo(e.x,e.y),t.lineTo(0,i.y-r),t.lineTo(0,r)):(t.lineTo(e.x,e.y),t.lineTo(0,r)):t.lineTo(0,r),0===p?(t.lineTo(e.x,e.y),t.lineTo(r,0)):t.arcTo(0,0,r,0,r),t.stroke(),t.fillStyle=TradingView.generateColor(this._data.backcolor,this._data.transparency),t.fill(),t.fillStyle=this._data.color,d=r+a+this._data.fontSize,c=r+a,f=0;f<this._data.lines.length;f++)t.fillText(this._data.lines[f],c,d),d+=this._data.fontSize;t.restore()}},inherit(n,r),n.prototype.update=function(){this._invalidated=!0},n.prototype.updateImpl=function(){r.prototype.update.call(this),this._source._calculatePoint2()},n.prototype.renderer=function(){var t,i,n,s,r,a,l,h;return this._invalidated&&(this.updateImpl(),this._invalidated=!1),this._points[0]?this._points.length<2?void 0:(t=this._source.properties(),i={},i.points=[],i.points.push(this._points[0]),n=this._points[1].clone(),n.x=this._points[0].x+this._source._barOffset*this._model.timeScale().barSpacing(),i.points.push(n),i.color=t.color.value(),i.linewidth=t.linewidth.value(),i.backcolor=t.backgroundColor.value(),i.transparency=t.transparency.value(),i.text=t.text.value(),i.font=t.font.value(),i.fontSize=t.fontsize.value(),i.bordercolor=t.bordercolor.value(),t.wordWrap&&t.wordWrap.value()&&(i.wordWrapWidth=t.wordWrapWidth.value()),i.bold=t.bold&&t.bold.value(),i.italic=t.italic&&t.italic.value(),s=new o(i,this._textSizeCache),this.isAnchorsRequired()?(r=new c,r.append(s),a=i.points[1],l=[].concat(i.points),l.splice(l.length-1,1),r.append(this.createLineAnchor({points:l})),i.wordWrapWidth&&(h=new e.Point(a.x+(i.wordWrapWidth>>1)+o.ROUND_RADIUS+o.TEXT_MARGINS,a.y),h.data=1,r.append(this.createLineAnchor({points:[h]}))),r):s):new c},inherit(s,a),s.MIN_WIDTH=100,s.prototype.pointsCount=function(){return 2},s.prototype.title=function(){return"Callout"},s.prototype.correctPoints=function(t){var e=this._currentMovingPoint.index-this._startMovingPoint.index,i=this._currentMovingPoint.price-this._startMovingPoint.price,o=t[1];o.index+=e,o.price+=i,t[1]=o},s.prototype.addPoint=function(t){var e=a.prototype.addPoint.call(this,t);return e&&this._calculateBarOffset(),e},s.prototype._calculateBarOffset=function(){this.points().length>1&&(this._barOffset=this.points()[1].index-this.points()[0].index)},s.prototype.setLastPoint=function(t){a.prototype.setLastPoint.call(this,t),2==this.points().length&&this._calculateBarOffset()},s.prototype.setPoint=function(t,e){var i,n,r,l,h;switch(t){case 0:a.prototype.setPoint.call(this,t,e),this._calculateBarOffset();break;case 1:if(i=this.properties(),!i.wordWrapWidth)return;if(n=this._points,r=this._dragStartLeftEdgeIndex,l=Math.round((e.index-r)/2),isFinite(r)&&isFinite(l)){if(n[1]={index:r+l,price:n[1].price},this._calculateBarOffset(),this.normalizePoints(),h=this._timeScale.indexToCoordinate(r+2*l)-this._timeScale.indexToCoordinate(r)-o.ROUND_RADIUS-o.TEXT_MARGINS,!isFinite(h))return;i.wordWrapWidth.setValue(Math.max(s.MIN_WIDTH,h));break}n[1]=e,this._calculateBarOffset(),this.normalizePoints()}},s.prototype.startDragPoint=function(t,e){var i=this.properties();1===t&&i.wordWrap&&i.wordWrap.value()&&(this._dragStartLeftEdgeIndex=2*this.points()[1].index-e.index)},s.prototype.move=function(t){a.prototype.move.call(this,t),this._calculateBarOffset()},s.prototype.state=function(t){var e=a.prototype.state.call(this,t);return e.barOffset=this._barOffset,e},s.prototype.restoreData=function(t){t.barOffset?this._barOffset=t.barOffset:this._calculateBarOffset(),this._calculatePoint2()},s.prototype.setPriceScale=function(t){l.prototype.setPriceScale.call(this,t),t&&t.priceRange()&&this._calculatePoint2()},s.prototype._calculatePoint2=function(){var t,e;this._model.lineBeingEdited()!=this&&this._model.sourceBeingMoved()!=this&&(this._points.length<2||(t=this.points()[0],e=this.points()[1],this._points[1]={price:e.price,index:t.index+this._barOffset}))},t.exports=s}).call(e,i(21))},function(t,e,i){(function(e){"use strict";function o(t,e){this._measureCache=e,this._data=t}function n(t,e){r.call(this,t,e),this._rendererCache={},this._invalidated=!0}function s(t,e){this._constructor="LineToolBalloon";var i=e?e:new d("linetoolballoon");a.call(this,t,new n(this,t),i)}var r=i(97),a=i(67).LineDataSource,l=i(87).SelectionRenderer,h=i(88),c=i(92),d=i(73).DefaultProperty;o.prototype.draw=function(t){var e,i,o,n,s,r,a;0!==this._data.points.length&&(t.font=[this._data.fontWeight,this._data.fontSize+"px",this._data.fontFamily].join(" "),e=t.measureText(this._data.label),e.height=this._data.fontSize,i=15,o={left:i,top:(2*i-e.height)/2},n=e.width+2*o.left,s=2*i,r=this._data.points[0].x-(o.left+20),a=this._data.points[0].y-(s+9),this._measureCache&&$.extend(this._measureCache,{innerWidth:n,innerHeight:s,padding:o}),t.translate(.5+r,.5+a),t.beginPath(),t.moveTo(i+9,s),t.lineTo(i,s),t.arcTo(-1e3,0,1e3,0,i),t.lineTo(n-i,0),t.arcTo(1e3,s,-1e3,s,i),t.lineTo(i+18,s),t.quadraticCurveTo(i+18,s+4,i+20,s+9),t.quadraticCurveTo(i+12,s+6,i+9,s),t.fillStyle=TradingView.generateColor(this._data.backgroundColor,this._data.transparency),t.fill(),t.strokeStyle=this._data.borderColor,t.lineWidth=2,t.stroke(),t.closePath(),t.textBaseline="top",t.fillStyle=this._data.color,t.fillText(this._data.label,o.left,o.top-1))},o.prototype.hitTest=function(t){var i,o;return 0!==this._data.points.length&&this._measureCache.padding?(i=this._data.points[0].x-(this._measureCache.padding.left+20),o=this._data.points[0].y-(this._measureCache.innerHeight+9),e.pointInRect(t,new e.Point(i,o),new e.Point(i+this._measureCache.innerWidth,o+this._measureCache.innerHeight))?new h(h.MOVEPOINT):null):null},inherit(n,r),n.prototype.update=function(){this._invalidated=!0},n.prototype.updateImpl=function(){r.prototype.update.call(this),this._invalidated=!1},n.prototype.renderer=function(){var t,e;return this._invalidated&&this.updateImpl(),t={},t.points=this._points,t.color=this._source.properties().color.value(),t.borderColor=this._source.properties().borderColor.value(),t.backgroundColor=this._source.properties().backgroundColor.value(),t.transparency=this._source.properties().transparency.value(),t.fontWeight=this._source.properties().fontWeight.value(),t.fontSize=this._source.properties().fontsize.value(),t.fontFamily=this._source.properties().font.value(),t.label=this._source.properties().text.value(),this.isAnchorsRequired()&&1==t.points.length?(e=new c,e.append(new o(t,this._rendererCache)),e.append(new l({points:t.points})),e):new o(t,this._rendererCache)},inherit(s,a),s.prototype.pointsCount=function(){return 1},s.prototype.title=function(){return"Balloon"},t.exports=s}).call(e,i(21))},function(t,e,i){"use strict";function o(t){this._data=t}function n(t,e){l.call(this,t,e),this._rendererCache={},this._invalidated=!0}function s(t,e){this._source=t,this._model=e,this._text="",this._coordinate=0,this._background="black"}function r(t,e){this._constructor="LineToolHorzRay";var i=e?e:new _("linetoolhorzray");this._priceAxisView=new s(this,t),a.call(this,t,new n(this,t),i)}var a=i(67).LineDataSource,l=i(97),h=i(68),c=i(98).TextRenderer,d=i(69),p=i(88),u=i(92),_=i(73).DefaultProperty;o.prototype.draw=function(t){var e,i,o,n;return 0===this._data.points.length?null:(e=t.canvas.width,i=this._data.points[0].y,o=Math.max(0,this._data.points[0].x),n=Math.max(e,this._data.points[0].x),t.lineCap="square",t.strokeStyle=this._data.color,t.lineWidth=this._data.linewidth,t.lineStyle=this._data.linestyle,void CanvasEx.drawLine(t,o,i,n,i))},o.prototype.hitTest=function(t){if(0===this._data.points.length)return null;if(t.x<this._data.points[0].x)return null;var e=3;return Math.abs(t.y-this._data.points[0].y)<=e?new p(this._data.hitTestResult):null},inherit(n,l),n.prototype.update=function(){this._invalidated=!0},n.prototype.updateImpl=function(){l.prototype.update.call(this)},n.prototype.renderer=function(){var t,e,i,n,s,r,a,l,h;return this._invalidated&&(this.updateImpl(),this._invalidated=!1),t=new u,e={},e.points=this._points,e.color=this._source.properties().linecolor.value(),e.linewidth=this._source.properties().linewidth.value(),e.linestyle=this._source.properties().linestyle.value(),e.hitTestResult=p.MOVEPOINT,i=this._source.properties(),t.append(new o(e)),this._source.properties().showLabel.value()&&1==this._points.length&&(n=i.vertLabelsAlign.value(),s=i.horzLabelsAlign.value(),r=this._points[0].clone(),a=0,l=0,"right"==s?(r.x=this._model.timeScale().width(),l=-5):"center"==s&&(r.x=(r.x+this._model.timeScale().width())/2),"middle"==n?a=-this._source.properties().fontsize.value()/6:"bottom"==n&&(a=-4),h={points:[r],text:i.text.value(),color:i.textcolor.value(),vertAlign:n,horzAlign:s,font:i.font.value(),offsetX:l,offsetY:a,bold:this._source.properties().bold.value(),italic:this._source.properties().italic.value(),fontsize:this._source.properties().fontsize.value()},t.append(new c(h,this._rendererCache))),this.addAnchors(t),TradingView.printing||!this._source.hasAlert.value()||this._model.readOnly()||1!=this._points.length||this._source.getAlertIsActive(function(i){t.append(new TradingView.PaneRendererClockIcon({point1:e.points[0],color:i?e.color:defaults("chartproperties.alertsProperties.drawingIcon.color")}))}),t},inherit(s,h),s.prototype.update=function(){this._invaildated=!0},s.prototype.updateImpl=function(){0!==this._source.points().length&&this._source.priceScale()&&!this._source.priceScale().isEmpty()&&(this._background=this._source.properties().linecolor.value(),this._coordinate=this._source.priceScale().priceToCoordinate(this._source.points()[0].price),this._text=this._source.priceScale().formatter().format(this._source.points()[0].price))},s.prototype.renderer=function(){this._invaildated&&(this.updateImpl(),this._invaildated=!1);var t={text:this._text,coordinate:this._coordinate,color:this.color(),background:this._background,visible:!0};return new d(t)},inherit(r,a),r.prototype.pointsCount=function(){return 1},r.prototype.title=function(){return"Horizontal Ray"},r.prototype.priceAxisViews=function(t,e){return this.isActualSymbol()&&e===this.priceScale()&&this.properties().showPrice.value()&&this._model.paneForSource(this)===t?[this._priceAxisView]:null},r.prototype.updateAllViews=function(){a.prototype.updateAllViews.call(this),this._priceAxisView.update()},r.prototype.canHasAlert=function(){return!0},r.prototype._getAlertPlots=function(){var t=this._points[0],e={index:t.index+1,price:t.price};return[this._linePointsToAlertPlot([t,e],null,!1,!0)]},t.exports=r},function(t,e,i){(function(e){"use strict";function o(t){this._data=t,this._data.angleFrom=0,this._data.angleTo=2*Math.PI,this._data.clockwise=!1}function n(t,e){a.call(this,t,e),this._invalidated=!0}function s(t,e){this._constructor="LineToolEllipse";var i=e?e:new c("linetoolellipse");r.call(this,t,new n(this,t),i),this.version=s.version}var r=i(67).LineDataSource,a=i(97),l=i(88),h=i(92),c=i(73).DefaultProperty;o.prototype.draw=function(t){var i,o,n,s,r,a,l,h,c,d,p,u,_,f;if(!(this._data.points.length<2)){if(i=this._data.points[0],o=this._data.points[1],this._data.points.length<3)return t.strokeStyle=this._data.color,t.lineWidth=this._data.linewidth,t.beginPath(),t.moveTo(i.x,i.y),t.lineTo(o.x,o.y),void t.stroke();if(n=this._data.points[2],s=e.distanceToLine(i,o,n).distance,s<1)return t.strokeStyle=this._data.color,t.lineWidth=this._data.linewidth,t.beginPath(),t.moveTo(i.x,i.y),t.lineTo(o.x,o.y),void t.stroke();r=o.substract(i),a=i.add(o).scaled(.5),l=new e.Point((-r.y),r.x),l=l.normalized(),n=a.add(l.scaled(s)),h=a.add(l.scaled(-s)),t.strokeStyle=this._data.color,t.lineWidth=this._data.linewidth,c=r.length(),d=r.x/c,p=r.y/c,u=Math.acos(d),p<0&&(u=-u),_=this._data.points[2],f=e.Matrix.translate(-a.x,-a.y),_=f.mult(_),f=e.Matrix.rotate(-u),_=f.mult(_),f=e.Matrix.scale(1,c/(2*s)),_=f.mult(_),_.y<0?this._data.clockwise=!0:this._data.clockwise=!1,
t.save(),t.beginPath(),t.translate(a.x,a.y),t.rotate(u),t.scale(1,2*s/c),t.arc(0,0,.5*c,this._data.angleFrom,this._data.angleTo,this._data.clockwise),t.restore(),t.stroke(),this._data.fillBackground&&(t.fillStyle=TradingView.generateColor(this._data.backcolor,this._data.transparency),t.fill())}},o.prototype._additionalPointTest=function(t,e){return!0},o.prototype.hitTest=function(t){var i,o,n,s,r,a,h,c,d,p,u,_,f,g,m,v;return this._data.points.length<3?null:(i=this._data.points[0],o=this._data.points[1],n=this._data.points[2],s=e.distanceToLine(i,o,n).distance,r=o.substract(i),a=i.add(o).scaled(.5),h=new e.Point((-r.y),r.x),h=h.normalized(),n=a.add(h.scaled(s)),c=a.add(h.scaled(-s)),d=r.length(),p=r.x/d,u=r.y/d,_=Math.acos(p),u<0&&(_=-_),f=e.Matrix.translate(-a.x,-a.y),t=f.mult(t),g=f.mult(this._data.points[2]),f=e.Matrix.rotate(-_),t=f.mult(t),g=f.mult(g),f=e.Matrix.scale(1,d/(2*s)),t=f.mult(t),g=f.mult(g),m=t.length(),v=3,this._additionalPointTest(t,g)?Math.abs(m-.5*d)<=v?new l(l.MOVEPOINT):this._data.fillBackground&&!this._data.noHitTestOnBackground&&m<=.5*d?new l(l.MOVEPOINT_BACKGROUND):null:null)},inherit(n,a),n.prototype.update=function(){this._invalidated=!0},n.prototype.updateImpl=function(){a.prototype.update.call(this),this._invalidated=!1},n.prototype.renderer=function(){var t,i,n,s,r,a,l,c,d,p,u,_,f,g;return this._invalidated&&this.updateImpl(),t=new h,this._points.length<2?t:(i={},i.points=this._points,i.color=this._source.properties().color.value(),i.linewidth=this._source.properties().linewidth.value(),i.backcolor=this._source.properties().backgroundColor.value(),i.fillBackground=this._source.properties().fillBackground.value(),i.transparency=this._source.properties().transparency.value(),t.append(new o(i)),this.isAnchorsRequired()?(n=i.points[0],s=i.points[1],2==this._points.length?(this.addAnchors(t),t):(r=i.points[2],a=e.distanceToLine(n,s,r).distance,l=s.substract(n),c=n.add(s).scaled(.5),d=new e.Point((-l.y),l.x),d=d.normalized(),r=c.add(d.scaled(a)),p=c.add(d.scaled(-a)),u=new e.Point(n.x,n.y),u.data=0,_=new e.Point(s.x,s.y),_.data=1,f=new e.Point(r.x,r.y),f.data=2,g=new e.Point(p.x,p.y),g.data=3,t.append(this.createLineAnchor({points:[u,_,f,g]})),t)):t)},inherit(s,r),s.prototype.startChanging=function(t,i){var o,n,s;r.prototype.startChanging.call(this,t,i),0!==t&&1!==t||(o=this.pointToScreenPoint(this._points[0])[0],n=this.pointToScreenPoint(this._points[1])[0],s=this.pointToScreenPoint(this._points[2])[0],this._dist=e.distanceToLine(o,n,s).distance)},s.prototype.setPoint=function(t,i){var o,n,s,r,a,l=$.extend({},i),h=this.pointToScreenPoint(this._points[0])[0],c=this.pointToScreenPoint(this._points[1])[0],d=this.pointToScreenPoint(this._points[2])[0],p=this.priceScale();switch(p.isPercent()&&(o=this.ownerSource().firstValue(),l.price=p.priceRange().convertFromPercent(l.price,o)),t){case 0:h=this.pointToScreenPoint(l)[0],n=c.substract(h),s=h.add(c).scaled(.5),r=new e.Point((-n.y),n.x),r=r.normalized(),d=s.add(r.scaled(this._dist)),d=this.screenPointToPoint(d),this._points[0]=l,this._points[2]=d;break;case 1:a=e.distanceToLine(h,c,d).distance,c=this.pointToScreenPoint(l)[0],n=c.substract(h),s=h.add(c).scaled(.5),r=new e.Point((-n.y),n.x),r=r.normalized(),d=s.add(r.scaled(this._dist)),d=this.screenPointToPoint(d),this._points[1]=l,this._points[2]=d;break;case 2:l=this.pointToScreenPoint(l)[0],a=e.distanceToLine(h,c,l).distance,n=c.substract(h),s=h.add(c).scaled(.5),r=new e.Point((-n.y),n.x),r=r.normalized(),d=s.add(r.scaled(a)),d=this.screenPointToPoint(d),this._points[2]=d;break;case 3:l=this.pointToScreenPoint(l)[0],a=e.distanceToLine(h,c,l).distance,n=c.substract(h),s=h.add(c).scaled(.5),r=new e.Point((-n.y),n.x),r=r.normalized(),d=s.add(r.scaled(a)),d=this.screenPointToPoint(d),this._points[2]=d}this.normalizePoints()},s.prototype.pointsCount=function(){return 3},s.prototype.title=function(){return"Ellipse"},s.version=2,s.prototype.migrateVersion=function(t,e,i){var o,n,s;1==t&&2==this._points.length&&(o=this._points[0].price,n=.5*(this._points[0].price+this._points[1].price),this._points[0]={price:n,index:this._points[0].index},this._points[1]={price:n,index:this._points[1].index},this._points.push({price:o,index:this._points[0].index})),1==t&&2==this._timePoint.length&&(o=this._timePoint[0].price,n=.5*(this._timePoint[0].price+this._timePoint[1].price),this._timePoint[0].price=n,this._timePoint[1].price=n,s={price:o,offset:this._timePoint[0].offset,time_t:this._timePoint[0].time_t},this._timePoint.push(s))},t.exports=s}).call(e,i(21))},function(t,e,i){(function(e){"use strict";function o(t){this._data=t}function n(t,e){a.call(this,t,e),this._invalidated=!0}function s(t,e){this._constructor="LineToolTimeCycles";var i;i=e?e:new c("linetooltimecycles"),r.call(this,t,new n(this,t),i)}var r=i(67).LineDataSource,a=i(97),l=i(88),h=i(92),c=i(73).DefaultProperty;o.prototype.draw=function(t){t.strokeStyle=this._data.color,t.lineWidth=this._data.linewidth,CanvasEx.setLineStyle(t,this._data.linestyle),t.save(),t.translate(this._data.point.x+1,this._data.point.y),t.scale(this._data.width,this._data.height),t.beginPath(),t.arc(.5,0,.5,Math.PI,0,!1),t.restore(),t.stroke(),this._data.fillBackground&&(t.fillStyle=TradingView.generateColor(this._data.backcolor,this._data.transparency),t.fill())},o.prototype.hitTest=function(t){var i,o,n,s,r;return t.y>this._data.point.y?null:t.x<this._data.point.x||t.x>this._data.point.x+this._data.width?null:(i=new e.Point(this._data.point.x+this._data.width/2,this._data.point.y),o=t.substract(i),n=this._data.height/this._data.width,o.y/=n,s=o.length(),r=3,Math.abs(s-this._data.width/2)<r?new l(l.MOVEPOINT):null)},inherit(n,a),n.prototype.update=function(){this._invalidated=!0},n.prototype.updateImpl=function(){a.prototype.update.call(this),this._invalidated=!1},n.prototype.renderer=function(){var t,i,n,s,r,a,l,c,d,p,u,_,f,g,m,v,y,w,b;if(this._invalidated&&this.updateImpl(),this._points.length<2)return null;if(t=this._source.points(),i=t[0],n=t[1],s=Math.min(i.index,n.index),r=Math.max(i.index,n.index),a=r-s,l=this._points[0],c=this._points[1],d=Math.abs(l.x-c.x),p=new h,u=this._source.properties(),_=this._model.timeScale(),0===a)return null;for(f=Math.min(l.x,c.x),g=[],m=s;f>-d;m-=a)f=_.indexToCoordinate(m),g.push(f);for(f=Math.max(l.x,c.x),m=r;f<_.width();m+=a)f=_.indexToCoordinate(m),g.push(f);for(v=0;v<g.length;v++)y=new e.Point(g[v],l.y),w={point:y,width:d,height:d,color:u.linecolor.value(),linewidth:u.linewidth.value(),linestyle:u.linestyle.value(),fillBackground:u.fillBackground.value(),backcolor:u.backgroundColor.value(),transparency:u.transparency.value()},b=new o(w),p.append(b);return this.addAnchors(p),p},inherit(s,r),s.prototype.pointsCount=function(){return 2},s.prototype.title=function(){return"Time Cycles"},s.prototype.setPoint=function(t,e,i){var o,n=$.extend({},e),s=(n.index-this._startChangingBarIndex,this._points[0]),r=this._points[1],a=this.priceScale();a.isPercent()&&(o=this.ownerSource().firstValue(),n.price=a.priceRange().convertFromPercent(n.price,o)),s.price=n.price,r.price=n.price,this._points[t]=n,this.normalizePoints()},s.prototype.addPoint=function(t,e,i){var o,n,s=r.prototype.addPoint.call(this,t,e,!0);return s&&(o=this._points[0],n=this._points[1],n.price=o.price,i||(this.normalizePoints(),this.createServerPoints())),s},t.exports=s}).call(e,i(21))},function(t,e,i){(function(e){"use strict";function o(t){this._data=t}function n(t,e){a.call(this,t,e),this._invalidated=!0}function s(t,e){this._constructor="LineToolSineLine";var i;i=e?e:new c("linetoolsineline"),r.call(this,t,new n(this,t),i)}var r=i(67).LineDataSource,a=i(97),l=i(88),h=i(92),c=i(73).DefaultProperty;o.prototype.draw=function(t){var e,i,o;for(t.strokeStyle=this._data.color,t.lineWidth=this._data.linewidth,CanvasEx.setLineStyle(t,this._data.linestyle),t.beginPath(),t.moveTo(this._data.point.x,this._data.point.y),e=1;e<=2*this._data.width;e++)i=e*Math.PI/this._data.width,o=Math.sin(i-Math.PI/2)*this._data.height/2,t.lineTo(this._data.point.x+e,this._data.point.y+o+this._data.height/2);t.stroke()},o.prototype.hitTest=function(t){var e,i,o,n;return t.x<this._data.point.x||t.x>this._data.point.x+2*this._data.width?null:(e=t.x-this._data.point.x,i=e*Math.PI/this._data.width,o=Math.sin(i-Math.PI/2)*this._data.height/2,o=this._data.point.y+o+this._data.height/2,n=3,Math.abs(o-t.y)<=n?new l(l.MOVEPOINT):null)},inherit(n,a),n.prototype.update=function(){this._invalidated=!0},n.prototype.updateImpl=function(){a.prototype.update.call(this),this._invalidated=!1},n.prototype.renderer=function(){var t,i,n,s,r,a,l,c,d,p,u,_,f,g,m,v,y,w,b,S,T;if(this._invalidated&&this.updateImpl(),this._points.length<2)return null;if(t=this._source.points(),i=t[0],n=t[1],s=Math.min(i.index,n.index),r=Math.max(i.index,n.index),a=2*(r-s),l=this._points[0],c=this._points[1],d=Math.abs(l.x-c.x),p=c.y-l.y,u=new h,_=this._source.properties(),f=this._model.timeScale(),0===a)return null;for(g=f.indexToCoordinate(s),m=[],v=s;g>-d;v-=a)g=f.indexToCoordinate(v),m.push(g);for(g=g=f.indexToCoordinate(s+a),v=s+a;g<f.width();v+=a)g=f.indexToCoordinate(v),m.push(g);for(y=0;y<m.length;y++)w=new e.Point(m[y],l.y),b=new e.Point(m[y]+d,c.y),S={point:w,width:d,height:p,color:_.linecolor.value(),linewidth:_.linewidth.value(),linestyle:_.linestyle.value()},T=new o(S),u.append(T);return this.addAnchors(u),u},inherit(s,r),s.prototype.pointsCount=function(){return 2},s.prototype.title=function(){return"Sine Line"},t.exports=s}).call(e,i(21))},function(t,e,i){(function(e){"use strict";function o(t,e){l.call(this,t,e),this._invalidated=!0}function n(t,e,i){this._source=t,this._index=e,this._bars=i||[]}function s(t,e,i){this._source=t,u.call(this,"linetoolghostfeed",e,i)}function r(t,e,i){var n,l;this._constructor="LineToolGhostFeed",e?(n=e,n._source=this):n=new s(this),i||(l=Math.round(t.mainSeries().data().calculateATR()),n.averageHL.setValue(l)),a.call(this,t,new o(this,t),n),this._segments=[],n.averageHL.listeners().subscribe(this,r.prototype.regenerate),n.variance.listeners().subscribe(this,r.prototype.regenerate),n.points||n.addProperty("points"),this._currentAverageHL=this._properties.averageHL.value(),this._currentVariance=this._properties.variance.value(),this._currentInterval=t.mainSeries().interval()}var a=i(67).LineDataSource,l=i(97),h=i(122).TrendLineRenderer,c=i(88),d=i(89).PaneRendererCandles,p=i(92),u=i(73).DefaultProperty;inherit(o,l),o.prototype.update=function(){l.prototype.update.call(this),this._invalidated=!0},o.prototype.udpateImpl=function(){var t,i=this;this._segments=[],t=this._source.priceScale(),i._points.length<2||(this._segments=this._source.segments().map(function(t,o){var n,s,r,a,l,h,c,d,p,u,_,f=i._source.points();return o>=i._points.length-1?null:(n=i._points[o].x,s=f[o].price,r=f[o+1].price,a=f[o+1].index-f[o].index,l=i._model.timeScale().barSpacing()*e.sign(a),h=(r-s)/(t.bars().length-1),c=i._source.properties(),d=c.candleStyle.upColor.value(),p=c.candleStyle.downColor.value(),u=c.candleStyle.borderUpColor.value(),_=c.candleStyle.borderDownColor.value(),{bars:t.bars().map(function(t,e){var o=t.c>=t.o;return{time:n+e*l,open:i.priceToCoordinate(t.o+s+e*h),high:i.priceToCoordinate(t.h+s+e*h),low:i.priceToCoordinate(t.l+s+e*h),close:i.priceToCoordinate(t.c+s+e*h),color:o?d:p,borderColor:o?u:_,hollow:!1}})})}).filter(function(t){return!!t}))},o.prototype.renderer=function(){var t,e,i,o,n,s,r,l,u,_,f,g,m;for(this._invalidated&&(this.udpateImpl(),this._invalidated=!1),t=new p,e=1;e<this._points.length;e++)i=this._points[e-1],o=this._points[e],n={points:[i,o],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:"#808080",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,extendleft:!1,extendright:!1,leftend:a.LINEEND_NORMAL,rightend:a.LINEEND_NORMAL},s=new c(c.MOVEPOINT,null),t.append(new h(n,s));for(r=this._source.properties(),l=r.candleStyle.drawWick.value(),u=r.candleStyle.drawBorder.value(),_=r.candleStyle.borderColor.value(),f=r.candleStyle.wickColor.value(),g=new p,g.setGlobalAlpha(1-r.transparency.value()/100),e=0;e<this._segments.length;e++)m={bars:this._segments[e].bars,barSpacing:this._model.timeScale().barSpacing(),drawWick:l,drawBorder:u,borderColor:_,wickColor:f,hittest:new c(c.MOVEPOINT,null)},g.append(new d(m));return t.append(g),this.addAnchors(t),t},n.prototype.setBars=function(t){this._bars=t||[]},n.prototype.clone=function(t){return new n(t,this._index,TradingView.clone(this._bars))},n.prototype.createBar=function(){var t,e,i,o,n,s,r=this._source.properties().averageHL.value(),a=this._source.properties().variance.value()/100,l=this._source._model.mainSeries().base(),h=Math.random(),c=r*(1-2*h)*a;return h=Math.random(),t=r*(1+(.5-h)*a),e=c-t/2,i=e+t,o=e+Math.random()*t,n=e+Math.random()*t,s={o:o/l,h:i/l,l:e/l,c:n/l}},n.prototype.generate=function(){var t,i,o,n,s,r;if(this._bars=[],t=this._source.points(),i=t[this._index],o=t[this._index+1],i&&o&&i.index!==o.index)for(this._avgHL=this._source.properties().averageHL.value(),this._variance=this._source.properties().variance.value()/100,n=this._index?i.index+1:i.index,s=e.sign(o.index-i.index),r=n;r!=o.index;r+=s)this._bars.push(this.createBar())},n.prototype.bars=function(){return this._bars},n.prototype.setSize=function(t){if(t<this._bars.length)this._bars.splice(t,this._bars.length-t);else for(;this._bars.length<t;)this._bars.push(this.createBar())},inherit(s,u),s.prototype.restoreFactoryDefaults=function(){var t,e;u.prototype.restoreFactoryDefaults.call(this),t=this._source._model,e=Math.round(t.mainSeries().data().calculateATR()),this.averageHL.setValue(e)},inherit(r,a),r.prototype.createPropertiesObject=function(t,e,i){return new s(null,e,i)},r.prototype.regenerate=function(){this._currentAverageHL=this._properties.averageHL.value(),this._currentVariance=this._properties.variance.value(),this._segments.forEach(function(t){t.generate()}),this.updateAllViews(),this._model.updateSource(this)},r.prototype.propertiesChanged=function(){a.prototype.propertiesChanged.call(this),this._currentAverageHL===this._properties.averageHL.value()&&this._currentVariance===this._properties.variance.value()||this.regenerate()},r.prototype.pointsCount=function(){return-1},r.prototype.title=function(){return"Ghost Feed"},r.prototype.segmentBars=function(t){return this._segments[t].bars()},r.prototype.segments=function(){return this._segments},r.prototype.generateBars=function(t){this._segments.length<=t&&this._segments.push(new n(this,t)),this._segments[t].generate()},r.prototype.addPoint=function(t){var e,i,o;if(this._points.length>0&&(e=this._points[this._points.length-1],e.index===t.index)){for(this._lastPoint=null,this.normalizePoints(),this.createServerPoints(),i=0;i<this._points.length;i++)this._createPointProperty(i);return!0}return o=a.prototype.addPoint.call(this,t),this._finished&&(this._lastPoint=null),this._points.length>1&&this.generateBars(this._points.length-2),o||this._finished},r.prototype.finish=function(){this._finished=!0,this._lastPoint=null,this.normalizePoints(),this.createServerPoints()},r.prototype.setPoint=function(t,e,i){var o,n,s;a.prototype.setPoint.call(this,t,e,i),t>0&&(o=this.points()[t-1],n=e.index-o.index,this._segments[t-1].setSize(Math.abs(n))),t<this.points().length-1&&(s=this.points()[t+1],n=s.index-e.index,this._segments[t].setSize(Math.abs(n)))},r.prototype.state=function(t){var e=a.prototype.state.call(this,t);return e.segments=this._segments.map(function(t){return{bars:t.bars()}}),e},r.prototype.restoreData=function(t){var e=this;t.segments&&(this._segments=t.segments.map(function(t,i){return new n(e,i,[].concat(t.bars))})),this._currentAverageHL=this._properties.averageHL.value(),this._currentVariance=this._properties.variance.value()},r.prototype.onData=function(t){if(a.prototype.onData.call(this,t),0===this.properties().points._childs.length)for(var e=0;e<this._points.length;e++)this._createPointProperty(e);this._currentInterval!=this._model.mainSeries().interval()&&(this.regenerate(),this._currentInterval=this._model.mainSeries().interval())},r.prototype.cloneData=function(t){var e=this;this._segments=t._segments.map(function(t){return t.clone(e)})},t.exports=r}).call(e,i(21))},function(t,e,i){(function(t){"use strict";function o(t,e,i,o){var n,s,r,a,l,h=i.substract(t).length()+i.substract(e).length(),c=3/h,d=5;for(n=0;n<=1;n+=c)if(s=t.scaled((1-n)*(1-n)),r=i.scaled(2*n*(1-n)),a=e.scaled(n*n),l=s.add(r).add(a),l.substract(o).length()<d)return!0;return null}function n(t,e,i,o,n){var s,r,a,l,h,c,d=i.substract(t).length()+o.substract(i).length()+e.substract(o).length(),p=3/d,u=5;for(s=0;s<=1;s+=p)if(r=t.scaled((1-s)*(1-s)*(1-s)),a=i.scaled(3*(1-s)*(1-s)*s),l=o.scaled(3*(1-s)*s*s),h=e.scaled(s*s*s),c=r.add(a).add(l).add(h),c.substract(n).length()<u)return!0}function s(t,e,i,o,n){var s,r,a,l,h,c,d,p,u,_,f,g=i.substract(t).length()+i.substract(e).length();if(!g)return[];for(s=3/g,r=5,a=500,l=[],h=1;h<=a*s;h+=s)c=t.scaled((1-h)*(1-h)),d=i.scaled(2*h*(1-h)),p=e.scaled(h*h),u=c.add(d).add(p),l.length>0&&(_=l[l.length-1],f=_.substract(u).length(),f<2&&(s*=2)),l.push(u);return l}function r(t){this._data=t}function a(t,e){u.call(this,t,e),this._invalidated=!0}function l(t,e){this._constructor="LineToolBezierQuadro";var i;i=e?e:new m("linetoolbezierquadro"),p.call(this,t,new a(this,t),i)}function h(t){this._data=t}function c(t,e){u.call(this,t,e),this._invalidated=!0}function d(t,e){this._constructor="LineToolBezierCubic";var i;i=e?e:new m("linetoolbeziercubic"),p.call(this,t,new c(this,t),i)}var p=i(67).LineDataSource,u=i(97),_=i(122).TrendLineRenderer,f=i(88),g=i(92),m=i(73).DefaultProperty;r.prototype.draw=function(t){var e,i,o,n,s,r,a,l=this._data.points[0],h=this._data.points[1];if(t.lineCap="butt",t.strokeStyle=this._data.color,t.lineWidth=this._data.linewidth,CanvasEx.setLineStyle(t,this._data.linestyle),2==this._data.points.length)t.beginPath(),t.moveTo(l.x,l.y),t.lineTo(h.x,h.y),t.stroke();else{if(e=this._data.points[2],i=h.substract(l),o=e.substract(i.scaled(.25)),n=e.add(i.scaled(.25)),this._data.fillBack&&this._data.points.length>2&&(t.fillStyle=TradingView.generateColor(this._data.backcolor,this._data.transparency),t.beginPath(),t.moveTo(l.x,l.y),t.quadraticCurveTo(o.x,o.y,e.x,e.y),t.quadraticCurveTo(n.x,n.y,h.x,h.y),t.fill()),t.beginPath(),t.moveTo(l.x,l.y),this._data.extendLeftPoints.length>0)for(s=this._data.extendLeftPoints[this._data.extendLeftPoints.length-1],t.moveTo(s.x,s.y),r=this._data.extendLeftPoints.length-2;r>=0;r--)a=this._data.extendLeftPoints[r],t.lineTo(a.x,a.y);for(t.quadraticCurveTo(o.x,o.y,e.x,e.y),t.quadraticCurveTo(n.x,n.y,h.x,h.y),r=0;r<this._data.extendRightPoints.length;r++)a=this._data.extendRightPoints[r],t.lineTo(a.x,a.y);t.stroke(),this._data.leftend==p.LINEEND_ARROW&&_.prototype.drawArrow(o,l,t,t.lineWidth),this._data.rightend==p.LINEEND_ARROW&&_.prototype.drawArrow(n,h,t,t.lineWidth)}},r.prototype.hitTest=function(e){var i,n,s,r,a,l,h,c,d,p;if(3==this._data.points.length){if(i=this._data.points[0],n=this._data.points[1],s=this._data.points[2],r=n.substract(i),a=s.substract(r.scaled(.25)),l=s.add(r.scaled(.25)),h=o(s,i,a,e)||o(s,n,l,e))return new f(f.MOVEPOINT);for(c=3,d=1;d<this._data.extendLeftPoints.length;d++)if(i=this._data.extendLeftPoints[d-1],n=this._data.extendLeftPoints[d],p=t.distanceToSegment(i,n,e).distance,p<c)return new f(f.MOVEPOINT);for(d=1;d<this._data.extendRightPoints.length;d++)if(i=this._data.extendRightPoints[d-1],n=this._data.extendRightPoints[d],p=t.distanceToSegment(i,n,e).distance,p<c)return new f(f.MOVEPOINT)}return null},inherit(a,u),a.prototype.update=function(){u.prototype.update.call(this),this._invalidated=!0},a.prototype.updateImpl=function(){var t,e,i,o,n,r,a,l;this._extendLeftPoints=[],this._extendRightPoints=[],this._source.points().length<3||(t=this._source.pointToScreenPoint(this._source.points()[0])[1],e=this._source.pointToScreenPoint(this._source.points()[1])[1],i=this._source.pointToScreenPoint(this._source.points()[2])[1],o=e.substract(t),n=i.substract(o.scaled(.25)),r=i.add(o.scaled(.25)),a=this._model.timeScale().width(),l=this._source.priceScale().height(),this._source.properties().extendLeft.value()&&(this._extendLeftPoints=s(i,t,n,a,l)),this._source.properties().extendRight.value()&&(this._extendRightPoints=s(i,e,r,a,l)))},a.prototype.renderer=function(){var t,e,i,o;return this._points.length<2?new g:(this._invalidated&&(this.updateImpl(),this._invalidated=!1),t=[].concat(this._points),this._source._controlPoint&&t.push(this._source.pointToScreenPoint(this._source._controlPoint)[0]),e={},i=this._source.properties(),e.points=t,e.color=i.linecolor.value(),e.linewidth=i.linewidth.value(),e.linestyle=i.linestyle.value(),e.leftend=i.leftEnd.value(),e.rightend=i.rightEnd.value(),e.fillBack=i.fillBackground.value(),e.backcolor=i.backgroundColor.value(),e.transparency=i.transparency.value(),e.extendLeftPoints=this._extendLeftPoints,e.extendRightPoints=this._extendRightPoints,o=new g,o.append(new r(e)),this.addAnchors(o),o)},inherit(l,p),l.prototype.pointsCount=function(){return 2},l.prototype.title=function(){return"Curve"},l.prototype.controlPoint=function(){var t=this.pointToScreenPoint(this.points()[0])[0],e=this.pointToScreenPoint(this.points()[1])[0],i=e.substract(t).scaled(.5),o=i.transponed().scaled(.3),n=t.add(e).scaled(.5),s=n.add(o),r=this.screenPointToPoint(s);return r},l.prototype.setLastPoint=function(t,e){p.prototype.setLastPoint.call(this,t,e),this._controlPoint=this.controlPoint()},l.prototype.addPoint=function(t,e,i){var o,n=p.prototype.addPoint.call(this,t,e,!0);return n&&(o=this.controlPoint(),this._points.push(o),delete this._controlPoint,i||(this.normalizePoints(),this.createServerPoints()),this._createPointProperty(2)),n},l.prototype.restorePoints=function(t,e,i){p.prototype.restorePoints.call(this,t,e,i),this._createPointProperty(2)},h.prototype.draw=function(t){var e,i,o,n,s,r,a,l,h,c,d,u,f;if(t.lineCap="butt",t.strokeStyle=this._data.color,t.lineWidth=this._data.linewidth,CanvasEx.setLineStyle(t,this._data.linestyle),e=this._data.points[0],i=this._data.points[1],2==this._data.points.length)t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(i.x,i.y),t.stroke(),this._data.leftend==p.LINEEND_ARROW&&_.prototype.drawArrow(i,e,t,t.lineWidth),this._data.rightend==p.LINEEND_ARROW&&_.prototype.drawArrow(e,i,t,t.lineWidth);else{if(o=this._data.points[2],n=this._data.points[3],s=n.substract(e),r=o.substract(s.scaled(.25)),a=o.add(s.scaled(.25)),l=i.substract(o),h=n.substract(l.scaled(.25)),c=n.add(l.scaled(.25)),this._data.fillBack&&this._data.points.length>2&&(t.fillStyle=TradingView.generateColor(this._data.backcolor,this._data.transparency),t.beginPath(),t.moveTo(e.x,e.y),t.quadraticCurveTo(r.x,r.y,o.x,o.y),t.bezierCurveTo(a.x,a.y,h.x,h.y,n.x,n.y),t.quadraticCurveTo(c.x,c.y,i.x,i.y),t.fill()),t.beginPath(),this._data.extendLeftPoints.length>0)for(d=this._data.extendLeftPoints[this._data.extendLeftPoints.length-1],t.moveTo(d.x,d.y),u=this._data.extendLeftPoints.length-2;u>=0;u--)f=this._data.extendLeftPoints[u],t.lineTo(f.x,f.y);for(t.moveTo(e.x,e.y),t.quadraticCurveTo(r.x,r.y,o.x,o.y),t.bezierCurveTo(a.x,a.y,h.x,h.y,n.x,n.y),t.quadraticCurveTo(c.x,c.y,i.x,i.y),u=0;u<this._data.extendRightPoints.length;u++)f=this._data.extendRightPoints[u],t.lineTo(f.x,f.y);t.stroke(),this._data.leftend==p.LINEEND_ARROW&&_.prototype.drawArrow(r,e,t,t.lineWidth),this._data.rightend==p.LINEEND_ARROW&&_.prototype.drawArrow(c,i,t,t.lineWidth)}},h.prototype.hitTest=function(e){var i,s,r,a,l,h,c,d,p,u,_,g,m,v;if(4==this._data.points.length){if(i=this._data.points[0],s=this._data.points[1],r=this._data.points[2],a=this._data.points[3],l=a.substract(i),h=r.substract(l.scaled(.25)),c=r.add(l.scaled(.25)),d=s.substract(r),p=a.substract(d.scaled(.25)),u=a.add(d.scaled(.25)),_=o(r,i,h,e)||n(r,a,c,p,e)||o(a,s,u,e))return new f(f.MOVEPOINT);for(g=3,m=1;m<this._data.extendLeftPoints.length;m++)if(i=this._data.extendLeftPoints[m-1],s=this._data.extendLeftPoints[m],v=t.distanceToSegment(i,s,e).distance,v<g)return new f(f.MOVEPOINT);for(m=1;m<this._data.extendRightPoints.length;m++)if(i=this._data.extendRightPoints[m-1],s=this._data.extendRightPoints[m],v=t.distanceToSegment(i,s,e).distance,v<g)return new f(f.MOVEPOINT)}return null},inherit(c,u),c.prototype.update=function(){u.prototype.update.call(this),this._invalidated=!0},c.prototype.updateImpl=function(){var t,e,i,o,n,r,a,l,h,c,d,p;this._extendLeftPoints=[],this._extendRightPoints=[],this._source.points().length<4||(t=this._source.pointToScreenPoint(this._source.points()[0])[1],e=this._source.pointToScreenPoint(this._source.points()[1])[1],i=this._source.pointToScreenPoint(this._source.points()[2])[1],o=this._source.pointToScreenPoint(this._source.points()[3])[1],n=o.substract(t),r=i.substract(n.scaled(.25)),a=i.add(n.scaled(.25)),l=e.substract(i),h=o.substract(l.scaled(.25)),c=o.add(l.scaled(.25)),d=this._model.timeScale().width(),p=this._source.priceScale().height(),this._source.properties().extendLeft.value()&&(this._extendLeftPoints=s(i,t,r,d,p)),this._source.properties().extendRight.value()&&(this._extendRightPoints=s(o,e,c,d,p)))},c.prototype.renderer=function(){var t,e,i,o;return this._points.length<2?new g:(this._invalidated&&(this.updateImpl(),this._invalidated=!1),t=[].concat(this._points),this._source._controlPoints&&(t.push(this._source.pointToScreenPoint(this._source._controlPoints[0])[0]),t.push(this._source.pointToScreenPoint(this._source._controlPoints[1])[0])),e={},i=this._source.properties(),e.points=t,e.color=i.linecolor.value(),e.linewidth=i.linewidth.value(),e.linestyle=i.linestyle.value(),e.leftend=i.leftEnd.value(),e.rightend=i.rightEnd.value(),e.fillBack=i.fillBackground.value(),e.backcolor=i.backgroundColor.value(),e.transparency=i.transparency.value(),e.extendLeftPoints=this._extendLeftPoints,e.extendRightPoints=this._extendRightPoints,o=new g,o.append(new h(e)),this.addAnchors(o),o)},inherit(d,p),d.prototype.pointsCount=function(){return 2},d.prototype.title=function(){return"Double Curve"},d.prototype.controlPoints=function(){var t=this.pointToScreenPoint(this.points()[0])[0],e=this.pointToScreenPoint(this.points()[1])[0],i=e.substract(t).scaled(.5),o=i.transponed().scaled(.3),n=t.add(e).scaled(.33),s=t.add(e).scaled(.67),r=n.add(o),a=s.substract(o);return[this.screenPointToPoint(r),this.screenPointToPoint(a)]},d.prototype.setLastPoint=function(t,e){p.prototype.setLastPoint.call(this,t,e),this._controlPoints=this.controlPoints()},d.prototype.addPoint=function(t,e,i){var o,n=p.prototype.addPoint.call(this,t,e,!0);return n&&(o=this.controlPoints(),delete this._controlPoints,this._points.push(o[0]),this._points.push(o[1]),i||(this.normalizePoints(),this.createServerPoints()),this._createPointProperty(2),this._createPointProperty(3)),n},d.prototype.restorePoints=function(t,e,i){p.prototype.restorePoints.call(this,t,e,i),this._createPointProperty(2),this._createPointProperty(3)},e.LineToolBezierQuadro=l,e.LineToolBezierCubic=d}).call(e,i(21))},function(t,e,i){"use strict";function o(t,e){this._constructor="LineToolArrow";var i=e?e:new s("linetoolarrow");n.call(this,t,i)}var n=i(122).LineToolTrendLine,s=i(73).DefaultProperty;inherit(o,n),o.prototype.title=function(){return"Arrow"},t.exports=o},function(t,e,i){"use strict";function o(t,e){this._constructor="LineToolRay";var i=e?e:new s("linetoolray");n.call(this,t,i)}var n=i(122).LineToolTrendLine,s=i(73).DefaultProperty;inherit(o,n),o.prototype.title=function(){return"Ray"},t.exports=o},function(t,e,i){"use strict";function o(t,e){this._constructor="LineToolExtended";var i=e?e:new s("linetoolextended");n.call(this,t,i)}var n=i(122).LineToolTrendLine,s=i(73).DefaultProperty;inherit(o,n),o.prototype.title=function(){return"Extended Line"},t.exports=o},function(t,e,i){"use strict";function o(t,e){var i=e?e:new this.createPropertiesObject("linetoolschiffpitchfork");s.call(this,t,i),this._constructor="LineToolSchiffPitchfork"}var n=i(118),s=i(206).LineToolPitchfork;inherit(o,s),o.prototype.title=function(){return $.t("Modified Schiff Pitchfork")},o.prototype.createPropertiesObject=function(t,e,i){return new n(t,e,i,{range:[0,8]})},t.exports=o},function(t,e,i){"use strict";function o(t,e){var i=e?e:new this.createPropertiesObject("linetoolschiffpitchfork2");s.call(this,t,i),this._constructor="LineToolSchiffPitchfork2"}var n=i(118),s=i(206).LineToolPitchfork;inherit(o,s),o.prototype.title=function(){return $.t("Schiff Pitchfork")},o.prototype.createPropertiesObject=function(t,e,i){return new n(t,e,i,{range:[0,8]})},t.exports=o},function(t,e,i){"use strict";function o(t,e){var i=e?e:new this.createPropertiesObject("linetoolinsidepitchfork");s.call(this,t,i),this._constructor="LineToolInsidePitchfork"}var n=i(118),s=i(206).LineToolPitchfork;inherit(o,s),o.prototype.title=function(){return $.t("Inside Pitchfork")},o.prototype.createPropertiesObject=function(t,e,i){return new n(t,e,i,{range:[0,8]})},t.exports=o},function(t,e,i){(function(e){"use strict";function o(t,i){this._constructor="LineToolFlagMark";var o=i?i:new r("linetoolflagmark");n.call(this,t,new s(this,t,this.image,25,25,(-8),(-21)),o),this._paneViews[0].setAnchors(new e.Point(0,0))}var n=i(67).LineDataSource,s=i(204),r=i(73).DefaultProperty;inherit(o,n),o.prototype.image=new Image,o.prototype.image.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAsElEQVR4AWMYWcDExOS/YUd4hWF7+H90bNAePpO2liDwJTxyi2htyVXLvlBOWlry2bAtVIumwWXQERFF4zgJ20iPiP8JDCpLeqSuJ6ZdoRJ0SMIRx7QbQtmItgSXnGFbRCzMEnIzK8ISWgL6WzJqibGxsYaFhYUC7SxBWMQPNMjazMxMjebBZWhoKAq00NHc3FyL5nFiaWkpDTTYz8jISI/mEW9qaqoExGFgS+gFRgEAaE0hWxrw50oAAAAASUVORK5CYII=",o.prototype.pointsCount=function(){return 1},o.prototype.title=function(){return"Flag Mark"},o.prototype.version=2,o.prototype.migrateVersion=function(t){1==t&&(this.version=1,this._paneViews[0]._offsetX=0,this._paneViews[0]._offsetY=0,this._paneViews[0].setAnchors(new e.Point(9,21)))},t.exports=o}).call(e,i(21))},function(t,e,i){(function(e){"use strict";function o(t){this._line=t,this._data={bodyText:"position",quantityText:"0"}}function n(t,e){c.call(this,t,e)}function s(t,e){h.call(this,t,e),this._rendererCache={}}function r(t,e){this._adapter=new o(this),this._constructor="LineToolPosition";var i=e||new _("linetoolposition");a.call(this,t,new s(this,t),i)}var a=i(134),l=i(67).LineDataSource,h=i(97),c=i(67).LineToolPriceAxisView,d=i(113),p=i(88),u=i(50).Rect,_=i(73).DefaultProperty;o.prototype.getPrice=function(){return this._line.points()[0].price},o.prototype.setPrice=function(t){var e=this._line.points()[0];return e.price=t,this._line._points[0]=e,this._line.normalizePoints(),this._line.updateAllViewsAndRedraw(),this},o.prototype.getText=function(){return this._data.bodyText},o.prototype.setText=function(t){return this._data.bodyText=t||"",this._line.updateAllViewsAndRedraw(),this},o.prototype.setTooltip=function(t){return null==t?t="":t+="",this._line.properties().tooltip.setValue(t),this},o.prototype.getTooltip=function(){return this._line.properties().tooltip.value()},o.prototype.getQuantity=function(){return this._data.quantityText},o.prototype.setQuantity=function(t){return this._data.quantityText=t||"",this._line.updateAllViewsAndRedraw(),this},o.prototype.getExtendLeft=function(){var t=this._line.properties().extendLeft.value();return"inherit"==t?this._line._model.properties().tradingProperties.extendLeft.value():t},o.prototype.setExtendLeft=function(t){return this._line.properties().extendLeft.setValue(t),this},o.prototype.getLineLength=function(){var t=this._line.properties().lineLength.value();return"inherit"==t?this._line._model.properties().tradingProperties.lineLength.value():t},o.prototype.setLineLength=function(t){return this._line.properties().lineLength.setValue(Math.max(0,Math.min(t,100))),this},o.prototype.getLineColor=function(){return d.getColorFromProperties(this._line.properties().lineColor,this._line.properties().lineTransparency)},o.prototype.setLineColor=function(t){return d.setColorToProperties(t,this._line.properties().lineColor,this._line.properties().lineTransparency),
this},o.prototype.getLineStyle=function(){var t=this._line.properties().lineStyle.value();return"inherit"==t?this._line._model.properties().tradingProperties.lineStyle.value():t},o.prototype.setLineStyle=function(t){return this._line.properties().lineStyle.setValue(t),this},o.prototype.getLineWidth=function(){var t=this._line.properties().lineWidth.value();return"inherit"==t?this._line._model.properties().tradingProperties.lineWidth.value():t},o.prototype.setLineWidth=function(t){return this._line.properties().lineWidth.setValue(t),this},o.prototype.getBodyBorderColor=function(){return d.getColorFromProperties(this._line.properties().bodyBorderColor,this._line.properties().bodyBorderTransparency)},o.prototype.setBodyBorderColor=function(t){return d.setColorToProperties(t,this._line.properties().bodyBorderColor,this._line.properties().bodyBorderTransparency),this},o.prototype.getBodyBackgroundColor=function(){return d.getColorFromProperties(this._line.properties().bodyBackgroundColor,this._line.properties().bodyBackgroundTransparency)},o.prototype.setBodyBackgroundColor=function(t){return d.setColorToProperties(t,this._line.properties().bodyBackgroundColor,this._line.properties().bodyBackgroundTransparency),this},o.prototype.getBodyTextColor=function(){return d.getColorFromProperties(this._line.properties().bodyTextColor,this._line.properties().bodyTextTransparency)},o.prototype.setBodyTextColor=function(t){return d.setColorToProperties(t,this._line.properties().bodyTextColor,this._line.properties().bodyTextTransparency),this},o.prototype.getBodyFont=function(){return d.getFontFromProperties(this._line.properties().bodyFontFamily,this._line.properties().bodyFontSize,this._line.properties().bodyFontBold,this._line.properties().bodyFontItalic)},o.prototype.setBodyFont=function(t){return d.setFontToProperties(t,this._line.properties().bodyFontFamily,this._line.properties().bodyFontSize,this._line.properties().bodyFontBold,this._line.properties().bodyFontItalic),this},o.prototype.getQuantityBorderColor=function(){return d.getColorFromProperties(this._line.properties().quantityBorderColor,this._line.properties().quantityBorderTransparency)},o.prototype.setQuantityBorderColor=function(t){return d.setColorToProperties(t,this._line.properties().quantityBorderColor,this._line.properties().quantityBorderTransparency),this},o.prototype.getQuantityBackgroundColor=function(){return d.getColorFromProperties(this._line.properties().quantityBackgroundColor,this._line.properties().quantityBackgroundTransparency)},o.prototype.setQuantityBackgroundColor=function(t){return d.setColorToProperties(t,this._line.properties().quantityBackgroundColor,this._line.properties().quantityBackgroundTransparency),this},o.prototype.getQuantityTextColor=function(){return d.getColorFromProperties(this._line.properties().quantityTextColor,this._line.properties().quantityTextTransparency)},o.prototype.setQuantityTextColor=function(t){return d.setColorToProperties(t,this._line.properties().quantityTextColor,this._line.properties().quantityTextTransparency),this},o.prototype.getQuantityFont=function(){return d.getFontFromProperties(this._line.properties().quantityFontFamily,this._line.properties().quantityFontSize,this._line.properties().quantityFontBold,this._line.properties().quantityFontItalic)},o.prototype.setQuantityFont=function(t){return d.setFontToProperties(t,this._line.properties().quantityFontFamily,this._line.properties().quantityFontSize,this._line.properties().quantityFontBold,this._line.properties().quantityFontItalic),this},o.prototype.getReverseButtonBorderColor=function(){return d.getColorFromProperties(this._line.properties().reverseButtonBorderColor,this._line.properties().reverseButtonBorderTransparency)},o.prototype.setReverseButtonBorderColor=function(t){return d.setColorToProperties(t,this._line.properties().reverseButtonBorderColor,this._line.properties().reverseButtonBorderTransparency),this},o.prototype.getReverseButtonBackgroundColor=function(){return d.getColorFromProperties(this._line.properties().reverseButtonBackgroundColor,this._line.properties().reverseButtonBackgroundTransparency)},o.prototype.setReverseButtonBackgroundColor=function(t){return d.setColorToProperties(t,this._line.properties().reverseButtonBackgroundColor,this._line.properties().reverseButtonBackgroundTransparency),this},o.prototype.getReverseButtonIconColor=function(){return d.getColorFromProperties(this._line.properties().reverseButtonIconColor,this._line.properties().reverseButtonIconTransparency)},o.prototype.setReverseButtonIconColor=function(t){return d.setColorToProperties(t,this._line.properties().reverseButtonIconColor,this._line.properties().reverseButtonIconTransparency),this},o.prototype.getCloseButtonBorderColor=function(){return d.getColorFromProperties(this._line.properties().closeButtonBorderColor,this._line.properties().closeButtonBorderTransparency)},o.prototype.setCloseButtonBorderColor=function(t){return d.setColorToProperties(t,this._line.properties().closeButtonBorderColor,this._line.properties().closeButtonBorderTransparency),this},o.prototype.getCloseButtonBackgroundColor=function(){return d.getColorFromProperties(this._line.properties().closeButtonBackgroundColor,this._line.properties().closeButtonBackgroundTransparency)},o.prototype.setCloseButtonBackgroundColor=function(t){return d.setColorToProperties(t,this._line.properties().closeButtonBackgroundColor,this._line.properties().closeButtonBackgroundTransparency),this},o.prototype.getCloseButtonIconColor=function(){return d.getColorFromProperties(this._line.properties().closeButtonIconColor,this._line.properties().closeButtonIconTransparency)},o.prototype.setCloseButtonIconColor=function(t){return d.setColorToProperties(t,this._line.properties().closeButtonIconColor,this._line.properties().closeButtonIconTransparency),this},o.prototype.block=function(){this._blocked=!0,this._line.updateAllViewsAndRedraw()},o.prototype.unblock=function(){this._blocked=!1,this._line.updateAllViewsAndRedraw()},o.prototype.isFunction=function(t){return"function"==typeof t},o.prototype.onReverse=function(t,e){return e?this.isFunction(e)&&(this._onReverseData=t,this._onReverseCallback=e):this.isFunction(t)&&(this._onReverseCallback=t),this},o.prototype.callOnReverse=function(){this.isFunction(this._onReverseCallback)&&this._onReverseCallback.call(this,this._onReverseData)},o.prototype.isOnReverseCallbackPresent=function(){return this.isFunction(this._onReverseCallback)},o.prototype.onClose=function(t,e){return e?this.isFunction(e)&&(this._onCloseData=t,this._onCloseCallback=e):this.isFunction(t)&&(this._onCloseCallback=t),this},o.prototype.callOnClose=function(){this.isFunction(this._onCloseCallback)&&this._onCloseCallback.call(this,this._onCloseData)},o.prototype.isOnCloseCallbackPresent=function(){return this.isFunction(this._onCloseCallback)},o.prototype.onModify=function(t,e){return e?this.isFunction(e)&&(this._onModifyData=t,this._onModifyCallback=e):this.isFunction(t)&&(this._onModifyCallback=t),this},o.prototype.callOnModify=function(){this.isFunction(this._onModifyCallback)&&this._onModifyCallback.call(this,this._onModifyData)},o.prototype.onContextMenu=function(t,e){return e?this.isFunction(e)&&(this._onContextMenuData=t,this._onContextMenuCallback=e):this.isFunction(t)&&(this._onContextMenuCallback=t),this},o.prototype.callOnContextMenu=function(){if(this.isFunction(this._onContextMenuCallback))return this._onContextMenuCallback.call(this,this._onContextMenuData)},o.prototype.remove=function(){this._line._model.removeSource(this._line),delete this._line},TradingView.PositionRenderer=function(t,e,i){this._data=t,this._cache=e,this._adapter=i},TradingView.PositionRenderer.prototype._height=function(){var t=1;return Math.max(20,t+Math.max(d.fontHeight(this._adapter.getBodyFont()),d.fontHeight(this._adapter.getQuantityFont())))},TradingView.PositionRenderer.prototype._bodyWidth=function(t){var e,i;return 0===this._adapter.getText().length?0:(t.save(),t.font=this._adapter.getBodyFont(),e=10,i=t.measureText(this._adapter.getText()).width,t.restore(),Math.round(e+i))},TradingView.PositionRenderer.prototype._quantityWidth=function(t){var e,i;return 0===this._adapter.getQuantity().length?0:(t.save(),t.font=this._adapter.getQuantityFont(),e=10,i=t.measureText(this._adapter.getQuantity()).width,t.restore(),Math.round(Math.max(this._height(),e+i)))},TradingView.PositionRenderer.prototype._reverseButtonWidth=function(){return this._adapter.isOnReverseCallbackPresent()?this._height():0},TradingView.PositionRenderer.prototype._closeButtonWidth=function(){return this._adapter.isOnCloseCallbackPresent()?this._height():0},TradingView.PositionRenderer.prototype._drawLines=function(t,e,i,o,n){t.save(),t.strokeStyle=this._adapter.getLineColor(),t.lineStyle=this._adapter.getLineStyle(),t.lineWidth=this._adapter.getLineWidth(),CanvasEx.drawLine(t,i,o,n,o),this._adapter.getExtendLeft()&&CanvasEx.drawLine(t,0,o,e,o),t.restore()},TradingView.PositionRenderer.prototype._drawBody=function(t,e,i){var o,n;t.strokeStyle=this._adapter.getBodyBorderColor(),t.fillStyle=this._adapter.getBodyBackgroundColor(),o=this._bodyWidth(t),n=this._height(),t.fillRect(e+.5,i+.5,o-1,n-1),t.strokeRect(e,i,o,n)},TradingView.PositionRenderer.prototype._drawBodyText=function(t,e,i){var o,n;t.save(),t.textAlign="center",t.textBaseline="middle",t.font=this._adapter.getBodyFont(),t.fillStyle=this._adapter.getBodyTextColor(),o=e+this._bodyWidth(t)/2,n=i+this._height()/2,t.fillText(this._adapter.getText(),o,n),t.restore()},TradingView.PositionRenderer.prototype._drawQuantity=function(t,e,i){var o,n;t.strokeStyle=this._adapter.getQuantityBorderColor(),t.fillStyle=this._adapter.getQuantityBackgroundColor(),o=this._quantityWidth(t),n=this._height(),t.fillRect(e+.5,i+.5,o-1,n-1),t.strokeRect(e,i,o,n)},TradingView.PositionRenderer.prototype._drawQuantityText=function(t,e,i){var o,n;t.save(),t.textAlign="center",t.textBaseline="middle",t.font=this._adapter.getQuantityFont(),t.fillStyle=this._adapter.getQuantityTextColor(),o=e+this._quantityWidth(t)/2,n=i+this._height()/2,t.fillText(this._adapter.getQuantity(),o,n),t.restore()},TradingView.PositionRenderer.prototype._drawReverseButton=function(t,e,i){var o,n,s,r,a,l,h,c,d;t.save(),t.strokeStyle=this._adapter.getReverseButtonBorderColor(),t.fillStyle=this._adapter.getReverseButtonBackgroundColor(),o=this._reverseButtonWidth(),n=this._height(),t.fillRect(e+.5,i+.5,o-1,n-1),t.strokeRect(e,i,o,n),s=e+o,r=i+n,t.strokeStyle=this._adapter.getReverseButtonIconColor(),a=function(t,e){CanvasEx.drawLine(t,0,0,0,e),CanvasEx.drawLine(t,-1,1,1,1),CanvasEx.drawLine(t,-2,2,2,2)},l=6,h=10,c=e+Math.round((this._reverseButtonWidth()-l)/2),d=i+5,t.save(),t.translate(c,d),a(t,h),t.translate(l,h),t.rotate(Math.PI),a(t,h),t.restore(),this._adapter._blocked&&(t.fillStyle="rgba(140, 140, 140, 0.75)",t.fillRect(e+.5,i+.5,o-1,n-1)),t.restore()},TradingView.PositionRenderer.prototype._drawCloseButton=function(t,e,i){var o,n,s,r,a,l,h;t.save(),t.strokeStyle=this._adapter.getCloseButtonBorderColor(),t.fillStyle=this._adapter.getCloseButtonBackgroundColor(),o=this._closeButtonWidth(),n=this._height(),t.fillRect(e+.5,i+.5,o-1,n-1),t.strokeRect(e,i,o,n),s=e+o,r=i+n,t.strokeStyle=this._adapter.getCloseButtonIconColor(),a=8,l=(this._closeButtonWidth()-a)/2,h=(this._height()-a)/2,CanvasEx.drawPoly(t,[{x:e+l,y:i+h},{x:s-l,y:r-h}],!0),CanvasEx.drawPoly(t,[{x:s-l,y:i+h},{x:e+l,y:r-h}],!0),this._adapter._blocked&&(t.fillStyle="rgba(140, 140, 140, 0.75)",t.fillRect(e+.5,i+.5,o-1,n-1)),t.restore()},TradingView.PositionRenderer.prototype.draw=function(t){var e,i,o,n,s,r,a,l,h,c,d;!this._data.points||this._data.points.length<1||(e=this._data.width,i=this._bodyWidth(t),o=this._quantityWidth(t),n=this._reverseButtonWidth(t),s=i+o+n+this._closeButtonWidth(),r=e-s,a=Math.max(this._adapter.getLineLength()/100*e,1),l=Math.round(e-Math.min(r,a)),h=l-s,c=Math.round(this._data.points[0].y),d=Math.round(c-(this._height()+1)/2),this._cache.bodyRight=h+i,this._cache.quantityRight=this._cache.bodyRight+o,this._cache.reverseButtonRight=this._cache.quantityRight+n,this._cache.top=d,this._cache.bottom=d+this._height(),this._cache.left=h,this._cache.right=l,this._drawLines(t,h,l,c,e),0!==i&&(this._drawBody(t,h,d),this._drawBodyText(t,h,d)),0!==o&&(this._drawQuantity(t,this._cache.bodyRight,d),this._drawQuantityText(t,this._cache.bodyRight,d)),0!==n&&this._drawReverseButton(t,this._cache.quantityRight,d),0!==this._closeButtonWidth()&&this._drawCloseButton(t,this._cache.reverseButtonRight,d))},TradingView.PositionRenderer.prototype.hitTest=function(t){return 0===this._data.points.length?null:t.y<this._cache.top||t.y>this._cache.bottom||t.x<this._cache.left||this._cache.right<t.x?null:this._adapter._blocked?new p(p.CUSTOM,{tooltip:{text:$.t("Position is being changed"),rect:new u(this._cache.bodyRight,this._cache.top,this._cache.quantityRight-this._cache.bodyRight,this._cache.bottom-this._cache.top)}}):t.x>=this._cache.bodyRight&&t.x<this._cache.quantityRight&&this._adapter._onModifyCallback?new p(p.CUSTOM,{mouseDownHandler:this._adapter.callOnModify.bind(this._adapter),tooltip:{text:$.t("Edit Position"),rect:new u(this._cache.bodyRight,this._cache.top,this._cache.quantityRight-this._cache.bodyRight,this._cache.bottom-this._cache.top)}}):t.x>=this._cache.quantityRight&&t.x<this._cache.reverseButtonRight?new p(p.CUSTOM,{mouseDownHandler:this._adapter.callOnReverse.bind(this._adapter),tooltip:{text:$.t("Reverse Position"),rect:new u(this._cache.quantityRight,this._cache.top,this._cache.reverseButtonRight-this._cache.quantityRight,this._cache.bottom-this._cache.top)}}):t.x>=this._cache.reverseButtonRight&&t.x<this._cache.right?new p(p.CUSTOM,{mouseDownHandler:this._adapter.callOnClose.bind(this._adapter),tooltip:{text:$.t("Close Position"),rect:new u(this._cache.reverseButtonRight,this._cache.top,this._cache.right-this._cache.reverseButtonRight,this._cache.bottom-this._cache.top)}}):new p(p.REGULAR,{mouseDownHandler:function(){}})},inherit(n,c),n.prototype._updateImpl=function(){c.prototype._updateImpl.call(this),this._background=this._linetool.properties().lineColor.value()},inherit(s,h),s.prototype.renderer=function(){var t={points:this._points,width:this._model.timeScale().width()};return new TradingView.PositionRenderer(t,this._rendererCache,this._source._adapter)},inherit(r,a),r.prototype.setPoint=function(t,e,i){this._points[t]=e,this.normalizePoints()},r.prototype.addPoint=function(t,e){return this._points.push(t),this._lastPoint=null,this.normalizePoints(),this.createServerPoints(),!0},r.skipMagnetting=!0,r.prototype.title=function(){return"Position"},r.prototype.createPriceAxisView=function(t){return this._priceAxisView=new n(this,t),this._priceAxisView},r.prototype.paneViews=function(t){return TradingView.printing&&!e.enabled("snapshot_trading_drawings")?null:this._model.properties().tradingProperties.showPositions.value()?l.prototype.paneViews.call(this,t):null},r.prototype.priceAxisViews=function(t,i){return TradingView.printing&&!e.enabled("snapshot_trading_drawings")?null:this._model.properties().tradingProperties.showPositions.value()?l.prototype.priceAxisViews.call(this,t,i):null},r.prototype.hasContextMenu=function(){return!0},r.prototype.contextMenuItems=function(){return this._adapter.callOnContextMenu()},t.exports=r}).call(e,i(1))},function(t,e,i){(function(e){"use strict";function o(t){this._line=t,this._data={bodyText:"order",quantityText:"0"}}function n(t,e,i){this._data=t,this._cache=e,this._adapter=i}function s(t,e){h.call(this,t,e)}function r(t,e){p.call(this,t,e),this._rendererCache={}}function a(t,e){this._adapter=new o(this),this._constructor="LineToolOrder";var i=e||new f("linetoolorder");l.call(this,t,new r(this,t),i)}var l=i(134),h=i(67).LineToolPriceAxisView,c=i(113),d=i(67).LineDataSource,p=i(97),u=i(88),_=i(50).Rect,f=i(73).DefaultProperty;o.prototype.getPrice=function(){return this._line.points()[0].price},o.prototype.setPrice=function(t){var e=this._line.points()[0];return e.price=t,this._line._points[0]=e,this._line.normalizePoints(),this._line.updateAllViewsAndRedraw(),this},o.prototype.getText=function(){return this._data.bodyText},o.prototype.setText=function(t){return this._data.bodyText=t||"",this._line.updateAllViewsAndRedraw(),this},o.prototype.setTooltip=function(t){return null==t?t="":t+="",this._line.properties().tooltip.setValue(t),this},o.prototype.getTooltip=function(){return this._line.properties().tooltip.value()},o.prototype.getQuantity=function(){return this._data.quantityText},o.prototype.setQuantity=function(t){return this._data.quantityText=t||"",this._line.updateAllViewsAndRedraw(),this},o.prototype.getExtendLeft=function(){var t=this._line.properties().extendLeft.value();return"inherit"==t?this._line._model.properties().tradingProperties.extendLeft.value():t},o.prototype.setExtendLeft=function(t){return this._line.properties().extendLeft.setValue(t),this},o.prototype.getLineLength=function(){var t=this._line.properties().lineLength.value();return"inherit"==t?this._line._model.properties().tradingProperties.lineLength.value():t},o.prototype.setLineLength=function(t){return this._line.properties().lineLength.setValue(Math.max(0,Math.min(t,100))),this},o.prototype.getLineColor=function(){return c.getColorFromProperties(this._line.properties().lineColor,this._line.properties().lineTransparency)},o.prototype.setLineColor=function(t){return c.setColorToProperties(t,this._line.properties().lineColor,this._line.properties().lineTransparency),this},o.prototype.getLineStyle=function(){var t=this._line.properties().lineStyle.value();return"inherit"==t?this._line._model.properties().tradingProperties.lineStyle.value():t},o.prototype.setLineStyle=function(t){return this._line.properties().lineStyle.setValue(t),this},o.prototype.getLineWidth=function(){var t=this._line.properties().lineWidth.value();return"inherit"==t?this._line._model.properties().tradingProperties.lineWidth.value():t},o.prototype.setLineWidth=function(t){return this._line.properties().lineWidth.setValue(t),this},o.prototype.getBodyBorderColor=function(){return c.getColorFromProperties(this._line.properties().bodyBorderColor,this._line.properties().bodyBorderTransparency)},o.prototype.setBodyBorderColor=function(t){return c.setColorToProperties(t,this._line.properties().bodyBorderColor,this._line.properties().bodyBorderTransparency),this},o.prototype.getBodyBackgroundColor=function(){return c.getColorFromProperties(this._line.properties().bodyBackgroundColor,this._line.properties().bodyBackgroundTransparency)},o.prototype.setBodyBackgroundColor=function(t){return c.setColorToProperties(t,this._line.properties().bodyBackgroundColor,this._line.properties().bodyBackgroundTransparency),this},o.prototype.getBodyTextColor=function(){return c.getColorFromProperties(this._line.properties().bodyTextColor,this._line.properties().bodyTextTransparency)},o.prototype.setBodyTextColor=function(t){return c.setColorToProperties(t,this._line.properties().bodyTextColor,this._line.properties().bodyTextTransparency),this},o.prototype.getBodyFont=function(){return c.getFontFromProperties(this._line.properties().bodyFontFamily,this._line.properties().bodyFontSize,this._line.properties().bodyFontBold,this._line.properties().bodyFontItalic)},o.prototype.setBodyFont=function(t){return c.setFontToProperties(t,this._line.properties().bodyFontFamily,this._line.properties().bodyFontSize,this._line.properties().bodyFontBold,this._line.properties().bodyFontItalic),this},o.prototype.getQuantityBorderColor=function(){return c.getColorFromProperties(this._line.properties().quantityBorderColor,this._line.properties().quantityBorderTransparency)},o.prototype.setQuantityBorderColor=function(t){return c.setColorToProperties(t,this._line.properties().quantityBorderColor,this._line.properties().quantityBorderTransparency),this},o.prototype.getQuantityBackgroundColor=function(){return c.getColorFromProperties(this._line.properties().quantityBackgroundColor,this._line.properties().quantityBackgroundTransparency)},o.prototype.setQuantityBackgroundColor=function(t){return c.setColorToProperties(t,this._line.properties().quantityBackgroundColor,this._line.properties().quantityBackgroundTransparency),this},o.prototype.getQuantityTextColor=function(){return c.getColorFromProperties(this._line.properties().quantityTextColor,this._line.properties().quantityTextTransparency)},o.prototype.setQuantityTextColor=function(t){return c.setColorToProperties(t,this._line.properties().quantityTextColor,this._line.properties().quantityTextTransparency),this},o.prototype.getQuantityFont=function(){return c.getFontFromProperties(this._line.properties().quantityFontFamily,this._line.properties().quantityFontSize,this._line.properties().quantityFontBold,this._line.properties().quantityFontItalic)},o.prototype.setQuantityFont=function(t){return c.setFontToProperties(t,this._line.properties().quantityFontFamily,this._line.properties().quantityFontSize,this._line.properties().quantityFontBold,this._line.properties().quantityFontItalic),this},o.prototype.getCancelButtonBorderColor=function(){return c.getColorFromProperties(this._line.properties().cancelButtonBorderColor,this._line.properties().cancelButtonBorderTransparency)},o.prototype.setCancelButtonBorderColor=function(t){return c.setColorToProperties(t,this._line.properties().cancelButtonBorderColor,this._line.properties().cancelButtonBorderTransparency),this},o.prototype.getCancelButtonBackgroundColor=function(){return c.getColorFromProperties(this._line.properties().cancelButtonBackgroundColor,this._line.properties().cancelButtonBackgroundTransparency)},o.prototype.setCancelButtonBackgroundColor=function(t){return c.setColorToProperties(t,this._line.properties().cancelButtonBackgroundColor,this._line.properties().cancelButtonBackgroundTransparency),this},o.prototype.getCancelButtonIconColor=function(){return c.getColorFromProperties(this._line.properties().cancelButtonIconColor,this._line.properties().cancelButtonIconTransparency)},o.prototype.setCancelButtonIconColor=function(t){return c.setColorToProperties(t,this._line.properties().cancelButtonIconColor,this._line.properties().cancelButtonIconTransparency),this},o.prototype.isFunction=function(t){return"function"==typeof t},o.prototype.onCancel=function(t,e){return e?this.isFunction(e)&&(this._onCancelData=t,this._onCancelCallback=e):this.isFunction(t)&&(this._onCancelCallback=t),this},o.prototype.callOnCancel=function(){this.isFunction(this._onCancelCallback)&&this._onCancelCallback.call(this,this._onCancelData)},o.prototype.isOnCancelCallbackPresent=function(){return this.isFunction(this._onCancelCallback)},o.prototype.onModify=function(t,e){return e?this.isFunction(e)&&(this._onModifyData=t,this._onModifyCallback=e):this.isFunction(t)&&(this._onModifyCallback=t),this},o.prototype.callOnModify=function(){this.isFunction(this._onModifyCallback)&&this._onModifyCallback.call(this,this._onModifyData)},o.prototype.onMove=function(t,e){return e?this.isFunction(e)&&(this._onMoveData=t,this._onMoveCallback=e):this.isFunction(t)&&(this._onMoveCallback=t),this},o.prototype.callOnMove=function(){this.isFunction(this._onMoveCallback)&&this._onMoveCallback.call(this,this._onMoveData)},o.prototype.onContextMenu=function(t,e){return e?this.isFunction(e)&&(this._onContextMenuData=t,this._onContextMenuCallback=e):this.isFunction(t)&&(this._onContextMenuCallback=t),this},o.prototype.callOnContextMenu=function(){if(this.isFunction(this._onContextMenuCallback))return this._onContextMenuCallback.call(this,this._onContextMenuData)},o.prototype.remove=function(){this._line._model.removeSource(this._line),delete this._line},n.prototype._height=function(){var t=1;return Math.max(20,t+Math.max(c.fontHeight(this._adapter.getBodyFont()),c.fontHeight(this._adapter.getQuantityFont())))},n.prototype._bodyWidth=function(t){var e,i,o;return 0===this._adapter.getText().length?0:(t.save(),t.font=this._adapter.getBodyFont(),e=10,i=10,o=t.measureText(this._adapter.getText()).width,t.restore(),Math.round(e+i+o))},n.prototype._quantityWidth=function(t){var e,i;return 0===this._adapter.getQuantity().length?0:(t.save(),t.font=this._adapter.getQuantityFont(),e=10,i=t.measureText(this._adapter.getQuantity()).width,t.restore(),Math.round(Math.max(this._height(),e+i)))},n.prototype._cancelButtonWidth=function(){return this._adapter.isOnCancelCallbackPresent()?this._height():0},n.prototype._drawLines=function(t,e,i,o,n){t.save(),t.strokeStyle=this._adapter.getLineColor(),t.lineStyle=this._adapter.getLineStyle(),t.lineWidth=this._adapter.getLineWidth(),CanvasEx.drawLine(t,i,o,n,o),this._adapter.getExtendLeft()&&CanvasEx.drawLine(t,0,o,e,o),t.restore()},n.prototype._drawMovePoints=function(t,e,i){var o,n,s,r,a,l,h,c;for(t.save(),t.strokeStyle=this._adapter.getBodyBorderColor(),t.fillStyle=this._adapter.getBodyBorderColor(),o=2,n=4,s=5,r=e+n,a=r+o,l=Math.floor((this._height()-2*s)/2)+1,h=0;h<l;++h)c=i+s+2*h,CanvasEx.drawLine(t,r,c,a,c);t.restore()},n.prototype._drawBody=function(t,e,i){var o,n;t.strokeStyle=this._adapter.getBodyBorderColor(),t.fillStyle=this._adapter.getBodyBackgroundColor(),o=this._bodyWidth(t),n=this._height(),t.fillRect(e+.5,i+.5,o-1,n-1),t.strokeRect(e,i,o,n)},n.prototype._drawBodyText=function(t,e,i){var o,n,s;t.textAlign="center",t.textBaseline="middle",t.font=this._adapter.getBodyFont(),t.fillStyle=this._adapter.getBodyTextColor(),o=5,n=e+this._bodyWidth(t)/2,s=i+this._height()/2,t.fillText(this._adapter.getText(),o+n-2,s)},n.prototype._drawQuantity=function(t,e,i,o){var n,s;t.save(),t.strokeStyle=this._adapter.getQuantityBorderColor(),t.fillStyle=this._adapter.getQuantityBackgroundColor(),n=this._quantityWidth(t),s=this._height(),t.fillRect(e+.5,i+.5,n-1,s-1),o&&t.clip&&(t.beginPath(),t.rect(e+.5,i-.5,n+1,s+1),t.clip()),t.strokeRect(e,i,n,s),t.restore()},n.prototype._drawQuantityText=function(t,e,i){var o,n;t.save(),t.textAlign="center",t.textBaseline="middle",t.font=this._adapter.getQuantityFont(),t.fillStyle=this._adapter.getQuantityTextColor(),o=e+this._quantityWidth(t)/2,n=i+this._height()/2,t.fillText(this._adapter.getQuantity(),o,n),t.restore()},n.prototype._drawCancelButton=function(t,e,i,o){var n,s,r,a,l,h,c;t.strokeStyle=this._adapter.getCancelButtonBorderColor(),t.fillStyle=this._adapter.getCancelButtonBackgroundColor(),n=this._cancelButtonWidth(),s=this._height(),t.fillRect(e+.5,i+.5,n-1,s-1),t.save(),o&&t.clip&&(t.beginPath(),t.rect(e+.5,i-.5,n+1,s+1),t.clip()),t.strokeRect(e,i,n,s),t.restore(),r=e+n,a=i+s,t.strokeStyle=this._adapter.getCancelButtonIconColor(),l=8,h=(this._cancelButtonWidth()-l)/2,c=(this._height()-l)/2,CanvasEx.drawPoly(t,[{x:e+h,y:i+c},{x:r-h,y:a-c}],!0),CanvasEx.drawPoly(t,[{x:r-h,y:i+c},{x:e+h,y:a-c}],!0)},n.prototype.draw=function(t){var e,i,o,n,s,r,a,l,h,c,d;!this._data.points||this._data.points.length<1||(e=this._data.width,i=this._bodyWidth(t),o=this._quantityWidth(t),n=i+o+this._cancelButtonWidth(),s=e-n,r=Math.max(this._adapter.getLineLength()/100*e,1),a=Math.round(e-Math.min(s,r)),l=a-n,h=Math.round(this._data.points[0].y),c=Math.round(h-(this._height()+1)/2),this._cache.bodyRight=l+i,this._cache.quantityRight=l+i+o,this._cache.top=c,this._cache.bottom=c+this._height(),this._cache.left=l,this._cache.right=a,this._drawLines(t,l,a,h,e),d=!1,0!==i&&(this._drawBody(t,l,c),this._drawMovePoints(t,l,c),this._drawBodyText(t,l,c),d=!0),0!==o&&(this._drawQuantity(t,l+i,c,d),this._drawQuantityText(t,l+i,c),d=!0),0!==this._cancelButtonWidth()&&this._drawCancelButton(t,l+i+o,c,d))},n.prototype.hitTest=function(t){return 0===this._data.points.length?null:t.y<this._cache.top||t.y>this._cache.bottom?null:t.x>=this._cache.left&&t.x<this._cache.bodyRight?0===this._adapter.getTooltip().length?new u(u.MOVEPOINT):new u(u.MOVEPOINT,{tooltip:{text:this._adapter.getTooltip(),rect:new _(this._cache.left,this._cache.top,this._cache.bodyRight-this._cache.left,this._cache.bottom-this._cache.top)}}):t.x>=this._cache.bodyRight&&t.x<this._cache.quantityRight?new u(u.CUSTOM,{mouseDownHandler:this._adapter.callOnModify.bind(this._adapter),tooltip:{text:$.t("Edit Order"),rect:new _(this._cache.bodyRight,this._cache.top,this._cache.quantityRight-this._cache.bodyRight,this._cache.bottom-this._cache.top)}}):t.x>=this._cache.quantityRight&&t.x<this._cache.right?new u(u.CUSTOM,{mouseDownHandler:this._adapter.callOnCancel.bind(this._adapter),tooltip:{text:$.t("Cancel Order"),rect:new _(this._cache.quantityRight,this._cache.top,this._cache.right-this._cache.quantityRight,this._cache.bottom-this._cache.top)}}):null},inherit(s,h),s.prototype._updateImpl=function(){h.prototype._updateImpl.call(this),this._background=this._linetool.properties().lineColor.value()},inherit(r,p),r.prototype.renderer=function(){var t={points:this._points,width:this._model.timeScale().width()};return new n(t,this._rendererCache,this._source._adapter)},inherit(a,l),a.skipMagnetting=!0,a.prototype.setPoint=function(t,e,i){this._points[t]=e,this.normalizePoints()},a.prototype.addPoint=function(t,e){return this._points.push(t),this._lastPoint=null,this.normalizePoints(),this.createServerPoints(),!0},a.prototype.title=function(){return"Order"},a.prototype.endMoving=function(t){var e=this._startMovingPoint&&this._currentMovingPoint&&this._startMovingPoint.price!=this._currentMovingPoint.price;l.prototype.endMoving.call(this),!t&&e&&this._adapter.callOnMove()},a.prototype.createPriceAxisView=function(t){return this._priceAxisView=new s(this,t),this._priceAxisView},a.prototype.paneViews=function(t){return TradingView.printing&&!e.enabled("snapshot_trading_drawings")?null:this._model.properties().tradingProperties.showOrders.value()?d.prototype.paneViews.call(this,t):null},a.prototype.priceAxisViews=function(t,i){return TradingView.printing&&!e.enabled("snapshot_trading_drawings")?null:this._model.properties().tradingProperties.showOrders.value()?d.prototype.priceAxisViews.call(this,t,i):null},a.prototype.hasContextMenu=function(){return!0},a.prototype.contextMenuItems=function(){return this._adapter.callOnContextMenu()},a.prototype.onlyYMoving=function(){return!0},t.exports=a}).call(e,i(1))},function(t,e,i){"use strict";for(var o={StudyStrategy:i(248),StatusView:i(190),StudyLineDataSource:i(136).StudyLineDataSource,StudyLineDataSourcePaneView:i(136).StudyLineDataSourcePaneView,StudyVersioning:i(139),StudyMigration:i(140),study_Overlay:i(250).study_Overlay,study_Compare:i(251),study_ScriptWithDataOffset:i(252),StudyPaneView:i(187).StudyPaneView,StudyBackgroundPaneView:i(187).StudyBackgroundPaneView,StudyPlotShapesPaneView:i(187).StudyPlotShapesPaneView,StudyPlotCharsPaneView:i(187).StudyPlotCharsPaneView,StudyPlotArrowsPaneView:i(187).StudyPlotArrowsPaneView,StudyPlotCandlesPaneView:i(187).StudyPlotCandlesPaneView,StudyStrategyOrdersPaneView:i(249),StudyPriceAxisView:i(186),StudyDataWindowView:i(189).StudyDataWindowView,DataVendorStudyDataWindowView:i(189).DataVendorStudyDataWindowView,LineStudyMtpAnalysis:i(253),LineStudyMtpDecisionPoint:i(254),LineStudyMtpRiskReward:i(255),LineStudyMtpElliotWaveMain:i(256).LineStudyMtpElliotWaveMain,LineStudyMtpElliotWaveMajor:i(256).LineStudyMtpElliotWaveMajor,LineStudyMtpElliotWaveMinor:i(256).LineStudyMtpElliotWaveMinor,LineStudyMtpDownWave1OrA:i(257).LineStudyMtpDownWave1OrA,LineStudyMtpDownWave2OrB:i(257).LineStudyMtpDownWave2OrB,LineStudyMtpDownWave3:i(257).LineStudyMtpDownWave3,LineStudyMtpDownWave4:i(257).LineStudyMtpDownWave4,LineStudyMtpDownWave5:i(257).LineStudyMtpDownWave5,LineStudyMtpDownWaveC:i(257).LineStudyMtpDownWaveC,LineStudyMtpUpWave1OrA:i(257).LineStudyMtpUpWave1OrA,LineStudyMtpUpWave2OrB:i(257).LineStudyMtpUpWave2OrB,LineStudyMtpUpWave3:i(257).LineStudyMtpUpWave3,LineStudyMtpUpWave4:i(257).LineStudyMtpUpWave4,LineStudyMtpUpWave5:i(257).LineStudyMtpUpWave5,LineStudyMtpUpWaveC:i(257).LineStudyMtpUpWaveC},n=Object.keys(o),s=n.length;s--;)TradingView[n[s]]=o[n[s]];t.exports=o},function(t,e,i){
(function(e){"use strict";function o(t,i,o,s){n.call(this,t,i,o,s),this._barsIndexes=[],this._reportDataBuffer=this._reportData=null,this.watchedData=new e,this.model().addStrategySource(this)}var n=i(141).Study,s=i(249);inherit(o,n),o.prototype.stop=function(){return n.prototype.stop.call(this),this._avoidRemoveStrategySource?void delete this._avoidRemoveStrategySource:void this.model().removeStrategySource(this)},o.prototype.processHibernate=function(){this._studyId&&!this.isVisible()&&(this._avoidRemoveStrategySource=!0),n.prototype.processHibernate.call(this)},o.prototype.onData=function(t){var e,i,o,s;n.prototype.onData.call(this,t),t.method&&"data_update"==t.method&&(e=t.params&&t.params.nonseries&&t.params.nonseries.d,i=e&&e.data&&e.data.report,i?(e.isUpdate&&this._reportDataBuffer&&(i=$.extend(this._reportDataBuffer,i)),this._reportDataBuffer=this._reportData=$.extend(this._reportDataBuffer||{},i)):(o=$.extend({},t),$.extend(!0,o,{params:{nonseries:{d:{data:{report:this._reportDataBuffer}}}}}),t=o),s=t.params&&t.params.nonseries&&t.params.nonseries.indexes,"nochange"!=s&&s instanceof Array&&s.length&&this._collateBarsIndexes(s)),this.watchedData.setValue(t)},o.prototype._collateBarsIndexes=function(t){var e,i;if(Array.isArray(t)&&(e=this._reportData&&this._reportData.filledOrders,e&&e.length))for(this._barsIndexes.length=0,i=0;i<e.length;i++)this._barsIndexes[i]=t[e[i].tm]},o.prototype.reportData=function(){return this._reportData},o.prototype.ordersData=function(){return this._reportData&&this._reportData.filledOrders},o.prototype.barsIndexes=function(){return this._barsIndexes},o.prototype.clearData=function(){n.prototype.clearData.call(this),this._strategyOrdersPaneView&&this._strategyOrdersPaneView.clearItems()},o.prototype.restoreData=function(t){n.prototype.restoreData.apply(this,arguments),this.model().addStrategySource(this),t.reportData&&t.barsIndexes&&(this._reportData=t.reportData,this._barsIndexes=t.barsIndexes,this.watchedData.setValue({method:"data_update",params:{nonseries:{d:{data:{report:this._reportData}}}}})),t.activeState&&(this._activeState=!0)},o.prototype.activeState=function(){return this._activeState},o.prototype.updateAllViews=function(){n.prototype.updateAllViews.call(this),this._strategyOrdersPaneView&&this._strategyOrdersPaneView.update()},o.prototype.createViews=function(){n.prototype.createViews.call(this),this._strategyOrdersPaneView=new s(this,this._series,this._model)},o.prototype.state=function(t){var e=n.prototype.state.apply(this,arguments);return t&&this._reportData&&this._barsIndexes&&(e.data||(e.data={}),e.data.reportData=this._reportData,e.data.barsIndexes=this._barsIndexes,e.data.activeState=this.model().activeStrategySource().value()==this),e},t.exports=o}).call(e,i(45))},function(t,e,i){(function(e){"use strict";function o(t,e,i){this._study=t,this._series=e,this._model=i,this._invalidated=!0,this._orderArrow={vMargin:o.DEFAULT_ORDER_ARROW_VMARGIN,width:o.DEFAULT_ORDER_ARROW_WIDTH,height:o.DEFAULT_ORDER_ARROW_HEIGHT},this._exitLineWidth=o.DEFAULT_ORDER_ARROW_EXIT_LINE_WIDTH,this._priceArrow={width:o.DEFAULT_PRICE_ARROW_WIDTH,height:o.DEFAULT_PRICE_ARROW_HEIGHT},this._text={vMargin:o.DEFAULT_TEXT_VMARGIN,font:o.DEFAULT_FONT,fontSize:o.DEFAULT_FONT_SIZE},this._checkHideTextIfBarSpacingLT=o.DEFAULT_CHECK_HIDE_TEXT_IF_BARSPACING_LT,this._textIsVisible=!0,this._colors={entryBuy:o.DEFAULT_ENTRY_BUY_COLOR,entrySell:o.DEFAULT_ENTRY_SELL_COLOR,exit:o.DEFAULT_EXIT_COLOR},this._items={entryBuy:[],entrySell:[],exit:[]},this._textWidths={},this._study.properties().strategy.orders.subscribe(this,this.update)}var n=i(89).PaneRendererStudyStrategyOrders,s=i(92);o.DEFAULT_ORDER_ARROW_VMARGIN=7,o.DEFAULT_ORDER_ARROW_WIDTH=9,o.DEFAULT_ORDER_ARROW_HEIGHT=11,o.DEFAULT_ORDER_ARROW_EXIT_LINE_WIDTH=2,o.DEFAULT_PRICE_ARROW_WIDTH=5,o.DEFAULT_PRICE_ARROW_HEIGHT=9,o.DEFAULT_TEXT_VMARGIN=2,o.DEFAULT_FONT="Arial",o.DEFAULT_FONT_SIZE=10,o.DEFAULT_CHECK_HIDE_TEXT_IF_BARSPACING_LT=10,o.DEFAULT_ENTRY_BUY_COLOR="#008fff",o.DEFAULT_ENTRY_SELL_COLOR="#f00",o.DEFAULT_EXIT_COLOR="#cc47ed",o.prototype._updateImpl=function(){var t,i,o,n,s,r,a,l,h,c,d,p,u,_,f,g,m,v,y,w,b,S,T,C,x,P;if(this.clearItems(),t=this._study.ordersData(),t&&t.length&&(i=this._model.timeScale(),o=this._series.priceScale(),!(!i||!o||i&&i.isEmpty()||o&&o.isEmpty()||(n=i.visibleBars().clone(),n.isEmpty())))){for(s=this._study.barsIndexes(),r=this._series.nearestIndex(n.firstBar(),TradingView.SEARCH_NEAREST_RIGHT),a=this._series.nearestIndex(n.lastBar(),TradingView.SEARCH_NEAREST_LEFT),l=r,h=[],c=[];l<=a;l++)for(d=-1;(d=s.indexOf(l,d+1))!=-1;)p=t[d],p&&(h.push(p),c.push(l));for(u=this._study.properties(),_=u.strategy.orders.showLabels.value(),f=u.strategy.orders.showQty.value(),g=_||f,g&&i.barSpacing()<this._checkHideTextIfBarSpacingLT&&this._orderArrow.width*h.length*2>i.width()&&(g=!1),m=g&&this._text.fontSize+this._text.vMargin||0,v=m&&m*(_+f),y=0,w={upper:[],lower:[]};y<h.length;y++)p=h[y],d=c[y],b=i.indexToCoordinate(d,!0),S=o.priceToCoordinate(this._series[p.b?"low":"high"](d),!0),T=p.b?"lower":"upper",C="number"==typeof w[T][d]&&w[T][d]||0,S+=p.b?C:-C,"number"!=typeof w[T][d]&&(w[T][d]=0),w[T][d]+=(p.e?0:this._exitLineWidth)+this._orderArrow.vMargin+this._orderArrow.height+v,x=o.priceToCoordinate(p.p,!0),P=p.e?!p.b&&p.e?"entrySell":"entryBuy":"exit",this._items[P].push({orderPoint:new e.Point(b,S),pricePoint:new e.Point(b,x),label:_&&(p.c||p.id||"Untitled")||null,qty:f&&(p.b?"+":"-")+~~p.q||null,pos:T});this._textLabelIsVisible=_,this._textQtyIsVisible=f,this._textIsVisible=g}},o.prototype.update=function(){this._invalidated=!0},o.prototype.clearItems=function(){this._items.entryBuy.length=this._items.entrySell.length=this._items.exit.length=0},o.prototype.renderer=function(){var t,e,i,o=this._study.properties();if(o.visible.value()&&o.strategy.orders.visible.value()&&(t=this._series.priceScale(),(this._invalidated||t&&t.isScaled())&&(this._updateImpl(),this._invalidated=!1),this._items.entryBuy.length||this._items.entrySell.length||this._items.exit.length)){e=new s;for(i in this._items)this._items[i].length&&e.append(new n({items:this._items[i],color:this._colors[i],orderArrow:this._orderArrow,exitLineWidth:"exit"==i&&this._exitLineWidth||0,priceArrow:this._priceArrow,text:this._textIsVisible&&this._text||null},this._textWidths));return e}},t.exports=o}).call(e,i(21))},function(t,e,i){(function(t){"use strict";function o(e,i){this._source=e,this._model=i,this._points=[new t.Point(0,0)]}function n(t,e){this._source=t,this._model=e,this._invalidated=!0,this._text="",this._coordinate=0,this._background="black",this._color="white"}function s(t,e){y.call(this),this._study=t,this._model=e,this._items.push(new w("Open","")),this._items.push(new w("High","")),this._items.push(new w("Low","")),this._items.push(new w("Close","")),this._invalidated=!0,this.update()}function r(t,e,i,o){this._symbolLabelView=new T(t,this,"close","symbol","showSymbolLabels"),l.call(this,t,e,i,o),this._formatter=null,this._paneView=null;var n=this;this.properties().minTick.listeners().subscribe(null,function(){n._createFormatter(),n.updateAllViews(),n._model.invalidate(new P(P.FULL_UPDATE))})}var a=i(77),l=i(141).Study,h=i(68),c=i(69),d=i(86),p=d.SeriesAreaPaneView,u=d.SeriesLinePaneView,_=d.SeriesHollowCandlesPaneView,f=d.SeriesCandlesPaneView,g=d.SeriesBarsPaneView,m=i(190),v=i(85),y=v.DataWindowView,w=v.DataWindowItem,b=i(95).SeriesBarColorer,S=i(96).HorzLineRenderer,T=i(100),C=i(88),x=i(103),P=i(106),L=i(75),k=L.PriceFormatter;o.prototype.update=function(){if(this._visible=!1,this._source.properties().showPriceLine.value()){var e=this._source.lastValueData("close",!0);e.noData||(this._visible=!0,this._points=[new t.Point(0,e.coordinate)],this._color=e.color)}},o.prototype.renderer=function(){var t={};return t.points=this._points,t.color=this._color,t.linewidth=1,t.linestyle=CanvasEx.LINESTYLE_DOTTED,t.hitTestResult=C.REGULAR,t.visible=this._visible,new S(t)},inherit(n,h),n.prototype.update=function(){this._invalidated=!0},n.prototype.coordinate=function(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),h.prototype.coordinate.call(this)},n.prototype._updateImpl=function(){this._visible=!1,this._text="";var t=this._source.lastValueData("close",!1);t.noData||(this._text=t.text,this._floatCoordinate=t.floatCoordinate,this._coordinate=t.coordinate,this._background=t.color,this._visible=!0)},n.prototype.renderer=function(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);var t={text:this._text,coordinate:this._coordinate,color:this.color(),background:this._background,visible:this._visible};return new c(t)},inherit(s,y),s.prototype._updateImpl=function(){var t,e,i,o,n,s,r,l,h,c,d,p;if(this._header=this._study.title(),!this._model.timeScale().isEmpty()&&0!==this._study.data().length){if(i=!1,this._study.properties().style.value()===a.STYLE_BARS?(t=this._study.properties().barStyle.upColor.value(),e=this._study.properties().barStyle.downColor.value(),i=this._study.properties().barStyle.barColorsOnPrevClose.value()):this._study.properties().style.value()===a.STYLE_CANDLES?(t=this._study.properties().candleStyle.upColor.value(),e=this._study.properties().candleStyle.downColor.value(),i=this._study.properties().candleStyle.barColorsOnPrevClose.value()):this._study.properties().style.value()===a.STYLE_HOLLOW_CANDLES?(t=this._study.properties().hollowCandleStyle.upColor.value(),e=this._study.properties().hollowCandleStyle.downColor.value(),i=!0):this._study.properties().style.value()===a.STYLE_LINE?t=e=this._study.properties().lineStyle.color.value():this._study.properties().style.value()===a.STYLE_AREA&&(t=e=this._study.properties().areaStyle.linecolor.value()),o=this._study.series(),n=this._model.crossHairSource().appliedIndex(),s=o.nearestIndex(n,TradingView.SEARCH_NEAREST_LEFT),void 0!==s){if(r=this._study.data().valueAt(s),!(r&&r[TradingView.OPEN_PLOT]&&r[TradingView.HIGH_PLOT]&&r[TradingView.LOW_PLOT]&&r[TradingView.CLOSE_PLOT]))return;for(l=this._study.formatter(),this._items[0].setValue(l.format(r[TradingView.OPEN_PLOT])),this._items[1].setValue(l.format(r[TradingView.HIGH_PLOT])),this._items[2].setValue(l.format(r[TradingView.LOW_PLOT])),this._items[3].setValue(l.format(r[TradingView.CLOSE_PLOT])),i&&s>=1?(c=this._study.data().valueAt(s-1),h=c[TradingView.CLOSE_PLOT]<=r[TradingView.CLOSE_PLOT]?t:e):h=r[TradingView.OPEN_PLOT]<=r[TradingView.CLOSE_PLOT]?t:e,d=0;d<4;d++)this._items[d].setColor(h)}p=x(this._study.symbolInfo()),p?this._additional="(Data Provided by "+p+")":this._additional=void 0}},s.prototype.items=function(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._items},s.prototype.update=function(){this._invalidated=!0},s.prototype.additional=function(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._additional},inherit(r,l),r.prototype.createPlotLabels=function(t){},r.prototype.symbol=function(){var t,e=this.properties().inputs.symbol.value(),i=this._resolvedSymbols?this._resolvedSymbols[e]:null;return t=i?i.name:e,t.toUpperCase()},r.prototype.lastValueData=function(t,e){var i,o,n,s,r=l.prototype.lastValueData.call(this,"close",e);if(r.noData)return r;switch(i="#00c000",o="#e00000",n=this.properties(),s=r.item,n.style.value()){case a.STYLE_BARS:r.color=s[TradingView.OPEN_PLOT]<=s[TradingView.CLOSE_PLOT]?n.barStyle.upColor.value():n.barStyle.downColor.value();break;case a.STYLE_CANDLES:r.color=s[TradingView.OPEN_PLOT]<=s[TradingView.CLOSE_PLOT]?n.candleStyle.upColor.value():n.candleStyle.downColor.value();break;case a.STYLE_HOLLOW_CANDLES:r.color=s[TradingView.OPEN_PLOT]<=s[TradingView.CLOSE_PLOT]?n.candleStyle.upColor.value():n.candleStyle.downColor.value();break;case a.STYLE_LINE:r.color=n.lineStyle.color.value();break;case a.STYLE_AREA:r.color=n.areaStyle.color1.value()}return r},r.prototype.createViews=function(){this._priceAxisViews=[],this._priceAxisViewsBase=[new n(this,this._model)],this._paneViews=[];var t=null;switch(this._properties.style.value()){case a.STYLE_BARS:t=new g(this,this._model);break;case a.STYLE_CANDLES:t=new f(this,this._model);break;case a.STYLE_HOLLOW_CANDLES:t=new _(this,this._model);break;case a.STYLE_LINE:t=new u(this,this._properties.lineStyle.priceSource.value(),this._model);break;case a.STYLE_AREA:t=new p(this,this._properties.areaStyle.priceSource.value(),this._model)}t&&this._paneViews.push(t),this._paneViews.push(new o(this,this._model)),this._paneViews.push(this._symbolLabelView),this._dataWindowView||(this._dataWindowView=new s(this,this._model)),this._statusView||(this._statusView=new m(this)),this._priceAxisViews=[].concat(this._priceAxisViewsBase,this._hlinesPriceAsisViews,this._horizlinesPriceAsisViews)},r.prototype.barColorer=function(){return new b(this)},r.prototype.start=function(){this._formatter=null,l.prototype.start.call(this),this.priceScale()&&this.priceScale().updateFormatter()},r.prototype._createFormatter=function(){var t,e,i,o,n,s,r;"default"==this.properties().minTick.value()?(t=this.properties().inputs.symbol.value(),e=this._resolvedSymbols[t],this._formatter=new k(e?e.pricescale:100,e?e.minmov:1,!!e&&e.fractional)):(i=this.properties().minTick.value(),o=isNumber(i)?["100","1","false"]:i.split(","),n=parseInt(o[0]),s=parseInt(o[1]),r="true"===o[2],this._formatter=new k(n,s,r)),this.priceScale()&&this.priceScale().updateFormatter()},r.prototype.formatter=function(){return this._formatter||this._createFormatter(),this._formatter},r.prototype._changeInputs=function(){l.prototype._changeInputs.call(this,this.inputs()),this.m_formatter=null,this.priceScale().updateFormatter()},r.prototype.title=function(){var t,e=this.properties().inputs.symbol.value(),i=this._resolvedSymbols[e];return t=i?i.name+", "+i.exchange:e,t.toUpperCase()},r.prototype.bars=function(){return this.m_data},r.prototype.open=function(t){return this.bars().valueAt(t)[TradingView.OPEN_PLOT]},r.prototype.high=function(t){return this.bars().valueAt(t)[TradingView.HIGH_PLOT]},r.prototype.low=function(t){return this.bars().valueAt(t)[TradingView.LOW_PLOT]},r.prototype.close=function(t){return this.bars().valueAt(t)[TradingView.CLOSE_PLOT]},r.prototype.hl2=function(t){return(this.high(t)+this.low(t))/2},r.prototype.hlc3=function(t){return(this.high(t)+this.low(t)+this.close(t))/3},r.prototype.ohlc4=function(t){return(this.open(t)+this.high(t)+this.low(t)+this.close(t))/4},r.prototype.symbolInfo=function(){if(!this._resolvedSymbols)return null;var t=this._properties.inputs.symbol.value();return t?this._resolvedSymbols[t]:null},r.prototype.lastPriceLabelFixedCoordinate=function(){return this._priceAxisViews[0]._fixedCoordinate},r.prototype.tags=function(){var t=[],e=this.symbolInfo();return e?t.push(e.name):this._properties.inputs.symbol.value()&&t.push(this._properties.inputs.symbol.value()),t},e.OverlayDataWindowView=s,e.study_Overlay=r}).call(e,i(21))},function(t,e,i){"use strict";function o(t,e,i,o){this._symbolLabelView=new s(t,this,"compare","symbol","showSymbolLabels"),TradingView.Study.call(this,t,e,i,o);var n=this;this._properties.minTick.listeners().subscribe(null,function(){n._createFormatter()}),this.properties().minTick.listeners().subscribe(null,function(){n._model.invalidate(new r(r.FULL_UPDATE))}),this._properties.merge({skipHistogramBaseOnAutoScale:!0})}var n=i(189).DataVendorStudyDataWindowView,s=i(100),r=i(106),a=i(75),l=a.PriceFormatter;inherit(o,TradingView.Study),o.prototype.createPlotLabels=function(t){},o.prototype.createViews=function(){this._dataWindowView||(this._dataWindowView=new n(this,this._model)),TradingView.Study.prototype.createViews.call(this),this._paneViews.push(this._symbolLabelView)},o.prototype._createFormatter=function(){var t,e,i,o,n,s=this.properties().inputs.symbol.value(),r=this._resolvedSymbols?this._resolvedSymbols[s]:null;"default"==this.properties().minTick.value()?this._formatter=new l(r?r.pricescale:100,r?r.minmov:1,!!r&&r.fractional):(t=this.properties().minTick.value(),e=isNumber(t)?["100","1","false"]:t.split(","),i=parseInt(e[0]),o=parseInt(e[1]),n="true"===e[2],this._formatter=new l(i,o,n)),this.priceScale()&&this.priceScale().updateFormatter()},o.prototype.symbol=function(){var t,e=this.properties().inputs.symbol.value(),i=this._resolvedSymbols?this._resolvedSymbols[e]:null;return t=i?i.name:e,t.toUpperCase()},o.prototype.title=function(t){var e,i=this.properties().inputs.symbol.value(),o=this._resolvedSymbols?this._resolvedSymbols[i]:null;return e=o?o.name+", "+o.exchange:i,e.toUpperCase()},o.prototype.symbolInfo=function(){if(!this._resolvedSymbols)return null;var t=this._properties.inputs.symbol.value();return t?this._resolvedSymbols[t]:null},o.prototype.lastPriceLabelFixedCoordinate=function(){return this._priceAxisViews[0]._fixedCoordinate},o.prototype.tags=function(){var t=this.symbol();return t?[t]:[]},t.exports=o},function(t,e,i){"use strict";function o(t,e,i,o){n.call(this,t,e,i,o)}var n=i(141).Study,s=i(105);inherit(o,n),o.prototype.clearData=function(){n.prototype.clearData.call(this),this._underlyingData=new s(this._plotFields)},o.prototype._mergeData=function(t){var e,i,o,n=0===this._underlyingData._length()?null:this._underlyingData._indexAt(0);for(this._underlyingData.merge(t),n!==this._underlyingData._indexAt(0)&&(this.m_data=new s(this._underlyingData.columns())),this.m_data._start=this._underlyingData._start,this.m_data._end=this._underlyingData._end,e=this.m_data._length(),i=e;i<this._underlyingData._length();++i)o=TradingView.merge({},this._underlyingData._valueAt(i)),this.m_data.add(this._underlyingData._indexAt(i),o);return this._plotsForStrategyProcessing().forEach(function(t){var i=this._createStrategy(t.strategy,t.strategyIndex,t.targetIndex,e);i.rebuildData(this.m_data)},this),this.m_data},o.prototype._plotsForStrategyProcessing=function(){var t=["dataoffset"],e=[];return this._metaInfo.plots.forEach(function(i,o){var n,s,r=t.indexOf(i.type)>-1;r&&(n=null,this._metaInfo.plots.forEach(function(t,e){t.id==i.target&&(n=e)}),assert(n>=0,"target plot not found for strategy plot "+i.id),s={strategy:i.type,strategyIndex:o,targetIndex:n},e.push(s))},this),e},o.prototype._createStrategy=function(t,e,i,n){var s="Strategy_"+t;return new o[s](e,i,n)},o.Strategy_dataoffset=function(t,e,i){this._strategyPlotIndex=t,this._targetPlotIndex=e,this._startIndex=i},o.Strategy_dataoffset.prototype.rebuildData=function(t){var e,i,o,n,s,r,a,l=this._targetPlotIndex+1,h=this._strategyPlotIndex+1,c=null,d=null;for(e=this._startIndex;e<t._length();++e)i=t._valueAt(e),o=i[l],n=i[h]?Math.round(i[h]):null,i[l]=null,i[h]=null,!n||n>0||(s=e+n,r={pointIndex:s,value:o},d?d.pointIndex!=r.pointIndex&&(s>=0&&(t._items[s].value[l]=o),a=!1,c&&(a=c.value<=d.value&&d.value<=o||c.value>=d.value&&d.value>=o),a?d.pointIndex>=0&&(t._items[d.pointIndex].value[l]=null):c=d,d=r):d=r)},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i)}var n=i(194);inherit(o,n),o.prototype._mtpStudyId=function(){return"mtp_tsanalysis"},o.prototype.pointsCount=function(){return 1},o.prototype._studyInputs=function(){var t=this.points()[0].index,e=this._model.mainSeries().bars().valueAt(t);return e?[this.properties().inputs.displayZoneLabels.value(),1e3*e[TradingView.TIME_PLOT],this.properties().inputs.account_size.value(),this.properties().inputs.percent_risk.value(),this.properties().inputs.tickEntryOffset.value(),this.properties().inputs.tickStopOffset.value(),this.properties().inputs.minRRRatio.value(),this.properties().inputs.shouldFilterWPTZones.value(),this.properties().inputs.shouldFilterSTFTrends.value()]:null},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i),this._symbolIntervalChanged=!1,this._model.mainSeries().onSymbolIntervalChanged().subscribe(this,this.onSymbolIntervalChanged)}var n=i(194);inherit(o,n),o.prototype._mtpStudyId=function(){return"mtp_decisionpoint"},o.prototype.onSymbolIntervalChanged=function(){this._symbolIntervalChanged=!0},o.prototype.pointsCount=function(){return 1},o.prototype._studyInputs=function(){var t=this.points()[0].index,e=this._model.mainSeries().bars().valueAt(t);return e?[this.properties().inputs.displayZoneLabels.value(),this._symbolIntervalChanged,1e3*e[TradingView.TIME_PLOT]]:null},o.prototype.onData=function(t){n.prototype.onData.call(this,t),this._symbolIntervalChanged=!1},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i)}var n=i(194);inherit(o,n),o.prototype._mtpStudyId=function(){return"mtp_riskreward"},o.prototype.pointsCount=function(){return 3},o.getTooltipText=function(t){return t&&0!==t._points.length?1==t._points.length?"Select Stop Bar":2==t._points.length?"Select Target Point":null:"Select Entry Setup Bar"},o.prototype._studyInputs=function(){var t=this.points()[0].index,e=this.points()[1].index,i=this.points()[2].index,o=this._model.mainSeries().bars().valueAt(t),n=this._model.mainSeries().bars().valueAt(e),s=this._model.mainSeries().bars().valueAt(i);return o&&n&&s?[1e3*o[TradingView.TIME_PLOT],1e3*n[TradingView.TIME_PLOT],1e3*s[TradingView.TIME_PLOT],this.points()[2].price,this.properties().inputs.account_size.value(),this.properties().inputs.percent_risk.value(),this.properties().inputs.tickEntryOffset.value(),this.properties().inputs.tickStopOffset.value()]:null},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){a.call(this,t,e,i)}function n(t,e,i){o.call(this,t,e,i)}function s(t,e,i){o.call(this,t,e,i)}function r(t,e,i){o.call(this,t,e,i)}var a=i(194);inherit(o,a),o.prototype.pointsCount=function(){return 1},o.prototype._studyInputs=function(){var t=this.points()[0].index,e=this._model.mainSeries().bars().valueAt(t);return e?[this.properties().inputs.displayZoneLabels.value(),1e3*e[TradingView.TIME_PLOT]]:null},inherit(n,o),n.prototype._mtpStudyId=function(){return"mtp_ew_main"},inherit(s,o),s.prototype._mtpStudyId=function(){return"mtp_ew_major"},inherit(r,o),r.prototype._mtpStudyId=function(){return"mtp_ew_minor"},e.LineStudyMtpElliotWaveMinor=r,e.LineStudyMtpElliotWaveMajor=s,e.LineStudyMtpElliotWaveMain=n,e.LineStudyMtpElliotWave=o},function(t,e,i){"use strict";function o(t,e,i,o,n){this._wptStudyId=o,this._pointsCount=n,g.call(this,t,e,i)}function n(t,e,i){o.call(this,t,e,i,"mtp_wpt_down1ora",2)}function s(t,e,i){o.call(this,t,e,i,"mtp_wpt_down2orb",2)}function r(t,e,i){o.call(this,t,e,i,"mtp_wpt_down3",3)}function a(t,e,i){o.call(this,t,e,i,"mtp_wpt_down4",2)}function l(t,e,i){o.call(this,t,e,i,"mtp_wpt_down5",5)}function h(t,e,i){o.call(this,t,e,i,"mtp_wpt_downc",3)}function c(t,e,i){o.call(this,t,e,i,"mtp_wpt_up1ora",2)}function d(t,e,i){o.call(this,t,e,i,"mtp_wpt_up2orb",2)}function p(t,e,i){o.call(this,t,e,i,"mtp_wpt_up3",3)}function u(t,e,i){o.call(this,t,e,i,"mtp_wpt_up4",2)}function _(t,e,i){o.call(this,t,e,i,"mtp_wpt_up5",5)}function f(t,e,i){o.call(this,t,e,i,"mtp_wpt_upc",3)}var g=i(194);inherit(o,g),o.prototype._studyInputs=function(){var t,e,i,o=[this.properties().inputs.displayZoneLabels.value()];for(t=0;t<this.pointsCount();++t){if(e=this.points()[t].index,i=this._model.mainSeries().bars().valueAt(e),!i)return null;o.push(1e3*i[TradingView.TIME_PLOT])}return o},o.prototype._mtpStudyId=function(){return this._wptStudyId},o.prototype.pointsCount=function(){return this._pointsCount},inherit(n,o),n.getTooltipText=function(t){var e=t?t._points.length:0;return"Down Wave 1 or A: Select Point "+(e+1)},inherit(s,o),s.getTooltipText=function(t){var e=t?t._points.length:0;return"Down Wave 2 or B: Select Point "+(e+1)},inherit(r,o),r.getTooltipText=function(t){var e=t?t._points.length:0;return"Down Wave 3: Select Point "+(e+1)},inherit(a,o),a.getTooltipText=function(t){var e=t?t._points.length:0;return"Down Wave 4: Select Point "+(e+1)},inherit(l,o),l.getTooltipText=function(t){var e=t?t._points.length:0;return"Down Wave 5: Select Point "+(e+1)},inherit(h,o),h.getTooltipText=function(t){var e=t?t._points.length:0;return"Down Wave C: Select Point "+(e+1)},inherit(c,o),c.getTooltipText=function(t){var e=t?t._points.length:0;return"Up Wave 1 or A: Select Point "+(e+1)},inherit(d,o),d.getTooltipText=function(t){var e=t?t._points.length:0;return"Up Wave 2 or B: Select Point "+(e+1)},inherit(p,o),p.getTooltipText=function(t){var e=t?t._points.length:0;return"Up Wave 3: Select Point "+(e+1)},inherit(u,o),u.getTooltipText=function(t){var e=t?t._points.length:0;return"Up Wave 4: Select Point "+(e+1)},inherit(_,o),_.getTooltipText=function(t){var e=t?t._points.length:0;return"Up Wave 5: Select Point "+(e+1)},inherit(f,o),f.getTooltipText=function(t){var e=t?t._points.length:0;return"Up Wave C: Select Point "+(e+1)},e.LineStudyMtpDownWave1OrA=n,e.LineStudyMtpDownWave2OrB=s,e.LineStudyMtpDownWave3=r,e.LineStudyMtpDownWave4=a,e.LineStudyMtpDownWave5=l,e.LineStudyMtpDownWaveC=h,e.LineStudyMtpUpWave1OrA=c,e.LineStudyMtpUpWave2OrB=d,e.LineStudyMtpUpWave3=p,e.LineStudyMtpUpWave4=u,e.LineStudyMtpUpWave5=_,e.LineStudyMtpUpWaveC=f},function(t,e,i){(function(e,o){"use strict";function n(t,i){var o=this;f.call(this),this._properties=i,this._model=t,this._dataWindowView=new c(this,t),this._priceAxisView=new h(this,t),this._startMeasurePriceAxisView=new h(this,t,"measureStartY"),this._endMeasurePriceAxisView=new h(this,t,"measureEndY"),this._timeAxisView=new d(this,t),this._startMeasureTimeAxisView=new d(this,t,"measureStartX"),this._endMeasureTimeAxisView=new d(this,t,"measureEndX"),this.visible=!0,t.readOnly()?this.areLinesVisible=!0:g.cursorTool.subscribe(function(t){o.areLinesVisible="arrow"!==t},{callWithLast:!0}),this._movedDelegate=new e,this._subscribed=!1}function s(t,e){this._source=t,this._pane=e,this._rendererCache={}}function r(t,e,i){this.source=t,this.pane=e,this._horzVisible=i}function a(t,e,i){this.source=t,this.pane=e,this._axis=i||"x"}var l=i(67).LineDataSource,h=i(259),c=i(260),d=i(261),p=i(122).TrendLineRenderer,u=i(98).TextRenderer,_=i(120).RectangleRenderer,f=i(72).DataSource,g=i(74),m=i(89),v=m.PaneRendererCrossHair,y=m.PaneRendererCrossHairLock,w=i(92),b=i(106),S=i(75),T=S.PercentageFormatter,C=S.TimeSpanFormatter;inherit(n,f),n.prototype.index=0,n.prototype.price=NaN,n.prototype.pane=null,n.prototype.color="white",n.prototype.style="",n.prototype.properties=function(){return this._properties},n.prototype.moved=function(){return this._movedDelegate},n.prototype.setPosition=function(t,e,i){if(this._subscribed||(this._model.mainSeries().onRestarted().subscribe(this,n.prototype.clearMeasure),this._subscribed=!0),this.setLockedPosition(i),this.index=t,this.x=this._model.timeScale().indexToCoordinate(t),i&&!i.defaultPriceScale().isEmpty()){this.price=e;var o=i.defaultPriceScale();this.y=o.priceToCoordinate(e),this.pane=i}else this.price=NaN,this.y=NaN,this.pane=null;this.visible=!0,this.updateAllViews(),this._movedDelegate.fire({time:this._model.timeScale().points().roughTime(t),price:this.price})},n.prototype.updateIndex=function(){var t=this.index;this.index=this._model.timeScale().coordinateToIndex(this.x),this.index!=t&&this.updateAllViews()},n.prototype.setLockedPosition=function(t){delete this.lockedIndex,delete this.lockedX,t!==this._measurePane&&g.lockTimeAxis().value()&&(this.lockedIndex=this._model.timeScale().points().roughIndex(g.lockTimeAxisTime.value()),this.lockedX=this._model.timeScale().indexToCoordinate(this.lockedIndex))},n.prototype.clearPosition=function(){this.visible=!1,this.index=parseInt(this._model.mainSeries().data().bars().last()),this.price=NaN,this.y=NaN,this.pane=null},n.prototype.measureStartY=function(){var t,e=this._startMeasurePoint.price,i=this._measurePane;return i.defaultPriceScale().isPercent()&&(t=i.mainDataSource().firstValue(),e=i.defaultPriceScale().priceRange().convertToPercent(e,t)),i.defaultPriceScale().priceToCoordinate(e)},n.prototype.measureStartX=function(){return this._model.timeScale().indexToCoordinate(this._startMeasurePoint.index)},n.prototype.measureEndY=function(){var t,e=this._endMeasurePoint.price,i=this._measurePane;return i.defaultPriceScale().isPercent()&&(t=i.mainDataSource().firstValue(),e=i.defaultPriceScale().priceRange().convertToPercent(e,t)),i.defaultPriceScale().priceToCoordinate(e)},n.prototype.measureEndX=function(){return this._model.timeScale().indexToCoordinate(this._endMeasurePoint.index)},n.prototype.paneViews=function(t){var e=[new r(this,t,t===this.pane)];return t===this._measurePane&&(this._measurePaneView||(this._measurePaneView=new s(this,t)),this._measurePaneView.update(),e.push(this._measurePaneView)),g.lockTimeAxis().value()&&e.push(this._timeLockPaneView=this._timeLockPaneView||new a(this,t)),e},n.prototype.dataWindowView=function(){return this._dataWindowView},n.prototype.priceAxisViews=function(t,e){if(!this.visible||this.pane!==t||e!==t.defaultPriceScale())return null;var i=[this._priceAxisView];return this._startMeasurePoint&&i.push(this._startMeasurePriceAxisView),this._endMeasurePoint&&i.push(this._endMeasurePriceAxisView),i},n.prototype.timeAxisView=function(){if(!this.visible&&!g.lockTimeAxis().value())return null;var t=[this._timeAxisView];return this._startMeasurePoint&&t.push(this._startMeasureTimeAxisView),this._endMeasurePoint&&t.push(this._endMeasureTimeAxisView),t},n.prototype.updateAllViews=function(){this._priceAxisView.update(),this._startMeasurePoint&&(this._startMeasurePriceAxisView.update(),this._startMeasureTimeAxisView.update()),this._endMeasurePoint&&(this._endMeasurePriceAxisView.update(),this._endMeasureTimeAxisView.update()),this._timeAxisView.update()},n.prototype.startMeasurePoint=function(){return this._startMeasurePoint},n.prototype.startMeasuring=function(t,e){if(e.defaultPriceScale().isPercent()){var i=e.mainDataSource().firstValue();t.price=e.defaultPriceScale().priceRange().convertFromPercent(t.price,i)}this._startMeasurePoint=t,this._measurePane=e},n.prototype.finishMeasure=function(t){var e,i=this._measurePane;i.defaultPriceScale().isPercent()&&(e=i.mainDataSource().firstValue(),t.price=i.defaultPriceScale().priceRange().convertFromPercent(t.price,e)),this._endMeasurePoint=t},n.prototype.endMeasurePoint=function(){return this._endMeasurePoint},n.prototype.clearMeasure=function(t){delete this._measurePane,delete this._startMeasurePoint,delete this._endMeasurePoint,delete this._lastValidMeasurePoint,this._model.invalidate(new b(b.LIGHT_UPDATE))},n.prototype.measurePoints=function(){var t,e,i,o,n;return this.updateAllViews(),t=[this._startMeasurePoint],this._endMeasurePoint?t.push(this._endMeasurePoint):(this._measurePane===this.pane&&(this._lastValidMeasurePoint={x:this.x,y:this.y,rawPrice:this.price,price:this.price,index:this.index}),e=this._lastValidMeasurePoint.rawPrice,i=this._measurePane,o=i.defaultPriceScale(),o.isPercent()&&!o.isEmpty()&&(n=i.mainDataSource().firstValue(),this._lastValidMeasurePoint.price=o.priceRange().convertFromPercent(e,n)),t.push(this._lastValidMeasurePoint)),t},n.prototype.currentPoint=function(){return new o.Point(this.x,this.y)},n.prototype.appliedIndex=function(){return isFinite(this.lockedIndex)&&this.lockedIndex||this.index},n.prototype.appliedX=function(){return isFinite(this.lockedX)&&this.lockedX||this.x},s.prototype.update=function(){var t,e,i,n,s,r,a,l,h,c,d,p,u,_,f,g,m,v;if(this._source._endMeasurePoint)t=this._source._endMeasurePoint.price,e=this._source._endMeasurePoint.index;else if(this._source._measurePane===this._source.pane)t=this._source.price,e=this._source.index;else{if(!this._source._lastValidMeasurePoint)return;t=this._source._lastValidMeasurePoint.rawPrice,e=this._source._lastValidMeasurePoint.index}i=t-this._source._startMeasurePoint.price,n=e-this._source._startMeasurePoint.index,s=this._source._startMeasurePoint.price,r=this._source._measurePane,r.defaultPriceScale().isPercent()&&(a=r.mainDataSource().firstValue(),this._source._endMeasurePoint&&(t=r.defaultPriceScale().priceRange().convertToPercent(t,a)),s=r.defaultPriceScale().priceRange().convertToPercent(s,a)),l=this._source._measurePane.defaultPriceScale().formatter().format(i),this._source._startMeasurePoint.price&&(h=i/this._source._startMeasurePoint.price,
l+=" ("+(new T).format(100*h)+")"),this._label=""+l+"\n"+$.t("{0} bars").format(n),s=this._source._model._magnet.align(s,this._source._startMeasurePoint.index,this._source._measurePane),t=this._source._model._magnet.align(t,e,this._source._measurePane),c=this._source._model.timeScale().indexToCoordinate(this._source._startMeasurePoint.index),d=this._source._model.timeScale().indexToCoordinate(e),p=this._source._measurePane.defaultPriceScale().priceToCoordinate(s),u=this._source._measurePane.defaultPriceScale().priceToCoordinate(t),this._p1=new o.Point(c,p),this._p2=new o.Point(d,u),_=this._source._model.timeScale().indexToUserTime(this._source._startMeasurePoint.index),f=this._source._model.timeScale().indexToUserTime(e),g=this._source._measurePane.mainDataSource().base(),(_&&f||g)&&(m=(f.valueOf()-_.valueOf())/1e3,v=Math.round(i*g),this._label=""+l+" , "+v+"\n"+$.t("{0} bars").format(n)+", "+(new C).format(m))},s.prototype.renderer=function(){var t,e,i,n,s,r,a,h,c,d,f,g,m,v=new w,y={};return y.points=[this._p1,this._p2],y.width=this._source._model.timeScale().width(),y.height=this._source._measurePane.defaultPriceScale().height(),y.color="#D3E7FF",y.linewidth=0,y.fillBackground=!0,y.transparency=60,y.backcolor="#BADAFF",v.append(new _(y)),t=this._p1.add(this._p2).scaled(.5),e=new o.Point(this._p1.x,t.y),i=new o.Point(this._p2.x,t.y),n={points:[e,i],width:y.width,height:y.height,color:"#646668",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED,extendleft:!1,extendright:!1,leftend:l.LINEEND_NORMAL,rightend:l.LINEEND_ARROW},v.append(new p(n)),e=new o.Point(t.x,this._p1.y),i=new o.Point(t.x,this._p2.y),n={points:[e,i],width:y.width,height:y.height,color:"#646668",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED,extendleft:!1,extendright:!1,leftend:l.LINEEND_NORMAL,rightend:l.LINEEND_ARROW},v.append(new p(n)),s={x:0,y:10},r=function(t,e){return{points:[e],text:t,color:"#FFFFFF",horzAlign:"left",vertAlign:"middle",font:"Arial",offsetX:s.x,offsetY:s.y,bold:!1,italic:!1,fontsize:12,padding:5,highlightBorder:!1,backgroundColor:TradingView.generateColor("#5b85bf",10),backgroundTransparency:10,backgroundVertInflate:5,backgroundHorzInflate:5,backgroundRoundRect:4}},a=.5*(this._p1.x+this._p2.x),h=this._p2.y,c=new o.Point(a,h),d=r(this._label,c),f=new u(d,this._rendererCache),g=f.measure(),m={x:a+d.backgroundHorzInflate+g.textBgPadding-g.width/g.textBgPadding,y:this._p1.y>this._p2.y?c.y-g.height-2*g.textBgPadding-s.y>0?h-g.height-s.y+g.textBgPadding:s.y-2*g.textBgPadding:c.y+g.height+g.textBgPadding+s.y>y.height?y.height-g.height-s.y:h+g.textBgPadding},f.setPoints([new o.Point(m.x,m.y)]),v.append(f),v},r.prototype.update=function(){},r.prototype.renderer=function(){var t,e,i,o,n,s={},r=this.source.visible&&this.source.areLinesVisible,a=g.lockTimeAxis().value();return s.horzLinesVisible=r&&this._horzVisible,s.vertLinesVisible=r||a,t=this.pane._model.readOnly(),e=t?defaults("chartproperties.paneProperties.crossHairProperties"):null,i=TradingView.isMobile.any()&&l.isLineTool(this.source._model.currentTool()),o=i?"#a000a0":t?e.color:this.pane._model.properties().paneProperties.crossHairProperties.color.value(),n=t?e.transparency:this.pane._model.properties().paneProperties.crossHairProperties.transparency.value(),!i&&n>0&&(o=TradingView.generateColor(o,n)),s.color=o,s.lineWidth=t?e.width:this.pane._model.properties().paneProperties.crossHairProperties.width.value(),s.lineStyle=t?e.style:this.pane._model.properties().paneProperties.crossHairProperties.style.value(),s.drawCenter=i&&this.pane==this.source.pane,s.w=this.pane.width(),s.h=this.pane.height(),s.x=isFinite(this.source.lockedX)&&this.source.lockedX||this.source.x,s.y=this.source.y,new v(s)},a.prototype.update=function(){},a.prototype.renderer=function(){var t,e,i,o,n=this.source.visible&&this.source.areLinesVisible,s=g.lockTimeAxis().value(),r=n&&this._horzVisible,a=n||s;if(("y"!=this._axis||r)&&a)return t=9,e=11,i="y"==this._axis?this.pane.width()-t/2:this.source.lockedX+1,o="y"==this._axis?this.source.y:this.pane.height()-e/2-1,new y({x:i,y:o,width:t,height:e,bodyHeight:7})},t.exports=n}).call(e,i(32),i(21))},function(t,e,i){"use strict";function o(t,e){this._crossHair=t,this._model=e,this._rendererData={background:"#585858",color:"white",visible:!0},this._defaultFormatter=new a(100)}var n=i(69),s=i(68),r=i(75),a=r.PriceFormatter;inherit(o,s),o.prototype.update=function(){var t,e,i,o=this._rendererData,n=this._crossHair.pane;o.coordinate=this._crossHair.y,this.text="",n&&this._crossHair.visible&&(t=n.defaultPriceScale(),t.isEmpty()||(i=t.mainSource(),e=i?i.formatter():this._defaultFormatter,o.text=e.format(this._crossHair.price)))},o.prototype.renderer=function(){return this._renderer||(this._renderer=new n(this._rendererData)),this._renderer},t.exports=o},function(t,e,i){"use strict";function o(t,e){s.call(this),this._header=null,this._crossHair=t,this._model=e,this._items.push(new r("Date","")),this._items.push(new r("Time","")),this._items.push(new r("Price","")),this._defaultFormatter=new l(100)}var n=i(85),s=n.DataWindowView,r=n.DataWindowItem,a=i(75),l=a.PriceFormatter,h=a.DateFormatter,c=a.TimeFormatter;inherit(o,s),o.prototype.update=function(){var t,e,i,o,n,s,r=this._model.mainSeries().isDWM();this._items[1].setVisible(!r),this._items[0].setValue("n/a"),this._items[1].setValue("n/a"),this._items[2].setValue("n/a"),this._model.timeScale().isEmpty()||(t=this._crossHair.appliedIndex(),e=this._model.timeScale().indexToUserTime(t),null===e?(this._items[0].setValue("n/a"),r||this._items[1].setValue("n/a")):(this._items[0].setValue((new h).format(e)),r||this._items[1].setValue((new c).format(e))),i=this._crossHair.pane,i&&(o=i.defaultPriceScale(),o.isEmpty()||(n=o.mainSource(),s=n?n.formatter():this._defaultFormatter,this._items[2].setValue(s.format(this._crossHair.price)))))},t.exports=o},function(t,e,i){"use strict";function o(t,e){n.call(this),this._crosshair=t,this._model=e,this._rendererData={visible:!1,background:"#585858",color:"white",text:""}}var n=i(70),s=i(71),r=i(75).DateTimeFormatter;inherit(o,n),o.prototype.update=function(){var t,e=this._rendererData,i=this._model.timeScale();e.coordinate=this._crosshair.appliedX(),t=i.indexToUserTime(this._crosshair.appliedIndex()),t?(e.visible=!0,e.text=new r(this._model.mainSeries().isDWM()).format(t)):(e.visible=!1,e.text="")},o.prototype.renderer=function(){var t=this._rendererData;return this._renderer||(this._renderer=new s(t)),this._renderer},t.exports=o},function(t,e){"use strict";function i(t){function e(t,e){var i=t.font;return n.hasOwnProperty(i)||(n[i]={}),n[i].hasOwnProperty(e)||(n[i][e]=t.measureText(e).width),n[i][e]}function i(){var i=o.width(),n=o.height();return{draw:function(o){var r,a,l,h,c,d,p,u=t.symbolInfo();if(u){for(o.fillStyle=TradingView.generateColor(s.color.value(),s.transparency.value()),r=u.name,/QUANDL/.test(u.exchange)&&(a=r.split(/\//),a.length&&(r=a[a.length-1])),l=[{text:r?r+", "+TradingView.translatedIntervalString(t.interval()):"",font:"96px Verdana, Arial, sans-serif",lineHeight:114,baselineOffset:87},{text:u.description||"",font:"48px Verdana, Arial, sans-serif",lineHeight:57,baselineOffset:43.5}],h=0,c=0;c<l.length;c++)d=l[c],d.text&&(o.font=d.font,p=e(o,d.text),p>i?(d.zoom=i/p,p=i):d.zoom=1,d.offsetLeft=(i-p)/2,h+=d.lineHeight*d.zoom);for(h=Math.max((n-h)/2,0),c=0;c<l.length;c++)d=l[c],d.text&&(o.save(),o.font=d.font,o.translate(d.offsetLeft,h),o.scale(d.zoom,d.zoom),o.fillText(d.text,0,d.baselineOffset),o.restore(),h+=d.lineHeight*d.zoom)}}}}var o=null,n={},s=t.model().properties().symbolWatermarkProperties,r={renderer:i,update:function(){}};this.paneViews=function(t){return t.containsMainSeries()?(o=t,[r]):[]}}t.exports=i},function(t,e){"use strict";function i(){this.visible=!0,this.horzLinesVisible=!0,this.horzLinesColor="white",this.horzLinesStyle="",this.vertLinesVisible=!0,this.vertLinesColor="white",this.vertLinesStyle=""}function o(t,e){this.source=t,this.pane=e}function n(t){this.data=t}i.prototype.paneViews=function(t){return[new o(this,t)]},o.prototype.update=function(){},o.prototype.renderer=function(){var t={};return this.pane.defaultPriceScale().isEmpty()||this.pane.timeScale().isEmpty()?null:(t.horzLinesVisible=!0,t.vertLinesVisible=!0,t.horzLinesColor=this.pane._model.properties().paneProperties.horzGridProperties.color.value(),t.vertLinesColor=this.pane._model.properties().paneProperties.vertGridProperties.color.value(),t.horzLineStyle=this.pane._model.properties().paneProperties.horzGridProperties.style.value(),t.vertLineStyle=this.pane._model.properties().paneProperties.vertGridProperties.style.value(),t.priceMarks=this.pane.defaultPriceScale().marks(),t.timeMarks=this.pane.timeScale().marks(),t.w=this.pane.width(),t.h=this.pane.height(),new n(t))},n.prototype.draw=function(t){var e;if(t.lineWidth=1,this.data.vertLinesVisible){for(t.strokeStyle=this.data.vertLinesColor,CanvasEx.setLineStyle(t,this.data.vertLineStyle),t.beginPath(),e=0;e<this.data.timeMarks.length;e++)t.moveTo(this.data.timeMarks[e].coord+1,0),t.lineTo(this.data.timeMarks[e].coord+1,this.data.h);t.stroke()}if(this.data.horzLinesVisible){for(t.strokeStyle=this.data.horzLinesColor,CanvasEx.setLineStyle(t,this.data.horzLineStyle),t.beginPath(),e=0;e<this.data.priceMarks.length;e++)t.moveTo(0,this.data.priceMarks[e].coord),t.lineTo(this.data.w,this.data.priceMarks[e].coord);t.stroke()}},t.exports=i},function(t,e,i){"use strict";function o(t,e,i){this._magnetProperty=t,this._timeScale=e}var n=i(77);o.prototype.align=function(t,e,i){var o,s,r,a,l,h,c,d,p,u=50,_=i.defaultPriceScale(),f=_.priceToCoordinate(t),g=t;if(!this._magnetProperty.value())return g;for(o=_.dataSources(),s=null,r=0;r<o.length;r++)if(o[r]instanceof n){s=o[r];break}if(s&&(a=s.bars(),a.contains(e)&&(l=a.valueAt(e),h=[l[TradingView.OPEN_PLOT],l[TradingView.HIGH_PLOT],l[TradingView.LOW_PLOT],l[TradingView.CLOSE_PLOT]],_=s.priceScale(),!_.isEmpty()))){if(c=[],_.isPercent())for(d=s.firstValue(),r=0;r<h.length;r++)h[r]=_.priceRange().convertToPercent(h[r],d);for(r=0;r<h.length;r++)c.push({y:_.priceToCoordinate(h[r]),price:h[r]});c.sort(function(t,e){var i=Math.abs(t.y-f),o=Math.abs(e.y-f);return i-o}),p=c[0],Math.abs(p.y-f)<u&&(g=p.price)}return g},t.exports=o},function(t,e,i){(function(e,o,n){"use strict";function s(){return[$.t("Jan"),$.t("Feb"),$.t("Mar"),$.t("Apr"),$.t("May"),$.t("Jun"),$.t("Jul"),$.t("Aug"),$.t("Sep"),$.t("Oct"),$.t("Nov"),$.t("Dec")]}function r(t){this._model=t,this._properties=t.properties().timeScale,this._scalesProperties=t.properties().scalesProperties,this.m_width=0,this._defaultRightOffset=this._properties.rightOffset.value(),this.m_rightOffset=this._properties.rightOffset.value(),this.m_points=new u,this.m_barSpacing=this._properties.barSpacing.value(),this.m_scrollStartPoint=null,this.m_scaleStartPoint=null,this.m_stateSnapshot=null,this.m_tickmarks=new h,this._locked=!1,this._formattedBySpan={}}var a=i(94),l=i(110),h=i(266),c=i(106),d=i(73).saveDefaultProperties,p=i(75).numberToStringWithLeadingZero,u=i(267);TradingView.MONTH_NAMES=null,TradingView.MINUTE_SPAN=20,TradingView.HOUR_SPAN=30,TradingView.DAY_SPAN=40,TradingView.WEEK_SPAN=50,TradingView.MONTH_SPAN=60,TradingView.YEAR_SPAN=70,TradingView.DEFAULT_BAR_SPACING=6,TradingView.MAX_BAR_SPACING=50,TradingView.MIN_BAR_SPACING=.5,TradingView.DEFAULT_RIGHT_OFFSET=5,r.prototype.tickMarks=function(){return this.m_tickmarks},r.prototype.reset=function(){this._visibleBarsCache=null,this.m_points=new u,this.m_scrollStartPoint=null,this.m_scaleStartPoint=null,this.m_stateSnapshot=null,this.m_tickmarks.reset()},r.prototype.restoreDefault=function(){this._visibleBarsCache=null,this.m_barSpacing=TradingView.DEFAULT_BAR_SPACING,this.m_rightOffset=this._properties.rightOffset.value(),this.saveDefault("barSpacing"),this._correctOffset(),this.recalcLockedScale()},r.prototype.rightOffset=function(){return this.m_rightOffset},r.prototype.scrollToRealtime=function(t){var e,i,o,n,s=this._properties.rightOffset.value();return t?(e=this,i=this.m_rightOffset,o=this.m_width/this.m_barSpacing-10,o>0&&s>o&&(s=o),n=this._model,void $({offset:i}).animate({offset:s},{duration:1e3,easing:"easeInOutQuint",step:function(t){e._visibleBarsCache=null,e.m_rightOffset=t,n.recalculateAllPanes(),n.invalidate(new c(c.LIGHT_UPDATE)),n.recalcVisibleRangeStudy(n.dataSources())}})):(this._visibleBarsCache=null,this.m_rightOffset=s,void this._correctOffset())},r.prototype.points=function(){return this.m_points},r.prototype.width=function(){return this.m_width},r.prototype.barSpacing=function(){return this.m_barSpacing},r.prototype.setWidth=function(t){this._visibleBarsCache=null,!isFinite(t)||t<=0||(this._locked&&this.m_width&&(this.m_barSpacing*=t/this.m_width),this.m_width=t,this._correctOffset())},r.prototype.visibleBars=function(){var t,e,i,o;if(this._visibleBarsCache)return this._visibleBarsCache;if(!this.isEmpty())return t=Math.ceil(this.m_width/this.m_barSpacing)-1,e=Math.round(this.m_rightOffset+this.m_points.lastTimePointIndex()),i=e-t,o=new a(i,e),this._visibleBarsCache=o,o},r.prototype.isEmpty=function(){return 0===this.m_width||0===this.m_points.size()},r.prototype.indexToCoordinate=function(t,e){var i,o;return this.isEmpty()?0:TradingView.isInteger(t)?(i=this.m_points.lastTimePointIndex()+this.m_rightOffset-t,o=this.m_width-(i+.5)*this.m_barSpacing,e?o:Math.round(o)):0},r.prototype.barIndexesToCoordinates=function(t){var e,i,o,n;for(e=0;e<t.length;e++)i=t[e].time,o=this.m_points.lastTimePointIndex()+this.m_rightOffset-i,n=this.m_width-(o+.5)*this.m_barSpacing,t[e].time=Math.round(n),t[e].exactTime=n},r.prototype.indexesToCoordinates=function(t){var e,i,o,n=this.m_points.lastTimePointIndex()+this.m_rightOffset,s=this.m_width-n*this.m_barSpacing-.5*this.m_barSpacing;for(e=0;e<t.length;e++)i=t[e].x,o=s+i*this.m_barSpacing,t[e].x=Math.round(o)},r.prototype.coordinateToIndex=function(t){var e=(this.m_width+1-t)/this.m_barSpacing,i=this.m_points.lastTimePointIndex(),o=i+this.m_rightOffset-e,n=Math.round(1e6*o)/1e6;return Math.ceil(n)},r.prototype.timeToCoordinate=function(t){function e(t){return t<=0||t>=l.m_width}var i,o,n,s=this.m_points.closestIndexLeft(t),r=this.m_points.valueAt(s),a=this.indexToCoordinate(s,!0),l=this;return e(a)?null:(i=this.barSpacing(),o=function(){var t=this.m_points.lastTimePointIndex();return this.m_points.valueAt(t)-this.m_points.valueAt(t-1)}.bind(this)(),n=Math.round(a+(t-r)/o*i)+1,e(n)?null:n)},r.prototype.alignCoordinate=function(t){if(this.isEmpty())return t;var e=this.coordinateToIndex(t);return this.indexToCoordinate(e)},r.prototype.timePointToIndex=function(t){return this.m_points.indexOf(t,!0)},r.prototype.indexToTimePoint=function(t){var e=this.m_points.valueAt(t);return e?new Date(1e3*e):null},r.prototype.indexToUserTime=function(t){return this.m_tickmarks.indexToTime(t)},r.prototype.marks=function(){var t,e,i,o,n,s,r,a,l,h,c,d;if(this.isEmpty())return null;for(t=this.m_barSpacing,e=this._scalesProperties.fontSize.value()||0,i=5*(e+4),o=Math.round(i/t),n=this.visibleBars(),s=Math.max(n.firstBar(),n.firstBar()-o),r=Math.max(n.lastBar(),n.lastBar()-o),a=this.m_tickmarks.build(t,i),l=[],h=0;h<a.length;++h)c=a[h],s<=c.index&&c.index<=r&&(d=this.m_tickmarks.indexToTime(c.index),null!==d&&l.push({coord:this.indexToCoordinate(c.index),label:this.formatLabel(d,c.span),span:c.span,major:c.label>=TradingView.DAY_SPAN?1:0}));return l},r.prototype.state=function(t){var e={};return e.m_barSpacing=this.barSpacing(),e.m_rightOffset=this.m_rightOffset,t&&(this.m_points.size()>0&&(e.m_lastVisibleBar=this.m_points.valueAt(this.m_points.lastTimePointIndex())),e.points=this.m_points.state(),e.tickmarks=this.m_tickmarks.state(),e.width=this.m_width),e},r.prototype.restoreState=function(t,e,i){var o,n,s;return this._visibleBarsCache=null,void 0===t.m_barSpacing?void TradingView.logDebugChart("TimeScale.restoreState: invalid state"):void 0===t.m_rightOffset?void TradingView.logDebugChart("TimeScale.restoreState: invalid state"):(this.m_barSpacing=t.m_barSpacing,this.m_rightOffset=t.m_rightOffset,this.m_restoredLastTimePoint=t.m_lastVisibleBar,i&&this.m_restoredLastTimePoint&&(o=this.m_points.indexOf(this.m_restoredLastTimePoint),n=this.m_points.lastTimePointIndex(),s=n-o,this.m_rightOffset=-s+t.m_rightOffset),e&&(this.m_points.restoreState(t.points),this.m_tickmarks.restoreState(t.tickmarks),t.width&&(this._locked=!0,this.m_width>0&&(this.m_barSpacing*=this.m_width/t.width))),void this._correctOffset())},r.prototype.setOffset=function(t){return this._visibleBarsCache=null,void 0===t?void TradingView.logDebugChart("TimeScale.setOffset: invalid state"):(this.m_rightOffset=t,void this._correctOffset())},r.prototype.setBarSpacing=function(t){return this._visibleBarsCache=null,void 0===t?void TradingView.logDebugChart("TimeScale.setBarSpacing: invalid state"):void(this.m_barSpacing=t)},r.prototype._correctOffset=function(){if(!this.isEmpty()){var t=this.m_width/this.m_barSpacing-10;t>0&&this.m_rightOffset>t&&(this.m_rightOffset=t,this._visibleBarsCache=null),t=this.m_points.size()-10,this.m_rightOffset<-t&&(this.m_rightOffset=-t,this._visibleBarsCache=null)}},r.prototype.maxOffset=function(){return this.m_width/this.m_barSpacing-10},r.prototype.startScale=function(t){this.m_scrollStartPoint&&this.endScroll(),null===this.m_scaleStartPoint&&null===this.m_stateSnapshot&&(this.isEmpty()||(this.m_scaleStartPoint=t,this.m_stateSnapshot=this.state()))},r.prototype.scaleTo=function(t){var i,o;this._visibleBarsCache=null,delete this.m_restoredLastTimePoint,null!==this.m_stateSnapshot&&(i=e.clamp(this.m_width-t,0,this.m_width),o=e.clamp(this.m_width-this.m_scaleStartPoint,0,this.m_width),0!==i&&0!==o&&(this.m_barSpacing=this.m_stateSnapshot.m_barSpacing*i/o,this.m_barSpacing<TradingView.MIN_BAR_SPACING?this.m_barSpacing=TradingView.MIN_BAR_SPACING:this.m_barSpacing>TradingView.MAX_BAR_SPACING&&(this.m_barSpacing=TradingView.MAX_BAR_SPACING),this._correctOffset(),this.recalcLockedScale()))},r.prototype.endScale=function(){null!==this.m_scaleStartPoint&&(this.m_scaleStartPoint=null,this.m_stateSnapshot=null,this.saveDefault("barSpacing"))},r.prototype.saveDefault=function(t){d(!0),this._properties[t].setValue(this["m_"+t]),d(!1)},r.prototype.startScroll=function(t){null===this.m_scrollStartPoint&&null===this.m_stateSnapshot&&(this.isEmpty()||(this.m_scrollStartPoint=t,this.m_stateSnapshot=this.state()))},r.prototype.scrollTo=function(t){if(this._visibleBarsCache=null,delete this.m_restoredLastTimePoint,null!==this.m_scrollStartPoint){var e=(this.m_scrollStartPoint-t)/this.barSpacing();this.m_rightOffset=this.m_stateSnapshot.m_rightOffset+e,this._correctOffset(),this._model.mainSeries().priceScale().properties().percentage.value()&&this.recalcLockedScale()}},r.prototype.scrollToOffsetAnimated=function(t,e){var i,o,n,s;if(!isFinite(t))throw new RangeError("offset is required and must be finite number");if(void 0===e&&(e=400),!isFinite(e)||e<=0)throw new RangeError("animationDuration (optional) must be finite positive number");i=this,o=this.m_rightOffset,n=+new Date,s=this._model,function r(){i._visibleBarsCache=null;var a=(new Date-n)/e;return a>=1?(i.m_rightOffset=t,i._visibleBarsCache=null,s.recalculateAllPanes(),void s.invalidate(new c(c.LIGHT_UPDATE))):(i.m_rightOffset=o+(t-o)*a,s.recalculateAllPanes(),void setTimeout(r,20))}()},r.prototype.endScroll=function(){null!==this.m_scrollStartPoint&&(this.m_scrollStartPoint=null,this.m_stateSnapshot=null)},r.prototype._currentSavedPosition=function(){var t,e,i;this.isEmpty()||(t=this.m_points.indexOf(this.m_restoredLastTimePoint,!0),TradingView.isInteger(t)&&(e=this.m_points.lastTimePointIndex(),i=e-t,this.m_rightOffset-=i),delete this.m_restoredLastTimePoint)},r.prototype.update=function(t,e,i,o){this._visibleBarsCache=null,this.m_tickmarks.merge(o),this.m_points.merge(t,e,i),this.m_restoredLastTimePoint&&this._currentSavedPosition()},r.prototype.addTail=function(t,e,i){var o,n,s;for(this.m_tickmarks.removeTail(e),o=t.params,n=this.m_tickmarks.maxIndex+(i?0:1),s=0;s<o.marks.length;s++)o.marks[s].index=n+s;this.m_tickmarks.addTail(o.marks),this.m_points.addTail(o.changes,i),this.m_rightOffset-=o.changes.length},r.prototype.formatLabel=function(t,e){if(this._formattedBySpan[e])return this._formattedBySpan[e].format(t.valueOf());var i=this;return this._formattedBySpan[e]=new l(function(t){return i.formatLabelImpl(new Date(t),e)}),this._formattedBySpan[e].format(t)},r.prototype.formatLabelImpl=function(t,e){if(!(t&&t instanceof Date))return"incorrect time";var i=this._model.mainSeries().isDWM();return e<TradingView.MINUTE_SPAN&&!i?p(t.getUTCHours(),2)+":"+p(t.getUTCMinutes(),2)+":"+p(t.getUTCSeconds(),2):e<TradingView.DAY_SPAN&&!i?p(t.getUTCHours(),2)+":"+p(t.getUTCMinutes(),2):e<TradingView.WEEK_SPAN?t.getUTCDate():e<TradingView.MONTH_SPAN?t.getUTCDate():e<TradingView.YEAR_SPAN?(TradingView.MONTH_NAMES||(TradingView.MONTH_NAMES=s()),TradingView.MONTH_NAMES[t.getUTCMonth()]):t.getUTCFullYear()},r.prototype.normalizeBarIndex=function(t){var e=0,i=0;return t<this.m_points.firstTimePointIndex()?(e=this.m_points.valueAt(this.m_points.firstTimePointIndex()),i=t-this.m_points.firstTimePointIndex()):t>this.m_points.lastTimePointIndex()?(e=this.m_points.valueAt(this.m_points.lastTimePointIndex()),i=t-this.m_points.lastTimePointIndex()):(e=this.m_points.valueAt(t),i=0),{time_t:e,offset:i}},r.prototype.denormalizeTimePoint=function(t){var e=o.enabled("charting_library_base")?this.m_points.closestIndexLeft(t.time_t):this.m_points.indexOf(t.time_t);if(void 0!==e)return e+t.offset},r.prototype.zoomToBarsRange=function(t,e){if(!(e<=t)){var i=this.m_points.lastTimePointIndex();i&&(this.m_rightOffset=e-i),this.m_barSpacing=this.width()/(e-t+1),this._visibleBarsCache=null}},r.prototype.recalcLockedScale=function(){var t,e,i,o,s,r,a,l;this._model.m_mainSeries.properties().lockScale.value()&&!this.isEmpty()&&(t=this._model.m_mainSeries.priceScale(),e=this._model.m_mainSeries,i=e.data().boxSize,i||(e.fixBoxSize(),i=e.data().boxSize),i&&(t.properties().percentage.value()&&(o=e.data().search(e.getRealVisibleRange().m_firstBar).value[TradingView.CLOSE_PLOT],i=n.prototype.convertToPercent.call(null,o+i,o)-n.prototype.convertToPercent.call(null,o,o)),s=t.internalHeight()/(this.barSpacing()/i),r=e.priceScale().priceRange(),r&&s==r.length()||(!r||r.isEmpty()?(a=this.visibleBars(),r=e.priceRange(a.firstBar(),a.lastBar())):(l=(s-r.length())/2,r.m_minValue-=l,r.m_maxValue+=l),e.priceScale().setPriceRange(r))))},r.prototype.correctBarSpacing=function(){this.isEmpty()||this.points().size()<this.width()/this.barSpacing()&&(this.setOffset(TradingView.DEFAULT_RIGHT_OFFSET),this.setBarSpacing(Math.min(this.width()/(this.points().size()+this.rightOffset()),TradingView.MAX_BAR_SPACING)))},r.prototype.canZoomIn=function(){return this.m_barSpacing<TradingView.MAX_BAR_SPACING},r.prototype.canZoomOut=function(){return this.m_barSpacing>TradingView.MIN_BAR_SPACING},t.exports=r}).call(e,i(21),i(1),i(78))},function(t,e,i){(function(e){"use strict";function i(){this._marksByIndex={},this._marksBySpan=[],this.changed=new e}i.prototype.reset=function(){this._marksByIndex={},this._marksBySpan=[],delete this.minIndex,delete this.maxIndex,delete this._cache,this.changed.fire()},i.prototype.minIndex=void 0,i.prototype.maxIndex=void 0,i.prototype.merge=function(t){var e,i,o,n,s,r=this._marksBySpan,a={};for(e=0;e<t.length;e++){if(i=t[e],o=i.index,n=i.span,s=this._marksByIndex[i.index]){if(s.index===i.index&&s.span===i.span){s.time=i.time;continue}this._removeTickmark(s)}this._marksByIndex[o]=i,this.minIndex<=o||(this.minIndex=o),this.maxIndex>=o||(this.maxIndex=o),r[n]||(r[n]=[]),r[n].push(i),a[n]=!0}for(n=r.length;n--;)r[n]&&(r[n].length||delete r[n],a[n]&&r[n].sort(this._sortByIndexAsc));delete this._cache,this.changed.fire()},i.prototype._removeTickmark=function(t){var e,i,o=t.index;this._marksByIndex[o]===t&&(delete this._marksByIndex[o],o<=this.minIndex&&this.minIndex++,o>=this.maxIndex&&this.maxIndex--,this.maxIndex<this.minIndex&&(delete this.minIndex,delete this.maxIndex),e=this._marksBySpan[t.span],i=e.indexOf(t),i!==-1&&e.splice(i,1))},i.prototype._sortByIndexAsc=function(t,e){return t.index-e.index},i.prototype.removeTail=function(t){var e,i={};this.maxIndex=0;for(e in this._marksByIndex)this._marksByIndex[e].time<t&&(i[e]=this._marksByIndex[e],this.maxIndex=Math.max(this.maxIndex,e));this._marksByIndex=i},i.prototype.addTail=function(t){for(var e=0;e<t.length;e++)t[e].index=this.maxIndex+e+1;this.merge(t)},i.prototype.indexToTime=function(t){var e=this._marksByIndex[t];return e?new Date(1e3*e.time):null},i.prototype.density=function(){var t,e,i=this.maxIndex-this.minIndex;if(0!==i)return t=this._marksByIndex[this.maxIndex].time-this._marksByIndex[this.minIndex].time,e=1e3*t/i},i.prototype.estimateLeft=function(t){var e,i,o=this.density();if(o)return e=1e3*this._marksByIndex[this.minIndex].time-t,i=e/o},i.prototype.nearestIndex=function(t){for(var e,i=this.minIndex,o=this.maxIndex;o-i>2;){if(1e3*this._marksByIndex[i].time==t)return i;if(1e3*this._marksByIndex[o].time==t)return o;e=Math.round((i+o)/2),1e3*this._marksByIndex[e].time>t?o=e:i=e}return i},i.prototype.build=function(t,e){var i,o,n,s,r,a,l,h,c,d,p,u,_,f,g,m=Math.ceil(e/t);if(this._maxbar===m&&this._cache)return this._cache;for(this._maxbar=m,i=[],o=!1,n=this._marksBySpan.length;n--;)if(this._marksBySpan[n]){for(s=i,i=[],r=s.length,a=0,l=this._marksBySpan[n],h=l.length,c=1/0,d=-(1/0),p=0;p<h;p++){for(u=l[p],_=u.index;a<r;){if(f=s[a],g=f.index,!(g<_)){c=g;break}a++,i.push(f),d=g,c=1/0}c-_>=m&&_-d>=m&&(i.push(u),d=_)}for(;a<r;a++)i.push(s[a])}return this._cache=i,this._cache},i.prototype.state=function(){var t,e=[];for(t=this._marksBySpan.length;t--;)this._marksBySpan[t]&&(e=e.concat(this._marksBySpan[t]));return e=e.map(function(t){return[t.span,t.time,t.index]}),{marks:e,version:2}},i.prototype.restoreState=function(t){if(this._marksByIndex={},this._marksBySpan=[],delete this.maxIndex,delete this.minIndex,t&&t.marks&&t.marks.length)if(2===t.version){var e=t.marks.map(function(t){return{span:t[0],time:t[1],index:t[2]}});this.merge(e)}else this.merge(t.marks)},t.exports=i}).call(e,i(32))},function(t,e){"use strict";function i(){this._zoffset=0,this._items=[],this._lastTimePointIndex=null}i.prototype.clear=function(){this._zoffset=0,this._items=[],this._lastTimePointIndex=null},i.prototype.items=function(){return this._items},i.prototype.size=function(){return this._items.length},i.prototype.firstTimePointIndex=function(){return this.offsetToIndex(0)},i.prototype.lastTimePointIndex=function(){return null!==this._lastTimePointIndex&&void 0!==this._lastTimePointIndex?this._lastTimePointIndex:(this._lastTimePointIndex=this.offsetToIndex(this.size()-1),this._lastTimePointIndex)},i.prototype.merge=function(t,e,i){var o,n,s,r,a,l,h;if(0===this._items.length)return this._items=i,this._zoffset=e,[{change:"rebuild",index:0}];if(o=t+this._zoffset,o<0){for(n=Math.abs(o),this._items=Array(n).concat(this._items),this._zoffset=e,s=0;s<i.length;++s)this._items[t+s+e]=i[s];return[{change:"rebuild",index:0}]}for(r=[],s=o;s<this._items.length&&s-o<i.length;++s)this._items[s]=i[s-o],r.push({change:"update",index:s-this._zoffset,value:i[s-o]});if(a=o+i.length,a>this._items.length)for(n=a-this._items.length,l=s;l<s+n;++l)h=this._items.length,this._items.push(i[l-o]),r.push({change:"append",index:h-this._zoffset,value:i[l-o]});return this._zoffset=e,this._lastTimePointIndex=null,r},i.prototype.addTail=function(t,e){for(var i=e?1:0;i<t.length;i++)this._items.push(t[i]),this._lastTimePointIndex++},i.prototype.valueAt=function(t){var e=this.indexToOffset(t);if(void 0!==e)return this._items[e]},i.prototype.indexOf=function(t,e){if(e&&t>this._items[this._items.length-1])return this.offsetToIndex(this._items.length-1);for(var i=0;i<this._items.length&&!(t<this._items[i]);++i)if(!(t>this._items[i]))return this.offsetToIndex(i);return e?this.offsetToIndex(i):void 0},i.prototype.offsetToIndex=function(t){if(0<=t&&t<this.size())return t-this._zoffset},i.prototype.indexToOffset=function(t){var e=t+this._zoffset;if(0<=e&&e<this.size())return e},i.prototype.state=function(){var t={};return t.zoffset=this._zoffset,t.items=this._items,t},i.prototype.restoreState=function(t){t&&(this._zoffset=t.zoffset,this._items=t.items,this._lastTimePointIndex=null)},i.prototype.roughTime=function(t){var e,i,o,n,s,r,a,l,h=this.valueAt(t);if(void 0===h){if(e=this._items,!e.length||e.length<2)return;if(i=this.firstTimePointIndex(),o=this.lastTimePointIndex(),n=this.valueAt(i),s=this.valueAt(o),r=(s-n)/(o-i),t<i)return a=i-t,l=a*r,h=n-l;if(t>o)return a=t-o,l=a*r,h=s+l}return h},i.prototype.roughIndex=function(t){var e,i,o,n,s,r,a,l,h,c,d=this._items;if(d.length&&!(d.length<2))return e=this.firstTimePointIndex(),i=this.lastTimePointIndex(),o=this.valueAt(e),n=this.valueAt(i),t>=o&&t<=n?this.closestIndexLeft(t):(s=(n-o)/(i-e),t<o?(r=o-t,a=Math.round(r/s),l=e-a):t>n?(r=t-n,a=Math.round(r/s),l=i+a,h=d.length-1,c=d[h]-d[h-1],c=Math.min(c,d[h-1]-d[h-2]),c<=86400&&new Date(1e3*this.roughTime(l)).getDate()<new Date(1e3*t).getDate()?l+1:l):void 0)},i.prototype.closestIndexLeft=function(t){var e,i,o,n,s,r,a,l=this._items;if(l.length&&t===t){if(e=l.length-1,i=l[e],t>=i)return e-this._zoffset;if(o=0,n=l[o],!(t<n)){if(t==n)return o-this._zoffset;for(;e>o+1;)if(s=o+e>>1,r=l[s],r>t)e=s;else{if(!(r<t))return r===t?s-this._zoffset:void 0;o=s}return a=i-l[e-1],a=Math.min(a,l[e-1]-l[e-2]),a<=86400&&new Date(1e3*l[o]).getDate()!==new Date(1e3*t).getDate()?o+1-this._zoffset:o-this._zoffset}}},t.exports=i},function(t,e,i){(function(e){"use strict";function o(t){r.call(this,t);var e=this;a.hideMarksOnBars().subscribe(this,function(){e._properties.visible.setValue(!a.hideMarksOnBars().value())}),this._paneView=new n(this)}function n(t,e){this.source=t,this._rendererFactory=e,this.stylesCache={},this.templatesCache={},this._createLollipops()}var s=i(269).ESDPaneView,r=i(270).BarsMarksContainer,a=i(74),l=i(271);inherit(o,r),o.prototype._initialize=function(t){this._properties.visible.setValue(!0)},o.prototype.userEditEnabled=function(){return!1},o.prototype._constructor="UserDefinedTimescaleMarks",o.prototype._plateViewData=function(t){return{text:t.text}},o.prototype.onClicked=function(){var t=this._model.lastHittestData().id;l.emit("onTimescaleMarkClick",t)},o.prototype.clearMarks=function(){r.prototype.clearMarks.call(this),this.onNeedRepaint.fire()},o.prototype._getData=function(t){var e,i,o,n,s,r=this._model.mainSeries().symbolInfo();r&&(e=this._model.timeScale(),i=this.roundRange(this._rangeDifference(t)),o=this,n=this._model.mainSeries().properties().interval.value(),s=ChartApiInstance.getTimescaleMarks(r,i.start,i.end,function(e){e.forEach(function(t){o._marks[t.id]=t},o),o._loadedRange=o._rangeUnion(t,o._loadedRange),o.onNeedRepaint.fire()},n))},o.prototype.updatePlateData=function(t,e){return e.barWidth=this.barWidth(),e.text=t.text,e.tooltipMargin=Math.max(t.minSize/2,.4*this.barWidth())*-1,e},o.prototype.hasContextMenu=function(){return!1},o.prototype.paneViews=function(t){return this._properties.visible.value()?[this._paneView]:[]},inherit(n,s),n.prototype._createLollipops=function(){var t,i,o,n;this.lollipops=[],t=this.source._model.timeScale(),i=s.prototype._getY.call(this.source),o=this.source._model.lastHittestData(),n=this,$.each(this.source._marks,function(s,r){var a={id:r.id,basePoint:new e.Point(t.indexToCoordinate(t.timePointToIndex(r.tickmark))+1,i),hovered:o&&o.id==r.id,barY:null,label:r.label,color:r.color,tooltip:r.tooltip};n.lollipops.push(a)})},n.prototype.update=function(){this._createLollipops()},n.prototype.renderer=function(){return this.update(),s.prototype.renderer.call(this)},n.prototype._generateTemplateStyle=function(t,e,i){var o,n,s=t+e+i;return s in this.stylesCache||(o={strokeStyle:e,lineWidth:1,fillStyle:"white",barLine:{lineStyle:CanvasEx.LINESTYLE_DASHED},lollipop:{width:32,height:64,circleHeight:35,radius:11,lineWidth:2,fillStyle:"white",strokeStyle:"#E2745B",
text:{label:i,strokeStyle:e,font:"normal 12px Verdana, Arial, sans-serif"}}},n={lollipop:{fillStyle:e,text:{strokeStyle:"white"}}},this.stylesCache[s]="default"===t?o:$.extend(!0,{},o,n)),this.stylesCache[s]},n.prototype.getTemplate=function(t,e){var i=t+e.color+e.label;return i in this.templatesCache||(this.templatesCache[i]=this.createTemplate(this._generateTemplateStyle(t,e.color,e.label))),this.templatesCache[i]},n.prototype.getStyle=function(t,e){return this._generateTemplateStyle(t,e.color,e.label)},n.prototype.createText=function(t,e){t.tooltip.forEach(function(t){e.addTextLine(t)})},n.prototype.hasTooltip=function(t){return!!t.tooltip&&t.tooltip.length},t.exports=o}).call(e,i(21))},function(t,e,i){(function(t){"use strict";function o(t,e){this._model=t,this._study=e,this._metaInfo=e.metaInfo(),this.lollipops=[],this._textCache={},this.templatesCache={},this._invalidated=!0,this.templatesCache.hovered=this.createTemplate(this.hoveredStyle),this.templatesCache["default"]=this.createTemplate(this.defaultStyle)}function n(t){this.data=t}function s(t){this.data=t,this._hittest=new a(a.REGULAR,t)}function r(t){this._data=t,this.textRenderer=new r.TextRenderer}var a=i(88),l=i(92);o.prototype._setStackStudies=function(){this._stackStudies=[]},o.prototype._getY=function(){var t,e,i=0,o=this._model.panes();for(t=o.length;t--;)e=o[t],e.containsMainSeries()&&(i+=e.height());return i},o.prototype.update=function(){this._invalidated=!0},o.prototype.updateImpl=function(){var t,e,i,o,n,s,r,a,l,h;this._setStackStudies(),this.lollipops=[],t=this,e=this._study.data(),i=this._model.timeScale(),o=i.visibleBars(),n=this._model.mainSeries().bars(),s=this._study.priceScale(),r=this._model.mainSeries(),a=r.firstBar(),s&&!s.isEmpty()&&!i.isEmpty()&&a&&e&&(l=this._getY(),h=e.range(o.firstBar(),o.lastBar()),h.each(function(e,o){var r,a=0;for(r=0;r<t._stackStudies.length;++r)t._stackStudies[r].data().contains(e)&&++a;t.addLollipop(l,n,i,s,e,o,a)}),this.afterUpdate(l,n,i,s))},o.prototype.addLollipop=function(e,i,o,n,s,r,a){var l,h,c,d,p=r[0],u=null,_=this._study.metaInfo().id+"_"+p,f=this._model.lastHittestData(),g=f&&f.id==_;g&&(l=i.valueAt(s),l&&(h=l[TradingView.LOW_PLOT],n.isPercent()&&(c=this._model.mainSeries().firstValue(),h=n.priceRange().convertToPercent(h,c)),u=n.priceToCoordinate(h))),d=$.extend({id:_,basePoint:new t.Point(o.indexToCoordinate(s)+1,e),hovered:g,barY:u,stack:a},this.extraData(r)),this.lollipops.push(d)},o.prototype.afterUpdate=function(t,e,i){},o.prototype.extraData=function(t){throw Error("Not Implemented")},o.prototype.createText=function(t,e){throw Error("Not Implemented")},o.prototype.showBarLine=function(){return!0},o.prototype.getStyle=function(t,e){var i,o=t;return e.stack&&(o+="_stack:"+e.stack),"hovered"==o?this.hoveredStyle:"default"==o?this.defaultStyle:(this._stylesCache||(this._stylesCache={}),this._stylesCache[o]||(i=TradingView.clone("hovered"==t?this.hoveredStyle:this.defaultStyle),e.stack&&(i.lollipop.incHeight=24*e.stack),this._stylesCache[o]=i),this._stylesCache[o])},o.prototype.hasTooltip=function(t){return!0},o.prototype.renderer=function(){var e,i,o,a,h,c,d,p,u;for(this._invalidated&&(this.updateImpl(),this._invalidated=!1),e=new l,i=0;i<this.lollipops.length;i++)o=this.lollipops[i],a=15,h=this.getStyle(o.hovered?"hovered":"default",o),o.hovered&&this.hasTooltip(o)&&(o.barY&&this.showBarLine()&&(c={style:{lineStyle:h.barLine.lineStyle,strokeStyle:h.strokeStyle,lineWidth:h.lineWidth},startPoint:new t.Point(o.basePoint.x,o.basePoint.y-h.lollipop.circleHeight),endPoint:new t.Point(o.basePoint.x,o.barY)},e.append(new n(c))),d=$.extend({tooltipPoint:new t.Point(o.basePoint.x,o.basePoint.y-h.lollipop.circleHeight-a-(h.lollipop.incHeight||0)),style:h,createText:this.createText},o),e.append(new r(d))),p=this.getTemplate(o.hovered?"hovered":"default",o),u={circlePoint:new t.Point(o.basePoint.x,o.basePoint.y-h.lollipop.circleHeight-(h.lollipop.incHeight||0)),style:h,template:p,basePoint:o.basePoint,id:o.id},e.append(new s(u));return e},o.prototype.getTemplate=function(t,e){var i=t;return e.stack&&(i+="_stack:"+e.stack),this.templatesCache[i]||(this.templatesCache[i]=this.createTemplate(this.getStyle(t,e))),this.templatesCache[i]},o.prototype.createTemplate=function(e){var i=document.createElement("canvas"),o=i.getContext("2d"),n=new t.Point(e.lollipop.width/2,e.lollipop.height),s=new t.Point(e.lollipop.width/2,e.lollipop.height-e.lollipop.circleHeight-(e.lollipop.incHeight||0));return this.drawStick(o,e,n,s),this.drawCircle(o,e,s),this.drawLabel(o,e,s),i},o.prototype.drawCircle=function(t,e,i){t.fillStyle=e.lollipop.fillStyle,t.lineWidth=e.lollipop.lineWidth,CanvasEx.setLineStyle(t,CanvasEx.LINESTYLE_SOLID),t.beginPath(),t.arc(i.x,i.y,e.lollipop.radius,0,2*Math.PI,!1),t.closePath(),t.stroke(),t.fill()},o.prototype.drawLabel=function(t,e,i){t.textAlign="center",t.textBaseline="middle",t.fillStyle=e.lollipop.text.strokeStyle,t.font=e.lollipop.text.font,t.fillText(e.lollipop.text.label,i.x,i.y)},o.prototype.drawStick=function(t,e,i,o){t.strokeStyle=e.strokeStyle,t.lineWidth=e.lineWidth,CanvasEx.setLineStyle(t,CanvasEx.LINESTYLE_DASHED),CanvasEx.drawLine(t,i.x,i.y,o.x,o.y)},n.prototype.draw=function(t){t.strokeStyle=this.data.style.strokeStyle,t.lineWidth=this.data.style.lineWidth,CanvasEx.setLineStyle(t,this.data.style.lineStyle),CanvasEx.drawLine(t,this.data.startPoint.x,this.data.startPoint.y,this.data.endPoint.x,this.data.endPoint.y)},n.prototype.hitTest=function(t){return null},s.prototype.hitTest=function(e){return t.isInCircle(this.data.circlePoint,this.data.style.lollipop.radius,e)?this._hittest:null},s.prototype.draw=function(t){var e=this.data.template;t.drawImage(e,this.data.basePoint.x-(.5+this.data.style.lollipop.width/2<<0)+.5,this.data.basePoint.y-this.data.style.lollipop.height+.5)},r.prototype.draw=function(t){var e=this._data.tooltipPoint;this._data.createText(this._data,this.textRenderer),this.drawFrame(t,e),this.drawTip(t,e)},r.prototype.hitTest=function(t){return null},r.prototype.drawTip=function(t,e){var i=5,o=this.calcMarginX(t,e.x,i),n=e.x+o;t.lineWidth=this._data.style.lineWidth,t.strokeStyle=this._data.style.fillStyle,t.fillStyle=this._data.style.fillStyle,t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(n-i,e.y-i),t.lineTo(n+i,e.y-i),t.fill(),t.closePath(),t.stroke(),t.strokeStyle=this._data.style.strokeStyle,t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(n-i,e.y-i),t.moveTo(e.x,e.y),t.lineTo(n+i,e.y-i),t.closePath(),t.stroke()},r.prototype.drawFrame=function(e,i){var o,n,s=200,r=5,a=16,l=7,h=12,c=this.textRenderer.measure()+h+l,d=this.calcMarginX(e,i.x,s/2);e.lineWidth=this._data.style.lineWidth,CanvasEx.setLineStyle(e,CanvasEx.LINESTYLE_SOLID),e.strokeStyle=this._data.style.strokeStyle,e.fillStyle=this._data.style.fillStyle,e.beginPath(),e.rect(i.x-s/2+d,i.y-r-c,s,c),e.closePath(),e.stroke(),e.fill(),o=i.x-s/2+a+d,n=i.y-r-c+l+this.textRenderer.fontHeight,this.textRenderer.draw(e,new t.Point(o,n))},r.prototype.calcMarginX=function(t,e,i){var o=5,n=5,s=0,r=t.canvas.clientWidth;return e-i<o?s=Math.abs(e-(i+o)):e+i>r-n&&(s=-Math.abs(r-(i+e+n))),s},r.TextRenderer=function(){this.lines=[],this.fontHeight=12,this.font=this.fontHeight+"px Arial, sans-serif",this.lineSpacing=8,this.fillStyle="black"},r.TextRenderer.prototype.draw=function(t,e){var i,o,n=e.y;for(i=0;i<this.lines.length;i++)o=this.lines[i],t.font=this.font,o.options.fontWeight&&(t.font=o.options.fontWeight+" "+this.font),t.fillStyle=this.fillStyle,o.renderer(t,o.line,{x:e.x,y:n}),n+=this.lineSpacing+this.fontHeight},r.TextRenderer.prototype.measure=function(){return this.lines.length*(this.fontHeight+this.lineSpacing)-this.lineSpacing},r.TextRenderer.prototype.basicRenderer=function(t,e,i){t.fillText(e,i.x,i.y)},r.TextRenderer.prototype.addMulticolorTextLine=function(t,e){this.addTextLine(t,e,this.multicolorRenderer)},r.TextRenderer.prototype.addTextLine=function(t,e,i){i||(i=this.basicRenderer),e||(e={}),this.lines.push({line:t,renderer:i,options:e})},r.TextRenderer.prototype.multicolorRenderer=function(t,e,i){var o,n,s=i.x;for(o=0;o<e.length;++o)n=e[o],t.fillStyle=n.color,t.fillText(n.text,s,i.y),s+=t.measureText(n.text).width},e.ESDPaneView=o}).call(e,i(21))},function(t,e,i){(function(t,o,n){"use strict";function s(e,i){var n,s=e._undoModel._chartWidget,r=s.onWidget(),a=!1;a=r?s._options&&!s._options.hideIdeas:TVSettings.getBool("BarsMarksContainer.visibile",!1),i?i.merge({visible:a,frozen:!1}):i=new t({visible:a,frozen:!1}),n=this,i.visible.listeners().subscribe(null,function(t){r||s._containsData||TVSettings.setValue("BarsMarksContainer.visibile",!!t.value()),n._tooltip&&n._tooltip.removeAll()}),d.call(this,e,null,i),this.onNeedRepaint=new o,this._requests=[],this._marks={},this._loadedRange=null,this._getDataTimeout=null,this._collectedRange=null,this._model.mainSeries().onSymbolIntervalChanged().subscribe(this,this.clearMarks),this._model.mainSeries().onSymbolResolved().subscribe(this,this.clearMarks),this._model.mainSeries().onTickmarksRangeChanged().subscribe(this,this.getData),this._initialize(),this.pinnedTooltips={},this._tooltip=new h(this._createTooltip.bind(this),this)}function r(t,e,i){this.source=t,this.pane=e,this._rendererFactory=i}function a(t,e){this._barWidth=t.barWidth,this._plates=t.plates,this._tooltip=t.tooltip,this._model=e}function l(){this._layout=[],this._currentId=void 0,this.tooltipHovered=!1}function h(t,e){this.tooltips={},this.tooltipFactory=t,this.source=e}function c(t,e){this.renderer=t,this._tooltip=e,this.visible=!1}var d=i(67).LineDataSource,p=i(88);inherit(s,d),s.prototype._constructor="Child class must override this member",s.prototype._initialize=function(t){throw"Child class must override this member"},s.prototype.onClicked=function(){throw"Child class must override this member"},s.prototype._getData=function(t){throw"Child class must override this member"},s.prototype._createTooltip=function(){throw"Child class must override this member"},s.prototype.updateDotData=function(t,e){return e},s.prototype.updatePlateData=function(t,e){},s.prototype._plateViewData=function(t){return{}},s.prototype.pinTooltip=function(t,e){this.pinnedTooltips[t]=e},s.prototype.timeScale=function(){return this._model.timeScale()},s.prototype.getIntervalInTicks=function(){function t(t){if(t=parseInt(t),t!=t)throw new TypeError("Unexpected interval");return 60*t}var e=t(1440),i=7*e,o=31*e,n=this._model.mainSeries().properties().interval.value();switch(n){case"M":return o;case"W":return i;case"D":return e;default:return t(n)}},s.prototype._maxDate=new Date(2037,0,1),s.prototype.getVisibleTickmarksRange=function(){var t,e;return this.timeScale().isEmpty()?{start:0,end:0}:(t=this.timeScale().visibleBars(),t.lastBar()>this.timeScale().points().firstTimePointIndex()&&t.firstBar()<this.timeScale().points().lastTimePointIndex()?(e=t.lastBar()<this.timeScale().points().lastTimePointIndex()?this.timeScale().indexToTimePoint(t.lastBar()):this._maxDate,t={start:this.timeScale().indexToTimePoint(Math.max(t.firstBar(),this.timeScale().points().firstTimePointIndex())),end:e},{start:t.start?t.start.getTime()/1e3:void 0,end:t.end?t.end.getTime()/1e3:void 0}):{start:0,end:0})},s.prototype.getVisibleRangePlates=function(){var t=[],e=this.getVisibleTickmarksRange(),i=this.getIntervalInTicks();return $.each(this._marks,function(o,n){var s=n.tickmark;s>=e.start&&s<=e.end+i&&t.push(n)}),t},s.prototype.getPublishedPlates=function(){var t={},e=this;return is_authenticated?($.each(this.getVisibleRangePlates(),function(i,o){o.is_public&&(e.pinnedTooltips[o.id]||o.user__id==user.id)&&(t[o.id]=o)}),t):t},s.prototype._maxPlatesPerBar=10,s.prototype.filterDisplayedPlates=function(t){return t=t.reduce(function(t,e){var i=this._getIndex(e.tickmark);return t[i]=t[i]||[],t[i].push(e),t}.bind(this),{}),t=Object.keys(t).reduce(function(e,i){var o=t[i];return o=o.sort(function(t,e){return e.views_count-t.views_count}),o=o.slice(0,this._maxPlatesPerBar),e.concat(o)}.bind(this),[])},s.prototype._layout=function(t){switch(t){default:case 0:return"up";case 1:return"down";case 2:return"up";case 3:case 4:case 5:case 6:return"up"}},s.prototype._theme=function(t){switch(t){default:case 0:return"neutral";case 1:return"green";case 2:return"red";case 3:return"yellow";case 4:return"blue";case 5:return"green";case 6:return"red"}},s.prototype._offset=function(t,e){var i;switch(t){default:case"up":i=e[TradingView.HIGH_PLOT];break;case"down":i=e[TradingView.LOW_PLOT]}return this.priceScale().isPercent()&&(i=this.priceScale().priceRange().convertToPercent(i,this.ownerSource().firstValue())),this.priceScale().priceToCoordinate(i)},s.prototype._getIndex=function(t){return this.timeScale().timePointToIndex(t)},s.prototype.getViewData=function(){return{barWidth:this.barWidth(),plates:this.getPlatesViewData(),tooltip:this._tooltip}},s.prototype.barWidth=function(){return this.timeScale().barSpacing()},s.prototype.getPlatesViewData=function(){var t,e,i,o,n,s;if(this._model.mainSeries().data().isEmpty())return[];t=this.filterDisplayedPlates(this.getVisibleRangePlates()),e=this,i={},o=this._model.lastHittestData(),t=t.map(function(t){var n,s,r,a,l,h,c=this._getIndex(t.tickmark),d=this._getBar(c);return!!d&&(n=this._layout(t.direction),s=this._theme(t.direction),r=o&&o.id==t.id,a=this.timeScale().indexToCoordinate(c),l=this._offset(n,d),h=0,c in i||(i[c]={up:0,down:0}),h=i[c][n]++,TradingView.merge({id:t.id,x:a,y:l,order:h,direction:n,theme:s,hovered:r,pinned:e.pinnedTooltips[t.id]===!0,user__id:t.user__id,label:t.label,labelFontColor:t.labelFontColor||"#444",minSize:t.minSize||0},this._plateViewData(t)))}.bind(this)),t=t.filter(function(t){return!!t}),n=t.filter(function(t){return t.hovered===!0});for(s=0;s<t.length;s++)null!=n[0]&&t[s].user__id==n[0].user__id&&(t[s].highlightByAuthor=!0);return t.sort(function(t,e){return t.hovered&&!e.hovered?1:0}),t},s.prototype._getBar=function(t){return this._model.mainSeries().data().valueAt(t)},s.prototype.paneViews=function(t){var e=this;return this._properties.visible.value()?[new r(this,t,function(t){return new a(t.getViewData(),e)})]:[]},s.prototype.dataWindowView=function(){return null},s.prototype.priceAxisViews=function(){return null},s.prototype.statusView=function(){return null},s.prototype.updateAllViews=function(){},s.prototype.pointsCount=function(){return 0},s.prototype.properties=function(){return this._properties},s.prototype._rangeDifference=function(t){return t=$.extend({},t),this._loadedRange&&(t.start<this._loadedRange.start?t.end=this._loadedRange.start:t.end>this._loadedRange.end&&(t.start=this._loadedRange.end)),t},s.prototype._rangeUnion=function(t,e){return t=$.extend({},t),e&&(t.start=Math.min(e.start,t.start),t.end=Math.max(e.end,t.end)),t},s.prototype._pushGetDataStack=function(t){if(!t.end||!t.start)throw new TypeError("Wrong tickmark range");this._getDataTimeout&&clearTimeout(this._getDataTimeout),this._collectedRange=this._rangeUnion(t,this._collectedRange),this._getDataTimeout=setTimeout(function(){this._getData(this._collectedRange),this._getDataTimeout=this._collectedRange=null}.bind(this),300)},s.prototype.roundRange=function(t){return{start:Math.round(t.start),end:Math.round(t.end)}},s.prototype.refreshData=function(){this.getData(this._lastRange)},s.prototype.getData=function(t){if(!t.start||!t.end)throw new TypeError("Wrong range");this._lastRange=t;var t=$.extend({},t);t.end=this._maxDate/1e3,this._pushGetDataStack(t)},s.prototype._abortAllRequests=function(){this._requests.forEach(function(t){t.abort()}),this._requests=[],this._getDataTimeout&&clearTimeout(this._getDataTimeout),this._getDataTimeout=this._collectedRange=null},s.prototype.clearMarks=function(){this._abortAllRequests(),this._marks={},this._loadedRange=null},r.prototype.update=function(){},r.prototype.renderer=function(){return this._rendererFactory(this.source)},a.prototype.draw=function(t){t.save();for(var e=0;e<this._plates.length;e++)if(this._plates[e].highlightByAuthor){this._highlightByAuthor=!0;break}this._plates.forEach(this._drawItem.bind(this,t)),this._tooltip.draw(this._plates.map(function(t){return this._plateTransform(t)}.bind(this)),t),this._tooltip.endDraw(),t.restore()},a.prototype._drawItem=function(t,e){t.save(),this._highlightByAuthor&&!e.highlightByAuthor&&(t.globalAlpha=.4);var i=this._dotTransform(e);i.mine?this._drawTriangle(t,i):this._drawDot(t,i),t.restore()},a.prototype._commonTransform=function(t){var e=Math.max(1.4*t.minSize,this._barWidth+4),i=t.y+{up:-1,down:1}[t.direction]*(e*(t.order+.6)+.25*e),o=TradingView.clone(t.overridedTheme||this.themes[t.theme]);return o.dotBorderWidth=t.hovered||t.highlightByAuthor?4:2,{id:t.id,theme:o,themeName:t.theme,x:Math.round(t.x+1),y:Math.round(i),pinned:t.pinned,hovered:t.hovered}},a.prototype._dotTransform=function(t){var e=this._commonTransform(t);return e.radius=Math.max(t.minSize/2,.4*this._barWidth),e.label=t.label,e.labelFontColor=t.labelFontColor,e.labelFontSize=Math.ceil(Math.max(10,Math.min(e.radius,20))),this._model.updateDotData(t,e)},a.prototype._plateTransform=function(t){var e=this._commonTransform(t);return this._model.updatePlateData(t,e)},a.THEMES=["green","red","neutral","yellow","blue"],a.prototype.themes={green:{border:"#78C143",background:"#8DDD54"},red:{border:"#CC4545",background:"#ED5A5A"},neutral:{border:"#EAC300",background:"#FFD400"},yellow:{border:"#EAC300",background:"#FFD400"},blue:{border:"#047ACE",background:"#0496FF"}},a.prototype._drawTriangle=function(t,e){var i,o,n,s;t.strokeStyle=e.theme.border,t.fillStyle=e.theme.background,t.lineWidth=e.theme.dotBorderWidth,i=e,o=e.radius,n=Math.cos(Math.PI/6)*o,s=Math.sin(Math.PI/6)*o,t.translate(i.x,i.y),"up"==e.direction&&t.rotate(Math.PI),e["public"]||(t.lineWidth/=2),t.beginPath(),t.moveTo(0,-o),t.lineTo(n,s),t.lineTo(-n,s),t.lineTo(0,-o),t.closePath(),t.stroke(),e["public"]&&t.fill()},a.prototype._drawDot=function(t,e){t.strokeStyle=e.theme.border,t.fillStyle=e.theme.background,t.lineWidth=e.theme.dotBorderWidth,t.beginPath(),t.arc(e.x,e.y,e.radius,0,2*Math.PI,!0),t.closePath(),t.stroke(),t.fill(),e.label&&e.radius>6&&(t.textAlign="center",t.textBaseline="middle",t.font="bold "+e.labelFontSize+"px Arial",t.fillStyle=e.labelFontColor,t.fillText(e.label,e.x,e.y))},a.prototype.hitTest=function(t){var e,i;for(i=this._plates.length-1;i>=0;--i)if(e=this._hitTestDot(this._plates[i],t))return e;return null},a.prototype._hitTestDot=function(t,e){var i=this._dotTransform(t),o=new n.Point(i.x,i.y);return n.isInCircle(o,Math.max(i.radius,8),e)?new p(p.REGULAR,t):null},l.prototype._createLayout=function(){throw"Child class must override this member"},l.prototype._updatePlate=function(t){throw"Child class must override this member"},l.prototype._getContainer=function(t){return this._container&&this._context===t||(this._context=t,this._container=$(t.canvas).parent()),this._container},l.prototype._plateArrowSize=14,l.prototype.showPlate=function(t,e){var i,o,n,s,r,a,l;this._currentId==t.id&&this._layout&&0!==this._layout.length&&null!=this._layout[0].parentNode||(this._currentId=t.id,this._createLayout(),this._getContainer(e).append(this._layout),i=this,this._layout.hover(function(){i.tooltipHovered=!0,$(this).stop(!0).fadeTo(0,1)},function(){i.tooltipHovered=!1})),o=Math.round(t.barWidth/2),o>15&&(o=15),o<10&&(o=10),this._updatePlate(t),n=t.x-this._layout.outerWidth()<this._plateArrowSize,s=e.canvas.width-t.x+Math.round(t.barWidth/2+o),n&&(s-=this._layout.outerWidth()+2*this._plateArrowSize),r=e.canvas.height,a=20,l=10,this._layout.toggleClass("right",n),this._layout.css({top:Math.min(Math.max(t.y,a),r-this._layout.outerHeight()-l),right:s,fontSize:o+"px",display:"block"})},l.prototype._removeLayout=function(){this.tooltipHovered||(this._layout.stop(!0),this._layout.remove())},l.prototype._toggleLayout=function(t){this._layout.toggle(t)},l.prototype.hide=function(t){this.tooltipHovered?this._layout.stop(!0).fadeTo(0,1):this._layout.fadeOut(400,function(){$(this).remove(),t()})},l.prototype.setSource=function(t){this.source=t},h.prototype.findOrCreateTooltip=function(t){var e=this.tooltips[t.id];return null==e&&(t.hovered||t.pinned)&&(e=this._createTooltip(),this.tooltips[t.id]=e),e},h.prototype.showPlate=function(t,e){var i=this.findOrCreateTooltip(t);null!=i&&(i._drawPlate(t,e),i.plateData=t)},h.prototype.draw=function(t,e){this.hoveredId=null;for(var i=0;i<t.length;i++)t[i].hovered&&(this.hoveredId=t[i].id);t.forEach(function(t){this.showPlate(t,e)}.bind(this))},h.prototype.endDraw=function(){var t,e,i=this;for(t in this.tooltips)this.tooltips.hasOwnProperty(t)&&(e=this.tooltips[t],e.toggleVisibility(),i.hoveredId&&e.plateData.id!=i.hoveredId&&!e.plateData.pinned&&(e.remove(),delete this.tooltips[t]))},h.prototype.removeAll=function(){var t,e;for(t in this.tooltips)this.tooltips.hasOwnProperty(t)&&(e=this.tooltips[t],e.remove());this.tooltips={}},h.prototype.removeTooltip=function(t){delete this.tooltips[t]},h.prototype._createTooltip=function(){return new c(this,this.tooltipFactory())},c.prototype._drawPlate=function(t,e){var i=this;this.visible=!0,this._tooltip.setSource(this.renderer.source),this._tooltip.showPlate(t,e),t.hovered||t.pinned||this._tooltip.hide(function(){i.renderer.removeTooltip(t.id)})},c.prototype.remove=function(){this._tooltip._removeLayout()},c.prototype.toggleVisibility=function(){this._tooltip._toggleLayout(this.visible),this.visible=!1},e.BarsMarksContainer=s,e.BarsMarksContainerRenderer=a,e.BarMarkTooltip=l}).call(e,i(63),i(32),i(21))},function(t,e,i){(function(e){"use strict";var i=function(){var t={},i={},o=[];return t.unsubscribe=function(t,e,o){i[t].unsubscribe(o,e)},t.on=function(e,i,o){return t.subscribe(e,i,o)},t.subscribe=function(t,o,n){i.hasOwnProperty(t)||(i[t]=new e),i[t].subscribe(n,o)},t.subscribeToAll=function(t){o.push(t)},t.emit=function(t){var n=Array.prototype.slice.call(arguments);o.forEach(function(t){t.apply(null,n)}),i.hasOwnProperty(t)&&(n=n.slice(1),e.prototype.fire.apply(i[t],n))},t}();TradingView.GlobalEventsStorage=i,t.exports=i}).call(e,i(32))},function(t,e,i){"use strict";function o(t){r.call(this,t);var e=this;l.hideMarksOnBars().subscribe(this,function(){e._properties.visible.setValue(!l.hideMarksOnBars().value())})}function n(t){a.call(this)}var s=i(270),r=s.BarsMarksContainer,a=s.BarMarkTooltip,l=i(74);inherit(o,r),o.prototype._initialize=function(t){this._properties.visible.setValue(!0)},o.prototype.userEditEnabled=function(){return!1},o.prototype._constructor="UserDefinedBarsMarks",o.prototype._plateViewData=function(t){var e={text:t.text};return"object"==typeof t.color&&(e.theme="user_defined_theme",e.overridedTheme={},e.overridedTheme.border=t.color.border,e.overridedTheme.background=t.color.background),e},o.prototype.onClicked=function(){var t=this._model.lastHittestData().id;this._marks[t].onClicked()},o.prototype.clearMarks=function(){r.prototype.clearMarks.call(this),this.onNeedRepaint.fire()},o.prototype._getData=function(t){var e,i,o,n,s=this._model.mainSeries().symbolInfo();s&&(e=this.roundRange(this._rangeDifference(t)),i=this,o=this._model.mainSeries().properties().interval.value(),n=ChartApiInstance.getMarks(s,e.start,e.end,function(e){e.forEach(function(t){i._marks[t.id]=t},i),i._loadedRange=i._rangeUnion(t,i._loadedRange),i.onNeedRepaint.fire()},o))},o.prototype._createTooltip=function(){return new n},o.prototype.updatePlateData=function(t,e){return e.barWidth=this.barWidth(),e.text=t.text,e.tooltipMargin=Math.max(t.minSize/2,.4*this.barWidth())*-1,e},o.prototype.hasContextMenu=function(){return!1},inherit(n,a),n.prototype._createLayout=function(){this._layout=$('<div class="bar-mark-tooltip"></div>'),this._layout_text=$('<div class="text"></div>').appendTo(this._layout)},n.prototype._updatePlate=function(t){this._currentId=t.id,this._layout.css("border-color",t.theme.border),this._layout.css("margin-top",t.tooltipMargin+"px"),this._layout_text.html(t.text),this._layout.append(this._layout_text)},t.exports=o},function(t,e,i){(function(e){"use strict";function o(t,i,o){s.call(this,t),this._origState=i,this._title=o;var r={visible:!0};this._properties=new e(r),this._statusView=new n(this,t.properties()),this._status=$.t("compiling..."),this._statusView.setText(this._title+" "+this._status),this._formatter=new a(Math.pow(10,2)),this._failed=!1}var n=i(190),s=i(72).PriceDataSource,r=i(75),a=r.PriceFormatter;inherit(o,s),o.prototype.properties=function(){return this._properties},o.prototype.statusView=function(){return this._statusView},o.prototype.state=function(t){return this._origState},o.prototype.setStatus=function(t){this._status=t,this._statusView.setText(this._title+" "+this._status)},o.prototype.formatter=function(){return this._formatter},o.prototype.title=function(){return this._title},o.prototype.setFailed=function(t){this._failed=t},t.exports=o}).call(e,i(63))},function(t,e,i){"use strict";TradingView.PublishedChartsTimeline=function(){},TradingView.LinearRegressionPaneView=function(){},TradingView.study_PivotPointsStandard=function(){},TradingView.study_PivotPointsHighLow=function(){},TradingView.study_ZigZag=function(){},TradingView.study_LinearRegression=function(){},TradingView.study_ElliottWave=function(){},TradingView.ESDStudyBase=function(){},TradingView.Pro=function(){this.hasPackage=function(){return!1}},window.user={is_pro:!1,settings:{}},TradingView.Pro.prototype.getStudies=function(){return[]},TradingView.Pro.prototype.getProduct=function(){return{}},TradingView.Pro.prototype.getStudiesOrder=function(){return[]},TradingView.LineToolRegressionTrend=function(){},TradingView.templates=i(48),TradingView.templates.dialogs={addSymbol:' <div class="main"> <div class="symbol-edit-place"></div>{{#overlayOption}} <div class="_tv-dialog-relative">\t<input id="_tv-dialog-addsymbol-overlay-checkbox" type="checkbox" name="addsymbol-overlay" {{#overlayOptionChecked}}checked="checked"{{/overlayOptionChecked}} />\t<span class="_tv-dialog-checkbox-mask _tv-dialog-checkbox-mask{{#overlayOptionChecked}}-active{{/overlayOptionChecked}}"></span>\t<label for="_tv-dialog-addsymbol-overlay-checkbox"> Overlay the main chart</label> </div>{{/overlayOption}} <div class="_tv-dialogs-bottom-button"> <span class="_tv-button tv-right tv-uppercase ok">{{okButtonTitle}}</span> </div> </div>',symbolSearch:'<div class="symbol-block"><div class="spread-actions"></div><div class="symbol-block-inputspacer"><input maxlength="'+TradingView.SYMBOL_SEARCH_MAX_LENGTH+'" /><div class="search-cion"></div></div></div><div class="filter"></div><div class="results"></div>'},TradingView.AlertLabel=function(){},TradingView.getDataVendorString=function(){},window.Telemetry={sendReport:function(){}},TradingView.study_VbPVisible=function(){},TradingView.study_VbPSessions=function(){},TradingView.LineToolVbPFixed=function(){},TradingView.study_ESD$TV_DIVIDENDS=function(){},TradingView.study_ESD$TV_SPLITS=function(){},TradingView.study_ESD$TV_EARNINGS=function(){},TradingView.MockupRequestedCache=function(t){t&&t([])},TradingView.MockupRequestedCache.invalidate=function(){},TradingView.getThemesList=TradingView.MockupRequestedCache,TradingView.StudyStrategy=function(){},TradingView.LinetoolTemplatesList=function(){},window.PublishedScript={suggest:function(){var t=$.Deferred();return t.resolve(null),t}}},function(t,e,i){"use strict";var o=i(276),n={instances:[],createMenu:function(t,e,i){var n=new o(t,e,i);return this.instances.push(n),n},hideAll:function(){for(var t in this.instances)this.instances[t].hide()}};t.exports=n},function(t,e,i){"use strict";function o(t){var e,i=[],n=t.m_items;for(e=0;e<n.length;e++)n[e]._menu&&(i.push(n[e]._menu),i=i.concat(o(n[e]._menu)));return i}function n(t,e,i){var o,n;this.options={},this._parentMenuItem=i,$.extend(this.options,e),this.options["class"]&&(this.options.attributes["class"]=this.options["class"]),this.jqMenu=null,this.m_wrapper=null,this.m_items=[];for(o in t)n=t[o],this.addItem(n)}var s=i(277),r=i(132).ActionPlaceholder,a=i(278),l=a.Item,h=a.ItemPlaceholder,c=i(53),d=i(52);n.prototype.addItem=function(t){var e;return e=t instanceof r?new h(t,this):new l(t,this),this.m_items.push(e),e},n.renderItem=function(t,e){t.append(e.render(t))},n.prototype.closeOtherSubmenus=function(t){for(var e=0;e<this.m_items.length;++e)this.m_items[e].highlight(!1),this.m_items[e]._menu&&(this.m_items[e]._menu.destroy(),this.m_items[e]._menu=null)},n.prototype.isShown=function(){return null!==this.jqMenu},n.prototype.render=function(){var t,e,i,o=this.getAttributes();if(this._parentMenuItem){t=$("<table>"),this.jqMenu=t,t.attr("cellspacing","0"),t.attr("cellpadding","0"),t.addClass("context-menu"),t.addClass("submenu");for(e in this.m_items)i=this.m_items[e],n.renderItem(t,i)}else{t=d.create(s.MENU_TAG,o),this.jqMenu=t;for(e in this.m_items)i=this.m_items[e],n.renderItem(t,i)}return this.jqMenu},n.prototype.getAttributes=function(){var t={},e=["context-menu"];return this.options.attributes&&this.options.attributes["class"]&&e.push(this.options.attributes["class"]),t.cellspacing=0,t.cellpadding=0,t["class"]=e.join(),t},n.prototype.deploy=function(t,e){var i=this.wrapper();return this.jqMenu=i.append(this.render()),e?($(e).data("submenu",this.jqMenu),$(document.body).append(this.jqMenu),this.jqMenu.data("parent-menu",e),this.jqMenu.data("parent-item",t.currentTarget)):$(document.body).append(this.jqMenu),c.unbindContextMenu(this.jqMenu),this._setCoords(t),this.jqMenu},n.prototype.show=function(t,e){this.deploy(t,e).show()},n.prototype.hide=function(){this.isShown()&&this.destroy()},n.prototype.destroy=function(){$.each(this.m_items,function(t,e){e._menu&&e._menu.destroy()}),this.jqMenu&&(this.jqMenu.remove(),this.jqMenu=null),this.m_wrapper.empty()},n.prototype._setCoords=function(t){var e,i,o,n,s,r=5,a=this.jqMenu,l=($(this.jqMenu.data("parent-menu")),$(this.jqMenu.data("parent-item"))),h={width:$(window).width(),height:Math.min($(window).height(),$("body").height())},c={top:$(document).scrollTop(),left:$(document).scrollLeft()};for(this.jqMenu.css({maxWidth:h.width-2*r,maxHeight:h.height-2*r}),e={width:a.outerWidth(),height:a.outerHeight()},l.size()?(o=l.offset(),i={top:o.top-1,left:o.left+l.outerWidth()}):i={top:t.pageY,left:t.pageX},this.jqMenu.offset(i),n={},n.top=Math.min(i.top,h.height+c.top-e.height-r),n.left=Math.min(i.left,h.width+c.left-e.width-r),s=t.target;s&&s!==document;s=s.parentNode)if("fixed"===$(s).css("position")){this.jqMenu.css("position","fixed");break}this.jqMenu.offset(n)},n.prototype._wrapper=function(){var t=this,e=s.WRAPPER_ATTRIBUTES;return this._parentMenuItem?this.m_wrapper=d.create(s.WRAPPER_TAG,e):(this.m_wrapper=c.createPopup(e,void 0,{mouseDownOutsideEvent:function(e){var i=$();$.each(o(t),function(){i=i.add(this.m_wrapper)}),$(e.target).parents().andSelf().is(i)||t.hide()}}),this.m_wrapper.addClass("topmenu")),this.m_wrapper},n.prototype.wrapper=function(t){return this.m_wrapper||this._wrapper()},t.exports=n},function(t,e){"use strict";t.exports={INSERT_AT_END:0,INSERT_AT_START:1,INSERT_AT_POS:2,WRAPPER_TAG:"div",WRAPPER_ATTRIBUTES:{"class":"context-menu-wrapper"},MENU_TAG:"table",ITEM_ROW_TAG:"tr",ICON_CELL_TAG:"td",TEXT_CELL_TAG:"td",RIGHT_CELL_TAG:"td",SUBMENU_CELL_TAG:"td"}},function(t,e,i){"use strict";function o(t){return null==t._parentMenu?null:n(t._parentMenu)}function n(t){return null==t._parentMenuItem?t:o(t._parentMenuItem)}function s(t,e){this.action=t,this._parentMenu=e}function r(t,e){this.action=t,this._parentMenu=e}var a=i(277),l=i(52);s.prototype._createIconTag=function(){var t=this._iconTagAttributes();return this.jqIcon=l.create(a.ICON_CELL_TAG,t),this.jqIcon.addClass("context-menu"),this.jqIcon},s.prototype._createDeleteButton=function(){var t,e,i;return this.action.deleteButton?(t=this,e=this.action.deleteButton.action,i=l.create("span",{"class":"context-menu-delete-button"}),e&&i.click(function(){return e.call(t),!1}),this.jqSubmenu.addClass("delete-spacer"),void this.jqSubmenu.append(i)):null},s.prototype._createTextTag=function(){var t=this._textTagAttributes();
return this.jqText=l.create(a.TEXT_CELL_TAG,t),this.jqIcon.addClass("context-menu"),this.jqText},s.prototype._createRightTag=function(){var t=this._rightTagAttributes();return this.jqRight=l.create(a.RIGHT_CELL_TAG,t),this.jqIcon.addClass("context-menu"),this.jqRight},s.prototype._createSubmenuTag=function(){var t=this._submenuTagAttributes();return this.jqSubmenu=l.create(a.SUBMENU_CELL_TAG,t),this.jqIcon.addClass("context-menu"),this.jqSubmenu},s.prototype._iconTagAttributes=function(){var t={},e=[];return this.action&&(this.action.icon?(e.push("icon"),e.push(this.action.icon.replace(/\./,"_"))):this.action.checkable?(e.push("icon"),this.action.checked?e.push("checked-icon"):e.push("unchecked-icon")):e.push("spacer")),t["class"]=e.join(" "),t},s.prototype._textTagAttributes=function(){return{"class":"text",html:this.action?this.action.text:""}},s.prototype.highlight=function(t){t?(this.jqRow.addClass("context-menu-hover"),this.jqIcon.addClass("context-menu-hover")):(this.jqRow.removeClass("context-menu-hover"),this.jqIcon.removeClass("context-menu-hover")),this.action&&this.action.hasSubActions()&&(t?this.jqSubmenu.addClass("expanded"):this.jqSubmenu.removeClass("expanded"))},s.prototype._rightTagAttributes=function(){var t={},e=["right"];return this.action&&this.action.shortcut&&(e.push("shortcut"),t["class"]=e.join(" "),t.html=this.action.shortcut),t},s.prototype._submenuTagAttributes=function(){var t={};return this.action&&this.action.hasSubActions()?t["class"]="submenu-arrow":t["class"]="context-menu spacer",t},s.prototype.render=function(){this._createRow(),this.jqRow.append(this._createIconTag()),this.jqRow.append(this._createTextTag()),this.jqRow.append(this._createRightTag()),this.jqRow.append(this._createSubmenuTag()),this._createDeleteButton(),this.appendCallback();var t=this;return this.jqRow.mouseenter(function(e){t.showSubmenu(e),t.highlight(!0),t._parentMenu&&t._parentMenu._parentMenuItem&&t._parentMenu._parentMenuItem.highlight(!0)}),this.jqRow.mouseleave(function(){t.highlight(!1)}),this.jqRow},s.prototype._createRow=function(){var t,e,i=this._rowTagAttributes();this.jqRow=l.create(a.ITEM_ROW_TAG,i),this.jqRow.addClass("context-menu"),t=this,this.action&&!this.action.hasSubActions()&&(e=function(t){t.destroy(),t._parentMenuItem&&e(t._parentMenuItem._parentMenu)},this.jqRow.click(function(i){e(t._parentMenu)}))},s.prototype.showSubmenu=function(t){var e,o,n,s,r;this._parentMenu.closeOtherSubmenus(this),this.action&&!this.action.hasSubActions()||(this._menu||(e=i(275),this._menu=e.createMenu(this.action.subActions,null,this)),o=this.jqRow.position(),n=this.jqRow.height(),s=this.jqRow.width(),r=this.jqRow.offset(),t.pageX=this._parentMenu.jqMenu.width()-2,t.pageY=this.jqSubmenu.offset().top-this._parentMenu.jqMenu.offset().top-1,this._menu.show(t,this._parentMenu.jqMenu))},s.prototype._rowTagAttributes=function(){var t=[];return this.action&&(this.action.enabled===!1&&t.push("disabled"),this.action.visible===!1&&t.push("hidden"),this.action.font&&t.push("font_"+this.action.font),this.action.hasSubActions()&&t.push("has_submenu"),this.action.htmlclass&&t.push(this.action.htmlclass)),{"class":t.join(" ")}},s.prototype.appendCallback=function(){var t=this;this.jqRow.click(function(e){t.action.enabled&&t.action.executeCallback(e)})},s.prototype.getTopLevelMenu=function(){return o(this)},r.prototype.render=function(t){this._createRow();var e=this;return this.action.deferred.then(function(o){var n,s,r,a=i(276);for(n in o)s=o[n],r=e._parentMenu.addItem(s),a.renderItem(t,r)}).always(function(){e.jqRow.hide()}),this.jqRow},r.prototype._createIconTag=function(){var t=this._iconTagAttributes();return this.jqIcon=l.create(a.ICON_CELL_TAG,t),this.jqIcon.addClass("context-menu"),this.jqIcon},r.prototype._createRow=function(){var t=this._rowTagAttributes();this.jqRow=l.create(a.ITEM_ROW_TAG,t),this.jqRow.append(this._createIconTag()),this.jqRow.addClass("context-menu")},r.prototype._rowTagAttributes=function(){var t=[];return this.action&&t.push("spinner"),{"class":t.join(" ")}},r.prototype.highlight=function(t){},r.prototype._iconTagAttributes=function(){var t={},e=[];return e.push("spacer"),t["class"]=e.join(" "),t.colspan="10",t},e.Item=s,e.ItemPlaceholder=r},function(t,e,i){(function(e,o,n){"use strict";function s(t,i){TradingView.getStudyTemplatesList.invalidate(),e.enabled("charting_library_base")?c.removeStudyTemplate(t,i):$.post("/remove-study-template/",{name:t},i)}function r(t){this._options=t||{},this._chartWidgetCollection=this._options.chartWidgetCollection,this._SAVE_AS_TITLE=$.t("Save Study Template As..."),this._list=[],this._$wrapper=null,this._favoredList=null,this._loaded=!1,this._onFirstLoad=new o,this.onFavoriteListResize=new o}var a=i(50),l=a.FavoredList,h=a.showChartNameDialog,c=i(40);r.prototype.appendMenuButtonTo=function(t){t&&(this._$wrapper=t,this._generateFavoriteList())},r.prototype.refreshStudyTemplateList=function(t){var e=this;TradingView.getStudyTemplatesList(function(i){e._list=i||[],"function"==typeof t&&t()})},r.prototype._generateFavoriteList=function(){var t=this;this._favoredList=new l("StudyTemplates",t._listPreparedForFavorite(),{addClass:"study-template-widget",popupAddClass:"study-template-popup",notShowActive:!0,svg:!1,popupSpacing:this._options.popupSpacing,notShowQuicks:this._options.notShowQuicks,tooltip:$.t("Study Templates"),addTooltipClass:"apply-common-tooltip"}),t.refreshFavoriteDropdownMenu(),this._favoredList.element().appendTo(this._$wrapper),this._favoredList.onSelect().subscribe(t,function(t){t!=this._SAVE_AS_TITLE&&this.applyStudyTemplate(t)}),this._favoredList.onSelect().subscribe(t,function(t){t===this._SAVE_AS_TITLE&&this.showSaveAsDiaolg()}),this._favoredList.onResize().subscribe(t._chartWidgetCollection,t._chartWidgetCollection.updateLayout),this._favoredList.onResize().subscribe(this.onFavoriteListResize,this.onFavoriteListResize.fire),this._favoredList.onOpen().subscribe(t,function(){t.refreshFavoriteDropdownMenu()})},r.prototype._listPreparedForFavorite=function(t){var e,i,o,s,r;return t=t||this._list,e=this,i=this.plainList("default"),o=this.plainList("custom"),s=[{id:e._SAVE_AS_TITLE,title:e._SAVE_AS_TITLE,addClass:"special",toQuickButtonStyle:{display:"none"}},{separator:!0}],r=function(t,i){return $.map(t,function(t){var o={id:t,title:$.t(t),svg:n("star","13x13"),favoriteButton:{icon:{},title:t,addClass:"apply-common-tooltip"}};return i&&(o.drop=function(){this.deleteStudyTemplate(t)}.bind(e)),o})},o.length&&(s=s.concat(r(o,!0)).concat([{separator:!0}])),s=s.concat(r(i))},r.prototype.applyStudyTemplate=function(t){function i(e){TradingView.trackEvent("GUI","Load Study Template"),o.model().model().restoreStudyTemplate(JSON.parse(e.content),t),o.updateSeriesControlUI()}var o=this._chartWidgetCollection.activeChartWidget.value();TVSettings.setValue("defaultStudyTemplate",t),e.enabled("charting_library_base")?c.getStudyTemplateContent(t,i):$.get("/study-template/?templateName="+encodeURIComponent(t),i)},r.prototype.showSaveAsDiaolg=function(){var t=this,i=this._chartWidgetCollection.activeChartWidget.value(),o=function(o,n){var s,r,a,l,h,d,p,u;o=TradingView.clean(o),s=n[0],r=JSON.stringify(i.model().model().studyTemplate(s)),a={name:o,content:r},l=$.inArray(o,t.plainList())!=-1,h=function(){var i=function(e){e.error||(TVSettings.setValue("defaultStudyTemplate",o),TradingView.getStudyTemplatesList.invalidate(),t.refreshFavoriteDropdownMenu())};e.enabled("charting_library_base")?c.saveStudyTemplate(a,i):$.post("/save-study-template/",a,i).error(function(t){TradingView.logError(t.responseText)})},l?(d=$.t("Confirm replace"),p=$.t("Do you realy want to replace")+' "'+o+'"?<br><small>'+$.t("Note: default study templates won't be removed permanently")+"</small>",u=h,TVDialogs.showConfirm(d,p,u)):h()},n=function(e){t.refreshStudyTemplateList(function(){e.find('[name="name"]').inputselectable({list:t.plainList().sort(),closeHandle:e})})};runOrSignIn(function(){h(o,{title:$.t("Save new study template"),label:$.t("Template name"),error:$.t("Please enter template name")},255,[{title:$.t("Save Interval"),name:"save_interval",type:"bool",hint:$.t('When selecting this checkbox the study template will set "__interval__" interval on a chart',{interval:i.model().model().mainSeries().interval()})}],n)},{source:"Study templates save as",sourceMeta:"Chart"})},r.prototype.refreshFavoriteDropdownMenu=function(){var t=this,e=this._favoredList;e&&t.refreshStudyTemplateList(function(){e.reload(t._listPreparedForFavorite()),e._container.hasClass("active")&&(e._container.trigger("click"),e._openMenu.call(e))})},r.prototype.deleteStudyTemplate=function(t){var e=this,i=$.t("Do you really want to delete {0} study template?").format(t?'"'+t+'"':"");runOrSignIn(function(){TVDialogs.showConfirm($.t("Study Template"),i,function(){e._favoredList.removeById(t),s(t,function(){setTimeout(function(){e.refreshFavoriteDropdownMenu()},0)})})},{source:"Study templates delete"})},r.prototype.container=function(){return this._favoredList?this._favoredList._container:null},r.prototype.list=function(){return this._list},r.prototype.plainList=function(t){return"default"===t?$.map(jQuery.grep(this._list,function(t){return!!t.is_default}),function(t){return t.name}):"custom"===t?$.map(jQuery.grep(this._list,function(t){return!t.is_default}),function(t){return t.name}):$.map(this._list,function(t){return t.name})},t.exports=r}).call(e,i(1),i(32),i(26))},function(t,e,i){(function(t,e){"use strict";function o(e,i){this.options=$.extend({throttleTimeout:125},i),this._connected=!1,this._symbol_data={},this._subscriptions={},this._delayed_subscriptions=[],this.onConnect=new t,this.onDisconnect=new t,this._quoteApi=new n(ChartApiInstance),this._type=e||"full",this.connect(),this._delayUpdateFastSymbols=TradingView.debounce(this._updateFastSymbols,250),this._throttledSymbolData={},this._formatterValuesCache={},this._waitingForFormatters={},this.fieldsSent=new $.Deferred}var n,s=i(75).PriceFormatter;n=i(281),o.prototype.destroy=function(){this._quoteApi.destroy(),this._quoteApi=null,this._connected=!1,this.onDisconnect.fire()},o.prototype.type_fields={minichart:["lp","open_time","series_data","description"],simple:["ch","chp","lp","fractional","minmov","minmove2","original_name","pricescale","pro_name","update_mode","volume","symbol_status","description","exchange","short_name","current_session","type","is_tradable"],"simple-detailed":["ch","chp","lp","fractional","minmov","minmove2","original_name","pricescale","pro_name","update_mode","symbol_status","description","exchange","short_name","current_session","type","volume","open_price","high_price","low_price","market_cap_basic","prev_close_price","earnings_per_share_basic_ttm","price_earnings_ttm","beta_1_year"],full:[]},o.prototype.connect=function(t){this._quoteApi.connect(this.quoteHandler.bind(this))},o.prototype.quoteHandler=function(t){var e=t.method,i=t.params;switch(e){case"connected":this._connected||(this._connected=!0,this.onConnected());break;case"quote_list_fields":break;case"quote_symbol_data":this._connected&&this.onSymbolData(i[0]);break;case"disconnected":this._connected&&(this._connected=!1,this.onDisconnect.fire())}},o.prototype.onConnected=function(){this.setFields();var t=Object.keys(this._symbol_data);t.length&&this._quoteApi.quoteAddSymbols(t,{forcePermission:!0}),this._delayed_subscriptions.forEach(function(t){this.subscribe.apply(this,t)},this),this._delayed_subscriptions=[],this.onConnect.fire()},o.prototype.setFields=function(){var t=o.prototype.type_fields[this._type];t&&t.length&&this._quoteApi.quoteSetFields(t),this.fieldsSent.resolve()},o.prototype.onSymbolData=function(t){var e=t.symbolname,i=this._throttledSymbolData[e];i||(i=this._throttledSymbolData[e]={fnDispatch:TradingView.throttle(this.dipatchSymbolData.bind(this),this.options.throttleTimeout)}),i.cache?$.extend(!0,i.cache,t):i.cache=t,i.fnDispatch(e)},o.prototype.dipatchSymbolData=function(t){var e,i,o=this._symbol_data[t],n=this._throttledSymbolData[t].cache;if(delete this._throttledSymbolData[t].cache,this._symbol_data[t]){$.extend(!0,o,n);for(e in this._subscriptions)i=this._subscriptions[e],i[t]&&i[t].forEach(function(t){t(o,n)})}},o.prototype.subscribe=function(t,e,i){var o,n;return this._connected?(this._subscriptions[t]=this._subscriptions[t]||{},o=this._subscriptions[t],e=[].concat(e),n=[],e.forEach(function(t){this._symbol_data[t]?(o&&o[t]||this._symbol_data[t].subscribers_count++,this._symbol_data[t].values&&i(this._symbol_data[t],this._symbol_data[t])):(this._symbol_data[t]={subscribers_count:1},n.push(t)),o[t]=o[t]||[],o[t].push(i),o[t].fast=!0},this),void(n.length&&(this._quoteApi.quoteAddSymbols(n,{forcePermission:!0}),this._delayUpdateFastSymbols()))):void this._delayed_subscriptions.push(arguments)},o.prototype.unsubscribe=function(t,e,i){var o,n=this._subscriptions[t];n&&(n[e]&&i?(o=n[e].indexOf(i),~o&&n[e].splice(o,1),n[e].length||delete n[e]):delete n[e]),n&&0===Object.keys(n).length&&delete this._subscriptions[t],this._symbol_data.hasOwnProperty(e)&&(n&&!n[e]&&this._symbol_data[e].subscribers_count--,this._symbol_data[e].subscribers_count||(delete this._symbol_data[e],this._quoteApi.quoteRemoveSymbols([e]),this._delayUpdateFastSymbols()))},o.prototype.setFastSymbols=function(t,e){var i,o;if(this._subscriptions[t]){i=this._subscriptions[t];for(o in i)i[o].fast=e.indexOf(o)!==-1}this._delayUpdateFastSymbols()},o.prototype._updateFastSymbols=function(){if(this._connected){var t=this._fastSymbols();0===t.length?this._quoteApi.quoteHibernateAll():this._quoteApi.quoteFastSymbols(t)}},o.prototype._delayUpdateFastSymbols=o.prototype._updateFastSymbols,o.prototype._fastSymbols=function(){var t,e,i,o=[];for(t in this._subscriptions){e=this._subscriptions[t];for(i in e)e[i].fast&&o.push(i)}return o=TradingView.uniq(o)},o.prototype.formatter=function(t){function e(t){var e=new s(t.pricescale,t.minmov,t.fractional,t.minmove2);return"forex"==t.type&&(e.lastCharSup=!0),e}function i(t){return t&&null!=t.pricescale&&null!=t.minmov&&null!=t.fractional&&null!=t.minmove2}var o,n=this;return this._waitingForFormatters[t]?this._waitingForFormatters[t]:(o=new Promise(function(o,s){if(n._formatterValuesCache[t])o(e(n._formatterValuesCache[t]));else{var r=TradingView.guid();n.subscribe(r,[t],function(a){a.error&&(n._waitingForFormatters[t]=null,s(a.error)),i(a.values)&&(n._waitingForFormatters[t]=null,n._formatterValuesCache[t]=a.values,o(e(a.values)),n.unsubscribe(r,t))})}}),this._waitingForFormatters[t]=o,o)},TradingView.QuoteSessionMultiplexer=o,void 0!==e&&e&&e.exports&&(e.exports=o)}).call(e,i(32),i(2)(t))},function(t,e,i){(function(t){"use strict";function e(t){this._chartApi=t,this._sessionid="qs_"+TradingView.randomHash(),this._sessionstarted=!1}e.prototype.destroy=function(){this._sessionstarted&&(this._chartApi.quoteDeleteSession(this._sessionid),this._sessionid=null,this._sessionstarted=!1)},e.prototype.connected=function(){return this._chartApi.connected()},e.prototype.connect=function(t){this._globalHandler=t,this._chartApi.createSession(this._sessionid,this),this._chartApi.connect()},e.prototype.disconnect=function(){this._chartApi.disconnect()},e.prototype.quoteAddSymbols=function(t,e){t=[].concat(t),e&&e.forcePermission&&(t=t.concat({flags:["force_permission"]})),this._chartApi.quoteAddSymbols(this._sessionid,t)},e.prototype.quoteRemoveSymbols=function(t){this._chartApi.quoteRemoveSymbols(this._sessionid,t)},e.prototype.quoteFastSymbols=function(t){this._chartApi.quoteFastSymbols(this._sessionid,t)},e.prototype.quoteSetFields=function(t){this._chartApi.quoteSetFields(this._sessionid,t)},e.prototype.onMessage=function(t){switch(t.method){case"connected":this._sessionstarted||(this._chartApi.quoteCreateSession(this._sessionid),this._sessionstarted=!0);break;case"disconnected":this._sessionstarted=!1;break;case"critical_error":}this._globalHandler(t)},e.prototype.quoteHibernateAll=function(t){this._chartApi.quoteHibernateAll(this._sessionid)},TradingView.QuoteSession=e,void 0!==t&&t&&t.exports&&(t.exports=e)}).call(e,i(2)(t))},function(t,e){"use strict";window.onload=function(){function t(){function t(t){function e(t){return t.height>10&&t.width>10}function i(t){function e(t,e){return t>=0&&t<=e}var i=t[0].getBoundingClientRect(),o=t.position(),n=[o.top,o.left,o.top+i.height,o.left+i.width],s=$(window);return e(n[0],s.height())&&e(n[1],s.width())&&e(n[2],s.height())&&e(n[3],s.width())}return 1!==t.length?1:t.is(":visible")?"visible"!==t.css("visibility")?3:"none"===t.css("display")?4:1!=t.css("opacity")?5:t.css("z-index")<0?6:e(t[0].getBoundingClientRect())?i(t)?0:8:7:2}function e(t){var e,i=t.find("a");return 1===i.length&&(e=i.attr("href"),e.indexOf("tradingview.com")>=0)}function i(i){var o=i.find(".tv-link"),n=t(o);return 0===n&&e(o)}function o(e){var i=e.find(".text"),o=t(i);return 0===o&&i.text().indexOf("TradingView")>=0}var n,s=$(".onchart-tv-logo"),r=t(s);if(1===r)s=$(".onchart-custom-logo"),r=t(s),0!==r||i(s)||(r=9);else if(0===r){if(n=s.find("img.solid"),1!==n.length)return 1;r=t(n),0!==r||e(s)?0!==r||o(s)||(r="B"):r="A"}return r}function e(){try{var t=/^(192|172|10)\.[0-9][0-9][0-9]\.[0-9][0-9][0-9]\.[0-9][0-9][0-9]/;return t.test(location.hostname)||/^.*((?:\.local)|localhost)$/.test(location.hostname)}catch(e){return!1}}location.hostname.indexOf(".")>=0&&!e()&&setTimeout(function(){try{var e=t();window.ga&&0!==e&&ga("send","event","s",e)}catch(i){}},3e4)}},function(t,e,i){(function(e,o,n){"use strict";function s(t){function i(t,e){var i,o,n=[],s=r[pt].count;for(i=0;i<s;i++)n.push(rt[i].chartWidget.state(t,e));return o={layout:pt,charts:n},_t.value()&&(o.symbolLock=1),ft.value()&&(o.intervalLock=1),h.hideAllDrawings().value()&&(o.hideAllDrawings=!0),o}function s(t){var e,i=$.Deferred(),o=[],n=r[pt].count;for(e=0;e<n;e++)o.push(rt[e].chartWidget.asyncState(t));return $.when.apply($,o).then(function(){var t,e={charts:[]};for(t=0;t<arguments.length;t++)e.charts.push(arguments[t]);i.resolve(e)}),i}function u(){var t,e,i,o,n,s;if(X&&X(K),t=ct||{},ct={width:K.width(),height:K.height()},e=K[0],window.self!==window.top&&e.offsetWidth<e.clientWidth&&e.getBoundingClientRect().width<100&&(i=Math.round(100*e.getBoundingClientRect().width),o=Math.round(100*e.getBoundingClientRect().height),ct={width:i,height:o}),n=!1,t.height===ct.height&&t.width===ct.width&&dt||(n=!0),n)if(U)_(ht);else for(s=0;s<dt.count;s++)_(s)}function _(t){var e,i=rt[t];i&&(e=U?r.s.sizer(0,ct,it,ot):dt.sizer(t,ct,it,ot),rt[t].wrap.css({width:Math.max(e.width||0,0),height:Math.max(e.height||0,0),top:Math.max(e.top||0,0),left:Math.max(e.left||0,0)}),i.metrics&&i.metrics.width===e.width&&i.metrics.height===e.height||(i.metrics=e,i.chartWidget&&i.chartWidget.resize()))}function f(){for(var t=0;t<rt.length;t++)rt[t].chartWidget.resizeSeriesControlUI()}function g(){for(var t=0;t<rt.length;t++)rt[t].chartWidget.tickSeriesControlClock()}function m(t){var e,i,o,s;return t=$.extend({chartWidgetCollection:et,isActive:0===rt.length},t||{}),i=$(document.createElement("div")).addClass("chart-container").appendTo(K).css({position:"absolute",overflow:"hidden"}),i.on("mousedown touchstart",function(){nt.setValue(e)}),o=rt.length,s={wrap:i},rt.push(s),_(o),t.jqParent=i,s.chartWidget=e=new a(t),et.firstWidgetInitialized||e.chartWidgetInitialized.subscribe(null,function(){try{p.sendEvent("chart_widget_initialized")}catch(t){}et.firstWidgetInitialized=!0,f()},!0),et.createLogo&&(e.createLogo=et.createLogo,n.enabled("move_logo_to_main_pane")||e.withModel(e,function(){e.createLogo(null,e._jqMainDiv),e.adaptOnChartLogo()})),t.containsData?e.finishInitWithoutConnect():e.connect(),y(),w(),e}function v(t,e){var i,o,n,s;c.emit("layout_about_to_be_changed",t),pt=t,U=e,q.setValue(U),t in r||(t="s"),dt=r[t],i=dt.count,ct={width:K.width(),height:K.height()};for(o=0;o<i||o<rt.length;o++)n=e?ht===o:o<i,n?(rt[o]?(K.append(rt[o].wrap),rt[o].chartWidget.isDetached=!1,s=ut.shift(),s&&rt[o].chartWidget.loadContent(s.content)):m($.extend({},j,ut.shift()||(nt.value()?{content:nt.value().state()}:null)||{},0===o||_t.value()?{}:{defSymbol:null})),rt[o].wrap.toggleClass("multiple",i>1),_(o)):rt[o]&&(rt[o].chartWidget.isDetached=!0,rt[o].wrap.detach());y(),c.emit("layout_changed")}function y(){var t,e=Math.min(dt.count,rt.length)-1;return e<0?void nt.deleteValue():(t=ht,t<0&&(t=0),t>e&&(t=e),void nt.setValue(rt[t].chartWidget))}function w(){var t,e;for(t=rt.length;t--;)e=t===ht,rt[t].wrap.toggleClass("active",e).toggleClass("inactive",!e)}function b(){return $.grep(rt,function(t){return!t.chartWidget.isDetached}).sort(function(t,e){var i=t.metrics.top,o=e.metrics.top,n=t.metrics.left,s=e.metrics.left;return i===o?n<s?-1:n>s?1:0:i<o?-1:1})}function S(){var t,e,i,o,n=et.layout.value();"s"!==n&&(t=r[n].count,q.value()||(at=b()),e=lt+1,i=at[e],!i||e>t?(i=at[0],lt=0):lt=e,nt.setValue(i.chartWidget),o=q.value(),o&&v(n,!0))}function T(t){var e,i,o,n;tt!==t&&(tt&&(tt.modelCreated().unsubscribe(null,C),e=tt.model(),e&&(i=e.mainSeries().properties(),i.style.unsubscribe(null,x),o=e.model(),o.onSelectedSourceChanged().unsubscribe(null,P),tt=null)),t&&(n=t.model(),n?C(n):t.modelCreated().subscribe(null,C),tt=t))}function C(t){var e,i=t.mainSeries().properties();i.style.subscribe(null,x),x(i.style),e=t.model(),e.onSelectedSourceChanged().subscribe(null,P),P(t.selectedSource())}function x(t){Z.setValue(t.value())}function P(t){Q.setValue(t)}function L(t){var e,i,o,n;if(t!==_t.value()){if(l.UndoHistory.beginUndoMacro("Symbol Lock"),t)for(e=nt.value(),i=e.getSymbol(),o=0;o<rt.length;o++)n=rt[o].chartWidget,n!==e&&n.getSymbol()!==i&&n.setSymbol(i);l.UndoHistory.setWatchedValue(_t,t,"Symbol Lock"),l.UndoHistory.endUndoMacro()}}function k(t){var e,i,o,n;if(t!==ft.value()){if(l.UndoHistory.beginUndoMacro("Interval Lock"),t)for(e=nt.value(),i=e.getResolution(),o=0;o<rt.length;o++)n=rt[o].chartWidget,n!==e&&n.getResolution()!==i&&n.setResolution(i);l.UndoHistory.setWatchedValue(ft,t,"Resolution Lock"),l.UndoHistory.endUndoMacro()}}function E(t){_t.value()?I(t):nt.value().setSymbol(t)}function I(t){var e,i,o=!1;for(e=0;e<rt.length;e++)i=rt[e].chartWidget,(i.model().mainSeries().properties().symbol.value()!==t||n.enabled("same_data_requery"))&&(o||(l.UndoHistory.beginUndoMacro("Change Symbol"),o=!0),i.setSymbol(t));o&&l.UndoHistory.endUndoMacro()}function A(t){var e,i,o;if(ft.value()){for(e=!1,i=0;i<rt.length;i++)o=rt[i].chartWidget,o.model().mainSeries().properties().interval.value()!==t&&(e||(l.UndoHistory.beginUndoMacro("Change Resolution"),e=!0),o.setResolution(t));e&&l.UndoHistory.endUndoMacro()}else nt.value().setResolution(t)}function V(t){var e,i,o;if(t&&t.onlyActiveChart||U)return{layout:"s",hidpiRatio:window.hidpiCanvasRatio||1,charts:[nt.value().images()]};for(e=[],i=dt.count,o=0;o<rt.length&&o<i;o++)e.push(rt[o].chartWidget.images());return{layout:pt,hidpiRatio:window.hidpiCanvasRatio||1,charts:e}}function M(){var t,e=[];for(t=0;t<rt.length&&t<dt.count;t++)e=e.concat(rt[t].chartWidget.tags());return e=$.unique(e),e=$.map(e,function(t){return t.toLowerCase().replace(/\W+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")})}function D(t,e,i){var o,n,s,r;if(i||vt&&!U)for(o=dt.count,n=0;n<rt.length&&n<o;n++)s=rt[n].chartWidget,s!==e&&(r=s.model(),r&&r.model().setExternalPosition(t))}function B(){return rt.forEach(function(t){t.chartWidget.destroy()})}function O(){G.id.setValue(void 0),G.uid.setValue(void 0),G.name.setValue(void 0)}function R(){var e={snapshotUrl:t.snapshotUrl},i=n.enabled("show_dialog_on_snapshot_ready")?TradingView.getImageOfChart:TradingView.getImageOfChartSilently;i(this,e,function(t){J.fire(t)})}function z(){for(var t=r[pt].count;t<rt.length;t++)rt[t].chartWidget.destroy();rt.splice(r[pt].count)}function N(t){for(var e=0;e<rt.length;e++)rt[e].chartWidget.applyOverrides(t)}function F(t){return n.enabled("charting_library_base")?t:("s"!=t&&TradingView.trackGoProFeature("multipleCharts"),"s"===t||window.user&&user.is_pro||j.containsData||st?t:(TVDialogs.showGoProDialog({feature:"multipleCharts"}),"s"))}function H(t){if(ut=[],t){t.charts||(t={layout:"s",charts:[t]}),pt=F(t.layout||"s");for(var e=0;e<t.charts.length;e++)ut.push({content:t.charts[e]});t.symbolLock&&_t.setValue(!0),t.intervalLock&&ft.setValue(!0),t.hideAllDrawings&&gt.setValue(!0)}W.setValue(pt),v(pt,U),h.hideAllDrawings().setValue(gt.value()),ut.splice(0,ut.length)}var W,U,q,j,Y,G,K,X,J,Z,Q,tt,et=this,it=2,ot=0,nt=new e,st=!1,rt=[],at=[],lt=0,ht=0,ct=null,dt=null,pt="s",ut=[],_t=new e((!1)),ft=new e((!1)),gt=new e((!1)),mt=new e(TVSettings.getBool("chart.syncCrosshair",!0)),vt=mt.value();mt.subscribe(function(t){t=!!t,vt=t,TVSettings.setValue("chart.syncCrosshair",t)}),W=new e(pt),U=!1,q=new e(U),t=t||{},"padding"in t&&(it=t.padding),"edge"in t&&(ot=t.edge),j=t.widgetOptions||{},j.readOnly&&(st=!0),Y=t.metaInfo||{},G={id:new e(Y.id),name:new e(Y.name),description:new e(Y.description),username:new e(Y.username),uid:new e(Y.uid)},K=$(t.jqParent).eq(0),X=t.onResize,J=new o,this.updateLayout=u,Z=new e,Q=new e,Z.subscribe(function(t){var e,i,o=nt.value();o&&(e=o.model(),e&&(i=e.mainSeries().properties().style,i.value()!==t&&e.setChartStyleProperty(i,t,"Change Series Style")))}),tt=null,nt.subscribe(function(t){var e,i;if(t){for(i=rt.length;i--;)if(rt[i].chartWidget===t){e=i;break}if(!isFinite(e))throw Error("Cannot make detached ChartWidget active");if(ht!==e){for(ht=e,w(),at.length&&(lt=at.indexOf(rt[ht])),i=rt.length;i--;)rt[i].chartWidget.setActive(!1);t.setActive(!0)}T(t)}},{callWithLast:!0}),$.extend(this,{createChartWidget:m,getAll:function(){return rt.map(function(t){return t.chartWidget})},destroy:B,layout:W,maximizeCurrentChart:q,activeChartWidget:nt,activeChartStyle:Z,selectedSource:Q.readonly(),metaInfo:G,state:i,asyncState:s,readOnly:function(){return st},lock:{symbol:_t,setSymbolLockWithUndo:L,interval:ft,setIntervalLockWithUndo:k,crosshair:mt},setSymbol:E,setResolution:A,updateLayout:u,resizeWidgetsUI:f,images:V,tags:M,syncCrosshair:D,setSymbolAll:I,clearChartMetaInfo:O,onfeatures:t.onfeatures,takeScreenshot:R,onScreenshotReady:function(){return J},loadContent:H,purgeUnusedWidgets:z,applyOverrides:N,switchChart:S,createLogo:null}),H(t.onfeatures?void 0:t.content),W.subscribe(function(t){w(),v(t,!1),at=b(),lt=at.indexOf(rt[ht])}),W.hook=function(t){return t===this.value()?t:F(t)},st&&(W.writeLock=!0),q.subscribe(function(t){t!==U&&(at=b(),v(pt,t))}),setInterval(g,1e3),$(window).on("resize",u),$(document).on("onUpdate",u),n.enabled("datasource_copypaste")&&(d.init(),t.globalEvents&&($(window).on("appclip:paste",function(t){nt.value().onAppClipboardPaste(),t.preventDefault()}),$(window).on("appclip:copy",function(t){nt.value().onAppClipboardCopy(),t.preventDefault()}),$(window).on("appclip:cut",function(t){nt.value().onAppClipboardCut(),t.preventDefault()})))}var r=i(284),a=i(285),l=i(287),h=i(74),c=i(271),d=i(289),p=i(57);t.exports=s}).call(e,i(45),i(32),i(1))},function(t,e){"use strict";t.exports={s:{title:"1 chart",count:1,sizer:function(t,e,i,o){return{width:e.width-o-o,height:e.height-o-o,top:o,left:o}}}}},function(t,e,i){(function(e,o,n){"use strict";function s(t){var i,n,s,r,a,l,h,c,d,p,u,_,g,m,y,w,b,S,x,P=this;this._startSpinner(t.jqParent),T.init(),i=this,T.tool.subscribe(function(t){var e,o,n,s;i._model&&(e=t,i._model.model().setCurrentTool(e),TradingView.isMobile.any()&&(o=i._paneWidgets[0],v.isLineTool(e)&&"LineToolBrush"!==e?(n=.5*i._model.model().timeScale().width(),s=.5*o._state.defaultPriceScale().height(),i._model.model().setCurrentPosition(n,s,o._state),o._updateTooltip(n,s)):o._hideTooltip()),i._model&&TradingView.isMobile.any()&&i._model.model().crossHairSource().updateAllViews())}),n=function(t){var e=P._model.model(),i=e.timeScale().points().roughIndex(t);return i},T.createdLineTool.subscribe(null,function(t){var e,i,o,s=P._model.model();t.model!=s&&(e=P._model.model().mainSeries().symbol(),e==t.symbol&&(i=s.paneForSource(P._model.model().mainSeries()),o={index:n(t.point.timeStamp),price:t.point.price},P._model.createLineTool(i,o,t.linetool,t.properties,t.linkKey)))}),T.continuedLineTool.subscribe(null,function(t){var e,i,o,s=P._model.model();t.model!=s&&(e={index:n(t.point.timeStamp),price:t.point.price},i=P._model.lineBeingCreated(),i&&(o=P._model.model().coninueCreatingLine(e,t.envState,!!t.finalState),o&&t.finalState&&i.restoreExternalPoints(t.finalState)))}),T.cancelledLineTool.subscribe(null,function(t){var e=P._model.model();t.model!=e&&P._model.model().cancelCreatingLine()}),T.startedMovingLineTool.subscribe(null,function(t){var e,i,o,s=P._model.model();t.model!=s&&(e=P._model.model().mainSeries().symbol(),e==t.symbol&&(i=s.dataSources().filter(function(e){return e.linkKey==t.linkKey})[0],i&&i.isActualSymbol()&&(o={index:n(t.point.timeStamp),price:t.point.price},P._model.model().startMovingSource(i,o))))}),T.movedLineTool.subscribe(null,function(t){var e,i=P._model.model();t.model!=i&&i.sourceBeingMoved()&&i.sourceBeingMoved().linkKey==t.linkKey&&(e={index:n(t.point.timeStamp),price:t.point.price},P._model.model().moveSource(e))}),T.finishedMovingLineTool.subscribe(null,function(t){var e=P._model.model();t.model!=e&&e.sourceBeingMoved()&&P._model.model().endMovingSource(!!t.finalState)}),T.startedChangingLineTool.subscribe(null,function(t){var e,i,o,s=P._model.model();t.model!=s&&(e=P._model.model().mainSeries().symbol(),e==t.symbol&&(i=s.dataSources().filter(function(e){return e.linkKey==t.linkKey})[0],i&&i.isActualSymbol()&&(o={index:n(t.point.timeStamp),price:t.point.price},P._model.model().startChangingLinetool(i,o,t.pointIndex,{}))))}),T.changedLineTool.subscribe(null,function(t){var e,i=P._model.model();t.model!=i&&i.lineBeingEdited()&&i.lineBeingEdited().linkKey==t.linkKey&&(e={index:n(t.point.timeStamp),price:t.point.price},P._model.model().changeLinePoint(e))}),T.finishedChangingLineTool.subscribe(null,function(t){var e,i=P._model.model();t.model!=i&&(e=i.dataSources().filter(function(e){return e.linkKey==t.linkKey})[0],i.lineBeingEdited()&&P._model.model().endChangingLinetool(!!t.finalState),e&&e.isActualSymbol()&&t.finalState&&e.restoreExternalPoints(t.finalState))}),T.removedLineTool.subscribe(null,function(t){var e,i=P._model.model();t.model!=i&&(e=i.dataSources().filter(function(e){return e.linkKey==t.linkKey})[0],e&&P._model.model().removeSource(e))}),T.finishedLineTool.subscribe(null,function(t){var e,i=P._model.model();t.model!=i&&(e=i.dataSources().filter(function(e){return e.linkKey==t.linkKey})[0],e&&P._model.model().finishLineTool())}),T.changedLineStyle.subscribe(null,function(t){var e,i=P._model.model();t.model!=i&&(e=i.dataSources().filter(function(e){return e.linkKey==t.linkKey})[0],e&&(e.properties().merge(t.state),e.propertiesChanged()))}),T.restoredLineToolState.subscribe(null,function(t){var e,i=P._model.model();t.model!=i&&(e=i.dataSources().filter(function(e){return e.linkKey==t.linkKey})[0],e&&i.restoreLineToolState(e,t.state))}),T.restoredLineTool.subscribe(null,function(t){var e=P._model.model();t.model!=e&&e.restoreSource(t.state.restorePane,t.state.paneIndex,t.state.paneState,t.state.sourceState,t.state.priceScaleName)}),T.copiedLineTool.subscribe(null,function(t){var e,i,o,s,r,a,l=P._model.model();if(t.model!=l&&(e=P._model.model().mainSeries().symbol(),e==t.symbol)){if(i=l.paneForSource(P._model.model().mainSeries()),o=t.points[0],s={index:n(o.time_t),price:o.price},r=l.createLineTool(i,s,t.linetool,null,t.linkKey),l.lineBeingCreated())for(a=1;a<t.points.length;a++)s={index:n(t.points[a].absolute_time),price:t.points[a].price},a!=t.points.length-1||"LineToolBrush"!=t.linetool&&"LineToolGhostFeed"!=t.linetool||l.finishLineTool(!0),l.coninueCreatingLine(s,{},a<t.points.length-1,!0);r.restoreExternalPoints({points:t.points,interval:t.state.interval}),r.properties().merge(t.state),r.restoreData&&r.restoreData(t),r.propertiesChanged()}}),this._options=t=t||{},s=t.jqParent,r=t.sizeFunc,a=t.content,l=t.readOnly,h=t.containsData,c=t.onWidget,d=t.onCmeWidget,d&&TradingView.logWarn("[ChartWidget] 'onCmeWidget' option is depricated"),
p=t.widgetCustomer,u=t.timezone,_=t.withDateRanges,g=t.hideSymbolSearch,m=t.defSymbol,y=t.defInterval,w=t.defExtendedHours,b=$.inArray(t.defStyle,$.map($.grep(Object.keys(f),function(t){return/^STYLE_\w+/.test(t)}),function(t){return f[t]}))!==-1,S=b?t.defStyle:void 0,this._chartWidgetCollection=t.chartWidgetCollection||null,this._withDateRanges=(void 0===_?!l:!!_)&&e.enabled("timeframes_toolbar"),this._jqParent=void 0!==s?s:$(document.body),this._setContent(a),this._readOnly=l,this._containsData=h,this._defSymbol=m,this._defInterval=y,this._defStyle=S,this._onWidget=!!c,this._onWidget&&(d?this._widgetCustomer="cme":p&&(this._widgetCustomer=p)),this._sizeFunc=r||function(){var t=P._jqParent.width(),e=P._jqParent.height(),i=P._jqParent[0];return window.self!==window.top&&i.offsetWidth<i.clientWidth&&i.getBoundingClientRect().width<100&&(t=Math.round(100*i.getBoundingClientRect().width),e=Math.round(100*i.getBoundingClientRect().height)),new z(0,0,t,e-(P._withDateRanges?22:0))},this._hideSymbolSearch=g,this._jqMainDiv=null,this._rect=this._sizeFunc(),this._jqMainTable=null,this._paneWidgets=[],this._paneSeparators=[],this._timeAxisWidget=null,this._frameTime=30,this._model=null,this._metaInfo={},x=this._contentSeriesProperties(),x&&(m=x.symbol,y=x.interval),void 0===C||C.isValid(y)||(y=void 0),this._properties=new M("chartproperties"),this._properties.mainSeriesProperties.merge(defaults("chartproperties.mainSeriesProperties")),this._properties.mainSeriesProperties.merge({visible:!0,symbol:m?m:DEFAULT_SYMBOL,shortName:"",timeframe:"",onWidget:this._onWidget,interval:y||"D",style:S,extendedHours:w,lineStyle:{styleType:TradingView.factoryDefaults("chartproperties.mainSeriesProperties.lineStyle.styleType")}}),this._containsData&&this._properties.mainSeriesProperties.merge({showCountdown:!1}),u&&TradingView.timezoneIsAvailable(u)&&this._properties.timezone.setValue(u),this._tagsChanged=new o,this._modelCreated=new o,this._disconnected=new o,this._reconnectBailout=new o,this._connected=new o,this._redrawPanes=new o,this.chartWidgetInitialized=new o,this._studiesMetaData=[],this._studiesMigrations=[],this._chartSession=new B(ChartApiInstance),this.lhsPriceAxisWidthChanged=new o,this.rhsPriceAxisWidthChanged=new o,this.createLogo=null,this._isActive=t.isActive}function r(t){return t.description_localized=$.t(t.description,{context:"study"}),t}var a=i(286),l=i(361),h=i(287),c=i(362),d=i(291),p=i(357),u=i(363),_=(i(139),i(270).BarsMarksContainer),f=i(77),g=i(353),m=i(141).Study,v=i(67).LineDataSource,y=i(364),w=(i(372).alertBandFactory,i(132)),b=w.Action,S=w.ActionSeparator,T=i(74),C=i(43),x=i(373),P=i(374),L=i(375),k=(i(104),i(106)),E=i(369),I=i(44),A=i(49),V=i(41),M=(i(46),i(73).DefaultProperty),D=i(47).availableTimezones,B=i(102),O=(i(105),i(107)),R=i(50),z=(R.addCanvasTo,R.Rect),N=R.Size,F=R.setAbsoluteRect;s.prototype.refreshMarks=function(){this.model().barsMarksSources().map(function(t){t.refreshData()})},s.prototype.clearMarks=function(){this.model().barsMarksSources().map(function(t){t.clearMarks()})},s._nextMetadataId=1,s.prototype._setAlertsStudiesList=function(t){this._alertsStudiesList=$.map($.grep(t,function(t){var e,i=t.plots||[];for(e=0;e<i.length;e++)if("line"===i[e].type)return!0;return!1}),function(t){return t.id})},s.prototype.canCreateAlertForDataSource=function(t){if(!e.enabled("alerts"))return!1},s._filterAuthorizedMetaInfo=function(t){var e,i,o,n,s=[];for(e=0;t&&e<t.length;++e)i=t[e],o=O.parseIdString(i.id),n=o.productId,pro.hasPackage(n)&&s.push(i);return s},s.prototype.privateMetaInfo=function(t){if(t){var e=new t(O.CURRENT_METAINFO_FORMAT_VERSION);return e.generateMetaInfo()}return[]},s.prototype._onScriptSources=function(t,e){var i,o,n,s,r,a,l,h;if(TradingView.logDebugChart("ChartWidget _onScriptSources called"),!this.onWidget()){for(i=null,o=0;o<e.length;++o)if(n=e[o],n.id.startsWith("Script@tv-scripting-")){i=O.parseIdString(n.id).version;break}if(null!=i){for(this.studyScriptingPkgVers=i,s=0,r=0,o=0;o<t.length;++o)if(a=t[o],TradingView.isFeatureEnabled("backtesting")||!a.isTVScriptStrategy){l=a.scriptName,s++;try{h=O.createMetaInfoStub(a,i),e.push(h)}catch(c){TradingView.logError("Could not process script (skipped): "+l+" ("+c.message+")"),r++}}TradingView.logDebugChart("User's Pine Scripts loaded "+s+", skipped "+r)}else TradingView.logError("Could not find tv-scripting package in metadata response")}for(o=0;o<e.length;o++)O.addStudyMetaInfo(this._studiesMetaData,e[o]);this._init(),this.chartWidgetInitialized.fire(),TradingView.logDebugChart("ChartWidget _onScriptSources done")},s.prototype._init=function(){var t=this;this._containsData||this._content&&this._content.timeScale&&!this._content.timeScale.m_lastVisibleBar&&(this._content.timeScale.m_rightOffset=this._properties.timeScale.rightOffset.value()),this.model()&&this.model().mainSeries().clearData(),this.initColors(),this._makeDefaultGui(),this._makeDefaultModel(),this._checkObsoleteTimezone(),this._chartSession&&this._chartSession.connected()&&this._model.restart(),this._content&&(this.initColors(),this._updateGui(),this.update()),t._model.mainSeries().marketStatus.subscribe(function(e){t.indicatorImage&&t._updateDataAndMarketStatus(e,t._model.mainSeries().status())},{callWithLast:!0}),this._resizeHandler=function(){this._rect=this._sizeFunc(),F(this._jqMainDiv,this._rect),this._adjustSize(),this._model&&this._model.mainSeries().requestMoreData(),this.paint(),this.resizeSeriesControlUI(),this.checkCompactMode(),this.resizeIndicator()}.bind(this),this._resizeHandler(),this._jqMainDiv.appendTo(this._jqParent),this._spinner&&(this._spinner.stop(),delete this._spinner),$(window).keydown(function(t){27==t.which&&t.preventDefault()}),this._containsData||this._jqMainDiv.mousewheel(function(t,i,o,n){var s,r,a,l,h,c;if((TradingView.onWidget()||!parent||parent===window||!parent.IS_DEMO_PAGE)&&this.model()&&!this.noScroll&&!this.model().timeScale().isEmpty())return s=t.pageX-5,r=this._paneWidgets[0].lhsPriceAxisWidget.size.w,a=this._paneWidgets[0].rhsPriceAxisWidget.size.w,l=this._timeAxisWidget.size.w,r&&(s=Math.max(0,s-r)),s=Math.min(s,l),h=e.enabled("right_bar_stays_on_scroll")?1:2*(s/l-.5),c=Math.min(1,Math.abs(n)),n>0?this.model().zoomIn(h,c):n<0&&this.model().zoomOut(h,c),o&&this.model().scrollChart(o*-80),!1}.bind(this)),this._initBarsMarksSources(),TradingView.isFeatureEnabled("esdindicatorfeature")&&this.initESDTimelineWidget(),this.setAutoScaleOnSymbolChange(),this.readOnly()||this._hideSymbolSearch||V.registerDialogKeypressHandler(this),this.adaptOnChartLogo()},s.prototype._checkObsoleteTimezone=function(){var t=this._properties.timezone.value();TradingView.timezoneIsAvailable(t)||this._properties.timezone.setValue(TradingView.getTzByObsoleteName(t))},s.prototype._initBarsMarksSources=function(){var t=this;this.withModel(this,function(){this.model().barsMarksSources().map(function(e){e.onNeedRepaint.subscribe(t,t.paint)})})},s.prototype.initESDTimelineWidget=function(){new ESDTimelineWidget(this)},s.prototype.setAutoScaleOnSymbolChange=function(){this.withModel(this,function(){this.model().mainSeries().properties().symbol.listeners().subscribe(this,function(){(!this.model().mainSeries()instanceof f||!this.model().mainSeries().properties().lockScale.value())&&this.model().mainSeries().priceScale().setAutoScale(!0)})})},s.prototype.initColors=function(){this._properties.paneProperties.background.listeners().subscribe(this,s.prototype.setBackgroundColor),this._properties.paneProperties.vertGridProperties.color.listeners().subscribe(this,s.prototype.redrawPanes),this._properties.paneProperties.horzGridProperties.color.listeners().subscribe(this,s.prototype.redrawPanes),this._properties.scalesProperties.lineColor.listeners().subscribe(this,s.prototype.setScaleLineColor),this._properties.scalesProperties.textColor.listeners().subscribe(this,s.prototype.setScaleTextColor)},s.prototype.paneWidgets=function(){return this._paneWidgets},s.prototype.paneByCanvas=function(t){for(var e=0;e<this._paneWidgets.length;e++)if(this._paneWidgets[e].canvas===t||this._paneWidgets[e].top_canvas===t)return this._paneWidgets[e];return null},s.prototype.paneByState=function(t){for(var e=0;e<this._paneWidgets.length;e++)if(this._paneWidgets[e]._state===t)return this._paneWidgets[e];return null},s.prototype.priceAxisByCanvas=function(t){var e,i,o;for(e=0;e<this._paneWidgets.length;e++)if(i=this._paneWidgets[e],o=i.priceAxisByCanvas(t))return o;return null},s.prototype.timeAxisByCanvas=function(t){return t===this._timeAxisWidget.canvas||t===this._timeAxisWidget.top_canvas?this._timeAxisWidget:null},s.prototype.properties=function(){return this._properties},s.prototype.emulateCriticalError=function(){this._chartSession.removeSeries(-1,null)},s.prototype.readOnly=function(){return this._readOnly},s.prototype.onDisconnected=function(){return this._disconnected},s.prototype.onReconnectBailout=function(){return this._reconnectBailout},s.prototype.onConnected=function(){return this._connected},s.prototype.onRedrawPanes=function(){return this._redrawPanes},s.prototype.modelCreated=function(){return this._modelCreated},s.prototype.setResolution=function(t){if(!this._model)return void this._properties.mainSeriesProperties.merge({interval:t});var e=this._model.mainSeries().properties().interval;this._model.setScreenChartProperty(e,t,this,$.t("Change Resolution"))},s.prototype.getResolution=function(){return this._model?this._model.mainSeries().properties().interval.value():this._properties.mainSeriesProperties.interval.value()},s.prototype.addSymbol=function(t,i){var o=this.model(),n=o.studiesMetaData(),s="study_Overlay@tv-basicstudies",r=e.enabled("use_overrides_for_overlay")&&TradingView.defaultProperties[s]&&TradingView.defaultProperties[s].style,a=r||(o.mainSeries().properties().style.value()==f.STYLE_CANDLES?f.STYLE_BARS:f.STYLE_CANDLES),l={inputs:{symbol:t},style:a},h=n.filter(function(t){return"Overlay@tv-basicstudies"==t.id})[0];o.insertStudy(h,l,i)},s.prototype.addSymbolDialog=function(){TVDialogs.showAddSymbolDialog(this,{overlayOption:!0,callback:this.addSymbol.bind(this)})},s.prototype.updateActions=function(){function t(t){function e(){TradingView.showThemeSaveDialog(h._model)}var i,o;c.applyColorTheme.subActions||(c.applyColorTheme.subActions=[]),i=c.applyColorTheme.subActions,i.splice(0,i.length),is_authenticated&&(o=new b({text:$.t("Save As...")}),o.callbacks().subscribe(null,e),i.push(o),i.push(new S)),t&&t.length?$.each(t,function(t,e){function o(t){return function(){var e=$.t("Do you really want to delete __themename__ theme?",{themename:t?'"'+t+'"':""});return TVDialogs.showConfirm($.t("Theme"),e,function(){$.post("/remove-theme/",{name:t}).error(function(t){TradingView.logError(t.responseText)}),TradingView.getThemesList.invalidate()}),this._parentMenu._parentMenuItem._parentMenu.destroy(),!1}}var n=new b({text:$.t(e)});n.callbacks().subscribe(null,function(){$.getJSON("/theme/?themeName="+encodeURIComponent(e),function(t){h.model().model().restoreTheme(JSON.parse(t.content))})}),is_authenticated&&(n.deleteButton={action:o(n.text)}),i.push(n)}):i.push(new b({text:$.t("No color themes saved"),enabled:!1}))}function e(){var t,e,i=studyTemplates.plainList("custom"),o=studyTemplates.plainList("default");c.applyStudyTemplate.subActions||(c.applyStudyTemplate.subActions=[]),t=c.applyStudyTemplate.subActions,t.splice(0,t.length),e=new b({text:studyTemplates._SAVE_AS_TITLE}),e.callbacks().subscribe(studyTemplates,studyTemplates.showSaveAsDiaolg),t.push(e),t.push(new S),i.length||o.length?(i.length&&($.each(i,function(e,i){function o(t){return function(){return studyTemplates.deleteStudyTemplate(t),this._parentMenu._parentMenuItem._parentMenu.destroy(),!1}}var n=new b({text:i});n.callbacks().subscribe(studyTemplates,function(){this.applyStudyTemplate(i)}),n.deleteButton={action:o(n.text)},t.push(n)}),o.length&&t.push(new S)),$.each(o,function(e,i){var o=new b({text:i});o.callbacks().subscribe(studyTemplates,function(){this.applyStudyTemplate(i)}),t.push(o)})):t.push(new b({text:$.t("No study templates saved"),enabled:!1}))}var i,o,n,s,r,a,l,h=this,c=this.actions(),d=this._model.dataSources(),p=!1,u=!1;for(i=0,o=d.length;i<o;i++)n=d[i],TradingView.isInherited(n.constructor,v)&&n.isUserDeletable()&&(p=!0),TradingView.isInherited(n.constructor,m)&&n.removeByRemoveAllStudies()&&(u=!0);this._readOnly||(c.paneRemoveAllStudies&&c.paneRemoveAllStudies.setEnabled(u),c.paneRemoveAllDrawingTools&&c.paneRemoveAllDrawingTools.setEnabled(p),c.paneRemoveAllStudiesDrawingTools&&c.paneRemoveAllStudiesDrawingTools.setEnabled(u||p)),t(TradingView.getThemesList(t)),window.studyTemplates&&(e(),studyTemplates.refreshStudyTemplateList(e)),s=this,r=[],a=D,l=function(t){return t.id===s.model().model().properties().timezone.value()},a.forEach(function(t){if(!t.separator){var e=new b({text:t.title,checkable:!0,checked:l(t)});e.callbacks().subscribe(this,function(){s.model().setProperty(s.model().model().properties().timezone,t.id,"Changed Time Zone")}),r.push(e)}},this),c.applyTimeZone.subActions=r,c.addToWatchlist.text=$.t("Add {0} To Watchlist").format(this.getSymbol(!0)),c.addToTextNotes&&(c.addToTextNotes.text=$.t("Add Text Note For {0}").format(this.getSymbol(!0))),this.updateActionForIntradayOnly(c.sessionBreaks)},s.prototype.actions=function(){return this._actions||this._setActions(),this._actions},s.prototype._setActions=function(){var t,o,n,r,a,l,c,d,p,u,_,f,g,m,v,y,w,C,x,P,E,M,D,B,O,R,z,N,F,H,W,U,q,j,Y,G,K,X,J,Z,Q,tt,et,it,ot,nt,st,rt,at,lt,ht,ct,dt,pt,ut,_t=i(295).ActionBinder,ft=this,gt=[];if(!this._readOnly)for(gt=[new b({text:$.t("Eraser"),callbackContext:"eraser"}),new S,new b({text:$.t("Trend Line"),callbackContext:"LineToolTrendLine"}),new b({text:$.t("Horizontal Line"),callbackContext:"LineToolHorzLine"}),new b({text:$.t("Vertical Line"),callbackContext:"LineToolVertLine"}),new b({text:$.t("Arrow"),callbackContext:"LineToolArrow"}),new b({text:$.t("Ray"),callbackContext:"LineToolRay"}),new b({text:$.t("Extended"),callbackContext:"LineToolExtended"}),new b({text:$.t("Parallel Channel"),callbackContext:"LineToolParallelChannel"}),new S,new b({text:$.t("Pitchfork"),callbackContext:"LineToolPitchfork"}),new b({text:$.t("Schiff Pitchfork"),callbackContext:"LineToolSchiffPitchfork"}),new b({text:$.t("Pitchfan"),callbackContext:"LineToolPitchfan"}),new b({text:$.t("Gann Square"),callbackContext:"LineToolGannSquare"}),new b({text:$.t("Gann Fan"),callbackContext:"LineToolGannFan"}),new b({text:$.t("Fib Retracement"),callbackContext:"LineToolFibRetracement"}),new b({text:$.t("Trend-Based Fib Extension"),callbackContext:"LineToolTrendBasedFibExtension"}),new b({text:$.t("Fib Speed Resistance Fan"),callbackContext:"LineToolFibSpeedResistanceFan"}),new b({text:$.t("Fib Time Zone"),callbackContext:"LineToolFibTimeZone"}),new b({text:$.t("Circle Lines"),callbackContext:"LineToolCircleLines"}),new b({text:$.t("Fib Circles"),callbackContext:"LineToolFibCircles"}),new b({text:$.t("Fib Speed Resistance Arcs"),callbackContext:"LineToolFibSpeedResistanceArcs"}),new S,new b({text:$.t("Rectangle"),callbackContext:"LineToolRectangle"}),new b({text:$.t("Ellipse"),callbackContext:"LineToolEllipse"}),new b({text:$.t("Triangle"),callbackContext:"LineToolTriangle"}),new b({text:$.t("Polyline"),callbackContext:"LineToolPolyline"}),new b({text:$.t("Arc"),callbackContext:"LineToolArc"}),new S,new b({text:$.t("Text"),callbackContext:"LineToolText"}),new b({text:$.t("Anchored Text"),callbackContext:"LineToolTextAbsolute"}),new b({text:$.t("Balloon"),callbackContext:"LineToolBalloon"}),new b({text:$.t("Price Label"),callbackContext:"LineToolPriceLabel"}),new S,new b({text:$.t("Elliott Wave Subminuette"),callbackContext:"LineToolElliottSubminuette"}),new b({text:$.t("Elliott Wave Minor"),callbackContext:"LineToolElliottMinor"}),new b({text:$.t("Elliott Wave Circle"),callbackContext:"LineToolElliottCircle"}),new b({text:$.t("Elliott Minor Retracement"),callbackContext:"LineToolElliottMinorRetr"}),new b({text:$.t("Elliott Major Retracement"),callbackContext:"LineToolElliottMajorRetr"}),new S,new b({text:$.t("Brush"),callbackContext:"LineToolBrush"}),new S,new b({text:$.t("Forecast"),callbackContext:"LineToolPrediction"})],ft=this,t=function(t){T.tool.setValue(t.callbackContext())},o=0;o<gt.length;o++)gt[o].callbacks().subscribe(null,t);n=new b({text:$.t("Add Alert"),shortcut:"Alt+A"}),r=new b({text:$.t("Reset Chart"),shortcut:"Alt+R"}),r.callbacks().subscribe(this,this.GUIResetScales),a=new b({text:$.t("Undo"),shortcut:"ctrl+z"}),a.callbacks().subscribe(null,function(){TradingView.trackEvent("GUI","Undo"),h.UndoHistory.undo()}),a.disable(),l=new b({text:$.t("Redo"),shortcut:"ctrl+y"}),l.callbacks().subscribe(null,function(){TradingView.trackEvent("GUI","Redo"),h.UndoHistory.redo()}),l.disable(),h.UndoHistory.undoStack().onChange().subscribe(this,this.updateUndoRedo),h.UndoHistory.redoStack().onChange().subscribe(this,this.updateUndoRedo),c=new b({text:$.t("Color Theme")}),d=new b({text:$.t("TimeZone")}),p=new b({text:$.t("Change Symbol..."),shortcut:$.t("Any Symbol"),doNotBindShortcut:!0}),TVSettings.setValue("symboledit.dialog_last_entry",""),p.callbacks().subscribe(this,function(){V.showDialog({callback:this.setSymbol.bind(this)})}),u=new b({text:$.t("Change Interval..."),shortcut:$.t("Any Number"),doNotBindShortcut:!0}),u.callbacks().subscribe(this,function(){new A({callback:function(t){I.interval.setValue(t)}}).show()}),TradingView.onWidget()||(_=new b({text:$.t("Add To Watchlist"),shortcut:"Alt+W"}),f=new b({text:$.t("Add To Text Notes"),shortcut:"Alt+N"}),_.callbacks().subscribe(this,function(){var t,e,i=widgetbar.setPage("base");for(e=0;e<i.widgets.length;e++)if("watchlist"==i.widgets[e].type){t=i.widgets[e].widgetObject;break}t&&t.addHighlight(this.getSymbol())}),f.callbacks().subscribe(this,function(){var t=this;runOrSignIn(function(){TradingView.bottomWidgetBar.toggleWidget("text_notes",!0),TradingView.bottomWidgetBar._widgets.text_notes.addNote(null,t.getSymbol(!0),t.getSymbol())},{source:"Add text note in chart context menu"})})),g=new b({text:$.t("Insert Study Template")}),m=new b({shortcut:"ctrl+alt+q",text:$.t("Reset Scale")}),m.callbacks().subscribe(null,function(t){ft.model().resetTimeScale()}),v=new b({text:$.t("Insert Drawing Tool"),subActions:gt}),y=new b({text:$.t("Remove All Indicators")}),w=new b({text:$.t("Remove All Drawing Tools")}),C=new b({text:$.t("All Indicators And Drawing Tools")}),x=new b({text:$.t("Insert Indicator..."),shortcut:"/"}),P=new b({text:$.t("Script Editor...")}),E=new b({text:$.t("Compare or Add Symbol...")}),M=new b({text:$.t("Compare...")}),D=new b({text:$.t("Objects Tree...")}),B=new b({text:$.t("Properties..."),callback:function(t,e){ft.showChartProperties()}}),O=new b({text:$.t("Scales Properties...")}),R=new b({text:$.t("Timezone/Sessions Properties...")}),z=new b({text:$.t("Lock/Unlock")}),z.callbacks().subscribe(this,s.prototype.toggleLockSelectedObject),N=new b({text:$.t("Hide")}),N.callbacks().subscribe(this,s.prototype.hideSelectedObject),F=new b({text:$.t("Format...")}),F.callbacks().subscribe(this,s.prototype.editSelectedObject),H=new b({text:$.t("Source Code...")}),H.callbacks().subscribe(this,this.openSelectedObjectSource),W=new b({text:$.t("Left Axis"),checkable:!0}),W.binder=new _t(W,this._properties.scalesProperties.showLeftScale,this.model(),$.t("Show Left Scale")),U=new b({text:$.t("Right Axis"),checkable:!0}),U.binder=new _t(U,this._properties.scalesProperties.showRightScale,this.model(),$.t("Show Right Scale")),this._properties.scalesProperties.showLeftScale.listeners().subscribe(this,s.prototype._updateScalesActions),this._properties.scalesProperties.showRightScale.listeners().subscribe(this,s.prototype._updateScalesActions),q=new b({text:$.t("Scale Price Chart Only"),checkable:!0}),q.binder=new _t(q,this._properties.scalesProperties.scaleSeriesOnly,this.model(),$.t("Scale Price Chart Only")),j=this.model().model(),this._properties.scalesProperties.scaleSeriesOnly.listeners().subscribe(null,function(){j.recalculateAllPanes(),j.invalidate(new k(k.FULL_UPDATE))}),Y=new b({text:$.t("Drawings Toolbar"),checkable:!0}),window.sideToolbar&&(Y.binder=new _t(Y,window.sideToolbar.visible,this.model(),$.t("Drawings Toolbar"))),G=new b({text:$.t("Favorite Drawings Toolbar"),checkable:!0}),window.sideToolbar&&window.sideToolbar.favoriteDrawingToolbar&&(G.binder=new _t(G,window.sideToolbar.favoriteDrawingToolbar.visibleProperty,this.model(),$.t("Drawings Toolbar"))),K=new b({text:$.t("Magnet Mode"),checkable:!0}),K.binder=new _t(K,T.properties().magnet,this.model(),"Magnet"),X=new b({text:$.t("Stay In Drawing Mode"),checkable:!0}),X.binder=new _t(X,T.properties().stayInDrawingMode,this.model(),$.t("Stay In Drawing Mode")),J=new b({text:$.t("Sync drawings to all charts"),checkable:!0}),J.binder=new _t(J,T.properties().drawOnAllCharts,this.model(),"SyncDrawings"),Z=new b({text:$.t("Lock All Drawing Tools"),checkable:!0}),Z.binder=new _t(Z,T.lockDrawings(),this.model(),$.t("Lock drawings"),function(t){t||this.binder.setValue(!this.binder.value()),T.lockDrawings().setValue(this.binder.value())}.bind(Z)),Q=new b({text:$.t("Hide All Drawing Tools"),checkable:!0}),Q.binder=new _t(Q,T.hideAllDrawings(),this.model(),$.t("Hide All Drawing Tools"),function(t){t||this.binder.setValue(!this.binder.value()),T.hideAllDrawings().setValue(this.binder.value())}.bind(Q)),tt=new b({text:$.t("Hide Marks On Bars"),checkable:!0}),tt.binder=new _t(tt,T.hideMarksOnBars(),this.model(),$.t("Hide Marks On Bars"),function(t){t||this.binder.setValue(!this.binder.value()),T.hideMarksOnBars().setValue(this.binder.value())}.bind(tt)),et=new b({text:$.t("Extended Hours"),checkable:!0}),et.binder=new _t(et,this.model().mainSeries().properties().extendedHours,this.model(),$.t("Change Extended Hours")),it=new b({text:$.t("Symbol Last Value"),checkable:!0,checked:!1}),it.binder=new _t(it,this.properties().scalesProperties.showSeriesLastValue,this.model(),$.t("Show Symbol Last Value")),ot=new b({text:$.t("Symbol Labels"),checkable:!0,checked:!1}),ot.binding=new _t(ot,this.properties().scalesProperties.showSymbolLabels,this.model(),"Undo Show Symbol Labels"),nt=new b({text:$.t("Indicator Last Value"),checkable:!0,checked:!1}),nt.binder=new _t(nt,this.properties().scalesProperties.showStudyLastValue,this.model(),$.t("Show Indicator Last Value")),st=new b({text:$.t("Indicator Labels"),checkable:!0,checked:!1}),st.binding=new _t(st,this.properties().scalesProperties.showStudyPlotLabels,this.model(),"Undo Show Indicator Labels"),rt=new b({text:$.t("Countdown"),checkable:!0,checked:!1}),rt.binder=new _t(rt,this.model().mainSeries().properties().showCountdown,this.model(),$.t("Show Countdown")),at=new b({text:$.t("Symbol Info..."),checkable:!1}),at.callbacks().subscribe(null,function(){var t=ft.model().mainSeries().symbol(),e=ft.model().mainSeries().symbolInfo();L(t,{symbolInfo:e})}),ft.onWidget()||(lt=new b({text:$.t("Snapshot"),shortcut:"Alt+s"}),lt.callbacks().subscribe(null,function(){ft._chartWidgetCollection.takeScreenshot()}),ht=new b({text:$.t("Publish idea"),shortcut:"Alt+p"}),ht.callbacks().subscribe(null,function(){TradingView.Common.publishChart()}),ct=new b({text:$.t("Switch to the next chart"),shortcut:"Tab"}),ct.callbacks().subscribe(null,function(){ft._chartWidgetCollection.switchChart()})),this._actions={chartProperties:B,timeScaleReset:m,chartReset:r,compareOrAdd:E,compare:M,scalesProperties:O,tmzProperties:R,paneObjectTree:D,insertIndicator:x,insertDrawingTool:v,applyColorTheme:c,applyStudyTemplate:g,symbolSearch:p,showSymbolInfoDialog:at,changeInterval:u,seriesHide:N,studyHide:N,lineToggleLock:z,lineHide:N,showLeftAxis:W,showRightAxis:U,scaleSeriesOnly:q,drawingToolbarAction:Y,favoriteDrawingToolbar:G,magnetAction:K,stayInDrawingModeAction:X,syncModeAction:J,lockDrawingsAction:Z,hideAllDrawingsAction:Q,hideAllMarks:tt,applyTimeZone:d,extendedHours:et,showCountdown:rt,showSeriesLastValue:it,showSymbolLabelsAction:ot,showStudyLastValue:nt,showStudyPlotNamesAction:st,undo:a,redo:l,viewSourceCode:H,takeScreenshot:lt},TradingView.onWidget()||(this._actions.addToWatchlist=_),!TradingView.onWidget()&&e.enabled("text_notes")&&(this._actions.addToTextNotes=f),e.enabled("charting_library_base")||(TradingView.onWidget()||(this._actions.gotoDate=gotoDateAction),this._actions.scriptEditor=P),this.createSessionBreaksActions(),this.readOnly()||(dt=new b({text:$.t("Remove"),shortcut:"Del"}),dt.callbacks().subscribe(this,function(){var t;this._chartWidgetCollection&&(t=this._chartWidgetCollection.activeChartWidget.value()),t||(t=this),t.removeSelectedSource()}),pt=new b({text:$.t("Stop syncing drawing")}),pt.callbacks().subscribe(this,function(){var t;this._chartWidgetCollection&&(t=this._chartWidgetCollection.activeChartWidget.value()),t||(t=this),t.unlinkSelectedLine()}),ut=new b({text:$.t("Sync drawing to all charts")}),ut.callbacks().subscribe(this,function(){var t;this._chartWidgetCollection&&(t=this._chartWidgetCollection.activeChartWidget.value()),t||(t=this),t.copyLineToOtherCharts()}),this._actions.insertDrawingTool=v,this._actions.paneRemoveAllStudies=y,this._actions.paneRemoveAllDrawingTools=w,this._actions.paneRemoveAllStudiesDrawingTools=C,this._actions.seriesRemove=dt,this._actions.studyRemove=dt,this._actions.lineRemove=dt,this._actions.lineUnlink=pt,this._actions.lineCopyToCharts=ut,this._actions.format=F,this._actions.lockDrawingsAction=Z,this._actions.hideAllDrawingsAction=Q,this._actions.hideAllMarks=tt,this._actions.paneRemoveAllStudies.callbacks().subscribe(this,s.prototype.removeAllStudies),this._actions.paneRemoveAllDrawingTools.callbacks().subscribe(this,s.prototype.removeAllDrawingTools),this._actions.paneRemoveAllStudiesDrawingTools.callbacks().subscribe(this,s.prototype.removeAllStudiesDrawingTools)),this._actions.paneObjectTree.callbacks().subscribe(this,s.prototype.showSourceProperties),this._actions.chartProperties.callbacks().subscribe(this,s.prototype.showChartProperties),this._actions.insertIndicator.callbacks().subscribe(this,s.prototype.showIndicators),this._actions.scriptEditor&&this._actions.scriptEditor.callbacks().subscribe(this,s.prototype.showScriptEditor),this._actions.compareOrAdd.callbacks().subscribe(this,s.prototype.showCompareOrAdd),this._actions.compare.callbacks().subscribe(this,s.prototype.showCompareOrAdd),this._actions.scalesProperties.callbacks().subscribe(this,s.prototype.showScalesProperties),this._actions.tmzProperties.callbacks().subscribe(this,s.prototype.showTimezoneProperties),this._updateScalesActions()},s.prototype.executeActionByName=function(t){function e(t){var e,o;for(e in i._actions)if(o=i._actions[e],o.text.toLowerCase()===t.toLowerCase())return o;return null}var i=this,o=e(t);return o?void o.callbacks().fire():void TradingView.logWarn("Unknown action: "+t)},s.prototype.executeActionById=function(t){if(t in this._actions){var e=this._actions[t];e.checkable&&e.setChecked(!e.checked),this._actions[t].callbacks().fire(e)}else console.warn("Unknown action id: "+t)},s.prototype._updateScalesActions=function(){if(this._actions){for(var t=0;t<this._paneWidgets.length;t++)this._paneWidgets[t].updateScalesVisibility();this._timeAxisWidget.updatePriceScalesVisibility(),this._update(new k(k.FULL_UPDATE))}},s.prototype.removeAllStudies=function(){this._model.removeAllStudies()},s.prototype.removeAllDrawingTools=function(){this._model.removeAllDrawingTools()},s.prototype.removeAllStudiesDrawingTools=function(){this._model.removeAllStudies(),this._model.removeAllDrawingTools()},s.prototype.model=function(){return this._model},s.prototype.connect=function(){this._handler=function(t){this._onData(t)}.bind(this),this._chartSession.connect(this._handler)},s.prototype.finishInitWithoutConnect=function(){this._chartSession.disable(),this._init(),this.chartWidgetInitialized.fire()},s.prototype.update=function(){if(this._model){for(var t=0;t<this._paneWidgets.length;t++)this._paneWidgets[t].update();this._timeAxisWidget.update()}},s.prototype.paint=function(t){t||(t=new k(k.FULL_UPDATE));for(var e=0;e<this._paneWidgets.length;e++)this._paneWidgets[e].paint(t.invalidateForPane(e),!1);this._timeAxisWidget&&this._timeAxisWidget.paint(t.fullInvalidation()),this._redrawPanes.fire()},s.prototype._makeDefaultGui=function(){this._makeChartWidget(),this._makeLoadingScreen(),this._makeMasterTable(),this._makeTimeAxisWidget(),this._adjustSize(),this._updateScalesActions(),$("*",this._jqMainTable).selectable(!1),this.update(),this.paint()},s.prototype.widget=function(){return this._jqMainDiv},s.prototype.restoreState=function(t,e){this._adjustSize();var i=this._model.restoreState(this._content,e);this._setActions(),i.lines_limit_exceeded&&TVDialogs.showLineToolsWarning(i.line_tools_count,this,this._model)},s.prototype.redrawPanes=function(t){for(var e=0;e<this._paneWidgets.length;e++)this._paneWidgets[e].paint();this._redrawPanes.fire()},s.prototype.adaptOnChartLogo=function(t){e.enabled("adapt_onchart_logo_background")&&(t=t||this._properties.paneProperties.background.value(),$(this._jqMainDiv).find(".onchart-custom-logo .wrapper .inner").css("background-color",TradingView.generateColor(t,50)),$(this._jqMainDiv).find(".onchart-tv-logo .wrapper .inner").css("background-color",TradingView.generateColor(t,20)))},s.prototype.setBackgroundColor=function(t){this.adaptOnChartLogo(t.value()),this.scaleBackgroundColor=t.value();for(var e=0;e<this._paneWidgets.length;e++)this._paneWidgets[e].paint(),this._paneWidgets[e].setCursorForTool();this.update(),this.paint()},s.prototype.setScaleLineColor=function(t){this.scaleLineColor=t.value(),$.each(this._paneSeparators,function(){this.update()}),this.update(),this.paint()},s.prototype.setScaleTextColor=function(t){this.scaleTextColor=t.value(),this.update(),this.paint()},s.prototype._update=function(t){var e;if(this.performance&&t.start(),t&&t.fullInvalidation()!==k.FULL_UPDATE){if(t.fullInvalidation()===k.LIGHT_UPDATE){for(this._timeAxisWidget.update(),e=0;e<this._paneWidgets.length;e++)this._paneWidgets[e].statusWidget().update();this._dataWindowWidget&&this._dataWindowWidget.update()}else if(t.fullInvalidation()===k.UPDATE_CURSOR_ONLY){for(e=0;e<this._paneWidgets.length;e++)this._paneWidgets[e].statusWidget().update();this._dataWindowWidget&&this._dataWindowWidget.update()}}else{for(this._model?this._updateGui():this._adjustSize(),this._timeAxisWidget.update(),e=0;e<this._paneWidgets.length;e++)this._paneWidgets[e]._state=this._model.panes()[e],this._paneWidgets[e].statusWidget().updateLayout();this._dataWindowWidget&&this._dataWindowWidget.fullUpdate()}this.paint(t),this.performance&&(t.end(),this.performance.newChartDraw(t))},s.prototype._createVolumeIfNeeded=function(){e.enabled("create_volume_indicator_by_default")&&this._options.addVolume&&(!this._content||!this._content.loading&&e.enabled("charting_library_base"))&&this._model.mainSeries().onSymbolResolved().subscribe(this,function(){var t=this;setTimeout(function(){var i,o,n,s=t._model.model().mainSeries().symbolInfo();s&&(i=!s.has_no_volume,!t.containsVolume()&&i?(o=TradingView.factoryDefaults("chartproperties.volumePaneSize"),t.insertStudy("Volume@tv-basicstudies",!1,e.enabled("volume_force_overlay"),void 0,{paneSize:o})):!i&&t.containsVolume()&&(n=t.model().dataSources().filter(function(t){return t instanceof m&&"Volume"==t.metaInfo().shortId})[0],t._model.model().removeSource(n)))},0)},!e.enabled("charting_library_base"))},s.prototype._makeDefaultModel=function(){function t(){return c(a._chartSession,function(t){if(!(t instanceof k))throw Error("Invalid mask");a._invalidateMask?a._invalidateMask.merge(t):a._invalidateMask=t,a._draw_planned||(a._draw_planned=!0,requestAnimationFrame(i))},a._properties,a.readOnly(),n,a._studiesMetaData,a._studiesMigrations,a)}function i(){a._draw_planned=!1,a._inLoadingState||a._invalidateMask&&(a._invalidateMask=a._update(a._invalidateMask))}var o,n,r,a=this;if(this._content&&this._content.timeScale.points&&(o=this._content.timeScale.points.items[0],
n={startDate:o}),!this._studiesMetaData)throw Error("Cannot create chart model: studies metainfo is absent");e.enabled("lean_chart_load")?this._model=this._model||t():this._model=t(),this._createVolumeIfNeeded(),this._content?(this.restoreState(this._content,this._containsData),e.enabled("chart_content_overrides_by_deafults")&&(this._defSymbol&&this.setSymbol(this._defSymbol),this._defInterval&&this.setResolution(this._defInterval),void 0!==this._defStyle&&this.setSeriesStyle(this._model.mainSeries(),this._defStyle))):this._setActions(),this._model.onTagsChanged().subscribe(this,s.prototype.onModelTagsChanged),this._updateGui(),this._modelCreated.fire(this._model),this._tagsChanged.fire(),a=this,r=this._model.mainSeries(),this._model.lineCancelled().subscribe(this,this.onLineCancelled),r.onSymbolNotPermitted().subscribe(null,function(t){r.properties().symbol.setValue(t)}),this._options.handleSessionErrors&&(r.chartTypeNotPermitted.subscribe(null,function(){TradingView.trackGoProFeature("kagiRenko"),r.properties().interval.setValue("D"),a._options.muteSessionErrors||TVDialogs.showGoProDialog({feature:"kagiRenko"})}),r.intradaySpreadNotPermitted.subscribe(null,function(){r.properties().interval.setValue("D"),a._options.muteSessionErrors||TVDialogs.showGoProDialog({feature:"intradaySpread"})}),r.customIntervalNotPermitted.subscribe(null,function(){r.properties().interval.setValue("D"),a._options.muteSessionErrors||TVDialogs.showGoProDialog({feature:"customIntervals"})}),r.intradayExchangeNotPermitted.subscribe(null,function(){if(r.properties().interval.setValue("D"),!a._options.muteSessionErrors){var t=r.symbolInfo().listed_exchange;TVDialogs.showGoProDialog({feature:"intradayExchange",exchangesButton:window.user.is_pro&&"pro_realtime_trial"!=window.user.pro_plan,exchange:t})}}),r.requestingIntradayWhenNotSupported.subscribe(null,function(){r.properties().interval.setValue("D"),a._options.muteSessionErrors||TVDialogs.showIntervalMismatchDialog()}),r.requestingResolutionWhenNotSupported.subscribe(null,function(t){r.properties().interval.setValue(t)}),a._options.muteSessionErrors||r.onExtendedHoursNotPermitted().subscribe(null,function(){TradingView.trackGoProFeature("extendedHours"),TVDialogs.showGoProDialog({feature:"extendedHours"})}))},s.prototype._updateGui=function(){this._model&&(this._makePaneWidgetsAndSeparators(),this._makeTimeAxisWidget(),$("*",this._jqMainTable).selectable(!1),this._adjustSize())},s.prototype.setVisibleTimeRange=function(t,e,i){this._chartSession.setVisibleTimeRange(t,e,i)},s.prototype._dateRangeResolutions=function(){var t=ChartApiInstance.availableTimeFrames(this._model.mainSeries().symbolInfo(),this._model.mainSeries().status());return t||[]},s.prototype._makeChartWidget=function(){this._jqMainDiv=$(document.createElement("div")),this._jqMainDiv.addClass("chart-widget"),F(this._jqMainDiv,this._rect);var t=this._withDateRanges&&(!e.enabled("lean_chart_load")||!this._chartControlsBar);t&&(this._chartControlsBar=$(document.createElement("div")).attr("class","chart-controls-bar").appendTo(this._jqParent),this._seriesControlWidget=new P({parent:this._chartControlsBar,chartWidget:this})),(this._options.controlBar||e.enabled("control_bar"))&&(this._controlBarNavigation=new x(this,this._jqMainDiv,(!0))),this._containsData||this.createIndicatorImage()},s.prototype.navigationButtonsController=function(){return this._navigationButtonsController||(this._navigationButtonsController=new g(this)),this._navigationButtonsController},s.prototype._makeLoadingScreen=function(){if(e.enabled("lean_chart_load")){if(this.screen)return;this.screen=new s.LoadingScreen(this,this._jqParent)}else this.screen=new s.LoadingScreen(this,this._jqMainDiv)},s.prototype.setSymbol=function(t,i){if(this._model){var o=this._model.mainSeries();if(!i&&o.symbolSameAsCurrent(t)&&!e.enabled("same_data_requery"))return;this._model.setSelectedSource(null),this._model.setScreenChartProperty(o.properties().symbol,t,this,"Change Symbol",e.enabled("same_data_requery"))}else this._properties.mainSeriesProperties.merge({symbol:t})},s.prototype.getSymbol=function(t){var e;return e=this._model?this._model.mainSeries().properties():this._properties.mainSeriesProperties,e?t&&e.shortName&&e.shortName.value()?e.shortName.value():e.symbol.value():""},s.LoadingScreen=function(t,e){this._cw=t,this.$element=$('<div class="chart-loading-screen">'),this.$shield=$('<div class="chart-loading-screen-shield">').appendTo(this.$element),this.$element.appendTo(e),this._showed=!1,this._cw.withModel(this,this._connectToModel)},s.LoadingScreen.prototype._connectToModel=function(){this._cw.model().mainSeries().onDataLoaded().subscribe(this,function(t){switch(t.method){case"symbol_error":"permission denied"!==t.params[1]&&this.hide();break;case"series_error":e.enabled("hide_loading_screen_on_series_error")&&this.hide();break;case"series_completed":this.hide()}})},s.LoadingScreen.prototype.show=function(){return this._cw._inLoadingState=!0,this._showed||this._cw.isDetached||(this._showed=!0,this._show()),$.Deferred().resolve()},s.LoadingScreen.prototype._show=function(){var t=this._cw.properties().paneProperties.background.value();this.$shield.css("background",t),this.$element.addClass("fade")},s.LoadingScreen.prototype.hide=function(){delete this._cw._inLoadingState,this._showed&&this._hide()},s.LoadingScreen.prototype._hide=function(){this._showed=!1,this.$element.removeClass("fade")},s.LoadingScreen.prototype.$canvas=null,s.LoadingScreen.prototype.context=null,s.prototype._makeMasterTable=function(){this._jqMainTable=$(document.createElement("table")),this._jqMainTable.appendTo(this._jqMainDiv),this._jqMainTable.addClass("chart-markup-table"),this._jqMainTable.attr("cellpading","0"),this._jqMainTable.attr("cellspacing","0")},s.prototype.unsetActivePaneWidget=function(){this.activePaneWidget=!1},s.prototype.setActivePaneWidget=function(t){this.activePaneWidget=t},s.prototype.isMaximizedPane=function(){return!!this._maximizedPaneWidget},s.prototype.toggleMaximizePane=function(t){if(!(this._paneWidgets.length<2)){this._maximizedPaneWidget?(this._maximizedPaneWidget=null,this._paneSeparators.forEach(function(t){t.show()})):(this._maximizedPaneWidget=t,this._paneSeparators.forEach(function(t){t.hide()}));for(var e=this._paneWidgets.length;e--;)this._paneWidgets[e].updateControls();this._adjustSize(),this.updateIndicatorImagePosition()}},s.prototype._makePaneWidgetsAndSeparators=function(){var t,e,i,o,n=this._model.panes(),s=n.length,r=this._paneWidgets.length;for(t=s;t<r;t++)e=this._paneWidgets.pop(),e.jqRow.remove(),e.jqRow.find("*").remove(),e.destroy(),i=this._paneSeparators.pop(),i&&i.jqRow.remove();for(t=r;t<s;t++)e=new a(this,n[t],this._onWidget),e.onMouseLeave=this.unsetActivePaneWidget.bind(this),e.onMouseEnter=this.setActivePaneWidget.bind(this),this._paneWidgets.push(e),t>0&&(i=new l(this,t-1,t),this._paneSeparators.push(i),this._timeAxisWidget?i.jqRow.insertBefore(this._timeAxisWidget.jqRow):i.jqRow.appendTo(this._jqMainTable)),this._timeAxisWidget?e.jqRow.insertBefore(this._timeAxisWidget.jqRow):e.jqRow.appendTo(this._jqMainTable);for(t=0;t<s;t++)o=n[t],e=this._paneWidgets[t],e.state()!==o&&e.setState(o);for(t=s;t--;)this._paneWidgets[t].updateControls()},s.prototype._makeTimeAxisWidget=function(){this._timeAxisWidget||(this._timeAxisWidget=new u(this,this._onWidget),this._timeAxisWidget.jqRow.appendTo(this._jqMainTable))},s.prototype.insertStudyOrShowDialog=function(t){var e,o,n;this.isSymbolicStudy(t)?(e=defaults("study_"+t.id).description,TVDialogs.showAddSymbolDialog(this,{title:e,okButtonTitle:$.t("Apply"),callback:function(e,i){var o={inputs:{symbol:e}};this.model().insertStudy(t,o,i)}.bind(this)})):this.hasConfirmInputs(t)?(e=defaults("study_"+t.id).description,i(303),TVDialogs.showConfirmInputsDialog(this,t,{title:e,okButtonTitle:$.t("Apply"),callback:function(e){this.model().insertStudy(t,e,!1)}.bind(this)})):m.isPointsBasedStudy(t.id)?(o=m.lineToolNameForPointsBasedStudy(t.id),T.tool.setValue(o)):(n="Volume@tv-basicstudies"==t.id,this.insertStudy(t.id,!0,n))},s.prototype.hasConfirmInputs=function(t){var e,i,o=t.inputs;if(void 0===o)return!1;for(e=0;e<o.length;++e)if(i=o[e],void 0!==i.confirm&&i.confirm)return!0;return!1},s.prototype.isSymbolicStudy=function(t){switch(t.id){case"Overlay@tv-basicstudies":case"CorrelationCoefficient@tv-basicstudies":return!0;default:return!1}},s.prototype.isPointsBasedStudy=function(t){return m.isPointsBasedStudy(t.id)},s.prototype.insertStudy=function(t,e,i,o,n){var s,r=O.findStudyMetaInfo(this._studiesMetaData,t);assert(!r.isTVScriptStubToCompile,"MetaInfo stub is unexpected here!"),s=o?{inputs:o}:{},n&&(s=$.extend(s,n)),e?this._model.insertStudy(r,s,i):this._model.model().insertStudy(r,s,i)},s.prototype.insertStudyStub=function(t){return this.model().insertStudyStub(t)},s.prototype.removeStudyStub=function(t){return this.model().removeStudyStub(t)},s.prototype._adjustSize=function(){var t,e,i,o,n,s,r,a,h=this,c=0,d=0,u=0;$.each(this._paneWidgets,function(){h._maximizedPaneWidget&&h._maximizedPaneWidget!==this||(c=Math.max(this.lhsPriceAxisWidget.optimalWidth(),c),d=Math.max(this.rhsPriceAxisWidget.optimalWidth(),d),u+=this.stretchFactor())}),t=this._rect,e=t.w-c-d,i=this._paneWidgets.length,o=this._paneSeparators.length,n=l.HEIGHT,s=this._timeAxisWidget.optimalHeight(),r=t.h-n*o-s,a=r/u,this._jqMainTable.width(t.w),this._jqMainTable.height(t.h),$.each(this._paneWidgets,function(t){h._model&&(this._state=h._model.panes()[t]);var i=h._maximizedPaneWidget?h._maximizedPaneWidget===this?r:0:Math.max(Math.round(this.stretchFactor()*a),2);this.setPriceAxisSize(p.LHS,new N(c,i)),this.setPriceAxisSize(p.RHS,new N(d,i)),this.setSize(new N(e,i)),h._model&&this.state()&&h._model.setPaneHeight(this.state(),i)}),this._timeAxisWidget.setSize(new N(e,s),new N(c,s),new N(d,s)),this._model&&this._model.setWidth(e),this.maxLhsPriceAxisWidth!==c&&(this.maxLhsPriceAxisWidth=c,this.lhsPriceAxisWidthChanged.fire(c)),this.maxRhsPriceAxisWidth!==d&&(this.maxRhsPriceAxisWidth=d,this.rhsPriceAxisWidthChanged.fire(d))},s.prototype._onData=function(t){switch(t.method){case"connected":this._onConnection();break;case"disconnected":this._onDisconnect();break;case"reconnect_bailout":this._reconnectBailout.fire();break;case"connection_error":this._onConnectionError(t.params[0]);break;case"critical_error":this._disconnected.fire(!0);break;default:this._model.onData(t)}},s.prototype._nextMetadataId=1,s.prototype._onConnection=function(){this._online=!0,this._model?(this._model.restart(),this._updateGui(),this.update(),this.paint(),this._connected.fire()):(e.enabled("charting_library_base")&&this._chartSession.requestMetadata("metadata_"+s._nextMetadataId,function(t){var e,i=t.params[1];for(e=0;e<i.length;++e)O.addStudyMetaInfo(this._studiesMetaData,r(i[e]));this._init(),this.chartWidgetInitialized.fire()}.bind(this)),s._nextMetadataId++)},s.prototype._onDisconnect=function(){this._model&&this._model.disconnect(),this._online=!1,this.update(),this.paint(),this._disconnected.fire()},s.prototype.studiesMetaData=function(){return this._model.studiesMetaData()},s.prototype._onConnectionError=function(t){this._disconnected.fire()},s.prototype.getTimeScale=function(){return this._timeAxisWidget},s.prototype.setSeriesStyle=function(t,e){this._model.setProperty(t.properties().style,e)},s.prototype.showSourceProperties=function(t){new y({chartWidget:this},this._model).show()},s.prototype.showChartProperties=function(t){if(e.enabled("show_chart_property_page"))return t&&t.text==$.t("Properties...")&&TVSettings.setValue("properties_dialog.active_tab.chart",$.t("Style")),new d(this._model.mainSeries(),this._model).show()},s.prototype.showScriptEditor=function(){TradingView.ScriptEditorWidget.open()},s.prototype.showCompareOrAdd=function(){var t=new E(this._chartWidgetCollection);t.show()},s.prototype.showIndicators=function(){window.studyMarket.isVisible()?window.studyMarket.hide():window.studyMarket.show()},s.prototype.showScalesProperties=function(t){var e={selectScales:!0};return new d(this._model.mainSeries(),this._model).show(e)},s.prototype.showTimezoneProperties=function(){return new d(this._model.mainSeries(),this._model).show({selectTmz:!0})},s.prototype.removeSelectedSource=function(){var t=this,e=t._model.selectedSource();!e||e===t._model.mainSeries()||e===t._model.lineBeingCreated()||e instanceof _||(e.hasAlert.value()&&e.isUserDeletable()?TVDialogs.showConfirm($.t("Drawing Alert"),$.t("This drawing is used in alert. If you remove the drawing, the alert will be also removed. Do you want to remove the drawing anyway?"),t._model.removeSelectedSource.bind(t._model)):t._model.removeSelectedSource())},s.prototype.unlinkSelectedLine=function(){var t=this._model.selectedSource();t instanceof v&&this._model.unlinkLine(t)},s.prototype.copyLineToOtherCharts=function(){var t=this._model.selectedSource();t instanceof v&&this._model.copyToOtherCharts(t)},s.prototype.hideSelectedObject=function(){var t=this._model.selectedSource();t&&this._model.setProperty(t.properties().visible,!1,"Hide "+t.title())},s.prototype.toggleLockSelectedObject=function(){var t,e=this._model.selectedSource();e&&(t=e.properties().frozen.value(),this._model.setProperty(e.properties().frozen,!t,(t?$.t("Unlock"):$.t("Lock"))+" "+e.title()))},s.prototype.editSelectedObject=function(t){var e=this._model.selectedSource();if(e)return new d(e,this._model).show()},s.prototype.openSelectedObjectSource=function(t){var e,i=this._model.selectedSource();i&&i.metaInfo&&(e=i.metaInfo(),e&&e.TVScriptSourceCode&&e.scriptIdPart&&TradingView.ScriptEditorWidget&&TradingView.ScriptEditorWidget.open({scriptSource:e.TVScriptSourceCode,scriptIdPart:e.scriptIdPart}))},s.prototype.resetPriceAxisOptimalWidth=function(t){$.each(this._paneWidgets,function(){this.resetPriceAxisOptimalWidth(t)}),this._redrawPanes.fire()},s.prototype.adjustPriceAxisWidth=function(t){this.resetPriceAxisOptimalWidth(t),this._adjustSize()},s.prototype.setPriceAxisVisible=function(t,e){$.each(this._paneWidgets,function(){this.setPriceAxisVisible(t,e)}),this._timeAxisWidget.setStubVisible(t,e),this._adjustSize(),this._redrawPanes.fire()},s.prototype.setTimeAxisVisible=function(t){this._timeAxisWidget.setVisible(t),this._adjustSize()},s.prototype.isTextTool=function(t){switch(t){case"LineToolBalloon":case"LineToolText":case"LineToolTextAbsolute":case"LineToolCallout":case"LineToolNote":case"LineToolNoteAbsolute":return!0}return!1},s.prototype.tags=function(){return this._model?this._model.calculateDefaultTags():[]},s.prototype.state=function(t,e){var i=this._model.state(t,e);return i},s.prototype.asyncState=function(t){return this._model.asyncState(t)},s.prototype.metaInfo=function(){var t=this._metaInfo;return this._model&&(t.systemTags=this._model.calculateDefaultTags()),t},s.prototype.image=function(){var t,e,i,o,n,s,r,a,l=document.createElement("canvas"),h=l.getContext("2d"),c=0,d=this._timeAxisWidget.size.h,p=this.properties().scalesProperties.lineColor.value();for(e=0;e<this._paneWidgets.length;e++)t=this._paneWidgets[e],t&&t.state()&&(t.state().recalculate(!0),0===e&&(c=t.lhsPriceAxisWidget.size.w+t.size.w+t.rhsPriceAxisWidget.size.w),d+=t.size.h);for(d+=this._paneWidgets.length-1,this._update(),i=25,o=5,l.width=c+2*o,l.height=d+i+2*o,h.fillStyle="#F2F5F8",h.fillRect(0,0,l.width,l.height),n=i+o,s=o,r=this.mainSeriesQuotesAndMetainfo(),r.ohlc&&(a="{0} O:{1} H:{2} L:{3} C:{4}".format(r.meta.symbol,r.ohlc[0],r.ohlc[1],r.ohlc[2],r.ohlc[3]),h.fillStyle="#000",h.font="12px Verdana, Arial",h.fillText(a,s,o+15)),e=0;e<this._paneWidgets.length;e++)t=this._paneWidgets[e],h.drawImage(t.lhsPriceAxisWidget.canvas,s,n),h.drawImage(t.canvas,s+t.lhsPriceAxisWidget.size.w,n),t.statusWidget().renderTo(h,s+5,n+5),h.drawImage(t.rhsPriceAxisWidget.canvas,s+t.lhsPriceAxisWidget.size.w+t.size.w,n),n+=t.size.h,e<this._paneWidgets.length-1&&(h.fillStyle=p,h.fillRect(s,n,c,1),n++);return h.drawImage(this._timeAxisWidget.lhsCanvas,s,n),h.drawImage(this._timeAxisWidget.canvas,s+t.lhsPriceAxisWidget.size.w,n),h.drawImage(this._timeAxisWidget.rhsCanvas,s+t.lhsPriceAxisWidget.size.w+t.size.w,n),h.lineWidth=1,h.strokeStyle="#000",h.strokeRect(o+.5,i+o+.5,c-1,d-1),l},s.prototype.images=function(){var t,e,i,o,n,s,r,a,l,h;for(TradingView.printing=!0,t=this._model.selectedSource(),this._model.setSelectedSource(null),e=[],i=0;i<this._paneWidgets.length;i++){for(o=this._paneWidgets[i],o.paint(k.LIGHT_UPDATE,this._onWidget),n=o.image(this._onWidget),n.containsMainSeries=this._paneWidgets[i].containsMainSeries(),n.studies=[],s=o.state().dataSources(),r=0;r<s.length;r++)a=s[r],a instanceof m?a.properties().visible.value()&&a.statusView()&&this.properties().paneProperties.legendProperties.showStudyTitles.value()&&this.properties().paneProperties.legendProperties.showLegend.value()&&n.studies.push(a.statusView().text()):a instanceof f&&this.properties().paneProperties.legendProperties.showLegend.value()&&this.properties().paneProperties.legendProperties.showSeriesTitle.value()&&(n.mainSeriesText=a.statusView().text());e.push(n),i<this._paneWidgets.length-1&&e.push(this._paneSeparators[i].image())}return this._timeAxisWidget.paint(k.LIGHT_UPDATE),l=this._timeAxisWidget.image(),TradingView.printing=!1,this._model.setSelectedSource(t),this._model.invalidate(new k(k.LIGHT_UPDATE)),h=this.mainSeriesQuotesAndMetainfo(),{panes:e,timeAxis:l,colors:{text:this.properties().scalesProperties.textColor.value(),bg:this.properties().paneProperties.background.value(),scales:this.properties().scalesProperties.lineColor.value()},meta:h.meta,ohlc:h.ohlc,quotes:h.quotes}},s.prototype.mainSeriesQuotesAndMetainfo=function(){var t,e,i,o,n,s,r,a=this._model.mainSeries();return a&&(o=function(t){return null==t?"":a.formatter().format(t)+""},n=function(t){return null==t?"":t+""},t={resolution:a.interval(),symbol:a.symbol()},s=a.symbolInfo(),s&&(t.symbol=s.full_name,t.description=s.description,t.exchange=s.exchange),r=a.bars().last(),r&&(e=r.value.slice(1,5).map(o)),a.quoteData&&(i={change:o(a.quoteData.change),changePercent:n(a.quoteData.change_percent),last:o(a.quoteData.last_price)})),{meta:t,ohlc:e,quotes:i}},s.prototype.onTagsChanged=function(){return this._tagsChanged},s.prototype.onModelTagsChanged=function(){this._tagsChanged.fire()},s.prototype.destroy=function(){$(window).unbind("resize",this._resizeHandler),this._model.model().destroy(),this.performance&&this.performance.destroy(),this._chartSession.destroy()},s.prototype.title=function(){return $.t("Chart Properties")},s.prototype.symbolProperty=function(){return this._model.mainSeries().properties().shortName?this._model.mainSeries().properties().shortName:this._model.mainSeries().properties().symbol},s.prototype.loadContent=function(t,i){var o,n,s,r,a,l;for(this.screen.show(),o=this,this.isMaximizedPane()&&this.toggleMaximizePane(),n=o._model.model().dataSources(),s=0;s<n.length;s++)r=n[s],r!=o._model.mainSeries()&&o._model.model().removeSource(r,!0);for(o._jqMainDiv&&(o._jqMainDiv.remove(),o._jqMainDiv=null),o._timeAxisWidget=null,o._paneWidgets=[],o.activePaneWidget=!1,o._model.mainSeries().purgeSymbolInfo(),"undefined"!=typeof trading&&trading.unregisterChartWidget(this),t.loading=!0,o._setContent(t),s=0;s<t.panes.length;++s)for(l=0;l<t.panes[s].sources.length;++l)if(t.panes[s].sources[l].state.symbol){a=t.panes[s].sources[l].state;break}if(!a)throw"An error occured while determining main series ion the chart";o._properties.mainSeriesProperties.merge({visible:!0,symbol:a.symbol,timeframe:"",onWidget:o._onWidget,interval:a.interval||"D",style:a.style}),o._init(),I.interval.setValue(a.interval),h.UndoHistory.clearStack(),o.updateSeriesControlUI(),o.createLogo&&!e.enabled("move_logo_to_main_pane")&&o.createLogo(void 0,this._jqMainDiv)},s.prototype._setContent=function(t){t&&t.panes.forEach(function(t){t.sources=t.sources.filter(function(t){return!!t&&("MainSeries"==t.type||(!t.points||!t.points.some(function(t){return null===t.time_t||!isFinite(t.time_t)})||(TradingView.logNormalChart("Dropped invalid "+t.type+". Reason: non-numeric point time"),!1)))});var e=function(e){return t.sources&&t.sources.some(function(t){return t.id==e})};t.leftAxisSources&&(t.leftAxisSources=t.leftAxisSources.filter(e)),t.rightAxisSources&&(t.rightAxisSources=t.rightAxisSources.filter(e))}),this._content=t},s.prototype._contentSeriesProperties=function(){var t,e,i;if(this._content)for(t=this._content.panes.length;t-- >0;)for(e=this._content.panes[t].sources,i=e.length;i-- >0;)if("MainSeries"===e[i].type)return e[i].state},s.prototype.updateSeriesControlUI=function(){this._seriesControlWidget&&this._seriesControlWidget.updateUI()},s.prototype.tickSeriesControlClock=function(){this._seriesControlWidget&&this._seriesControlWidget.tickClock()},s.prototype.resizeSeriesControlUI=function(){this._seriesControlWidget&&this._seriesControlWidget.resizeUI()},s.prototype.updateUndoRedo=function(){h.UndoHistory.undoStack().isEmpty()?this.actions().undo.setEnabled(!1):this.actions().undo.setEnabled(!0),h.UndoHistory.redoStack().isEmpty()?this.actions().redo.setEnabled(!1):this.actions().redo.setEnabled(!0)},s.prototype.createSessionBreaksActions=function(t){var e,o=i(295).ActionBinder,n=this,s=function(){e=new b({text:$.t("Session Breaks"),checkable:!0}),e.binder=new o(e,n.model().mainSeries().sessionsStudy().properties().graphics.vertlines.sessBreaks.visible,n.model(),"Session Breaks"),n._actions.sessionBreaks=e};n.model().mainSeries().sessionsStudy()?s():n.model().mainSeries().onSessionsStudyCreated().subscribe(n,function(){s()})},s.prototype.updateActionForIntradayOnly=function(t){!t||!t instanceof b||t.setEnabled(!!this.model().mainSeries().isIntradayInterval())},s.prototype.withModel=function(t,e){this.model()?e.call(t):this.modelCreated().subscribe(t,e,!0)},s.prototype.containsVolume=function(){return this.model().dataSources().some(function(t){return t instanceof m&&"Volume"==t.metaInfo().shortId})},s.prototype.containsStudy=function(t){return!!this._model&&this._model.dataSources().some(function(e){if(!(e instanceof m))return!1;var i=e.metaInfo();return i.id===t||i.fullId===t})},s.prototype.containsSessions=function(){return this.model().dataSources().some(function(t){return t instanceof m&&"Sessions"==t.metaInfo().shortId})},s.prototype.isSmall=function(t){return this.constructor.isSmall(this._jqParent)},s.isSmall=function(t){return t.width()<550||t.height()<300},s.prototype.onWidget=function(){return this._onWidget},s.prototype.onCmeWidget=function(){return"cme"===this.widgetCustomer()},s.prototype.widgetCustomer=function(){return this._widgetCustomer},s.prototype.resize=function(){this._resizeHandler&&this._jqMainDiv&&this._resizeHandler()},s.prototype.chartSession=function(){return this._chartSession},s.prototype.maxLhsPriceAxisWidth=0,s.prototype.maxRhsPriceAxisWidth=0,s.prototype.GUIResetScales=function(){TradingView.trackEvent("GUI","Reset Scales"),this.model()&&(this._containsData&&this.model().chartModel().restoreAxisState(this._content),this.model().resetScales())},s.prototype.onLineCancelled=function(){T.resetToCursor()},s.prototype.createIndicatorImage=function(){var t=this;this.indicatorImage=$('<span class="chart-status-picture"></span>').appendTo(this._jqMainDiv),e.enabled("display_market_status")&&(this.indicatorText=$('<span class="series-status-text"><span class="dot apply-common-tooltip"></span><span class="text"></span><span class="market-status"></span></span>').appendTo(this.indicatorImage),this.indicatorDot=this.indicatorText.find(".dot")),t.withModel(null,function(){var e=t._model.mainSeries();e.onStatusChanged().subscribe(null,t.updateIndicatorImage.bind(t)),e.marketStatus.subscribe(t.updateIndicatorImage.bind(t)),t.updateIndicatorImage(),t.checkCompactMode(),t._model.onRearrangePanes().subscribe(null,function(){t.resetIndicatorSize(),t.resizeIndicator()})}),t.rhsPriceAxisWidthChanged.subscribe(t,t.updateIndicatorImagePosition),t.updateIndicatorImagePosition()},s.prototype.updateIndicatorImage=function(){function t(t,e){return s.hasOwnProperty(t)?s[t]:e}var e,i,o,n,s,r=this.indicatorImage;this.indicatorImage&&(e=this._model,e&&(i=e.mainSeries(),o=i.status(),n=this._statusDetails(),s=null,s=n.hasOwnProperty(o)?n[o]:n.defaults,r.attr("title",t("title","")),this._updateDataAndMarketStatus(i.marketStatus.value(),o)))},s.prototype.checkCompactMode=function(){this._jqMainDiv&&this._jqMainDiv.toggleClass("i-compact",this._jqMainDiv.width()<=400),this.indicatorImage&&(this._indicatorWidth=this.indicatorImage.outerWidth())},s.prototype._statusDetails=function(){return this.__statusDetails||(this.__statusDetails={},this.__statusDetails[f.STATUS_SNAPSHOT]={className:"snapshot",text:"",showBatsWarn:!1,priority:1},this.__statusDetails[f.STATUS_LOADING]=this.__statusDetails[f.STATUS_RESOLVING]={className:"loading",text:$.t("loading data"),priority:1},this.__statusDetails[f.STATUS_INVALID_SYMBOL]={className:"invalid",text:$.t("invalid symbol"),showBatsWarn:!1,priority:1},this.__statusDetails[f.STATUS_NO_BARS]={className:"invalid",text:$.t("no bars"),showBatsWarn:!1,priority:1},this.__statusDetails[f.STATUS_OFFLINE]={className:"connecting",text:$.t("retrying"),priority:1},this.__statusDetails[f.STATUS_EOD]=this.__statusDetails[f.STATUS_PULSE]={className:"eod",text:$.t("eod data"),priority:1},this.__statusDetails[f.STATUS_DELAYED]={className:"delayed",title:$.t("Quotes are delayed by 10 min and updated every 30 seconds"),text:$.t("eod delayed"),priority:1},this.__statusDetails[f.STATUS_DELAYED_STREAMING]={className:"delayed-streaming",text:$.t("delayed"),priority:1},this.__statusDetails[f.STATUS_READY]=this.__statusDetails.defaults={className:"realtime",text:$.t("realtime"),priority:-1},this.__statusDetails.pre_market={text:$.t("pre-market"),className:"pre-market",priority:0},this.__statusDetails.post_market={text:$.t("post-market"),className:"post-market",priority:0},this.__statusDetails.out_of_session={text:$.t("closed"),className:"out-of-session",priority:0},this.__statusDetails.market=this.__statusDetails.defaults),this.__statusDetails},s.prototype._updateDataAndMarketStatus=function(t,e){if(void 0!==this.indicatorText){var i=this._resultingStatusRecord(t,e);this.indicatorText.removeClass().addClass("series-status-text "+i.className).find(".text").html(i.text),this.indicatorDot.attr("title",i.text),this.indicatorImage&&(this._indicatorWidth=this.indicatorImage.outerWidth()),this.resizeIndicator()}},s.prototype.resetIndicatorSize=function(){if(this._paneWidgets[0]&&this._paneWidgets[0].legendWidget)for(var t=0;t<this._paneWidgets.length;t++)this._paneWidgets[t].legendWidget.firstTitle().css("padding-right","")},s.prototype.resizeIndicator=function(){this._paneWidgets[0]&&this._paneWidgets[0].legendWidget&&this._indicatorWidth&&this._paneWidgets[0].legendWidget.firstTitle().css("padding-right",this._indicatorWidth+10)},s.prototype._resultingStatusRecord=function(t,e){var i,o;return t?(i=this._statusDetails()[t],o=this._statusDetails()[e],o||(o=this._statusDetails().defaults),o.priority>i.priority?o:i):this._statusDetails()[e]},s.prototype.updateIndicatorImagePosition=function(){var t=this.indicatorImage;this.indicatorImage&&t.css("marginRight",this.maxRhsPriceAxisWidth)},s.prototype._startSpinner=function(t){if("function"==typeof n&&!this._spinner){var e=$(t).get(0);e&&(this._spinner=TradingView.unifiedSpinner("",{zIndex:"auto"}).spin(e))}},s.prototype.isJustClonedChart=function(){return!!(this._options||{}).justCloned},s.prototype.getLastPaneLeftBottom=function(){var t=this._paneWidgets[this._paneWidgets.length-1].jqPane,e=t.offset();return{left:e.left,bottom:$(document.body).height()-e.top-t.height()}},s.prototype.setDataWindowWidget=function(t){this._dataWindowWidget=t},s.prototype.removeDataWindowWidget=function(){this._dataWindowWidget=null},e.enabled("datasource_copypaste")&&(s.prototype.onAppClipboardPaste=function(t,e){TradingView.logDebugChart("[[paste]]"),this._model&&this._model.pasteSourceFromClip(t,e)},s.prototype.onAppClipboardCopy=function(t){TradingView.logDebugChart("[[copy]]"),this._model&&this._model.copySourceToClip(t||this._model.selectedSource())},s.prototype.onAppClipboardCut=function(t){TradingView.logDebugChart("[[cut]]"),this._model&&this._model.cutSourceToClip(t||this._model.selectedSource())}),s.prototype.applyOverrides=function(t){applyPropertiesOverrides(this.properties(),null,!1,t),this._model&&(applyPropertiesOverrides(this._model.model().properties(),null,!1,t),applyPropertiesOverrides(this._model.mainSeries().properties(),null,!1,t,"mainSeriesProperties"))},s.prototype.setActive=function(t){var e,i=this.actions();for(e in i)i.hasOwnProperty(e)&&this.actions()[e].setActive(t);this._isActive=t,this._paneWidgets.forEach(function(t){t.update()})},s.prototype.isActive=function(){return this._isActive},t.exports=s}).call(e,i(1),i(32),i(39))},function(t,e,i){(function(e,o){"use strict";function n(t,i,o){this._chart=t,this.dialog=t.dialog,this._state=i,this._disableContextMenu=!!o,this.lhsPriceAxisWidget=new h(this,h.LHS),this.rhsPriceAxisWidget=new h(this,h.RHS),this.jqPane=$(document.createElement("td")),this.jqPane.addClass("chart-markup-table"),this.jqPane.addClass("pane"),this._dv=$("<div>"),this._dv.css("width","100%"),this._dv.css("height","100%"),this._dv.css("position","relative"),this._dv.css("overflow","hidden"),this._dv.appendTo(this.jqPane),this.canvas=E(this._dv,new I(16,16)),$(this.canvas).css("position","absolute"),$(this.canvas).css("z-order","2"),$(this.canvas).css("left",0),$(this.canvas).css("top",0),this.ctx=this.canvas.getContext("2d"),this.top_canvas=E(this._dv,new I(16,16)),$(this.top_canvas).css("position","absolute"),$(this.top_canvas).css("z-order","1"),$(this.top_canvas).css("left",0),$(this.top_canvas).css("top",0),this.top_ctx=this.top_canvas.getContext("2d"),this._zoomSelector=$("<div>"),this._zoomSelector.addClass("zoom-selector"),this._zoomSelector.css("display","none"),this._zoomSelector.appendTo(this._dv),this._tooltipSelector=$("<div>"),this._tooltipSelector.addClass("tooltip tooltip-selector tooltip-selector-hidden"),this._tooltipSelector.appendTo(this._dv),this.legendWidget=new a(this,this._chart.model(),this._chart._jqMainDiv),this.jqRow=$(document.createElement("tr")),this.lhsPriceAxisWidget.jqCell.appendTo(this.jqRow),this.jqPane.appendTo(this.jqRow),this.legendWidget.$el.appendTo(this._dv),this.rhsPriceAxisWidget.jqCell.appendTo(this.jqRow),this.setCursorForTool(),A($(this.top_canvas),this,!0);i&&!this._chart.readOnly()&&(this.paneControls=new T(this,this._chart.model(),this._dv)),this.updateScalesVisibility(),this.actions=[],this.readonlyActions=[],this._onKeyUpListener=this._onKeyUpListener.bind(this),this._lineCancelledCallback=this._lineCancelledCallback.bind(this),$(window).on("keyup.panewidget",this._onKeyUpListener),this._chart.withModel(this,this._lineCancelledCallback),this._overlays={},this._contextMenuX=0,this._contextMenuY=0,this._lockDrawingsProperty=b.lockDrawings(),this._chart.withModel(this,function(){var t=this._chart.model();t.onSimpleZoomIn().subscribe(this,this._updateCrosshairOnZoom),t.onSimpleZoomOut().subscribe(this,this._updateCrosshairOnZoom)}),i&&e.enabled("move_logo_to_main_pane")&&i._isMainPane&&t.createLogo&&t.createLogo(null,this._dv,!0)}var s=i(287),r=i(141).Study,a=i(290),l=i(291),h=i(357),c=i(246),d=i(245),p=i(67).LineDataSource,u=i(228),_=i(270).BarsMarksContainer,f=i(72).PriceDataSource,g=i(132),m=g.Action,v=g.ActionPlaceholder,y=g.ActionSeparator,w=i(275),b=i(74),S=i(88),T=i(360),C=i(106),x=i(271),P=i(50),L=P.setCanvasSize,k=P.clearRect,E=P.addCanvasTo,I=P.Size,A=P.setMouseEventHandler,V=i(359),M=i(289);n.prototype.destroy=function(){$(window).off("keyup.panewidget",this._onKeyUpListener),this.legendWidget&&(this.legendWidget.$el.remove(),delete this.legendWidget),this.paneControls&&(this.paneControls.jqDiv.remove(),delete this.paneControls),this._chart.withModel({chart:this._chart,instance:this,callback:this._hideTooltip
},function(){this.chart.model().lineCancelled().unsubscribe(this.instance,this.callback)});for(var t in this)delete this[t]},n.prototype.cancelZoom=function(){this._zoomSelector.css("display","none"),delete this._firstZoomPoint},n.prototype._onKeyUpListener=function(t){if(27==t.keyCode){this._chart.model().lineBeingCreated()&&this._chart.model().cancelCreatingLine(),this._firstZoomPoint&&this.cancelZoom();var e=this._chart.model().model().crossHairSource();e.clearMeasure(),this.setCursorForTool(),this._hideTooltip()}},n.prototype._lineCancelledCallback=function(){try{this._chart.model().lineCancelled().subscribe(this,this._hideTooltip)}catch(t){}},n.prototype.backgroundColor=function(){return this._chart.properties().paneProperties.background.value()},n.prototype.priceAxisByCanvas=function(t){return t===this.lhsPriceAxisWidget.canvas||t===this.lhsPriceAxisWidget.top_canvas?this.lhsPriceAxisWidget:t===this.rhsPriceAxisWidget.canvas||t===this.rhsPriceAxisWidget.canvas?this.rhsPriceAxisWidget:null},n.prototype.updateScalesVisibility=function(){this.lhsPriceAxisWidget.setVisible(this._chart.properties().scalesProperties.showLeftScale.value()),this.rhsPriceAxisWidget.setVisible(this._chart.properties().scalesProperties.showRightScale.value())},n.prototype.chart=function(){return this._chart},n.prototype.state=function(){return this._state},n.prototype.setState=function(t){this._state=t},n.prototype.stretchFactor=function(){return this._state?this._state._stretchFactor:Pane.DEFAULT_STRETCH_FACTOR},n.prototype.setStretchFactor=function(t){this._state&&(this._state._stretchFactor=t)},n.prototype.mouseEnterEvent=function(t){var e=this._chart.model();e&&(e.crossHairSource().visible=!0,"function"==typeof this.onMouseEnter&&this.onMouseEnter(this))},n.prototype.isLineTool=function(t){var e=TradingView[t];return"function"==typeof e&&e.prototype instanceof p},n.prototype.hideInplaceEditor=function(){return!!this._inplaceEditor&&(this._inplaceEditor.remove(),this._inplaceEditor=void 0,!0)},n.prototype._processMouseMoveWhileZoom=function(t){var e=this._state.defaultPriceScale(),i=(e.coordinateToPrice(t.localY),Math.floor(this._chart.model().timeScale().coordinateToIndex(t.localX))),o=this._chart.model().timeScale().indexToCoordinate(i)-.5*this._chart.model().timeScale().barSpacing(),n=t.localY,s=Math.abs(o-this._firstZoomPoint.x),r=Math.abs(n-this._firstZoomPoint.y);o<this._firstZoomPoint.x?this._zoomSelector.css("left",o):this._zoomSelector.css("left",this._firstZoomPoint.x),t.localY<this._firstZoomPoint.y?this._zoomSelector.css("top",t.localY):this._zoomSelector.css("top",this._firstZoomPoint.y),this._zoomSelector.width(s),this._zoomSelector.height(r)},n.prototype._finishZoom=function(t){var e=this._state.defaultPriceScale(),i=e.coordinateToPrice(t.localY),o=Math.round(this._chart.model().timeScale().coordinateToIndex(t.localX));o!==this._firstZoomPoint.index&&this._chart.model().zoomToViewport(this._firstZoomPoint.index,o,this._firstZoomPoint.price,i,this.state()),this._zoomSelector.css("display","none"),this._firstZoomPoint=null,b.resetToCursor()},n.EvironmentState=function(t){t.shiftKey&&(this.shift=!0),t.ctrlKey&&(this.control=!0)},n.prototype.checkMovepoint=function(t){return t==S.MOVEPOINT||t==S.MOVEPOINT_BACKGROUND&&TradingView.isMobile.any()},n.prototype.mouseDownEvent=function(t){var i,s,a,l,h,c,d,u,_,g,m,v,y,w,T;if(document.activeElement!==document.body&&document.activeElement!==document.documentElement?document.activeElement&&document.activeElement.blur?document.activeElement.blur():document.body.focus():document.getSelection?document.getSelection().removeAllRanges():document.selection&&document.selection.clear(),x.emit("mouse_down",{clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,screenX:t.screenX,screenY:t.screenY}),this._updateCommonTooltip(null),i=this._chart.model(),s=new n.EvironmentState(t),i.mainSeries().setGotoDateResult(),this.hideInplaceEditor(),TradingView.supportTouch()&&(this._skipFirstMove=!0),a=this._state.defaultPriceScale(),!a.isEmpty()&&!i.timeScale().isEmpty()){if(l=i.crossHairSource(),TradingView.supportTouch()&&"LineToolBrush"!=b.tool.value()||i.setCurrentPosition(t.localX,t.localY,this._state),h=l.price,c=l.index,l.startMeasurePoint()&&l.endMeasurePoint()&&l.clearMeasure(),s.shift&&b.toolIsCursor(b.tool.value())&&b.tool.setValue("measure"),"measure"===b.tool.value()&&!l.startMeasurePoint())return void l.startMeasuring({price:h,index:c,x:t.localX,y:t.localY},this._state);if(l.startMeasurePoint()&&!l.endMeasurePoint())return l.finishMeasure({price:h,index:c,x:t.localX,y:t.localY}),void b.resetToCursor();if(this._firstZoomPoint)return void this._finishZoom(t);if("zoom"===b.tool.value())return d=i.timeScale().indexToCoordinate(c)-.5*i.timeScale().barSpacing(),this._firstZoomPoint={price:h,index:c,x:d,y:t.localY},this._zoomSelector.css("display","block"),this._zoomSelector.css("left",d),this._zoomSelector.css("top",t.localY),this._zoomSelector.width(0),void this._zoomSelector.height(0);if(u=i.createUndoCheckpoint(),this.isLineTool(b.tool.value())||i.lineBeingCreated())return void((!e.enabled("charting_library_base")||c>=0)&&this._mouseDownEventForLineTool(t,s,c,h));if(_=this.dataSourceAtPoint(t.localX,t.localY),g=_&&_.source&&_.source.customization?_.source.customization:{},_.hittest&&_.hittest.result()==S.CUSTOM&&(m=_.hittest.data().mouseDownHandler,m&&m()),!this._chart.readOnly()){if(_&&!g.disableSelection&&(v=_.hittest&&_.hittest.result()>S.MOVEPOINT_BACKGROUND,v=v||_.hittest&&_.hittest.result()==S.MOVEPOINT_BACKGROUND&&TradingView.isMobile.any(),v?i.setSelectedSource(_.source,_.hittest&&_.hittest.data()):i.setSelectedSource(null)),_.source&&"eraser"===b.tool.value()&&!g.disableErasing&&(TradingView.isInherited(_.source.constructor,p)||TradingView.isInherited(_.source.constructor,r)))return y=_.hittest.eraseMarker(),void(t.ctrlKey&&void 0!==y&&_.source.processErase?_.source.processErase(i,y):i.removeSource(_.source));if(w=_.source&&TradingView.isInherited(_.source.constructor,p)&&_.source.isLocked(),T=this._lockDrawingsProperty.value()||w,!T){if(_.source&&_.source.userEditEnabled&&!_.source.userEditEnabled())return;if(_.hittest&&_.hittest.result()===S.CHANGEPOINT)return a=_.source.priceScale(),h=a.coordinateToPrice(t.localY),i.startChangingLinetool(_.source,{index:c,price:h},_.hittest.data(),s),void this._updateTooltip(t.localX,t.localY);if(_.hittest&&this.checkMovepoint(_.hittest.result()))return void(_.source.isFixed&&_.source.isFixed()?i.startMovingSource(_.source,new o.Point(t.localX,t.localY),_.hittest.data()):(a=_.source.priceScale(),h=a.coordinateToPrice(t.localY),i.startMovingSource(_.source,{index:c,price:h},_.hittest.data())))}if(_.source&&TradingView.isInherited(_.source.constructor,f)&&_.source.isDraggable())return void(this._chart.draggingSource=_.source)}_.hittest&&_.hittest.result()==S.REGULAR||(this._processing=!0)}},n.prototype.drawRightThere=function(t){var e,i,o;this.isLineTool(t)&&(e=this._chart.model(),i=e.crossHairSource(),o=e.createLineTool(this._state,{index:i.index,price:i.price},t))},n.prototype._finishTool=function(t){var e,i,o=this._chart.model(),n=b.tool.value();b.resetToCursor(),this._hideTooltip(),o.setSelectedSource(t),this._chart.isTextTool(n)&&(e=o.createUndoCheckpoint(),i=new l(t,o,e),i.show(),i.focusOnText())},n.prototype._mouseDownEventForLineTool=function(t,e,i,n){var s,r,a,l,h,c,d,p,_,f,g=this._chart.model(),m=!1,v=null,y=t.localX,w=t.localY,S=this._chart.model().model().crossHairSource(),T=b.tool.value();if(b.hideAllDrawings().setValue(!1),b.lockDrawings().setValue(!1),TradingView.supportTouch()&&this.isLineTool(T)&&"LineToolBrush"!==T&&!g.lineBeingCreated()&&(this._startTouchPoint=new o.Point(y,w),this._initCrossHairPosition=S.currentPoint(),this._skipFirstMove=!0),!g.lineBeingCreated()||g.lineBeingCreated()instanceof u)TradingView.supportTouch()&&"LineToolBrush"!=T||(f={index:i,price:n},v=g.createLineTool(this._state,f,T),g.lineBeingCreated()||(m=!0));else if(TradingView.supportTouch()){if(this._skipFirstMove=!0,!this._startTouchPoint)return this._startTouchPoint=new o.Point(y,w),s=g.lineBeingCreated().points(),r=s[s.length-1],a=g.timeScale().indexToCoordinate(r.index),n=r.price,l=g.lineBeingCreated().priceScale(),l.isPercent()&&(h=g.lineBeingCreated().ownerSource().firstValue(),n=l.priceRange().convertToPercent(n,h)),c=l.priceToCoordinate(n),void(this._lastDrawingPoint=new o.Point(a,c))}else v=g.lineBeingCreated(),d=g.paneForSource(v),d!==this._state?(p=this._dv.offset(),y=t.localX+p.left,w=t.localY+p.top,_=this._chart.paneByState(d),p=_._dv.offset(),y-=p.left,w-=p.top,n=v.priceScale().coordinateToPrice(w),i=Math.round(g.timeScale().coordinateToIndex(y)),m=g.coninueCreatingLine({index:i,price:n},e)):m=g.coninueCreatingLine({index:i,price:n},e);g.setSelectedSource(v),m?this._finishTool(v):TradingView.supportTouch()&&"LineToolBrush"!=T||this._updateTooltip(t.localX,t.localY)},n.prototype._equalsCursorCache=function(t,e){return b.toolIsCursor(t.tool)?t.tool===e.tool&&t.theme===e.theme&&t.crosshair===e.crosshair:t.tool===e.tool&&t.theme===e.theme},n.prototype._setCursor=function(t){this._cursorCache&&this._equalsCursorCache(this._cursorCache,t)||(this._cursorCache=t,b.toolIsCursor(t.tool)?this.jqPane.css("cursor",t.crosshair):this.jqPane.css("cursor",V(t.state.name,t.state.hotspot,t.theme)))},n.prototype.setCursorForTool=function(t,e){var i,o,n={_default:{name:"cursor_cross",hotspot:"11 11"},zoom:{name:"zoom",hotspot:"5 5"},pointer:{name:"cursor_pointinghand",hotspot:"13 7"},dragger:{name:"cursor_closed_hand",hotspot:"8 8"}},s=b.tool.value();b.toolIsCursor(s)&&(this._chart.draggingSource||this._isScrolling||this._chart.model()&&this._chart.model().sourceBeingMoved()?s="dragger":t&&(s="pointer")),this._chart.model()&&this._chart.model().lineBeingEdited()?s=this._chart.model().lineBeingEdited()._constructor:e==S.CHANGEPOINT&&(s=t._constructor),i=n._default,s in n&&(i=n[s]),o="light",this._setCursor({tool:s,theme:o,state:i,crosshair:this.defaultPaneCursor(o)})},n.prototype.setDragToAnotherPaneCursor=function(){var t="light";this._setCursor({tool:"dragger",theme:t,state:{name:"cursor_closed_hand_move",hotspot:"8 8"},crosshair:this.defaultPaneCursor(t)})},n.prototype.defaultPaneCursor=function(t){var e={cursor:{name:"cursor_cross",hotspot:"11 11"},dot:{name:"cursor_dot",hotspot:"11 11"},crosshair:{name:"cursor_cross",hotspot:"11 11"},eraser:{name:"cursor_eraser",hotspot:"5 5"}},i=e[b.tool.value()];return i||(i=e[b.cursorTool.value()]),i?V(i.name,i.hotspot,t):"default"},n.prototype.gestureStartEvent=function(t){this._prev_pinch_scale=1,this._pinching=!0},n.prototype.gestureChangeEvent=function(t){var e,i,o=(t.originalEvent.pageX||t.originalEvent.offsetX)-5,n=this._chart.paneWidgets()[0].lhsPriceAxisWidget.size.w,s=this._chart.model().timeScale().width();n&&(o=Math.max(0,o-n)),o=Math.min(o,s),e=2*(o/s-.5),i=5*(t.scale-this._prev_pinch_scale),i>0?this._chart.model().zoomIn(e,i):this._chart.model().zoomOut(e,-i),this._prev_pinch_scale=t.scale},n.prototype.gestureEndEvent=function(t){this._pinching=!1},n.prototype._updateCommonTooltip=function(t){var e,i,o,n=this._lastCommonTooltipData,s=null;if(t&&t.hittest&&t.hittest.result()===S.CUSTOM&&(e=t.hittest.data(),e&&(s=e.tooltip||null)),null!=n||null!=s)return null==s?(this._lastCommonTooltipData=null,void TradingView.Tooltip.hide()):void(n&&s.text===n.text&&s.rect.x===n.rect.x&&s.rect.y===n.rect.y&&s.rect.w===n.rect.w&&s.rect.h===n.rect.h||(this._lastCommonTooltipData=s,i=TradingView.clone(s),o=this.jqPane.offset(),i.rect.x+=o.left,i.rect.y+=o.top,TradingView.Tooltip.show(i)))},n.prototype.mouseMoveEvent=function(t){var e,i,o,s,r,a,l,h,c,d,p=this._chart.model();if(p){if(e=t.localX,i=t.localY,o=new n.EvironmentState(t),this._firstZoomPoint)return void this._processMouseMoveWhileZoom(t);if(this._chart.readOnly()||this._editDialog&&this._editDialog.isVisible()||(this.setCursorForTool(),s=b.tool.value(),r=null,this._processing||!b.toolIsCursor(s)&&"eraser"!==s||(r=this.dataSourceAtPoint(t.localX,t.localY),r.hittest&&r.hittest.result()>S.MOVEPOINT_BACKGROUND?(this.setCursorForTool(r.source,r.hittest?r.hittest.result():null),!r.source||"eraser"===s&&r.source.constructor===TradingView.Series?p.setHoveredSource(null):p.setHoveredSource(r.source,r.hittest.data())):p.setHoveredSource(null)),this._updateCommonTooltip(r)),this._chart.readOnly()&&(r=this.dataSourceAtPoint(t.localX,t.localY),a=p.hoveredSource(),null!==r.source?p.setHoveredSource(r.source,r.hittest.data()):p.setHoveredSource(null,null)),this._chart.model().lineBeingCreated()&&(l=this._chart.model().lineBeingCreated(),h=this._chart.model().paneForSource(l),h!==this._state))return c=this._dv.offset(),e+=c.left,i+=c.top,d=this._chart.paneByState(h),c=d._dv.offset(),e-=c.left,i-=c.top,void p.setCurrentPosition(e,i,h);s=b.tool.value(),TradingView.supportTouch()&&this.isLineTool(s)||(p.setCurrentPosition(e,i,this._state,o),this._updateTooltip(e,i))}},n.prototype.pressedMouseMoveEvent=function(t){var i,s,r,a,l,h,c,d,_,f,g,m,v,y,w,S,T,C,x,P,L,k,E,I,A,M;if(!this._pinching){if(this._skipFirstMove?(delete this._skipFirstMove,delete this._touchMove):this._touchMove=!0,i=new n.EvironmentState(t),s=this._chart.model(),r=t.localX,a=t.localY,this._firstZoomPoint)return this._processMouseMoveWhileZoom(t),void(this._firstZoomPoint.draggingMode=!0);if(l=b.tool.value(),TradingView.supportTouch()&&this._startTouchPoint&&this.isLineTool(l)&&"LineToolBrush"!==l&&!s.lineBeingCreated())return h=this._chart.model().model().crossHairSource(),c=this._initCrossHairPosition,d=new o.Point(r,a),_=d.substract(this._startTouchPoint),f=c.add(_),this._chart.model().setCurrentPosition(f.x,f.y,this._state),void this._updateTooltip(f.x,f.y);if(TradingView.supportTouch()&&s.lineBeingCreated()&&!(s.lineBeingCreated()instanceof u))return void(this._startTouchPoint&&(g=s.lineBeingCreated(),m=t.localX-this._startTouchPoint.x,v=t.localY-this._startTouchPoint.y,y=this._lastDrawingPoint.x+m,w=this._lastDrawingPoint.y+v,S=this._chart.model().paneForSource(g),s.setCurrentPosition(y,w,S),this._updateTooltip(y,w)));if(s.setCurrentPosition(r,a,this._state,i),this._updateTooltip(r,a),T=b.tool.value(),(!this.isLineTool(T)||"LineToolBrush"===l)&&(0===t.button||Modernizr.touch)){if("LineToolBrush"===T){if(C=this._state.defaultPriceScale(),C.isEmpty())return;if(!this._chart.model().lineBeingCreated())return;return x=C.coordinateToPrice(t.localY),P=Math.round(this._chart.model().timeScale().coordinateToIndex(t.localX)),void((!e.enabled("charting_library_base")||P>=0)&&this._chart.model().coninueCreatingLine({index:P,price:x}))}if(this._chart.draggingSource&&(L=t.target,k=this._chart.paneByCanvas(L),k&&(k!==this?k.setDragToAnotherPaneCursor():k.setCursorForTool()),E=this._chart.priceAxisByCanvas(L),E&&E.jqCell.css("cursor",V("cursor_closed_hand","8 8")),I=this._chart.timeAxisByCanvas(L),I&&(I.jqCell.css("cursor",V("cursor_closed_hand_move","8 8")),I.jqCell.focus())),s.timeScale().isEmpty())return;if(s.lineBeingEdited())return P=Math.round(this._chart.model().timeScale().coordinateToIndex(r)),(!e.enabled("charting_library_base")||P>=0)&&s.changeLinePoint({x:r,y:a},i),this._updateTooltip(r,a),void this.setCursorForTool();if(s.sourceBeingMoved()){if(C=s.sourceBeingMoved().priceScale(),C.isEmpty())return;if(P=this._chart.model().timeScale().coordinateToIndex(t.localX),x=C.coordinateToPrice(t.localY),A=s.sourceBeingMoved(),this.setCursorForTool(),e.enabled("charting_library_base")&&!s.sourceBeingMoved().onlyYMoving()&&(M=A.points().reduce(function(t,e){return e.index<t.index?e:t}).index,M-((A._currentMovingPoint||A._startMovingPoint).index-P)<0))return;return TradingView.isInherited(A.constructor,p)&&A.isFixed()?void s.moveSource(new o.Point(r,a)):void s.moveSource({index:P,price:x},i)}C=this._state.defaultPriceScale(),this._startScrollingPos||(this._startScrollingPos={x:t.clientX,y:t.clientY}),this._startScrollingPos&&(this._startScrollingPos.x===t.clientX&&this._startScrollingPos.y===t.clientY||this._isScrolling||(s.beginUndoMacro("scroll"),C.isEmpty()||s.startScrollPrice(this._state,C,t.localY),s.startScrollTime(t.localX),this._isScrolling=!0,this.setCursorForTool())),this._isScrolling&&(C.isEmpty()||s.scrollPriceTo(this._state,C,t.localY),s.scrollTimeTo(t.localX))}}},n.prototype._processMouseUpForCustomHandler=function(t){var e,i=this.dataSourceAtPoint(t.localX,t.localY);i.hittest&&i.hittest.result()==S.CUSTOM&&(e=i.hittest.data().mouseUpHandler,e&&e())},n.prototype.mouseUpEvent=function(t){var e,i,o,n,r,a,l,h,c,d,p,_,f,g,m,v,y,w,S,T,P,L,k,E,I,A,V;if(this._processMouseUpForCustomHandler(t),x.emit("mouse_up",{clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,screenX:t.screenX,screenY:t.screenY}),e=this._chart.model(),i=this._touchMove,delete this._touchMove,o=b.tool.value(),TradingView.supportTouch()&&!i&&"LineToolBrush"!==o&&this.isLineTool(o)&&!e.lineBeingCreated())return n=e.crossHairSource().currentPoint(),r=this._state.defaultPriceScale(),a=r.coordinateToPrice(n.y),l=Math.round(e.timeScale().coordinateToIndex(n.x)),h={index:l,price:a},c=e.createLineTool(this._state,h,o),e.setSelectedSource(c),e.lineBeingCreated()||this._finishTool(c),this._updateTooltip(n.x,n.y),void delete this._startTouchPoint;if(e.lineBeingCreated()&&!(e.lineBeingCreated()instanceof u)&&this._startTouchPoint)return d=!1,delete this._startTouchPoint,i||(c=e.lineBeingCreated(),p=c.points()[c.points().length-1],a=p.price,_=c.priceScale(),_.isPercent()&&(f=e.lineBeingCreated().ownerSource().firstValue(),a=_.priceRange().convertToPercent(a,f)),d=e.coninueCreatingLine({index:p.index,price:a},{}),delete this._lastDrawingPoint),void(d&&this._finishTool(c));if(this._firstZoomPoint&&this._firstZoomPoint.draggingMode)return void this._finishZoom(t);if(0===t.button||TradingView.supportTouch()){if(this._processing=!1,e=this._chart.model(),e.lineBeingEdited())return e.endChangingLinetool(),void this._hideTooltip();if("LineToolBrush"===o){if(e.finishLineTool(),r=this._state.defaultPriceScale(),r.isEmpty())return;if(!this._chart.model().lineBeingCreated())return;return a=r.coordinateToPrice(t.localY),l=Math.round(this._chart.model().timeScale().coordinateToIndex(t.localX)),void this._chart.model().coninueCreatingLine({index:l,price:a})}if(g=e.sourceBeingMoved())return e.endMovingSource(),this._hideTooltip(),this.setCursorForTool(g),void e.invalidate(new C(C.UPDATE_CURSOR_ONLY));m=this._isScrolling&&s.UndoHistory.undoStack().head()instanceof s.UndoMacroCommand,this._isScrolling&&(r=this._state.defaultPriceScale(),e.endScrollPrice(this._state,r),v=this,y=function(){e.endScrollTime(),e.endUndoMacro(),v._startScrollingPos=void 0,v._isScrolling=!1,v.setCursorForTool()},TradingView.supportTouch()?(w=e.timeScale().m_scrollStartPoint,S=.05*(t.localX-w),T=null,P=function(i){var o,n;null===T&&(T=i),o=.01*Math.min(100,3*(i-T)),o=Math.sqrt(o),n=t.localX+S*o,e.scrollTimeTo(n),o>=1?y():requestAnimationFrame(P)},requestAnimationFrame(P)):y()),this._chart.draggingSource&&(L=t.target,k=this._chart.paneByCanvas(L),k&&k!=this&&(E=k._state.findSuitableScale(this._chart.draggingSource),m&&(m=!1,s.UndoHistory.undo()),this._chart.model().move(this._chart.draggingSource,k._state,E)),I=this._chart.priceAxisByCanvas(L),I&&(k=I.pane,r=I._isLeft?k._state.leftPriceScale():k._state.rightPriceScale(),m&&(m=!1,s.UndoHistory.undo()),this._chart.model().move(this._chart.draggingSource,k._state,r)),A=this._chart.timeAxisByCanvas(L),A&&(m&&(m=!1,s.UndoHistory.undo()),this._chart.model().move(this._chart.draggingSource,null,null),A.jqCell.css("cursor","")),this._chart.draggingSource=null,V=this.dataSourceAtPoint(t.localX,t.localY),this.setCursorForTool(V.source,V.hittest||null))}delete this._touchMove},n.prototype.mouseLeaveEvent=function(t){var e=this._chart.model();e&&(TradingView.isMobile.any()||e.model().clearCurrentPosition(),e.setHoveredSource(null),this._updateCommonTooltip(null),"function"==typeof this.onMouseLeave&&this.onMouseLeave(this))},n.prototype.mouseClickEvent=function(t){this._chart.model().hoveredSource()instanceof _&&this._chart.model().hoveredSource().onClicked()},n.prototype.showEditDialogForSource=function(t){this.chart().onWidget()||t.userEditEnabled&&!t.userEditEnabled()||(this._editDialog=new l(t,this._chart.model()),this._editDialog.show())},n.prototype.mouseDoubleClickEvent=function(t){var e,i=!this._chart.readOnly()&&!this.isLineTool(b.tool.value())&&this.dataSourceAtPoint(t.localX,t.localY),o=i&&i.hittest&&i.source;o&&i.hittest.result()<=S.MOVEPOINT_BACKGROUND&&!TradingView.isMobile.any()&&(o=null),o&&o.customization&&o.customization.disableSelection&&(o=null),o&&o._metaInfo&&"Sessions@tv-basicstudies"==o._metaInfo.id&&(o=this._chart.model().mainSeries()),o?(e=!1,e?TradingView.alertsDispatcher.openEditDialog(i.source.alert()):this.showEditDialogForSource(o)):this._chart.readOnly()||this.isLineTool(b.tool.value())||this._chart.model().lineBeingCreated()||this._chart.model().selectedSource()||this._chart.toggleMaximizePane(this)},n.prototype.showContextMenuForSource=function(t,e){t.hasContextMenu()&&(this._chart.model().setSelectedSource(t),t.constructor===TradingView.Series?this._seriesContextMenu(t).show(e):TradingView.isInherited(t.constructor,r)?this._studyContextMenu(t).show(e):TradingView.isInherited(t.constructor,c)||TradingView.isInherited(t.constructor,d)?this._tradingDrawingsContextMenu(t).show(e):TradingView.isInherited(t.constructor,p)&&this._lineContextMenu(t).show(e))},n.prototype.contextMenuEvent=function(t,i){var o,n,s,r,a;if(e.enabled("pane_context_menu")){if(this._chart.model().crossHairSource().startMeasurePoint())return void this._chart.model().crossHairSource().clearMeasure();if(!this._pinching&&(this._firstZoomPoint&&this.cancelZoom(),!this.hideInplaceEditor())){if(!b.toolIsCursor(b.tool.value())){if(TradingView.isMobile.any())return;return b.resetToCursor(!0),this.setCursorForTool(),this._hideTooltip(),void(this._chart.model().lineBeingCreated()&&this._chart.model().cancelCreatingLine())}this.chart().readOnly()||this._disableContextMenu||(this._chart.model().mainSeries().createSessStudy(),this._chart.updateActions(),this._contextMenuX=t.localX,this._contextMenuY=t.localY,o=this.dataSourceAtPoint(t.localX,t.localY),n=o?o.source:null,s=o&&o.hittest?o.hittest.result():0,r=this,a=s>=S.REGULAR||s>=S.MOVEPOINT_BACKGROUND&&TradingView.isMobile.any(),null!==n&&a?this.showContextMenuForSource(n,t):(this._contextMenu(t).show(t),this._chart.model().setSelectedSource(null)),this.paint())}}},n.prototype._contextMenu=function(t){function e(t){return null===t.text}var i,o,n=this._initActions(t),s=this._customActions();for(s.remove.forEach(function(t){for(var e=0;e<n.length;e++)if(n[e].text===t){n.splice(e,1);break}}),i=s.top.concat(n).concat(s.bottom),o=i.length-1;o>0;o--)e(i[o])&&e(i[o-1])&&i.splice(o,1);return i.length&&e(i[0])&&i.splice(0,1),i.length&&e(i[i.length-1])&&i.splice(i.length-1,1),w.createMenu(i)},n.prototype.createRemoveMenu=function(){var t,e=this._chart.actions(),i=new m({text:$.t("Remove")});return i.subActions||(i.subActions=[]),t=i.subActions,t.push(e.paneRemoveAllStudies),t.push(e.paneRemoveAllDrawingTools),t.push(e.paneRemoveAllStudiesDrawingTools),i},n.prototype.createDrawingMenu=function(){var t,i=this._chart.actions(),o=new m({text:$.t("Drawing Tools")});return o.subActions||(o.subActions=[]),t=o.subActions,t.push(i.drawingToolbarAction),e.enabled("charting_library_base")||t.push(i.favoriteDrawingToolbar),t.push(new y),t.push(i.magnetAction),t.push(i.stayInDrawingModeAction),e.enabled("support_multicharts")&&t.push(i.syncModeAction),t.push(new y),t.push(i.lockDrawingsAction),t.push(i.hideAllDrawingsAction),t.push(i.paneRemoveAllDrawingTools),o},n.prototype._initActions=function(t){var i,o,n,s,r,a=this,l=this._chart.actions(),h=[];return e.enabled("datasource_copypaste")&&(i=M.get(),!i||"study"!==i.type&&"drawing"!==i.type||(o=new m({text:$.t("Paste %s",$.t(i.title||i.type)),shortcut:"Ctrl-V"}),o.callbacks().subscribe(null,function(){a._chart.onAppClipboardPaste(a.state())}),h.push(o))),l.gotoDate&&h.push(l.gotoDate),h.length&&h.push(new y),h.push(l.chartReset),h.push(l.symbolSearch),h.push(l.changeInterval),n=window.widgetbar&&(!window.widgetbar._customization||window.widgetbar._customization.watchlist),n&&h.push(l.addToWatchlist),e.enabled("text_notes")&&h.push(l.addToTextNotes),e.enabled("symbol_info")&&h.push(l.showSymbolInfoDialog),h.push(new y),h.push(this._createLockTimeAxisAction(t)),h.push(new y),h.push(l.paneObjectTree),h.push(l.insertIndicator),e.enabled("charting_library_base")||h.push(l.applyStudyTemplate),e.enabled("compare_symbol")&&h.push(l.compareOrAdd),h.push(this.createDrawingMenu()),e.enabled("charting_library_base")&&h.push(l.hideAllMarks),h.push(this.createRemoveMenu()),h.push(new y),s=this._priceAxisMenu(),s&&h.push(s),r=this._timeAxisMenu(),r&&h.push(r),e.enabled("charting_library_base")||h.push(l.applyColorTheme),e.enabled("show_chart_property_page")&&h.push(l.chartProperties),pro.hasPackage("mtp-mtpredictor")&&this.state().containsMainSeries()&&(h.push(new y),h.push(this._createMTPredictorActions())),h},n.prototype._customActions=function(){var t,i={top:[],bottom:[],remove:[]},o=this._chart.model(),n=o.timeScale(),s=this._state.defaultPriceScale();return e.enabled("custom_items_in_context_menu")?(t=n.isEmpty()?void 0:n.indexToUserTime(n.coordinateToIndex(this._contextMenuX)),x.emit("onContextMenu",{unixtime:t?t/1e3:void 0,price:s.isEmpty()?void 0:s.coordinateToPrice(this._contextMenuY),callback:function(t){[].concat(t).forEach(function(t){if(t.text)if(t.text.length>1&&"-"===t.text[0])i.remove.push(t.text.slice(1));else{var e;"-"===t.text?e=new y:(e=new m({text:t.text}),e.callbacks().subscribe(null,t.click)),t.position&&"top"==t.position?i.top.push(e):i.bottom.push(e)}})}}),i):i},n.prototype._timeAxisMenu=function(){if(this._chart.model().timeScale().isEmpty())return null;var t=this._chart.getTimeScale();return new m({text:$.t("Time Scale"),subActions:t.getContextMenuActions()})},n.prototype._priceAxisMenu=function(){var t,e=this._state.defaultPriceScale();return e.isEmpty()?null:(t=e===this._state.leftPriceScale?this.leftPriceAxisWidget():this.rightPriceAxisWidget(),new m({text:$.t("Price Scale"),subActions:t.getContextMenuActions()}))},n.prototype._seriesContextMenu=function(t){var i,o,n,s,r,a=this._chart.actions(),l=t.properties().visible.value(),h=null;if(this._chart.readOnly())i=[l?a.seriesHide:this.createActionShow(t),new y,this.createActionShowCountdown(t),new y,this.createActionScaleLeft(t),this.createActionScaleRight(t),this.createActionNoScale(t)],e.enabled("countdown")||i.splice(3,1),h=w.createMenu(i);else{if(o=this._mergeContentMenuItems(t),n=[a.showSymbolInfoDialog,a.compare,l?a.seriesHide:this.createActionShow(t),this.createVisualOrderAction(t),new y,this.createActionShowCountdown(t),new y],e.enabled("countdown")||n.splice(5,2),e.enabled("compare_symbol")||n.splice(1,1),e.enabled("symbol_info")||n.splice(0,1),!this.chart().onWidget()&&e.enabled("show_chart_property_page")&&n.unshift(a.format),s=this.createActionLockScale(t),s&&(n.push(s),n.push(new y)),o.length>0){for(r=0;r<o.length;r++)n.push(o[r]);n.push(new y)}n.push(this.createActionScaleLeft(t)),n.push(this.createActionScaleRight(t)),n.push(this.createActionNoScale(t)),pro.hasPackage("mtp-mtpredictor")&&(n.push(new y),n.push(this._createMTPredictorActions())),h=w.createMenu(n)}return h},n.prototype.toggleLockTimeAxis=function(t,e){var i,o,n;"boolean"!=typeof e&&(e=!b.lockTimeAxis().value()),e&&(i=this._chart.model().timeScale(),o=i.coordinateToIndex(t),n=i.points().roughTime(o),b.lockTimeAxisTime.setValue(n)),b.lockTimeAxis().setValue(e)},n.prototype._createLockTimeAxisAction=function(t){var e=new m({text:$.t("Lock Cursor In Time"),checkable:!0}),i=b.lockTimeAxis().value();return e.setChecked(i),e.callbacks().subscribe(null,this.toggleLockTimeAxis.bind(this,t.localX,!i)),e},n.prototype._createHVLineAction=function(t,e){e="vertical"==e&&"vertical"||"horizontal";var i=new m({text:"vertical"==e?$.t("Create Vertical Line"):$.t("Create Horizontal Line")});return i.callbacks().subscribe(this,function(){var i=this._chart.model().timeScale().coordinateToIndex(t.localX),o=this._state.defaultPriceScale().coordinateToPrice(t.localY),n=this._chart.model().createLineTool(this._state,{index:i,price:o},"vertical"==e&&"LineToolVertLine"||"LineToolHorzLine");this._finishTool(n)}),i},n.prototype._createMTPredictorActions=function(){var t=this,e=function(e,i,o){var n=new m({text:e});return n.callbacks().subscribe(t,function(){var t,e,n=this._chart.model(),s=n.timeScale(),r=this._state.defaultPriceScale();s.isEmpty()||r.isEmpty()||(o?(t=r.coordinateToPrice(this._contextMenuY),e=Math.round(s.coordinateToIndex(this._contextMenuX)),n.createLineTool(this._state,{index:e,price:t},i)):b.tool.setValue(i))}),n};return new m({text:$.t("MTPredictor"),subActions:[e($.t("Apply Manual Risk/Reward"),"LineStudyMtpRiskReward",!1),e($.t("Apply Manual Decision Point"),"LineStudyMtpDecisionPoint",!0),e($.t("Analyze Trade Setup"),"LineStudyMtpAnalysis",!0),new m({text:$.t("Apply Elliot Wave"),subActions:[e($.t("Apply Elliot Wave Intermediate"),"LineStudyMtpElliotWaveMain",!0),e($.t("Apply Elliot Wave Major"),"LineStudyMtpElliotWaveMajor",!0),e($.t("Apply Elliot Wave Minor"),"LineStudyMtpElliotWaveMinor",!0)]}),new m({text:$.t("Apply WPT Up Wave"),subActions:[e($.t("Up Wave 1 or A"),"LineStudyMtpUpWave1OrA",!1),e($.t("Up Wave 2 or B"),"LineStudyMtpUpWave2OrB",!1),e($.t("Up Wave C"),"LineStudyMtpUpWaveC",!1),e($.t("Up Wave 3"),"LineStudyMtpUpWave3",!1),e($.t("Up Wave 4"),"LineStudyMtpUpWave4",!1),e($.t("Up Wave 5"),"LineStudyMtpUpWave5",!1)]}),new m({text:$.t("Apply WPT Down Wave"),subActions:[e($.t("Down Wave 1 or A"),"LineStudyMtpDownWave1OrA",!1),e($.t("Down Wave 2 or B"),"LineStudyMtpDownWave2OrB",!1),e($.t("Down Wave C"),"LineStudyMtpDownWaveC",!1),e($.t("Down Wave 3"),"LineStudyMtpDownWave3",!1),e($.t("Down Wave 4"),"LineStudyMtpDownWave4",!1),e($.t("Down Wave 5"),"LineStudyMtpDownWave5",!1)]})]})},n.prototype.createEarningsShow=function(t){var e=this._chart.model().mainSeries().properties().esdShowEarnings,i=new m({checkable:!0,text:$.t("Show Earnings"),enabled:!0,checked:e.value()});return i.callbacks().subscribe(this,function(t){this._chart.model().setProperty(e,t.checked,"Show Earnings")}),i},n.prototype.createDividendsShow=function(t){var e=this._chart.model().mainSeries().properties().esdShowDividends,i=new m({checkable:!0,text:$.t("Show Dividends"),enabled:!0,checked:e.value()});return i.callbacks().subscribe(this,function(t){this._chart.model().setProperty(e,t.checked,"Show Dividends")}),i},n.prototype.createSplitsShow=function(t){var e=this._chart.model().mainSeries().properties().esdShowSplits,i=new m({checkable:!0,text:$.t("Show Splits"),enabled:!0,checked:e.value()});return i.callbacks().subscribe(this,function(t){this._chart.model().setProperty(e,t.checked,"Show Splits")}),i},n.prototype._studyEsdContextMenu=function(t){var e,i=[];return this._chart.readOnly()||(i.push(this.createDividendsShow(t)),i.push(this.createSplitsShow(t)),i.push(this.createEarningsShow(t))),e=w.createMenu(i)},n.prototype._studyContextMenu=function(t){var i,o,n,s,r,a=this._chart.actions(),l=t.properties().visible.value(),h=[],c=null;return t.userEditEnabled()?(i=this._chart,t.properties().linkedToSeries&&t.properties().linkedToSeries.value()?this._chart.readOnly()?h.push(l?a.studyHide:this.createActionShow(t)):(h.push(a.format),h.push(l?a.studyHide:this.createActionShow(t)),h.push(this.createVisualOrderAction(t)),h.push(new y),h.push(a.studyRemove)):this._chart.readOnly()?h=[l?a.studyHide:this.createActionShow(t),new y,this.createActionScaleLeft(t),this.createActionScaleRight(t),this.createActionNoScale(t)]:(o=[],n=t.metaInfo(),n.TVScriptSourceCode&&n.scriptIdPart&&(o=[a.viewSourceCode]),h=[],h=h.concat([a.format]),h=h.concat(o),h=h.concat([l?a.studyHide:this.createActionShow(t),this.createVisualOrderAction(t),new y]),s=this._mergeContentMenuItems(t),
s.length&&s.push(new y),h=h.concat(s),h.push(this.createActionScaleLeft(t)),h.push(this.createActionScaleRight(t)),h.push(this.createActionNoScale(t)),h.push(new y),e.enabled("datasource_copypaste")&&(r=new m({text:$.t("Copy"),shortcut:"Ctrl-C"}),r.callbacks().subscribe(null,function(){i.onAppClipboardCopy(t)}),h.push(r)),h.push(a.studyRemove)),c=w.createMenu(h)):c=w.createMenu(h)},n.prototype.createLineToolTemplateAction=function(t){var e,i,o,n,s,r=t.properties(),a=window.lineToolPropertiesToolbar.templatesList,l=new m({text:$.t("Templates")});return l.subActions||(l.subActions=[]),e=l.subActions,i=new m({text:$.t("Save As...")}),i.callbacks().subscribe(this,function(){a.showSaveDialog(t)}),e.push(i),o=new m({text:$.t("Apply Default")}),o.callbacks().subscribe(this,function(){r.restoreFactoryDefaults(),window.lineToolPropertiesToolbar.onSourceChanged(t)}),e.push(o),n=$.Deferred(),a.templatesLoaded().then(function(){var t=a.getData(),e=[];0!==t.length&&e.push(new y),$.each(t,function(t,i){function o(t){return function(){var e=this.getTopLevelMenu();return e&&e.hide(),a.deleteAction(t),!0}}var n=new m({text:i});n.callbacks().subscribe(this,function(){a.loadTemplate(i)}),n.deleteButton={action:o(n.text)},e.push(n)}),n.resolve(e)}),s=new v(n),e.push(s),l},n.prototype._lineContextMenu=function(t){var o,s,r,a,l=this._chart.actions(),h=[],c=this._chart,d=i(292).hasStylesPropertyPage;if(this._chart.readOnly())h.push(l.lineHide);else if(t.userEditEnabled()&&(e.enabled("alerts")&&!this.chart().onWidget()&&t.hasAlert.value()&&h.push(this._createEditAlertDrawingAction(t)),d(t,this._chart.model())&&h.push(l.format),h.push(l.paneObjectTree),e.enabled("charting_library_base")||h.push(this.createLineToolTemplateAction(t)),h.push(this.createVisualOrderAction(t)),h.push(new y),h.push(l.lineHide),h.push(l.lineToggleLock),t.properties().clonable&&t.properties().clonable.value()&&(o=new m({text:$.t("Clone"),callbackContext:{target:t}}),o.callbacks().subscribe(this,n.prototype.cloneLineTool.bind(this,t)),h.push(o)),e.enabled("datasource_copypaste")&&!t.properties().blockCopying&&(s=new m({text:$.t("Copy"),shortcut:"Ctrl-C"}),s.callbacks().subscribe(null,function(){c.onAppClipboardCopy(t)}),h.push(s)),e.enabled("support_multicharts")&&(t.linkKey?h.push(l.lineUnlink):h.push(l.lineCopyToCharts)),h.push(l.lineRemove),t.additionalActions))for(h.push(new y),l=t.additionalActions(this._chart.model()),r=0;r<l.length;r++)h.push(l[r]);return a=w.createMenu(h)},n.prototype._tradingDrawingsContextMenu=function(t){return w.createMenu(t.contextMenuItems())},n.prototype._chartEventsContextMenu=function(t){var e,i=[],o=this._chart,n=new m({text:$.t("Format..."),enabled:!0});return n.callbacks().subscribe(this,function(t){TVSettings.setValue("properties_dialog.active_tab.chart",$.t("Events & Alerts")),o.showChartProperties()}),i.push(n),e=new m({text:$.t("Hide Events on Chart"),enabled:!0}),e.callbacks().subscribe(this,function(e){t.properties().visible.setValue(!1)}),i.push(e),w.createMenu(i)},n.prototype._createAlertToggleHorzLineLabelAction=function(t){var e=t.properties().line.visible,i=new m({checkable:!0,text:$.t("Extend Alert Line"),enabled:!0,checked:e.value()});return i.callbacks().subscribe(this,function(t){var i=t.checked,o=i?$.t("Show alert label line"):$.t("Hide alert label line");this._chart.model().setProperty(e,i,o)}),i.setEnabled(t.globalProperties().line.visible.value()),i},n.prototype._createShowGlobalAlertPropertiesLabelAction=function(t){var e=this.chart(),i=new m({text:$.t("Visual settings...")});return i.callbacks().subscribe(this,function(t){e.showChartProperties({selectAlertEvent:!0})}),i},n.prototype._createEditAlertDrawingAction=function(t){if(t.hasAlert.value()){var e=new m({text:$.t("Edit {0} Alert...").format(t.title())});return e.callbacks().subscribe(null,function(){runOrSignIn(function(){t.editAlert()},{source:"Alert edit from pane context menu"})}),e}},n.prototype.cloneLineTool=function(t){this._chart.model().cloneLineTool(t)},n.prototype.setPriceAxisSize=function(t,e){this._priceAxisWidget(t).setSize(e)},n.prototype.setPriceAxisVisible=function(t,e){this._priceAxisWidget(t).setVisible(e),this._cachedStatus=null},n.prototype.resetPriceAxisOptimalWidth=function(t){this._priceAxisWidget(t).resetOptimalWidth(),this._cachedStatus=null},n.prototype.setSize=function(t){this.size&&this.size.equals(t)||(this.size=t,L(this.canvas,t),L(this.top_canvas,t),this.ctx=this.canvas.getContext("2d"),this.jqPane.width(t.w),this.jqPane.height(t.h),this._cachedStatus=null,this.jqRow.toggleClass("js-hidden",0===t.h))},n.prototype.dataSourceAtPoint=function(t,e){var i,n,s,r,a,l,h,c,d,p,u,_,f,g,m=null,v=null;if(!this._state)return null;for(i=this._state.hitTestSources(),n=i.length;0<n--;)if(s=i[n],r=s.paneViews(this._state))for(a=r.length;0<a--;)l=r[a].renderer(e),l&&l.hitTest&&(h=l.hitTest(new o.Point(t,e)),h&&(c=v?v.result():0,h.result()>c&&(v=h,m=s)));if(this.containsMainSeries()){for(d=this._chart.model().barsMarksSources(),n=0;n<d.length;++n)for(s=d[n],r=s.paneViews(),a=0;a<r.length;a++)if(l=r[a].renderer(e),p=l.hitTest(new o.Point(t,e))){v=p,m=s;break}u=this._chart.model().activeStrategySource().value(),_=u&&u._strategyOrdersPaneView,_&&(f=_.renderer(),f&&(g=f.hitTest(new o.Point(t,e)))&&(v=g,m=u))}return null===m&&(m=this.legendWidget.dataSourceAtPoint(t,e)),{source:m,hittest:v}},n.prototype.update=function(){this.lhsPriceAxisWidget.update(),this.rhsPriceAxisWidget.update(),this.legendWidget.update(),this.paneControls&&this.paneControls.update()},n.prototype.updateControls=function(){this.paneControls&&this.paneControls.update()},n.prototype.drawBackground=function(t,e){k(t,0,0,this.size.w,this.size.h,e)},n.prototype.drawGrid=function(t){var e,i,o=this._chart.model().gridSource(),n=o.paneViews(this._state);for(e=0;e<n.length;e++)t.save(),i=n[e].renderer(t.canvas.height),i&&i.draw(t),t.restore()},n.prototype.drawWatermark=function(t){var e,i,o=this._chart.model().watermarkSource(),n=o.paneViews(this._state);for(e=0;e<n.length;e++)t.save(),i=n[e].renderer(t.canvas.height),i&&i.draw(t),t.restore()},n.prototype.drawCrossHair=function(t){var e=this._chart.model().crossHairSource();!e.visible&&b.lockTimeAxis().value()&&(e.setLockedPosition(this._state),e.updateAllViews()),this._drawSource(e,t)},n.prototype._drawSource=function(t,e){var i,o,n=t.paneViews(this._state);if(n)for(i=0;i<n.length;i++)o=n[i].renderer(e.canvas.height),o&&(e.save(),o.draw(e),e.restore())},n.prototype._drawSourceStrategyOrders=function(t,e){var i,o=t._strategyOrdersPaneView;o&&(i=o.renderer(),i&&(e.save(),i.draw(e),e.restore()))},n.prototype._drawSourceBackground=function(t,e){var i,o,n=t.paneViews(this._state);if(n)for(i=0;i<n.length;i++)o=n[i].renderer(e.canvas.height),o&&o.drawBackground&&(e.save(),o.drawBackground(e),e.restore())},n.prototype.drawActiveLineTool=function(t){var e,i,o,n=[this._chart.model().lineBeingCreated(),this._chart.model().sourceBeingMoved(),this._chart.model().lineBeingEdited()];for(e=0;e<n.length;e++)i=n[e],i&&(o=this._chart.model().paneForSource(i),o===this._state&&this._drawSource(i,t))},n.prototype.disableDrawOnTop=function(t){return t&&t.hasOwnProperty("_metaInfo")&&"Volume@tv-basicstudies"===t._metaInfo.id},n.prototype.drawSources=function(t){var e,i,o,n,s=this._state.orderedSources(),r=this._state.model(),a=this._chart.model().hoveredSource(),l=r.crossHairSource(),h=[this._chart.model().lineBeingCreated(),this._chart.model().sourceBeingMoved(),this._chart.model().lineBeingEdited()];for(this.disableDrawOnTop(a)&&(a=void 0),e=this._chart.model().model().panes(),i=e.length-1;i>=0;i--)e[i].createDrawingsCaches();for(i=0;i<s.length;i++)this._drawSourceBackground(s[i],t);for(i=0;i<s.length;i++)o=s[i],o!==l&&o!==a&&h.indexOf(o)===-1&&this._drawSource(o,t);for(a&&h.indexOf(a)===-1&&s.indexOf(a)!==-1&&this._drawSource(a,t),n=this._chart.model().activeStrategySource().value(),n&&this.containsMainSeries()&&this._drawSourceStrategyOrders(n,t),i=e.length-1;i>=0;i--)e[i].clearDrawingCaches()},n.prototype.recalculatePriceScale=function(){var t,e,i,o=this._state;for(o.recalculatePriceScale(o.m_rightPriceScale),o.recalculatePriceScale(o.m_leftPriceScale),t=o.dataSources(),e=0;e<t.length;++e)i=t[e],o.isOverlay(i)&&(i instanceof p||o.recalculatePriceScale(i.priceScale()),i.updateAllViews())},n.prototype.containsMainSeries=function(){return this._state.containsMainSeries()},n.prototype.drawBarsMarks=function(t,e){var i,o;this.containsMainSeries()&&!e&&(i=this._chart.model().barsMarksSources(),o=this,i.map(function(e){o._drawSource(e,t)}))},n.prototype._syncOverlays=function(){var t,e,i=this._state.orderedSources(),o={},n=this;$.each(i,function(){var t,e,i=this.paneViews(n._state);if(i)for(t=0;t<i.length;t++)e=i[t],e.uid&&(o[e.uid()]=e)});for(t in this._overlays)o[t]||(this._dv.remove(this._overlays[t]),this._overlays[t]=void 0);for(t in o)this._overlays[t]||(e=o[t].overlay(),this._dv.append(e),this._overlays[t]=e)},n.prototype.paint=function(t,e){if(t&&this._chart.model())if(this.lhsPriceAxisWidget.paint(t),this.rhsPriceAxisWidget.paint(t),t===C.FULL_UPDATE&&(this._cachedStatus=null),t===C.UPDATE_CURSOR_ONLY)this.top_ctx.clearRect(-.5,-.5,this.size.w,this.size.h),this.drawCrossHair(this.top_ctx),this.drawActiveLineTool(this.top_ctx);else{var i=this.ctx;this.top_ctx.clearRect(-.5,-.5,this.size.w,this.size.h),this.drawBackground(i,this.backgroundColor()),this._state&&(this.recalculatePriceScale(),this.drawGrid(i),this.drawWatermark(i),this.drawSources(i),this.drawBarsMarks(i,e),this.drawCrossHair(this.top_ctx),this.drawActiveLineTool(this.top_ctx))}},n.prototype.leftPriceAxisWidget=function(){return this.lhsPriceAxisWidget},n.prototype.rightPriceAxisWidget=function(){return this.rhsPriceAxisWidget},n.prototype._priceAxisWidget=function(t){return h.isLeft(t)?this.lhsPriceAxisWidget:this.rhsPriceAxisWidget},n.prototype.statusWidget=function(){return this.legendWidget},n.prototype.onScaleLeft=function(t){var e=t.callbackContext();this._state.leftPriceScale().dataSources().indexOf(e)===-1&&this.chart().model().move(e,this._state,this._state.leftPriceScale())},n.prototype.onScaleRight=function(t){var e=t.callbackContext();this._state.rightPriceScale().dataSources().indexOf(e)===-1&&this.chart().model().move(e,this._state,this._state.rightPriceScale())},n.prototype.onNoScale=function(t){var e=t.callbackContext();this._state.isOverlay(e)||this.chart().model().move(e,this._state,null)},n.prototype.onRiskReward=function(t){t.callbackContext()},n.prototype.createActionRiskReward=function(t){var e=new m({checkable:!1,text:$.t("Risk/Reward"),enabled:!0});return e.setCallbackContext(t),e.callbacks().subscribe(this,n.prototype.onRiskReward),e},n.prototype.createActionScaleLeft=function(t){var e=new m({checkable:!0,text:$.t("Scale Left"),enabled:!0});return e.setCallbackContext(t),e.setChecked(this._state.leftPriceScale().dataSources().indexOf(t)!==-1),e.callbacks().subscribe(this,n.prototype.onScaleLeft),e},n.prototype.createActionScaleRight=function(t){var e=new m({checkable:!0,text:$.t("Scale Right"),enabled:!0});return e.setCallbackContext(t),e.setChecked(this._state.rightPriceScale().dataSources().indexOf(t)!==-1),e.callbacks().subscribe(this,n.prototype.onScaleRight),e},n.prototype.createActionNoScale=function(t){var e=this._chart.model().paneForSource(t),i=e.actionNoScaleIsEnabled(t),o=new m({checkable:!0,text:$.t("Screen (No Scale)"),enabled:i});return o.setCallbackContext(t),o.setChecked(this._state.isOverlay(t)),o.callbacks().subscribe(this,n.prototype.onNoScale),o},n.prototype.createActionShowCountdown=function(t){var e=i(295).ActionBinder,o=new m({checkable:!0,text:$.t("Show Countdown"),enabled:!0}),n=this._chart.model().mainSeries().properties();return o._binding=new e(o,n.showCountdown,this._chart.model(),o.text),o._binding.setValue(n.showCountdown.value()),o},n.prototype.createActionLockScale=function(t){var e,o,n,s=i(295).ActionBinder;return t instanceof TradingView.Series?(e=new m({checkable:t.properties().lockScale.value(),text:$.t("Lock Scale"),enabled:!0}),o=this,n=function(e){this._undoModel.setLockScaleProperty(this._property,e.checked,t,this._undoText)},e._binding=new s(e,t.properties().lockScale,this._chart.model(),e.text,n),e):null},n.prototype.createActionMergeUp=function(t){var e,i=this._chart.model().paneForSource(t),o=i!==this._chart.model().panes()[0];return o?(e=new m({checkable:!1,text:$.t("Merge Up"),enabled:!0}),e.setCallbackContext(t),e.callbacks().subscribe(this,n.prototype.onMergeUp),e):null},n.prototype.onMergeUp=function(t){var e=t.callbackContext(),i=this._chart.model().paneForSource(e),o=this._chart.model().panes().indexOf(i),n=this._chart.model().panes()[o-1],s=n.findSuitableScale(e);this._chart.model().move(e,n,s)},n.prototype.createActionUnmergeUp=function(t){var e,i=this._chart.model().paneForSource(t),o=i.dataSources().filter(function(t){return TradingView.isInherited(t.constructor,f)&&t.showInObjectTree()}).length>1;return o?(e=new m({checkable:!1,text:$.t("Unmerge Up"),enabled:!0}),e.setCallbackContext(t),e.callbacks().subscribe(this,n.prototype.onUnmergeUp),e):null},n.prototype.onUnmergeUp=function(t){var e=t.callbackContext(),i=this._chart.model().paneForSource(e),o=this._chart.model().panes().indexOf(i),n=this._chart.model().createPane(o),s=n.findSuitableScale(e);this._chart.model().move(e,n,s)},n.prototype.createActionMergeDown=function(t){var e,i=this._chart.model().paneForSource(t),o=this._chart.model().panes(),s=i!==o[o.length-1];return s?(e=new m({checkable:!1,text:$.t("Merge Down"),enabled:!0}),e.setCallbackContext(t),e.callbacks().subscribe(this,n.prototype.onMergeDown),e):null},n.prototype.onMergeDown=function(t){var e=t.callbackContext(),i=this._chart.model().paneForSource(e),o=this._chart.model().panes().indexOf(i),n=this._chart.model().panes()[o+1],s=n.findSuitableScale(e);this._chart.model().move(e,n,s)},n.prototype.createActionUnmergeDown=function(t){var e,i=this._chart.model().paneForSource(t),o=i.dataSources().filter(function(t){return TradingView.isInherited(t.constructor,f)&&t.showInObjectTree()}).length>1;return o?(e=new m({checkable:!1,text:$.t("Unmerge Down"),enabled:!0}),e.setCallbackContext(t),e.callbacks().subscribe(this,n.prototype.onUnmergeDown),e):null},n.prototype.onUnmergeDown=function(t){var e=t.callbackContext(),i=this._chart.model().paneForSource(e),o=this._chart.model().panes().indexOf(i),n=this._chart.model().createPane(o+1),s=n.findSuitableScale(e);this._chart.model().move(e,n,s)},n.prototype._mergeContentMenuItems=function(t){var e=[],i=this.createActionMergeUp(t);return i&&e.push(i),i=this.createActionUnmergeUp(t),i&&e.push(i),i=this.createActionMergeDown(t),i&&e.push(i),i=this.createActionUnmergeDown(t),i&&e.push(i),e},n.prototype.createActionShow=function(t){var e=i(295).ActionBinder,o=new m({checkable:!0,text:$.t("Show"),enabled:!0});return o._binding=new e(o,t.properties().visible,this._chart.model(),o.text),o._binding.setValue(t.properties().visible.value()),o},n.prototype.bringObjectForward=function(t){var e=this._chart.model().selectedSource();e&&this._chart.model().changeZOrder(e,1)},n.prototype.sendObjectToBack=function(t){var e=this._chart.model().selectedSource();e&&this._chart.model().sendToBack(e)},n.prototype.bringObjectToFront=function(t){var e=this._chart.model().selectedSource();e&&this._chart.model().bringToFront(e)},n.prototype.sendObjectBackward=function(t){var e=this._chart.model().selectedSource();e&&this._chart.model().changeZOrder(e,-1)},n.prototype.createVisualOrderAction=function(t){var e,i,o,s,r,a,l=new m({text:$.t("Visual Order")});return l.subActions||(l.subActions=[]),e=new m({text:$.t("Bring to Front")}),e.callbacks().subscribe(this,n.prototype.bringObjectToFront),l.subActions.push(e),i=new m({text:$.t("Send to Back")}),i.callbacks().subscribe(this,n.prototype.sendObjectToBack),l.subActions.push(i),o=new m({text:$.t("Bring Forward")}),o.callbacks().subscribe(this,n.prototype.bringObjectForward),l.subActions.push(o),s=new m({text:$.t("Send Backward")}),s.callbacks().subscribe(this,n.prototype.sendObjectBackward),l.subActions.push(s),r=this._chart.model().paneForSource(t),a=r.getZOrderMinMax(),i.setEnabled(!0),o.setEnabled(!0),s.setEnabled(!0),e.setEnabled(!0),t.zorder()===a.minZOrder&&(i.setEnabled(!1),s.setEnabled(!1)),t.zorder()===a.maxZOrder&&(o.setEnabled(!1),e.setEnabled(!1)),l},n.prototype.image=function(){var t={};return t.leftAxis=this.leftPriceAxisWidget().image(),t.rightAxis=this.rightPriceAxisWidget().image(),t.content=this.canvas.toDataURL(),t.contentWidth=this.size.w,t.contentHeight=this.size.h,t},n.prototype._updateTooltip=function(t,e){if(!this._rafSet){var i=this;requestAnimationFrame(function(){i._updateTooltipImpl(t,e),i._rafSet=!1}),this._rafSet=!0}},n.prototype._updateTooltipImpl=function(t,e){function i(i){function n(){return TradingView.isMobile.any()?{left:t-o._tooltipSelector.outerWidth()-16,top:e-o._tooltipSelector.outerHeight()-16}:{left:t+16,top:e+16}}TradingView[s].getTooltipText&&(i=TradingView[s].getTooltipText(l)||i),o._tooltipSelector.html(i).removeClass("tooltip-selector-hidden").css(n())}var o,n,s,a,l,h;if(this._chart){for(o=this,n=this._chart.paneWidgets(),s=b.tool.value(),a=this._state.model(),l=a.lineBeingCreated(),h=n.length-1;h>=0;h--)n[h]._hideTooltip();r.isStudyLineTool(s)&&!TradingView.isMobile.any()?i($.t("Click to set a point")):TradingView.isMobile.any()&&"LineToolBrush"!=s&&o.isLineTool(s)&&!o._chart.model().lineBeingCreated()?i($.t("1. Slide your finger to select location for first anchor<br>2. Tap anywhere to place the first anchor")):TradingView.isMobile.any()&&"LineToolBrush"!=s&&o.isLineTool(s)&&i($.t("1. Slide your finger to select location for next anchor<br>2. Tap anywhere to place the next anchor"))}},n.prototype._hideTooltip=function(){this._tooltipSelector.addClass("tooltip-selector-hidden")},n.prototype._updateCrosshairOnZoom=function(){var t,e;b.lockTimeAxis().value()&&(t=this._chart.model(),e=t.crossHairSource(),e.setPosition(e.index,e.price,this._state))},t.exports=n}).call(e,i(1),i(21))},function(t,e,i){(function(t,o){"use strict";function n(t,e){var i="Change Chart Layout to "+Y[e].title;r.call(this,i),this._chartWidgetCollection=t,this._newLayoutId=e,this._oldLayoutId=t.layout.value()}function s(e,i,o,n,s,r,l,h){this._chartWidget=h,this.m_model=new X(e,i,o,n,s,r,l,this,(!!h._containsData)),this.m_undoStack=new a,this.m_redoStack=new a,this.m_zoomStack=new a,this._onRearrangePanes=new t,this._onSimpleZoomIn=new t,this._onSimpleZoomOut=new t}function r(t){this._text=t}function a(){this.m_commands=[],this._onChange=new t}function l(t){r.call(this,t),this._subcommands=[]}function h(t,e,i,o){r.call(this,i),this._targetObj=t,this._newValue=e,this._model=o}function c(t,e,i,o,n){r.call(this,o),this._property=t,this._priceScale=i,this._newValue=e,this._model=n}function d(t,e,i,o,n){r.call(this,o),this._percentage=t,this._priceScale=i,this._newValue=e,this._model=n}function p(t,e,i,o,n){r.call(this,o),this._log=t,this._priceScale=i,this._newValue=e,this._model=n}function u(t,e,i,o,n,s){r.call(this,o),this._style=t,this._mainSeries=i,this._priceAxisProperties=i.properties().priceAxisProperties,this._newValue=e,this._model=n,this._chartWidget=s}function _(t,e,i,o,n){r.call(this,o),this._property=t,this._mainSeries=i,this._priceAxisProperties=i.properties().priceAxisProperties,this._newValue=e,this._model=n}function f(t,e,i,o){this.m_model=t,this.m_pane=e,this.m_priceScale=i,this.m_state=o,this.m_newPriceScaleState=null}function g(t,e,i){r.call(this,i),this.m_model=t,this.m_state=e,this.m_newTimeScaleState=null}function m(t,e,i,o){this._model=t,this._series=e,this._oldSymbol=e.symbol(),this._oldInterval=e.interval(),this._symbol=i,this._interval=o}function v(t,e,i,o){r.call(this,"Insert "+e.id),this._model=t,this._studyMetaInfo=e,this._props=i,this._isOverlay=o}function y(t,e){this._model=t,this._sourceId=e.id()}function w(t,e){this._model=t,this._linetools=e,this._statesByPaneIndexes={}}function b(t,e,i,o){this._model=t,this._sourceId=e.id(),this._oldPane=this._model.paneForSource(e),this._oldPaneIndex=t.panes().indexOf(this._oldPane),this._oldScaleName=this._oldPane.priceScaleName(e.priceScale()),this._pane=i,this._paneIndex=t.panes().indexOf(i),this._pane?this._scaleName=this._pane.priceScaleName(o):this._paneIndex=t.panes().length}function S(t,e,i){r.call(this,"Create line "+i),this._model=t,this._paneIndex=t.panes().indexOf(e),this._lineTool=i}function T(t,e,i,o){this._model=t,this._prevState=e.state(!0),this._nextState=this._prevState}function C(t,e,i,n){this._model=t,this._sourceId=e.id(),i instanceof o.Point?this._origPoint=i.clone():this._origPoint=TradingView.clone(i),this._pointIndex=n}function x(t,e,i){r.call(this,"Change "+e.title()+" Z order"),this._model=t,this._sourceId=e.id(),this._shift=i}function P(t,e){r.call(this,"Change "+e.title()+" Z order"),this._model=t,this._sourceId=e.id()}function L(t,e){r.call(this,"Change "+e.title()+" Z order"),this._model=t,this._sourceId=e.id()}function k(t,e,i){r.call(this,"Remove pane"),this._model=t,this._index=e,this._pane=this._model.panes()[e],this._chart=i}function E(t,e,i,o){r.call(this,"Rearrange panes"),this._model=t,this._index=e,this._direction=i,this._chart=o}function I(t,e,i,o,n,s){this._model=t,this._startBar=e,this._endBar=i,this._startPrice=o,this._endPrice=n,this._pane=s}function A(t,e,i){this._baseCmd=t,this._zoomStack=e,this._inOut=i}function V(t,e,i,o,n){this._model=t,this._paneA=e,this._paneB=i,this._prevStretchA=o,this._currStretchA=n}function M(t,e){r.call(this,"Restore Defaults"),this._model=t,this._defaultProperty=e,this._state=e.state(e._exclusions),this._chartWidget=t._undoModel._chartWidget}function D(t,e){r.call(this,"Apply Chart Theme"),this._model=t,this._newChartProps=TradingView.factoryDefaults("chartproperties"),["candleStyle","hollowCandleStyle","haStyle"].forEach(function(t){e.mainSourceProperties[t].wickUpColor=e.mainSourceProperties[t].wickUpColor||e.mainSourceProperties[t].wickColor,e.mainSourceProperties[t].wickDownColor=e.mainSourceProperties[t].wickDownColor||e.mainSourceProperties[t].wickColor}),e.chartProperties.paneProperties.vertGridProperties=e.chartProperties.paneProperties.vertGridProperties||e.chartProperties.paneProperties.gridProperties,e.chartProperties.paneProperties.horzGridProperties=e.chartProperties.paneProperties.horzGridProperties||e.chartProperties.paneProperties.gridProperties,e.chartProperties.paneProperties.legendProperties=this._model.properties().state().paneProperties.legendProperties,this._newChartProps=$.extend(!0,{},this._newChartProps,e.chartProperties),delete this._newChartProps.scalesProperties.showLeftScale,delete this._newChartProps.scalesProperties.showRightScale,delete this._newChartProps.scalesProperties.scaleSeriesOnly,delete this._newChartProps.scalesProperties.showSeriesLastValue,delete this._newChartProps.scalesProperties.showStudyLastValue,delete this._newChartProps.scalesProperties.showSymbolLabels,delete this._newChartProps.scalesProperties.showStudyPlotLabels,this._newSeriesProps=e.mainSourceProperties,this._newChartProps.symbolWatermarkProperties||(this._newChartProps.symbolWatermarkProperties=defaults("chartproperties.symbolWatermarkProperties"),this._newChartProps.symbolWatermarkProperties.color=this._newChartProps.scalesProperties.textColor),this._oldChartProps=t.properties().state(),delete this._oldChartProps.paneProperties.topMargin,delete this._oldChartProps.paneProperties.bottomMargin,this._oldSeriesProps=t.properties().state().mainSeriesProperties}function B(t,e){r.call(this,"Apply Drawing Template"),this._source=t,this._oldProps=t.properties().state();TradingView.factoryDefaults("linetoolvisibilities");this._newProps=e}function O(t,e,i,o){var n;o=" "+o||"",n=o+" Study template",r.call(this,n),this._model=t,this._oldProps=e,this._newProps=i}function R(t,e,i,o,n){this._model=t,this._pane=e,this._priceScale=i,this._topMargin=o,this._bottomMargin=n,this._oldTopMargin=i.topMargin(),this._oldBottomMargin=i.bottomMargin()}function z(t,e){this._model=t,this._range=e}function N(t,e,i,o,n){r.call(this,t),this._property=e,this._value=i,this._forceSetProperty=n,this._prevValue=e.value(),this._cw=o}function F(t,e){var i,o,n,s,r,a=e.priceScale(),l=[];for(a.isPercent()&&(i=e.firstValue()),o=0;o<t.length;o++)n={offset:t[o].offset,time_t:t[o].time_t},s=t[o].price,a.isPercent()&&(s=a.priceRange().convertToPercent(s,i)),r=a.priceToCoordinate(s),r-=40,s=a.coordinateToPrice(r),a.isPercent()&&(s=a.priceRange().convertFromPercent(s,i)),n.price=s,l.push(n);return l}function H(t,e){r.call(this,"clone "+e.title()),this._model=t,this._originalSource=e}function W(t,e,i){r.call(this,i),this._wv=t,this._newValue=e,this._oldValue=t.value()}function U(t,e){this._model=t,this._sourceId=e.id(),this._linkKey=e.linkKey}function q(t,e,i){r.call(this,"Paste"),this._model=t,this._clipboardData=e,this._paneIndex=this._model.panes().indexOf(i||this._model.paneForSource(this._model.mainSeries()))}function j(t,e){r.call(this,"Paste"),this._model=t,this._clipboardData=e}var Y=i(284),G=i(115),K=i(67).LineDataSource,X=i(108),J=i(74),Z=i(106),Q=i(50).animate,tt=i(288),et=i(73),it=et.DefaultProperty,ot=et.saveDefaultProperties,nt=i(289),st=i(77),rt=i(141),at=rt.Study,lt=function(){function t(t){h&&e(),h=new l(t)}function e(){if(h){var t=h;h=null,t.isEmpty()||n(t)}}function i(){if(c.isEmpty())return!1;var t=c.pop();return t.undo(),d.push(t),!0}function o(){if(d.isEmpty())return!1;var t=d.pop();return t.redo(),c.push(t),!0}function n(t){return h?void h.addCommand(t):(d.clear(),void c.push(t))}function s(){var t=c.isEmpty()?null:c.head();return{lastActualCommand:t}}function r(t){for(;!c.isEmpty()&&t.lastActualCommand!==c.head();)c.pop().undo();d.clear()}var h=null,c=new a,d=new a;return{beginUndoMacro:t,endUndoMacro:e,undo:i,redo:o,pushUndoCommand:n,createUndoCheckpoint:s,undoToCheckpoint:r,undoStack:function(){return c},redoStack:function(){return d},clearStack:function(){c.clear(),d.clear()}}}();lt.setChartLayout=function(t,e){if(t.layout.value()===e)return!1;var i=new n(t,e);i.redo(),this.pushUndoCommand(i)},inherit(n,r),n.prototype.redo=function(){this._chartWidgetCollection.layout.setValue(this._newLayoutId)},n.prototype.undo=function(){this._chartWidgetCollection.layout.setValue(this._oldLayoutId)},inherit(s,tt),s.prototype.FREE_STUDY_LIMIT=10,s.prototype.version=function(){return this.m_model._version},s.prototype.onData=function(t){switch(t.method){case"timescale_update":var e=t.params;this.m_model.updateTimeScale(e.index,e.zoffset,e.changes,e.marks,e.clear)}},s.prototype.paneForSource=function(t){return this.m_model.paneForSource(t)},s.prototype.createPane=function(t){return this.m_model.createPane(t)},s.prototype.dumpViews=function(){return this.m_model.dumpViews()},s.prototype.readOnly=function(){return this.m_model.readOnly()},s.prototype.restart=function(){this.m_model.restart()},s.prototype.disconnect=function(){this.m_model.disconnect()},s.prototype.studiesMetaData=function(){return this.m_model.studiesMetaData()},s.prototype.studyVersioning=function(){return this.m_model.studyVersioning()},s.prototype.chartModel=function(){return this.m_model},s.prototype.undoStack=lt.undoStack,s.prototype.redoStack=lt.redoStack,s.prototype.undo=lt.undo,s.prototype.redo=lt.redo,s.prototype.pushUndoCommand=lt.pushUndoCommand,s.prototype.startScalePrice=function(t,e,i){this.pushUndoCommand(new f(this.m_model,t,e,e.state())),this.chartModel().startScalePrice(t,e,i)},s.prototype.scalePriceTo=function(t,e,i){this.chartModel().scalePriceTo(t,e,i)},s.prototype.endScalePrice=function(t,e){this.chartModel().endScalePrice(t,e)},s.prototype.startScrollPrice=function(t,e,i){e.isAutoScale()||(this._initialPriceScrollState=e.state(),this._initialPriceScrollPos=i,this.chartModel().startScrollPrice(t,e,i))},s.prototype.scrollPriceTo=function(t,e,i){e.isAutoScale()||(this._initialPriceScrollPos&&Math.abs(this._initialPriceScrollPos-i)>20&&(this.pushUndoCommand(new f(this.m_model,t,e,this._initialPriceScrollState)),delete this._initialPriceScrollState,delete this._initialPriceScrollPos),this.chartModel().scrollPriceTo(t,e,i))},s.prototype.endScrollPrice=function(t,e){e.isAutoScale()||(delete this._initialPriceScrollState,delete this._initialPriceScrollPos,this.chartModel().endScrollPrice(t,e))},s.prototype.setPriceAutoScale=function(t,e,i){this.pushUndoCommand(new f(this.m_model,t,e,e.state())),this.chartModel().setPriceAutoScale(t,e,i)},s.prototype.resetPriceScale=function(t,e){this.pushUndoCommand(new f(this.m_model,t,e,e.state())),this.chartModel().resetPriceScale(t,e)},s.prototype.startScaleTime=function(t){this.pushUndoCommand(new g(this.m_model,this.m_model.timeScale().state(),"scale time")),this.chartModel().startScaleTime(t)},s.prototype.scaleTimeTo=function(t){this.chartModel().scaleTimeTo(t)},s.prototype.endScaleTime=function(){this.chartModel().endScaleTime()},s.prototype.startScrollTime=function(t){this._initialTimeScrollState=this.m_model.timeScale().state(),this._initialTimeScrollPos=t,this.chartModel().startScrollTime(t)},s.prototype.scrollTimeTo=function(t){this._initialTimeScrollPos&&Math.abs(t-this._initialTimeScrollPos)>20&&(this.pushUndoCommand(new g(this.m_model,this._initialTimeScrollState,"scroll time")),delete this._initialTimeScrollPos,delete this._initialTimeScrollState),this.chartModel().scrollTimeTo(t)},s.prototype.endScrollTime=function(){this.chartModel().endScrollTime(),delete this._initialTimeScrollPos,delete this._initialTimeScrollState},s.prototype.resetTimeScale=function(){this.pushUndoCommand(new g(this.m_model,this.m_model.timeScale().state())),this.chartModel().resetTimeScale()},s.prototype.canZoomIn=function(){return this.chartModel().canZoomIn()},s.prototype.canZoomOut=function(){return this.chartModel().canZoomOut()},s.prototype.setWidth=function(t){this.m_model.setWidth(t)},s.prototype.setPaneHeight=function(t,e){this.m_model.setPaneHeight(t,e)},s.prototype.gridSource=function(){return this.m_model.gridSource()},s.prototype.watermarkSource=function(){return this.m_model.watermarkSource()},s.prototype.addAlertsSource=function(t){return this.m_model.addAlertsSource(t)},s.prototype.alertsSources=function(){return this.m_model.alertsSources()},s.prototype.barsMarksSources=function(){return this.m_model.barsMarksSources()},s.prototype.crossHairSource=function(){return this.m_model.crossHairSource()},s.prototype.model=function(){return this.m_model},s.prototype.mainSeries=function(){return this.m_model.m_mainSeries},s.prototype.panes=function(){return this.m_model.m_panes},s.prototype.timeScale=function(){return this.m_model.timeScale()},s.prototype.setSelectedSource=function(t,e){this.m_model.setSelectedSource(t,e)},s.prototype.setHoveredSource=function(t,e){this.m_model.setHoveredSource(t,e)},s.prototype.selectedSource=function(){return this.m_model.selectedSource()},s.prototype.onSelectedSourceChanged=function(){return this.m_model.onSelectedSourceChanged()},s.prototype.hoveredSource=function(){return this.m_model.hoveredSource()},s.prototype.activeStrategySource=function(){return this.m_model.activeStrategySource()},s.prototype.invalidate=function(t){this.m_model.invalidate(t)},s.prototype.setCurrentPosition=function(t,e,i,o){this.m_model.setCurrentPosition(t,e,i,o)},s.prototype.modifySeries=function(t,e,i){var o=new m(this.m_model,t,e,i);this.pushUndoCommand(o),o.redo()},s.prototype.insertStudy=function(t,e,i){if(!this.model()._chartApi._chartApi.isCanCreateStudy())return void TVDialogs.showTooManyStudiesNotice();if(TradingView.isFeatureEnabled("indicators_limit")&&!user.is_pro&&this.m_model.countUserStudies()>=this.FREE_STUDY_LIMIT)return TradingView.trackGoProFeature("studyLimit"),void TVDialogs.showGoProDialog({feature:"studyLimit"});if(TradingView.isFeatureEnabled("backtesting")||!t.isTVScriptStrategy){var o=new v(this.m_model,t,e,i);return this.pushUndoCommand(o),o.redo()}},s.prototype.setProperty=function(t,e,i){if(t&&t.value()!==e){var o=new h(t,e,i,this.m_model);
this.pushUndoCommand(o),o.redo(),this.emitEvent("setProperty")}},s.prototype.setPercentProperty=function(t,e,i,o){if(t.value()!==e){var n=new d(t,e,i,o,this.m_model);this.pushUndoCommand(n),n.redo()}},s.prototype.setLogProperty=function(t,e,i,o){if(t.value()!==e){var n=new p(t,e,i,o,this.m_model);this.pushUndoCommand(n),n.redo()}},s.prototype.setAutoScaleProperty=function(t,e,i,o){if(t.value()!==e){var n=new c(t,e,i,o,this.m_model);this.pushUndoCommand(n),n.redo()}},s.prototype.setChartStyleProperty=function(t,e,i){if(t.value()!==e){var o=new u(t,e,this.mainSeries(),i,this.m_model,this._chartWidget);this.pushUndoCommand(o),o.redo(),this.emitEvent("setChartStyleProperty")}},s.prototype.setLockScaleProperty=function(t,e,i,o){if(t.value()!==e){var n=new _(t,e,i,o,this.m_model);this.pushUndoCommand(n),n.redo()}},s.prototype.setScreenChartProperty=function(t,e,i,o,n){if(n||t.value()!==e){var s=new N(o,t,e,i,n);this.pushUndoCommand(s),s.redo()}},s.prototype.beginUndoMacro=lt.beginUndoMacro,s.prototype.endUndoMacro=lt.endUndoMacro,s.prototype.createUndoCheckpoint=lt.createUndoCheckpoint,s.prototype.undoToCheckpoint=lt.undoToCheckpoint,s.prototype.removeSource=function(t,e){var i,o=e||!1;t.isUserDeletable()&&(i=new y(this.m_model,t),this.pushUndoCommand(i),i.redo(),o||this.emitEvent("removeSource",[t]))},s.prototype.removeSelectedSource=function(){var t,e=this.m_model.selectedSource();e&&e.isUserDeletable()&&(this.setSelectedSource(null),t=new y(this.m_model,e),this.pushUndoCommand(t),t.redo(),this.emitEvent("removeSource",[e]))},s.prototype.removeLineTools=function(t){var e=new w(this.m_model,t);this.pushUndoCommand(e),e.redo()},s.prototype.move=function(t,e,i){var o=new b(this.m_model,t,e,i);this.pushUndoCommand(o),o.redo(),this.emitEvent("moveSource",[t])},s.prototype.createLineTool=function(t,e,i,o,n){var s,r;return"LineToolRegressionTrend"!=i||this.model()._chartApi._chartApi.isCanCreateStudy()?(this._createLineCommand=new S(this.m_model,t,i),s=this._createLineCommand.startCreatingLine(e,o,n),r=this._createLineCommand.line(),s&&(this.pushUndoCommand(this._createLineCommand),delete this._createLineCommand),r):void TVDialogs.showTooManyStudiesNotice()},s.prototype.lineBeingCreated=function(){return this.m_model.lineBeingCreated()},s.prototype.paneBeingCreatedLineOn=function(){return this.m_model.paneBeingCreatedLineOn()},s.prototype.coninueCreatingLine=function(t,e,i){var o=this._createLineCommand.continueCreatingLine(t,e,i);return o&&(this.pushUndoCommand(this._createLineCommand),delete this._createLineCommand),o},s.prototype.finishLineTool=function(t){this.m_model.finishLineTool(t)},s.prototype.cancelCreatingLine=function(){this.m_model.cancelCreatingLine()},s.prototype.lineCancelled=function(){return this.m_model.lineCancelled()},s.prototype.startChangingLinetool=function(t,e,i,o){this._currentLineChangeCommand=new T(this.m_model,t,i,o),this.m_model.startChangingLinetool(t,e,i,o)},s.prototype.lineBeingEdited=function(){return this.m_model.lineBeingEdited()},s.prototype.changeLinePoint=function(t,e){this._currentLineChangeCommand.setPoint(t,e),this.m_model.changeLinePoint(t,e)},s.prototype.endChangingLinetool=function(t){this.m_model.endChangingLinetool(t),this._currentLineChangeCommand.endChanging(),this.pushUndoCommand(this._currentLineChangeCommand),this._currentLineChangeCommand=null},s.prototype.startMovingSource=function(t,e,i){this._currentLineMoveCommand=new C(this.m_model,t,e,i),this.m_model.startMovingSource(t,e,i)},s.prototype.sourceBeingMoved=function(){return this.m_model.sourceBeingMoved()},s.prototype.moveSource=function(t){this._currentLineMoveCommand.setPoint(t),this.m_model.moveSource(t)},s.prototype.endMovingSource=function(t){this.m_model.endMovingSource(t),this._currentLineMoveCommand._point&&(this.pushUndoCommand(this._currentLineMoveCommand),this._currentLineChangeCommand=null)},s.prototype.dataSources=function(){return this.m_model.dataSources()},s.prototype.state=function(t,e){return this.m_model.state(t,e)},s.prototype.asyncState=function(t){return this.m_model.asyncState(t)},s.prototype.restoreState=function(t,e){return this.m_model.restoreState(t,e)},s.prototype.calculateDefaultTags=function(){return this.m_model.calculateDefaultTags()},s.prototype.onTagsChanged=function(){return this.m_model.onTagsChanged()},s.prototype.changeZOrder=function(t,e){var i=new x(this.m_model,t,e);this.pushUndoCommand(i),i.redo(),this.emitEvent("changeZOrder",[t,e])},s.prototype.sendToBack=function(t){var e=new P(this.m_model,t);this.pushUndoCommand(e),e.redo(),this.emitEvent("changeZOrder",[t])},s.prototype.bringToFront=function(t){var e=new L(this.m_model,t);this.pushUndoCommand(e),e.redo(),this.emitEvent("changeZOrder",[t])},s.prototype.removeAllStudies=function(){var t,e,i;for(this.beginUndoMacro("remove all studies"),t=this.m_model.dataSources(),e=0;e<t.length;e++)i=t[e],TradingView.isInherited(i.constructor,at)&&i.removeByRemoveAllStudies()&&this.removeSource(i);this.endUndoMacro()},s.prototype.removeAllDrawingTools=function(t){var e,i,o;for(this.beginUndoMacro("remove all drawing tools"),e=this.m_model.dataSources(),i=0;i<e.length;i++)o=e[i],TradingView.isInherited(o.constructor,K)&&o.isActualSymbol()&&o.isUserDeletable()&&(t&&t!=o._constructor||this.removeSource(o));this.endUndoMacro()},s.prototype.unlinkLine=function(t){var e=new U(this.m_model,t);this.pushUndoCommand(e),e.redo()},s.prototype.copyToOtherCharts=function(t){this.m_model.copyToOtherCharts(t)},s.prototype.moveDown=function(){var t,e,i,o,n;try{this.beginUndoMacro("Move Down")}catch(s){return}t=this,e=this.m_model.mainSeries(),i=this.m_model.paneForSource(e),o=i.priceScaleForSource(e),o.setAutoScale(!1),n=o.height(),Q(n/5,function(e){t.startScrollPrice(i,o,0),t.scrollPriceTo(i,o,e),t.endScrollPrice(i,o)},function(){t.endUndoMacro()})},s.prototype.moveUp=function(){var t,e,i,o,n;try{this.beginUndoMacro("Move Up")}catch(s){return}t=this,e=this.m_model.mainSeries(),i=this.m_model.paneForSource(e),o=i.priceScaleForSource(e),o.setAutoScale(!1),n=o.height(),Q(n/5,function(e){t.startScrollPrice(i,o,e),t.scrollPriceTo(i,o,0),t.endScrollPrice(i,o)},function(){t.endUndoMacro()})},s.prototype.moveLeft=function(){var t,e;try{this.beginUndoMacro("Move Left")}catch(i){return}t=this.m_model.timeScale().width(),e=this,Q(t/5,function(t){e.startScrollTime(t),e.scrollTimeTo(0),e.endScrollTime()},function(){e.endUndoMacro()})},s.prototype.moveRight=function(){var t,e;try{this.beginUndoMacro("Move Right")}catch(i){return}t=this.m_model.timeScale().width(),e=this,Q(t/5,function(t){e.startScrollTime(0),e.scrollTimeTo(t),e.endScrollTime()},function(){e.endUndoMacro()})},s.prototype.scrollChart=function(t){this.startScrollTime(0),this.scrollTimeTo(t),this.endScrollTime()},s.prototype.scrollChartByBar=function(t){var e=t*this.m_model.timeScale().barSpacing();this.startScrollTime(0),this.scrollTimeTo(e),this.endScrollTime()},s.prototype.zoomIn=function(t,e){var i,o,n=this.m_model.timeScale().width(),s=this;if(e=e||1,this.canZoomIn())if(t)i=e*n/10,o=i*((t+1)/2),this.startScaleTime(i),this.scaleTimeTo(0),this.endScaleTime(),this.startScrollTime(0),this.scrollTimeTo(i-o),this.endScrollTime(),this._onSimpleZoomIn.fire();else{try{this.beginUndoMacro("Zoom In")}catch(r){return}Q(n/5,function(t){s.startScaleTime(t),s.scaleTimeTo(0),s.endScaleTime()},function(){s.endUndoMacro(),s._onSimpleZoomIn.fire()})}},s.prototype.zoomOut=function(t,e){var i=this.m_model.timeScale().width(),o=this;if(e=e||1,this.canZoomOut())if(t)this.startScaleTime(0),this.scaleTimeTo(e*i/10),this.endScaleTime(),this.startScrollTime(e*(i/20-i/20*t)),this.scrollTimeTo(0),this.endScrollTime(),this._onSimpleZoomOut.fire();else{try{this.beginUndoMacro("Zoom Out")}catch(n){return}Q(i/5,function(t){o.startScaleTime(0),o.scaleTimeTo(t),o.endScaleTime()},function(){o.endUndoMacro(),o._onSimpleZoomOut.fire()})}},s.prototype.resetScales=function(){var t,e;for(this.beginUndoMacro("Reset scales"),this.resetTimeScale(),t=0;t<this.panes().length;t++)e=this.panes()[t],this.resetPriceScale(e,e.leftPriceScale()),this.resetPriceScale(e,e.rightPriceScale());this.endUndoMacro(),this.m_model.recalculateAllPanes()},s.prototype.zoomToViewport=function(t,e,i,o,n){var s=new I(this.m_model,t,e,i,o,n),r=new A(s,this.m_zoomStack,(!0));r.redo(),this.pushUndoCommand(r)},s.prototype.zoomFromViewport=function(){var t=new A(this.m_zoomStack.head(),this.m_zoomStack,(!1));t.redo(),this.pushUndoCommand(t)},s.prototype.zoomStack=function(){return this.m_zoomStack},s.prototype.addPaneStretchFactorUndoCommand=function(t,e,i,o){var n=new V(this.m_model,t,e,i,o);this.pushUndoCommand(n)},s.prototype.restoreFactoryDefaults=function(t){var e=new M(this.m_model,t);e.redo(),this.pushUndoCommand(e)},s.prototype.chartLoadTheme=function(t,e){var i=new D(t,e);i.redo(),this.pushUndoCommand(i)},s.prototype.drawingLoadTemplate=function(t,e){var i=new B(t,e);i.redo(),this.pushUndoCommand(i)},s.prototype.studyLoadTemplate=function(t,e,i,o){var n=new O(t,e,i,o);n.redo(),this.pushUndoCommand(n)},s.prototype.onRearrangePanes=function(){return this._onRearrangePanes},s.prototype.onSimpleZoomIn=function(){return this._onSimpleZoomIn},s.prototype.onSimpleZoomOut=function(){return this._onSimpleZoomOut},s.prototype.loadRange=function(t){t.res!==this.m_model.mainSeries().properties().interval.value()?(this.m_model.mainSeries()._pendingInterval=t.val,this.setProperty(this.m_model.mainSeries().properties().interval,t.res,"Change date range")):this.m_model.mainSeries().loadDataTo(t.val)},s.prototype.cloneLineTool=function(t){var e=new H(this.m_model,t);e.redo(),this.pushUndoCommand(e),this.emitEvent("cloneLineTool")},s.prototype._preparePriceAxisProperties=function(t,e){var i=t.lockScale.value(),o=t.style.value()==st.STYLE_PNF;(o||i)&&(e.log.setValue(!1),e.percentage.setValue(!1)),e.logDisabled.setValue(!(!o&&!i)),e.percentageDisabled.setValue(!(!o&&!i))},s.prototype.alertsList=function(){return this.m_model.alertsList()},s.prototype.alertsListChanged=function(){return this.m_model.alertsListChanged()},s.prototype.insertStudyStub=function(t){return this.m_model.insertStudyStub(t)},s.prototype.removeStudyStub=function(t){return this.m_model.removeStudyStub(t)},s.prototype.isJustClonedChart=function(){return this._chartWidget.isJustClonedChart()},s.prototype.copySourceToClip=function(t){if(t&&!t.properties().blockCopying){var e={};if(t instanceof K)e.type="drawing",e.geometry=t.geometry();else{if(!(t instanceof at))return!1;e.type="study"}return e.source=t.state&&t.state(),delete e.source.alertId,delete e.source.linkKey,!!e.source&&(e.title=t.title&&t.title(),e.modelId=this.m_model._id,nt.set(e),!0)}},s.prototype.cutSourceToClip=function(t){var e=this.copySourceToClip(t);return!!e&&void this.removeSource(t)},s.prototype.pasteLineTool=function(t,e){var i=new q(this.m_model,e,t);this.pushUndoCommand(i),i.redo()},s.prototype.pasteStudy=function(t){var e=new j(this.m_model,t);this.pushUndoCommand(e),e.redo()},s.prototype.pasteSourceFromClip=function(t,e){var i=nt.get();return!!i&&("drawing"==i.type&&this.pasteLineTool(t,i),void("study"==i.type&&this.pasteStudy(i)))},r.prototype.text=function(){return this._text},r.prototype.undo=function(){throw"pure virtual call ;)"},r.prototype.redo=function(){throw"pure virtual call ;)"},a.prototype.onChange=function(){return this._onChange},a.prototype.isEmpty=function(){return 0===this.m_commands.length},a.prototype.clear=function(){this.m_commands.length=0,this._onChange.fire()},a.prototype.push=function(t){if(!(t instanceof r))throw new TypeError("argument must be an instance of UndoCommand");this.m_commands.push(t),this._onChange.fire()},a.prototype.pop=function(){if(this.isEmpty())return void TradingView.logDebugChart("UndoStack.pop: undo stack is empty");var t=this.m_commands.pop();return this._onChange.fire(),t},a.prototype.head=function(){return this.isEmpty()?void TradingView.logDebugChart("UndoStack.head: undo stack is empty"):this.m_commands[this.m_commands.length-1]},inherit(l,r),l.prototype.addCommand=function(t){this._subcommands.push(t)},l.prototype.isEmpty=function(){return 0===this._subcommands.length},l.prototype.redo=function(){for(var t=0;t<this._subcommands.length;t++)this._subcommands[t].redo()},l.prototype.undo=function(){for(var t=this._subcommands.length-1;t>=0;t--)this._subcommands[t].undo()},inherit(h,r),h.prototype.redo=function(){this._oldValue=this._targetObj.value(),ot(!0),this._targetObj.setValue(this._newValue),ot(!1),this._model&&(this._model.recalculateAllPanes(),this._model.invalidate(new Z(Z.LIGHT_UPDATE)))},h.prototype.undo=function(){ot(!0),this._targetObj.setValue(this._oldValue),ot(!1),this._oldValue=null,this._model&&(this._model.recalculateAllPanes(),this._model.invalidate(new Z(Z.LIGHT_UPDATE)))},inherit(c,r),c.prototype.redo=function(){this._oldValue=this._property.value(),this._oldLockScaleValue=this._priceScale.mainSource()instanceof st?this._priceScale.mainSource().properties().lockScale.value():void 0,ot(!0),this._property.setValue(this._newValue),this._oldLockScaleValue&&this._newValue&&this._priceScale.mainSource().properties().lockScale.setValue(!1),ot(!1),this._model&&(this._model.recalculateAllPanes(),this._model.invalidate(new Z(Z.LIGHT_UPDATE)))},c.prototype.undo=function(){ot(!0),this._property.setValue(this._oldValue),this._oldLockScaleValue&&this._newValue&&this._priceScale.mainSource().properties().lockScale.setValue(this._oldLockScaleValue),ot(!1),this._oldValue=null,this._model&&(this._model.recalculateAllPanes(),this._model.invalidate(new Z(Z.LIGHT_UPDATE)))},inherit(d,r),d.prototype.redo=function(){this._oldValue=this._percentage.value(),this._oldAutoScaleValue=this._priceScale.properties().autoScale.value(),this._oldLogValue=this._priceScale.properties().log.value(),this._oldLogDisabled=this._priceScale.properties().logDisabled.value(),ot(!0),this._percentage.setValue(this._newValue),this._priceScale.properties().autoScaleDisabled.setValue(this._newValue),this._priceScale.properties().log.setValue(!1),ot(!1),this._model&&(this._model.recalculateAllPanes(),this._model.invalidate(new Z(Z.LIGHT_UPDATE)))},d.prototype.undo=function(){if(ot(!0),this._percentage.setValue(this._oldValue),this._priceScale.properties().autoScale.setValue(this._oldAutoScaleValue),this._priceScale.properties().autoScaleDisabled.setValue(this._oldValue),this._priceScale.properties().log.setValue(this._oldLogValue),!(this._oldAutoScaleValue||this._priceScale.mainSource()instanceof st&&this._priceScale.mainSource().isLockScale())){var t=this._model.timeScale().visibleBars();this._priceScale.setPriceRange(this._priceScale.priceRange().convertFromPercents(this._priceScale.mainSource().close(t.firstBar())))}ot(!1),this._oldValue=null,this._model&&(this._model.recalculateAllPanes(),this._model.invalidate(new Z(Z.LIGHT_UPDATE)))},inherit(p,r),p.prototype.redo=function(){this._oldValue=this._log.value(),this._oldPercValue=this._priceScale.properties().percentage.value(),this._oldPercDisabled=this._priceScale.properties().percentageDisabled.value(),ot(!0),this._log.setValue(this._newValue),this._priceScale.properties().percentage.setValue(!1),this._priceScale.properties().autoScaleDisabled.setValue(this._priceScale.properties().percentage.value()),ot(!1),this._model&&(this._model.recalculateAllPanes(),this._model.invalidate(new Z(Z.LIGHT_UPDATE)))},p.prototype.undo=function(){ot(!0),this._log.setValue(this._oldValue),this._priceScale.properties().percentage.setValue(this._oldPercValue),ot(!1),this._oldValue=null,this._model&&(this._model.recalculateAllPanes(),this._model.invalidate(new Z(Z.LIGHT_UPDATE)))},inherit(u,r),u.prototype.redo=function(){var t=$.Deferred().resolve();this._mainSeries._properties.style===this._style&&this._model.mainSeries().isNeedRestart(this._newValue)&&(t=this._chartWidget.screen.show()),t.done(function(){this._oldValue=this._style.value(),this._oldAutoScale=this._priceAxisProperties.autoScale.value(),this._oldLogValue=this._priceAxisProperties.log.value(),this._oldLogDisabled=this._priceAxisProperties.logDisabled.value(),this._oldPercentageValue=this._priceAxisProperties.percentage.value(),this._oldPercentageDisabled=this._priceAxisProperties.percentageDisabled.value(),ot(!0),this._style.setValue(this._newValue),this._chartWidget.model()._preparePriceAxisProperties(this._mainSeries.properties(),this._priceAxisProperties),ot(!1),this._model&&(this._model.recalculateAllPanes(),this._model.invalidate(new Z(Z.LIGHT_UPDATE)))}.bind(this))},u.prototype.undo=function(){var t=$.Deferred().resolve();this._mainSeries._properties.style===this._style&&this._model.mainSeries().isNeedRestart(this._newValue)&&(t=this._chartWidget.screen.show()),t.done(function(){ot(!0),this._style.setValue(this._oldValue),this._priceAxisProperties.log.setValue(this._oldLogValue),this._priceAxisProperties.logDisabled.setValue(this._oldLogDisabled),this._priceAxisProperties.percentage.setValue(this._oldPercentageValue),this._priceAxisProperties.percentageDisabled.setValue(this._oldPercentageDisabled),this._priceAxisProperties.autoScale.setValue(this._oldAutoScale),ot(!1),this._oldValue=null,this._model&&(this._model.recalculateAllPanes(),this._model.invalidate(new Z(Z.LIGHT_UPDATE)))}.bind(this))},inherit(_,r),_.prototype.redo=function(){this._oldValue=this._property.value(),this._oldAutoScale=this._priceAxisProperties.autoScale.value(),this._oldPercentage=this._priceAxisProperties.percentage.value(),this._oldLog=this._priceAxisProperties.log.value(),ot(!0),this._newValue&&(this._priceAxisProperties.percentage.setValue(!1),this._priceAxisProperties.log.setValue(!1),this._priceAxisProperties.autoScale.setValue(!1));var t=this._mainSeries.properties().style.value();t!==st.STYLE_RENKO&&t!==st.STYLE_KAGI&&t!==st.STYLE_PNF&&t!==st.STYLE_PB&&this._mainSeries.fixBoxSize(),this._property.setValue(this._newValue),ot(!1),this._model&&(this._model.recalculateAllPanes(),this._model.invalidate(new Z(Z.LIGHT_UPDATE)))},_.prototype.undo=function(){ot(!0),this._priceAxisProperties.percentage.setValue(this._oldPercentage),this._priceAxisProperties.log.setValue(this._oldLog),this._priceAxisProperties.autoScale.setValue(this._oldAutoScale),this._property.setValue(this._oldValue),ot(!1),this._oldValue=null,this._model&&(this._model.recalculateAllPanes(),this._model.invalidate(new Z(Z.LIGHT_UPDATE)))},inherit(f,r),f.prototype.undo=function(){return null!==this.m_newPriceScaleState?void TradingView.logDebugChart("PriceScaleChangeUndoCommand.undo: Command is already undone"):(this.m_newPriceScaleState=this.m_priceScale.state(),this.m_model.restorePriceScaleState(this.m_pane,this.m_priceScale,this.m_state),void this.m_priceScale.recalcLockedScale(null))},f.prototype.redo=function(){return null===this.m_newPriceScaleState?void TradingView.logDebugChart("PriceScaleChangeUndoCommand.redo: Command is not undone"):(this.m_model.restorePriceScaleState(this.m_pane,this.m_priceScale,this.m_newPriceScaleState),void(this.m_newPriceScaleState=null))},inherit(g,r),g.prototype.undo=function(){return null!==this.m_newTimeScaleState?void TradingView.logDebugChart("TimeScaleChangeUndoCommand.undo: Command is already undone"):(this.m_newTimeScaleState=this.m_model.timeScale().state(),this.m_model.restoreTimeScaleState(this.m_state),void this.m_model.timeScale().recalcLockedScale())},g.prototype.redo=function(){return null===this.m_newTimeScaleState?void TradingView.logDebugChart("TimeScaleChangeUndoCommand.redo: Command is not undone"):(this.m_model.restoreTimeScaleState(this.m_newTimeScaleState),void(this.m_newTimeScaleState=null))},inherit(m,r),m.prototype.redo=function(){this._model.modifySeries(this._series,this._symbol,this._interval)},m.prototype.undo=function(){this._model.modifySeries(this._series,this._oldSymbol,this._oldInterval)},inherit(v,r),v.prototype.redo=function(){var t=null;return this._studyState?(t=this._model.restoreSource(this._restorePane,this._paneIndex,this._paneState,this._studyState,this._priceScaleName),this._studyId!=t.id()&&TradingView.logError("Study was restored improperly - study ids does not match"),delete this._studyState):(t=this._model.insertStudy(this._studyMetaInfo,this._props,this._isOverlay),this._studyId=t.id()),t},v.prototype.undo=function(){var t,e=this._model.dataSourceForId(this._studyId);this._studyState=e.state(),t=this._model.paneForSource(e),this._paneIndex=this._model.panes().indexOf(t),this._priceScaleName=t.priceScaleName(e.priceScale()),this._paneState=t.state(),this._restorePane=this._model.removeSource(e)},inherit(y,r),y.prototype.redo=function(){var t,e,i,o,n=this._model.dataSourceForId(this._sourceId),s=this._model.children(n);for(this._removeChildUndoCommands=[],t=0;t<s.length;t++)e=s[t],i=new y(this._model,e),this._removeChildUndoCommands.push(i),i.redo();this._sourceState=n.state(),o=this._model.paneForSource(n),this._paneIndex=this._model.panes().indexOf(o),this._priceScaleName=o.priceScaleName(n.priceScale()),this._paneState=o.state(),this._restorePane=this._model.removeSource(n)},y.prototype.undo=function(){var t,e,i=this._model.restoreSource(this._restorePane,this._paneIndex,this._paneState,this._sourceState,this._priceScaleName);for(this._sourceId!=i.id()&&TradingView.logError("Source was restored improperly - source ids does not match"),t=this._removeChildUndoCommands.length-1;t>=0;t--)e=this._removeChildUndoCommands[t],e.undo();this._removeChildUndoCommands.length=0},inherit(w,r),w.prototype.redo=function(){var t,e,i;for(t=0;t<this._linetools.length;t++)e=this._model.paneForSource(this._linetools[t]),i=this._model.panes().indexOf(e),this._statesByPaneIndexes[i]=this._statesByPaneIndexes[i]||[],this._statesByPaneIndexes[i].push({state:this._linetools[t].state(),owner:this._linetools[t].ownerSource().id()}),e.removeDataSource(this._linetools[t]);delete this._linetools},w.prototype.undo=function(){var t,e,i,o,n,s,r;this._linetools=[];for(t in this._statesByPaneIndexes)for(e=this._model.panes()[t],i=this._statesByPaneIndexes[t],o=0;o<i.length;o++)n=i[o],s=this._model.dataSourceForId(n.owner),r=e._restoreLineTool(n.state),r.setOwnerSource(s),r.updateAllViews(),this._linetools.push(r);this._model.invalidate(new Z(Z.LIGHT_UPDATE))},inherit(b,r),b.prototype.redo=function(){this._model.panes().indexOf(this._pane)===-1&&(this._pane=this._model.createPane(this._paneIndex)),this._model.move(this._model.dataSourceForId(this._sourceId),this._pane,this._pane.priceScaleByName(this._scaleName)||this._pane.rightPriceScale())},b.prototype.undo=function(){this._model.panes().indexOf(this._oldPane)===-1&&(this._oldPane=this._model.createPane(this._oldPaneIndex)),this._model.move(this._model.dataSourceForId(this._sourceId),this._oldPane,this._oldPane.priceScaleByName(this._oldScaleName))},inherit(S,r),S.prototype.startCreatingLine=function(t,e,i){var o,n;return this._points=[{point:t}],o=this._model.panes()[this._paneIndex],n=this._model.createLineTool(o,t,this._lineTool,e,i),this._lineId=n.id(),!this._model.lineBeingCreated()},S.prototype.continueCreatingLine=function(t,e,i){return this._points||TradingView.logError("continueCreatingLine is called before startCreatingLine"),this._points.push({point:t,envState:e}),this._model.coninueCreatingLine(t,e,i)},S.prototype.line=function(){return this._lineId?this._model.dataSourceForId(this._lineId):null},S.prototype.undo=function(){var t=this.line();t&&(this._lineState=t.state(),this._model.removeSource(t),delete this._lineId)},S.prototype.redo=function(){this._lineState||TradingView.logError("This command was never undone - nothing to redo");var t=this._model.restoreSource(!1,this._paneIndex,null,this._lineState,null);this._lineId=t.id(),delete this._lineState},inherit(T,r),T.prototype.setPoint=function(t){var e=this._model.dataSourceForId(this._nextState.id);this._nextState=e.state(!0)},T.prototype.endChanging=function(){var t=this._model.dataSourceForId(this._nextState.id);this._nextState=t.state(!0)},T.prototype.undo=function(){var t=this._model.dataSourceForId(this._prevState.id),e=this._prevState;this._model.restoreLineToolState(t,e)},T.prototype.redo=function(){var t=this._model.dataSourceForId(this._nextState.id),e=this._nextState;this._model.restoreLineToolState(t,e)},inherit(C,r),C.prototype.setPoint=function(t){t instanceof o.Point?this._point=t.clone():this._point=TradingView.clone(t)},C.prototype.undo=function(){var t=this._model.dataSourceForId(this._sourceId);this._model.startMovingSource(t,this._point,this._pointIndex),this._model.moveSource(this._origPoint),this._model.endMovingSource()},C.prototype.redo=function(){var t=this._model.dataSourceForId(this._sourceId);this._model.startMovingSource(t,this._origPoint,this._pointIndex),this._model.moveSource(this._point),this._model.endMovingSource()},inherit(x,r),x.prototype.undo=function(){var t=this._model.dataSourceForId(this._sourceId);this._model.changeZOrder(t,-this._shift)},x.prototype.redo=function(){var t=this._model.dataSourceForId(this._sourceId);this._model.changeZOrder(t,this._shift)},inherit(P,r),P.prototype.undo=function(){var t=this._model.dataSourceForId(this._sourceId);this._model.bringToFront(t)},P.prototype.redo=function(){var t=this._model.dataSourceForId(this._sourceId);this._model.sendToBack(t)},inherit(L,r),L.prototype.undo=function(){var t=this._model.dataSourceForId(this._sourceId);this._model.sendToBack(t)},L.prototype.redo=function(){var t=this._model.dataSourceForId(this._sourceId);this._model.bringToFront(t)},s.prototype.removePane=function(t,e){var i=new k(this,e,t);this.pushUndoCommand(i),i.redo()},inherit(k,r),k.prototype.redo=function(){this._model.panes().splice(this._index,1),this._chart._updateGui()},k.prototype.undo=function(){this._model.panes().splice(this._index,0,this._pane),this._chart._updateGui()},s.prototype.rearrangePanes=function(t,e,i){var o=new E(this,e,i,t);this.pushUndoCommand(o),o.redo(),this._onRearrangePanes.fire()},inherit(E,r),E.prototype.redo=function(){var t=this._model.panes()[this._index];"up"===this._direction&&this._index>0&&(this._model.panes().splice(this._index,1),this._model.panes().splice(this._index-1,0,t)),"down"===this._direction&&this._index<this._model.panes().length-1&&(this._model.panes().splice(this._index,1),this._model.panes().splice(this._index+1,0,t)),this._model.invalidate(new Z(Z.FULL_UPDATE))},E.prototype.undo=function(){var t;"up"===this._direction&&(t=this._model.panes()[this._index-1],this._model.panes().splice(this._index-1,1),this._model.panes().splice(this._index,0,t)),"down"===this._direction&&(t=this._model.panes()[this._index+1],this._model.panes().splice(this._index+1,1),this._model.panes().splice(this._index,0,t)),this._model.invalidate(new Z(Z.FULL_UPDATE))},inherit(I,r),I.prototype.redo=function(){this._timeScaleState=this._model.timeScale().state(),this._priceScaleState=this._pane.defaultPriceScale().state(),this._model.zoomToViewport(this._startBar,this._endBar,this._startPrice,this._endPrice,this._pane)},I.prototype.undo=function(){this._model.timeScale().restoreState(this._timeScaleState),this._pane.defaultPriceScale().restoreState(this._priceScaleState),this._model.recalculateAllPanes(),this._model.invalidate(new Z(Z.LIGHT_UPDATE))},inherit(A,r),A.prototype.undo=function(){if(this._inOut){if(this._baseCmd!==this._zoomStack.head())return void TradingView.logDebugChart("zoom stack inconsistency");this._baseCmd.undo(),this._zoomStack.pop()}else this._baseCmd.redo(),this._zoomStack.push(this._baseCmd)},A.prototype.redo=function(){if(this._inOut)this._baseCmd.redo(),this._zoomStack.push(this._baseCmd);else{if(this._baseCmd!==this._zoomStack.head())return void TradingView.logDebugChart("zoom stack inconsistency");this._baseCmd.undo(),this._zoomStack.pop()}},inherit(V,r),V.prototype.redo=function(){var t=this._paneA._stretchFactor+this._paneB._stretchFactor;this._paneA._stretchFactor=this._currStretchA,this._paneB._stretchFactor=t-this._currStretchA,this._model.invalidate(new Z(Z.FULL_UPDATE))},V.prototype.undo=function(){var t=this._paneA._stretchFactor+this._paneB._stretchFactor;this._paneA._stretchFactor=this._prevStretchA,this._paneB._stretchFactor=t-this._prevStretchA,this._model.invalidate(new Z(Z.FULL_UPDATE))},inherit(M,r),M.prototype.redo=function(){this._model.restoreFactoryDefaults(this._defaultProperty),this._chartWidget.adaptOnChartLogo()},M.prototype.undo=function(){this._defaultProperty.merge(this._state),this._defaultProperty.listeners().fire(this._defaultProperty),this._model.mainSeries().onChartStyleChanged(),this._chartWidget.adaptOnChartLogo()},inherit(D,r),D.prototype._merge=function(t,e){var i=this._model;ot(!0),t&&(i.properties().paneProperties.merge(t.paneProperties),i.properties().scalesProperties.merge(t.scalesProperties),i.properties().symbolWatermarkProperties.merge(t.symbolWatermarkProperties)),i.mainSeries().properties().merge(e),i.mainSeries().properties().saveDefaults(),i.mainSeries().createPaneView(),i.mainSeries().invalidateBarStylesCache(),i._version=e.version,i.recalculateAllPanes(),i.invalidate(new Z(Z.FULL_UPDATE)),i.properties().saveDefaults(),i.properties().listeners().fire(this._properties),i.properties().scalesProperties.textColor.listeners().fire(i.properties().scalesProperties.textColor),ot(!1)},D.prototype.undo=function(){this._merge(this._oldChartProps,this._oldSeriesProps),this._model.mainSeries().onChartStyleChanged(),this._model.updateScales()},D.prototype.redo=function(){this._merge(this._newChartProps,this._newSeriesProps),this._model.mainSeries().onChartStyleChanged(),this._model.updateScales()},inherit(B,r),B.prototype._merge=function(t){var e=this._source;e.properties().merge(t),e.properties().saveDefaults(),e.propertiesChanged(),e.calcIsActualSymbol(),e.updateAllViews(),e._model.invalidate(new Z(Z.LIGHT_UPDATE))},B.prototype.undo=function(){this._merge(this._oldProps)},B.prototype.redo=function(){this._merge(this._newProps)},inherit(O,r),O.prototype._merge=function(t){var e,i,o,n,s,r,a,l,h,c,d,p,u,_=this._model.model(),f=_.mainSeries();for(f.properties().lockScale.setValue(!1),t.interval&&f.properties().interval.setValue(t.interval),e=[],i=_.panes(),o=i.length;o--;)for(n=i[o],s=n.containsMainSeries(),r=n.dataSources(),a=r.length;a--;)l=r[a],(!s||l instanceof at)&&(l.isRemovedByStudyTemplates()||e.push(l),_.removeSource(l));for(h=t.panes,c=function(t,e){return t.dataSources().some(function(t){return t.alert&&t.alert().id===e.alert.id})},o=0;o<h.length;o++){for(d=!1,p=h[o],a=0;a<p.sources.length;a++)l=p.sources[a],"MainSeries"===l.type&&(delete l.state,d=!0);if(n=null,n=d?i[o]:_.createPane(o),n.restoreState(h[o],!1,t.version),d)for(u=0;u<e.length;u++)e[u].restore&&e[u].restore()}f.priceScale().setAutoScale(!0),_._version=t.version,_.startNotStartedStudies(),_.recalculateAllPanes(),_.invalidate(new Z(Z.FULL_UPDATE))},O.prototype.undo=function(){this._merge(this._oldProps),this._model.model().mainSeries().onChartStyleChanged()},O.prototype.redo=function(){var t,e,i;this._merge(this._newProps),t=this._model.model(),t.mainSeries().onChartStyleChanged(),e=this._model.model().mainSeries().properties(),i=this._model.model().mainSeries().properties().priceAxisProperties,this._model._preparePriceAxisProperties(e,i),t._recalcVisibleRangeStudy(t.dataSources(),!0)},inherit(R,r),R.prototype.redo=function(){this._priceScale.setTopMargin(this._topMargin),this._priceScale.setBottomMargin(this._bottomMargin),this._model.recalculatePane(this._pane,!1)},R.prototype.undo=function(){this._priceScale.setTopMargin(this._oldTopMargin),this._priceScale.setBottomMargin(this._oldBottomMargin),this._model.recalculatePane(this._pane,!1)},inherit(z,r),z.prototype.redo=function(){this._model.mainSeries().loadDataTo(this._range)},inherit(N,r),N.prototype.redo=function(){this._cw.screen.show().done(function(){this._property.setValue(this._value,this._forceSetProperty)}.bind(this))},N.prototype.undo=function(){this._cw.screen.show().done(function(){this._property.setValue(this._prevValue,this._forceSetProperty)}.bind(this))},inherit(H,r),H.prototype.redo=function(){
var t,e,i,n,s,r,a,l,h,c,d;if(this._lineState)r=this._model.restoreSource(!1,this._paneIndex,null,this._lineState,null);else{for(t=this._originalSource,e=t.priceScale(),i=this._model.paneForSource(t),n=TradingView.className(t.constructor),s=new it(n.toLowerCase(),t.properties().state()),r=G.create(n,this._model,s,null,t.ownerSource()),r.setOwnerSource(t.ownerSource()),r.properties().visible._value=!0,r._fixedPoints=r._fixedPoints.concat(t._fixedPoints),a=0;a<r._fixedPoints.length;a++)r._fixedPoints[a]=r._fixedPoints[a].add(new o.Point(20,20));l=t._timePoint,h=F(l,t.ownerSource()),c=t._points,d=c,r.restorePoints(h,d),r.cloneData&&r.cloneData(t),i.addDataSource(r,e),this._model.updateSource(r),r.checkAlert&&r.checkAlert(),this._paneIndex=this._model.panes().indexOf(i),J.drawOnAllCharts().value()&&this._model.copyToOtherCharts(r),this._lineState=r.state()}},H.prototype.undo=function(){this._lineState||TradingView.logError("This command was never executed - nothing to undo");var t=this._model.dataSourceForId(this._lineState.id);this._model.removeSource(t)},lt.setWatchedValue=function(t,e,i){if(t.value()!==e){var o=new W(t,e,i);this.pushUndoCommand(o),o.redo()}},inherit(W,r),W.prototype.redo=function(){this._wv.setValue(this._newValue)},W.prototype.undo=function(){this._wv.setValue(this._oldValue)},inherit(U,r),U.prototype.redo=function(){var t=this._model.dataSourceForId(this._sourceId);delete t.linkKey},U.prototype.undo=function(){var t=this._model.dataSourceForId(this._sourceId);t.linkKey=this._linkKey},inherit(q,r),q.prototype.redo=function(){var t,e,i,n,s,r,a,l,h,c=this._model.panes()[this._paneIndex],d=c.dataSourceForId(this._clipboardData.source.ownerSource)||c.mainDataSource();this._sourceState||(t=!0,e=this._clipboardData.source.state.symbol,i=c.mainDataSource(),n=i.symbol?i.symbol():"",s=e==n,s&&(d instanceof st&&(t=!1),d instanceof at&&(t=!d.metaInfo().is_price_study)),r=TradingView.clone(this._clipboardData.source),delete r.state.symbol,t?(a=this._model,l=function(t){var e=t.x*a.timeScale().width(),i=t.y*d.priceScale().height();return new o.Point(e,i)},r.points=this._clipboardData.geometry.map(function(t){var e,i=l(t),o=a.timeScale().coordinateToIndex(i.x),n=a.timeScale().normalizeBarIndex(o);return n.price=d.priceScale().coordinateToPrice(i.y),d.priceScale().isPercent()&&(e=d.firstValue(),n.price=d.priceScale().priceRange().convertFromPercent(n.price,e)),n})):this._model._id==this._clipboardData.modelId&&d.id()===this._clipboardData.source.ownerSource&&(r.points=F(this._clipboardData.source.points,d)),r.id=TradingView.guid(),this._sourceState=r),h=c._restoreLineTool(this._sourceState,null,!1),h.calcIsActualSymbol(),h.setOwnerSource(d),h.setPriceScale(d.priceScale()),d.priceScale().addDataSource(h),h.createServerPoints(),this._model.invalidate(new Z(Z.LIGHT_UPDATE,(!0)))},q.prototype.undo=function(){var t,e;this._sourceState||TradingView.logError("This command was never executed - nothing to undo"),t=this._model.panes()[this._paneIndex],e=t.dataSourceForId(this._sourceState.id),this._model.removeSource(e)},inherit(j,r),j.prototype.redo=function(){var t,e,i,o;this._sourceState||(t=TradingView.clone(this._clipboardData.source),t.id=TradingView.guid(),this._sourceState=t),e=null,i=null,this._sourceState.metaInfo.is_price_study?(e=this._model.paneForSource(this._model.mainSeries()),i=this._model.mainSeries().priceScale()):(e=this._model.createPane(),i=e.defaultPriceScale()),o=e._restoreStudy(this._sourceState),o.start(),o.setPriceScale(i),e.move(o,i)},j.prototype.undo=function(){this._sourceState||TradingView.logError("This command was never executed - nothing to undo");var t=this._model.dataSourceForId(this._sourceState.id);this._model.removeSource(t)},e.UndoHistory=lt,e.ChartUndoModel=s,e.UndoMacroCommand=l}).call(e,i(32),i(21))},function(t,e,i){var o;(function(){"use strict";function e(){}function n(t,e){for(var i=t.length;i--;)if(t[i].listener===e)return i;return-1}function s(t){return function(){return this[t].apply(this,arguments)}}var r=e.prototype,a=this,l=a.EventEmitter;r.getListeners=function(t){var e,i,o=this._getEvents();if(t instanceof RegExp){e={};for(i in o)o.hasOwnProperty(i)&&t.test(i)&&(e[i]=o[i])}else e=o[t]||(o[t]=[]);return e},r.flattenListeners=function(t){var e,i=[];for(e=0;e<t.length;e+=1)i.push(t[e].listener);return i},r.getListenersAsObject=function(t){var e,i=this.getListeners(t);return i instanceof Array&&(e={},e[t]=i),e||i},r.addListener=function(t,e){var i,o=this.getListenersAsObject(t),s="object"==typeof e;for(i in o)o.hasOwnProperty(i)&&n(o[i],e)===-1&&o[i].push(s?e:{listener:e,once:!1});return this},r.on=s("addListener"),r.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},r.once=s("addOnceListener"),r.defineEvent=function(t){return this.getListeners(t),this},r.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},r.removeListener=function(t,e){var i,o,s=this.getListenersAsObject(t);for(o in s)s.hasOwnProperty(o)&&(i=n(s[o],e),i!==-1&&s[o].splice(i,1));return this},r.off=s("removeListener"),r.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},r.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},r.manipulateListeners=function(t,e,i){var o,n,s=t?this.removeListener:this.addListener,r=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(o=i.length;o--;)s.call(this,e,i[o]);else for(o in e)e.hasOwnProperty(o)&&(n=e[o])&&("function"==typeof n?s.call(this,o,n):r.call(this,o,n));return this},r.removeEvent=function(t){var e,i=typeof t,o=this._getEvents();if("string"===i)delete o[t];else if(t instanceof RegExp)for(e in o)o.hasOwnProperty(e)&&t.test(e)&&delete o[e];else delete this._events;return this},r.removeAllListeners=s("removeEvent"),r.emitEvent=function(t,e){var i,o,n,s,r,a=this.getListenersAsObject(t);for(s in a)if(a.hasOwnProperty(s))for(i=a[s].slice(0),n=i.length;n--;)o=i[n],o.once===!0&&this.removeListener(t,o.listener),r=o.listener.apply(this,e||[]),r===this._getOnceReturnValue()&&this.removeListener(t,o.listener);return this},r.trigger=s("emitEvent"),r.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},r.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},r._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},r._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return a.EventEmitter=l,e},o=function(){return e}.call(a,i,a,t),!(void 0!==o&&(t.exports=o))}).call(this)},function(t,e){"use strict";var i=function(){function t(t){switch(t){case"c67":case"m67":case"c45":return"copy";case"c86":case"m86":case"s45":return"paste";case"c88":case"m88":case"s46":return"cut"}}function e(t){var e=[];return t.shiftKey&&e.push("s"),t.ctrlKey&&e.push("c"),t.metaKey&&e.push("m"),t.altKey&&e.push("a"),e.push(t.keyCode),e.join("")}function i(t){var e=$.Event(d+":"+t);return $(window).trigger(e,{AppClipboard:_}),e}function o(o){var n,s,r;if((document.activeElement===document.body||document.activeElement===document.documentElement)&&(n=e(o),s=t(n))){if("keydown"===o.type)p[n]=!0;else if(p[n])return;if(document.getSelection){if(!document.getSelection().isCollapsed)return}else if(document.selection&&"None"!==document.selection.type)return;o.isDefaultPrevented()||(r=i(s),r.isDefaultPrevented()&&o.preventDefault())}}function n(t){t=t.originalEvent||t,t.key===c&&i("change")}function s(){u||($(document).on("keypress keydown",o),$(window).on("storage",n),u=!0)}function r(){$(document).off("keypress keydown",o),$(window).off("storage",n),$(window).off(d+":copy"),$(window).off(d+":paste"),$(window).off(d+":cut"),$(window).off(d+":change"),u=!1}function a(){try{return JSON.parse(TVLocalStorage.getItem(c))}catch(t){return null}}function l(t){if(null==t)return h();var e=JSON.stringify(t);e!==TVLocalStorage.getItem(c)&&(TVLocalStorage.setItem(c,e),i("change"))}function h(){TVLocalStorage.getItem(c)&&(TVLocalStorage.removeItem(c),i("change"))}var c="application-clipboard",d="appclip",p={},u=!1,_={init:s,set:l,get:a,clear:h,destroy:r};return _}();t.exports=i},function(t,e,i){(function(e,o){"use strict";function n(t,e,i){this._model=e,this._paneWidget=t,this._chart=t._chart,this._mainDiv=i,this.$el=$(document.createElement("div")).addClass("pane-legend"),this._itemsBinding=[],this._chart.properties().paneProperties.legendProperties.showStudyTitles.listeners().subscribe(this,this.updateLayout),this._chart.properties().paneProperties.legendProperties.showSeriesTitle.listeners().subscribe(this,this.updateLayout),this._chart.properties().paneProperties.legendProperties.showSeriesOHLC.listeners().subscribe(this,this.updateLayout),this._chart.properties().paneProperties.legendProperties.showStudyValues.listeners().subscribe(this,this.updateLayout);var o=this._chart.properties().scalesProperties.textColor;o.listeners().subscribe(this,function(t){this.$el.css("color",t)}),this.$el.css("color",o.value()),this.updateLayout()}var s=i(141).Study,r=i(50).setMouseEventHandler;n.prototype.contextMenuEvent=function(t,i){if(!this._model.chartModel().readOnly()&&e.enabled("legend_context_menu")){var o=i.source;this._paneWidget.showContextMenuForSource(o,t)}},n.prototype.updateLayout=function(){var t,e,i,n,s,a,l,h,c,d,p;if(this._itemsBinding.length=0,this.$el.find(".apply-common-tooltip").trigger("mouseleave"),this.$el.empty(),t=this._paneWidget.state(),t&&this._model){for(e={showStudyTitles:this._model.model().properties().paneProperties.legendProperties.showStudyTitles.value(),showSeriesTitle:this._chart.properties().paneProperties.legendProperties.showSeriesTitle.value(),showSeriesOHLC:this._chart.properties().paneProperties.legendProperties.showSeriesOHLC.value(),showStudyValues:this._chart.properties().paneProperties.legendProperties.showStudyValues.value(),showLegend:this._model.model().properties().paneProperties.legendProperties.showLegend.value()},i=this._model.mainSeries(),n=t.orderedSources().slice(),s=n.indexOf(i),s>-1&&(n.splice(s,1),n.push(i)),a=n.length-1;a>=0;a--)l=n[a],h=l.statusView(),h&&(c=l==i,(!c||e.showSeriesTitle||e.showSeriesOHLC||e.showStudyTitles||e.showStudyValues)&&(e.showLegend||!c?(c||e.showStudyTitles||e.showStudyValues)&&e.showLegend&&(d=$("<div>").addClass("pane-legend-line pane-legend-wrap").appendTo(this.$el),d.source=l,c?(p=$('<a class="pane-legend-minbtn apply-common-tooltip apply" title="'+$.t("Hide")+'"></a>').append($(o("legend-show",{"class":"expand"}))),d.addClass("main").append(p.on("click touchend",this.toggleTitles.bind(this)))):d.addClass("study"),l.properties().visible.value()||d.addClass("disabled"),this._generateItemsForRow(d,h,e),r(d,this,!0)):this.$el.find(".expand-line").length||(d=$("<div>").addClass("pane-legend-line pane-legend-wrap main expand-line").appendTo(this.$el),p=$('<a class="pane-legend-minbtn apply-common-tooltip apply" title="'+$.t("Show")+'"></a>').append($(o("legend-hide",{"class":"expand closed"}))),d.append(p.on("click touchend",this.toggleTitles.bind(this))),d.source=l,e={showStudyTitles:!1,showSeriesTitle:!1,showSeriesOHLC:e.showSeriesOHLC,showStudyValues:!1},this._generateItemsForRow(d,h,e),r(d,this,!0),this.update())));this.update()}},n.prototype._generateItemsForRow=function(t,i,n){var r,a,l,h,c,d,p,u,_,f,g,m,v,y,w,b=t.source,S=this,T=b==this._model.mainSeries();if((T&&n.showSeriesTitle||!T&&n.showStudyTitles)&&(r=$("<span>"),r.addClass("pane-legend-line apply-overflow-tooltip"),e.enabled("legend_context_menu")||r.addClass("no-context-menu"),T&&r.addClass("main"),b.properties().visible.value()||r.addClass("disabled"),r.css({"font-weight":i.bold()?"bold":"normal","font-size":i.size()}),r.click(function(e){S.contextMenuEvent(e,t)}),r.appendTo(t),this._itemsBinding.push({value:i,cell:r,source:t.source}),!this._chart.readOnly()&&b.userEditEnabled()&&e.enabled("edit_buttons_in_legend")&&(a=$('<span class="pane-legend-icon-container">').appendTo(t),$('<a class="pane-legend-icon apply-common-tooltip icon-hide" title="'+$.t("Show/Hide")+'">').append(o("hide","14x14")).appendTo(a).on("click touchend",this._generateItemsForRow._onShowhideClick.bind(this,b)),T&&!e.enabled("show_chart_property_page")||$('<a class="pane-legend-icon apply-common-tooltip format" title="'+$.t("Format")+'">').append(o("format","14x14")).appendTo(a).on("click touchend",this._generateItemsForRow._onFormatClick.bind(this,b)),b instanceof s&&(l=b.metaInfo().isTVScript&&void 0!==b.metaInfo().TVScriptSourceCode,l&&!TradingView.isMobileView&&(h=$('<a class="pane-legend-icon apply-common-tooltip source" title="'+$.t("Show Source Code")+'">').append(o("legend-sourcecode","14x14")).appendTo(a).on("click touchend",this._generateItemsForRow._onViewSorceClick.bind(this,b)),TradingView.ScriptEditorWidget&&(c=TradingView.ScriptEditorWidget.loadedScriptIdPart(),c&&b.metaInfo().scriptIdPart===c&&h.addClass("active")))),T||$('<a class="pane-legend-icon apply-common-tooltip delete" title="'+$.t("Delete")+'">').append(o("legend-delete","14x14")).appendTo(a).on("click touchend",this._generateItemsForRow._onDeleteClick.bind(this,b)))),d=b.dataWindowView(),d=b.dataWindowView(),this.isDataWindowValuesVisible(d)&&(T&&n.showSeriesOHLC||!T&&n.showStudyValues)){for(p=[],u=[],_=$('<div class="pane-legend-item-value-container">'),f=0;f<d.items().length;f++)g=d.items()[f],m=$("<span class='pane-legend-item-value-wrap'>").appendTo(_),v=T?$("<span class='pane-legend-item-value-title pane-legend-line'>").appendTo(m):null,y=$("<span class='pane-legend-item-value pane-legend-line'>").appendTo(m),T&&y.addClass("main"),b.properties().visible.value()||(y.addClass("disabled"),v&&v.addClass("disabled")),p.push(y),v&&u.push(v);w=$("<span class='pane-legend-item-additional pane-legend-line'>").appendTo(_.appendTo(t)),this._itemsBinding.push({value:d,cell:p,titleCells:u.length?u:null,source:b,additional:w})}},n.prototype.isDataWindowValuesVisible=function(t){return this._chart.onWidget()?!!t&&!this._chart.isSmall():!!t},n.prototype._generateItemsForRow._onShowhideClick=function(t){this._model.setProperty(t.properties().visible,!t.properties().visible.value(),"Show/Hide "+t.title())},n.prototype._generateItemsForRow._onFormatClick=function(t,e){if(t.userEditEnabled()){TVSettings.setValue("properties_dialog.active_tab.chart",$.t("Style"));var o=i(291);new o(t,this._model).show()}},n.prototype._generateItemsForRow._onDeleteClick=function(t){t.isUserDeletable()&&this._model.removeSource(t)},n.prototype._generateItemsForRow._onViewSorceClick=function(t){var e=t.metaInfo(),i={scriptSource:t.metaInfo().TVScriptSourceCode,scriptIdPart:e.scriptIdPart};TradingView.ScriptEditorWidget&&TradingView.ScriptEditorWidget.open(i)},n.prototype.setItemEnabled=function(t,e){var i=!t.hasClass("disabled"),o=t.closest(".pane-legend-wrap");e&&!i?(t.removeClass("disabled"),o.removeClass("disabled")):!e&&i&&(t.addClass("disabled"),o.addClass("disabled"))},n.prototype.valueChanged=function(t,e,i){return t[e]!==i&&(t[e]=i,!0)},n.prototype.firstTitle=function(){return this.$el.find(".pane-legend-line.pane-legend-wrap:first-child")},n.prototype.updateTitle=function(){var t,e,i,o,n,s,r,a;for(i=this._itemsBinding.length;i--;)e=this._itemsBinding[i],Array.isArray(e.cell)||(e.last||(e.last={}),o=e.last,n=e.source,t=n.properties().visible.value(),this.valueChanged(o,"sourceVisible",t)&&this.setItemEnabled(e.cell,t),s=e.value.color(),r=n!=this._model.mainSeries()&&n===this._model.selectedSource()?"bold":"normal",a=e.value.text(),(this.valueChanged(o,"color",s)||this.valueChanged(o,"fontWeight",r)||this.valueChanged(o,"text",a))&&e.cell.text(TradingView.clean(a,!0)).css({color:s,"border-color":s,"font-weight":r}));this._chart.resizeIndicator()},n.prototype.update=function(t){var e,i,o,n,s,r,a,l,h,c,d;for(this.updateTitle(),l=this._itemsBinding.length;l--;)if(n=this._itemsBinding[l],e=n.cell,i=n.titleCells,o=n.source.properties().visible.value(),Array.isArray(e)){for(n.last||(n.last={},n.last.dwView||(n.last.dwView={})),h=n.last,c=0,s=n.value.items(),d=this.valueChanged(h,"sourceVisible",o),r=0;r<e.length;r++)a=s[r],h[r]||(h[r]={}),d&&this.setItemEnabled(e[r],o),this.valueChanged(h[r],"text",a.text())&&(e[r][0].textContent=a.text()),a.color()&&this.valueChanged(h[r],"color",a.color())&&e[r].css("color",a.color()),i&&(this.valueChanged(h,"sourceVisible",o)&&this.setItemEnabled(i[r],o),this.valueChanged(h[r],"title",a.title())&&(i[r][0].textContent=a.title()));n.additional&&n.value.additional&&this.valueChanged(h,"additional",n.value.additional())&&n.additional.text(n.value.additional()||"")}this._chart.resizeIndicator()},n.prototype.dataSourceAtPoint=function(t,e){return null},n.prototype.renderTo=function(t,e,i){var o,n,s,r,a,l,h;for(t.save(),t.fillStyle=this._chart.properties().scalesProperties.textColor.value(),t.textBaseline="middle",o=0,n=0;n<this._itemsBinding.length;++n)s=this._itemsBinding[n],r=s.value,a=s.source==this._model.mainSeries(),l=a?12:8,h=a?25:17,Array.isArray(s.cell)||(t.font=r.size()+" Verdana, Arial",t.fillText(r.text(),e,i+o+l),o+=h);t.restore()},n.prototype.toggleTitles=function(t){this._model.model().properties().paneProperties.legendProperties.showLegend.setValue(!this._chart.properties().paneProperties.legendProperties.showLegend.value());for(var e=this._chart._paneWidgets.length-1;e>=0;e--)this._chart._paneWidgets[e].legendWidget.updateLayout()},t.exports=n}).call(e,i(1),i(26))},function(t,e,i){(function(e){"use strict";function o(t,e,i){this._source=t,this._model=e,this._undoCheckpoint=i}var n=i(67).LineDataSource,s=i(141).Study,r=i(72).DataSource,a=i(271),l=i(50).bindPopupMenu;$.extend(o,{TAB_PRIORITY_COORDINATES:100,TAB_PRIORITY_DISPLAY:100,TAB_PRIORITY_STYLE:200,TAB_PRIORITY_INPUTS:300,TAB_PRIORITY_PROPERTIES:250,TAB_NAME_COORDINATES:"Coordinates",TAB_NAME_DISPLAY:"Properties",TAB_NAME_STYLE:"Style",TAB_NAME_INPUTS:"Inputs",TAB_NAME_PROPERTIES:"Properties",TAB_NAME_GRAPHICS:"Graphics",TAB_NAME_VISIBILITY:"Visibility",TAB_OPEN_DEFAULT:100,TAB_OPEN_USERSAVE:200,TAB_OPEN_OVERRIDE:300}),o.prototype.hide=function(t){TVDialogs.destroy(this._dialogTitle,{undoChanges:!!t})},o.prototype._onDestroy=function(t,e){var i,o=(e||{}).undoChanges;$(window).unbind("keyup.hidePropertyDialog"),o?(i=this._undoCheckpoint?this._undoCheckpoint:this._undoCheckpointOnShow,i&&this._model.undoToCheckpoint(i)):this._source.hasAlert.value()&&this._source.localAndServerAlersMismatch&&this._source.synchronizeAlert(!0),this._undoCheckpointOnShow&&delete this._undoCheckpointOnShow,window.lineToolPropertiesToolbar&&window.lineToolPropertiesToolbar.refresh()},o.prototype.isVisible=function(){return this._dialog&&this._dialog.is(":visible")},o.prototype.focusOnText=function(){this._dialog.find('input[type="text"]').focus().select()},o.prototype.switchTab=function(t,e){var i,o,n;if(this._tabs)return i=null,t?t=t.valueOf():null===t&&(t=void 0),"string"==typeof t&&$.each(this._tabs,function(e,o){if(o.name==t)return i=o,!1}),"object"==typeof t&&$.each(this._tabs,function(e,o){if(t==o||$(o.labelObject).is(t)||$(o.wrapperObject).is(t))return i=o,!1}),i||(i=this._tabs[~~t]),!!i&&($.each(this._tabs,function(t,e){var o=e==i;$(e.wrapperObject)[o?"show":"hide"](),$(e.labelObject)[o?"addClass":"removeClass"]("active")}),e&&(o=this.activeTabSettingsName(),o&&(n=TVSettings.setValue(o,i.name))),this._dialog.height()+100>$(window).height()&&!i.isScrollable&&this.makeScrollable(i),$(":focus").blur(),!0)},o.prototype.makeScrollable=function(t){var e=t.wrapperObject,i=$(t.objects[0]),o=i.width();e.css({height:$(window).height()/1.4,overflow:"auto"}),i.css("width",o+20),t.isScrollable=!0},o.prototype.appendToTab=function(t,e,i,o,n,s){var r,a;$(t).is("table")&&!$(t).find("tr").size()||(this._tabs||(this._tabs=[]),$.each(this._tabs,function(t,i){if(i.name==e)return r=t,!1}),void 0===r&&(this._tabs.push({name:e,localizedName:$.t(e),objects:$(),displayPriority:0,defaultOpen:0,isButton:!!n,callback:n?s||function(){}:null}),r=this._tabs.length-1),a=this._tabs[r],a.objects=a.objects.add(t),a.displayPriority=Math.max(a.displayPriority||0,i||0),a.defaultOpen=Math.max(a.defaultOpen||0,o||0))},o.prototype.insertTabs=function(){function t(t){r&&r===t.name&&(t.defaultOpen=Math.max(~~t.defaultOpen,o.TAB_OPEN_USERSAVE)),(!n||~~n.defaultOpen<~~t.defaultOpen)&&(n=t),t.labelObject=$('<a href="#" class="properties-tabs-label"></a>').text(t.localizedName).appendTo(i._tabContainer),t.labelObject.bind("click",function(t){t.preventDefault(),i.switchTab(this,!0)});var e=$('<div class="main-properties"></div>');t.wrapperObject=$().add(e),t.objects.each(function(i,o){var n=$(o);n.is("table")?(n.data("layout-separated")&&(t.wrapperObject=t.wrapperObject.add('<div class="properties-separator"></div>').add(e=$('<div class="main-properties"></div>')),n.removeData("layout-separated")),e.append(n),n.children("tbody").each(function(i,n){if(0!==i&&$(n).data("layout-separated")){t.wrapperObject=t.wrapperObject.add('<div class="properties-separator"></div>').add(e=$('<div class="main-properties"></div>'));var s=$(o).clone(!0,!1).appendTo(e);s.children().remove(),s.append(n),$(n).removeData("layout-separated")}})):e.append(n)}),t.wrapperObject.appendTo(i._container)}function e(t){t.labelObject=$('<a href="#" class="properties-tabs-label"></a>').text(t.localizedName).appendTo(i._tabContainer),t.labelObject.bind("click",t.callback)}var i,n,s,r;this._tabs&&(this._tabs.sort(function(t,e){return(e.displayPriority||0)-(t.displayPriority||0)}),i=this,n=null,s=this.activeTabSettingsName(),s&&(r=TVSettings.getValue(s)),$.each(this._tabs,function(i,o){o.isButton?e(o):t(o)}),this.switchTab(n))},o.prototype.activeTabSettingsName=function(){var t=i(285),e=i(77),o=this._source;if(o)return o instanceof e||o instanceof t?"properties_dialog.active_tab.chart":o instanceof n?"properties_dialog.active_tab.drawing":o instanceof s?"properties_dialog.active_tab.study":void 0},o.prototype.show=function(t){function h(){g.hide(!0)}var c,d,p,u,_,f,g,m,v,y,w,b,S,T,C,x,P,L,k,E,I,A,V,M,D=i(292),B=i(285);if(t=t||{},c=t.onWidget||!1,TradingView.isInherited(this._source.constructor,B)&&TradingView.trackEvent("GUI","Chart Properties"),TradingView.isInherited(this._source.constructor,s)&&TradingView.trackEvent("GUI","Study Properties"),TradingView.isInherited(this._source.constructor,r)&&this._model.setSelectedSource(this._source),d=D.createStudyStrategyPropertyPage(this._source,this._model),p=D.createInputsPropertyPage(this._source,this._model),u=D.createStylesPropertyPage(this._source,this._model),_=D.createVisibilitiesPropertyPage(this._source,this._model),f=D.createDisplayPropertyPage(this._source,this._model),p||u||d)return g=this,m=null!==p,v=this._source.title(),y=TVDialogs.createDialog(v,{hideTitle:!0,dragHandle:".properties-tabs"}),w=y.find("._tv-dialog-content"),b=$('<div class="properties-tabs"></div>').appendTo(w),S=[],T=400,this._tabs=S,this._dialog=y,this._dialogTitle=v,this._dialog=y,this._container=w,this._tabContainer=b,this._undoCheckpointOnShow=this._model.createUndoCheckpoint(),y.on("destroy",function(t,e){g._onDestroy(t,e),p&&p.destroy(),d&&d.destroy(),u&&u.destroy(),f&&f.destroy(),_&&_.destroy()}),t.selectScales&&u.setScalesOpenTab&&u.setScalesOpenTab(),t.selectTmz&&u.setTmzOpenTab&&u.setTmzOpenTab(),!this._model.readOnly()&&d&&d.widget().each(function(t,e){var i,n,s=+$(e).data("layout-tab-priority");isNaN(s)&&(s=o.TAB_PRIORITY_PROPERTIES),i=~~$(e).data("layout-tab-open"),n=$(e).data("layout-tab"),void 0===n&&(n=o.TAB_NAME_PROPERTIES),g.appendToTab(e,n,s,i)}),this._model.readOnly()||!m||p.widget().is(":empty")||p.widget().each(function(t,e){var n,s,r=i(306),a=p instanceof r,l=+$(e).data("layout-tab-priority");TradingView.isNaN(l)&&(l=a?o.TAB_PRIORITY_COORDINATES:o.TAB_PRIORITY_INPUTS),n=~~$(e).data("layout-tab-open"),s=$(e).data("layout-tab"),void 0===s&&(s=a?o.TAB_NAME_COORDINATES:o.TAB_NAME_INPUTS),g.appendToTab(e,s,l,n)}),u&&u.widget().each(function(t,e){var n,s,r,a=+$(e).data("layout-tab-priority");TradingView.isNaN(a)&&(a=o.TAB_PRIORITY_STYLE),n=~~$(e).data("layout-tab-open"),s=i(294),!n&&u instanceof s&&(n=o.TAB_OPEN_DEFAULT),r=$(e).data("layout-tab"),void 0===r&&(r=o.TAB_NAME_STYLE),g.appendToTab(e,r,a,n)}),f&&f.widget().each(function(t,e){var i,n,s=+$(e).data("layout-tab-priority");TradingView.isNaN(s)&&(s=o.TAB_PRIORITY_DISPLAY),i=~~$(e).data("layout-tab-open"),n=$(e).data("layout-tab"),void 0===n&&(n=o.TAB_NAME_DISPLAY),g.appendToTab(e,n,s,i)}),_&&_.widget().each(function(t,e){g.appendToTab(e,o.TAB_NAME_VISIBILITY,o.TAB_PRIORITY_DISPLAY,!1)}),k=this._source instanceof s&&this._source.metaInfo().isTVScript&&!!this._source.metaInfo().TVScriptSourceCode&&!TradingView.isMobileView,k&&g.appendToTab(null,$.t("Source Code"),null,null,!0,function(){this.hide();var t=this._source.metaInfo();TradingView.ScriptEditorWidget.open({scriptSource:t.TVScriptSourceCode,scriptIdPart:t.scriptIdPart})}.bind(this)),this.insertTabs(),this._helpItemRequired()&&this._createHelp(),C=$('<div class="main-properties main-properties-aftertabs"></div>').appendTo(w),x=$('<div class="dialog-buttons">').appendTo(C),E=function(){function t(e){e._childs&&e._childs.length&&$.each(e._childs,function(i,o){"percentage"==o?e.percentage.listeners().fire(e.percentage):t(e[o])})}var e=[];u&&"function"==typeof u.defaultProperties&&(e=e.concat(u.defaultProperties())),p&&"function"==typeof p.defaultProperties&&(e=e.concat(p.defaultProperties())),0===e.length&&g._source.properties?e=[g._source.properties()]:g._source._sessionsStudy&&(e=e.concat(g._source._sessionsStudy.properties())),e.length&&($.each(e,function(e,i){g._model.restoreFactoryDefaults(i),g._source.calcIsActualSymbol&&g._source.calcIsActualSymbol(),t(i)}),g._source.properties().minTick&&g._source.properties().minTick.listeners().fire(g._source.properties().minTick),g._source.properties().precision&&g._source.properties().precision.listeners().fire(g._source.properties().precision),p&&p.loadData(),d&&d.loadData(),u.onResoreDefaults&&u.onResoreDefaults(),u&&u.loadData(),_&&_.loadData())},I=function(){_&&_.loadData(),p&&p.loadData()},(!c||window.is_authenticated)&&u&&"function"==typeof u.createTemplateButton&&e.enabled("linetoolpropertieswidget_template_button")?u.createTemplateButton({defaultsCallback:E,loadTemplateCallback:I}).addClass("tv-left").appendTo(x):TradingView.isInherited(this._source.constructor,s)?(A=[{title:$.t("Reset Settings"),action:E},{title:$.t("Save As Default"),action:function(){g._source.properties().saveDefaults()}}],V=$('<a href="#" class="_tv-button tv-left">'+$.t("Defaults")+'<span class="icon-dropdown"></span></a>'),V.on("click",function(t){t.preventDefault();var e=$(this);e.is(".active")||e.trigger("button-popup",[A,!0])}).appendTo(x),l(V,null,{direction:"down",event:"button-popup",notCloseOnButtons:!0})):$('<a class="_tv-button tv-left">'+$.t("Defaults")+"</a>").appendTo(x).click(E),P=$('<a class="_tv-button ok">'+$.t("OK")+"</a>").appendTo(x).click(function(){g.hide()}),L=$('<a class="_tv-button cancel">'+$.t("Cancel")+"</a>").appendTo(x).on("click",h),y.find("._tv-dialog-title a").on("click",h),$(window).bind("keyup.hidePropertyDialog",function(t){"13"==t.keyCode&&"textarea"!==t.target.tagName.toLowerCase()&&g.hide()}),$("select",w).each(function(){var t=$(this),e="tv-select-container dialog";t.hasClass("tv-select-container-fontsize")&&(e+=" tv-select-container-fontsize"),t.selectbox({speed:100,classHolder:e})}),$('input[type="text"]',w).addClass("tv-text-input inset dialog"),$("input.ticker",w).TVTicker(),y.css("min-width",T+"px"),TVDialogs.applyHandlers(y),M={top:($(window).height()-y.height())/2,left:($(window).width()-y.width())/2},u&&"function"==typeof u.dialogPosition&&(M=u.dialogPosition(M,y)||M),TVDialogs.positionDialog(y,M),window.lineToolPropertiesToolbar&&window.lineToolPropertiesToolbar.hide(),a.emit("edit_object_dialog",{objectType:this._source===this._model.mainSeries()?"mainSeries":this._source instanceof n?"drawing":this._source instanceof s?"study":"other",sourceTitle:this._source.title()}),y},o.prototype._helpItemRequired=function(){return this._source._metaInfo&&!!this._source._metaInfo.helpURL},o.prototype._createHelp=function(){var t=$('<a class="help" href="#" target="_blank" title="'+$.t("Help")+'"></a>');t.attr("href",this._source._metaInfo.helpURL),this._tabContainer.prepend(t)},t.exports=o}).call(e,i(1))},function(t,e,i){(function(t){"use strict";function o(t){return t instanceof h?t instanceof Q?$t:t instanceof pt?null:t instanceof q?null:t instanceof st?null:t instanceof A?Vt:t instanceof I?null:t instanceof tt?null:t instanceof lt?null:t instanceof N?null:t instanceof nt?null:t instanceof ht?It:t instanceof T?null:t instanceof H?null:t instanceof W?null:t instanceof S?Bt:t instanceof yt?Lt:t instanceof U?null:t instanceof b?null:t instanceof $?null:t instanceof ft?Rt:kt:t instanceof vt?t instanceof bt?Pt:Ct:null}function n(e,i){if(e instanceof l||e instanceof a)return t.enabled("show_chart_property_page")?xe:null;if(e instanceof vt)return e instanceof wt?Tt:"Volume@tv-basicstudies"==e.metaInfo().id?Ht:xt;if(e instanceof h){if(e instanceof V)return Ft;if(e instanceof A)return At;if(e instanceof L)return fe;if(e instanceof k)return fe;if(e instanceof E)return ge;if(e instanceof ht)return Et;if(e instanceof ct)return Et;if(e instanceof S)return Dt;if(e instanceof F)return Ut;if(e instanceof D)return qt;if(e instanceof lt)return jt;if(e instanceof ot)return ye;if(e instanceof rt)return Nt;if(e instanceof dt||e instanceof q)return Yt;if(e instanceof pt)return Gt;if(e instanceof st)return Kt;if(e instanceof G)return Xt;if(e instanceof I)return Jt;if(e instanceof H)return be;if(e instanceof W)return Se;if(e instanceof M)return Zt;if(e instanceof it)return Qt;if(e instanceof U)return Te;if(e instanceof at)return te;if(e instanceof nt)return ee;if(e instanceof et)return ie;if(e instanceof tt)return oe;if(e instanceof B)return ne;if(e instanceof R)return se;if(e instanceof z)return re;if(e instanceof c)return d;if(e instanceof p)return u;if(e instanceof w)return ae;if(e instanceof j)return ce;if(e instanceof _)return f;if(e instanceof v)return Ce;if(e instanceof C)return le;if(e instanceof O)return he;if(e instanceof x)return de;if(e instanceof g)return m;if(e instanceof N)return pe;if(e instanceof P)return ue;if(e instanceof ut||e instanceof _t)return _e;if(e instanceof y)return St;if(e instanceof T)return Ot;if(e instanceof Q)return Mt;if(e instanceof X)return me;if(e instanceof Z)return ve;if(e instanceof K)return we;if(e instanceof J)return ve;if(e instanceof Y)return me;if(e instanceof yt)return xt;if(e instanceof mt||e instanceof gt)return Wt;if(e instanceof ft)return zt}return null}function s(t){var e=i(303).StudyDisplayPropertyPage;return t instanceof vt?e:null}function r(t){var e=i(355);if(t instanceof h)return e}var a=i(285),l=i(77),h=(i(116),i(247),i(67).LineDataSource),c=i(117),d=i(293),p=i(124),u=i(297),_=i(126),f=i(298),g=i(127),m=i(299),v=i(129),y=i(130).LineToolElliott,w=i(131).LineToolFibCircles,b=i(134),S=(i(135),i(137).LineToolVertLine),T=i(195),C=i(196),x=i(197),P=i(198),L=i(199),k=i(200),E=i(201),I=i(125).LineToolParallelChannel,A=i(202),V=i(122).LineToolTrendLine,M=i(203).LineToolArrowMark,$=i(112).LineToolExecution,D=i(205),B=i(207),O=i(208),R=i(209),z=i(210),N=i(128).LineToolFibWedge,F=i(206).LineToolPitchfork,H=i(211),W=i(212),U=i(213),q=i(214),j=i(215),Y=i(216),G=i(217).LineToolTriangle,K=i(218),X=i(219).LineTool5PointsPattern,J=i(220),Z=i(221),Q=i(222).LineToolRiskReward,tt=i(223),et=i(224),it=i(226),ot=i(227).LineToolNote,nt=i(228),st=i(229),rt=i(230),at=i(231),lt=i(98).LineToolText,ht=i(96).LineToolHorzLine,ct=i(232),dt=i(120).LineToolRectangle,pt=i(233),ut=i(234),_t=i(235),ft=i(236),gt=i(237).LineToolBezierQuadro,mt=i(237).LineToolBezierCubic,vt=i(141).Study,yt=i(136).StudyLineDataSource,wt=i(250).study_Overlay,bt=i(251),St=i(300),Tt=i(301),Ct=i(303).StudyInputsPropertyPage,xt=i(303).StudyStylesPropertyPage,Pt=i(304),Lt=i(305),kt=i(306),Et=i(307).LineToolHorzLineStylesPropertyPage,It=i(307).LineToolHorzLineInputsPropertyPage,At=i(308).LineToolTrendAngleStylesPropertyPage,Vt=i(308).LineToolTrendAngleInputsPropertyPage,Mt=i(309).LineToolRiskRewardStylesPropertyPage,$t=i(309).LineToolRiskRewardInputsPropertyPage,Dt=i(310).LineToolVertLineStylesPropertyPage,Bt=i(310).LineToolVertLineInputsPropertyPage,Ot=i(311).LineToolBarsPatternStylesPropertyPage,Rt=i(312).LineToolGhostFeedInputsPropertyPage,zt=i(312).LineToolGhostFeedStylesPropertyPage,Nt=i(313),Ft=i(314),Ht=i(315),Wt=i(316),Ut=i(317),qt=i(318),jt=i(319),Yt=i(320),Gt=i(321),Kt=i(322),Xt=i(323),Jt=i(324),Zt=i(325),Qt=i(326),te=i(327),ee=i(328),ie=i(329),oe=i(330),ne=i(331),se=i(332),re=i(333),ae=i(334),le=i(335),he=i(336),ce=i(337),de=i(338),pe=i(339),ue=i(340),_e=i(341),fe=i(342),ge=i(343),me=i(344),ve=i(345),ye=i(346),we=i(347),be=i(348),Se=i(349),Te=i(350),Ce=i(351),xe=i(352);
e.createInputsPropertyPage=function(t,e){var i=o(t);return i?new i(t.properties(),e,t):null},e.createStudyStrategyPropertyPage=function(t,e){var o=i(248),n=i(356);return t instanceof o?new n(t.properties(),e,t):null},e.createStylesPropertyPage=function(t,e){var i=n(t);return i?new i(t.properties(),e,t):null},e.createDisplayPropertyPage=function(t,e){var i=s(t);return i?new i(t.properties(),e,t):null},e.createVisibilitiesPropertyPage=function(t,e){var i=r(t);return i?new i(t.properties(),e,t):null},e.hasInputsPropertyPage=function(t){return!!o(t)},e.hasStylesPropertyPage=function(t){return!!n(t)},e.hasDisplayPropertyPage=function(t){return!!s(t)}}).call(e,i(1))},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i),this.prepareLayout()}var n=i(294),s=i(295),r=s.FloatBinder,a=s.BooleanBinder,l=s.SliderBinder,h=s.ColorBinding,c=s.SimpleComboBinder,d=i(50),p=d.addColorPicker,u=d.createLineStyleEditor,_=d.createLineWidthEditor,f=d.createTransparencyEditor;inherit(o,n),o.prototype.addLevelEditor=function(t,e){var i,o,n,s,l,c=e||$("<tr>").appendTo(this._table),d=$("<td>");return d.appendTo(c),i=$("<input type='checkbox' class='visibility-switch'>"),i.appendTo(d),e&&i.css("margin-left","15px"),o=$("<td>"),o.appendTo(c),n=$("<input type='text'>"),n.appendTo(o),n.css("width","70px"),this.bindControl(new r(n,t.coeff,(!1),this.model(),"Change Pitchfork Line Coeff")),s=$("<td class='colorpicker-cell'>"),s.appendTo(c),l=p(s),this.bindControl(new a(i,t.visible,(!0),this.model(),"Change Fib Retracement Line Visibility")),this.bindControl(new h(l,t.color,(!0),this.model(),"Change Fib Retracement Line Color",0)),c},o.prototype.prepareLayout=function(){var t,e,i,o,n,s,r,d,g,m,v,y,w,b,S,T,C,x,P,L,k,E,I,A,V,M,D,B,O,R,z,N,F;for(this._div=$(document.createElement("div")).addClass("property-page"),t=this._linetool.properties().trendline,e=$("<table>").appendTo(this._div).css("padding-bottom","3px"),t&&(i=$("<tr>").appendTo(e),o=$("<input type='checkbox' class='visibility-switch'>"),$("<td>").append(o).appendTo(i),$("<td>").append($.t("Trend Line")).appendTo(i),this.bindControl(new a(o,t.visible,(!0),this.model(),"Change Fib Retracement Line Visibility")),n=$("<td class='colorpicker-cell'>").appendTo(i),s=p(n),this.bindControl(new h(s,t.color,(!0),this.model(),"Change Fib Retracement Line Color",0)),r=$("<td>").appendTo(i),d=_(),d.appendTo(r),this.bindControl(new l(d,t.linewidth,parseInt,this.model(),"Change Fib Retracement Line Width")),g=$("<td>").appendTo(i),m=u(),m.render().appendTo(g),this.bindControl(new c(m,t.linestyle,parseInt,(!0),this.model(),"Change Fib Retracement Line Style"))),v=this._linetool.properties().levelsStyle,y=$("<tr>").appendTo(e),$("<td>").appendTo(y),$("<td>"+$.t("Levels Line")+"</td>").appendTo(y),$("<td>").appendTo(y),r=$("<td>").appendTo(y),d=_(),d.appendTo(r),this.bindControl(new l(d,v.linewidth,parseInt,this.model(),"Change Fib Retracement Line Width")),g=$("<td>").appendTo(y),m=u(),m.render().appendTo(g),this.bindControl(new c(m,v.linestyle,parseInt,(!0),this.model(),"Change Fib Retracement Line Style")),this._table=$(document.createElement("table")).appendTo(this._div),this._table.attr("cellspacing","0"),this._table.attr("cellpadding","2"),w={},b=0;b<24;b++)S=b%8,y=w[S],T="level"+(b+1),w[S]=this.addLevelEditor(this._linetool.properties()[T],y);this.addOneColorPropertyWidget(this._table),C=$("<table cellpadding=0 cellspacing=0>").appendTo(this._div),x=$("<tr>").appendTo(C),this._linetool.properties().extendLines&&(P=$("<input type='checkbox' class='visibility-switch'>"),L=$("<label>").append(P).append($.t("Extend Lines")),$("<td>").append(L).appendTo(x)),this._linetool.properties().extendLeft&&(k=$("<input type='checkbox' class='visibility-switch'>"),L=$("<label>").append(k).append($.t("Extend Left")),$("<td>").append(L).appendTo(x)),this._linetool.properties().extendRight&&(E=$("<input type='checkbox' class='visibility-switch'>"),L=$("<label>").append(E).append($.t("Extend Right")),$("<td>").append(L).appendTo(x)),this._linetool.properties().reverse&&(I=$("<input type='checkbox' class='visibility-switch'>"),L=$("<label>").append(I).append($.t("Reverse")),$("<td>").append(L).appendTo(x)),A=$("<tr>").appendTo(C),V=$("<input type='checkbox' class='visibility-switch'>"),L=$("<label>").append(V).append($.t("Levels")),$("<td>").append(L).appendTo(A),M=$("<input type='checkbox' class='visibility-switch'>"),L=$("<label>").append(M).append($.t("Prices")),$("<td>").append(L).appendTo(A),D=$("<input type='checkbox' class='visibility-switch'>"),L=$("<label>").append(D).append($.t("Percents")),$("<td>").append(L).appendTo(A),B=$("<table cellspacing='0' cellpadding='0'>").appendTo(this._div),O=$("<select><option value='left'>"+$.t("left")+"</option><option value='center'>"+$.t("center")+"</option><option value='right'>"+$.t("right")+"</option></select>"),R=$("<select><option value='bottom'>"+$.t("top")+"</option><option value='middle'>"+$.t("middle")+"</option><option value='top'>"+$.t("bottom")+"</option></select>"),y=$("<tr>"),y.append("<td>"+$.t("Labels")+"</td>").append(O).append("<td>&nbsp</td>").append(R),y.appendTo(B),z=$("<table cellspacing='0' cellpadding='0'>").appendTo(this._div),y=$("<tr>").appendTo(z),N=$("<input type='checkbox' class='visibility-switch'>"),$("<td>").append(N).appendTo(y),this.createLabeledCell($.t("Background"),N).appendTo(y),F=f(),$("<td>").append(F).appendTo(y),this.bindControl(new a(M,this._linetool.properties().showPrices,(!0),this.model(),"Change Gann Fan Prices Visibility")),this.bindControl(new a(V,this._linetool.properties().showCoeffs,(!0),this.model(),"Change Gann Fan Levels Visibility")),this.bindControl(new a(N,this._linetool.properties().fillBackground,(!0),this.model(),"Change Fib Retracement Background Visibility")),this.bindControl(new l(F,this._linetool.properties().transparency,(!0),this.model(),"Change Fib Retracement Background Transparency")),this._linetool.properties().extendLines&&this.bindControl(new a(P,this._linetool.properties().extendLines,(!0),this.model(),"Change Fib Retracement Extend Lines")),this._linetool.properties().extendLeft&&this.bindControl(new a(k,this._linetool.properties().extendLeft,(!0),this.model(),"Change Fib Retracement Extend Lines")),this._linetool.properties().extendRight&&this.bindControl(new a(E,this._linetool.properties().extendRight,(!0),this.model(),"Change Fib Retracement Extend Lines")),this._linetool.properties().reverse&&this.bindControl(new a(I,this._linetool.properties().reverse,(!0),this.model(),"Change Fib Retracement Reverse")),this.bindControl(new c(O,this._linetool.properties().horzLabelsAlign,null,(!0),this.model(),"Change Fib Labels Horizontal Alignment")),this.bindControl(new c(R,this._linetool.properties().vertLabelsAlign,null,(!0),this.model(),"Change Fib Labels Vertical Alignment")),this.bindControl(new a(D,this._linetool.properties().coeffsAsPercents,(!0),this.model(),"Change Fib Retracement Coeffs As Percents")),this.loadData()},o.prototype.widget=function(){return this._div},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){s.call(this,t,e),this._linetool=i,this._templateList=new l(this._linetool._constructor,this.applyTemplate.bind(this))}var n=i(295),s=n.PropertyPage,r=n.ColorBinding,a=i(50).addColorPicker,l=i(296);inherit(o,s),o.prototype.applyTemplate=function(t){this._linetool.restoreTemplate(t),this._model.model().updateSource(this._linetool),this.loadData()},o.prototype.createTemplateButton=function(t){var e=this;return t=$.extend({},t,{getDataForSaveAs:function(){return e._linetool.template()}.bind(e)}),this._templateList.createButton(t)},o.prototype.createOneColorForAllLinesWidget=function(){var t=$("<td class='colorpicker-cell'>");return this.bindControl(new r(a(t),this._linetool.properties().collectibleColors,(!0),this.model(),"Change All Lines Color",0)),{label:$("<td>"+$.t("Use one color")+"</td>"),editor:t}},o.prototype.addOneColorPropertyWidget=function(t){var e=this.createOneColorForAllLinesWidget(),i=$("<tr>");i.append($("<td>")).append($("<td>").append(e.label)).append($("<td>").append(e.editor)),i.appendTo(t)},o.prototype.appendTemplateRow=function(t){var e,i,o;is_authenticated&&(e=$(document.createElement("tr")),e.appendTo(t),i=$(document.createElement("td")),i.attr("colspan",2),i.appendTo(e),o=$('<div class="dialog-theme-buttons"></div>').appendTo(i),this.templateButton=$(this.createTemplateButton()),this.templateButton.appendTo(o),$('<tr><td class="property-page-separator-cell" colspan="6"><div class="property-page-separator"></div></td></tr>').appendTo(t))},t.exports=o},function(t,e,i){(function(t){"use strict";function o(t,e){this._model=e,this._bindings=[],this._property=t}function n(t,e,i,o,s,r){return t?(this._control=t,this._property=e,this._applyOnFly=i,this._undoModel=o,this._undoText=s,void(e&&(this._formatters=[],this._changed=!1,this.setValue(e.value()),e.listeners().subscribe(this,n.prototype.propertyChanged)))):void TradingView.logDebugChart("Binding: missing control")}function s(t){return t.toUpperCase()}function r(t){return function(e){return e<t?t:e}}function a(t){return function(e){return e>t?t:e}}function l(t){return function(e){var i=parseInt(e,10);return TradingView.isNaN(i)?t:i}}function h(t){var e=new A;return function(i){var o=e.parse(i);return TradingView.isNaN(o)?t:o}}function c(){return function(t){for(var e=t,i=t.replace(/[^\u0000-\u007F]/,"");i.length!==e.length;)e=i,i=e.replace(/[^\u0000-\u007F]/,"");return i}}function d(t){return function(e){return 0===e.length?t:e}}function p(t,e,i,o,s,r){n.call(this,t,e,o,s,r),this._transformFunction=i,this._attachToControl(t,o)}function u(t,e,i,o,n){p.call(this,t,e,h(e.value()),i,o,n),this.addFormatter(function(t){return(new A).format(t)})}function _(t,e,i,o,s,r){this._subControlIds=e,n.call(this,t,i,o,s,r),this._forEachSubControl(function(t){this._attachToControl(t,o)})}function f(t,e,i,o,s,r,a){this._model=o,this._mainSeries=r,this._toIntTransformer=l(a),this._disabled=!1,n.call(this,t,e,i,o,s);var h=this;i&&t.change(function(){h.setValueToProperty(h.value())}),this._mainSeries.onBarReceived().subscribe(this,function(t){h.setValue(this.property().value())})}function g(t,e,i,o,s){n.call(this,t,e,i,o,s),i&&t.on("accept-symbol",function(t,e){this.setValueToProperty(e)}.bind(this))}function m(t,e,i,o,s,r,a){n.call(this,t,e,o,s,r),this._transformFunction=i,this._setter=a;var l=this;o&&t.change(function(){l._setter?l._setter.call(l,l.value()):l.setValueToProperty(l.value())})}function v(t,e){n.call(this,t,e)}function y(t,e,i,o,s,r){if(!t.is(":checkbox, :radio"))return new b(t,e,i,o,s);n.call(this,t,e,i,o,s),this._setter=r;var a=this;i&&t.change(function(){a._setter?a._setter.call(a,a.value()):a.setValueToProperty(a.value())})}function w(t,e,i,o,s,r){n.call(this,t,e,i,o,s),this._inverted=r===!0}function b(t,e,i,o,s){n.call(this,t,e,i,o,s);var r=this;i&&t.click(function(){var t=$(this).toggleClass("active").hasClass("active");r.setValueToProperty(t)})}function S(t,e,i,o,s){return i?(n.call(this,t,e,!0,i,o),void(s?t.callbacks().subscribe(this,s):t.callbacks().subscribe(this,S.prototype.onActionCallback))):void TradingView.logDebugChart("ActionBinder: Missed undo model")}function T(t,e,i,o,s,r){var a,l;a=t.is("input")?t:t.find("input"),n.call(this,a,e,i,o),this._transparencyProperty=r,this.applyOldTransparency(),l=this,i&&a.change(function(){l.setValueToProperty(l.value())})}function C(e,i,o,s,r,a){function l(t,e){var i=c.control().slider("option","min"),o=c.control().slider("option","max"),n=c._property.value();(i<=n&&n<=o||i<e.value&&e.value<o)&&c.setValueToProperty(e.value)}function h(t,e){c.setValueToProperty(e.value)}isNumber(i.value())||(TradingView.logWarn("Property cannot be binded to control, bad value (expect number): "+i.value()),i=new t),n.call(this,e,i,o,s,r);var c=this;o&&(a?(e.bind("slidechange",l),e.bind("slide",l)):(e.bind("slidechange",h),e.bind("slide",h))),e.bind("slidestart",function(t,e){s.beginUndoMacro(r)}),e.bind("slidestop",function(t,e){s.endUndoMacro()})}function x(t,e,i,o,n,s){y.call(this,t,e,o,n,s),this._intervalProperty=i,this._intervalProperty.listeners().subscribe(this,this.onIntervalChanged),this.onIntervalChanged()}function P(t,e,i,o){this._control=t,this._wv=e.spawn(),this._transformFunction=i,this._undoText=o,this._attachToControl(this._control)}function L(t,e,i,o,n){this._not=!!n,P.apply(this,arguments)}function k(t,e,i,o,n,s,r,a){this._propFrom=e[0],this._propTo=e[1],this._control=t,this._applyOnFly=o,this._undoModel=n,this._undoText=r,this._properties=e,this._inputsText=s,this._transformers=i;var l=this;t.slider({range:!0,min:i[0],max:i[1],values:[l._propFrom.value(),l._propTo.value()]}),this.$rangeHandleFrom=$(t.find(".ui-slider-handle")[0]).addClass("from"),this.$rangeHandleTo=$(t.find(".ui-slider-handle")[1]).addClass("to"),this.setValue(this._propFrom,0),this.setValue(this._propTo,1),a&&($(a).on("change",function(t){$(this).is(":checked")?(l._control.slider("enable"),$(l._inputsText[0]).prop("disabled",!1),$(l._inputsText[1]).prop("disabled",!1)):(l._control.slider("disable"),$(l._inputsText[0]).prop("disabled",!0),$(l._inputsText[1]).prop("disabled",!0))}),$(a).is(":checked")?(l._control.slider("enable"),$(l._inputsText[0]).prop("disabled",!1),$(l._inputsText[1]).prop("disabled",!1)):(l._control.slider("disable"),$(l._inputsText[0]).prop("disabled",!0),$(l._inputsText[1]).prop("disabled",!0))),s&&($(s[0]).val(this._control.slider("values",0)),$(s[1]).val(this._control.slider("values",1)),t.slider({slide:function(t,e){$(s[0]).val(e.values[0]),$(s[1]).val(e.values[1])}}),$(s).each(function(){$(this).on("keydown",function(t){parseInt($(s[0]).val())<l._transformers[0]?$(s[0]).val(l._transformers[0]):parseInt($(s[1]).val())>l._transformers[1]&&$(s[1]).val(l._transformers[1]),$.inArray(t.keyCode,[46,8,9,27,13,110,190])!==-1||65==t.keyCode&&t.ctrlKey===!0||67==t.keyCode&&t.ctrlKey===!0||88==t.keyCode&&t.ctrlKey===!0||t.keyCode>=35&&t.keyCode<=39||(t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)&&t.preventDefault()})}),$(s[0]).on("keyup",function(t){parseInt($(this).val())<l._transformers[0]?$(this).val(l._transformers[0]):parseInt($(this).val())>l._transformers[1]&&$(this).val(l._transformers[1]),parseInt($(this).val())>parseInt($(s[1]).val())&&$(this).val(s[1].val()),l._control.slider("values",0,$(this).val()),k.prototype.setValueToProperty.call(l,l._control.slider("values"),"from")}),$(s[1]).on("keyup",function(t){parseInt($(this).val())<l._transformers[0]?$(this).val(l._transformers[0]):parseInt($(this).val())>l._transformers[1]&&$(this).val(l._transformers[1]),parseInt($(this).val())<$(s[0]).val()&&$(this).val(s[0].val()),l._control.slider("values",1,$(this).val()),k.prototype.setValueToProperty.call(l,l._control.slider("values"),"to")})),this._propFrom.listeners().subscribe(this,k.prototype.propertyChanged),this._propTo.listeners().subscribe(this,k.prototype.propertyChanged),o&&t.on("slide",function(t,e){l.setValueToProperty(l._control.slider("values"),e.handle)}),t.slider({stop:function(t,e){s&&($(s[0]).val(l._control.slider("values",0)),$(s[1]).val(l._control.slider("values",1))),l.setValueToProperty(l._control.slider("values"),e.handle)},start:function(t,e){s&&($(s[0]).val(l._control.slider("values",0)),$(s[1]).val(l._control.slider("values",1))),l.setValueToProperty(l._control.slider("values"),e.handle)}})}function E(t,e,i,o,s,r){n.call(this,t,e,i,o,s),this._separator=r||" ";var a=this;i&&t.change(function(){a.setValueToProperty(a.value())})}var I=i(287).UndoHistory,A=i(75).NumericFormatter;o.prototype.model=function(){return this._model},o.prototype.bindControl=function(t){return this._bindings.push(t),t},o.prototype.unbindControl=function(t){var e=this._bindings.indexOf(t);e!==-1&&this._bindings.splice(e,1)},o.prototype.loadData=function(){var t,e,i;for(t=0;t<this._bindings.length;t++)e=this._bindings[t],e.properties?(i=e.properties(),e.setValue(i[0],0),e.setValue(i[1],1)):e.property&&(e.transparencyProperty&&e.transparencyProperty()?e.applyOldTransparency():e.setValue(e.property().value()))},o.prototype.saveData=function(){var t,e;for(this._model.beginUndoMacro(),t=0;t<this._bindings.length;t++)e=this._bindings[t],e.changed()&&this._model.setProperty(e.property(),e.value());this._model.endUndoMacro()},o.prototype.createColorPicker=function(t){var e,i;return t=t||{},e=$('<input class="colorpicker-widget">').bind("customcolorchange",function(t,e){TVSettings.setJSON("pickerCustomColors",e)}).on("change",function(){$(this).css("border-color",TradingView.generateLowBrightnessColor($(this).val()||TradingView.defaultColorPickersBorder))}).tvcolorpicker({customColors:TVSettings.getJSON("pickerCustomColors",[]),hideTransparency:!!t.hideTransparency}),i=$('<span class="tvcolorpicker-container">'),$('<div class="tvcolorpicker-transparency">').appendTo(i),e.appendTo(i),t.addClass&&i.addClass(t.addClass),i},o.prototype.createTextEditor=function(t,e){var i={};return t&&(i.width=t),e&&(i.height=e),$(document.createElement("textarea")).css(i)},o.prototype.createCombo=function(t){var e=$(document.createElement("select")),i=t.reduce(function(t,e){return t.add($(document.createElement("option")).prop({value:e,text:e}))},$());return e.append(i)},o.prototype.createKeyCombo=function(t){var e=$(document.createElement("select"));return $.each(t||[],function(t,i){$(document.createElement("option")).prop({value:t,text:i}).appendTo(e)}),e},o.prototype.createFontEditor=function(t){var e=t||TradingView.factoryDefaults("chartproperties.editorFontsList");return this.createCombo(e)},o.prototype.createFontSizeEditor=function(t){var e=t||[10,11,12,14,16,20,24,28,32,40];return this.createCombo(e).addClass("tv-select-container-fontsize")},o.prototype.createSeriesMinTickEditor=function(){var t,e,i,o,n="<select><option value='default'>"+$.t("Default")+"</option>",s=[{priceScale:1,minMove:1,frac:!1},{priceScale:10,minMove:1,frac:!1},{priceScale:100,minMove:1,frac:!1},{priceScale:1e3,minMove:1,frac:!1},{priceScale:1e4,minMove:1,frac:!1},{priceScale:1e5,minMove:1,frac:!1},{priceScale:1e6,minMove:1,frac:!1},{priceScale:2,minMove:1,frac:!0},{priceScale:4,minMove:1,frac:!0},{priceScale:8,minMove:1,frac:!0},{priceScale:16,minMove:1,frac:!0},{priceScale:32,minMove:1,frac:!0},{priceScale:64,minMove:1,frac:!0},{priceScale:128,minMove:1,frac:!0},{priceScale:320,minMove:1,frac:!0}];for(t in s)e=s[t],i=e.priceScale+","+e.minMove+","+e.frac,o=e.minMove+"/"+e.priceScale,n+="<option value='"+i+"'>"+o+"</option>";return n+="</select>",$(n)},o.prototype.createPrecisionEditor=function(){var t,e="<select><option value='default'>"+$.t("Default")+"</option>";for(t=0;t<=6;t++)e+="<option value='"+t+"'>"+t+"</option>";return e+="</select>",$(e)},o.prototype.createLabeledCell=function(t,e,i){var o,n,s,r,a,l=null;return"number"==typeof t.valueOf()?(l=t,o=e,n=i):(o=t,n=e),o+="",s=this._labelToId(o),r=$("<td>"),a=$("<label>").html(o.length>0?$.t(o):"").attr("for",s).appendTo(r),l&&r.attr("colspan",l),n&&n.attr("id",s),r},o.prototype.createTableInTable=function(t){var e=$("<tr>").appendTo(t),i=$("<td>").appendTo(e);return $('<table cellpadding="0" cellspacing="0">').appendTo(i)},o.prototype._labelToId=function(t){return"control"+t.replace(/(^| )\w/g,function(t){return"-"+t.trim().toLowerCase()})+Math.floor(1e3*Math.random())},o.prototype.addRow=function(t){var e=$(document.createElement("tr"));return e.appendTo(t)},o.prototype.addLabeledRow=function(t,e,i,o){var n,s=e&&e.length>0?$.t(e):"",r=$(document.createElement("tr")),a=$(document.createElement("td")).html(s);return o&&a.attr("colspan",2),i&&(n=this._labelToId(e),i.attr("id",n),a.html('<label for="'+n+'">'+s+"</label>")),r.append(a).appendTo(t)},o.prototype.addEditorRow=function(t,e,i,o){var n=$(document.createElement("td"));return i.row=this.addLabeledRow(t,e,i,o),i.appendTo(n.appendTo(i.row)),i},o.prototype.addColorPickerRow=function(t,e){return this.addEditorRow(t,e,this.createColorPicker())},o.prototype.addOffsetEditorRow=function(t,e){var i=$("<input/>");return i.attr("type","text"),i.css("width","100px"),i.addClass("ticker"),this.addEditorRow(t,e,i)},o.prototype.addFontEditorRow=function(t,e){return this.addEditorRow(t,e,this.createFontEditor())},o.prototype.refreshStateControls=function(t,e,i){var o,n,s;for(o=0;o<e.length;o++)n=e[o],s=t[n.id],s.toggle(this.parseRule(n.visible,e,i)),s.attr("disabled",!this.parseRule(n.visible,e,i))},o.prototype.parseRule=function(t,e,i){if(!t)return!0;var o=t.split("==");return!(o.length<2)&&i[o[0]].value()==o[1]},o.prototype.destroy=function(){for(var t=this._bindings.length;t--;)this._bindings[t].destroy();this._bindings.length=0},o.prototype.bindInteger=function(t,e,i,o,n){var s=[l(e.value())];void 0!==o&&s.push(r(1)),void 0!==n&&s.push(a(1e3)),this.bindControl(new p(t,e,s,(!1),this.model(),i))},o.prototype.bindColor=function(t,e,i){this.bindControl(new T(t,e,(!0),this.model(),i))},o.prototype.bindBoolean=function(t,e,i){this.bindControl(new y(t,e,(!0),this.model(),i))},n.prototype.addFormatter=function(t){this._formatters.push(t),this.setValue(this._property.value())},n.prototype._formatValue=function(t){return this._formatters.reduce(function(t,e){return e(t)},t)},n.prototype._attachToControl=function(t,e){var i=this;e?t.on("keyup change input",function(t){var e=i.value();i.setValueToProperty(e),i.setValue(e)}):(t.keypress(function(t){if(this._changed=!0,13==t.which){var e=i.value();i.setValueToProperty(e),i.setValue(e)}}),t.focusout(function(t){var e=i.value();i.changed()&&(i.setValueToProperty(e),i.setValue(e))}),t.change(function(t){var e=i.value();$(t.target).is(".ticker")?(void 0!==i._changeTimerId&&clearTimeout(i._changeTimerId),i._changeTimerId=setTimeout(function(){i.setValueToProperty(e)},250)):i.setValueToProperty(e),i.setValue(e)}))},n.prototype.control=function(){return this._control},n.prototype.changed=function(){return this._changed},n.prototype.setValueToProperty=function(t){this._undoModel.setProperty(this._property,t,this._undoText),this._changed=!1},n.prototype.property=function(){return this._property},n.prototype.propertyChanged=function(t){this.setValue(t.value())},n.prototype.destroy=function(){this._property&&this._property.listeners().unsubscribe(this,n.prototype.propertyChanged)},inherit(p,n),p.prototype.value=function(){var t,e=this._control.val();if(this._transformFunction)if(Array.isArray(this._transformFunction))for(t=0;t<this._transformFunction.length;t++)e=this._transformFunction[t](e);else e=this._transformFunction(e);return e},p.prototype.setValue=function(t){var e=this._control.val(),i=this._formatValue(t);e!==i&&this._control.val(i)},inherit(u,p),inherit(_,n),_.prototype._forEachSubControl=function(t){this._subControlIds.forEach(function(e){var i="#"+e,o=this.control().find(i);t.call(this,o)},this)},_.prototype._parseSessions=function(t){var e,i,o=t.split("-",2);return 2!=o.length&&(o=["0","0"]),e=parseInt(o[0]),i=parseInt(o[1]),[Math.floor(e/100),e%100,Math.floor(i/100),i%100]},_.prototype.value=function(){var t,e,i,o=[];return this._forEachSubControl(function(t){o.push(t.val())}),t=function(t,e){return e.forEach(function(e){t=e(t)}),("0"+t).slice(-2)},e=[l(0),r(0),a(23)],i=[l(0),r(0),a(59)],t(o[0],e)+t(o[1],i)+"-"+t(o[2],e)+t(o[3],i)},_.prototype.setValue=function(t){var e=this._parseSessions(t);this._forEachSubControl(function(t){var i=t.val(),o=("0"+e[0]).slice(-2);e.shift(),i!==o&&t.val(o)})},inherit(f,n),f.prototype.value=function(){var t,e,i,o;return this._disabled?(this._control.attr("disabled",!0),null):(t=this._control.val(),e=this._toIntTransformer(t),e<0&&(e=0),i=this._mainSeries.bars().size(),i<=e&&(e=i-1),o=this._mainSeries.bars()._valueAt(this._mainSeries.bars().lastIndex()-e)[TradingView.TIME_PLOT],1e3*o)},f.prototype.setValue=function(t){var e,i,o,n;return this._disabled||null==t?void this._control.attr("disabled",!0):t<0?(this._control.val(-t),void this._property.setValue(this.value())):(e=this._mainSeries.data().timeToBarIndex(t/1e3,TradingView.SEARCH_FROM_RIGHT),null===e?void(this._disabled=!0):(i=this._mainSeries.bars().lastIndex(),o=i-e,n=this._control.val(),void(n!==""+o&&this._control.val(o))))},inherit(g,n),g.prototype.value=function(){return this._control.val()},g.prototype.setValue=function(t){var e=this.value();t&&e!==t&&this._control.val(t)},inherit(m,n),m.prototype.value=function(){var t=this._control.val();return this._transformFunction&&(t=this._transformFunction(t)),t},m.prototype.setValue=function(t){var e,i;if(this._control.val(t),this._control.selectbox)try{e=this._control.find("[value='"+t+"']"),e.length>0&&(i=e[0],this._control.selectbox("change",i.value,i.text))}catch(o){}},inherit(v,n),v.prototype.value=function(){return this._property.value()},v.prototype.setValue=function(t){return this._control.html(t)},inherit(y,n),y.prototype.value=function(){return this.control().is(":checked")},y.prototype.setValue=function(t){var e,i,o,n;return this.control().is(".visibility-checker")&&(t?(this.control().closest("tr").find(".slider-range").slider("enable"),this.control().closest("tr").find('input[type="text"]').each(function(){$(this).prop("disabled",!1)})):(this.control().closest("tr").find(".slider-range").slider("disable"),this.control().closest("tr").find('input[type="text"]').each(function(){$(this).prop("disabled",!0)}))),this.control().is(".visibility-switch")&&(e={opacity:t?1:.5},i=t?"enable":"disable",o=this.control().data("hides"),o?o.closest("td").css(e):(n=this.control(),n.parent().parent().data("visible",t).find("td").filter(function(){var t=$(this);return!t.find("label").length&&t.find(":checkbox").attr("id")!==n.attr("id")}).each(function(){var o=$(this),n=o.children();n.each(function(){var n=$(this);n.is(".ui-slider")?n.slider(i):n.is("select")?(n.selectbox(i),o.css(e)):n.is(".custom-select")?(n.data(i)(),o.css(e)):n.is(".tvcolorpicker-container")?(n.find("input").prop("disabled",!t),o.css(e)):(n.prop("disabled",!t),o.css(e))})}))),this.control().attr("checked",!!t)},inherit(w,n),w.prototype.value=function(){return this.control().is(":disabled")},w.prototype.setValue=function(t){return t=!!t,this._inverted&&(t=!t),this.control().parents("label").toggleClass("disabled",t),this.control().attr("disabled",t)},inherit(b,n),b.prototype.value=function(){return this.control().hasClass("active")},b.prototype.setValue=function(t){return this.control().toggleClass("active",!!t)},inherit(S,n),S.prototype.onActionCallback=function(t){this._undoModel.setProperty(this._property,this.value(),this._undoText)},S.prototype.value=function(){return this.control().checked},S.prototype.setValue=function(t){return this.control().checked=!!t},inherit(T,n),T.prototype.applyOldTransparency=function(){var t,e,i;this.transparencyProperty()&&(TradingView.isHexColor(this.property().value())?(t=this.transparencyProperty().value?this.transparencyProperty().value():this.transparencyProperty(),e=TradingView.hexRgbDecomp(this.property().value()),i=(100-t)/100,this.control().val(TradingView.rgbaComp(e,i)),this.control().change()):(this.control().val(this.property().value()),this.control().change()))},T.prototype.transparencyProperty=function(){return this._transparencyProperty},T.prototype.value=function(){return this._control.val()},T.prototype.setValue=function(t){this._control.val(t),this._control.change(),this._control.color&&this._control.color.fromString(t)},inherit(C,n),C.prototype.value=function(){return this._control.slider("option","value")},C.prototype.setValue=function(t){this._control.slider("option","value",t)},inherit(x,y),x.prototype.onIntervalChanged=function(){+this._intervalProperty.value()<1440?this._control.attr({disabled:!1,checked:!!this._property.value()}):this._control.attr({disabled:!0,checked:!1})},x.prototype.value=function(){return this._control.is(":disabled")?this._property.value():y.prototype.value.call(this)},x.prototype.setValue=function(t){if(!this._control.is(":disabled"))return y.prototype.setValue.call(this,t)},x.prototype.destroy=function(){this._intervalProperty.listeners().unsubscribe(this,this.onIntervalChanged),delete this._intervalProperty,y.prototype.destroy.call(this,arguments)},P.prototype._attachToControl=function(t){var e=this;this._wv.subscribe(this.setValue.bind(this),{callWithLast:!0}),$(this._control).on("change",function(){e.setValueToProperty(e.value())})},P.prototype.control=function(){return this._control},P.prototype.value=function(){var t=$(this._control).val();return this._transformFunction&&(t=this._transformFunction(t)),t},P.prototype.setValue=function(t){$(this._control).val(t)},P.prototype.setValueToProperty=function(t){I.setWatchedValue(this._wv,t,this._undoText)},P.prototype.watchedValue=function(){return this._wv},P.prototype.destroy=function(){this._wv.destroy()},inherit(L,P),L.prototype._attachToControl=function(t){var e=this;this._wv.subscribe(this.setValue.bind(this),{callWithLast:!0}),$(this._control).on("click",function(){e.setValueToProperty(e.value())})},L.prototype.value=function(){var t=$(this._control).attr("checked");return this._not&&(t=!t),this._transformFunction&&(t=this._transformFunction(t)),t},L.prototype.setValue=function(t){this._not&&(t=!t),$(this._control).attr("checked",!!t)},k.prototype.properties=function(){return this._properties},k.prototype.value=function(t){return this._control.slider("values",t)},k.prototype.setValue=function(t,e){this._control.slider("values",e,t.value()),this._inputsText&&$(this._inputsText[e]).val(t.value())},k.prototype.propertyChanged=function(t){this.setValue(t)},k.prototype.setValueToProperty=function(t,e){($(e).hasClass("from")||"from"===e)&&(this._undoModel.beginUndoMacro(this._undoText[0]),this._undoModel.setProperty(this._propFrom,t[0],this._undoText[0]),this._propFrom.setValue(t[0],0),this._undoModel.endUndoMacro()),($(e).hasClass("to")||"to"===e)&&(this._undoModel.beginUndoMacro(this._undoText[1]),this._undoModel.setProperty(this._propTo,t[1],this._undoText[1]),this._propTo.setValue(t[1],1),this._undoModel.endUndoMacro())},k.prototype.destroy=function(){this._propFrom&&this._propTo&&(this._propFrom.listeners().unsubscribe(this,n.prototype.propertyChanged),this._propTo.listeners().unsubscribe(this,n.prototype.propertyChanged))},inherit(E,n),E.prototype.value=function(){var t=[];return this._control.each(function(){var e=$(this);e.is(":checked")&&t.push(e.attr("value"))}),t.join(this._separator)},E.prototype.setValue=function(t){var e=t.split(this._separator).filter(Boolean);this._control.each(function(){var t=$(this),i=e.indexOf(t.attr("value"))!==-1;t.attr("checked",i),t.parents("label").toggleClass("active",i)})},e.PropertyPage=o,e.UppercaseTransformer=s,e.GreateTransformer=r,e.LessTransformer=a,e.ToIntTransformer=l,e.ToFloatTransformer=h,e.ToAsciiTransformer=c,e.ReplaceEmptyTransformer=d,e.SimpleStringBinder=p,e.FloatBinder=u,e.SessionBinder=_,e.BarTimeBinder=f,e.SymbolBinder=g,e.SimpleComboBinder=m,e.StaticContentBinder=v,e.BooleanBinder=y,e.DisabledBinder=w,e.ActionBinder=S,e.ColorBinding=T,e.SliderBinder=C,e.CheckboxWVBinding=L,e.RangeBinder=k}).call(e,i(63))},function(t,e,i){(function(e){"use strict";function o(t,i,o){var n={saveAsText:$.t("Save As..."),applyDefaultText:$.t("Apply Defaults")};this._toolName=t,this._applyTemplate=i,this._options=$.extend(n,o||{}),this._list=[],e.enabled("charting_library_base")||(this.templatesDeferred=this.loadData())}var n=i(50),s=n.showChartNameDialog,r=n.bindPopupMenu;o._cache={},o.prototype.getData=function(){return this._list},o.prototype.loadData=function(){var t=this;return this._toolName in o._cache?(this._list=o._cache[this._toolName],$.Deferred().resolve()):$.get("/drawing-templates/"+this._toolName+"/",function(e){t._list=e,o._cache[t._toolName]=e}).error(function(){TradingView.logWarn("Failed to load drawing template: "+t._toolName)})},o.prototype.templatesLoaded=function(){return this.templatesDeferred},o.prototype.invalidateToolCache=function(){delete o._cache[this._toolName]},o.prototype.createButton=function(t){var e,i=this;return t=$.extend({},t,i._options),
e=$("<a></span></a>").addClass(t.buttonClass?t.buttonClass:"_tv-button").html(t.buttonInner?t.buttonInner:$.t("Template")+'<span class="icon-dropdown">'),r(e,null,{event:"button-popup"}),e.bind("click",function(e){var o,n,r;e.stopPropagation(),$(this).is("active")||(o=[],"function"==typeof t.getDataForSaveAs&&(n=function(){runOrSignIn(function(){var e=function(e){var o=JSON.stringify(t.getDataForSaveAs());i.saveTemplate(e,o)}.bind(i),o=$.t("Save template as..."),n=$.t("Template name"),r=$.t("Please enter template name"),a=64;s(e,{title:o,label:n,error:r},a)},{source:"Save line tool template",sourceMeta:"Chart"})},o.push({title:t.saveAsText,action:n,addClass:"special"})),"function"==typeof t.defaultsCallback&&o.push({title:t.applyDefaultText,action:t.defaultsCallback,addClass:"special"}),r=[],$.each(i._list,function(e,o){r.push({title:o,action:function(){i.loadTemplate.call(i,o,t.loadTemplateCallback)},deleteAction:function(){runOrSignIn(function(){var t=$.t("Do you realy want to delete {0} template?").format(o?'"'+o+'"':"");TVDialogs.showConfirm($.t("Template"),t,function(){i.removeTemplate.call(i,o)})},{source:"Delete line tool template"})}})}),r.length&&(r.sort(function(t,e){return t=t.title.toUpperCase(),e=e.title.toUpperCase(),t==e?0:t>e?1:-1}),o.push({separator:!0}),o=o.concat(r)),$(this).trigger("button-popup",[o]))}),e},o.prototype.loadTemplate=function(t,e){var i=this;return $.get("/drawing-template/"+this._toolName+"/?templateName="+encodeURIComponent(t),function(t){i._applyTemplate(JSON.parse(t.content)),e&&e()}).error(function(t){TradingView.logWarn(t.responseText)})},o.prototype.removeTemplate=function(t){if(t){var e=this;$.post("/remove-drawing-template/",{name:t,tool:e._toolName}).error(function(t){TradingView.logWarn(t.responseText)}),e.invalidateToolCache(),e._list=$.grep(e._list,function(e){return e!=t})}},o.prototype.saveTemplate=function(t,e){var i,o,n,s,r,a=this;t&&e&&(t=TradingView.clean(t),i=$.inArray(t,a._list)!=-1,o=function(){var o={name:t,tool:a._toolName,content:e},n=function(){i||a._list.push(t)};$.post("/save-drawing-template/",o,n).error(function(t){TradingView.logWarn(t.responseText)}),a.invalidateToolCache()},i?(n=$.t("Confirm replacing"),s=o,r=$.t('Do you realy want to replace "{0}"?').format(t),TVDialogs.showConfirm(n,r,s)):o())},o.prototype.deleteAction=function(t){var e=t,i=this;runOrSignIn(function(){var t=$.t("Do you realy want to delete {0} template?").format(e?'"'+e+'"':"");TVDialogs.showConfirm($.t("Template"),t,function(){i.removeTemplate.call(i,e)})},{source:"Delete line tool template"})},o.prototype.showSaveDialog=function(t){var e=this;runOrSignIn(function(){var i=function(i){var o=JSON.stringify(t.template());e.saveTemplate(i,o)},o=$.t("Save template as..."),n=$.t("Template name"),r=$.t("Please enter template name"),a=64;s(i,{title:o,label:n,error:r},a)},{source:"Save line tool template"})},t.exports=o}).call(e,i(1))},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i)}var n=i(293);inherit(o,n),t.exports=o},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i),this.prepareLayout()}var n=i(294),s=i(295),r=s.FloatBinder,a=s.SimpleComboBinder,l=s.BooleanBinder,h=s.ColorBinding,c=s.SliderBinder,d=i(50),p=d.addColorPicker,u=d.createLineStyleEditor,_=d.createLineWidthEditor,f=d.createTransparencyEditor;inherit(o,n),o.prototype.addLevelEditor=function(t,e,i){var o,n,s,d,f,g,m,v,y,w,b=$("<tr>");b.appendTo(this._table),o=$("<td>"),o.appendTo(b),n=$("<input type='checkbox' class='visibility-switch'>"),n.appendTo(o),t?(s=$("<td>"),s.appendTo(b),d=$("<input type='text'>"),d.appendTo(s),d.css("width","70px"),this.bindControl(new r(d,e.coeff,(!1),this.model(),"Change Pitchfork Line Coeff"))):$("<td>"+$.t("Trend Line")+"</td>").appendTo(b),f=$("<td class='colorpicker-cell'>"),f.appendTo(b),g=p(f),m=$("<td>"),m.appendTo(b),v=_(),v.appendTo(m),t||(y=$("<td>"),y.appendTo(b),w=u(),w.render().appendTo(y),this.bindControl(new a(w,e.linestyle,parseInt,(!0),this.model(),"Change Fib Speed Resistance Arcs Style"))),this.bindControl(new l(n,e.visible,(!0),this.model(),"Change Fib Speed Resistance Arcs Visibility")),this.bindControl(new h(g,e.color,(!0),this.model(),"Change Fib Speed Resistance Arcs Line Color",0)),this.bindControl(new c(v,e.linewidth,(!0),this.model(),"Change Fib Speed Resistance Arcs Width"))},o.prototype.prepareLayout=function(){var t,e,i,o,n,s,r;for(this._table=$(document.createElement("table")),this._table.addClass("property-page"),this._table.attr("cellspacing","0"),this._table.attr("cellpadding","2"),this.addLevelEditor(null,this._linetool.properties().trendline,!1),t=1;t<=11;t++)e="level"+t,this.addLevelEditor("Level "+t,this._linetool.properties()[e],!1);this.addOneColorPropertyWidget(this._table),i=$("<input type='checkbox' class='visibility-switch'>"),o=this.addLabeledRow(this._table,$.t("Levels")),$("<td>").append(i).prependTo(o),this.bindControl(new l(i,this._linetool.properties().showCoeffs,(!0),this.model(),"Change Fib Speed Resistance Arcs Levels Visibility")),n=$("<input type='checkbox' class='visibility-switch'>"),o=this.addLabeledRow(this._table,$.t("Full Circles")),$("<td>").append(n).prependTo(o),this.bindControl(new l(n,this._linetool.properties().fullCircles,(!0),this.model(),"Change Fib Speed Resistance Arcs Full Cirlces Mode")),o=$("<tr>"),o.appendTo(this._table),s=$("<input type='checkbox' class='visibility-switch'>"),$("<td>").append(s).appendTo(o),$("<td>"+$.t("Background")+"</td>").appendTo(o),r=f(),$('<td colspan="3">').append(r).appendTo(o),this.bindControl(new l(s,this._linetool.properties().fillBackground,(!0),this.model(),"Change Fib Arcs Background Visibility")),this.bindControl(new c(r,this._linetool.properties().transparency,(!0),this.model(),"Change Fib Arcs Background Transparency")),this.loadData()},o.prototype.widget=function(){return this._table},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i),this.prepareLayout()}var n=i(294),s=i(295),r=s.SliderBinder,a=s.ColorBinding,l=i(50).createLineWidthEditor;inherit(o,n),o.prototype.prepareLayout=function(){var t,e,i,o,n;this._table=$(document.createElement("table")),this._table.addClass("property-page"),this._table.attr("cellspacing","0"),this._table.attr("cellpadding","2"),t=this.createColorPicker(),e=this.createColorPicker(),i=this.addLabeledRow(this._table,"Background"),$("<td>").append(t).appendTo(i),$("<td>").append(e).appendTo(i),o=l(),n=this.createColorPicker(),i=this.addLabeledRow(this._table,"Border"),$("<td>").append(n).appendTo(i),$("<td>").appendTo(i),$("<td>").append(o).appendTo(i),this.bindControl(new a(n,this._linetool.properties().trendline.color,(!0),this.model(),"Change Projection Line Color")),this.bindControl(new a(t,this._linetool.properties().color1,(!0),this.model(),"Change Projection Background Color",this._linetool.properties().transparency)),this.bindControl(new a(e,this._linetool.properties().color2,(!0),this.model(),"Change Projection Background Color",this._linetool.properties().transparency)),this.bindControl(new r(o,this._linetool.properties().linewidth,(!0),this.model(),"Change Projection Border Width")),this.loadData()},o.prototype.widget=function(){return this._table},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){s.call(this,t,e,i),this.prepareLayout()}var n=i(130).LineToolElliott,s=i(294),r=i(295),a=r.SimpleComboBinder,l=r.ColorBinding,h=r.SliderBinder,c=r.BooleanBinder,d=i(50).createLineWidthEditor;inherit(o,s),o.prototype.prepareLayout=function(){var t,e,i,o,s,r,p;this._table=$('<table class="property-page" cellspacing="0" cellpadding="2">'),t=n.degrees,e=this.createKeyCombo(t),e.width(300),i=this.createColorPicker(),o=$('<input type="checkbox" class="visibility-switch">'),s=$('<input type="checkbox" class="visibility-switch">'),r=this.addLabeledRow(this._table,"Degree"),$("<td>").prependTo(r),$("<td>").append(e).appendTo(r),r=this.addLabeledRow(this._table,"Line Width"),p=d(),$("<td>").prependTo(r),$("<td>").append(p).appendTo(r),r=this.addLabeledRow(this._table,"Color"),$("<td>").prependTo(r),$("<td>").append(i).appendTo(r),r=this.addLabeledRow(this._table,"Show Wave",s),$("<td>").append(s).prependTo(r),this.bindControl(new l(i,this._linetool.properties().color,(!0),this.model(),"Change Elliott Label Color")),this.bindControl(new a(e,this._linetool.properties().degree,parseInt,(!0),this.model(),"Change Elliott Wave Size")),this.bindControl(new c(s,this._linetool.properties().showWave,(!0),this.model(),"Change Elliott Labels Background")),this.bindControl(new h(p,this._linetool.properties().linewidth,parseInt,this.model(),"Change Elliott Wave Line Width")),this.loadData()},o.prototype.widget=function(){return this._table},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){r.call(this,t,e),this._study=i,this.prepareLayout()}var n=i(302),s=i(295),r=s.PropertyPage,a=s.BooleanBinder,l=s.SimpleComboBinder,h=i(303).StudyStylesPropertyPage;inherit(o,r),inherit(o,n),o.prototype.prepareLayout=function(){var t,e,i,o,n=$('<table class="property-page" cellspacing="0" cellpadding="2">'),s=$('<table class="property-page" cellspacing="0" cellpadding="2">'),r=$('<table class="property-page" cellspacing="0" cellpadding="2">'),c=$('<table class="property-page" cellspacing="0" cellpadding="2">'),d=$('<table class="property-page" cellspacing="0" cellpadding="2">'),p=this._study.properties();this._prepareSeriesStyleLayout(n,s,r,p),this._table=n.add(s).add(r).add(c).add(d),t=$('<input type="checkbox">'),e=this.addLabeledRow(c,"Price Line",t),$("<td>").append(t).prependTo(e),this.bindControl(new a(t,p.showPriceLine,(!0),this.model(),"Change Price Price Line")),i=this.createSeriesMinTickEditor(),o=$("<tr>"),o.appendTo(d),$("<td>"+$.t("Override Min Tick")+"</td>").appendTo(o),$("<td>").append(i).appendTo(o),this.bindControl(new l(i,p.minTick,null,(!0),this.model(),"Change MinTick")),h.prototype._putStudyDefaultStyles.call(this,d)},o.prototype.loadData=function(){this.superclass.prototype.loadData.call(this),this.switchStyle()},o.prototype.switchStyle=function(){$(this._barsTbody).add(this._barsColorerTbody).add(this._candlesTbody).add(this._candlesColorerTbody).add(this._hollowCandlesTbody).add(this._lineTbody).add(this._areaTbody).css("display","none");switch(this._study.properties().style.value()){case TradingView.Series.STYLE_BARS:this._barsTbody.css("display","table-row-group"),this._barsColorerTbody.css("display","table-row-group");break;case TradingView.Series.STYLE_CANDLES:this._candlesTbody.css("display","table-row-group"),this._candlesColorerTbody.css("display","table-row-group");break;case TradingView.Series.STYLE_HOLLOW_CANDLES:this._hollowCandlesTbody.css("display","table-row-group");break;case TradingView.Series.STYLE_LINE:this._lineTbody.css("display","table-row-group");break;case TradingView.Series.STYLE_AREA:this._areaTbody.css("display","table-row-group")}},o.prototype.widget=function(){return this._table},t.exports=o},function(t,e,i){(function(e){"use strict";function o(){}var n=i(295),s=n.PropertyPage,r=n.GreateTransformer,a=n.LessTransformer,l=n.ToIntTransformer,h=n.ToFloatTransformer,c=n.SimpleStringBinder,d=n.SimpleComboBinder,p=n.ColorBinding,u=n.BooleanBinder,_=n.SliderBinder,f=i(50),g=f.createLineWidthEditor,m=f.createPriceSourceEditor,v=i(75).NumericFormatter;inherit(o,s),o.prototype.getInputTitle=function(t,e){return e.inputInfo?e.inputInfo[t].name.value():t.toLowerCase().replace(/\b\w/g,function(t){return t.toUpperCase()})},o.prototype.prepareLayoutImpl=function(t,e,i,o){function n(e){u.refreshStateControls(p,t.inputs,i.inputs)}function s(t){return(new v).format(t)}var p,u,_,f,g,m,y,w,b,S,T,C,x,P,L,k,E;for(o=o||{},p={},u=this,_=0;_<t.inputs.length;_++){if(f=t.inputs[_],g=f.id,m=this.getInputTitle(g,i),y=$("<tr/>"),y.appendTo(e),w=$("<td/>"),w.appendTo(y),w.addClass("propertypage-name-label"),w.text($.t(m)),b=$("<td"+(o.valueColspan?' colspan = "'+o.valueColspan+'"':"")+"/>"),b.appendTo(y),S=null,f.options)for(S=$("<select/>"),T=0;T<f.options.length;T++)C=f.options[T],$("<option value='"+C+"'>"+$.t(C)+"</option>").appendTo(S);else S=$("<input/>"),"bool"===f.type?S.attr("type","checkbox"):S.attr("type","text");S.appendTo(b),S.css("width","100px"),x="Change "+m,f.options?this.bindControl(new d(S,i.inputs[g],null,(!0),this.model(),x)):"integer"===f.type?(P=[l(f.defval)],f.min&&P.push(r(f.min)),f.max&&P.push(a(f.max)),this.bindControl(new c(S,i.inputs[g],P,(!1),this.model(),x)),S.addClass("ticker")):"float"===f.type?(P=[h(f.defval)],f.min&&((("BarSetRenko@tv-prostudies"==t.id||"BarSetPnF@tv-prostudies"==t.id)&&"boxSize"==f.id||"BarSetKagi@tv-prostudies"==t.id&&"reversalAmount"==f.id)&&(k=this._model.model().mainSeries().symbolInfo(),L=k.minmov/k.pricescale),P.push(r(L?L:f.min))),f.max&&P.push(a(f.max)),E=new c(S,i.inputs[g],P,(!1),this.model(),x),E.addFormatter(s),this.bindControl(E),S.addClass("ticker")):"text"===f.type&&this.bindControl(new c(S,this._property.inputs[g],null,(!1),this.model(),x)),S.change(n),p[f.id]=y}this.refreshStateControls(p,t.inputs,i.inputs)},o.prototype.getMetaInfo=function(t){var e,i=this._model.m_model._studiesMetaData;for(e=0;e<i.length;e++)if(i[e].id===t)return i[e];return null},o.prototype._prepareSeriesStyleLayout=function(t,o,n,s){var r,a,l,h,c,f,v,y,w,b,S,T,C,x,P,L,k,E,I,A,V,M,D,B,O,R,z,N,F,H,W,U,q,j,Y,G,K,X,J,Z,Q,tt,et,it,ot,nt,st,rt,at,lt,ht,ct,dt,pt,ut,_t,ft,gt,mt,vt,yt,wt,bt,St,Tt,Ct,xt,Pt,Lt=i(301),kt=$("<tbody>").appendTo(t),Et=this._candlesColorerTbody=$("<tbody>").appendTo(o),It=this._barsColorerTbody=$("<tbody>").appendTo(o),At=this._haColorerTbody=$("<tbody>").appendTo(o),Vt=this._candlesTbody=$("<tbody>").appendTo(n),Mt=this._hollowCandlesTbody=$("<tbody>").appendTo(n),$t=this._haTbody=$("<tbody>").appendTo(n),Dt=this._barsTbody=$("<tbody>").appendTo(n),Bt=this._lineTbody=$("<tbody>").appendTo(n),Ot=this._areaTbody=$("<tbody>").appendTo(n),Rt=this._renkoTbody=$("<tbody>").appendTo(n),zt=this._pbTbody=$("<tbody>").appendTo(n),Nt=this._kagiTbody=$("<tbody>").appendTo(n),Ft=this._pnfTbody=$("<tbody>").appendTo(n),Ht=this.addLabeledRow(kt,"Style"),Wt=$(document.createElement("td")).appendTo(Ht);Wt.addClass("property-wide-select"),r=$(document.createElement("select")),$("<option value="+TradingView.Series.STYLE_BARS+">"+$.t("Bars")+"</option>").appendTo(r),$("<option value="+TradingView.Series.STYLE_CANDLES+">"+$.t("Candles")+"</option>").appendTo(r),$("<option value="+TradingView.Series.STYLE_HOLLOW_CANDLES+">"+$.t("Hollow Candles")+"</option>").appendTo(r),this instanceof Lt||$("<option value="+TradingView.Series.STYLE_HEIKEN_ASHI+">"+$.t("Heikin Ashi")+"</option>").appendTo(r),$("<option value="+TradingView.Series.STYLE_LINE+">"+$.t("Line")+"</option>").appendTo(r),$("<option value="+TradingView.Series.STYLE_AREA+">"+$.t("Area")+"</option>").appendTo(r),r.css("width","100px").appendTo(Wt),this.switchStyle(),a=function(t){this._undoModel.setChartStyleProperty(this._property,t,this._undoText)},this.bindControl(new d(r,s.style,parseInt,(!0),this.model(),"Change Series Style",a)),s.style.listeners().subscribe(this,this.switchStyle),l=this.createColorPicker(),h=this.createColorPicker(),c=this.createColorPicker(),f=this.createColorPicker(),v=this.createColorPicker(),y=this.createColorPicker(),w=$("<input type='checkbox' class='visibility-switch'/>").data("hides",$(v).add(y)),b=$("<input type='checkbox' class='visibility-switch'/>").data("hides",$(c)),S=$("<input type='checkbox'/>"),T=this.addLabeledRow(Et,"Color bars based on previous close",S),$("<td>").append(S).prependTo(T),T=this.addLabeledRow(Vt,"Candles"),$("<td>").prependTo(T),$("<td>").append(l).appendTo(T),$("<td>").append(h).appendTo(T),T=this.addLabeledRow(Vt,"Borders",w),$("<td>").append(w).prependTo(T),$("<td>").append(v).appendTo(T),$("<td>").append(y).appendTo(T),T=this.addLabeledRow(Vt,"Wick",b),$("<td>").append(b).prependTo(T),$("<td>").append(c).appendTo(T),$("<td>").append(f).appendTo(T),this.bindControl(new p(l,s.candleStyle.upColor,(!0),this.model(),"Change Candle Up Color")),this.bindControl(new p(h,s.candleStyle.downColor,(!0),this.model(),"Change Candle Down Color")),this.bindControl(new u(b,s.candleStyle.drawWick,(!0),this.model(),"Change Candle Wick Visibility")),this.bindControl(new p(c,s.candleStyle.wickUpColor,(!0),this.model(),"Change Candle Wick Up Color")),this.bindControl(new p(f,s.candleStyle.wickDownColor,(!0),this.model(),"Change Candle Wick Down Color")),this.bindControl(new u(w,s.candleStyle.drawBorder,(!0),this.model(),"Change Candle Border Visibility")),this.bindControl(new p(v,s.candleStyle.borderUpColor,(!0),this.model(),"Change Candle Up Border Color")),this.bindControl(new p(y,s.candleStyle.borderDownColor,(!0),this.model(),"Change Candle Down Border Color")),this.bindControl(new u(S,s.candleStyle.barColorsOnPrevClose,(!0),this.model(),"Change Color Bars Based On Previous Close")),C=this.createColorPicker(),x=this.createColorPicker(),P=this.createColorPicker(),L=this.createColorPicker(),k=this.createColorPicker(),E=this.createColorPicker(),I=$("<input type='checkbox' class='visibility-switch'/>").data("hides",$(k).add(E)),A=$("<input type='checkbox' class='visibility-switch'/>").data("hides",$(P)),T=this.addLabeledRow(Mt,"Candles"),$("<td>").prependTo(T),$("<td>").append(C).appendTo(T),$("<td>").append(x).appendTo(T),T=this.addLabeledRow(Mt,"Borders",I),$("<td>").append(I).prependTo(T),$("<td>").append(k).appendTo(T),$("<td>").append(E).appendTo(T),T=this.addLabeledRow(Mt,"Wick",A),$("<td>").append(A).prependTo(T),$("<td>").append(P).appendTo(T),$("<td>").append(L).appendTo(T),this.bindControl(new p(C,s.hollowCandleStyle.upColor,(!0),this.model(),"Change Hollow Candle Up Color")),this.bindControl(new p(x,s.hollowCandleStyle.downColor,(!0),this.model(),"Change Hollow Candle Down Color")),this.bindControl(new u(A,s.hollowCandleStyle.drawWick,(!0),this.model(),"Change Hollow Candle Wick Visibility")),this.bindControl(new p(P,s.hollowCandleStyle.wickUpColor,(!0),this.model(),"Change Hollow Candle Wick Up Color")),this.bindControl(new p(L,s.hollowCandleStyle.wickDownColor,(!0),this.model(),"Change Hollow Candle Down Wick Color")),this.bindControl(new u(I,s.hollowCandleStyle.drawBorder,(!0),this.model(),"Change Hollow Candle Border Visibility")),this.bindControl(new p(k,s.hollowCandleStyle.borderUpColor,(!0),this.model(),"Change Hollow Candle Up Border Color")),this.bindControl(new p(E,s.hollowCandleStyle.borderDownColor,(!0),this.model(),"Change Hollow Candle Down Border Color")),V=$("<input type='checkbox'/>"),T=this.addLabeledRow(It,"Color bars based on previous close",V),$("<td>").append(V).prependTo(T),M=$("<input type='checkbox'/>"),T=this.addLabeledRow(It,"HLC Bars",M),$("<td>").append(M).prependTo(T),D=this.addColorPickerRow(Dt,"Up Color"),B=this.addColorPickerRow(Dt,"Down Color"),this.bindControl(new p(D,s.barStyle.upColor,(!0),this.model(),"Change Bar Up Color")),this.bindControl(new p(B,s.barStyle.downColor,(!0),this.model(),"Change Bar Down Color")),this.bindControl(new u(V,s.barStyle.barColorsOnPrevClose,(!0),this.model(),"Change Color Bars Based On Previous Close")),this.bindControl(new u(M,s.barStyle.dontDrawOpen,(!0),this.model(),"Change HLC Bars")),O=m(),T=this.addLabeledRow(Bt,"Price Source"),$('<td colspan="3">').append(O).appendTo(T),R=this.addLabeledRow(Bt,"Type"),z=$('<td colspan="3">').appendTo(R),z.addClass("property-wide-select"),N=$(document.createElement("select")),$("<option value="+TradingView.Series.STYLE_LINE_TYPE_SIMPLE+">"+$.t("Simple")+"</option>").appendTo(N),$("<option value="+TradingView.Series.STYLE_LINE_TYPE_MARKERS+">"+$.t("With Markers")+"</option>").appendTo(N),$("<option value="+TradingView.Series.STYLE_LINE_TYPE_STEP+">"+$.t("Step")+"</option>").appendTo(N),N.appendTo(z),T=this.addLabeledRow(Bt,"Line"),F=this.createColorPicker(),H=g(),$("<td>").append(F).appendTo(T),$("<td>").append(H).appendTo(T),this.bindControl(new d(O,s.lineStyle.priceSource,null,(!0),this.model(),"Change Price Source")),this.bindControl(new d(N,s.lineStyle.styleType,parseInt,(!0),this.model(),"Change Line Type")),this.bindControl(new p(F,s.lineStyle.color,(!0),this.model(),"Change Line Color")),this.bindControl(new _(H,s.lineStyle.linewidth,(!0),this.model(),"Change Line Width")),s.haStyle&&(W=this.createColorPicker(),U=this.createColorPicker(),q=this.createColorPicker(),j=this.createColorPicker(),Y=this.createColorPicker(),G=this.createColorPicker(),K=$("<input type='checkbox' class='visibility-switch'/>").data("hides",$(Y).add(G)),X=$("<input type='checkbox' class='visibility-switch'/>").data("hides",$(q)),J=$("<input type='checkbox'/>"),T=this.addLabeledRow(At,$.t("Color bars based on previous close"),J),$("<td>").append(J).prependTo(T),T=this.addLabeledRow($t,$.t("Candles")),$("<td>").prependTo(T),$("<td>").append(W).appendTo(T),$("<td>").append(U).appendTo(T),T=this.addLabeledRow($t,$.t("Borders"),K),$("<td>").append(K).prependTo(T),$("<td>").append(Y).appendTo(T),$("<td>").append(G).appendTo(T),T=this.addLabeledRow($t,$.t("Wick"),X),$("<td>").append(X).prependTo(T),$("<td>").append(q).appendTo(T),$("<td>").append(j).appendTo(T),this.bindControl(new p(W,s.haStyle.upColor,(!0),this.model(),"Change Heikin Ashi Up Color")),this.bindControl(new p(U,s.haStyle.downColor,(!0),this.model(),"Change Heikin Ashi Down Color")),this.bindControl(new u(X,s.haStyle.drawWick,(!0),this.model(),"Change Heikin Ashi Wick Visibility")),this.bindControl(new p(q,s.haStyle.wickUpColor,(!0),this.model(),"Change Heikin Ashi Wick Up Color")),this.bindControl(new p(j,s.haStyle.wickDownColor,(!0),this.model(),"Change Heikin Ashi Wick Down Color")),this.bindControl(new u(K,s.haStyle.drawBorder,(!0),this.model(),"Change Heikin Ashi Border Visibility")),this.bindControl(new p(Y,s.haStyle.borderUpColor,(!0),this.model(),"Change Heikin Ashi Up Border Color")),this.bindControl(new p(G,s.haStyle.borderDownColor,(!0),this.model(),"Change Heikin Ashi Down Border Color")),this.bindControl(new u(J,s.haStyle.barColorsOnPrevClose,(!0),this.model(),"Change Color Bars Based On Previous Close"))),this instanceof Lt||e.enabled("charting_library_base")||($("<option value="+TradingView.Series.STYLE_RENKO+">"+$.t("Renko")+"</option>").appendTo(r),$("<option value="+TradingView.Series.STYLE_PB+">"+$.t("Line Break")+"</option>").appendTo(r),$("<option value="+TradingView.Series.STYLE_KAGI+">"+$.t("Kagi")+"</option>").appendTo(r),$("<option value="+TradingView.Series.STYLE_PNF+">"+$.t("Point & Figure")+"</option>").appendTo(r),Z=this.createColorPicker(),Q=this.createColorPicker(),T=this.addLabeledRow(Rt,"Up bars"),$('<td class="some-colorpicker">').append(Z).append(Q).appendTo(T),tt=this.createColorPicker(),et=this.createColorPicker(),T=this.addLabeledRow(Rt,"Down bars"),$('<td class="some-colorpicker">').append(tt).append(et).appendTo(T),it=this.createColorPicker(),ot=this.createColorPicker(),T=this.addLabeledRow(Rt,"Projection up bars"),$('<td class="some-colorpicker">').append(it).append(ot).appendTo(T),nt=this.createColorPicker(),st=this.createColorPicker(),T=this.addLabeledRow(Rt,"Projection down bars"),$('<td class="some-colorpicker">').append(nt).append(st).appendTo(T),this.prepareLayoutImpl(this.getMetaInfo("BarSetRenko@tv-prostudies"),Rt,s.renkoStyle),this.bindControl(new p(Z,s.renkoStyle.upColor,(!0),this.model(),"Change Bar Up Color")),this.bindControl(new p(tt,s.renkoStyle.downColor,(!0),this.model(),"Change Bar Down Color")),this.bindControl(new p(it,s.renkoStyle.upColorProjection,(!0),this.model(),"Change Projection Bar Up Color")),this.bindControl(new p(nt,s.renkoStyle.downColorProjection,(!0),this.model(),"Change Projection Bar Down Color")),this.bindControl(new p(Q,s.renkoStyle.borderUpColor,(!0),this.model(),"Change Border Bar Up Color")),this.bindControl(new p(et,s.renkoStyle.borderDownColor,(!0),this.model(),"Change Border Bar Down Color")),this.bindControl(new p(ot,s.renkoStyle.borderUpColorProjection,(!0),this.model(),"Change Projection Border Bar Up Color")),this.bindControl(new p(st,s.renkoStyle.borderDownColorProjection,(!0),this.model(),"Change Projection Border Bar Down Color")),rt=this.createColorPicker(),at=this.createColorPicker(),T=this.addLabeledRow(zt,"Up bars"),$('<td class="some-colorpicker">').append(rt).append(at).appendTo(T),lt=this.createColorPicker(),ht=this.createColorPicker(),T=this.addLabeledRow(zt,"Down bars"),$('<td class="some-colorpicker">').append(lt).append(ht).appendTo(T),ct=this.createColorPicker(),dt=this.createColorPicker(),T=this.addLabeledRow(zt,"Projection up bars"),$('<td class="some-colorpicker">').append(ct).append(dt).appendTo(T),pt=this.createColorPicker(),ut=this.createColorPicker(),T=this.addLabeledRow(zt,"Projection down bars"),$('<td class="some-colorpicker">').append(pt).append(ut).appendTo(T),this.prepareLayoutImpl(this.getMetaInfo("BarSetPriceBreak@tv-prostudies"),zt,s.pbStyle,{valueColspan:2}),this.bindControl(new p(rt,s.pbStyle.upColor,(!0),this.model(),"Change Bar Up Color")),this.bindControl(new p(lt,s.pbStyle.downColor,(!0),this.model(),"Change Bar Down Color")),this.bindControl(new p(ct,s.pbStyle.upColorProjection,(!0),this.model(),"Change Projection Bar Up Color")),this.bindControl(new p(pt,s.pbStyle.downColorProjection,(!0),this.model(),"Change Projection Bar Down Color")),this.bindControl(new p(at,s.pbStyle.borderUpColor,(!0),this.model(),"Change Border Bar Up Color")),this.bindControl(new p(ht,s.pbStyle.borderDownColor,(!0),this.model(),"Change Border Bar Down Color")),this.bindControl(new p(dt,s.pbStyle.borderUpColorProjection,(!0),this.model(),"Change Projection Border Bar Up Color")),this.bindControl(new p(ut,s.pbStyle.borderDownColorProjection,(!0),this.model(),"Change Projection Border Bar Down Color")),_t=this.addColorPickerRow(Nt,"Up bars"),ft=this.addColorPickerRow(Nt,"Down bars"),gt=this.addColorPickerRow(Nt,"Projection up bars"),mt=this.addColorPickerRow(Nt,"Projection down bars"),this.prepareLayoutImpl(this.getMetaInfo("BarSetKagi@tv-prostudies"),Nt,s.kagiStyle),this.bindControl(new p(_t,s.kagiStyle.upColor,(!0),this.model(),"Change Bar Up Color")),this.bindControl(new p(ft,s.kagiStyle.downColor,(!0),this.model(),"Change Bar Down Color")),this.bindControl(new p(gt,s.kagiStyle.upColorProjection,(!0),this.model(),"Change Projection Bar Up Color")),this.bindControl(new p(mt,s.kagiStyle.downColorProjection,(!0),this.model(),"Change Projection Bar Down Color")),vt=this.addColorPickerRow(Ft,"Up bars"),yt=this.addColorPickerRow(Ft,"Down bars"),wt=this.addColorPickerRow(Ft,"Projection up bars"),bt=this.addColorPickerRow(Ft,"Projection down bars"),this.prepareLayoutImpl(this.getMetaInfo("BarSetPnF@tv-prostudies"),Ft,s.pnfStyle),this.bindControl(new p(vt,s.pnfStyle.upColor,(!0),this.model(),"Change Bar Up Color")),this.bindControl(new p(yt,s.pnfStyle.downColor,(!0),this.model(),"Change Bar Down Color")),this.bindControl(new p(wt,s.pnfStyle.upColorProjection,(!0),this.model(),"Change Projection Bar Up Color")),this.bindControl(new p(bt,s.pnfStyle.downColorProjection,(!0),this.model(),"Change Projection Bar Down Color"))),St=m(),T=this.addLabeledRow(Ot,"Price Source"),$('<td colspan="3">').appendTo(T).append(St),Tt=this.createColorPicker(),Ct=g(),T=this.addLabeledRow(Ot,"Line"),$("<td>").appendTo(T).append(Tt),$('<td colspan="2">').appendTo(T).append(Ct),xt=this.createColorPicker(),Pt=this.createColorPicker(),T=this.addLabeledRow(Ot,"Fill"),$("<td>").appendTo(T).append(xt),$("<td>").appendTo(T).append(Pt),this.bindControl(new d(St,s.areaStyle.priceSource,null,(!0),this.model(),"Change Price Source")),this.bindControl(new p(Tt,s.areaStyle.linecolor,(!0),this.model(),"Change Line Color")),this.bindControl(new _(Ct,s.areaStyle.linewidth,(!0),this.model(),"Change Line Width")),this.bindControl(new p(xt,s.areaStyle.color1,(!0),this.model(),"Change Line Color",s.areaStyle.transparency)),this.bindControl(new p(Pt,s.areaStyle.color2,(!0),this.model(),"Change Line Color",s.areaStyle.transparency))},t.exports=o}).call(e,i(1))},function(t,e,i){"use strict";function o(t,e,i,o){a.call(this,t,e),this._study=i,this._showOnlyConfirmInputs=o,this.prepareLayout()}function n(t,e,i){a.call(this,t,e),this._study=i,this.prepareLayout()}function s(t,e,i){a.call(this,t,e),this._study=i,this._property=t,this.prepareLayout()}var r=i(295),a=r.PropertyPage,l=r.UppercaseTransformer,h=r.GreateTransformer,c=r.LessTransformer,d=r.ToIntTransformer,p=r.ToFloatTransformer,u=(r.ToAsciiTransformer,r.ReplaceEmptyTransformer,r.SimpleComboBinder),_=r.BooleanBinder,f=r.SymbolBinder,g=r.DisabledBinder,m=r.BarTimeBinder,v=r.ColorBinding,y=r.SliderBinder,w=r.SessionBinder,b=r.SimpleStringBinder,S=i(41),T=i(50),C=T.addColorPicker,x=T.createLineStyleEditor,P=T.createShapeLocationEditor,L=T.createShapeStyleEditor,k=T.createLineWidthEditor,E=T.createVisibilityEditor,I=T.createTextEditor,A=(T.createTextPosEditor,T.createHHistDirectionEditor),V=T.createPlotEditor,M=i(75).NumericFormatter,D=i(107),B=i(54).StudyConsts;inherit(o,a),o.prototype._addSessionEditor=function(t,e,i,o){var n,s,r,a,l,h;return"session"!==i.type?void TradingView.logError("Session editor adding FAILED: wrong input type."):(n=function(t,e){var i,o=$("<td/>");o.appendTo(t),o.css("padding-left","0px"),o.css("padding-right","0px"),i=$("<input>"),i.attr("type","text"),i.addClass("ticker"),i.css("width","40px"),i.attr("id",e),i.appendTo(o)},s=function(t,e,i){var o,n=$("<td/>");n.css("padding-left",i),n.css("padding-right",i),n.appendTo(t),o=$("<div/>"),o.appendTo(n),o.append(e),o.css("font-size","150%")},r=$("<table/>"),r.appendTo(t),a=$("<tr/>"),a.appendTo(r),l=["start_hours","start_minutes","end_hours","end_minutes"],n.call(this,a,l[0]),s.call(this,a,":",0),n.call(this,a,l[1]),s.call(this,a,"-",4),n.call(this,a,l[2]),s.call(this,a,":",0),n.call(this,a,l[3]),h=!1,void this.bindControl(new w(a,l,e,h,this.model(),o)))},o.prototype.prepareLayoutImpl=function(t,e){function i(t){return(new M).format(t)}var o,n,s,r,a,g,v,y,w,T,C,x,P,L;for(o=0;o<t.inputs.length;o++)if(n=t.inputs[o],s=n.id,"first_visible_bar_time"!=s&&"last_visible_bar_time"!=s&&"time"!=n.type&&!n.isHidden&&(!this._showOnlyConfirmInputs||n.confirm)&&void 0===n.groupId){if(r=n.name||s.toLowerCase().replace(/\b\w/g,function(t){return t.toUpperCase()}),a="Change "+r,g=$("<tr/>"),g.appendTo(e),v=$("<td/>"),v.appendTo(g),v.addClass($.t("propertypage-name-label",{context:"css_class"})),v.text($.t(r,{context:"input"})),y=$("<td/>"),y.appendTo(g),w=null,"resolution"===n.type)w=$('<select><option value="1">1</option><option value="3">3</option><option value="5">5</option><option value="15">15</option><option value="30">30</option><option value="45">45</option><option value="60">1'+$.t("h")+'</option><option value="120">2'+$.t("h")+'</option><option value="180">3'+$.t("h")+'</option><option value="D">1'+$.t("d")+'</option><option value="W">1'+$.t("w")+"</option></select>");else if("symbol"===n.type)w=$('<input class="symbol-edit single">'),S.bindToInput(w);else if("session"===n.type)this._addSessionEditor(y,this._property.inputs[s],n,a);else if(n.options)for(w=$("<select/>"),T=0;T<n.options.length;T++)C=n.options[T],$("<option value='"+C+"'>"+C+"</option>").appendTo(w);else w=$("<input/>"),"bool"===n.type?w.attr("type","checkbox"):w.attr("type","text");w&&(w.appendTo(y),w.is(":checkbox")||w.css("width","100px")),n.options?this.bindControl(new u(w,this._property.inputs[s],null,(!0),this.model(),a)):"bar_time"===n.type?(x=10,this.bindControl(new m(w,this._property.inputs[s],(!0),this.model(),a,this.model().mainSeries(),x)),w.addClass("ticker")):"integer"===n.type?(P=[d(n.defval)],(0===n.min||n.min)&&P.push(h(n.min)),(0===n.max||n.max)&&P.push(c(n.max)),this.bindControl(new b(w,this._property.inputs[s],P,(!1),this.model(),a)),w.addClass("ticker"),isFinite(n.step)&&n.step>0&&w.attr("data-step",n.step)):"float"===n.type?(P=[p(n.defval)],(0===n.min||n.min)&&P.push(h(n.min)),(0===n.max||n.max)&&P.push(c(n.max)),L=new b(w,this._property.inputs[s],P,(!1),this.model(),a),L.addFormatter(i),this.bindControl(L),w.addClass("ticker"),
isFinite(n.step)&&n.step>0&&w.attr("data-step",n.step)):"text"===n.type?this.bindControl(new b(w,this._property.inputs[s],null,(!1),this.model(),a)):"bool"===n.type?this.bindControl(new _(w,this._property.inputs[s],(!0),this.model(),a)):"resolution"===n.type?this.bindControl(new u(w,this._property.inputs[s],l,(!0),this.model(),"Change Interval")):"symbol"===n.type&&this.bindControl(new f(w,this._property.inputs[s],(!0),this.model(),"Change Symbol"))}this._property.offset&&(r=this._property.offset.title?this._property.offset.title.value():$.t("Offset"),w=this.addOffsetEditorRow(e,r),P=[d(this._property.offset.val)],P.push(h(this._property.offset.min)),P.push(c(this._property.offset.max)),this.bindControl(new b(w,this._property.offset.val,P,(!1),this.model(),"Undo "+r))),this._property.offsets&&$.each(t.plots,function(t,i){var o,n,s,r;this._property.offsets[i.id]&&(o=this._property.offsets[i.id],void 0!==o.isHidden&&o.isHidden.value()||(n=o.title.value(),s=this.addOffsetEditorRow(e,n),r=[d(o.val)],r.push(h(o.min)),r.push(c(o.max)),this.bindControl(new b(s,o.val,r,(!1),this.model(),"Undo "+n))))}.bind(this))},o.prototype.prepareLayout=function(){var t;this._table=$("<table/>"),this._table.addClass("property-page"),this._table.attr("cellspacing","0"),this._table.attr("cellpadding","2"),t=this._study.metaInfo(),this.prepareLayoutImpl(t,this._table),this.loadData()},o.prototype.widget=function(){return this._table},inherit(n,a),n.prototype.prepareLayout=function(){function t(t){return(new M).format(t)}var e,i,o,s,r,a,l,h,c,d,f,g,m,w,S,T,P,L,E,I,A,V,B,O,R,z,N,F,H,W,U,q,j;for(this._table=$("<table/>"),this._table.addClass("property-page"),this._table.attr("cellspacing","0"),this._table.attr("cellpadding","2"),e=this._study.metaInfo(),i={},o=0;o<e.plots.length;++o)if(!(this._study.isSelfColorerPlot(o)||this._study.isTextColorerPlot(o)||this._study.isDataOffsetPlot(o)||this._study.isOHLCColorerPlot(o))){if(a=e.plots[o],e.styles){if(e.styles[a.id])s=e.styles[a.id].isHidden;else{if(!this._study.isOHLCSeriesPlot(o))continue;if(r=e.plots[o].target,i[r])continue;s=e.ohlcPlots[r].isHidden,i[r]=r}if(s)continue}this._study.isLinePlot(o)||this._study.isBarColorerPlot(o)||this._study.isBgColorerPlot(o)?this._prepareLayoutForPlot(o,a):this._study.isPlotArrowsPlot(o)?this._prepareLayoutForArrowsPlot(o,a):this._study.isPlotCharsPlot(o)?this._prepareLayoutForCharsPlot(o,a):this._study.isPlotShapesPlot(o)?this._prepareLayoutForShapesPlot(o,a):this._study.isOHLCSeriesPlot(o)?(l={id:r,type:"ohlc"},this._study.isOHLCBarsPlot(o)?this._prepareLayoutForBarsPlot(o,l):this._study.isOHLCCandlesPlot(o)&&this._prepareLayoutForCandlesPlot(o,l)):TradingView.logError("Unknown plot type: "+a.type)}if(h=this._study.properties().bands,h&&h.childCount()>0)for(o=0;o<h.childCount();o++)c=h[o],c.isHidden&&c.isHidden.value()||(d=$('<tr class="line"/>'),d.appendTo(this._table),f=$("<td/>"),f.appendTo(d),g=$("<input type='checkbox' class='visibility-switch'/>"),g.appendTo(f),m=c.name.value(),w=this.createLabeledCell(m,g).appendTo(d).addClass($.t("propertypage-name-label",{context:"css_class"})),S=$("<td/>"),S.appendTo(d),S.addClass("colorpicker-cell"),T=C(S),P=$("<td/>"),P.appendTo(d),L=k(),L.appendTo(P),E=$('<td colspan="4">').css({whiteSpace:"nowrap"}),E.appendTo(d),I=x(),I.render().appendTo(E),A=$("<input class='property-page-bandwidth' type='text'/>"),A.appendTo(E),V=[p(c.value.value())],B="Change band",O=new b(A,c.value,V,(!1),this.model(),B),O.addFormatter(t),this.bindControl(O),this.bindControl(new _(g,c.visible,(!0),this.model(),B)),this.bindControl(new v(T,c.color,(!0),this.model(),B)),this.bindControl(new u(I,c.linestyle,parseInt,(!0),this.model(),B)),this.bindControl(new y(L,c.linewidth,(!0),this.model(),B)));if(this._study.properties().bandsBackground&&(c=this._study.properties().bandsBackground,R=$.t("Background"),B=$.t("Change band background"),d=this._prepareFilledAreaBackground(c.fillBackground,c.backgroundColor,c.transparency,R,B),d.appendTo(this._table)),this._study.properties().areaBackground&&(c=this._study.properties().areaBackground,R=$.t("Background"),B=$.t("Change area background"),d=this._prepareFilledAreaBackground(c.fillBackground,c.backgroundColor,c.transparency,R,B),d.appendTo(this._table)),z=e.filledAreas,void 0!==z)for(o=0;o<z.length;++o)N=z[o],N.isHidden||(c=this._study.properties().filledAreasStyle[N.id],R=N.title||$.t("Background"),B="Change "+R,d=this._prepareFilledAreaBackground(c.visible,c.color,c.transparency,R,B),d.appendTo(this._table));for(F in e.graphics){H=e.graphics[F];for(W in H)c=this._property.graphics[F][W],n["_createRow_"+F].call(this,this._table,c)}U=this._table.find(".visibility-switch.plot-visibility-switch"),1==U.length&&(f=U.parent(),f.css("display","none"),w=this._table.find(".propertypage-plot-with-palette"),1==w.length?w.css("display","none"):(w=this._table.find(".propertypage-name-label"),w.css("padding-left",0),w.find("label").attr("for",""))),q=this._prepareStudyPropertiesLayout(),this._table=this._table.add(q),D.isScriptStrategy(e)&&(j=this._prepareOrdersSwitches(),this._table=this._table.add(j)),this.loadData()},n.prototype._prepareOrdersSwitches=function(){var t=$('<table class="property-page study-strategy-properties" cellspacing="0" cellpadding="2">'),e="chart-orders-switch_"+Date.now().toString(36),i=$("<tr>").appendTo(t),o=$('<input id="'+e+'" type="checkbox">').appendTo($("<td>").appendTo(i)),n=($('<label for="'+e+'">'+$.t("Trades on Chart")+"</label>").appendTo($("<td>").appendTo(i)),"chart-orders-labels-switch_"+Date.now().toString(36)),s=$("<tr>").appendTo(t),r=$('<input id="'+n+'" type="checkbox">').appendTo($("<td>").appendTo(s)),a=($('<label for="'+n+'">'+$.t("Signal Labels")+"</label>").appendTo($("<td>").appendTo(s)),"chart-orders-qty-switch_"+Date.now().toString(36)),l=$("<tr>").appendTo(t),h=$('<input id="'+a+'" type="checkbox">').appendTo($("<td>").appendTo(l)),c=($('<label for="'+a+'">'+$.t("Quantity")+"</label>").appendTo($("<td>").appendTo(l)),this._study.properties());return this.bindControl(new _(o,c.strategy.orders.visible,(!0),this.model(),"Trades on chart visibility")),this.bindControl(new _(r,c.strategy.orders.showLabels,(!0),this.model(),"Signal labels visibility")),this.bindControl(new g(r,c.strategy.orders.visible,(!0),this.model(),"Signal labels visibility",(!0))),this.bindControl(new _(h,c.strategy.orders.showQty,(!0),this.model(),"Quantity visibility")),this.bindControl(new g(h,c.strategy.orders.visible,(!0),this.model(),"Quantity visibility",(!0))),t},n.prototype._prepareLayoutForPlot=function(t,e){var i,o,n,s,r,a,l,h,c,d,p,f,g,m=e.id,w=this._study.properties().styles[m],b=this._findPlotPalette(t,e),S=b.palette,T=b.paletteProps,x="Change "+m;S?(i=$('<tr class="line"/>'),i.appendTo(this._table),o=$("<td/>"),o.appendTo(i),o.addClass("visibility-cell"),n=$("<input type='checkbox' class='visibility-switch plot-visibility-switch'/>"),n.appendTo(o),this.bindControl(new _(n,w.visible,(!0),this.model(),x)),s=w.title.value(),this.createLabeledCell(s,n).appendTo(i).addClass("propertypage-name-label propertypage-plot-with-palette",{context:"css_class"}),this._prepareLayoutForPalette(t,e,S,T,x)):(i=$('<tr class="line"/>'),i.appendTo(this._table),o=$("<td/>"),o.appendTo(i),o.addClass("visibility-cell"),n=$("<input type='checkbox' class='visibility-switch plot-visibility-switch'/>"),n.appendTo(o),s=this._study.properties().styles[m].title.value(),r=this.createLabeledCell(s,n).appendTo(i).addClass($.t("propertypage-name-label",{context:"css_class"})),a=$("<td/>"),a.appendTo(i),a.addClass("colorpicker-cell"),l=C(a),h=$("<td/>"),h.appendTo(i),c=k(),c.appendTo(h),d=$("<td>"),d.appendTo(i),p=V(),p.appendTo(d),f=$("<td>"),f.appendTo(i),g=$("<input type='checkbox'>"),g.appendTo(f),this.createLabeledCell("Price Line",g).appendTo(i),this.bindControl(new _(n,w.visible,(!0),this.model(),x)),this.bindControl(new v(l,w.color,(!0),this.model(),x,w.transparency)),this.bindControl(new y(c,w.linewidth,(!0),this.model(),x,this._study.metaInfo().isTVScript)),this.bindControl(new u(p,w.plottype,parseInt,(!0),this.model(),x)),this.bindControl(new _(g,w.trackPrice,(!0),this.model(),"Change Price Line")))},n.prototype._prepareLayoutForBarsPlot=function(t,e){var i,o,n,s,r,a,l,h=e.id,c=this._study.properties().ohlcPlots[h],d=this._findPlotPalette(t,e),p=d.palette,u=d.paletteProps,f="Change "+h,g=$('<tr class="line"/>');g.appendTo(this._table),i=$("<td/>"),i.appendTo(g),i.addClass("visibility-cell"),o=$("<input type='checkbox' class='visibility-switch'/>"),o.appendTo(i),this.bindControl(new _(o,c.visible,(!0),this.model(),f)),n=c.title.value(),s=this.createLabeledCell(n,o).appendTo(g).addClass("propertypage-name-label",{context:"css_class"}),p?(r=!0,this._prepareLayoutForPalette(t,e,p,u,f,r)):(a=$("<td/>"),a.appendTo(g),a.addClass("colorpicker-cell"),l=C(a),this.bindControl(new v(l,c.color,(!0),this.model(),f)))},n.prototype._prepareLayoutForCandlesPlot=function(t,e){var i,o,n,s,r,a,l,h,c,d;this._prepareLayoutForBarsPlot(t,e),i=e.id,o=this._study.properties().ohlcPlots[i],n="Change "+i,s=$('<tr class="line"/>'),s.appendTo(this._table),r=$("<td/>"),r.appendTo(s),r.addClass("visibility-cell"),a=$("<input type='checkbox' class='visibility-switch'/>"),a.appendTo(r),this.bindControl(new _(a,o.drawWick,(!0),this.model(),n)),l="Wick",h=this.createLabeledCell(l,a).appendTo(s),c=$("<td/>"),c.appendTo(s),c.addClass("colorpicker-cell"),d=C(c),this.bindControl(new v(d,o.wickColor,(!0),this.model(),n))},n.prototype._prepareLayoutForShapesPlot=function(t,e){var i,o,n,s,r,a,l,h,c,d,p=e.id,f=this._study.properties().styles[p],g=this._findPlotPalette(t,e),m=g.palette,y=g.paletteProps,w="Change "+p,b=$('<tr class="line"/>');b.appendTo(this._table),i=$("<td/>"),i.appendTo(b),i.addClass("visibility-cell"),o=$("<input type='checkbox' class='visibility-switch'/>"),o.appendTo(i),this.bindControl(new _(o,f.visible,(!0),this.model(),w)),n=this._study.properties().styles[p].title.value(),s=this.createLabeledCell(n,o).appendTo(b).addClass("propertypage-name-label",{context:"css_class"}),r=$("<td/>"),r.appendTo(b),a=L(),a.appendTo(r),this.bindControl(new u(a,f.plottype,null,(!0),this.model(),w)),l=$("<td/>"),l.appendTo(b),h=P(),h.appendTo(l),this.bindControl(new u(h,f.location,null,(!0),this.model(),w)),m?this._prepareLayoutForPalette(t,e,m,y,w):(b=$('<tr class="line"/>'),b.appendTo(this._table),$("<td/>").appendTo(b),$("<td/>").appendTo(b),c=$("<td/>"),c.appendTo(b),c.addClass("colorpicker-cell"),d=C(c),this.bindControl(new v(d,f.color,(!0),this.model(),w,f.transparency)))},n.prototype._prepareLayoutForCharsPlot=function(t,e){var i,o,n,s,r,a,l,h,c,d,p=e.id,f=this._study.properties().styles[p],g=this._findPlotPalette(t,e),m=g.palette,y=g.paletteProps,w="Change "+p,S=$('<tr class="line"/>');S.appendTo(this._table),i=$("<td/>"),i.appendTo(S),i.addClass("visibility-cell"),o=$("<input type='checkbox' class='visibility-switch'/>"),o.appendTo(i),this.bindControl(new _(o,f.visible,(!0),this.model(),w)),n=this._study.properties().styles[p].title.value(),s=this.createLabeledCell(n,o).appendTo(S).addClass($.t("propertypage-name-label",{context:"css_class"})),r=$("<td/>"),r.appendTo(S),a=I(),a.appendTo(r),a.keyup(function(){var t=$(this),e=t.val();e&&(t.val(e.split("")[e.length-1]),t.change())}),this.bindControl(new b(a,f["char"],null,(!1),this.model(),w)),l=$("<td/>"),l.appendTo(S),h=P(),h.appendTo(l),this.bindControl(new u(h,f.location,null,(!0),this.model(),w)),m?this._prepareLayoutForPalette(t,e,m,y,w):(S=$('<tr class="line"/>'),S.appendTo(this._table),$("<td/>").appendTo(S),$("<td/>").appendTo(S),c=$("<td/>"),c.appendTo(S),c.addClass("colorpicker-cell"),d=C(c),this.bindControl(new v(d,f.color,(!0),this.model(),w,f.transparency)))},n.prototype._isStyleNeedsConnectPoints=function(t){return[B.PLOT_CROSS,B.PLOT_CIRCLES].indexOf(t)>=0},n.prototype._prepareLayoutForPalette=function(t,e,i,o,n,s){var r,a,l,h,c,d,p,f,g,m,w,b,S,T,x,P=t,L=e.id,E=null;E=s?this._study.properties().ohlcPlots[L]:this._study.properties().styles[L],r=0;for(a in i.colors)l=o.colors[a],h=$('<tr class="line"/>'),h.appendTo(this._table),$("<td/>").appendTo(h),c=$("<td/>"),c.appendTo(h),c.addClass($.t("propertypage-name-label",{context:"css_class"})),c.html($.t(l.name.value())),d=$("<td/>"),d.appendTo(h),d.addClass("colorpicker-cell"),p=C(d),this.bindControl(new v(p,l.color,(!0),this.model(),n,E.transparency)),this._study.isLinePlot(P)&&(f=$("<td/>"),f.appendTo(h),g=k(),g.appendTo(f),this.bindControl(new y(g,l.width,(!0),this.model(),n)),m=$("<td>"),m.appendTo(h),0===r&&(w=V(),w.appendTo(m),this.bindControl(new u(w,E.plottype,parseInt,(!0),this.model(),n)),b=$("<input type='checkbox'>"),S=$('<td colspan="4">').css({whiteSpace:"nowrap"}),T=$("<span>").html($.t("Price Line")),x=$("<span>"),x.append(b),S.append(x).append(T).appendTo(h),this.bindControl(new _(b,E.trackPrice,(!0),this.model(),"Change Price Line")))),r++},n.prototype._prepareLayoutForArrowsPlot=function(t,e){var i,o,n,s,r,a,l,h,c=e.id,d=this._study.properties().styles[c],p="Change "+c,u=$('<tr class="line"/>');u.appendTo(this._table),i=$("<td/>"),i.appendTo(u),i.addClass("visibility-cell"),o=$("<input type='checkbox' class='visibility-switch'/>"),o.appendTo(i),n=this._study.properties().styles[c].title.value(),s=this.createLabeledCell(n,o).appendTo(u).addClass($.t("propertypage-name-label",{context:"css_class"})),r=$("<td/>"),r.appendTo(u),r.addClass("colorpicker-cell"),a=C(r),l=$("<td/>"),l.appendTo(u),l.addClass("colorpicker-cell"),h=C(l),this.bindControl(new _(o,d.visible,(!0),this.model(),p)),this.bindControl(new v(a,d.colorup,(!0),this.model(),p,d.transparency)),this.bindControl(new v(h,d.colordown,(!0),this.model(),p,d.transparency))},n.prototype._findPlotPalette=function(t,e){var i,o=t,n=e.id,s=null,r=null,a=this._study.metaInfo().plots;if(this._study.isBarColorerPlot(o)||this._study.isBgColorerPlot(o))s=this._study.metaInfo().palettes[e.palette],r=this._study.properties().palettes[e.palette];else for(i=0;i<a.length;i++)if(a[i].target===n&&(this._study.isSelfColorerPlot(i)||this._study.isOHLCColorerPlot(i))){s=this._study.metaInfo().palettes[a[i].palette],r=this._study.properties().palettes[a[i].palette];break}return{palette:s,paletteProps:r}},n.prototype._prepareStudyPropertiesLayout=function(){var t,e,i=$('<table class="property-page study-properties" cellspacing="0" cellpadding="2">');return this._study.metaInfo().is_price_study||(t=this.createPrecisionEditor(),e=$("<tr>"),e.appendTo(i),$("<td>"+$.t("Precision")+"</td>").appendTo(e),$("<td>").append(t).appendTo(e),this.bindControl(new u(t,this._study.properties().precision,null,(!0),this.model(),"Change Precision"))),"Compare@tv-basicstudies"==this._study.metaInfo().id&&(t=this.createSeriesMinTickEditor(),e=$("<tr>"),e.appendTo(i),$("<td>"+$.t("Override Min Tick")+"</td>").appendTo(e),$("<td>").append(t).appendTo(e),this.bindControl(new u(t,this._study.properties().minTick,null,(!0),this.model(),"Change MinTick"))),this._putStudyDefaultStyles(i),i},n.prototype._putStudyDefaultStyles=function(t,e){var i,o,n,s,r,a=null,l=this._study;return(!l.properties().linkedToSeries||!l.properties().linkedToSeries.value())&&($.each(this._model.m_model.panes(),function(t,e){$.each(e.dataSources(),function(t,i){if(i==l)return a=e,!1})}),this._pane=a,this._pane&&(this._pane.leftPriceScale().dataSources().indexOf(this._study)!==-1?i="left":this._pane.rightPriceScale().dataSources().indexOf(this._study)!==-1?i="right":this._pane.isOverlay(this._study)&&(i="none")),i&&(o=this,n=this.createKeyCombo({left:$.t("Scale Left"),right:$.t("Scale Right"),none:$.t("Screen (No Scale)")}).val(i).change(function(){switch(this.value){case"left":o._model.move(o._study,o._pane,o._pane.leftPriceScale());break;case"right":o._model.move(o._study,o._pane,o._pane.rightPriceScale());break;case"none":o._model.move(o._study,o._pane,null)}}),s=this.addRow(t),$("<td>"+$.t("Scale")+"</td>").appendTo(s),r=$("<td>").appendTo(s).append(n),e&&e>2&&r.attr("colspan",e-1)),t)},n.prototype.widget=function(){return this._table},n.prototype._prepareFilledAreaBackground=function(t,e,i,o,n){var s,r,a,l,h=$('<tr class="line"/>'),c=$("<td/>");return c.appendTo(h),s=$("<input type='checkbox' class='visibility-switch'/>"),s.appendTo(c),r=this.createLabeledCell(o,s).appendTo(h).addClass($.t("propertypage-name-label",{context:"css_class"})),a=$("<td/>"),a.appendTo(h),a.addClass("colorpicker-cell"),l=C(a),this.bindControl(new _(s,t,(!0),this.model(),n+" visibility")),this.bindControl(new v(l,e,(!0),this.model(),n+" color",i)),h},inherit(s,a),s.prototype.prepareLayout=function(){return this._study.properties().linkedToSeries&&this._study.properties().linkedToSeries.value()?void(this._table=$()):void(this._table=$())},s.prototype.widget=function(){return this._table},n._createRow_horizlines=function(t,e){var i=this.addRow(t),o=e.name.value(),n=$("<input type='checkbox' class='visibility-switch'/>"),s=this.createColorPicker(),r=k(),a=x();$("<td>").append(n).appendTo(i),this.createLabeledCell(o,n).appendTo(i),$("<td>").append(s).appendTo(i),$("<td>").append(r).appendTo(i),$("<td>").append(a.render()).appendTo(i),this.bindControl(new _(n,e.visible,(!0),this.model(),"Change "+o+" visibility")),this.bindControl(new v(s,e.color,(!0),this.model(),"Change "+o+" color")),this.bindControl(new u(a,e.style,parseInt,(!0),this.model(),"Change "+o+" style")),this.bindControl(new y(r,e.width,(!0),this.model(),"Change "+o+" width"))},n._createRow_vertlines=function(t,e){var i=this.addRow(t),o=e.name.value(),n=$("<input type='checkbox' class='visibility-switch'/>"),s=this.createColorPicker(),r=k(),a=x();$("<td>").append(n).appendTo(i),this.createLabeledCell(o,n).appendTo(i),$("<td>").append(s).appendTo(i),$("<td>").append(r).appendTo(i),$("<td>").append(a.render()).appendTo(i),this.bindControl(new _(n,e.visible,(!0),this.model(),"Change "+o+" visibility")),this.bindControl(new v(s,e.color,(!0),this.model(),"Change "+o+" color")),this.bindControl(new u(a,e.style,parseInt,(!0),this.model(),"Change "+o+" style")),this.bindControl(new y(r,e.width,(!0),this.model(),"Change "+o+" width"))},n._createRow_lines=function(t,e){var i=this.addRow(t),o=e.title.value(),n=$("<input type='checkbox' class='visibility-switch'/>"),s=this.createColorPicker(),r=k(),a=x();$("<td>").append(n).appendTo(i),this.createLabeledCell(o,n).appendTo(i),$("<td>").append(s).appendTo(i),$("<td>").append(r).appendTo(i),$("<td>").append(a.render()).appendTo(i),this.bindControl(new _(n,e.visible,(!0),this.model(),"Change "+o+" visibility")),this.bindControl(new v(s,e.color,(!0),this.model(),"Change "+o+" color")),this.bindControl(new u(a,e.style,parseInt,(!0),this.model(),"Change "+o+" style")),this.bindControl(new y(r,e.width,(!0),this.model(),"Change "+o+" width"))},n._createRow_hlines=function(t,e){var i,o,n,s=this.addRow(t),r=e.name.value(),a=$("<input type='checkbox' class='visibility-switch'/>"),l=this.createColorPicker(),h=k(),c=x(),d=$("<input type='checkbox'>");$("<td>").append(a).appendTo(s),this.createLabeledCell(r,a).appendTo(s),$("<td>").append(l).appendTo(s),$("<td>").append(h).appendTo(s),$("<td>").append(c.render()).appendTo(s),$("<td>").appendTo(s),$("<td>").append(d).appendTo(s),this.createLabeledCell("Show Price",d).appendTo(s),this.bindControl(new _(a,e.visible,(!0),this.model(),"Change "+r+" visibility")),this.bindControl(new v(l,e.color,(!0),this.model(),"Change "+r+" color")),this.bindControl(new u(c,e.style,parseInt,(!0),this.model(),"Change "+r+" style")),this.bindControl(new y(h,e.width,(!0),this.model(),"Change "+r+" width")),this.bindControl(new _(d,e.showPrice,(!0),this.model(),"Change "+r+" show price")),e.enableText.value()&&(s=this.addRow(t),$('<td colspan="2">').appendTo(s),i=$("<input type='checkbox'>"),$('<td class="text-center">').append(i).appendTo(s),this.createLabeledCell("Show Text",i).appendTo(s),this.bindControl(new _(i,e.showText,(!0),this.model(),"Change "+r+" show text")),o=TradingView.createTextPosEditor(),$("<td>").append(o.render()).appendTo(s),this.bindControl(new u(o,e.textPos,parseInt,(!0),this.model(),"Change "+r+" text position")),n=this.createFontSizeEditor(),$('<td colspan="2">').append(n).appendTo(s),this.bindControl(new u(n,e.fontSize,parseInt,(!0),this.model(),"Change "+r+" font size")))},n._createRow_hhists=function(t,e){var i,o,n,s,r,a,l=e.title.value(),p=[],f=[],g=this.addRow(t),m=E();$("<td>").append(m).appendTo(g),this.createLabeledCell(l,m).appendTo(g),this.bindControl(new _(m,e.visible,(!0),this.model(),"Change "+l+" Visibility")),g=this.addRow(t),i=$("<input/>"),i.attr("type","text"),i.addClass("ticker"),this.createLabeledCell($.t("Width (% of the Box)"),i).appendTo(g),$("<td>").append(i).appendTo(g),o=[d(40)],o.push(h(0)),o.push(c(100)),this.bindControl(new b(i,e.percentWidth,o,(!1),this.model(),"Change Percent Width")),g=this.addLabeledRow(t,"Placement"),n=A(),$("<td>").append(n).appendTo(g),this.bindControl(new u(n,e.direction,null,(!0),this.model(),"Change "+l+" Placement")),g=this.addRow(t),s=$("<input type='checkbox'>"),$("<td>").append(s).appendTo(g),this.createLabeledCell($.t("Show Values"),s).appendTo(g),this.bindControl(new _(s,e.showValues,(!0),this.model(),"Change "+l+" Show Values")),g=this.addRow(t),r=this.createColorPicker(),this.createLabeledCell($.t("Text Color"),r).appendTo(g),$("<td>").append(r).appendTo(g),this.bindControl(new v(r,e.valuesColor,(!0),this.model(),"Change "+l+" Text Color"));for(a in e.colors)isNumber(parseInt(a,10))&&(g=this.addRow(t),p[a]=e.titles[a].value(),f[a]=this.createColorPicker(),$("<td>").append(p[a]).appendTo(g),$("<td>").append(f[a]).appendTo(g),this.bindControl(new v(f[a],e.colors[a],(!0),this.model(),"Change "+p[a]+" color")))},n._createRow_backgrounds=function(t,e){var i=this.addRow(t),o=$("<input type='checkbox' class='visibility-switch'/>"),n=e.name.value(),s=this.createColorPicker();$("<td>").append(o).appendTo(i),this.createLabeledCell(n,o).appendTo(i),$("<td>").append(s).appendTo(i),this.bindControl(new _(o,e.visible,(!0),this.model(),"Change "+n+" visibility")),this.bindControl(new v(s,e.color,(!0),this.model(),"Change "+n+" color",e.transparency))},n._createRow_polygons=function(t,e){var i=this.addRow(t),o=e.name.value(),n=this.createColorPicker();$("<td>").append(o).appendTo(i),$("<td>").append(n).appendTo(i),this.bindControl(new v(n,e.color,(!0),this.model(),"Change "+o+" color"))},n._createRow_trendchannels=function(t,e){var i=this.addRow(t),o=e.name.value(),n=this.createColorPicker();$("<td>").append(o).appendTo(i),$("<td>").append(n).appendTo(i),this.bindControl(new v(n,e.color,(!0),this.model(),"Change "+o+" color",e.transparency))},n._createRow_textmarks=function(t,e){var i=this.addLabeledRow(t),o=e.name.value(),n=this.createColorPicker(),s=this.createColorPicker(),r=this.createFontEditor(),a=this.createFontSizeEditor(),l=$('<span class="_tv-button _tv-button-fontstyle"><span class="icon-fontstyle-bold"></span></span>'),h=$('<span class="_tv-button _tv-button-fontstyle"><span class="icon-fontstyle-italic"></span></span>');$("<td>").append(o).appendTo(i),"rectangle"!==e.shape.value()&&$("<td>").append(n).appendTo(i),$("<td>").append(s).appendTo(i),$("<td>").append(r).appendTo(i),$("<td>").append(a).appendTo(i),$("<td>").append(l).appendTo(i),$("<td>").append(h).appendTo(i),this.bindControl(new v(n,e.color,(!0),this.model(),"Change "+o+" color",e.transparency)),this.bindControl(new v(s,e.fontColor,(!0),this.model(),"Change "+o+" text color",e.transparency)),this.bindControl(new u(a,e.fontSize,parseInt,(!0),this.model(),"Change "+o+" font size")),this.bindControl(new u(r,e.fontFamily,null,(!0),this.model(),"Change "+o+" font")),this.bindControl(new _(l,e.fontBold,(!0),this.model(),"Change Text Font Bold")),this.bindControl(new _(h,e.fontItalic,(!0),this.model(),"Change Text Font Italic"))},n._createRow_shapemarks=function(t,e){var i=this.addRow(t),o=$("<input type='checkbox' class='visibility-switch'/>"),n=e.name.value(),s=this.createColorPicker(),r=$("<input/>");r.attr("type","text"),r.addClass("ticker"),$("<td>").append(o).appendTo(i),this.createLabeledCell(n,o).appendTo(i),$("<td>").append(s).appendTo(i),this.createLabeledCell("Size",r).appendTo(i),$("<td>").append(r).appendTo(i),this.bindControl(new _(o,e.visible,(!0),this.model(),"Change "+n+" visibility")),this.bindControl(new v(s,e.color,(!0),this.model(),"Change "+n+" back color",e.transparency)),this.bindControl(new b(r,e.size,null,(!1),this.model(),"Change size"))},TradingView.StudyInputsPropertyPage=o,e.StudyInputsPropertyPage=o,e.StudyStylesPropertyPage=n,e.StudyDisplayPropertyPage=s},function(t,e,i){"use strict";function o(t,e){s.call(this,t,e),this.prepareLayout()}var n=i(295),s=n.PropertyPage,r=n.SimpleComboBinder;inherit(o,s),o.prototype.prepareLayout=function(){var t,e;this._table=$(document.createElement("table")),this._table.addClass("property-page"),this._table.attr("cellspacing","0"),this._table.attr("cellpadding","2"),t=this.createKeyCombo({open:$.t("Open"),high:$.t("High"),low:$.t("Low"),close:$.t("Close")}),e=this.addLabeledRow(this._table,$.t("Source",{context:"compare"})),$("<td>").appendTo(e).append(t),this.bindControl(new r(t,this._property.inputs.source,null,(!0),this.model(),"Change Price Source")),this.loadData()},o.prototype.widget=function(){return this._table},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e),this._linetool=i,this.prepareLayout()}var n=i(295).PropertyPage,s=i(303).StudyInputsPropertyPage,r=i(306),a=i(107);inherit(o,r),o.prototype.prepareLayout=function(){var t,e,o,n,r,l,h,c,d,p=i(291),u=$('<table class="property-page" cellspacing="0" cellpadding="0">'),_=$('<table class="property-page" cellspacing="0" cellpadding="0">').data({"layout-tab":p.TAB_NAME_INPUTS,"layout-tab-priority":p.TAB_PRIORITY_INPUTS});for(this._table=u.add(_),t=this._linetool.points(),e=0;e<t.length;e++)o=t[e],n=$("<tr>"),n.appendTo(u),r=$("<td>"),r.html("Point "+(e+1)+" Bar #"),r.appendTo(n),l=$("<td>"),l.appendTo(n),h=$("<input type='text'>"),h.appendTo(l),h.addClass("ticker"),c=this._linetool.properties().points[e],this.bindBarIndex(c.bar,h,this.model(),"Change "+this._linetool+" point bar index");d=a.findStudyMetaInfo(this._model.studiesMetaData(),this._linetool.studyId()),s.prototype.prepareLayoutImpl.call(this,d,_)},o.prototype.widget=function(){return this._table},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){s.call(this,t,e),this._linetool=i,this.prepareLayout()}var n=i(295),s=n.PropertyPage,r=n.GreateTransformer,a=n.LessTransformer,l=n.ToIntTransformer,h=n.SimpleStringBinder;inherit(o,s),o.BarIndexPastLimit=-5e4,o.BarIndexFutureLimit=15e3,o.prototype.bindBarIndex=function(t,e,i,n){var s=[l(t.value()),r(o.BarIndexPastLimit),a(o.BarIndexFutureLimit)];this.bindControl(new h(e,t,s,(!1),i,n))},o.prototype.createPriceEditor=function(t){var e,i=this._linetool.ownerSource().formatter(),o=function(t){var e=i.format(t);return e},n=function(t){var e=i.parse(t);if(e.res)return e.price?e.price:e.value},s=$("<input type='text'>");return s.TVTicker({step:i._minMove/i._priceScale||1,formatter:o,parser:n}),t&&(e=[function(e){var i=n(e);return void 0===i?t.value():i}],this.bindControl(new h(s,t,e,(!1),this.model(),"Change "+this._linetool+" point price")).addFormatter(function(t){return i.format(t)})),s},o.prototype._createPointRow=function(t,e,i){var o,n,s,r,a,l=$("<tr>"),h=$("<td>");return h.html($.t("Price")+i),h.appendTo(l),o=$("<td>"),o.appendTo(l),n=this.createPriceEditor(e.price),n.appendTo(o),s=$("<td>"),s.html($.t("Bar #")),s.appendTo(l),r=$("<td>"),r.appendTo(l),a=$("<input type='text'>"),a.appendTo(r),a.addClass("ticker"),this.bindBarIndex(e.bar,a,this.model(),"Change "+this._linetool+" point bar index"),l},o.prototype.prepareLayoutForTable=function(t){var e,i,o,n,s,r=this._linetool.points(),a=r.length;for(e=0;e<r.length;e++)i=r[e],o=this._linetool.properties().points[e],o&&(n=(e||a>1?" "+(e+1):"")+"",s=this._createPointRow(i,o,n),s.appendTo(t))},o.prototype.prepareLayout=function(){this._table=$(document.createElement("table")),this._table.addClass("property-page"),this._table.attr("cellspacing","0"),this._table.attr("cellpadding","2"),this.prepareLayoutForTable(this._table),this.loadData()},o.prototype.widget=function(){return this._table},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){s.call(this,t,e,i),this.prepareLayout()}function n(t,e,i){r.call(this,t,e,i)}var s=i(294),r=i(306),a=i(295),l=a.BooleanBinder,h=a.SimpleComboBinder,c=a.SimpleStringBinder,d=a.ColorBinding,p=a.SliderBinder,u=i(50),_=u.createLineStyleEditor,f=u.createLineWidthEditor;inherit(o,s),o.prototype.prepareLayout=function(){var t,e,i,o,n,s,r,a,u,g,m,v,y,w;this._res=$("<div>"),this._table=$('<table class="property-page" cellspacing="0" cellpadding="2" style="width:100%"></table>').appendTo(this._res),t=f(),e=_(),i=this.createColorPicker(),o=this.addLabeledRow(this._table,"Line"),$("<td>").append(i).appendTo(o),$("<td>").append(t).appendTo(o),$('<td colspan="3">').append(e.render().css("display","block")).appendTo(o),n=$("<input type='checkbox' class='visibility-switch'>"),o=$("<tr>").appendTo(this._table),$('<td colspan="3">').append($("<label>").append(n).append($.t("Show Price"))).prependTo(o),s=$("<input type='checkbox'>"),o=$("<tr>").appendTo(this._table),$('<td colspan="3">').append($("<label>").append(s).append($.t("Show Text"))).prependTo(o),o=this.addLabeledRow(this._table,"Text:"),r=this.createColorPicker(),a=this.createFontSizeEditor(),u=this.createFontEditor(),g=$('<span class="_tv-button _tv-button-fontstyle"><span class="icon-fontstyle-bold"></span></span>'),m=$('<span class="_tv-button _tv-button-fontstyle"><span class="icon-fontstyle-italic"></span></span>'),$("<td>").append(r).appendTo(o),$("<td>").append(u).appendTo(o),$("<td>").append(a).appendTo(o),$("<td>").append(g).appendTo(o),$("<td>").append(m).appendTo(o),o=$("<tr>").appendTo(this._table),$("<td colspan='2'>").append($.t("Text Alignment:")).appendTo(o),v=$("<select><option value='left'>"+$.t("left")+"</option><option value='center'>"+$.t("center")+"</option><option value='right'>"+$.t("right")+"</option></select>"),y=$("<select><option value='bottom'>"+$.t("top")+"</option><option value='middle'>"+$.t("middle")+"</option><option value='top'>"+$.t("bottom")+"</option></select>").data("selectbox-css",{display:"block"}),$("<td>").append(v).appendTo(o),$("<td colspan='3'>").append(y).appendTo(o),w=$("<textarea rows='7' cols='60'>").css("width","100%"),o=$("<tr>").appendTo(this._table),$("<td colspan='7'>").append(w).appendTo(o),this.bindControl(new l(s,this._linetool.properties().showLabel,(!0),this.model(),"Change Horz Line Text Visibility")),this.bindControl(new h(v,this._linetool.properties().horzLabelsAlign,null,(!0),this.model(),"Change Horz Line Labels Alignment")),this.bindControl(new h(y,this._linetool.properties().vertLabelsAlign,null,(!0),this.model(),"Change Horz Line Labels Alignment")),this.bindControl(new c(w,this._linetool.properties().text,null,(!0),this.model(),"Change Text")),this.bindControl(new l(n,this._linetool.properties().showPrice,(!0),this.model(),"Change Horz Line Price Visibility")),this.bindControl(new d(i,this._linetool.properties().linecolor,(!0),this.model(),"Change Horz Line Color")),this.bindControl(new h(e,this._linetool.properties().linestyle,parseInt,(!0),this.model(),"Change Horz Line Style")),this.bindControl(new p(t,this._linetool.properties().linewidth,(!0),this.model(),"Change Horz Line Width")),this.bindControl(new h(a,this._linetool.properties().fontsize,parseInt,(!0),this.model(),"Change Text Font Size")),this.bindControl(new h(u,this._linetool.properties().font,null,(!0),this.model(),"Change Text Font")),this.bindControl(new d(r,this._linetool.properties().textcolor,(!0),this.model(),"Change Text Color")),this.bindControl(new l(g,this._linetool.properties().bold,(!0),this.model(),"Change Text Font Bold")),this.bindControl(new l(m,this._linetool.properties().italic,(!0),this.model(),"Change Text Font Italic")),this.loadData();
},o.prototype.widget=function(){return this._res},inherit(n,r),n.prototype.prepareLayout=function(){var t,e,i,o;this._table=$('<table class="property-page" cellspacing="0" cellpadding="2">'),t=this._linetool.points()[0],t&&(e=this._linetool.properties().points[0],i=this.createPriceEditor(e.price),o=$("<tr>").appendTo(this._table),$("<td>"+$.t("Price")+"</td>").appendTo(o),$("<td>").append(i).appendTo(o),this.loadData())},e.LineToolHorzLineStylesPropertyPage=o,e.LineToolHorzLineInputsPropertyPage=n},function(t,e,i){"use strict";function o(t,e,i){s.call(this,t,e,i),this.prepareLayout()}function n(t,e,i){r.call(this,t,e,i)}var s=i(294),r=i(306),a=i(295),l=a.GreateTransformer,h=a.LessTransformer,c=a.ToFloatTransformer,d=a.ColorBinding,p=a.BooleanBinder,u=a.SimpleComboBinder,_=a.SimpleStringBinder,f=a.SliderBinder,g=i(50),m=g.createLineStyleEditor,v=g.createLineWidthEditor,y=i(75),w=y.NumericFormatter;inherit(o,s),o.prototype.prepareLayout=function(){var t,e,i,o,n,s,r,a,l,h,c,_,g,y,w,b;this._table=$('<table class="property-page" cellspacing="0" cellpadding="2">'),t=$("<tbody>").appendTo(this._table),e=v(),i=m(),o=this.createColorPicker(),n=this.addLabeledRow(t,$.t("Line")),$("<td>").append(o).appendTo(n),$("<td>").append(e).appendTo(n),$('<td colspan="3">').append(i.render()).appendTo(n),s=$("<tbody>").appendTo(this._table),n=this.addLabeledRow(s,$.t("Text")),r=this.createColorPicker(),a=this.createFontSizeEditor(),l=this.createFontEditor(),h=$('<span class="_tv-button _tv-button-fontstyle"><span class="icon-fontstyle-bold"></span></span>'),c=$('<span class="_tv-button _tv-button-fontstyle"><span class="icon-fontstyle-italic"></span></span>'),$("<td>").append(r).appendTo(n),$("<td>").append(l).appendTo(n),$("<td>").append(a).appendTo(n),$("<td>").append(h).appendTo(n),$("<td>").append(c).appendTo(n),_=$('<input type="checkbox">'),g=$('<input type="checkbox">'),n=this.addLabeledRow(s,$.t("Extend Right End")),$('<td colspan="3">').appendTo(n).append(_),n=this.addLabeledRow(s,$.t("Extend Left End")),$('<td colspan="3">').appendTo(n).append(g),y=$('<input type="checkbox">'),w=$('<input type="checkbox">'),b=$('<input type="checkbox">'),n=this.addLabeledRow(s,$.t("Show Price Range")),$('<td colspan="3">').appendTo(n).append(y),n=this.addLabeledRow(s,$.t("Show Bars Range")),$('<td colspan="3">').appendTo(n).append(w),n=this.addLabeledRow(s,$.t("Always Show Stats")),$('<td colspan="3">').appendTo(n).append(b),this.bindControl(new p(y,this._linetool.properties().showPriceRange,(!0),this.model(),"Change Trend Line Show Price Range")),this.bindControl(new p(w,this._linetool.properties().showBarsRange,(!0),this.model(),"Change Trend Line Show Bars Range")),this.bindControl(new u(a,this._linetool.properties().fontsize,parseInt,(!0),this.model(),"Change Text Font Size")),this.bindControl(new u(l,this._linetool.properties().font,null,(!0),this.model(),"Change Text Font")),this.bindControl(new d(r,this._linetool.properties().textcolor,(!0),this.model(),"Change Text Color")),this.bindControl(new p(h,this._linetool.properties().bold,(!0),this.model(),"Change Text Font Bold")),this.bindControl(new p(c,this._linetool.properties().italic,(!0),this.model(),"Change Text Font Italic")),this.bindControl(new d(o,this._linetool.properties().linecolor,(!0),this.model(),"Change Trend Line Color")),this.bindControl(new u(i,this._linetool.properties().linestyle,parseInt,(!0),this.model(),"Change Trend Line Style")),this.bindControl(new f(e,this._linetool.properties().linewidth,(!0),this.model(),"Change Trend Line Width")),this.bindControl(new p(_,this._linetool.properties().extendRight,(!0),this.model(),"Change Trend Angle Extending Right")),this.bindControl(new p(g,this._linetool.properties().extendLeft,(!0),this.model(),"Change Trend Angle Extending Left")),this.bindControl(new p(b,this._linetool.properties().alwaysShowStats,(!0),this.model(),"Change Trend Line Always Show Stats")),this.loadData()},o.prototype.widget=function(){return this._table},inherit(n,r),n.prototype.prepareLayout=function(){var t,e,i,o,n,s;this._table=$('<table class="property-page" cellspacing="0" cellpadding="2">'),t=this._linetool.points()[0],e=this._linetool.properties().points[0],t&&e&&(i=this._createPointRow(t,e,""),this._table.append(i),i=$("<tr>").appendTo(this._table),$("<td>").append($.t("Angle")).appendTo(i),o=$("<input type='text'>"),$("<td>").append(o).appendTo(i),n=[c(e.price.value()),l(-360),h(360)],s=new _(o,this._linetool.properties().angle,n,(!1),this.model(),"Change angle"),s.addFormatter(function(t){return(new w).format(t)}),this.bindControl(s),this.loadData())},n.prototype.widget=function(){return this._table},e.LineToolTrendAngleStylesPropertyPage=o,e.LineToolTrendAngleInputsPropertyPage=n},function(t,e,i){"use strict";function o(t,e,i){r.call(this,t,e,i),this.prepareLayout()}function n(t,e,i){s.call(this,t,e,i),this.prepareLayout()}var s=i(294),r=i(306),a=i(295),l=a.LessTransformer,h=a.GreateTransformer,c=a.ToIntTransformer,d=a.ToFloatTransformer,p=a.SimpleStringBinder,u=a.ColorBinding,_=a.SliderBinder,f=a.SimpleComboBinder,g=i(50).createLineWidthEditor,m=i(75).NumericFormatter;inherit(o,r),o.prototype.prepareLayout=function(){function t(t){return(new m).format(t)}var e,i,o,n,s,r,a,u,_,f,g,v;this._table=$('<table class="property-page" cellspacing="0" cellpadding="2">'),e=$("<tbody>").appendTo(this._table),i=this.addLabeledRow(e,"Stop Level. Ticks:"),o=$("<input type='text'>"),$("<td>").append(o).appendTo(i),o.addClass("ticker"),n=$("<input type='text'>"),$("<td>"+$.t("Price:")+"</td>").appendTo(i),$("<td>").append(n).appendTo(i),s=this.addLabeledRow(e,"Entry price:"),r=$("<input type='text'>"),$('<td colspan="2">').append(r).appendTo(s),a=this.addLabeledRow(e,"Profit Level. Ticks:"),u=$("<input type='text'>"),$("<td>").append(u).appendTo(a),u.addClass("ticker"),_=$("<input type='text'>"),$("<td>"+$.t("Price:")+"</td>").appendTo(a),$("<td>").append(_).appendTo(a),"LineToolRiskRewardLong"==this._linetool.getConstructor()&&(i.detach().appendTo(e),a.detach().prependTo(e)),f=[c(this._linetool.properties().stopLevel.value()),h(0),l(1e9)],this.bindControl(new p(o,this._linetool.properties().stopLevel,f,(!1),this.model(),"Change "+this._linetool+" stop level")),f=[c(this._linetool.properties().profitLevel.value()),h(0),l(1e9)],this.bindControl(new p(u,this._linetool.properties().profitLevel,f,(!1),this.model(),"Change "+this._linetool+" profit level")),f=[d(this._linetool.properties().entryPrice.value())],g=new p(r,this._linetool.properties().entryPrice,f,(!1),this.model(),"Change "+this._linetool+" entry price"),g.addFormatter(t),this.bindControl(g),v=this,f=[d(this._linetool.properties().stopPrice.value()),function(t){return v._linetool.preparseStopPrice(t)}],g=new p(n,this._linetool.properties().stopPrice,f,(!1),this.model(),"Change "+this._linetool+" stop price"),g.addFormatter(t),this.bindControl(g),f=[d(this._linetool.properties().targetPrice.value()),function(t){return v._linetool.preparseProfitPrice(t)}],g=new p(_,this._linetool.properties().targetPrice,f,(!1),this.model(),"Change "+this._linetool+" stop price"),g.addFormatter(t),this.bindControl(g)},o.prototype.widget=function(){return this._table},inherit(n,s),n.prototype.prepareLayout=function(){var t,e,i,o,n,s,r,a,l;this._table=$('<table class="property-page" cellspacing="0" cellpadding="2">'),t=$("<tbody>").appendTo(this._table),e=g(),i=this.createColorPicker(),o=this.addLabeledRow(t,"Lines"),$("<td>").append(i).appendTo(o),$("<td>").append(e).appendTo(o),o=this.addLabeledRow(t,"Stop Color:"),n=this.createColorPicker(),$("<td>").append(n).appendTo(o),o=this.addLabeledRow(t,"Target Color:"),s=this.createColorPicker(),$("<td>").append(s).appendTo(o),o=this.addLabeledRow(t,"Text:"),r=this.createColorPicker(),a=this.createFontSizeEditor(),l=this.createFontEditor(),$("<td>").append(r).appendTo(o),$("<td>").append(l).appendTo(o),$("<td>").append(a).appendTo(o),this.bindControl(new u(i,this._linetool.properties().linecolor,(!0),this.model(),"Change Risk/Reward line Color")),this.bindControl(new _(e,this._linetool.properties().linewidth,(!0),this.model(),"Change Risk/Reward line width")),this.bindControl(new u(n,this._linetool.properties().stopBackground,(!0),this.model(),"Change stop color",this._linetool.properties().stopBackgroundTransparency)),this.bindControl(new u(s,this._linetool.properties().profitBackground,(!0),this.model(),"Change target color",this._linetool.properties().profitBackgroundTransparency)),this.bindControl(new f(a,this._linetool.properties().fontsize,parseInt,(!0),this.model(),"Change Text Font Size")),this.bindControl(new f(l,this._linetool.properties().font,null,(!0),this.model(),"Change Text Font")),this.bindControl(new u(r,this._linetool.properties().textcolor,(!0),this.model(),"Change Text Color")),this.loadData()},n.prototype.widget=function(){return this._table},e.LineToolRiskRewardInputsPropertyPage=o,e.LineToolRiskRewardStylesPropertyPage=n},function(t,e,i){"use strict";function o(t,e,i){s.call(this,t,e,i),this.prepareLayout()}function n(t,e,i){r.call(this,t,e,i)}var s=i(294),r=i(306),a=i(295),l=a.BooleanBinder,h=a.SimpleComboBinder,c=a.SliderBinder,d=a.ColorBinding,p=i(50),u=p.createLineStyleEditor,_=p.createLineWidthEditor;inherit(o,s),o.prototype.prepareLayout=function(){var t,e,i,o,n;this._table=$(document.createElement("table")),this._table.addClass("property-page"),this._table.attr("cellspacing","0"),this._table.attr("cellpadding","2"),t=_(),e=u(),i=this.createColorPicker(),o=this.addLabeledRow(this._table,"Line"),$("<td>").prependTo(o),$("<td>").append(i).appendTo(o),$("<td>").append(t).appendTo(o),$("<td>").append(e.render()).appendTo(o),n=$("<input type='checkbox' class='visibility-switch'>"),o=$("<tr>").appendTo(this._table),$("<td>").append(n).prependTo(o),this.createLabeledCell(2,"Show Time",n).appendTo(o),this.bindControl(new l(n,this._linetool.properties().showTime,(!0),this.model(),"Change Vert Line Time Visibility")),this.bindControl(new d(i,this._linetool.properties().linecolor,(!0),this.model(),"Change Vert Line Color")),this.bindControl(new h(e,this._linetool.properties().linestyle,parseInt,(!0),this.model(),"Change Vert Line Style")),this.bindControl(new c(t,this._linetool.properties().linewidth,(!0),this.model(),"Change Vert Line Width")),this.loadData()},o.prototype.widget=function(){return this._table},inherit(n,r),n.prototype.prepareLayout=function(){var t,e,i,o;this._table=$('<table class="property-page" cellspacing="0" cellpadding="2">'),t=this._linetool.points()[0],t&&(e=$('<input type="text" class="ticker">'),i=$("<tr>").appendTo(this._table),$("<td>"+$.t("Bar #")+"</td>").appendTo(i),$("<td>").append(e).appendTo(i),o=this._linetool.properties().points[0],this.bindBarIndex(o.bar,e,this.model(),"Change "+this._linetool+" point bar index"),this.loadData())},e.LineToolVertLineStylesPropertyPage=o,e.LineToolVertLineInputsPropertyPage=n},function(t,e,i){"use strict";function o(t,e,i){s.call(this,t,e,i),this.prepareLayout()}function n(t,e,i){r.call(this,t,e,i)}var s=i(294),r=i(306),a=i(295),l=a.ToFloatTransformer,h=a.SimpleComboBinder,c=a.ColorBinding,d=a.BooleanBinder,p=a.SimpleStringBinder;inherit(o,s),o.prototype.prepareLayout=function(){var t,e,i,o,n,s;this._table=$(document.createElement("table")),this._table.addClass("property-page"),this._table.attr("cellspacing","0"),this._table.attr("cellpadding","2"),t=$("<tbody>").appendTo(this._table),e=this.createColorPicker(),i=this.addLabeledRow(t,"Color"),$("<td>").append(e).appendTo(i),o=$('<select><option value="0">'+$.t("HL Bars")+'</option><option value="2">'+$.t("OC Bars")+'</option><option value="1">'+$.t("Line - Close")+'</option><option value="3">'+$.t("Line - Open")+'</option><option value="4">'+$.t("Line - High")+'</option><option value="5">'+$.t("Line - Low")+'</option><option value="6">'+$.t("Line - HL/2")+"</option></select>"),i=this.addLabeledRow(t,"Mode"),$("<td>").append(o).appendTo(i),i=$("<tr>").appendTo(t),$("<td>"+$.t("Mirrored")+"</td>").appendTo(i),n=$("<input type='checkbox'>"),$("<td>").append(n).appendTo(i),i=$("<tr>").appendTo(t),$("<td>"+$.t("Flipped")+"</td>").appendTo(i),s=$("<input type='checkbox'>"),$("<td>").append(s).appendTo(i),this.bindControl(new d(n,this._linetool.properties().mirrored,(!0),this.model(),"Change Bars Pattern Mirroring")),this.bindControl(new d(s,this._linetool.properties().flipped,(!0),this.model(),"Change Bars Pattern Flipping")),this.bindControl(new c(e,this._linetool.properties().color,(!0),this.model(),"Change Bars Pattern Color")),this.bindControl(new h(o,this._linetool.properties().mode,null,(!0),this.model(),"Change Bars Pattern Mode")),this.loadData()},o.prototype.widget=function(){return this._table},inherit(n,r),n.prototype.prepareLayout=function(){var t,e,i,o,n,s,r,a,h,c,d;this._table=$(document.createElement("table")),this._table.addClass("property-page"),this._table.attr("cellspacing","0"),this._table.attr("cellpadding","2"),t=this._linetool.points(),e=t.item(0),i=$("<tr>"),i.appendTo(this._table),o=$("<td>"),o.html($.t("Price")),o.appendTo(i),n=$("<td>"),n.appendTo(i),s=$("<input type='text'>"),s.appendTo(n),r=$("<td>"),r.html($.t("Bar #")),r.appendTo(i),a=$("<td>"),a.appendTo(i),h=$("<input type='text'>"),h.appendTo(a),h.addClass("ticker"),c=this._linetool.properties().points[0],d=[l(c.price.value())],this.bindControl(new p(s,c.price,d,(!1),this.model(),"Change "+this._linetool+" point price")),this.bindBarIndex(c.bar,h,this.model(),"Change "+this._linetool+" point bar index"),this.loadData()},e.LineToolBarsPatternStylesPropertyPage=o,e.LineToolBarsPatternInputsPropertyPage=n},function(t,e,i){"use strict";function o(t,e,i){l.call(this,t,e),this._linetool=i,this.prepareLayout()}function n(t,e,i){s.call(this,t,e,i),this.prepareLayout()}var s=i(294),r=i(306),a=i(295),l=a.PropertyPage,h=a.SliderBinder,c=i(50).createTransparencyEditor;inherit(o,r),o.prototype.prepareLayout=function(){var t,e,o,n,s,a,l,h,c=i(291),d=$('<table class="property-page" cellspacing="0" cellpadding="0">'),p=$('<table class="property-page" cellspacing="0" cellpadding="0">').data({"layout-tab":c.TAB_NAME_INPUTS,"layout-tab-priority":c.TAB_PRIORITY_INPUTS});this._table=d.add(p),r.prototype.prepareLayoutForTable.call(this,d),t=$("<tr>").appendTo(p),$("<td>").append($.t("Avg HL in minticks")).appendTo(t),e=$("<td>").appendTo(t),o=$("<input type='text'>").addClass("ticker").appendTo(e),t=$("<tr>").appendTo(p),$("<td>").append($.t("Variance")).appendTo(t),n=$("<td>").appendTo(t),s=$("<input type='text'>").addClass("ticker").appendTo(n),a=this._linetool.properties(),this.bindInteger(o,a.averageHL,$.t("Change Average HL value"),1,5e4),this.bindInteger(s,a.variance,$.t("Change Variance value"),1,100),l=p.is(":empty"),h=d.is(":empty"),this.loadData()},o.prototype.widget=function(){this._table.is(":empty");return this._table},inherit(n,s),n.prototype.prepareLayout=function(){var t,e,i,o,n,s,r,a,l,d,p;this._widget=$("<div>"),t=$("<table cellspacing=4>").appendTo(this._widget),e=this.createColorPicker(),i=this.createColorPicker(),o=this.createColorPicker(),n=this.createColorPicker(),s=this.createColorPicker(),r=$("<input type='checkbox' class='visibility-switch'/>").data("hides",$(n).add(s)),a=$("<input type='checkbox' class='visibility-switch'/>").data("hides",$(o)),l=this.addLabeledRow(t,$.t("Candles")),$("<td>").prependTo(l),$("<td>").append(e).appendTo(l),$("<td>").append(i).appendTo(l),l=this.addLabeledRow(t,$.t("Borders"),r),$("<td>").append(r).prependTo(l),$("<td>").append(n).appendTo(l),$("<td>").append(s).appendTo(l),$("<td>").appendTo(l),l=this.addLabeledRow(t,$.t("Wick"),a),$("<td>").append(a).prependTo(l),$("<td>").append(o).appendTo(l),$("<td>").appendTo(l),t=$("<table>").appendTo(this._widget),l=$("<tr>").appendTo(t),$("<td colspan='2'>").append($.t("Transparency")).appendTo(l),d=c(),$("<td colspan='2'>").append(d).appendTo(l),p=this._linetool.properties(),this.bindColor(e,p.candleStyle.upColor,"Change Candle Up Color"),this.bindColor(i,p.candleStyle.downColor,"Change Candle Down Color"),this.bindBoolean(a,p.candleStyle.drawWick,"Change Candle Wick Visibility"),this.bindColor(o,p.candleStyle.wickColor,"Change Candle Wick Color"),this.bindBoolean(r,p.candleStyle.drawBorder,"Change Candle Border Visibility"),this.bindColor(n,p.candleStyle.borderUpColor,"Change Candle Up Border Color"),this.bindColor(s,p.candleStyle.borderDownColor,"Change Candle Down Border Color"),this.bindControl(new h(d,p.transparency,(!0),this.model(),"Change Guest Feed Transparency"))},n.prototype.widget=function(){return this._widget},e.LineToolGhostFeedInputsPropertyPage=o,e.LineToolGhostFeedStylesPropertyPage=n},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i),this.prepareLayout()}var n=i(294),s=i(295),r=s.BooleanBinder,a=s.ColorBinding,l=s.SimpleComboBinder,h=s.SliderBinder,c=s.SimpleStringBinder,d=i(50).createLineWidthEditor;inherit(o,n),o.prototype.prepareLayout=function(){var t,e,o,n,s,p=this.createColorPicker(),u=this.createFontSizeEditor(),_=this.createFontEditor(),f=this.createTextEditor(350,200),g=this.createColorPicker(),m=d(),v=this.createColorPicker(),y=$('<input type="checkbox">'),w=$('<span class="_tv-button _tv-button-fontstyle"><span class="icon-fontstyle-bold"></span></span>'),b=$('<span class="_tv-button _tv-button-fontstyle"><span class="icon-fontstyle-italic"></span></span>');this.bindControl(new a(p,this._linetool.properties().color,(!0),this.model(),"Change Text Color")),this.bindControl(new l(u,this._linetool.properties().fontsize,parseInt,(!0),this.model(),"Change Text Font Size")),this.bindControl(new l(_,this._linetool.properties().font,null,(!0),this.model(),"Change Text Font")),this.bindControl(new c(f,this._linetool.properties().text,null,(!0),this.model(),"Change Text")),this.bindControl(new a(g,this._linetool.properties().backgroundColor,(!0),this.model(),"Change Text Background",this._linetool.properties().transparency)),this.bindControl(new a(v,this._linetool.properties().bordercolor,(!0),this.model(),"Change Text Color")),this.bindControl(new h(m,this._linetool.properties().linewidth,(!0),this.model(),"Change Border Width")),this.bindControl(new r(y,this._linetool.properties().wordWrap,(!0),this.model(),"Change Text Wrap")),this.bindControl(new r(w,this._linetool.properties().bold,(!0),this.model(),"Change Text Font Bold")),this.bindControl(new r(b,this._linetool.properties().italic,(!0),this.model(),"Change Text Font Italic")),t=i(291),e=$('<table class="property-page" cellspacing="0" cellpadding="2">').data("layout-tab-open",t.TAB_OPEN_OVERRIDE),o=$('<table class="property-page" cellspacing="0" cellpadding="2">'),n=$('<table class="property-page" cellspacing="0" cellpadding="2">'),this._table=e.add(n).add(o),$(document.createElement("tr")).append($(document.createElement("td")).attr({width:1}).append(p)).append($(document.createElement("td")).attr({width:1}).append(_)).append($(document.createElement("td")).attr({width:1}).append(u)).append($(document.createElement("td")).attr({width:1}).append(w)).append($(document.createElement("td")).append(b)).appendTo(e),$(document.createElement("tr")).append($(document.createElement("td")).attr({colspan:5}).append(f)).appendTo(e),s=this.addLabeledRow(o,"Text Wrap",y),$("<td>").append(y).prependTo(s),s=this.addLabeledRow(n,"Background"),$("<td>").append(g).appendTo(s),s=this.addLabeledRow(n,"Border"),$("<td>").append(v).appendTo(s),$("<td>").append(m).appendTo(s),this.loadData(),setTimeout(function(){f.select(),f.focus()},20)},o.prototype.widget=function(){return this._table},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i),this.prepareLayout()}var n=i(294),s=i(295),r=s.SimpleComboBinder,a=s.ColorBinding,l=s.BooleanBinder,h=s.SliderBinder,c=i(50),d=c.createLineStyleEditor,p=c.createLineWidthEditor;inherit(o,n),o.prototype.prepareLayout=function(){var t,e,i,o,n,s,c,u,_,f,g,m,v,y,w,b,S,T,C,x;this._table=$('<table class="property-page" cellspacing="0" cellpadding="2">'),t=$("<tbody>").appendTo(this._table),e=p(),i=d(),o=this.createColorPicker(),n=this.addLabeledRow(t,$.t("Line")),$("<td>").append(o).appendTo(n),$("<td>").append(e).appendTo(n),$('<td colspan="3">').append(i.render()).appendTo(n),s=$("<tbody>").appendTo(this._table),c=$("<label>"+$.t("Extend")+" </label>").css({"margin-left":"8px"}),u=$('<input type="checkbox">').appendTo(c),_=$("<label>"+$.t("Extend")+" </label>").css({"margin-left":"8px"}),f=$('<input type="checkbox">').appendTo(_),g=$("<select><option value='0'>"+$.t("Normal")+"</option><option value='1'>"+$.t("Arrow")+"</option></select>"),m=$("<select><option value='0'>"+$.t("Normal")+"</option><option value='1'>"+$.t("Arrow")+"</option></select>"),n=this.addLabeledRow(s,$.t("Left End")),$('<td colspan="3">').appendTo(n).append(g).append(c),n=this.addLabeledRow(s,$.t("Right End")),$('<td colspan="3">').appendTo(n).append(m).append(_),n=this.addLabeledRow(s,$.t("Stats Text Color")),v=this.createColorPicker(),$("<td>").append(v).appendTo(n),this.bindControl(new a(v,this._linetool.properties().textcolor,(!0),this.model(),"Change Text Color")),y=$('<input type="checkbox">'),w=$('<input type="checkbox">'),b=$('<input type="checkbox">'),S=$('<input type="checkbox">'),T=$('<input type="checkbox">'),C=$('<input type="checkbox">'),x=$('<input type="checkbox">'),n=this.addLabeledRow(s,$.t("Show Price Range")),$('<td colspan="3">').appendTo(n).append(y),n=this.addLabeledRow(s,$.t("Show Bars Range")),$('<td colspan="3">').appendTo(n).append(b),n=this.addLabeledRow(s,$.t("Show Date/Time Range")),$('<td colspan="3">').appendTo(n).append(S),n=this.addLabeledRow(s,$.t("Show Distance")),$('<td colspan="3">').appendTo(n).append(T),n=this.addLabeledRow(s,$.t("Show Angle")),$('<td colspan="3">').appendTo(n).append(C),n=this.addLabeledRow(s,$.t("Always Show Stats")),$('<td colspan="3">').appendTo(n).append(x),this.bindControl(new l(u,this._linetool.properties().extendLeft,(!0),this.model(),"Change Trend Line Extending Left")),this.bindControl(new l(f,this._linetool.properties().extendRight,(!0),this.model(),"Change Trend Line Extending Right")),this.bindControl(new a(o,this._linetool.properties().linecolor,(!0),this.model(),"Change Trend Line Color")),this.bindControl(new r(i,this._linetool.properties().linestyle,parseInt,(!0),this.model(),"Change Trend Line Style")),this.bindControl(new h(e,this._linetool.properties().linewidth,(!0),this.model(),"Change Trend Line Width")),this.bindControl(new r(g,this._linetool.properties().leftEnd,parseInt,(!0),this.model(),"Change Trend Line Left End")),this.bindControl(new r(m,this._linetool.properties().rightEnd,parseInt,(!0),this.model(),"Change Trend Line Right End")),this.bindControl(new l(y,this._linetool.properties().showPriceRange,(!0),this.model(),"Change Trend Line Show Price Range")),this.bindControl(new l(b,this._linetool.properties().showBarsRange,(!0),this.model(),"Change Trend Line Show Bars Range")),this.bindControl(new l(S,this._linetool.properties().showDateTimeRange,(!0),this.model(),"Change Trend Line Show Date/Time Range")),this.bindControl(new l(T,this._linetool.properties().showDistance,(!0),this.model(),"Change Trend Line Show Distance")),this.bindControl(new l(C,this._linetool.properties().showAngle,(!0),this.model(),"Change Trend Line Show Angle")),this.bindControl(new l(x,this._linetool.properties().alwaysShowStats,(!0),this.model(),"Change Trend Line Always Show Stats")),this.loadData()},o.prototype.widget=function(){return this._table},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){s.call(this,t,e),this._study=i,this.prepareLayout()}var n=i(295),s=n.PropertyPage,r=n.BooleanBinder,a=n.SimpleComboBinder,l=n.SliderBinder,h=n.ColorBinding,c=i(50),d=c.createLineWidthEditor,p=c.createPlotEditor;inherit(o,s),o.prototype.prepareLayout=function(){var t,e,o,n,s,c,u,_,f,g,m,v,y=this._study.properties();this._table=$('<table class="property-page" cellspacing="0" cellpadding="2">'),t=this.addLabeledRow(this._table,"Volume"),e=p(),$("<td>").append(e).appendTo(t),this.bindControl(new a(e,y.styles.vol.plottype,parseInt,(!0),this.model(),"Change Volume Plot Style")),o=this._study.metaInfo().version<=46&&"transparency"in y?y.transparency:y.styles.vol.transparency,n=this.createColorPicker(),$("<td>").append(n).appendTo(t),this.bindControl(new h(n,y.palettes.volumePalette.colors[0].color,(!0),this.model(),"Change Up Volume color",o)),s=this.createColorPicker(),$("<td>").append(s).appendTo(t),this.bindControl(new h(s,y.palettes.volumePalette.colors[1].color,(!0),this.model(),"Change Down Volume color",o)),c=$("<input type='checkbox'>"),$("<td>").appendTo(t),$("<td>").append(c).appendTo(t),$("<td>"+$.t("Price Line")+"</td>").appendTo(t),this.bindControl(new r(c,y.styles.vol.trackPrice,(!0),this.model(),"Change Price Line")),u=y.styles.vol_ma,_=this.addLabeledRow(this._table,"Volume MA"),f=p(),$("<td>").append(f).appendTo(_),this.bindControl(new a(f,u.plottype,parseInt,(!0),this.model(),"Change Volume MA Plot Style")),$("<td>").html("&nbsp;").appendTo(_),g=this.createColorPicker(),$("<td>").append(g).appendTo(_),this.bindControl(new h(g,u.color,(!0),this.model(),"Change Volume MA color",u.transparency)),m=d(),$("<td>").append(m).appendTo(_),this.bindControl(new l(m,u.linewidth,(!0),this.model(),"Change Volume MA Line Width")),c=$("<input type='checkbox'>"),$("<td>").append(c).appendTo(_),$("<td>"+$.t("Price Line")+"</td>").appendTo(_),this.bindControl(new r(c,u.trackPrice,(!0),this.model(),"Change Price Line")),v=i(303).StudyStylesPropertyPage,v.prototype._putStudyDefaultStyles.call(this,this._table,8)},o.prototype.widget=function(){return this._table},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i),this.prepareLayout()}var n=i(294),s=i(295),r=s.ColorBinding,a=s.SimpleComboBinder,l=s.SliderBinder,h=s.BooleanBinder,c=i(50),d=c.createLineStyleEditor,p=c.createLineWidthEditor;inherit(o,n),o.prototype.prepareLayout=function(){var t,e,i,o,n,s,c,u,_,f,g,m,v,y,w,b;this._block=$("<div>").addClass("property-page"),t=$('<table cellspacing="0" cellpadding="2">').appendTo(this._block),e=$("<tbody>").appendTo(t),i=p(),o=d(),n=this.createColorPicker(),s=this.addLabeledRow(e,$.t("Line")),$("<td>").append(n).appendTo(s),$("<td>").append(i).appendTo(s),$('<td colspan="3">').append(o.render()).appendTo(s),c=$('<table cellspacing="0" cellpadding="2">').appendTo(this._block),s=this.addLabeledRow(c,$.t("Background"),u),u=$('<input type="checkbox" class="visibility-switch">'),_=this.createColorPicker(),$("<td>").append(u).prependTo(s),$("<td>").append(_).appendTo(s),f=$('<table cellspacing="0" cellpadding="2">').appendTo(this._block),g=$("<select><option value='0'>"+$.t("Normal")+"</option><option value='1'>"+$.t("Arrow")+"</option></select>"),m=$("<select><option value='0'>"+$.t("Normal")+"</option><option value='1'>"+$.t("Arrow")+"</option></select>"),v=$("<label>"+$.t("Extend")+" </label>").css({"margin-left":"8px"}),y=$('<input type="checkbox">').appendTo(v),w=$("<label>"+$.t("Extend")+" </label>").css({"margin-left":"8px"}),b=$('<input type="checkbox">').appendTo(w),s=this.addLabeledRow(f,$.t("Left End")),$('<td colspan="3">').appendTo(s).append(g).append(v),s=this.addLabeledRow(f,$.t("Right End")),$('<td colspan="3">').appendTo(s).append(m).append(w),this.bindControl(new r(n,this._linetool.properties().linecolor,(!0),this.model(),"Change Curve Line Color")),this.bindControl(new a(o,this._linetool.properties().linestyle,parseInt,(!0),this.model(),"Change Curve Line Style")),this.bindControl(new l(i,this._linetool.properties().linewidth,(!0),this.model(),"Change Curve Line Width")),this.bindControl(new h(u,this._linetool.properties().fillBackground,(!0),this.model(),"Change Curve Filling")),this.bindControl(new r(_,this._linetool.properties().backgroundColor,(!0),this.model(),"Change Curve Background Color",this._linetool.properties().transparency)),this.bindControl(new a(g,this._linetool.properties().leftEnd,parseInt,(!0),this.model(),"Change Curve Line Left End")),this.bindControl(new a(m,this._linetool.properties().rightEnd,parseInt,(!0),this.model(),"Change Curve Line Right End")),this.bindControl(new h(y,this._linetool.properties().extendLeft,(!0),this.model(),"Change Curve Line Extending Left")),this.bindControl(new h(b,this._linetool.properties().extendRight,(!0),this.model(),"Change Curve Line Extending Right")),this.loadData()},o.prototype.widget=function(){return this._block},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i),this.prepareLayout()}var n=i(294),s=i(295),r=s.BooleanBinder,a=s.FloatBinder,l=s.ColorBinding,h=s.SimpleComboBinder,c=s.SliderBinder,d=i(50),p=d.addColorPicker,u=d.createLineStyleEditor,_=d.createLineWidthEditor,f=d.createTransparencyEditor;inherit(o,n),o.prototype.onResoreDefaults=function(){this._linetool.properties().style.listeners().fire(this._linetool.properties().style)},o.prototype.addLevelEditor=function(t,e,i){var o,n,s,d,f,g,m,v,y,w,b=$("<tr>");b.appendTo(this._table),t?(o=$("<td>"),o.appendTo(b),n=$("<input type='checkbox' class='visibility-switch'>"),n.appendTo(o),s=$("<td>"),s.appendTo(b),d=$("<input type='text'>"),d.appendTo(s),d.css("width","70px"),this.bindControl(new r(n,e.visible,(!0),this.model(),"Change Pitchfork Line Visibility")),this.bindControl(new a(d,e.coeff,(!1),this.model(),"Change Pitchfork Line Coeff"))):($("<td></td>").appendTo(b),$("<td>"+$.t("Median")+"</td>").appendTo(b)),f=$("<td class='colorpicker-cell'>"),f.appendTo(b),g=p(f),m=$("<td>"),m.appendTo(b),v=_(),v.appendTo(m),y=$("<td>"),y.appendTo(b),w=u(),w.render().appendTo(y),this.bindControl(new l(g,e.color,(!0),this.model(),"Change Pitchfork Line Color",0)),this.bindControl(new h(w,e.linestyle,parseInt,(!0),this.model(),"Change Pitchfork Line Style")),this.bindControl(new c(v,e.linewidth,(!0),this.model(),"Change Pitchfork Line Width"))},o.prototype.prepareLayout=function(){var t,e,i,o,n,s;for(this._table=$(document.createElement("table")),this._table.addClass("property-page"),this._table.attr("cellspacing","0"),this._table.attr("cellpadding","2"),this.addLevelEditor(null,this._linetool.properties().median,!1),t=0;t<=8;t++)e="level"+t,this.addLevelEditor($.t("Level {0}").format(t+1),this._linetool.properties()[e],!1);this.addOneColorPropertyWidget(this._table),i=$("<tr>"),i.appendTo(this._table),o=$("<input type='checkbox' class='visibility-switch'>"),$("<td>").append(o).appendTo(i),this.createLabeledCell("Background",o).appendTo(i),n=f(),$('<td colspan="3">').append(n).appendTo(i),s=$("<select><option value='0'>"+$.t("Original")+"</option><option value='3'>"+$.t("Schiff")+"</option><option value='1'>"+$.t("Modified Schiff")+"</option><option value='2'>"+$.t("Inside")+"</option></select>"),i=$("<tr>"),i.appendTo(this._table),$("<td>"+$.t("Style")+"</td>").appendTo(i),$("<td>").append(s).appendTo(i),this.bindControl(new h(s,this._linetool.properties().style,parseInt,(!0),this.model(),"Change Pitchfork Style")),this.bindControl(new r(o,this._linetool.properties().fillBackground,(!0),this.model(),"Change Pitchfork Background Visibility")),this.bindControl(new c(n,this._linetool.properties().transparency,(!0),this.model(),"Change Pitchfork Background Transparency")),this.loadData()},o.prototype.widget=function(){return this._table},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i),this.prepareLayout()}var n=i(294),s=i(295),r=s.BooleanBinder,a=s.FloatBinder,l=s.ColorBinding,h=s.SimpleComboBinder,c=s.SliderBinder,d=i(50),p=d.addColorPicker,u=d.createLineStyleEditor,_=d.createLineWidthEditor,f=d.createTransparencyEditor;inherit(o,n),o.prototype.addLevelEditor=function(t,e,i){var o,n,s,d,f,g,m,v,y,w,b=$("<tr>");b.appendTo(this._table),t?(o=$("<td>"),o.appendTo(b),n=$("<input type='checkbox' class='visibility-switch'>"),n.appendTo(o),s=$("<td>"),s.appendTo(b),d=$("<input type='text'>"),d.appendTo(s),d.css("width","70px"),this.bindControl(new r(n,e.visible,(!0),this.model(),"Change Pitchfork Line Visibility")),
this.bindControl(new a(d,e.coeff,(!1),this.model(),"Change Pitchfork Line Coeff"))):$("<td colspan='2'>"+$.t("Median")+"</td>").appendTo(b),f=$("<td class='colorpicker-cell'>"),f.appendTo(b),g=p(f),m=$("<td>"),m.appendTo(b),v=_(),v.appendTo(m),y=$("<td>"),y.appendTo(b),w=u(),w.render().appendTo(y),this.bindControl(new l(g,e.color,(!0),this.model(),"Change Pitchfork Line Color"),0),this.bindControl(new h(w,e.linestyle,parseInt,(!0),this.model(),"Change Pitchfan Line Style")),this.bindControl(new c(v,e.linewidth,(!0),this.model(),"Change Pitchfan Line Width"))},o.prototype.prepareLayout=function(){var t,e,i,o,n;for(this._table=$(document.createElement("table")),this._table.addClass("property-page"),this._table.attr("cellspacing","0"),this._table.attr("cellpadding","2"),this.addLevelEditor(null,this._linetool.properties().median,!1),t=0;t<=8;t++)e="level"+t,this.addLevelEditor($.t("Level {0}").format(t+1),this._linetool.properties()[e],!1);this.addOneColorPropertyWidget(this._table),i=$("<tr>"),i.appendTo(this._table),o=$("<input type='checkbox' class='visibility-switch'>"),$("<td>").append(o).appendTo(i),this.createLabeledCell($.t("Background"),o).appendTo(i),n=f(),$('<td colspan="3">').append(n).appendTo(i),this.bindControl(new r(o,this._linetool.properties().fillBackground,(!0),this.model(),"Change Pitchfan Background Visibility")),this.bindControl(new c(n,this._linetool.properties().transparency,(!0),this.model(),"Change Pitchfan Background Transparency")),this.loadData()},o.prototype.widget=function(){return this._table},t.exports=o},function(t,e,i){"use strict";function o(t,e){this._chartWidget=t,this._undoModel=e}function n(t,e,i){s.call(this,t,e,i),this.prepareLayout()}var s=i(294),r=i(295),a=r.SimpleStringBinder,l=r.SimpleComboBinder,h=r.ColorBinding,c=r.BooleanBinder,d=i(50).setAbsolutePos;o.prototype.attachSource=function(t,e){this._source=t,this._edit=$("<textarea>"),this._edit.css("width","300"),this._edit.css("height","150"),this._edit.appendTo(this._chartWidget._jqMainDiv),d(this._edit,e),this._edit.val(t.properties().text.value()),this._edit.focus();var i=this._edit;return i.select(),this._binding=new a(i,t.properties().text,null,(!0),this._undoModel,"change line tool text"),this._edit.focusout(function(){t.properties().text.setValue(i.val())}),this._edit.mousedown(function(t){return!0}),i},inherit(n,s),n.prototype.prepareLayout=function(){var t,e,i,o,n=this.createColorPicker(),s=this.createColorPicker(),r=this.createFontSizeEditor(),d=this.createFontEditor(),p=this.createTextEditor(350,200),u=this.createColorPicker(),_=$('<input type="checkbox" class="visibility-switch">'),f=$('<input type="checkbox" class="visibility-switch">'),g=$('<input type="checkbox">'),m=$('<span class="_tv-button _tv-button-fontstyle"><span class="icon-fontstyle-bold"></span></span>'),v=$('<span class="_tv-button _tv-button-fontstyle"><span class="icon-fontstyle-italic"></span></span>');this.bindControl(new h(n,this._linetool.properties().color,(!0),this.model(),"Change Text Color")),this.bindControl(new l(r,this._linetool.properties().fontsize,parseInt,(!0),this.model(),"Change Text Font Size")),this.bindControl(new l(d,this._linetool.properties().font,null,(!0),this.model(),"Change Text Font")),this.bindControl(new a(p,this._linetool.properties().text,null,(!0),this.model(),"Change Text")),this.bindControl(new h(u,this._linetool.properties().backgroundColor,(!0),this.model(),"Change Text Background",this._linetool.properties().backgroundTransparency)),this.bindControl(new c(_,this._linetool.properties().fillBackground,(!0),this.model(),"Change Text Background Fill")),this.bindControl(new c(f,this._linetool.properties().drawBorder,(!0),this.model(),"Change Text Border")),this.bindControl(new h(s,this._linetool.properties().borderColor,(!0),this.model(),"Change Text Border Color")),this.bindControl(new c(g,this._linetool.properties().wordWrap,(!0),this.model(),"Change Text Wrap")),this.bindControl(new c(m,this._linetool.properties().bold,(!0),this.model(),"Change Text Font Bold")),this.bindControl(new c(v,this._linetool.properties().italic,(!0),this.model(),"Change Text Font Italic")),t=$('<table class="property-page" cellspacing="0" cellpadding="2">'),e=$('<table class="property-page" cellspacing="0" cellpadding="2">'),i=$('<table class="property-page" cellspacing="0" cellpadding="2">'),this._table=t.add(i).add(e),$(document.createElement("tr")).append($(document.createElement("td")).attr({width:1}).append(n)).append($(document.createElement("td")).attr({width:1}).append(d)).append($(document.createElement("td")).attr({width:1}).append(r)).append($(document.createElement("td")).attr({width:1}).append(m)).append($(document.createElement("td")).append(v)).appendTo(t),$(document.createElement("tr")).append($(document.createElement("td")).attr({colspan:5}).append(p)).appendTo(t),o=this.addLabeledRow(e,$.t("Text Wrap"),g),$("<td>").append(g).prependTo(o),o=this.addLabeledRow(i,$.t("Background"),_),$("<td>").append(_).prependTo(o),$("<td>").append(u).appendTo(o),o=this.addLabeledRow(i,$.t("Border"),f),$("<td>").append(f).prependTo(o),$("<td>").append(s).appendTo(o),this.loadData(),setTimeout(function(){p.select(),p.focus()},20)},n.prototype.widget=function(){return this._table},n.prototype.dialogPosition=function(t,e){var i,o,n,s,r,a,l,h=5,c=0,d=this._linetool,p=d._model.paneForSource(d),u=this._model._chartWidget;return $.each(u.paneWidgets(),function(t,e){if(e._state==p)return c=$(e.canvas).offset().top,!1}),t||(t={}),o=t.left,n=t.top,s=(this._linetool.paneViews()||[])[0],s&&(i=s._floatPoints[0]),i&&(o=i.x,n=i.y+c),r=$(e).outerHeight(),a=$(window).height(),l=d.properties().fontsize.value(),n=n+r+l+h<=a?n+l+h:n-r-h,{top:n,left:o}},t.exports=n},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i),this.prepareLayout()}var n=i(294),s=i(295),r=s.ColorBinding,a=s.BooleanBinder,l=s.SliderBinder,h=i(50).createLineWidthEditor;inherit(o,n),o.prototype.prepareLayout=function(){var t,e,i,o,n;this._table=$(document.createElement("table")),this._table.addClass("property-page"),this._table.attr("cellspacing","0"),this._table.attr("cellpadding","2"),t=h(),e=this.createColorPicker(),i=this.addLabeledRow(this._table,"Border"),i.prepend("<td>"),$("<td>").append(e).appendTo(i),$("<td>").append(t).appendTo(i),o=$('<input type="checkbox" class="visibility-switch">'),n=this.createColorPicker(),i=this.addLabeledRow(this._table,"Background",o),$("<td>").append(o).prependTo(i),$("<td>").append(n).appendTo(i),this.bindControl(new a(o,this._linetool.properties().fillBackground,(!0),this.model(),"Change Rectangle Filling")),this.bindControl(new r(e,this._linetool.properties().color,(!0),this.model(),"Change Rectangle Line Color")),this.bindControl(new r(n,this._linetool.properties().backgroundColor,(!0),this.model(),"Change Rectangle Background Color",this._linetool.properties().transparency)),this.bindControl(new l(t,this._linetool.properties().linewidth,(!0),this.model(),"Change Rectangle Border Width")),this.loadData()},o.prototype.widget=function(){return this._table},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i),this.prepareLayout()}var n=i(294),s=i(295),r=s.BooleanBinder,a=s.ColorBinding,l=s.SliderBinder,h=i(50).createLineWidthEditor;inherit(o,n),o.prototype.prepareLayout=function(){var t,e,i,o,n,s;this._table=$(document.createElement("table")),this._table.addClass("property-page"),this._table.attr("cellspacing","0"),this._table.attr("cellpadding","2"),t=h(),e=this.createColorPicker(),i=this.addLabeledRow(this._table,$.t("Border")),i.prepend("<td>"),$("<td>").append(e).appendTo(i),$("<td>").append(t).appendTo(i),o=$('<input type="checkbox" class="visibility-switch">'),n=this.createColorPicker(),i=this.addLabeledRow(this._table,$.t("Background"),o),$("<td>").append(o).prependTo(i),$("<td>").append(n).appendTo(i),s=this._linetool.properties().fillBackground,this.bindControl(new r(o,this._linetool.properties().fillBackground,(!0),this.model(),"Change Ellipse Filling")),this.bindControl(new a(e,this._linetool.properties().color,(!0),this.model(),"Change Ellipse Line Color")),this.bindControl(new a(n,this._linetool.properties().backgroundColor,(!0),this.model(),"Change Ellipse Background Color",this._linetool.properties().transparency)),this.bindControl(new l(t,this._linetool.properties().linewidth,(!0),this.model(),"Change Ellipse Border Width")),this.loadData()},o.prototype.widget=function(){return this._table},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i),this.prepareLayout()}var n=i(294),s=i(295),r=s.BooleanBinder,a=s.ColorBinding,l=s.SliderBinder,h=i(50).createLineWidthEditor;inherit(o,n),o.prototype.prepareLayout=function(){var t,e,i,o,n,s;this._table=$(document.createElement("table")),this._table.addClass("property-page"),this._table.attr("cellspacing","0"),this._table.attr("cellpadding","2"),t=h(),e=this.createColorPicker(),i=this.addLabeledRow(this._table,"Border"),i.prepend("<td>"),$("<td>").append(e).appendTo(i),$("<td>").append(t).appendTo(i),o=$('<input type="checkbox" class="visibility-switch">'),n=this.createColorPicker(),i=this.addLabeledRow(this._table,"Background",o),$("<td>").append(o).prependTo(i),$("<td>").append(n).appendTo(i),s=this._linetool.properties().fillBackground,this.bindControl(new r(o,this._linetool.properties().fillBackground,(!0),this.model(),"Change Arc Filling")),this.bindControl(new a(e,this._linetool.properties().color,(!0),this.model(),"Change Arc Line Color")),this.bindControl(new a(n,this._linetool.properties().backgroundColor,(!0),this.model(),"Change Arc Background Color",this._linetool.properties().transparency)),this.bindControl(new l(t,this._linetool.properties().linewidth,(!0),this.model(),"Change Arc Border Width")),this.loadData()},o.prototype.widget=function(){return this._table},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i),this.prepareLayout()}var n=i(294),s=i(295),r=s.BooleanBinder,a=s.ColorBinding,l=s.SliderBinder,h=i(50).createLineWidthEditor;inherit(o,n),o.prototype.prepareLayout=function(){var t,e,i,o,n;this._table=$(document.createElement("table")),this._table.addClass("property-page"),this._table.attr("cellspacing","0"),this._table.attr("cellpadding","2"),t=h(),e=this.createColorPicker(),i=this.addLabeledRow(this._table,$.t("Border")),i.prepend("<td>"),$("<td>").append(e).appendTo(i),$("<td>").append(t).appendTo(i),o=$('<input type="checkbox" class="visibility-switch">'),n=this.createColorPicker(),i=this.addLabeledRow(this._table,$.t("Background"),o),$("<td>").append(o).prependTo(i),$("<td>").append(n).appendTo(i),this.bindControl(new r(o,this._linetool.properties().fillBackground,(!0),this.model(),"Change Triangle Filling")),this.bindControl(new a(e,this._linetool.properties().color,(!0),this.model(),"Change Triangle Line Color")),this.bindControl(new a(n,this._linetool.properties().backgroundColor,(!0),this.model(),"Change Triangle Background Color",this._linetool.properties().transparency)),this.bindControl(new l(t,this._linetool.properties().linewidth,(!0),this.model(),"Change Triangle Border Width")),this.loadData()},o.prototype.widget=function(){return this._table},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i),this.prepareLayout()}var n=i(294),s=i(295),r=s.BooleanBinder,a=s.ColorBinding,l=s.SimpleComboBinder,h=s.SliderBinder,c=i(50),d=c.createLineStyleEditor,p=c.createLineWidthEditor;inherit(o,n),o.prototype.prepareLayout=function(){var t,e,i,o,n,s,c,u,_,f,g,m,v,y,w,b,S;this._table=$(document.createElement("table")),this._table.addClass("property-page"),this._table.attr("cellspacing","0"),this._table.attr("cellpadding","2"),t=$("<tbody>").appendTo(this._table),e=p(),i=d(),o=this.createColorPicker(),n=$("<tr>").appendTo(t),$("<td></td><td>"+$.t("Channel")+"</td>").appendTo(n),$("<td>").append(o).appendTo(n),$("<td>").append(e).appendTo(n),$("<td>").append(i.render()).appendTo(n),n=$("<tr>").appendTo(t),s=$("<td>").appendTo(n),c=$("<input type='checkbox' class='visibility-switch'>"),c.appendTo(s),this.createLabeledCell("Middle",c).appendTo(n),u=p(),_=d(),f=this.createColorPicker(),$("<td>").append(f).appendTo(n),$("<td>").append(u).appendTo(n),$("<td>").append(_.render()).appendTo(n),n=$("<tr>").appendTo(t),g=$("<td>").appendTo(n),m=$("<input type='checkbox' class='visibility-switch'>"),m.appendTo(g),this.createLabeledCell("Background",m).appendTo(n),v=this.createColorPicker(),$("<td>").append(v).appendTo(n),y=$("<tbody>").appendTo(this._table),w=this.addEditorRow(y,"Extend Left",$("<input type='checkbox'>"),2),b=this.addEditorRow(y,"Extend Right",$("<input type='checkbox'>"),2),S=this._linetool.properties(),this.bindControl(new r(m,S.fillBackground,(!0),this.model(),"Change Parallel Channel Fill Background")),this.bindControl(new r(c,S.showMidline,(!0),this.model(),"Change Parallel Channel Show Center Line")),this.bindControl(new r(w,S.extendLeft,(!0),this.model(),"Change Parallel Channel Extending Left")),this.bindControl(new r(b,S.extendRight,(!0),this.model(),"Change Parallel Channel Extending Right")),this.bindControl(new a(o,S.linecolor,(!0),this.model(),"Change Parallel Channel Color")),this.bindControl(new l(i,S.linestyle,parseInt,(!0),this.model(),"Change Parallel Channel Style")),this.bindControl(new h(e,S.linewidth,(!0),this.model(),"Change Parallel Channel Width")),this.bindControl(new a(f,S.midlinecolor,(!0),this.model(),"Change Parallel Channel Middle Color")),this.bindControl(new l(_,S.midlinestyle,parseInt,(!0),this.model(),"Change Parallel Channel Middle Style")),this.bindControl(new h(u,S.midlinewidth,(!0),this.model(),"Change Parallel Channel Middle Width")),this.bindControl(new a(v,S.backgroundColor,(!0),this.model(),"Change Parallel Channel Back Color",S.transparency)),this.loadData()},o.prototype.widget=function(){return this._table},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i),this.prepareLayout()}var n=i(294),s=i(295),r=s.SimpleStringBinder,a=s.ColorBinding,l=s.SimpleComboBinder;inherit(o,n),o.prototype.prepareLayout=function(){var t,e,i,o,n;this._table=$('<table class="property-page" cellspacing="0" cellpadding="2">').css({width:"100%"}),t=$("<input type='text'>").css({width:"100%"}),e=$('<div class="property-page-fullwidth-wrapper">').append(t),i=this.createColorPicker(),o=this.createFontEditor(),n=$("<tr>").appendTo(this._table),$("<td>").css({width:"0"}).html($.t("Text")).appendTo(n),$('<td colspan="2">').append(e).appendTo(n),n=this.addLabeledRow(this._table,"Text Font"),n.children().css({whiteSpace:"nowrap"}),$("<td>").append(i).appendTo(n).css({width:"0"}),$("<td>").append(o).appendTo(n),this.bindControl(new a(i,this._linetool.properties().color,(!0),this.model(),"Change Arrow Mark Text Color")),this.bindControl(new r(t,this._linetool.properties().text,null,(!0),this.model(),"Change Arrow Mark Text")),this.bindControl(new l(o,this._linetool.properties().font,null,(!0),this.model(),"Change Arrow Mark Font")),this.loadData(),setTimeout(function(){t.select(),t.focus()},20)},o.prototype.widget=function(){return this._table},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i),this.prepareLayout()}var n=i(294),s=i(295),r=s.SimpleComboBinder,a=s.ColorBinding;inherit(o,n),o.prototype.prepareLayout=function(){var t,e,i,o,n;this._table=$(document.createElement("table")),this._table.addClass("property-page"),this._table.attr("cellspacing","0"),this._table.attr("cellpadding","2"),t=this.createColorPicker(),e=this.createFontSizeEditor(),i=this.createColorPicker(),o=this.createColorPicker(),n=this.addLabeledRow(this._table,$.t("Text")),$("<td>").append(t).appendTo(n),$("<td>").append(e).appendTo(n),n=this.addLabeledRow(this._table,$.t("Background")),$("<td>").append(i).appendTo(n),n=this.addLabeledRow(this._table,$.t("Border")),$("<td>").append(o).appendTo(n),this.bindControl(new a(t,this._linetool.properties().color,(!0),this.model(),"Change Price Text Color")),this.bindControl(new r(e,this._linetool.properties().fontsize,parseInt,(!0),this.model(),"Change Price Text Font Size")),this.bindControl(new a(i,this._linetool.properties().backgroundColor,(!0),this.model(),"Change Background Color",this._linetool.properties().transparency)),this.bindControl(new a(o,this._linetool.properties().borderColor,(!0),this.model(),"Change Border Color")),this.loadData()},o.prototype.widget=function(){return this._table},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i),this.prepareLayout()}var n=i(294),s=i(295),r=s.SimpleComboBinder,a=s.ColorBinding,l=s.SimpleStringBinder;inherit(o,n),o.prototype.prepareLayout=function(){var t,e,o,n,s,h,c,d,p=i(291),u=$('<table class="property-page" cellspacing="0" cellpadding="0">').css({width:"100%"}).data("layout-tab-open",p.TAB_OPEN_OVERRIDE),_=$('<table class="property-page" cellspacing="0" cellpadding="0">');this._table=u.add(_),t=$("<input type='text'>").css({width:"100%"}),e=this.createColorPicker(),o=this.createFontSizeEditor(),n=this.createColorPicker(),s=this.createColorPicker(),h=$("<tr>").appendTo(u),c=$('<div class="property-page-fullwidth-wrapper">').append(t),$("<td>").append(c).appendTo(h),d=this.addLabeledRow(_,$.t("Text")),$("<td>").append(e).appendTo(d),$("<td>").append(o).appendTo(d),d=this.addLabeledRow(_,$.t("Background")),$("<td>").appendTo(d).append(n),d=this.addLabeledRow(_,$.t("Border")),$("<td>").appendTo(d).append(s),$("<td>"),this.bindControl(new l(t,this._linetool.properties().text,null,(!0),this.model(),"Change Balloon Text")),this.bindControl(new a(e,this._linetool.properties().color,(!0),this.model(),"Change Balooon Text Color")),this.bindControl(new r(o,this._linetool.properties().fontsize,parseInt,(!0),this.model(),"Change Balloon Text Font Size")),this.bindControl(new a(n,this._linetool.properties().backgroundColor,(!0),this.model(),"Change Balloon Background Color",this._linetool.properties().transparency)),this.bindControl(new a(s,this._linetool.properties().borderColor,(!0),this.model(),"Change Balloon Border Color")),this.loadData(),setTimeout(function(){t.select(),t.focus()},0)},o.prototype.widget=function(){return this._table},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i),this.prepareLayout()}var n=i(294),s=i(295),r=s.SliderBinder,a=s.BooleanBinder,l=s.ColorBinding,h=s.SimpleComboBinder,c=i(50).createLineWidthEditor;inherit(o,n),o.prototype.prepareLayout=function(){var t,e,i,o,n,s,d,p;this._table=$('<table class="property-page" cellspacing="0" cellpadding="2">'),t=c(),e=this.createColorPicker(),i=$('<input type="checkbox" class="visibility-switch">'),o=this.createColorPicker(),n=this.addLabeledRow(this._table,"Line"),$("<td>").prependTo(n),$("<td>").append(e).appendTo(n),$("<td>").append(t).appendTo(n),n=this.addLabeledRow(this._table,"Background",i),$("<td>").append(i).prependTo(n),$("<td>").append(o).appendTo(n),s=$("<tbody>").appendTo(this._table),d=$("<select><option value='0'>"+$.t("Normal")+"</option><option value='1'>"+$.t("Arrow")+"</option></select>"),p=$("<select><option value='0'>"+$.t("Normal")+"</option><option value='1'>"+$.t("Arrow")+"</option></select>"),n=this.addLabeledRow(s,$.t("Left End")),$("<td>").prependTo(n),$('<td colspan="3">').appendTo(n).append(d),n=this.addLabeledRow(s,$.t("Right End")),$("<td>").prependTo(n),$('<td colspan="3">').appendTo(n).append(p),this.bindControl(new l(e,this._linetool.properties().linecolor,(!0),this.model(),"Change Brush Color")),this.bindControl(new r(t,this._linetool.properties().linewidth,(!0),this.model(),"Change Brush Line Width")),this.bindControl(new a(i,this._linetool.properties().fillBackground,(!0),this.model(),"Change Brush Filling")),this.bindControl(new l(o,this._linetool.properties().backgroundColor,(!0),this.model(),"Change Brush Background Color",this._linetool.properties().transparency)),this.bindControl(new h(d,this._linetool.properties().leftEnd,parseInt,(!0),this.model(),"Change Trend Line Left End")),this.bindControl(new h(p,this._linetool.properties().rightEnd,parseInt,(!0),this.model(),"Change Trend Line Right End")),this.loadData()},o.prototype.widget=function(){return this._table},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i),this.prepareLayout()}var n=i(294),s=i(295),r=s.ColorBinding,a=s.SliderBinder,l=i(50).createLineWidthEditor;inherit(o,n),o.prototype.prepareLayout=function(){var t,e,i,o,n,s,h,c,d,p,u,_,f,g,m,v,y,w,b=$('<table class="property-page" cellspacing="0" cellpadding="2">'),S=$('<table class="property-page property-page-unpadded" cellspacing="0" cellpadding="0">').css({width:"100%"}),T=$('<table class="property-page" cellspacing="0" cellpadding="2">');this._table=b.add(S).add(T),t=this.createColorPicker(),e=l(),i=this.addLabeledRow(b,"Line"),$("<td>").append(t).appendTo(i),$("<td>").append(e).appendTo(i),o=$("<tr>").appendTo(S),n=$("<td>").appendTo(o).css({"vertical-align":"top",width:"50%"}),s=$("<td>").appendTo(o).css({"vertical-align":"top",width:"50%"}),h=$('<table class="property-page" cellspacing="0" cellpadding="0">').appendTo(n),c=$('<table class="property-page" cellspacing="0" cellpadding="0">').appendTo(s),d=this.addColorPickerRow(h,$.t("Source back color")),p=this.addColorPickerRow(h,$.t("Source text color")),u=this.addColorPickerRow(h,$.t("Source border color")),_=this.addColorPickerRow(h,$.t("Success back color")),f=this.addColorPickerRow(h,$.t("Success text color")),g=this.addColorPickerRow(c,$.t("Target back color")),m=this.addColorPickerRow(c,$.t("Target text color")),v=this.addColorPickerRow(c,$.t("Target border color")),y=this.addColorPickerRow(c,$.t("Failure back color")),w=this.addColorPickerRow(c,$.t("Failure text color")),this.bindControl(new r(t,this._linetool.properties().linecolor,(!0),this.model(),"Forecast Line Color")),this.bindControl(new a(e,this._linetool.properties().linewidth,(!0),this.model(),"Forecast Line Width")),this.bindControl(new r(t,this._linetool.properties().linecolor,(!0),this.model(),"Forecast Line Color")),this.bindControl(new a(e,this._linetool.properties().linewidth,(!0),this.model(),"Forecast Line Width")),this.bindControl(new r(d,this._linetool.properties().sourceBackColor,(!0),this.model(),"Forecast Source Background Color",this._linetool.properties().transparency)),this.bindControl(new r(u,this._linetool.properties().sourceStrokeColor,(!0),this.model(),"Forecast Source Border Color")),this.bindControl(new r(p,this._linetool.properties().sourceTextColor,(!0),this.model(),"Forecast Source Text Color")),this.bindControl(new r(g,this._linetool.properties().targetBackColor,(!0),this.model(),"Forecast Target Background Color")),this.bindControl(new r(v,this._linetool.properties().targetStrokeColor,(!0),this.model(),"Forecast Target Border Color")),this.bindControl(new r(m,this._linetool.properties().targetTextColor,(!0),this.model(),"Forecast Target Text Color")),this.bindControl(new r(_,this._linetool.properties().successBackground,(!0),this.model(),"Forecast Success Back Color")),this.bindControl(new r(f,this._linetool.properties().successTextColor,(!0),this.model(),"Forecast Success Text Color")),this.bindControl(new r(y,this._linetool.properties().failureBackground,(!0),this.model(),"Forecast Failure Back Color")),this.bindControl(new r(w,this._linetool.properties().failureTextColor,(!0),this.model(),"Forecast Failure Text Color")),this.loadData()},o.prototype.widget=function(){return this._table},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i),this.prepareLayout()}var n=i(294),s=i(295),r=s.BooleanBinder,a=s.ColorBinding,l=s.SliderBinder,h=i(50).createLineWidthEditor;inherit(o,n),o.prototype.prepareLayout=function(){var t,e,i,o,n,s;this._table=$(document.createElement("table")),this._table.addClass("property-page"),this._table.attr("cellspacing","0"),this._table.attr("cellpadding","2"),t=h(),e=this.createColorPicker(),i=this.addLabeledRow(this._table,"Border"),i.prepend("<td>"),$("<td>").append(e).appendTo(i),$("<td>").append(t).appendTo(i),o=$('<input type="checkbox" class="visibility-switch">'),n=this.createColorPicker(),i=this.addLabeledRow(this._table,"Background",o),$("<td>").append(o).prependTo(i),$("<td>").append(n).appendTo(i),s=this._linetool.properties().fillBackground,this.bindControl(new r(o,this._linetool.properties().fillBackground,(!0),this.model(),"Change Polyline Filling")),this.bindControl(new a(e,this._linetool.properties().linecolor,(!0),this.model(),"Change Polyline Line Color")),this.bindControl(new a(n,this._linetool.properties().backgroundColor,(!0),this.model(),"Change Polyline Background Color",this._linetool.properties().transparency)),this.bindControl(new l(t,this._linetool.properties().linewidth,(!0),this.model(),"Change Polyline Border Width")),this.loadData()},o.prototype.widget=function(){return this._table},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i),this.prepareLayout()}var n=i(294),s=i(295),r=s.BooleanBinder,a=s.FloatBinder,l=s.ColorBinding,h=s.SliderBinder,c=i(50),d=c.addColorPicker,p=c.createTransparencyEditor;inherit(o,n),o.prototype.addLevelEditor=function(t,e,i){var o,n,s,h,c,p,u=$("<tr>");u.appendTo(t),o=$("<td>"),o.appendTo(u),n=$("<input type='checkbox' class='visibility-switch'>"),n.appendTo(o),s=$("<td>"),s.appendTo(u),h=$("<input type='text'>"),h.appendTo(s),h.css("width","70px"),this.bindControl(new r(n,i.visible,(!0),this.model(),"Change Gann Square Line Visibility")),this.bindControl(new a(h,i.coeff,(!1),this.model(),"Change Pitchfork Line Coeff")),c=$("<td class='colorpicker-cell'>"),c.appendTo(u),p=d(c),this.bindControl(new l(p,i.color,(!0),this.model(),"Change Gann Square Line Color",0))},o.prototype.prepareLayout=function(){var t,e,i,o,n,s,a,l,c,d,u,_,f,g,m,v,y,w,b;for(this._table=$(document.createElement("table")),this._table.addClass("property-page property-page-unpadded"),this._table.attr("cellspacing","0"),this._table.attr("cellpadding","2"),this._table.css({width:"100%"}),t=$("<tbody>").appendTo(this._table),e=$("<tr>"),e.appendTo(t),i=$('<td width="50%">'),i.appendTo(e),o=$('<td width="50%">'),o.appendTo(e),n=$('<table cellspacing="0" cellpadding="2">'),n.appendTo(i),n.addClass("property-page"),s=$('<table cellspacing="0" cellpadding="2">'),s.appendTo(o),s.addClass("property-page"),$("<tr><td align='center' colspan='4'>"+$.t("Price Levels")+"</td></tr>").appendTo(n),$("<tr><td align='center' colspan='4'>"+$.t("Time Levels")+"</td></tr>").appendTo(s),a=1;a<=7;a++)l="hlevel"+a,this.addLevelEditor(n,$.t("Level {0}").format(a),this._linetool.properties()[l]);for(a=1;a<=7;a++)l="vlevel"+a,this.addLevelEditor(s,$.t("Level {0}").format(a),this._linetool.properties()[l]);this.addOneColorPropertyWidget(n),o.css({"vertical-align":"top"}),c=$("<input type='checkbox' class='visibility-switch'>"),d=$("<input type='checkbox' class='visibility-switch'>"),u=$("<input type='checkbox' class='visibility-switch'>"),_=$("<input type='checkbox' class='visibility-switch'>"),f=$('<table class="property-page property-page-unpadded" cellspacing="0" cellpadding="0">').css({width:"100%"}),g=$("<tr>").appendTo(f),m=$('<table class="property-page" cellspacing="0" cellpadding="0">').appendTo($("<td>").css({width:"50%"}).appendTo(g)),v=$('<table class="property-page" cellspacing="0" cellpadding="0">').appendTo($("<td>").css({width:"50%"}).appendTo(g)),y=this.addLabeledRow(m,$.t("Left Labels"),c),$("<td>").append(c).prependTo(y),y=this.addLabeledRow(v,$.t("Right Labels"),d),$("<td>").append(d).prependTo(y),y=this.addLabeledRow(m,$.t("Top Labels"),u),$("<td>").append(u).prependTo(y),y=this.addLabeledRow(v,$.t("Bottom Labels"),_),$("<td>").append(_).prependTo(y),this.bindControl(new r(c,this._linetool.properties().showLeftLabels,(!0),this.model(),"Change Gann Square Left Labels Visibility")),this.bindControl(new r(d,this._linetool.properties().showRightLabels,(!0),this.model(),"Change Gann Square Right Labels Visibility")),this.bindControl(new r(u,this._linetool.properties().showTopLabels,(!0),this.model(),"Change Gann Square Top Labels Visibility")),this.bindControl(new r(_,this._linetool.properties().showBottomLabels,(!0),this.model(),"Change Gann Square Bottom Labels Visibility")),this._table=this._table.add(f),y=$("<tr>"),y.appendTo(m),w=$("<input type='checkbox' class='visibility-switch'>"),$("<td>").append(w).appendTo(y),b=p(),$("<td>").append(b).appendTo(y),this.bindControl(new r(w,this._linetool.properties().fillHorzBackground,(!0),this.model(),"Change Gann Square Background Visibility")),this.bindControl(new h(b,this._linetool.properties().horzTransparency,(!0),this.model(),"Change Gann Square Background Transparency")),y=$("<tr>"),y.appendTo(v),w=$("<input type='checkbox' class='visibility-switch'>"),$("<td>").append(w).appendTo(y),b=p(),$("<td>").append(b).appendTo(y),this.bindControl(new r(w,this._linetool.properties().fillVertBackground,(!0),this.model(),"Change Gann Square Background Visibility")),this.bindControl(new h(b,this._linetool.properties().vertTransparency,(!0),this.model(),"Change Gann Square Background Transparency")),this.loadData()},o.prototype.widget=function(){return this._table},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i),this.prepareLayout()}var n=i(294),s=i(295),r=s.BooleanBinder,a=s.SliderBinder,l=s.ColorBinding,h=i(50),c=h.addColorPicker,d=h.createLineWidthEditor,p=h.createTransparencyEditor;inherit(o,n),o.prototype.addOneColorPropertyWidget=function(t){var e=this.createOneColorForAllLinesWidget(),i=$("<tr>");i.append($("<td>")).append($("<td>")).append(e.editor).append($("<td>").append(e.label)),i.appendTo(t)},o.prototype.prepareLayout=function(){var t,e,i,o,n,s,h,u,_,f,g,m,v,y,w,b,S,T,C,x,P,L,k,E,I,A,V;this._table=$(document.createElement("table")),this._table.addClass("property-page property-page-unpadded"),this._table.attr("cellspacing","0"),this._table.attr("cellpadding","2"),this._table.css({width:"100%"}),t=$("<tr>"),t.appendTo(this._table),e=this._linetool.properties(),i=$("<table>"),$("<td valign='top'>").append(i).appendTo(t),o=$("<tr>"),$("<td colspan='3'>"+$.t("Levels")+"</td>").appendTo(o),o.appendTo(i);for(n in e.levels._childs)s=e.levels[n],h=$("<tr>"),h.appendTo(i),$("<td>"+n+"</td>").appendTo(h),u=$("<input type='checkbox' class='visibility-switch'>"),$("<td>").append(u).appendTo(h),_=$("<td class='colorpicker-cell'>"),_.appendTo(h),f=c(_),g=$("<td>"),g.appendTo(h),m=d(),m.appendTo(g),this.bindControl(new r(u,s.visible,(!0),this.model(),"Change Gann Line Visibility")),this.bindControl(new l(f,s.color,(!0),this.model(),"Change Gann Line Color",0)),this.bindControl(new a(m,s.width,(!0),this.model(),"Change Gann Line Width"));v=function(){var t=$("<select><option value='0'>0</option><option value='1'>1</option><option value='2'>2</option><option value='3'>3</option><option value='4'>4</option><option value='5'>5</option></select>");return t},y=$("<table>"),$("<td valign='top'>").append(y).appendTo(t),w=$("<tr>"),$("<td colspan='4'>"+$.t("Fans")+"</td>").appendTo(w),w.appendTo(y);for(n in e.fanlines._childs)b=e.fanlines[n],S=$("<tr>"),S.appendTo(y),u=$("<input type='checkbox' class='visibility-switch'>"),$("<td>").append(u).appendTo(S),T=b.x.value()+"x"+b.y.value(),$("<td>"+T+"</td>").appendTo(S),_=$("<td class='colorpicker-cell'>"),_.appendTo(S),f=c(_),g=$("<td>"),g.appendTo(S),m=d(),m.appendTo(g),this.bindControl(new r(u,b.visible,(!0),this.model(),"Change Gann Line Visibility")),this.bindControl(new l(f,b.color,(!0),this.model(),"Change Gann Fan Color",0)),this.bindControl(new a(m,b.width,(!0),this.model(),"Change Gann Line Width"));C=$("<table>"),$("<td valign='top'>").append(C).appendTo(t),x=$("<tr>"),$("<td colspan='4'>"+$.t("Arcs")+"</td>").appendTo(x),x.appendTo(C);for(n in e.arcs._childs)P=e.arcs[n],L=$("<tr>"),L.appendTo(C),u=$("<input type='checkbox' class='visibility-switch'>"),$("<td>").append(u).appendTo(L),T=P.x.value()+"x"+P.y.value(),$("<td>"+T+"</td>").appendTo(L),
_=$("<td class='colorpicker-cell'>"),_.appendTo(L),f=c(_),g=$("<td>"),g.appendTo(L),m=d(),m.appendTo(g),this.bindControl(new r(u,P.visible,(!0),this.model(),"Change Gann Line Visibility")),this.bindControl(new l(f,P.color,(!0),this.model(),"Change Gann Arc Color",0)),this.bindControl(new a(m,P.width,(!0),this.model(),"Change Gann Line Width"));this.addOneColorPropertyWidget(C),k=$("<tbody>").appendTo(this._table),E=$('<input type="checkbox" class="visibility-switch">'),I=p(),A=$("<tr>").appendTo(k),V=$("<table>"),$('<td colspan="3">').append(V).appendTo(A),A=$("<tr>").appendTo(V),$("<td>"+$.t("Background")+"</td>").appendTo(A),$("<td>").append(E).appendTo(A),$("<td>").append(I).appendTo(A),this.bindControl(new r(E,this._linetool.properties().arcsBackground.fillBackground,(!0),this.model(),"Change Gann Square Filling")),this.bindControl(new a(I,this._linetool.properties().arcsBackground.transparency,(!0),this.model(),"Change Gann Square Background Transparency"))},o.prototype.widget=function(){return this._table},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i),this.prepareLayout()}var n=i(294),s=i(295),r=s.BooleanBinder,a=s.ColorBinding,l=s.SimpleComboBinder,h=s.SliderBinder,c=i(50),d=c.addColorPicker,p=c.createLineStyleEditor,u=c.createLineWidthEditor,_=c.createTransparencyEditor;inherit(o,n),o.prototype.addLevelEditor=function(t,e,i,o){var n,s,c,_,f,g,m,v,y,w,b=$("<tr>");b.appendTo(this._tbody),n="control-level-"+i+"-"+o,s=$("<td>"),s.appendTo(b),c=$("<input type='checkbox' class='visibility-switch' id='"+n+"'>"),c.appendTo(s),_=this.createLabeledCell(t).appendTo(b),_.find("label").attr("for",n),f=$("<td class='colorpicker-cell'>"),f.appendTo(b),g=d(f),m=$("<td>"),m.appendTo(b),v=u(),v.appendTo(m),y=$("<td>"),y.appendTo(b),w=p(),w.render().appendTo(y),this.bindControl(new r(c,e.visible,(!0),this.model(),"Change Gann Fan Line Visibility")),this.bindControl(new a(g,e.color,(!0),this.model(),"Change Gann Fan Line Color",0)),this.bindControl(new l(w,e.linestyle,parseInt,(!0),this.model(),"Change Gann Fan Line Style")),this.bindControl(new h(v,e.linewidth,(!0),this.model(),"Change Gann Fan Line Width"))},o.prototype.prepareLayout=function(){var t,e,i,o,n,s,a,l,c,d,p=$('<table class="property-page" cellspacing="0" cellpadding="2">'),u=$('<table class="property-page" cellspacing="0" cellpadding="2">');for(this._tbody=$("<tbody>").appendTo(p),t=1;t<=9;t++)e="level"+t,i=this._linetool.properties()[e],o=i.coeff1.value(),n=i.coeff2.value(),s="<sup>"+o+"</sup>&frasl;<sub>"+n+"</sub>",this.addLevelEditor(s,i,o,n);this.addOneColorPropertyWidget(this._tbody),a=$("<input type='checkbox' class='visibility-switch'>"),l=this.addLabeledRow(u,$.t("Labels"),a),$("<td>").append(a).prependTo(l),this.bindControl(new r(a,this._linetool.properties().showLabels,(!0),this.model(),"Change Gann Fan Labels Visibility")),this._table=p.add(u),l=$("<tr>"),l.appendTo(this._table),c=$("<input type='checkbox' class='visibility-switch'>"),$("<td>").append(c).appendTo(l),this.createLabeledCell($.t("Background"),c).appendTo(l),d=_(),$('<td colspan="3">').append(d).appendTo(l),this.bindControl(new r(c,this._linetool.properties().fillBackground,(!0),this.model(),"Change Pitchfan Background Visibility")),this.bindControl(new h(d,this._linetool.properties().transparency,(!0),this.model(),"Change Pitchfan Background Transparency")),this.loadData()},o.prototype.widget=function(){return this._table},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i),this.prepareLayout()}var n=i(294),s=i(295),r=s.FloatBinder,a=s.SimpleComboBinder,l=s.BooleanBinder,h=s.ColorBinding,c=s.SliderBinder,d=i(50),p=d.addColorPicker,u=d.createLineStyleEditor,_=d.createLineWidthEditor,f=d.createTransparencyEditor;inherit(o,n),o.prototype.addLevelEditor=function(t,e,i){var o,n,s,d,f,g,m,v,y,w,b=$("<tr>");b.appendTo(this._table),o=$("<td>"),o.appendTo(b),n=$("<input type='checkbox' class='visibility-switch'>"),n.appendTo(o),t?(s=$("<td>"),s.appendTo(b),d=$("<input type='text'>"),d.appendTo(s),d.css("width","70px"),this.bindControl(new r(d,e.coeff,(!1),this.model(),"Change Pitchfork Line Coeff"))):this.createLabeledCell("Trend Line",n).appendTo(b),f=$("<td class='colorpicker-cell'>"),f.appendTo(b),g=p(f),m=$("<td>"),m.appendTo(b),v=_(),v.appendTo(m),t||(y=$("<td>"),y.appendTo(b),w=u(),w.render().appendTo(y),this.bindControl(new a(w,e.linestyle,parseInt,(!0),this.model(),"Change Fib Circle Style"))),this.bindControl(new l(n,e.visible,(!0),this.model(),"Change Fib Circle Visibility")),this.bindControl(new h(g,e.color,(!0),this.model(),"Change Fib Circle Line Color",0)),this.bindControl(new c(v,e.linewidth,(!0),this.model(),"Change Fib Circle Width"))},o.prototype.prepareLayout=function(){var t,e,i,o,n,s,r;for(this._table=$(document.createElement("table")),this._table.addClass("property-page"),this._table.attr("cellspacing","0"),this._table.attr("cellpadding","2"),this.addLevelEditor(null,this._linetool.properties().trendline,!1),t=1;t<=11;t++)e="level"+t,this.addLevelEditor("Level "+t,this._linetool.properties()[e],!1);this.addOneColorPropertyWidget(this._table),i=$("<input type='checkbox' class='visibility-switch'>"),o=this.addLabeledRow(this._table,"Levels",i),$("<td>").append(i).prependTo(o),n=$("<input type='checkbox' class='visibility-switch'>"),o=this.addLabeledRow(this._table,"Coeffs As Percents",n),$("<td>").append(n).prependTo(o),this.bindControl(new l(i,this._linetool.properties().showCoeffs,(!0),this.model(),"Change Fib Circle Levels Visibility")),o=$("<tr>"),o.appendTo(this._table),s=$("<input type='checkbox' class='visibility-switch'>"),$("<td>").append(s).appendTo(o),this.createLabeledCell("Background",s).appendTo(o),r=f(),$('<td colspan="3">').append(r).appendTo(o),this.bindControl(new l(s,this._linetool.properties().fillBackground,(!0),this.model(),"Change Pitchfork Background Visibility")),this.bindControl(new c(r,this._linetool.properties().transparency,(!0),this.model(),"Change Pitchfork Background Transparency")),this.bindControl(new l(n,this._linetool.properties().coeffsAsPercents,(!0),this.model(),"Change Fib Retracement Coeffs As Percents")),this.loadData()},o.prototype.widget=function(){return this._table},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i),this.prepareLayout()}var n=i(294),s=i(295),r=s.FloatBinder,a=s.BooleanBinder,l=s.SliderBinder,h=s.SimpleComboBinder,c=s.ColorBinding,d=i(50),p=d.addColorPicker,u=d.createLineStyleEditor,_=d.createLineWidthEditor,f=d.createTransparencyEditor;inherit(o,n),o.prototype.addLevelEditor=function(t,e,i){var o,n,s,d,f,g,m,v,y,w,b=$("<tr>");b.appendTo(this._table),o=$("<td>"),o.appendTo(b),n=$("<input type='checkbox' class='visibility-switch'>"),n.appendTo(o),t?(s=$("<td>"),s.appendTo(b),d=$("<input type='text'>"),d.appendTo(s),d.css("width","70px"),this.bindControl(new r(d,e.coeff,(!1),this.model(),"Change Pitchfork Line Coeff"))):this.createLabeledCell($.t("Trend Line"),n).appendTo(b),f=$("<td class='colorpicker-cell'>"),f.appendTo(b),g=p(f),m=$("<td>"),m.appendTo(b),v=_(),v.appendTo(m),y=$("<td>"),y.appendTo(b),w=u(),w.render().appendTo(y),this.bindControl(new a(n,e.visible,(!0),this.model(),"Change Pitchfork Line Visibility")),this.bindControl(new c(g,e.color,(!0),this.model(),"Change Pitchfork Line Color",0)),this.bindControl(new h(w,e.linestyle,parseInt,(!0),this.model(),"Change Pitchfork Line Style")),this.bindControl(new l(v,e.linewidth,parseInt,this.model(),"Change Pitchfork Line Width"))},o.prototype.prepareLayout=function(){var t,e,i,o,n,s,r,c,d,p,u,_,g;for(this._table=$(document.createElement("table")),this._table.addClass("property-page"),this._table.attr("cellspacing","0"),this._table.attr("cellpadding","2"),this.addLevelEditor(null,this._linetool.properties().trendline,!1),t=1;t<=11;t++)e="level"+t,this.addLevelEditor($.t("Level {0}").format(t),this._linetool.properties()[e],!1);this.addOneColorPropertyWidget(this._table),i=$('<table class="property-page property-page-unpadded" cellspacing="0" cellpadding="0">').css({width:"100%"}),o=$("<tr>").appendTo(i),n=$('<table class="property-page" cellspacing="0" cellpadding="0">').appendTo($("<td>").css({width:"50%"}).appendTo(o)),s=$('<table class="property-page" cellspacing="0" cellpadding="0">').appendTo($("<td>").css({width:"50%"}).appendTo(o)),r=$("<input type='checkbox' class='visibility-switch'>"),c=this.addLabeledRow(this._table,$.t("Show Labels"),r),$("<td>").append(r).prependTo(c),d=$("<table cellspacing='0' cellpadding='0'>"),p=$("<select><option value='left'>"+$.t("left")+"</option><option value='center'>"+$.t("center")+"</option><option value='right'>"+$.t("right")+"</option></select>"),u=$("<select><option value='top'>"+$.t("top")+"</option><option value='middle'>"+$.t("middle")+"</option><option value='bottom'>"+$.t("bottom")+"</option></select>"),c=$("<tr>"),c.append("<td>"+$.t("Labels")+"</td>").append(p).append("<td>&nbsp</td>").append(u),c.appendTo(d),c=$("<tr>"),$("<td colspan='5'>").append(d).appendTo(c),c.appendTo(this._table),this.bindControl(new h(p,this._linetool.properties().horzLabelsAlign,null,(!0),this.model(),"Change Trend-Based Fib Time Labels Alignment")),this.bindControl(new h(u,this._linetool.properties().vertLabelsAlign,null,(!0),this.model(),"Change Trend-Based Fib Time Labels Alignment")),c=$("<tr>"),c.appendTo(this._table),_=$("<input type='checkbox' class='visibility-switch'>"),$("<td>").append(_).appendTo(c),this.createLabeledCell($.t("Background"),_).appendTo(c),g=f(),$('<td colspan="3">').append(g).appendTo(c),this.bindControl(new a(_,this._linetool.properties().fillBackground,(!0),this.model(),"Change Fib Retracement Background Visibility")),this.bindControl(new l(g,this._linetool.properties().transparency,(!0),this.model(),"Change Fib Retracement Background Transparency")),this.bindControl(new a(r,this._linetool.properties().showCoeffs,(!0),this.model(),"Change Fib Retracement Extend Lines")),this.loadData()},o.prototype.widget=function(){return this._table},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i),this.prepareLayout()}var n=i(294),s=i(295),r=s.BooleanBinder,a=s.ColorBinding,l=s.FloatBinder,h=s.SimpleComboBinder,c=s.SliderBinder,d=i(50),p=d.addColorPicker,u=d.createLineStyleEditor,_=d.createLineWidthEditor,f=d.createTransparencyEditor;inherit(o,n),o.prototype.addLevelEditor=function(t,e,i){var o,n,s,h,c,d,u=$("<tr>");u.appendTo(t),o=$("<td>"),o.appendTo(u),n=$("<input type='checkbox' class='visibility-switch'>"),n.appendTo(o),s=$("<td>"),s.appendTo(u),h=$("<input type='text'>"),h.appendTo(s),h.css("width","70px"),this.bindControl(new r(n,i.visible,(!0),this.model(),"Change Gann Square Line Visibility")),this.bindControl(new l(h,i.coeff,(!1),this.model(),"Change Pitchfork Line Coeff")),c=$("<td class='colorpicker-cell'>"),c.appendTo(u),d=p(c),this.bindControl(new a(d,i.color,(!0),this.model(),"Change Gann Square Line Color",0))},o.prototype.prepareLayout=function(){var t,e,i,o,n,s,l,d,p,g,m,v,y,w,b,S,T,C,x,P,L,k,E;for(this._table=$(document.createElement("table")),this._table.addClass("property-page property-page-unpadded"),this._table.attr("cellspacing","0"),this._table.attr("cellpadding","2"),this._table.css({width:"100%"}),t=$("<tbody>").appendTo(this._table),e=$("<tr>"),e.appendTo(t),i=$('<td width="50%">'),i.appendTo(e),o=$('<td width="50%">'),o.appendTo(e),n=$('<table cellspacing="0" cellpadding="2">'),n.appendTo(i),n.addClass("property-page"),s=$('<table cellspacing="0" cellpadding="2">'),s.appendTo(o),s.addClass("property-page"),$("<tr><td align='center' colspan='4'>"+$.t("Price Levels")+"</td></tr>").appendTo(n),$("<tr><td align='center' colspan='4'>"+$.t("Time Levels")+"</td></tr>").appendTo(s),l=1;l<=7;l++)d="hlevel"+l,this.addLevelEditor(n,"Level "+l,this._linetool.properties()[d]);for(l=1;l<=7;l++)d="vlevel"+l,this.addLevelEditor(s,"Level "+l,this._linetool.properties()[d]);this.addOneColorPropertyWidget(n),o.css({"vertical-align":"top"}),p=$("<input type='checkbox' class='visibility-switch'>"),g=$("<input type='checkbox' class='visibility-switch'>"),m=$("<input type='checkbox' class='visibility-switch'>"),v=$("<input type='checkbox' class='visibility-switch'>"),y=$('<table class="property-page property-page-unpadded" cellspacing="0" cellpadding="0">').css({width:"100%"}),w=$("<tr>").appendTo(y),b=$('<table class="property-page" cellspacing="0" cellpadding="0">').appendTo($("<td>").css({width:"50%"}).appendTo(w)),S=$('<table class="property-page" cellspacing="0" cellpadding="0">').appendTo($("<td>").css({width:"50%"}).appendTo(w)),T=this.addLabeledRow(b,$.t("Left Labels"),p),$("<td>").append(p).prependTo(T),T=this.addLabeledRow(S,$.t("Right Labels"),g),$("<td>").append(g).prependTo(T),T=this.addLabeledRow(b,$.t("Top Labels"),m),$("<td>").append(m).prependTo(T),T=this.addLabeledRow(S,$.t("Bottom Labels"),v),$("<td>").append(v).prependTo(T),this.bindControl(new r(p,this._linetool.properties().showLeftLabels,(!0),this.model(),"Change Gann Square Left Labels Visibility")),this.bindControl(new r(g,this._linetool.properties().showRightLabels,(!0),this.model(),"Change Gann Square Right Labels Visibility")),this.bindControl(new r(m,this._linetool.properties().showTopLabels,(!0),this.model(),"Change Gann Square Top Labels Visibility")),this.bindControl(new r(v,this._linetool.properties().showBottomLabels,(!0),this.model(),"Change Gann Square Bottom Labels Visibility")),C=$('<table class="property-page" cellspacing="0" cellpadding="2">'),x=_(),P=u(),L=this.createColorPicker(),k=$("<input type='checkbox' class='visibility-switch'>"),T=this.addLabeledRow(C,$.t("Grid"),k),$("<td>").append(k).prependTo(T),$("<td>").append(L).appendTo(T),$("<td>").append(x).appendTo(T),$("<td>").append(P.render()).appendTo(T),this.bindControl(new r(k,this._linetool.properties().grid.visible,(!0),this.model(),"Change Fib Speed Resistance Fan Grid Visibility")),this.bindControl(new a(L,this._linetool.properties().grid.color,(!0),this.model(),"Change Fib Speed Resistance Fan Grid Line Color",0)),this.bindControl(new h(P,this._linetool.properties().grid.linestyle,parseInt,(!0),this.model(),"Change Fib Speed Resistance Fan Grid Line Style")),this.bindControl(new c(x,this._linetool.properties().grid.linewidth,(!0),this.model(),"Change Fib Speed Resistance Fan Grid Line Width")),this._table=this._table.add(y).add(C),T=$("<tr>"),T.appendTo(C),k=$("<input type='checkbox' class='visibility-switch'>"),$("<td>").append(k).appendTo(T),this.createLabeledCell("Background",k).appendTo(T),E=f(),$('<td colspan="3">').append(E).appendTo(T),this.bindControl(new r(k,this._linetool.properties().fillBackground,(!0),this.model(),"Change Fib Speed/Resistance Fan Background Visibility")),this.bindControl(new c(E,this._linetool.properties().transparency,(!0),this.model(),"Change Fib Speed/Resistance Fan Background Transparency")),this.loadData()},o.prototype.widget=function(){return this._table},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i),this.prepareLayout()}var n=i(294),s=i(295),r=s.SimpleComboBinder,a=s.ColorBinding,l=s.SliderBinder,h=i(50),c=h.createLineStyleEditor,d=h.createLineWidthEditor;inherit(o,n),o.prototype.prepareLayout=function(){var t,e,i,o,n;this._table=$('<table class="property-page" cellspacing="0" cellpadding="2">'),t=$("<tbody>").appendTo(this._table),e=d(),i=c(),o=this.createColorPicker(),n=this.addLabeledRow(t,"Line"),$("<td>").append(o).appendTo(n),$("<td>").append(e).appendTo(n),$('<td colspan="3">').append(i.render()).appendTo(n),this.bindControl(new a(o,this._linetool.properties().linecolor,(!0),this.model(),"Change Fib Spiral Line Color")),this.bindControl(new r(i,this._linetool.properties().linestyle,parseInt,(!0),this.model(),"Change Fib Spiral Line Style")),this.bindControl(new l(e,this._linetool.properties().linewidth,(!0),this.model(),"Change Fib Spiral Line Width")),this.loadData()},o.prototype.widget=function(){return this._table},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i),this.prepareLayout()}var n=i(294),s=i(295),r=s.FloatBinder,a=s.BooleanBinder,l=s.ColorBinding,h=s.SimpleComboBinder,c=s.SliderBinder,d=i(50),p=d.addColorPicker,u=d.createLineStyleEditor,_=d.createLineWidthEditor,f=d.createTransparencyEditor;inherit(o,n),o.prototype.addLevelEditor=function(t,e,i){var o,n,s,d,f,g,m,v,y,w,b=$("<tr>");b.appendTo(this._table),o=$("<td>"),o.appendTo(b),n=$("<input type='checkbox' class='visibility-switch'>"),n.appendTo(o),t?(s=$("<td>"),s.appendTo(b),d=$("<input type='text'>"),d.appendTo(s),d.css("width","70px"),this.bindControl(new r(d,e.coeff,(!1),this.model(),"Change Pitchfork Line Coeff"))):this.createLabeledCell($.t("Trend Line"),n).appendTo(b),f=$("<td class='colorpicker-cell'>"),f.appendTo(b),g=p(f),m=$("<td>"),m.appendTo(b),v=_(),v.appendTo(m),y=$("<td>"),y.appendTo(b),w=u(),w.render().appendTo(y),this.bindControl(new a(n,e.visible,(!0),this.model(),"Change Pitchfork Line Visibility")),this.bindControl(new l(g,e.color,(!0),this.model(),"Change Pitchfork Line Color",0)),this.bindControl(new h(w,e.linestyle,parseInt,(!0),this.model(),"Change Pitchfork Line Style")),this.bindControl(new c(v,e.linewidth,parseInt,this.model(),"Change Pitchfork Line Width"))},o.prototype.prepareLayout=function(){var t,e,i,o,n,s,r,l,d;for(this._table=$(document.createElement("table")),this._table.addClass("property-page"),this._table.attr("cellspacing","0"),this._table.attr("cellpadding","2"),t=1;t<=11;t++)e="level"+t,this.addLevelEditor("Level "+t,this._linetool.properties()[e],!1);this.addOneColorPropertyWidget(this._table),i=$("<input type='checkbox' class='visibility-switch'>"),o=this.addLabeledRow(this._table,$.t("Show Labels"),i),$("<td>").append(i).prependTo(o),n=$("<table cellspacing='0' cellpadding='0'>"),s=$("<select><option value='left'>"+$.t("left")+"</option><option value='center'>"+$.t("center")+"</option><option value='right'>"+$.t("right")+"</option></select>"),r=$("<select><option value='top'>"+$.t("top")+"</option><option value='middle'>"+$.t("middle")+"</option><option value='bottom'>"+$.t("bottom")+"</option></select>"),o=$("<tr>"),o.append("<td>"+$.t("Labels")+"</td>").append(s).append("<td>&nbsp</td>").append(r),o.appendTo(n),o=$("<tr>"),$("<td colspan='5'>").append(n).appendTo(o),o.appendTo(this._table),this.bindControl(new h(s,this._linetool.properties().horzLabelsAlign,null,(!0),this.model(),"Change Fib Time Zone Labels Alignment")),this.bindControl(new h(r,this._linetool.properties().vertLabelsAlign,null,(!0),this.model(),"Change Fib Time Zone Labels Alignment")),o=$("<tr>"),o.appendTo(this._table),l=$("<input type='checkbox' class='visibility-switch'>"),$("<td>").append(l).appendTo(o),this.createLabeledCell($.t("Background"),l).appendTo(o),d=f(),$('<td colspan="3">').append(d).appendTo(o),this.bindControl(new a(i,this._linetool.properties().showLabels,(!0),this.model(),"Change Fib Time Zone Labels Visibility")),this.bindControl(new c(d,this._linetool.properties().transparency,(!0),this.model(),"Change Fib Retracement Background Transparency")),this.bindControl(new a(l,this._linetool.properties().fillBackground,(!0),this.model(),"Change Fib Retracement Background Visibility")),this.loadData()},o.prototype.widget=function(){return this._table},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i),this.prepareLayout()}var n=i(294),s=i(295),r=s.FloatBinder,a=s.BooleanBinder,l=s.ColorBinding,h=s.SliderBinder,c=i(50),d=c.addColorPicker,p=c.createLineWidthEditor,u=c.createTransparencyEditor;inherit(o,n),o.prototype.addLevelEditor=function(t,e,i){var o,n,s,c,u,_,f,g,m=$("<tr>");m.appendTo(this._table),o=$("<td>"),o.appendTo(m),n=$("<input type='checkbox' class='visibility-switch'>"),n.appendTo(o),t?(s=$("<td>"),s.appendTo(m),c=$("<input type='text'>"),c.appendTo(s),c.css("width","70px"),this.bindControl(new r(c,e.coeff,(!1),this.model(),"Change Pitchfork Line Coeff"))):this.createLabeledCell("Trend Line",n).appendTo(m),u=$("<td class='colorpicker-cell'>"),u.appendTo(m),_=d(u),f=$("<td>"),f.appendTo(m),g=p(),g.appendTo(f),this.bindControl(new a(n,e.visible,(!0),this.model(),"Change Fib Wedge Visibility")),this.bindControl(new l(_,e.color,(!0),this.model(),"Change Fib Wedge Line Color",0)),this.bindControl(new h(g,e.linewidth,(!0),this.model(),"Change Fib Wedge Width"))},o.prototype.prepareLayout=function(){var t,e,i,o,n,s;for(this._table=$(document.createElement("table")),this._table.addClass("property-page"),this._table.attr("cellspacing","0"),this._table.attr("cellpadding","2"),this.addLevelEditor(null,this._linetool.properties().trendline,!1),t=1;t<=11;t++)e="level"+t,this.addLevelEditor("Level "+t,this._linetool.properties()[e],!1);this.addOneColorPropertyWidget(this._table),i=$("<input type='checkbox' class='visibility-switch'>"),o=this.addLabeledRow(this._table,"Levels",i),$("<td>").append(i).prependTo(o),this.bindControl(new a(i,this._linetool.properties().showCoeffs,(!0),this.model(),"Change Fib Wedge Levels Visibility")),o=$("<tr>"),o.appendTo(this._table),n=$("<input type='checkbox' class='visibility-switch'>"),$("<td>").append(n).appendTo(o),this.createLabeledCell("Background",n).appendTo(o),s=u(),$('<td colspan="3">').append(s).appendTo(o),this.bindControl(new a(n,this._linetool.properties().fillBackground,(!0),this.model(),"Change Wedge Background Visibility")),this.bindControl(new h(s,this._linetool.properties().transparency,(!0),this.model(),"Change Wedge Background Transparency")),this.loadData()},o.prototype.widget=function(){return this._table},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i),this.prepareLayout()}var n=i(294),s=i(295),r=s.SimpleComboBinder,a=s.ColorBinding,l=s.SliderBinder,h=i(50),c=h.createLineStyleEditor,d=h.createLineWidthEditor;inherit(o,n),o.prototype.prepareLayout=function(){var t,e,i,o;this._table=$(document.createElement("table")),this._table.addClass("property-page"),this._table.attr("cellspacing","0"),this._table.attr("cellpadding","2"),t=d(),e=c(),i=this.createColorPicker(),o=this.addLabeledRow(this._table,"Lines"),$("<td>").append(i).appendTo(o),$("<td>").append(t).appendTo(o),$("<td>").append(e.render()).appendTo(o),this.bindControl(new a(i,this._linetool.properties().linecolor,(!0),this.model(),"Change Circle Lines Color")),this.bindControl(new r(e,this._linetool.properties().linestyle,parseInt,(!0),this.model(),"Change Circle Lines Style")),this.bindControl(new l(t,this._linetool.properties().linewidth,(!0),this.model(),"Change Circle Lines Width")),this.loadData()},o.prototype.widget=function(){return this._table},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i),this.prepareLayout()}var n=i(294),s=i(295),r=s.SimpleComboBinder,a=s.ColorBinding,l=s.SliderBinder,h=s.BooleanBinder,c=i(50),d=c.createLineStyleEditor,p=c.createLineWidthEditor;inherit(o,n),o.prototype.prepareLayout=function(){var t,e,i,o,n,s,c,u;this._table=$('<table class="property-page" cellspacing="0" cellpadding="2">'),t=$("<tbody>").appendTo(this._table),e=p(),i=d(),o=this.createColorPicker(),n=this.addLabeledRow(t,$.t("Line")),$("<td>").append(o).appendTo(n),$("<td>").append(e).appendTo(n),$('<td colspan="3">').append(i.render()).appendTo(n),this._linetool.properties().fillBackground&&($("<td>").prependTo(n),s=$('<input type="checkbox" class="visibility-switch">'),c=this.createColorPicker(),u=$("<tbody>").appendTo(this._table),n=$("<tr>").appendTo(u),$("<td>").append(s).appendTo(n),$("<td>").append($.t("Background")).appendTo(n),$("<td>").append(c).appendTo(n)),this.bindControl(new a(o,this._linetool.properties().linecolor,(!0),this.model(),"Change Time Cycles Color")),this.bindControl(new r(i,this._linetool.properties().linestyle,parseInt,(!0),this.model(),"Change Time Cycles Line Style")),this.bindControl(new l(e,this._linetool.properties().linewidth,(!0),this.model(),"Change Time Cycles Line Width")),s&&(this.bindControl(new h(s,this._linetool.properties().fillBackground,(!0),this.model(),"Change Time Cycles Filling")),this.bindControl(new a(c,this._linetool.properties().backgroundColor,(!0),this.model(),"Change Time Cycles Background Color",this._linetool.properties().transparency)))},o.prototype.widget=function(){return this._table},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i),this.prepareLayout()}var n=i(294),s=i(295),r=s.SimpleComboBinder,a=s.ColorBinding,l=s.BooleanBinder,h=s.SliderBinder,c=i(50).createLineWidthEditor;inherit(o,n),o.prototype.prepareLayout=function(){var t,e,i,o,n,s,d,p,u,_,f,g,m,v,y;this._table=$('<table class="property-page" cellspacing="0" cellpadding="2">'),t=$("<tbody>").appendTo(this._table),e=c(),i=this.createColorPicker(),o=this.addLabeledRow(t,$.t("Line")),$("<td>").prependTo(o),$("<td>").append(i).appendTo(o),$("<td>").append(e).appendTo(o),n=this.createColorPicker(),s=this.createColorPicker(),d=this.createFontSizeEditor(),p=this.createFontEditor(),u=this.createTextEditor(350,200),_=this.createColorPicker(),f=$('<input type="checkbox" class="visibility-switch">'),g=this.createColorPicker(),m=$('<input type="checkbox" class="visibility-switch">'),this.bindControl(new a(n,this._linetool.properties().textcolor,(!0),this.model(),"Change Text Color")),this.bindControl(new r(d,this._linetool.properties().fontsize,parseInt,(!0),this.model(),"Change Text Font Size")),this.bindControl(new r(p,this._linetool.properties().font,null,(!0),this.model(),"Change Text Font")),this.bindControl(new a(_,this._linetool.properties().labelBackgroundColor,(!0),this.model(),"Change Text Background",this._linetool.properties().labelBackgroundTransparency)),this.bindControl(new l(f,this._linetool.properties().fillLabelBackground,(!0),this.model(),"Change Text Background Fill")),this.bindControl(new a(g,this._linetool.properties().backgroundColor,(!0),this.model(),"Change Text Background",this._linetool.properties().backgroundTransparency)),this.bindControl(new l(m,this._linetool.properties().fillBackground,(!0),this.model(),"Change Text Background Fill")),this.bindControl(new a(s,this._linetool.properties().borderColor,(!0),this.model(),"Change Text Border Color")),v=this.addLabeledRow(t,$.t("Background"),m),$("<td>").append(m).prependTo(v),$("<td>").append(g).appendTo(v),y=this.addLabeledRow(t,$.t("Label")),$("<td>").prependTo(y),$("<td>").append(n).appendTo(y),$("<td>").append(p).appendTo(y),$("<td>").append(d).appendTo(y),v=this.addLabeledRow(t,$.t("Label Background"),f),$("<td>").append(f).prependTo(v),$("<td>").append(_).appendTo(v),this.bindControl(new a(i,this._linetool.properties().linecolor,(!0),this.model(),"Change Date Range Color")),this.bindControl(new h(e,this._linetool.properties().linewidth,(!0),this.model(),"Change Date Range Line Width")),this.loadData()},o.prototype.widget=function(){return this._table},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i),this.prepareLayout()}var n=i(294),s=i(295),r=s.SimpleComboBinder,a=s.ColorBinding,l=s.BooleanBinder,h=s.SliderBinder,c=i(50).createLineWidthEditor;inherit(o,n),o.prototype.prepareLayout=function(){var t,e,i,o,n,s,d,p,u,_,f,g,m,v,y;this._table=$('<table class="property-page" cellspacing="0" cellpadding="2">'),t=$("<tbody>").appendTo(this._table),e=c(),i=this.createColorPicker(),o=this.addLabeledRow(t,$.t("Line")),$("<td>").prependTo(o),$("<td>").append(i).appendTo(o),$("<td>").append(e).appendTo(o),n=this.createColorPicker(),s=this.createColorPicker(),d=this.createFontSizeEditor(),p=this.createFontEditor(),u=this.createTextEditor(350,200),_=this.createColorPicker(),f=$('<input type="checkbox" class="visibility-switch">'),g=this.createColorPicker(),m=$('<input type="checkbox" class="visibility-switch">'),this.bindControl(new a(n,this._linetool.properties().textcolor,(!0),this.model(),"Change Text Color")),this.bindControl(new r(d,this._linetool.properties().fontsize,parseInt,(!0),this.model(),"Change Text Font Size")),this.bindControl(new r(p,this._linetool.properties().font,null,(!0),this.model(),"Change Text Font")),this.bindControl(new a(_,this._linetool.properties().labelBackgroundColor,(!0),this.model(),"Change Text Background",this._linetool.properties().labelBackgroundTransparency)),this.bindControl(new l(f,this._linetool.properties().fillLabelBackground,(!0),this.model(),"Change Text Background Fill")),this.bindControl(new a(g,this._linetool.properties().backgroundColor,(!0),this.model(),"Change Text Background",this._linetool.properties().backgroundTransparency)),this.bindControl(new l(m,this._linetool.properties().fillBackground,(!0),this.model(),"Change Text Background Fill")),this.bindControl(new a(s,this._linetool.properties().borderColor,(!0),this.model(),"Change Text Border Color")),v=this.addLabeledRow(t,$.t("Background"),m),$("<td>").append(m).prependTo(v),$("<td>").append(g).appendTo(v),y=this.addLabeledRow(t,$.t("Label")),$("<td>").prependTo(y),$("<td>").append(n).appendTo(y),$("<td>").append(p).appendTo(y),$("<td>").append(d).appendTo(y),v=this.addLabeledRow(t,$.t("Label Background"),f),$("<td>").append(f).prependTo(v),$("<td>").append(_).appendTo(v),this.bindControl(new a(i,this._linetool.properties().linecolor,(!0),this.model(),"Change Date Range Color")),this.bindControl(new h(e,this._linetool.properties().linewidth,(!0),this.model(),"Change Date Range Line Width")),this.loadData()},o.prototype.widget=function(){return this._table},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i),this.prepareLayout()}var n=i(294),s=i(295),r=s.BooleanBinder,a=s.ColorBinding,l=s.SliderBinder,h=s.SimpleComboBinder,c=i(50).createLineWidthEditor;inherit(o,n),o.prototype.prepareLayout=function(){var t,e,i,o,n,s,d,p,u,_,f;this._table=$(document.createElement("table")),this._table.addClass("property-page"),this._table.attr("cellspacing","0"),this._table.attr("cellpadding","2"),t=c(),e=this.createColorPicker(),i=this.createColorPicker(),o=$('<span class="_tv-button _tv-button-fontstyle"><span class="icon-fontstyle-bold"></span></span>'),n=$('<span class="_tv-button _tv-button-fontstyle"><span class="icon-fontstyle-italic"></span></span>'),s=this.createFontSizeEditor(),d=this.createFontEditor(),p=this.addLabeledRow(this._table,"Border"),p.prepend("<td>"),$("<td>").append(e).appendTo(p),$("<td>").append(t).appendTo(p),u=$('<input type="checkbox" class="visibility-switch">'),_=this.createColorPicker(),d=this.createFontEditor(),p=this.addLabeledRow(this._table,"Background",u),$("<td>").append(u).prependTo(p),$("<td>").append(_).appendTo(p),this.bindControl(new r(u,this._linetool.properties().fillBackground,(!0),this.model(),"Change Pattern Filling")),this.bindControl(new a(e,this._linetool.properties().color,(!0),this.model(),"Change Pattern Line Color")),this.bindControl(new a(i,this._linetool.properties().textcolor,(!0),this.model(),"Change Pattern Text Color")),this.bindControl(new a(_,this._linetool.properties().backgroundColor,(!0),this.model(),"Change Pattern Background Color",this._linetool.properties().transparency)),this.bindControl(new l(t,this._linetool.properties().linewidth,(!0),this.model(),"Change Pattern Border Width")),this.bindControl(new h(s,this._linetool.properties().fontsize,parseInt,(!0),this.model(),"Change Text Font Size")),this.bindControl(new h(d,this._linetool.properties().font,null,(!0),this.model(),"Change Text Font")),this.bindControl(new r(o,this._linetool.properties().bold,(!0),this.model(),"Change Text Font Bold")),this.bindControl(new r(n,this._linetool.properties().italic,(!0),this.model(),"Change Text Font Italic")),f=$('<table class="property-page" cellspacing="0" cellpadding="2"><tr>').append($(document.createElement("td")).attr({width:1}).append(i)).append($(document.createElement("td")).attr({width:1}).append(d)).append($(document.createElement("td")).attr({width:1}).append(s)).append($(document.createElement("td")).css("vertical-align","top").attr({width:1}).append(o)).append($(document.createElement("td")).css("vertical-align","top").append(n)).append($("</tr></table>")),
p=this.addLabeledRow(this._table,""),$('<td colspan="5">').append(f).appendTo(p),this.loadData()},o.prototype.widget=function(){return this._table},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i),this.prepareLayout()}var n=i(294),s=i(295),r=s.ColorBinding,a=s.SliderBinder,l=s.SimpleComboBinder,h=s.BooleanBinder,c=i(50).createLineWidthEditor;inherit(o,n),o.prototype.prepareLayout=function(){var t,e,i,o,n,s,d,p,u;this._table=$(document.createElement("table")),this._table.addClass("property-page"),this._table.attr("cellspacing","0"),this._table.attr("cellpadding","2"),t=c(),e=this.createColorPicker(),i=this.createColorPicker(),o=$('<span class="_tv-button _tv-button-fontstyle"><span class="icon-fontstyle-bold"></span></span>'),n=$('<span class="_tv-button _tv-button-fontstyle"><span class="icon-fontstyle-italic"></span></span>'),s=this.createFontSizeEditor(),d=this.createFontEditor(),p=this.addLabeledRow(this._table,"Border"),p.prepend("<td>"),$("<td>").append(e).appendTo(p),$("<td>").append(t).appendTo(p),d=this.createFontEditor(),this.bindControl(new r(e,this._linetool.properties().color,(!0),this.model(),"Change Pattern Line Color")),this.bindControl(new r(i,this._linetool.properties().textcolor,(!0),this.model(),"Change Pattern Text Color")),this.bindControl(new a(t,this._linetool.properties().linewidth,(!0),this.model(),"Change Pattern Border Width")),this.bindControl(new l(s,this._linetool.properties().fontsize,parseInt,(!0),this.model(),"Change Text Font Size")),this.bindControl(new l(d,this._linetool.properties().font,null,(!0),this.model(),"Change Text Font")),this.bindControl(new h(o,this._linetool.properties().bold,(!0),this.model(),"Change Text Font Bold")),this.bindControl(new h(n,this._linetool.properties().italic,(!0),this.model(),"Change Text Font Italic")),u=$('<table class="property-page" cellspacing="0" cellpadding="2"><tr>').append($(document.createElement("td")).attr({width:1}).append(i)).append($(document.createElement("td")).attr({width:1}).append(d)).append($(document.createElement("td")).attr({width:1}).append(s)).append($(document.createElement("td")).css("vertical-align","top").attr({width:1}).append(o)).append($(document.createElement("td")).css("vertical-align","top").append(n)).append($("</tr></table>")),p=this.addLabeledRow(this._table,""),$('<td colspan="5">').append(u).appendTo(p),this.loadData()},o.prototype.widget=function(){return this._table},t.exports=o},function(t,e,i){(function(e){"use strict";function o(t,e,i){n.call(this,t,e,i),this.prepareLayout()}var n=i(294),s=i(295),r=s.ColorBinding,a=s.SimpleComboBinder,l=s.SimpleStringBinder,h=s.BooleanBinder,c=i(44);inherit(o,n),o.prototype.prepareLayout=function(){var t,e,i,o,n=this.createColorPicker(),s=this.createFontSizeEditor(),c=this.createFontEditor(),d=this.createTextEditor(350,200),p=this.createColorPicker(),u=this.createColorPicker(),_=$('<span class="_tv-button _tv-button-fontstyle"><span class="icon-fontstyle-bold"></span></span>'),f=$('<span class="_tv-button _tv-button-fontstyle"><span class="icon-fontstyle-italic"></span></span>');this.bindControl(new r(n,this._linetool.properties().textColor,(!0),this.model(),"Change Text Color")),this.bindControl(new a(s,this._linetool.properties().fontSize,parseInt,(!0),this.model(),"Change Text Font Size")),this.bindControl(new a(c,this._linetool.properties().font,null,(!0),this.model(),"Change Text Font")),this.bindControl(new l(d,this._linetool.properties().text,null,(!0),this.model(),"Change Text")),this.bindControl(new r(p,this._linetool.properties().markerColor,(!0),this.model(),"Change Marker and Border Color")),this.bindControl(new r(u,this._linetool.properties().backgroundColor,(!0),this.model(),"Change Background Color",this._linetool.properties().backgroundTransparency)),this.bindControl(new h(_,this._linetool.properties().bold,(!0),this.model(),"Change Text Font Bold")),this.bindControl(new h(f,this._linetool.properties().italic,(!0),this.model(),"Change Text Font Italic")),t=$('<table class="property-page" cellspacing="0" cellpadding="2">'),e=$('<table class="property-page" cellspacing="0" cellpadding="2">'),i=$('<table class="property-page" cellspacing="0" cellpadding="2">'),this._table=t.add(i).add(e),$(document.createElement("tr")).append($(document.createElement("td")).attr({width:1}).append(n)).append($(document.createElement("td")).attr({width:1}).append(c)).append($(document.createElement("td")).attr({width:1}).append(s)).append($(document.createElement("td")).attr({width:1}).append(_)).append($(document.createElement("td")).append(f)).appendTo(t),$(document.createElement("tr")).append($(document.createElement("td")).attr({colspan:5}).append(d)).appendTo(t),o=this.addLabeledRow(i,$.t("Label")),$("<td>").attr("colspan",2).append(p).appendTo(o),o=this.addLabeledRow(i,$.t("Background")),$("<td>").append(u).appendTo(o),this.loadData(),setTimeout(function(){d.select(),d.focus()},20)},o.prototype.widget=function(){return this._table},o.prototype.dialogPosition=function(t,o){var n,s,r,a,l,h,d,p,u,_,f=i(227).LineToolNote;if(t&&o){for(n=0,s=this._linetool._model.paneForSource(this._linetool),r=c.getChartWidget();n<r.paneWidgets().length;n++)if(r.paneWidgets()[n]._state==s){a=$(r.paneWidgets()[n].canvas).offset().left;break}return l=(this._linetool.paneViews()||[])[0],h=new e.Point(0,0),l&&(h=l._floatPoints[0]||this._linetool._fixedPoints[0]),d=(a||0)+h.x,p=f.TOOLTIP_WIDTH,u=d-p/2,_=o.outerWidth(),t.left<u&&t.left+_+10>u?(t.left-=t.left+_+10-u,t):t.left>u&&t.left<u+p+10?(t.left+=u+p+10-t.left,t):void 0}},t.exports=o}).call(e,i(21))},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i),this.prepareLayout()}var n=i(294),s=i(295),r=s.BooleanBinder,a=s.ColorBinding,l=s.SliderBinder,h=s.SimpleComboBinder,c=i(50).createLineWidthEditor;inherit(o,n),o.prototype.prepareLayout=function(){var t,e,i,o,n,s,d,p,u,_,f;this._table=$(document.createElement("table")),this._table.addClass("property-page"),this._table.attr("cellspacing","0"),this._table.attr("cellpadding","2"),t=c(),e=this.createColorPicker(),i=this.createColorPicker(),o=$('<span class="_tv-button _tv-button-fontstyle"><span class="icon-fontstyle-bold"></span></span>'),n=$('<span class="_tv-button _tv-button-fontstyle"><span class="icon-fontstyle-italic"></span></span>'),s=this.createFontSizeEditor(),d=this.createFontEditor(),p=this.addLabeledRow(this._table,"Border"),p.prepend("<td>"),$("<td>").append(e).appendTo(p),$("<td>").append(t).appendTo(p),u=$('<input type="checkbox" class="visibility-switch">'),_=this.createColorPicker(),d=this.createFontEditor(),p=this.addLabeledRow(this._table,"Background",u),$("<td>").append(u).prependTo(p),$("<td>").append(_).appendTo(p),this.bindControl(new r(u,this._linetool.properties().fillBackground,(!0),this.model(),"Change Pattern Filling")),this.bindControl(new a(e,this._linetool.properties().color,(!0),this.model(),"Change Pattern Line Color")),this.bindControl(new a(i,this._linetool.properties().textcolor,(!0),this.model(),"Change Pattern Text Color")),this.bindControl(new a(_,this._linetool.properties().backgroundColor,(!0),this.model(),"Change Pattern Background Color",this._linetool.properties().transparency)),this.bindControl(new l(t,this._linetool.properties().linewidth,(!0),this.model(),"Change Pattern Border Width")),this.bindControl(new h(s,this._linetool.properties().fontsize,parseInt,(!0),this.model(),"Change Text Font Size")),this.bindControl(new h(d,this._linetool.properties().font,null,(!0),this.model(),"Change Text Font")),this.bindControl(new r(o,this._linetool.properties().bold,(!0),this.model(),"Change Text Font Bold")),this.bindControl(new r(n,this._linetool.properties().italic,(!0),this.model(),"Change Text Font Italic")),f=$('<table class="property-page" cellspacing="0" cellpadding="2"><tr>').append($(document.createElement("td")).attr({width:1}).append(i)).append($(document.createElement("td")).attr({width:1}).append(d)).append($(document.createElement("td")).attr({width:1}).append(s)).append($(document.createElement("td")).css("vertical-align","top").attr({width:1}).append(o)).append($(document.createElement("td")).css("vertical-align","top").append(n)).append($("</tr></table>")),p=this.addLabeledRow(this._table,""),$('<td colspan="5">').append(f).appendTo(p),this.loadData()},o.prototype.widget=function(){return this._table},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i),this.prepareLayout()}var n=i(294),s=i(295),r=s.SimpleComboBinder,a=s.BooleanBinder,l=s.ColorBinding,h=s.SliderBinder,c=i(50),d=c.createLineStyleEditor,p=c.createLineWidthEditor;inherit(o,n),o.prototype.prepareLayout=function(){var t,e,i,o,n,s,c,u,_,f,g,m,v,y,w,b,S,T,C,x,P,L,k,E;this._table=$('<table class="property-page" cellspacing="0" cellpadding="2">'),t=$("<tbody>").appendTo(this._table),e=p(),i=d(),o=this.createColorPicker(),n=this.addLabeledRow(t,$.t("Line")),$("<td>").append(o).appendTo(n),$("<td>").append(e).appendTo(n),$('<td colspan="3">').append(i.render()).appendTo(n),n=this.addLabeledRow(t,$.t("Text")),s=this.createColorPicker(),c=this.createFontSizeEditor(),u=this.createFontEditor(),_=$('<span class="_tv-button _tv-button-fontstyle"><span class="icon-fontstyle-bold"></span></span>'),f=$('<span class="_tv-button _tv-button-fontstyle"><span class="icon-fontstyle-italic"></span></span>'),$("<td>").append(s).appendTo(n),$("<td>").append(u).appendTo(n),$("<td>").append(c).appendTo(n),$("<td>").append(_).appendTo(n),$("<td>").append(f).appendTo(n),g=$("<tbody>").appendTo(this._table),m=$('<input type="checkbox" class="visibility-switch">'),v=this.createColorPicker(),n=this.addLabeledRow(g,$.t("Background"),m),y=$("<table>"),$('<td colspan="5">').append(y).appendTo(n),n=$("<tr>").appendTo(y),$("<td>").append(m).appendTo(n),$("<td>").append(v).appendTo(n),w=$("<tbody>").appendTo(this._table),b=$("<label>"+$.t("Extend")+" </label>").css({"margin-left":"8px"}),S=$('<input type="checkbox">').appendTo(b),T=$("<label>"+$.t("Extend")+" </label>").css({"margin-left":"8px"}),C=$('<input type="checkbox">').appendTo(T),x=$("<select><option value='0'>"+$.t("Normal")+"</option><option value='1'>"+$.t("Arrow")+"</option></select>"),P=$("<select><option value='0'>"+$.t("Normal")+"</option><option value='1'>"+$.t("Arrow")+"</option></select>"),n=this.addLabeledRow(w,$.t("Left End")),$('<td colspan="3">').appendTo(n).append(x).append(b),n=this.addLabeledRow(w,$.t("Right End")),$('<td colspan="3">').appendTo(n).append(P).append(T),L=$("<tbody>").appendTo(this._table),n=$("<tr>").appendTo(L),k=$("<input type='checkbox'>"),E=$("<label style='display:block'>").append(k).append($.t("Show Prices")),$("<td colspan='2'>").append(E).appendTo(n),this.bindControl(new r(c,this._linetool.properties().fontsize,parseInt,(!0),this.model(),"Change Text Font Size")),this.bindControl(new r(u,this._linetool.properties().font,null,(!0),this.model(),"Change Text Font")),this.bindControl(new l(s,this._linetool.properties().textcolor,(!0),this.model(),"Change Text Color")),this.bindControl(new a(_,this._linetool.properties().bold,(!0),this.model(),"Change Text Font Bold")),this.bindControl(new a(f,this._linetool.properties().italic,(!0),this.model(),"Change Text Font Italic")),this.bindControl(new a(k,this._linetool.properties().showPrices,(!0),this.model(),"Change Disjoint Angle Show Prices")),this.bindControl(new a(S,this._linetool.properties().extendLeft,(!0),this.model(),"Change Disjoint Angle Extending Left")),this.bindControl(new a(C,this._linetool.properties().extendRight,(!0),this.model(),"Change Disjoint Angle Extending Right")),this.bindControl(new l(o,this._linetool.properties().linecolor,(!0),this.model(),"Change Disjoint Angle Color")),this.bindControl(new r(i,this._linetool.properties().linestyle,parseInt,(!0),this.model(),"Change Disjoint Angle Style")),this.bindControl(new h(e,this._linetool.properties().linewidth,(!0),this.model(),"Change Disjoint Angle Width")),this.bindControl(new r(x,this._linetool.properties().leftEnd,parseInt,(!0),this.model(),"Change Disjoint Angle Left End")),this.bindControl(new r(P,this._linetool.properties().rightEnd,parseInt,(!0),this.model(),"Change Disjoint Angle Right End")),this.bindControl(new a(m,this._linetool.properties().fillBackground,(!0),this.model(),"Change Disjoint Angle Filling")),this.bindControl(new l(v,this._linetool.properties().backgroundColor,(!0),this.model(),"Change Disjoint Angle Background Color",this._linetool.properties().transparency)),this.loadData()},o.prototype.widget=function(){return this._table},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i),this.prepareLayout()}var n=i(294),s=i(295),r=s.SimpleComboBinder,a=s.ColorBinding,l=s.BooleanBinder,h=s.SliderBinder,c=i(50),d=c.createLineStyleEditor,p=c.createLineWidthEditor;inherit(o,n),o.prototype.prepareLayout=function(){var t,e,i,o,n,s,c,u,_,f,g,m,v,y,w,b,S,T,C,x,P,L,k,E;this._table=$('<table class="property-page" cellspacing="0" cellpadding="2">'),t=$("<tbody>").appendTo(this._table),e=p(),i=d(),o=this.createColorPicker(),n=this.addLabeledRow(t,$.t("Line")),$("<td>").append(o).appendTo(n),$("<td>").append(e).appendTo(n),$('<td colspan="3">').append(i.render()).appendTo(n),n=this.addLabeledRow(t,$.t("Text")),s=this.createColorPicker(),c=this.createFontSizeEditor(),u=this.createFontEditor(),_=$('<span class="_tv-button _tv-button-fontstyle"><span class="icon-fontstyle-bold"></span></span>'),f=$('<span class="_tv-button _tv-button-fontstyle"><span class="icon-fontstyle-italic"></span></span>'),$("<td>").append(s).appendTo(n),$("<td>").append(u).appendTo(n),$("<td>").append(c).appendTo(n),$("<td>").append(_).appendTo(n),$("<td>").append(f).appendTo(n),g=$("<tbody>").appendTo(this._table),m=$('<input type="checkbox" class="visibility-switch">'),v=this.createColorPicker(),n=this.addLabeledRow(g,$.t("Background"),m),y=$("<table>"),$('<td colspan="5">').append(y).appendTo(n),n=$("<tr>").appendTo(y),$("<td>").append(m).appendTo(n),$("<td>").append(v).appendTo(n),w=$("<tbody>").appendTo(this._table),b=$("<label>"+$.t("Extend")+" </label>").css({"margin-left":"8px"}),S=$('<input type="checkbox">').appendTo(b),T=$("<label>"+$.t("Extend")+" </label>").css({"margin-left":"8px"}),C=$('<input type="checkbox">').appendTo(T),x=$("<select><option value='0'>"+$.t("Normal")+"</option><option value='1'>"+$.t("Arrow")+"</option></select>"),P=$("<select><option value='0'>"+$.t("Normal")+"</option><option value='1'>"+$.t("Arrow")+"</option></select>"),n=this.addLabeledRow(w,$.t("Left End")),$('<td colspan="3">').appendTo(n).append(x).append(b),n=this.addLabeledRow(w,$.t("Right End")),$('<td colspan="3">').appendTo(n).append(P).append(T),L=$("<tbody>").appendTo(this._table),n=$("<tr>").appendTo(L),k=$("<input type='checkbox'>"),E=$("<label style='display:block'>").append(k).append($.t("Show Prices")),$("<td colspan='2'>").append(E).appendTo(n),this.bindControl(new r(c,this._linetool.properties().fontsize,parseInt,(!0),this.model(),"Change Text Font Size")),this.bindControl(new r(u,this._linetool.properties().font,null,(!0),this.model(),"Change Text Font")),this.bindControl(new a(s,this._linetool.properties().textcolor,(!0),this.model(),"Change Text Color")),this.bindControl(new l(_,this._linetool.properties().bold,(!0),this.model(),"Change Text Font Bold")),this.bindControl(new l(f,this._linetool.properties().italic,(!0),this.model(),"Change Text Font Italic")),this.bindControl(new l(k,this._linetool.properties().showPrices,(!0),this.model(),"Change Disjoint Angle Show Prices")),this.bindControl(new l(S,this._linetool.properties().extendLeft,(!0),this.model(),"Change Disjoint Angle Extending Left")),this.bindControl(new l(C,this._linetool.properties().extendRight,(!0),this.model(),"Change Disjoint Angle Extending Right")),this.bindControl(new a(o,this._linetool.properties().linecolor,(!0),this.model(),"Change Disjoint Angle Color")),this.bindControl(new r(i,this._linetool.properties().linestyle,parseInt,(!0),this.model(),"Change Disjoint Angle Style")),this.bindControl(new h(e,this._linetool.properties().linewidth,(!0),this.model(),"Change Disjoint Angle Width")),this.bindControl(new r(x,this._linetool.properties().leftEnd,parseInt,(!0),this.model(),"Change Disjoint Angle Left End")),this.bindControl(new r(P,this._linetool.properties().rightEnd,parseInt,(!0),this.model(),"Change Disjoint Angle Right End")),this.bindControl(new l(m,this._linetool.properties().fillBackground,(!0),this.model(),"Change Disjoint Angle Filling")),this.bindControl(new a(v,this._linetool.properties().backgroundColor,(!0),this.model(),"Change Disjoint Angle Background Color",this._linetool.properties().transparency)),this.loadData()},o.prototype.widget=function(){return this._table},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i),this.prepareLayout()}var n=i(294),s=i(295).ColorBinding;inherit(o,n),o.prototype.prepareLayout=function(){var t,e,i;this._table=$(document.createElement("table")),this._table.addClass("property-page"),this._table.attr("cellspacing","0"),this._table.attr("cellpadding","2"),t=this.createColorPicker(),e=this.addLabeledRow(this._table,"Color:"),$("<td>").append(t).appendTo(e),i=this._linetool.properties(),this._div=$("<div>").append(this._table),this.bindControl(new s(t,i.color,(!0),this.model(),"Change Icon Color")),this.loadData()},o.prototype.widget=function(){return this._div},t.exports=o},function(t,e,i){"use strict";function o(t,e,i){n.call(this,t,e,i)}var n=i(293);inherit(o,n),t.exports=o},function(t,e,i){(function(e){"use strict";function o(t,e,i){var o,n,s=e.m_model.properties();l.call(this,s,e),o=this._series=e.mainSeries(),this._chart=e.m_model,this._model=e,this._source=i,this._property=s,this._seriesProperty=o.properties(),this._scaleProperty=o.m_priceScale.properties(),this._mainAxisProperty=o.properties().priceAxisProperties,n=null,$.each(e.m_model.panes(),function(t,e){$.each(e.dataSources(),function(t,i){if(i==o)return n=e,!1})}),this._pane=n,this.prepareLayout(),this._themes=[]}var n=i(302),s=i(287).UndoHistory,r=i(291),a=i(295),l=a.PropertyPage,h=a.GreateTransformer,c=a.LessTransformer,d=a.ToIntTransformer,p=a.SimpleStringBinder,u=a.BooleanBinder,_=a.SliderBinder,f=a.ColorBinding,g=a.SimpleComboBinder,m=a.DisabledBinder,v=(a.CheckboxWVBinding,i(77)),y=i(106),w=i(50),b=w.addColorPicker,S=w.createLineStyleEditor,T=w.createLineWidthEditor,C=w.bindPopupMenu,x=i(73).DefaultProperty,P=i(47).availableTimezones,L=i(353);inherit(o,l),inherit(o,n),o.prototype.setScalesOpenTab=function(){this.scalesTab&&this.scalesTab.data("layout-tab-open",r.TAB_OPEN_OVERRIDE)},o.prototype.setTmzOpenTab=function(){this.tmzSessTable&&this.tmzSessTable.data("layout-tab-open",r.TAB_OPEN_OVERRIDE)},o.prototype.prepareLayout=function(){var t,i,o,n,s,r,a,l,w,b,C,x,k,E,I,A,V,M,D,B,O,R,z,N,F,H,W,U,q,j,Y,G,K,X,J,Z,Q,tt,et,it,ot,nt,st,rt,at,lt,ht,ct,dt,pt,ut,_t,ft,gt,mt,vt,yt,wt,bt,St,Tt,Ct,xt,Pt,Lt,kt,Et,It,At,Vt,Mt,$t,Dt,Bt,Ot,Rt,zt,Nt,Ft,Ht,Wt,Ut,qt,jt,Yt,Gt,Kt,Xt,Jt,Zt,Qt,te,ee,ie,oe,ne,se,re,ae,le,he,ce,de,pe,ue,_e,fe,ge,me,ve,ye,we,be,Se,Te,Ce,xe,Pe,Le=this;if(e.enabled("chart_property_page_style")&&(t=$('<table class="property-page" cellspacing="0" cellpadding="2">').data("layout-tab",$.t("Style")),i=$('<table class="property-page" cellspacing="0" cellpadding="2">').data("layout-tab",$.t("Style")),o=$('<table class="property-page" cellspacing="0" cellpadding="2">').data("layout-tab",$.t("Style")),this._prepareSeriesStyleLayout(t,i,o,this._seriesProperty),this._hasSeriesStyleLayout=!0,r=$('<table class="property-page" cellspacing="0" cellpadding="2">').data("layout-tab",$.t("Style")),I=$('<input type="checkbox">'),A=this.addLabeledRow(r,$.t("Price Line"),I),$("<td>").append(I).prependTo(A),this.bindControl(new u(I,this._seriesProperty.showPriceLine,(!0),this.model(),"Change Price Price Line")),V=T(),$("<td>").append(V).appendTo(A),this.bindControl(new _(V,this._seriesProperty.priceLineWidth,(!0),this.model(),"Change Price Line Width")),a=$('<table class="property-page" cellspacing="0" cellpadding="2">').data("layout-tab",$.t("Style")),M=this.createSeriesMinTickEditor(),D=$("<tr>"),D.appendTo(a),$("<td>"+$.t("Override Min Tick")+"</td>").appendTo(D),$("<td>").append(M).appendTo(D),this.bindControl(new g(M,this._seriesProperty.minTick,null,(!0),this.model(),"Change MinTick")),l=$('<table class="property-page" cellspacing="0" cellpadding="2">').data("layout-tab",$.t("Style")),this._pane&&(this._pane.leftPriceScale().dataSources().indexOf(this._series)!==-1?B="left":this._pane.rightPriceScale().dataSources().indexOf(this._series)!==-1?B="right":this._pane.isOverlay(this._series)&&(B="none")),B&&(O={left:$.t("Scale Left"),right:$.t("Scale Right")},Le._pane.actionNoScaleIsEnabled(Le._series)&&(O.none=$.t("Screen (No Scale)")),R=this.createKeyCombo(O).val(B).change(function(){switch(this.value){case"left":Le._model.move(Le._series,Le._pane,Le._pane.leftPriceScale());break;case"right":Le._model.move(Le._series,Le._pane,Le._pane.rightPriceScale());break;case"none":Le._model.move(Le._series,Le._pane,null)}}),z=this.addRow(l),$("<td>"+$.t("Scale")+"</td>").appendTo(z),$("<td>").appendTo(z).append(R))),e.enabled("chart_property_page_scales")&&(N=$('<table class="property-page" cellspacing="0" cellpadding="2">').data("layout-tab",$.t("Scales")),F=$('<input type="checkbox">').change(function(){this.checked&&setTimeout(function(){Le._model.m_model.invalidate(new y(y.LIGHT_UPDATE))},0)}),H=this.addLabeledRow(N,$.t("Auto Scale"),F),W=function(t){this._undoModel.setAutoScaleProperty(this._property,t,Le._series.priceScale(),this._undoText)},$("<td>").append(F).prependTo(H),this.bindControl(new u(F,this._scaleProperty.autoScale,(!0),this.model(),"Auto Scale",W)),this.bindControl(new m(F,this._scaleProperty.autoScaleDisabled,(!0),this.model(),"Auto Scale")),U=$('<input type="checkbox">'),q=this.addLabeledRow(N,$.t("Percentage"),U),j=function(t){this._undoModel.setPercentProperty(this._property,t,Le._series.priceScale(),this._undoText)},$("<td>").append(U).prependTo(q),this.bindControl(new u(U,this._mainAxisProperty.percentage,(!0),this.model(),"Scale Percentage",j)),this.bindControl(new m(U,this._mainAxisProperty.percentageDisabled,(!0),this.model(),"Scale Percentage")),Y=$('<input type="checkbox">'),G=this.addLabeledRow(N,$.t("Log Scale"),Y),K=function(t){this._undoModel.setLogProperty(this._property,t,Le._series.priceScale(),this._undoText)},$("<td>").append(Y).prependTo(G),this.bindControl(new u(Y,this._mainAxisProperty.log,(!0),this.model(),"Log Scale",K)),this.bindControl(new m(Y,this._mainAxisProperty.logDisabled,(!0),this.model(),"Log Scale")),X=$('<input type="checkbox">').change(function(){this.checked&&setTimeout(function(){Le._model.m_model.invalidate(new y(y.LIGHT_UPDATE))},0)}),J=this.addLabeledRow(N,$.t("Scale Series Only"),X),$("<td>").append(X).prependTo(J),this.bindControl(new u(X,this._property.scalesProperties.scaleSeriesOnly,(!0),this.model(),"Scale Series Only")),Z=$("<input type='checkbox'/>"),Q=this.addLabeledRow(N,$.t("Lock scale"),Z),tt=function(t){this._undoModel.setLockScaleProperty(this._property,t,Le._series,this._undoText)},et=function(t){Q.toggle(t.value()==v.STYLE_PNF)},$("<td>").append(Z).prependTo(Q),this.bindControl(new u(Z,this._seriesProperty.lockScale,(!0),this.model(),"Change lock scale",tt)),this._seriesProperty.style.listeners().subscribe(this,et),it=$('<table class="property-page" cellspacing="0" cellpadding="2">').data("layout-tab",$.t("Scales")),ot=$('<input type="text" class="ticker">'),nt=this.addLabeledRow(it,$.t("Top Margin"),ot),$("<td>").appendTo(nt).append(ot),$("<td>%</td>").appendTo(nt),st=[d(this._property.paneProperties.topMargin.value())],st.push(c(25)),st.push(h(0)),this.bindControl(new p(ot,this._property.paneProperties.topMargin,st,(!0),this.model(),"Top Margin")),rt=$('<input type="text" class="ticker">'),at=this.addLabeledRow(it,$.t("Bottom Margin"),rt),$("<td>").appendTo(at).append(rt),$("<td>%</td>").appendTo(at),lt=[d(this._property.paneProperties.bottomMargin.value())],lt.push(c(25)),lt.push(h(0)),this.bindControl(new p(rt,this._property.paneProperties.bottomMargin,lt,(!0),this.model(),"Bottom Margin")),ht=$('<input type="text" class="ticker">'),ct=this.addLabeledRow(it,$.t("Right Margin"),ht),$("<td>").appendTo(ct).append(ht),$("<td>"+$.t("bars",{context:"margin"})+"</td>").appendTo(ct),dt=[d(this._property.timeScale.rightOffset.value())],dt.push(c(~~this._chart.m_timeScale.maxOffset())),dt.push(h(-200)),this.bindControl(new p(ht,this._property.timeScale.rightOffset,dt,(!0),this.model(),"Right Margin")),pt=$('<table class="property-page" cellspacing="0" cellpadding="2">').data("layout-tab",$.t("Scales")),ut=$("<input type='checkbox' />"),_t=this.addLabeledRow(pt,$.t("Left Axis"),ut),$("<td>").append(ut).prependTo(_t),setTimeout(function(){this.bindControl(new u(ut,this._property.scalesProperties.showLeftScale,(!0),this.model(),"Show Left Axis"))}.bind(this),0),ft=$("<input type='checkbox' />"),gt=this.addLabeledRow(pt,$.t("Right Axis"),ft),$("<td>").append(ft).prependTo(gt),setTimeout(function(){this.bindControl(new u(ft,this._property.scalesProperties.showRightScale,(!0),this.model(),"Show Right Axis"))}.bind(this),0),e.enabled("countdown")&&(mt=$("<input type='checkbox'>"),vt=this.addLabeledRow(pt,$.t("Countdown"),mt),$("<td>").append(mt).prependTo(vt),this.bindControl(new u(mt,this._seriesProperty.showCountdown,(!0),this.model(),"Change Show Countdown"))),yt=$('<input type="checkbox">'),wt=this.addLabeledRow(pt,$.t("Symbol Last Value"),yt),$("<td>").append(yt).prependTo(wt),this.bindControl(new u(yt,this._property.scalesProperties.showSeriesLastValue,(!0),this.model(),"Change Symbol Last Value Visibility")),bt=$('<input type="checkbox">'),St=this.addLabeledRow(pt,$.t("Indicator Last Value"),bt),$("<td>").append(bt).prependTo(St),this.bindControl(new u(bt,this._property.scalesProperties.showStudyLastValue,(!0),this.model(),"Change Indicator Last Value Visibility")),Tt=$('<input type="checkbox">'),Ct=this.addLabeledRow(pt,$.t("Symbol Labels"),Tt),$("<td>").append(Tt).prependTo(Ct),this.bindControl(new u(Tt,this._property.scalesProperties.showSymbolLabels,(!0),this.model(),"Show Symbol Labels")),xt=$('<input type="checkbox">'),Pt=this.addLabeledRow(pt,$.t("Indicator Labels"),xt),$("<td>").append(xt).prependTo(Pt),this.bindControl(new u(xt,this._property.scalesProperties.showStudyPlotLabels,(!0),this.model(),"Show Study Plots Labels")),Lt=$("<input type='checkbox' />"),kt=this.addLabeledRow(pt,$.t("Precise Labels"),Lt),$("<td>").append(Lt).prependTo(kt),this.bindControl(new u(Lt,this._scaleProperty.alignLabels,(!0),this.model(),"Precise Labels")),Et=$('<div class="property-page-column-2">').append(N).append(it),It=$('<div class="property-page-column-2">').append(pt),w=$("<div>").css("min-width","420px").data("layout-tab",$.t("Scales")),w.append(Et).append(It),this.scalesTab=w),e.enabled("chart_property_page_background")&&(At=$('<table class="property-page" cellspacing="0" cellpadding="2">'),Vt=this.createColorPicker({hideTransparency:!0}),Mt=this.addLabeledRow(At,$.t("Background")),$('<td colspan="2">').append(Vt).appendTo(Mt),this.bindControl(new f(Vt,this._property.paneProperties.background,(!0),this.model(),"Change Chart Background Color")),$t=this.addLabeledRow(At,$.t("Vert Grid Lines")),Dt=this.createColorPicker(),$("<td>").append(Dt).appendTo($t),this.bindControl(new f(Dt,this._property.paneProperties.vertGridProperties.color,(!0),this.model(),"Change Vert Grid Lines Color")),Bt=S(),$('<td colspan="2">').append(Bt.render()).appendTo($t),this.bindControl(new g(Bt,this._property.paneProperties.vertGridProperties.style,parseInt,(!0),this.model(),"Change Vert Grid Lines Style")),Ot=this.addLabeledRow(At,$.t("Horz Grid Lines")),Rt=this.createColorPicker(),$("<td>").append(Rt).appendTo(Ot),this.bindControl(new f(Rt,this._property.paneProperties.horzGridProperties.color,(!0),this.model(),"Change Horz Grid Lines Color")),zt=S(),$('<td colspan="2">').append(zt.render()).appendTo(Ot),this.bindControl(new g(zt,this._property.paneProperties.horzGridProperties.style,parseInt,(!0),this.model(),"Change Horz Grid Lines Style")),Nt=this.createColorPicker(),Ft=this.addLabeledRow(At,$.t("Scales Text")),$("<td>").append(Nt).appendTo(Ft),this.bindControl(new f(Nt,this._property.scalesProperties.textColor,(!0),this.model(),"Change Scales Text Color")),Ht=this.createFontSizeEditor(),$("<td>").append(Ht).appendTo(Ft),this.bindControl(new g(Ht,this._property.scalesProperties.fontSize,parseInt,(!0),this.model(),"Change Scales Font Size")),Wt=this.createColorPicker(),Ut=this.addLabeledRow(At,$.t("Scales Lines")),$('<td colspan="2">').append(Wt).appendTo(Ut),this.bindControl(new f(Wt,this._property.scalesProperties.lineColor,(!0),this.model(),"Change Scales Lines Color")),qt=this.addLabeledRow(At,$.t("Watermark")),jt=this.createColorPicker(),$("<td>").append(jt).appendTo(qt),this.bindControl(new f(jt,this._property.symbolWatermarkProperties.color,(!0),this.model(),"Change Symbol Watermark Color",this._property.symbolWatermarkProperties.transparency)),Yt=this.addLabeledRow(At,$.t("Crosshair")),Gt=this.createColorPicker(),$("<td>").append(Gt).appendTo(Yt),this.bindControl(new f(Gt,this._property.paneProperties.crossHairProperties.color,(!0),this.model(),"Change Crosshair Color",this._property.paneProperties.crossHairProperties.transparency)),Kt=S(),$("<td>").append(Kt.render()).appendTo(Yt),this.bindControl(new g(Kt,this._property.paneProperties.crossHairProperties.style,parseInt,(!0),this.model(),"Change Crosshair Style")),Xt=T(),$("<td>").append(Xt).appendTo(this.addRow(At).prepend("<td/><td/>")),this.bindControl(new _(Xt,this._property.paneProperties.crossHairProperties.width,(!0),this.model(),"Change Crosshair Width")),Jt=$('<table class="property-page">'),Zt=this.addLabeledRow(Jt,$.t("Navigation Buttons"),null,!0),Qt=[],Object.keys(L.visibilityPropertyAvailableValues).forEach(function(t){Qt.push('<option value="',t,'">',L.visibilityPropertyAvailableValues[t],"</option>")}),te=$("<select>"+Qt.join("")+"</select>"),$("<td>").append(te).appendTo(Zt),this.bindControl(new g(te,L.visibilityProperty,null,(!0),this.model(),"Change Navigation Buttons Visibility")),ee=$('<table class="property-page" cellspacing="0" cellpadding="2">'),ie=$('<input type="checkbox">'),oe=this.addLabeledRow(ee,$.t("Symbol Description"),ie),$("<td>").append(ie).prependTo(oe),this.bindControl(new u(ie,this._property.paneProperties.legendProperties.showSeriesTitle,(!0),this.model(),"Change Symbol Description Visibility")),ne=$('<input type="checkbox">'),se=this.addLabeledRow(ee,$.t("OHLC Values"),ne),$("<td>").append(ne).prependTo(se),this.bindControl(new u(ne,this._property.paneProperties.legendProperties.showSeriesOHLC,(!0),this.model(),"Change OHLC Values Visibility")),re=$('<input type="checkbox">'),ae=this.addLabeledRow(ee,$.t("Indicator Titles"),re),$("<td>").append(re).prependTo(ae),this.bindControl(new u(re,this._property.paneProperties.legendProperties.showStudyTitles,(!0),this.model(),"Change Indicator Titles Visibility")),le=$('<input type="checkbox">'),he=this.addLabeledRow(ee,$.t("Indicator Arguments"),le),ce=function(t){le.prop("disabled",!t.value())},$("<td>").append(le).prependTo(he),this.bindControl(new u(le,this._property.paneProperties.legendProperties.showStudyArguments,(!0),this.model(),"Change Indicator Arguments Visibility")),this._property.paneProperties.legendProperties.showStudyTitles.listeners().subscribe(this,ce),ce(this._property.paneProperties.legendProperties.showStudyTitles),de=$('<input type="checkbox">'),pe=this.addLabeledRow(ee,$.t("Indicator Values"),de),$("<td>").append(de).prependTo(pe),this.bindControl(new u(de,this._property.paneProperties.legendProperties.showStudyValues,(!0),this.model(),"Change Indicator Values Visibility")),ue=$('<div class="property-page-column-2">').append(At),_e=$('<div class="property-page-column-2">').append(ee),fe=$('<div class="property-page-column-1">').append(Jt),
b=$("<div>").css("min-width","520px").data("layout-tab",$.t("Background")),b.append(ue).append(_e).append(fe)),e.enabled("chart_property_page_timezone_sessions")){for(x=$('<table class="property-page" cellspacing="0" cellpadding="2">').data("layout-tab",$.t("Timezone/Sessions")),this.tmzSessTable=x,ct=$("<tr>").appendTo(x),ge=$("<td>").appendTo(ct),me=$('<table cellspacing="0" cellpadding="0">').appendTo(ge),ve=$("<tr>"),ve.appendTo(me),ye=$("<td>"),ye.appendTo(ve),ye.text($.t("Time Zone")),we=$('<td colspan="2" class="tzeditor">'),we.appendTo(ve),be="",Se=0;Se<P.length;Se++)be+='<option value="'+P[Se].id+'">'+P[Se].title+"</option>";Te=$("<select>"+be+"</select>"),Te.appendTo(we),this.bindControl(new g(Te,this._property.timezone,null,(!0),this.model(),"Change Timezone")),e.enabled("charting_library_base")||(this._series.createSessStudy(),this.createSessTable(x))}Ce=e.enabled("chart_property_page_evetns_alerts")&&(e.enabled("alerts")||TradingView.isFeatureEnabled("esdindicatorfeature"))&&!e.enabled("charting_library_base"),Ce&&(xe=e.enabled("alerts")?$.t("Events & Alerts"):$.t("Events"),E=$('<table class="property-page" cellspacing="0" cellpadding="2">').data("layout-tab",xe),this.createEventsTable(E)),Pe=e.enabled("trading_options")||e.enabled("chart_property_page_trading"),Pe&&(k=this.createTradingTable()),n=$('<table class="property-page" cellspacing="0" cellpadding="2">'),s=$('<table class="property-page property-page-unpadded" cellspacing="0" cellpadding="0">').css({width:"100%"}).data("layout-separated",!0),C=$('<table class="property-page" cellspacing="0" cellpadding="2">').data("layout-tab",$.t("Drawings")),this._table=$().add(t).add(i).add(o).add(n).add(s).add(r).add(l).add(a).add(w).add(b).add(C).add(x).add(k).add(E),this.loadData()},o.prototype.widget=function(){return this._table},o.prototype.loadData=function(){this.superclass.prototype.loadData.call(this),this.switchStyle()},o.prototype.loadTheme=function(t){var e=this;$.get("/theme/?themeName="+encodeURIComponent(t),function(i){e._model._lastLoadedTheme=t,e.applyTheme(JSON.parse(i.content))})},o.prototype.applyTheme=function(t){var e=this._seriesProperty.extendedHours.value();this._model.model().restoreTheme(t),this._seriesProperty.extendedHours.value()!==e&&this._seriesProperty.extendedHours.listeners().fire(this._seriesProperty.extendedHours),this.loadData()},o.prototype.createTemplateButton=function(t){var i,o,n;return e.enabled("chart_property_page_template_button")?(i=this,t||(t={}),o=function(){var e,o=[];return o.push({title:$.t("Save As..."),action:function(){runOrSignIn(function(){TradingView.showThemeSaveDialog(i._model)},{source:"Save theme in chart properties"})},addClass:"special"}),"function"==typeof t.defaultsCallback&&o.push({title:$.t("Apply Defaults"),action:t.defaultsCallback,addClass:"special"}),e=[],$.each(i._themes,function(t,o){e.push({title:$.t(o),action:function(){i.loadTheme(o)},deleteAction:is_authenticated?function(){var t=this,e=$.t("Do you realy want to delete theme",{theme:o?'"'+o+'"':""});TVDialogs.showConfirm($.t("Theme"),e,function(){t instanceof $&&t.remove(),$.post("/remove-theme/",{name:o}).error(function(t){TradingView.logError(t.responseText)}),TradingView.getThemesList.invalidate();for(var e=i._themes.length;e--;)i._themes[e]==o&&i._themes.splice(e,1)})}:void 0})}),e.length&&(e.sort(function(t,e){return t=t.title.toUpperCase(),e=e.title.toUpperCase(),t==e?0:t>e?1:-1}),o.push({separator:!0}),o=o.concat(e)),o},n=$('<a href="#" class="_tv-button">'+$.t("Themes")+'<span class="icon-dropdown"></span></a>'),C(n,null,{direction:"up",event:"button-popup",notCloseOnButtons:!0}),n.bind("click",function(){var t=$(this);t.is(".active")||TradingView.getThemesList(function(e){i._themes=e,t.trigger("button-popup",[o(),!0])})}),n):$("<span />")},o.prototype.switchStyle=function(){if(this._hasSeriesStyleLayout){$(this._barsTbody).add(this._barsColorerTbody).add(this._renkoTbody).add(this._pbTbody).add(this._kagiTbody).add(this._pnfTbody).add(this._candlesTbody).add(this._candlesColorerTbody).add(this._hollowCandlesTbody).add(this._lineTbody).add(this._areaTbody).add(this._haTbody).add(this._haColorerTbody).css("display","none");switch(this._seriesProperty.style.value()){case v.STYLE_BARS:this._barsTbody.css("display","table-row-group"),this._barsColorerTbody.css("display","table-row-group");break;case v.STYLE_CANDLES:this._candlesTbody.css("display","table-row-group"),this._candlesColorerTbody.css("display","table-row-group");break;case v.STYLE_HOLLOW_CANDLES:this._hollowCandlesTbody.css("display","table-row-group");break;case v.STYLE_LINE:this._lineTbody.css("display","table-row-group");break;case v.STYLE_AREA:this._areaTbody.css("display","table-row-group");break;case v.STYLE_RENKO:this._renkoTbody.css("display","table-row-group");break;case v.STYLE_PB:this._pbTbody.css("display","table-row-group");break;case v.STYLE_KAGI:this._kagiTbody.css("display","table-row-group");break;case v.STYLE_PNF:this._pnfTbody.css("display","table-row-group");break;case v.STYLE_HEIKEN_ASHI:this._haTbody.css("display","table-row-group"),this._haColorerTbody.css("display","table-row-group")}}},o.prototype.onResoreDefaults=function(){var t,e=this._model.model().properties().paneProperties.topMargin,i=this._model.model().properties().paneProperties.bottomMargin;e.listeners().fire(e),i.listeners().fire(i),"undefined"!=typeof trading&&(s.setWatchedValue(trading.hideFloatingPanel,!1,"Restore Defaults"),s.setWatchedValue(trading.hideCompletedOrders,!1,"Restore Defaults"),s.setWatchedValue(trading.noConfirmEnabled,!1,"Restore Defaults")),t=this._model.model().properties().timezone,t.listeners().fire(t)},o.prototype.defaultProperties=function(){var t=this,e=[t._seriesProperty.extendedHours,t._property.scalesProperties.showLeftScale,t._property.scalesProperties.showRightScale,t._property.timeScale.rightOffset].map(function(t){return{property:t,previousValue:t.value()}});return setTimeout(function(){e.forEach(function(t){t.property.value()!==t.previousValue&&t.property.listeners().fire(t.property)});var i=new x("chartproperties.paneProperties.rightAxisProperties");$.each(["autoScale","percentage","log"],function(e,o){var n=t._scaleProperty[o],s=i[o].value();s!==n.value()&&n.setValue(s)})},0),[this._property,this._seriesProperty]},o.prototype.createEventsTable=function(t){var i,o,n,s,r,a,l,h,c,d,p,v,y,w,C,x,P,L,k,E,I,A,V,M,D,B,O,R,z,N,F;TradingView.isFeatureEnabled("esdindicatorfeature")&&(i=$("<tr>").appendTo(t),o=$('<input type="checkbox" />'),n=this.addLabeledRow(i,$.t("Show Dividends on Chart"),o),$("<td>").append(o).prependTo(n),n.append("<td>"),this.bindControl(new u(o,this._seriesProperty.esdShowDividends,(!0),this.model(),"Change Show or Hide Dividends")),s=$('<input type="checkbox" />'),n=this.addLabeledRow(i,$.t("Show Splits on Chart"),s),$("<td>").append(s).prependTo(n),n.append("<td>"),this.bindControl(new u(s,this._seriesProperty.esdShowSplits,(!0),this.model(),"Change Show or Hide Splits")),r=$('<input type="checkbox" />'),n=this.addLabeledRow(i,$.t("Show Earnings on Chart"),r),$("<td>").append(r).prependTo(n),n.append("<td>"),this.bindControl(new u(r,this._seriesProperty.esdShowEarnings,(!0),this.model(),"Change Show or Hide Earnings")),a=this.createTableInTable(t),l=$('<input type="checkbox" />'),h=S(),c=T(),n=this.addLabeledRow(a,$.t("Earnings breaks"),l),$("<td>").append(l).prependTo(n),d=b($("<td>").appendTo(n)),$("<td>").append(h.render()).appendTo(n),$("<td>").append(c).appendTo(n),n.addClass("offset-row"),n.append("<td>"),this.bindControl(new u(l,this._seriesProperty.esdShowBreaks,(!0),this.model(),"Change Show or Hide Earnings")),this.bindControl(new f(d,this._seriesProperty.esdBreaksStyle.color,(!0),this.model(),"Change earnings color")),this.bindControl(new g(h,this._seriesProperty.esdBreaksStyle.style,parseInt,(!0),this.model(),"Change style")),this.bindControl(new _(c,this._seriesProperty.esdBreaksStyle.width,(!0),this.model(),"Change width")),p=function(t){l.prop("disabled",!t.value())},this._seriesProperty.esdShowEarnings.listeners().subscribe(this,p)),e.enabled("chart_events")&&TradingView.isFeatureEnabled("chart_events")&&(v=$('<input type="checkbox">'),y=$('<input type="checkbox">'),w=$('<input type="checkbox" />'),C=S(),x=T(),P=this.createColorPicker(),L=this._property.chartEventsSourceProperties,this.bindControl(new u(v,L.visible,(!0),this.model(),"Change Show Economic Events on Chart")),this.bindControl(new u(y,L.futureOnly,(!0),this.model(),"Change Show Only Future Events")),this.bindControl(new m(y,L.visible,(!0),this.model(),"",(!0))),this.bindControl(new m(w,L.visible,(!0),this.model(),"",(!0))),this.bindControl(new u(w,L.breaks.visible,(!0),this.model(),"Change Show or Hide Events Breaks")),this.bindControl(new f(P,L.breaks.color,(!0),this.model(),"Change Events Breaks Color")),this.bindControl(new g(C,L.breaks.style,parseInt,(!0),this.model(),"Change Events Breaks Style")),this.bindControl(new _(x,L.breaks.width,(!0),this.model(),"Change Events Breaks Width")),k=$("<tr>").appendTo(t),n=this.addLabeledRow(k,$.t("Show Economic Events on Chart"),v),$("<td>").append(v).prependTo(n),E=this.createTableInTable(t),n=this.addLabeledRow(E,$.t("Show Only Future Events"),y),$("<td>").append(y).prependTo(n),n.addClass("offset-row"),I=this.createTableInTable(t),n=this.addLabeledRow(I,$.t("Events Breaks"),w),$("<td>").append(w).prependTo(n),$("<td>").append(P).appendTo(n),$("<td>").append(C.render()).appendTo(n),$("<td>").append(x).appendTo(n),n.addClass("offset-row")),e.enabled("alerts")&&(A=$("<tr>").appendTo(t),V=$('<input type="checkbox" />'),n=this.addLabeledRow(A,$.t("Show Alert Labels"),V),$("<td>").append(V).prependTo(n),n.append("<td>"),M=this._property.alertsProperties.labels.visible,this.bindControl(new u(V,M,(!0),this.model(),"Change Show or Hide Alert Labels",function(t){this._model.beginUndoMacro("Show Alert Labels"),this._model.setProperty(M,t,"Show  Alert Labels"),this._model.endUndoMacro()}.bind(this))),D=this.createTableInTable(t),B=$('<input type="checkbox">'),O=T(),R=S(),z=R.render(),n=this.addLabeledRow(D,$.t("Extended Alert Line"),B),$("<td>").append(B).prependTo(n),N=b($("<td>").appendTo(n)),$("<td>").append(z).appendTo(n),$("<td>").append(O).appendTo(n),n.addClass("offset-row"),n.append("<td>"),this.bindControl(new u(B,this._property.alertsProperties.labels.line.visible,(!0),this.model(),"Change Show or Hide Alert Labels Lines")),this.bindControl(new f(N,this._property.alertsProperties.labels.color,(!0),this.model(),"Change Alerts Labels color")),this.bindControl(new g(R,this._property.alertsProperties.labels.line.style,parseInt,(!0),this.model(),"Change style")),this.bindControl(new _(O,this._property.alertsProperties.labels.line.width,(!0),this.model(),"Change width")),F=function(t){B.prop("disabled",!t.value()),z.prop("disabled",!t.value()),O.prop("disabled",!t.value())},M.listeners().subscribe(this,F))},o.prototype.createSessTable=function(t){var e,i,o,n,s,r=this._series.sessionsStudy().properties(),a=this.createTableInTable(t),l=r.name.value(),h=$("<input type='checkbox' />"),c=this.addLabeledRow(a,$.t("Session Breaks"),h),d=S(),p=this.createColorPicker(),m=T();return $("<td>").append(h).prependTo(c),$("<td>").append(p).appendTo(c),$("<td>").append(d.render()).appendTo(c),$("<td>").append(m).appendTo(c),this.bindControl(new u(h,r.graphics.vertlines.sessBreaks.visible,(!0),this.model(),"Change "+l+" visibility")),this.bindControl(new f(p,r.graphics.vertlines.sessBreaks.color,(!0),this.model(),"Change "+l+" color")),this.bindControl(new g(d,r.graphics.vertlines.sessBreaks.style,parseInt,(!0),this.model(),"Change "+l+" style")),this.bindControl(new _(m,r.graphics.vertlines.sessBreaks.width,(!0),this.model(),"Change "+l+" width")),a=this.createTableInTable(t),e=this._extendedHoursEditor=$('<input type="checkbox" />'),c=this.addLabeledRow(a,$.t("Extended Hours (Intraday Only)"),e),$("<td>").append(e).prependTo(c),this.bindControl(new u(e,this._seriesProperty.extendedHours,(!0),this.model(),"Change Extended Hours")),this._seriesProperty.sessVis=r.graphics.vertlines.sessBreaks.visible,a=this.createTableInTable(t),i=this._createStudySessRow(a,$.t("Extended Hours"),r.graphics.backgrounds.outOfSession),o=this._createStudySessRow(a,$.t("In Session"),r.graphics.backgrounds.inSession),n=function(t){i.prop("disabled",!t.value()),o.prop("disabled",!t.value())},this._seriesProperty.extendedHours.listeners().subscribe(this,n),n(this._seriesProperty.extendedHours),s=this._series.isIntradayInterval(),h.prop("disabled",!s),a},o.prototype._createStudySessRow=function(t,e,i){var o,n=$("<input type='checkbox' />"),s=this.addLabeledRow(t,e,n),r=b($("<td>").appendTo(s));return this.bindControl(new u(n,i.visible,(!0),this.model(),"Change "+e+" visibility")),this.bindControl(new f(r,i.color,(!0),this.model(),e+" color",i.transparency)),o=$("<td>"),o.append(n).prependTo(s),s.addClass("offset-row"),n},o.prototype.createTradingTable=function(){var t,e,i,o,n,s,r,a,l,f,m,v=$('<table class="property-page" cellspacing="0" cellpadding="2">').data("layout-tab",$.t("Trading")),y=$("<tr>").appendTo(v),w=$("<td>").appendTo(y),b=$('<table cellspacing="0" cellpadding="0">').appendTo(w),C=$('<input type="checkbox">');return y=this.addLabeledRow(b,$.t("Show Positions"),C),$("<td>").append(C).prependTo(y),this.bindControl(new u(C,this._property.tradingProperties.showPositions,(!0),this.model(),"Change Positions Visibility")),t=$('<input type="checkbox">'),y=this.addLabeledRow(b,$.t("Show Orders"),t),$("<td>").append(t).prependTo(y),this.bindControl(new u(t,this._property.tradingProperties.showOrders,(!0),this.model(),"Change Orders Visibility")),e=$('<input type="checkbox">'),i=this.addLabeledRow(b,$.t("Extend Lines Left"),e),$("<td>").append(e).prependTo(i),this.bindControl(new u(e,this._property.tradingProperties.extendLeft,(!0),this.model(),"Extend Lines Left")),o=T(),this.bindControl(new _(o,this._property.tradingProperties.lineWidth,(!0),this.model(),"Change Connecting Line Width")),n=S(),this.bindControl(new g(n,this._property.tradingProperties.lineStyle,parseInt,(!0),this.model(),"Change Connecting Line Style")),s=$('<input type="text" class="ticker">'),r=[d(this._property.tradingProperties.lineLength.value()),c(100),h(0)],this.bindControl(new p(s,this._property.tradingProperties.lineLength,r,(!0),this.model(),"Change Connecting Line Length")),a=$("<tbody>"),l=this.addLabeledRow(b,$.t("Connecting Line"),a),$("<td>").prependTo(l),$("<td>").append(o).appendTo(l),$('<td colspan="3">').append(n.render()).appendTo(l),$('<td colspan="3">').append(s).appendTo(l),$("<td>%</td>").appendTo(l),f=$('<input type="checkbox">'),m=this.addLabeledRow(b,$.t("Show Executions"),f),$("<td>").append(f).prependTo(m),this.bindControl(new u(f,this._property.tradingProperties.showExecutions,(!0),this.model(),"Change Executions Visibility")),v},t.exports=o}).call(e,i(1))},function(t,e,i){(function(e){"use strict";function o(t){var e,i;o.visibilityProperty.value()||(e="NavigationButtons.visibility",o.visibilityProperty.subscribe(null,function(){var t=o.visibilityProperty.value();t!==TVSettings.getValue(e)&&TVSettings.setValue(e,t),n.subscribeOnEvents("visibleOnMouseOver"===t)}),i=TVSettings.getValue(e,Modernizr.touch?"alwaysOn":"visibleOnMouseOver"),o.visibilityProperty.setValue(i)),this._widgets=[],this._chart=t,o.visibilityProperty.subscribe(null,this._onVisibilityPropertyChanged.bind(this))}var n=i(354);o.visibilityProperty=new e,o.visibilityPropertyAvailableValues={visibleOnMouseOver:$.t("Visible on Mouse Over"),alwaysOn:$.t("Always Visible"),alwaysOff:$.t("Always Invisible")},o.prototype.addWidget=function(t){this._widgets.push(t.widget);var e=$.extend({callback:this._onMouseMove.bind(this)},t);n.addWidget(e),this._updateOpacityState([t.widget])},o.prototype._onVisibilityPropertyChanged=function(){this._updateOpacityState(this._widgets)},o.prototype._updateWidgetVisibility=function(t){t.css("visibility",t._state?"visible":"hidden")},o.prototype._updateOpacityState=function(t,e){void 0===e&&(e="alwaysOn"===o.visibilityProperty.value());var i=this;t.forEach(function(t){if(t._state!==e){t._state=e,t.css("visibility","visible");var o=e?1:0;return t.css("opacity")==o?void i._updateWidgetVisibility(t):void t.animate({opacity:o},i._updateWidgetVisibility.bind(i,t))}})},o.prototype._onMouseMove=function(t,e){this._chart.model().lineBeingCreated()||this._updateOpacityState([t],!e)},t.exports=o}).call(e,i(63))},function(t,e){"use strict";function i(){this._widgets=[],this._mouseDownEventType=Modernizr.touch?"touchstart":"mousedown",this._mouseUpEventType=Modernizr.touch?"touchend":"mouseup",this._mouseMoveEventType=Modernizr.touch?"touchmove":"mousemove",this._omMouseDownHandler=this._onMouseUpDown.bind(this,!0),this._omMouseUpHandler=this._onMouseUpDown.bind(this,!1),this._omMouseMoveHandler=this._onMouseUnderWidget.bind(this),this._subscribed=!1,this.subscribeOnEvents(!0)}i.prototype.subscribeOnEvents=function(t){if(this._subscribed!==t){this._subscribed=t;var e=$(document);t?(e.on(this._mouseDownEventType,this._omMouseDownHandler),e.on(this._mouseMoveEventType,this._omMouseMoveHandler),e.on(this._mouseUpEventType,this._omMouseUpHandler)):(e.off(this._mouseDownEventType,this._omMouseDownHandler),e.off(this._mouseMoveEventType,this._omMouseMoveHandler),e.off(this._mouseUpEventType,this._omMouseUpHandler))}},i.prototype.addWidget=function(t){this._widgets.push(t)},i.prototype._onMouseUpDown=function(t){this._isMousePressed=t},i.prototype._onMouseUnderWidget=function(t){this._isMousePressed||this._widgets.forEach(function(e){var i=e.checkingWidget||e.widget,o=i.offset(),n=t.pageX-o.left,s=t.pageY-o.top,r=i.width(),a=i.height(),l=n<-e.acceptableOffset||s<-e.acceptableOffset||n>r+e.acceptableOffset||s>a+e.acceptableOffset;e.callback(e.widget,l)})},t.exports=new i},function(t,e,i){(function(e){"use strict";function o(t,e,i){s.call(this,t,e),this._linetool=i,this.prepareLayout()}var n=i(295),s=n.PropertyPage,r=n.BooleanBinder,a=n.RangeBinder;inherit(o,s),o.prototype.prepareLayout=function(){var t,i,o,n,s,l,h,c,d,p,u,_;this._block=$("<table>"),t=this._linetool.properties().intervalsVisibilities,e.enabled("seconds_resolution")&&(i=$("<tr>").appendTo(this._block),o=$("<label>").append($.t("Seconds")),n=$("<input type='checkbox'>").addClass("visibility-checker").prependTo(o),$("<td>").css("padding-right","15px").append(o).appendTo(i),s=$("<input type='text'>").addClass("ticker-text"),$("<td>").append(s).appendTo(i),l=$("<div>").addClass("slider-range ui-slider-horizontal"),$("<td>").append(l).appendTo(i),h=$("<input type='text'>").addClass("ticker-text"),$("<td>").append(h).appendTo(i),this.bindControl(new r(n,t.seconds,(!0),this.model(),"Change Line Tool Visibility On Seconds")),this.bindControl(new a(l,[t.secondsFrom,t.secondsTo],[1,59],(!1),this.model(),[s,h],[$.t("Change Seconds From"),$.t("Change Seconds To")],n))),i=$("<tr>").appendTo(this._block),o=$("<label>").append($.t("Minutes")),c=$("<input type='checkbox'>").addClass("visibility-checker").prependTo(o),$("<td>").css("padding-right","15px").append(o).appendTo(i),s=$("<input type='text'>").addClass("ticker-text"),$("<td>").append(s).appendTo(i),l=$("<div>").addClass("slider-range ui-slider-horizontal"),$("<td>").append(l).appendTo(i),h=$("<input type='text'>").addClass("ticker-text"),$("<td>").append(h).appendTo(i),this.bindControl(new r(c,t.minutes,(!0),this.model(),"Change Line Tool Visibility On Minutes")),this.bindControl(new a(l,[t.minutesFrom,t.minutesTo],[1,59],(!1),this.model(),[s,h],[$.t("Change Minutes From"),$.t("Change Minutes To")],c)),i=$("<tr>").appendTo(this._block),o=$("<label>").append($.t("Hours")),d=$("<input type='checkbox'>").addClass("visibility-checker").prependTo(o),$("<td>").append(o).appendTo(i),s=$("<input type='text'>").addClass("ticker-text"),$("<td>").append(s).appendTo(i),l=$("<div>").addClass("slider-range ui-slider-horizontal"),$("<td>").append(l).appendTo(i),h=$("<input type='text'>").addClass("ticker-text"),$("<td>").append(h).appendTo(i),this.bindControl(new r(d,t.hours,(!0),this.model(),"Change Line Tool Visibility On Hours")),this.bindControl(new a(l,[t.hoursFrom,t.hoursTo],[1,24],(!1),this.model(),[s,h],[$.t("Change Minutes From"),$.t("Change Hours To")],d)),i=$("<tr>").appendTo(this._block),o=$("<label>").append($.t("Days")),p=$("<input type='checkbox'>").addClass("visibility-checker").prependTo(o),$("<td>").append(o).appendTo(i),s=$("<input type='text'>").addClass("ticker-text"),$("<td>").append(s).appendTo(i),l=$("<div>").addClass("slider-range ui-slider-horizontal"),$("<td>").append(l).appendTo(i),h=$("<input type='text'>").addClass("ticker-text"),$("<td>").append(h).appendTo(i),this.bindControl(new r(p,t.days,(!0),this.model(),"Change Line Tool Visibility On Days")),this.bindControl(new a(l,[t.daysFrom,t.daysTo],[1,366],(!1),this.model(),[s,h],[$.t("Change Minutes From"),$.t("Change Days To")],p)),i=$("<tr>").css("height","29px").appendTo(this._block),o=$("<label>").append($.t("Weeks")),u=$("<input type='checkbox'>").prependTo(o),$("<td>").append(o).appendTo(i),this.bindControl(new r(u,t.weeks,(!0),this.model(),"Change Line Tool Visibility On Weeks")),i=$("<tr>").css("height","29px").appendTo(this._block),o=$("<label>").append($.t("Months")),_=$("<input type='checkbox'>").prependTo(o),$("<td>").append(o).appendTo(i),this.bindControl(new r(_,t.months,(!0),this.model(),"Change Line Tool Visibility On Months")),this.loadData()},o.prototype.widget=function(){return this._block},t.exports=o}).call(e,i(1))},function(t,e,i){"use strict";function o(t,e,i){s.call(this,t,e),this._study=i,this.prepareLayout()}var n=i(295),s=n.PropertyPage,r=n.GreateTransformer,a=n.LessTransformer,l=n.ToIntTransformer,h=n.ToFloatTransformer,c=n.BooleanBinder,d=n.SimpleComboBinder,p=n.SimpleStringBinder,u=i(75).NumericFormatter;inherit(o,s),o.prototype._getStrategyInputs=function(){for(var t,e=0,i=this._study.metaInfo(),o={};e<i.inputs.length;e++)t=i.inputs[e],"strategy_props"===t.groupId&&(assert(void 0!==t.internalID,"Strategy input id="+t.id+" doesn't have an internalID"),o[t.internalID]=i.inputs[e]);return TradingView.clone(o)},o.prototype._setStdInput=function(t,e,i){var o,n,s,_,f,g,m,v,y,w,b,S,T;if(t){if(o=t.id,n="study_input-"+o+"-"+Date.now().toString(36)+"-"+Math.random().toString(36),s=$("<tr>").appendTo(this._$table),_="Change "+e,f=$('<label for="'+n+'">'+$.t(e,{context:"input"})+"</label>"),"bool"==t.type)m=$('<td colspan="3">').appendTo(s),g=$('<input id="'+n+'" type="checkbox">').appendTo(m),f.appendTo(m),i!==!0&&this.bindControl(new c(g,this._property.inputs[o],(!0),this.model(),_));else if(v=$("<td>").addClass($.t("propertypage-name-label",{context:"css_class"})).append(f).appendTo(s),y=$('<td colspan="2">').appendTo(s),t.options){for(g=$('<select id="'+n+'">').appendTo(y),w=0;w<t.options.length;w++)b=t.options[w],b instanceof jQuery?b.appendTo(g):$('<option value="'+b+'">'+b+"</option>").appendTo(g);i!==!0&&this.bindControl(new d(g,this._property.inputs[o],null,(!0),this.model(),_))}else g=$('<input id="'+n+'" type="text">').appendTo(y),i!==!0&&("integer"!=t.type&&"float"!=t.type||(S=["integer"==t.type?l(t.defval):h(t.defval)],(0===t.min||t.min)&&S.push(r(t.min)),(0===t.max||t.max)&&S.push(a(t.max))),T=new p(g,this._property.inputs[o],S,(!1),this.model(),_),"float"===t.type&&T.addFormatter(function(t){return(new u).format(t)}),this.bindControl(T)),g.addClass("ticker");return g}},o.prototype._setPyramidingInputs=function(t){var e=t.pyramiding,i=this._property.inputs[e.id],o=this._setStdInput({id:"pyramiding_switch",type:"bool"},$.t("Pyramiding"),!0),n=this._setStdInput(t.pyramiding,$.t("Allow up to")),s=n.closest("tr");assert(void 0===this._onAllowUpToChanged),this._onAllowUpToChanged=function(t){t.value()>0?(o.prop("checked",!0),n.removeAttr("disabled"),s.removeClass("disabled")):(o.prop("checked",!1),n.attr("disabled","disabled"),s.addClass("disabled"))},i.subscribe(null,this._onAllowUpToChanged),o.change(function(){var t=!o.prop("checked");i.setValue(t?0:e.defval),t?n.attr("disabled","disabled"):n.removeAttr("disabled"),s.toggleClass("disabled",t)}),i.value()>0?o.prop("checked",!0):(o.prop("checked",!1),n.attr("disabled","disabled"),s.addClass("disabled")),s.children().last().removeAttr("colspan"),$("<td>").text("orders").appendTo(s)},o.prototype._setQtyInputs=function(t){function e(t){if(t=+t,isNaN(t)||t<0)return 0;var e=s.val();return"percent_of_equity"!=e?t=parseInt(t):t>100&&(t=100),t}var i,o,n,s,r,a,l=this,h=t.default_qty_value,c=$.extend({},t.default_qty_type),d=this._property.inputs[h.id],u=(this._property.inputs[c.id],this._setStdInput(h,$.t("Order size"),!0)),_=new p(u,d,e,(!1),this.model(),"Change Order Size");this.bindControl(_),i=u.closest("td"),i.removeAttr("colspan"),o=this._study.reportData()&&this._study.reportData().currency||"USD",n=$('<option value="cash_per_order">'+o+"</option>"),c.options=[$('<option value="fixed">'+$.t("Contracts")+"</option>"),n,$('<option value="percent_of_equity">'+$.t("% of equity")+"</option>")],s=this._setStdInput(c,"type"),r=s.closest("td"),a=r.closest("tr"),r.removeAttr("colspan"),r.detach().insertAfter(i),a.remove(),this._study.watchedData.subscribe(function(){var t=l._study.reportData()&&l._study.reportData().currency||"USD";n.text(t),s.closest("td").find("a[href=#cash_per_order]").text(t)})},o.prototype._setFillLimitsInputs=function(t){var e=this._setStdInput(t.backtest_fill_limits_assumption,$.t("Verify Price for Limit Orders")),i=e.closest("td");i.removeAttr("colSpan"),$("<td>").text("ticks").insertAfter(i)},o.prototype.prepareLayout=function(){this._$table=$(document.createElement("table")).addClass("property-page strategy-properties").attr("cellspacing","0").attr("cellpadding","2");var t=this._getStrategyInputs();t.initial_capital.min=1,this._setStdInput(t.initial_capital,$.t("Initial capital")),Array.isArray(t.currency.options)&&"NONE"==t.currency.options[0]&&(t.currency.options[0]=$('<option value="NONE">'+$.t("Default")+"</option>")),this._setStdInput(t.currency,$.t("Base currency")),$('<tr class="spacer"><td colspan="3"></td></tr>').appendTo(this._$table),this._setPyramidingInputs(t),$('<tr class="spacer"><td colspan="3"></td></tr>').appendTo(this._$table),this._setQtyInputs(t),$('<tr class="spacer"><td colspan="3"></td></tr>').appendTo(this._$table),this._setStdInput(t.calc_on_order_fills,$.t("Recalculate After Order filled")),$('<tr class="spacer"><td colspan="3"></td></tr>').appendTo(this._$table),this._setStdInput(t.calc_on_every_tick,$.t("Recalculate On Every Tick")),$('<tr class="spacer"><td colspan="3"></td></tr>').appendTo(this._$table),this._setFillLimitsInputs(t),this.loadData()},o.prototype.widget=function(){return this._$table},o.prototype.loadData=function(){var t,e,i;s.prototype.loadData.call(this),t=this._getStrategyInputs(),e=t.pyramiding,i=this._property.inputs[e.id],i.setValue(i.value(),!0)},o.prototype.destroy=function(){var t,e,i;s.prototype.destroy.call(this),t=this._getStrategyInputs(),e=t.pyramiding,i=this._property.inputs[e.id],i.unsubscribe(null,this._onAllowUpToChanged)},t.exports=o},function(t,e,i){(function(e){"use strict";function o(t,e,i){this.pane=t,this._isLeft=o.isLeft(e),this._properties=t.chart().properties().scalesProperties,this._disableContextMenu=!!i,this.jqCell=$(document.createElement("td")),this.jqCell.addClass("chart-markup-table"),this.jqCell.addClass("price-axis"),this.jqCell.width(25),this._dv=$("<div>"),this._dv.css("width","100%"),this._dv.css("height","100%"),this._dv.css("position","relative"),this._dv.css("overflow","hidden"),this._dv.appendTo(this.jqCell),this.canvas=f(this._dv,new g(16,16)),$(this.canvas).css("position","absolute"),$(this.canvas).css("z-order","2"),$(this.canvas).css("left",0),$(this.canvas).css("top",0),this.ctx=this.canvas.getContext("2d"),this.top_canvas=f(this._dv,new g(16,16)),$(this.top_canvas).css("position","absolute"),$(this.top_canvas).css("z-order","1"),$(this.top_canvas).css("left",0),$(this.top_canvas).css("top",0),this.top_ctx=this.top_canvas.getContext("2d"),this._textWidthCache=new s,this.restoreDefaultCursor(),this.update(),m(this.jqCell,this,!0),this.dialog=this.pane.chart().dialog,this.contextMenu=null,this.actions={},this._isVisible=!0,this.priceScale().onMarksChanged.subscribe(this,this.onMarksChanged)}var n=i(67).LineDataSource,s=i(83),r=i(132),a=r.Action,l=r.ActionSeparator,h=i(275),c=i(358),d=i(106),p=i(50),u=p.setCanvasSize,_=p.clearRect,f=p.addCanvasTo,g=p.Size,m=p.setMouseEventHandler,v=i(359);o.prototype._BORDER_SIZE=1,o.prototype._OFFSET_SIZE=1,o.prototype._TICK_LENGTH=3,o.LHS=1,o.RHS=2,o.isLeft=function(t){return t===o.LHS||t!==o.RHS&&(TradingView.logDebugChart("PriceAxisWidget.isLeft: wrong side"),!1)},o.prototype.backgroundColor=function(){return this.pane.chart().properties().paneProperties.background.value()},o.prototype.lineColor=function(){return this._properties.lineColor.value()},o.prototype.textColor=function(){return this._properties.textColor.value()},o.prototype.fontSize=function(){return this._properties.fontSize.value()},o.prototype.baseFont=function(){return TradingView.makeFont(this.fontSize(),"Arial","")},o.prototype.rendererOptions=function(){var t,e,i;return this._rendererOptions||(this._rendererOptions={isLeft:this._isLeft,width:0,height:0,borderSize:this._BORDER_SIZE,offsetSize:this._OFFSET_SIZE,tickLength:this._TICK_LENGTH,fontSize:NaN,font:"",widthCache:new s,_tickmarksCache:new c(11,"Arial","","#000"),color:""}),t=this._rendererOptions,e=!1,t.color!==this.textColor()&&(t.color=this.textColor(),e=!0),t.fontSize!==this.fontSize()&&(i=this.fontSize(),t.fontSize=i,t.font=this.baseFont(),t.paddingTop=Math.floor(i/4.5),t.paddingBottom=Math.ceil(i/4.5),t.paddingInner=Math.max(Math.ceil(i/3-t.tickLength/2),0),t.paddingOuter=Math.ceil(i/3),t.baselineOffset=Math.round(i/10),t.widthCache.reset(),e=!0),e&&t._tickmarksCache.reset(t.fontSize,"Arial","",t.color),this.size&&(t.width=this.size.w,t.height=this.size.h),this._rendererOptions},o.prototype.mouseDownEvent=function(t){var e,i,o;this.priceScale().isEmpty()||(e=this.pane.chart().model(),i=this.pane,o=this.pane.state(),this._mousedown=!0,this.jqCell.css("cursor",v("cursor_size_vertical","15 15")),e.startScalePrice(o,this.priceScale(),t.localY))},o.prototype.pressedMouseMoveEvent=function(t){var e=this.pane.chart().model(),i=(this.pane,this.pane.state()),o=this.priceScale();e.scalePriceTo(i,o,t.localY)},o.prototype.mouseDownOutsideEvent=function(t){var e=this.pane.chart().model(),i=this.pane.state(),o=this.priceScale();this._mousedown&&(this._mousedown=!1,e.endScalePrice(i,o),this.restoreDefaultCursor())},o.prototype.mouseUpEvent=function(t){var e=this.pane.chart().model(),i=(this.pane,this.pane.state()),o=this.priceScale();this._mousedown=!1,e.endScalePrice(i,o),this.restoreDefaultCursor()},o.prototype._initActions=function(t){var e,n,s,r,l;this.pane.state()&&(e=i(295).ActionBinder,n=this,this.actions.reset=new a({text:$.t("Reset Scale")}),this.actions.reset.callbacks().subscribe(this,o.prototype.reset),s=function(t){this._undoModel.setLockScaleProperty(this._property,t.checked,n.priceScale().mainSource(),this._undoText)},delete this.actions.setLockScale,this.priceScale().mainSource()instanceof TradingView.Series&&(this.actions.setLockScale=new a({text:$.t("Lock Scale"),checkable:!0,checked:this.priceScale().mainSource().properties().lockScale.value()}),this._lockScaleBinding=new e(this.actions.setLockScale,this.priceScale().mainSource().properties().lockScale,this.pane.chart().model(),"Undo LockScale",s),this._lockScaleBinding.setValue(this.priceScale().mainSource().properties().lockScale.value())),r=function(){this._undoModel.setAutoScaleProperty(this._property,this.value(),n.priceScale(),this._undoText)},this.actions.setAutoScale=new a({text:$.t("Auto Scale"),checkable:!0,checked:!0}),this._autoScaleBinding=new e(this.actions.setAutoScale,this.priceScale().properties().autoScale,this.pane.chart().model(),"Undo AutoScale",r),this._autoScaleBinding.setValue(this._autoScaleBinding.property().value()),
this.actions.setPercentage=new a({text:$.t("Percentage",{context:"scale_menu"}),checkable:!0,checked:!1}),l=function(){this._undoModel.setPercentProperty(this._property,this.value(),n.priceScale(),this._undoText)},this.actions.setPercentage.binding=new e(this.actions.setPercentage,this.priceScale().properties().percentage,this.pane.chart().model(),"Undo Percentage",l),this.actions.setLog=new a({text:$.t("Log Scale",{context:"scale_menu"}),checkable:!0,checked:!1}),this.actions.setLog.binding=new e(this.actions.setLog,this.priceScale().properties().log,this.pane.chart().model(),"Undo Log Scale"),this.actions.alignLabels=new a({text:$.t("Precise Labels",{context:"scale_menu"}),checkable:!0,checked:!1}),this.actions.alignLabels.binding=new e(this.actions.alignLabels,this.priceScale().properties().alignLabels,this.pane.chart().model(),"Precise Labels"),this._updateScalesActions())},o.prototype._updateScalesActions=function(){var t=this.priceScale(),e=t.mainSource()instanceof TradingView.Series,i=t.mainSource().properties();this.actions.setPercentage.setEnabled(!(t.isLog()||e&&i.lockScale.value()||e&&i.style.value()===TradingView.Series.STYLE_PNF)),this.actions.setLog.setEnabled(!(t.isPercent()||e&&i.lockScale.value()||e&&i.style.value()===TradingView.Series.STYLE_PNF)),this.actions.setAutoScale.setChecked(t._properties.autoScale.value()),this.actions.setAutoScale.setEnabled(!t.properties().autoScaleDisabled.value())},o.prototype.mouseClickEvent=function(t){},o.prototype.mouseDoubleClickEvent=function(t){this.reset(),TradingView.trackEvent("GUI","Double click price scale")},o.prototype.contextMenuEvent=function(t,i){!this._disableContextMenu&&e.enabled("scales_context_menu")&&this._createContextMenu().show(t)},o.prototype._createContextMenu=function(){return h.createMenu(this.getContextMenuActions())},o.prototype.getContextMenuActions=function(){var t,i;return this._initActions(),t=this.pane.chart().actions(),i=[this.actions.reset,new l,t.showLeftAxis,t.showRightAxis,new l,this.actions.setAutoScale,t.scaleSeriesOnly,new l,this.actions.setPercentage,this.actions.setLog,new l,t.showSymbolLabelsAction,t.showSeriesLastValue,t.showStudyPlotNamesAction,t.showStudyLastValue],e.enabled("countdown")&&i.push(t.showCountdown),i.push(this.actions.alignLabels),!TradingView.onWidget()&&e.enabled("show_chart_property_page")&&e.enabled("chart_property_page_scales")&&(i.push(new l),i.push(t.scalesProperties)),this.actions.setLockScale&&i.splice(6,0,this.actions.setLockScale),i},o.prototype.backLabels=function(t){var e,i,o,n,s,r,a=[],l=this.priceScale().orderedSources().slice(),h=this.pane,c=h.chart().model(),d=h.state(),p=[],u=c.sourceBeingMoved()||c.lineBeingEdited()||c.lineBeingCreated();if(u&&p.push(u),c.selectedSource()&&p.push(c.selectedSource()),c.hoveredSource()&&p.push(c.hoveredSource()),e=this.priceScale()===d.defaultPriceScale())for(i=this.pane.state().dataSources(),o=0;o<i.length;o++)d.isOverlay(i[o])&&l.push(i[o]);for(o=0;o<l.length;++o)if(n=l[o],(t||p.indexOf(n)===-1)&&(s=n.priceAxisViews(d,n.priceScale())))for(r=0;r<s.length;r++)a.push(s[r]);return a},o.prototype.optimalWidth=function(){var t,e,i,o,n,s,r;if(!this.isVisible())return 0;if(t=0,e=this.rendererOptions(),this.pane.state())for(i=this.ctx,o=this.priceScale().marks(),i.setFont(this.baseFont()),o.length>0&&(t=Math.max(e.widthCache.measureText(i,o[0].label),e.widthCache.measureText(i,o[o.length-1].label))),n=this.backLabels(!0),s=n.length;s--;)r=e.widthCache.measureText(i,n[s].text()),r>t&&(t=r);return Math.ceil(e.offsetSize+e.borderSize+e.tickLength+e.paddingInner+e.paddingOuter+t)},o.prototype.setSize=function(t){this.size&&this.size.equals(t)||(this.size=t,u(this.canvas,t),u(this.top_canvas,t),this.jqCell.css({width:t.w,"min-width":t.w,height:t.h}))},o.prototype.update=function(){},o.prototype._hightlightBackground=function(t,e,i){var o,n,s,r,a,l,h=e[0].price,c=e[0].price;for(o=1;o<e.length;o++)h=Math.min(h,e[o].price),c=Math.max(c,e[o].price);n=this.priceScale(),n.isPercent()&&i&&(s=i.firstValue(),h=n.priceRange().convertToPercent(h,s),c=n.priceRange().convertToPercent(c,s)),r=this.priceScale().priceToCoordinate(h),a=this.priceScale().priceToCoordinate(c),l="rgba(109, 158, 235, 0.3)",_(t,1,r,this.size.w-1,a-r,l)},o.prototype.drawBackground=function(t){var e,i,o,s;if(_(t,0,0,this.size.w,this.size.h,this.backgroundColor()),e=this.pane.chart().model(),i=e.model().selectedSource(),i&&i.priceScale()==this.priceScale()&&i instanceof n){if(o=i.axisPoints(),0===o.length)return;this._hightlightBackground(t,o,i.ownerSource())}s=e.model().crossHairSource(),s.startMeasurePoint()&&this._hightlightBackground(t,s.measurePoints(),this.pane.state().mainDataSource())},o.prototype.drawBorder=function(t){var e,i,o;t.save(),t.fillStyle=this.lineColor(),e=this.size.h,this._isLeft?(t.translate(-.5,-.5),i=this.size.w-this._BORDER_SIZE-1,o=this.size.w-1):(t.translate(.5,-.5),i=0,o=i+this._BORDER_SIZE),t.fillRect(i,0,o-i,e),t.restore()},o.prototype.drawTickMarks=function(t){var e,i,o,n,s,r;if(t.save(),t.strokeStyle=this.lineColor(),e=this.priceScale().marks(),t.fillStyle=this.textColor(),t.setFont(this.baseFont()),i=this,t.translate(-.5,-.5),o=this.rendererOptions(),i._isLeft){for(t.fillStyle=i.lineColor(),t.beginPath(),n=this.size.w-i._OFFSET_SIZE-i._BORDER_SIZE-i._TICK_LENGTH,s=e.length;s--;)t.rect(n,e[s].coord,i._TICK_LENGTH,1);for(t.fill(),s=e.length;s--;)o._tickmarksCache.paintTo(t,e[s].label,n-o.paddingInner,e[s].coord,"right")}else{for(t.fillStyle=i.lineColor(),t.beginPath(),r=i._BORDER_SIZE+i._OFFSET_SIZE,s=e.length;s--;)t.rect(r,e[s].coord,i._TICK_LENGTH,1);for(t.fill(),s=e.length;s--;)o._tickmarksCache.paintTo(t,e[s].label,r+i._TICK_LENGTH+o.paddingInner,e[s].coord,"left")}t.restore()},o.prototype._alignLabels=function(){var t,e,i,o,n,s,r,a,l,h,c,d,p,u=this.size.h/2,_=[],f=this.priceScale().orderedSources().slice(),g=this.pane,m=(g.chart().model(),g.state()),v=this.rendererOptions(),y=this.priceScale()===m.defaultPriceScale();if(y)for(t=this.pane.state().dataSources(),e=0;e<t.length;e++)m.isOverlay(t[e])&&f.push(t[e]);for(i=this.priceScale().mainSource(),e=0;e<f.length;++e)if(o=f[e],n=o.priceAxisViews(m,o.priceScale())){for(s=0;s<n.length;s++)_.push(n[s]);i==o&&n.length>0&&(u=n[0].floatCoordinate())}if(r=_.filter(function(t){return t.floatCoordinate()<=u}),a=_.filter(function(t){return t.floatCoordinate()>u}),r.sort(function(t,e){return e.floatCoordinate()-t.floatCoordinate()}),r.length&&a.length&&a.push(r[0]),a.sort(function(t,e){return t.floatCoordinate()-e.floatCoordinate()}),_.forEach(function(t){t._fixedCoordinate=t.coordinate()}),l=this.priceScale().properties(),l.alignLabels&&l.alignLabels.value()){for(e=1;e<r.length;e++)h=r[e],c=r[e-1],d=c.renderer().height(v,!1),h.coordinate()>c._fixedCoordinate-d&&(p=c._fixedCoordinate-d,h._fixedCoordinate=p);for(s=1;s<a.length;s++)h=a[s],c=a[s-1],d=c.renderer().height(v,!0),h.coordinate()<c._fixedCoordinate+d&&(p=c._fixedCoordinate+d,h._fixedCoordinate=p)}},o.prototype.drawBackLabels=function(t){var e,i,o,n,s;for(t.save(),e=this.backLabels(),i=this.rendererOptions(),o=0;o<e.length;o++)n=e[o],s=n.renderer(),n._fixedCoordinate&&(s._data.coordinate=n._fixedCoordinate),s.draw(t,i);t.restore()},o.prototype.drawCrossHairLabel=function(t){var e,i,o,n,s,r,a,l=this.pane.chart().model().model(),h=[],c=l.sourceBeingMoved()||l.lineBeingEdited()||l.lineBeingCreated();for(c&&h.push({source:c,scale:c.priceScale()}),l.selectedSource()&&h.push({source:l.selectedSource(),scale:l.selectedSource().priceScale()}),l.hoveredSource()&&h.push({source:l.hoveredSource(),scale:l.hoveredSource().priceScale()}),h.push({source:l.crossHairSource(),scale:this.priceScale()}),e=this.pane.state(),i=0;i<h.length;i++)if(o=h[i],n=o.source.priceAxisViews(e,o.scale))for(s=0;s<n.length;s++)r=n[s],t.save(),a=r.renderer(),r._fixedCoordinate&&(a._data.coordinate=r._fixedCoordinate),a.draw(t,this.rendererOptions()),t.restore()},o.prototype.priceScale=function(){var t=this.pane.state(),e=[];return e=this._isLeft?[t.leftPriceScale(),t.rightPriceScale()]:[t.rightPriceScale(),t.leftPriceScale()],null===e[0].mainSource()?null===e[1].mainSource()?e[0]:e[1]:e[0]},o.prototype.isVisible=function(){return this._isVisible},o.prototype.setVisible=function(t){t=!!t,t!==this._isVisible&&(t?this.jqCell.css("display","table-cell"):this.jqCell.css("display","none"),this._isVisible=t)},o.prototype.setAutoScale=function(t){var e=this.pane.state,i=this.priceScale(),o=this.pane.chart().model();o.setPriceAutoScale(e,i,t)},o.prototype.reset=function(){var t=this.pane.state(),e=this.priceScale(),i=this.pane.chart().model();i.resetPriceScale(t,e)},o.prototype.paint=function(t){this._isVisible&&t&&(t===d.UPDATE_CURSOR_ONLY?(this.top_ctx.clearRect(-.5,-.5,this.size.w,this.size.h),this.drawCrossHairLabel(this.top_ctx)):(this._alignLabels(),this.drawBackground(this.ctx),this.drawBorder(this.ctx),this.pane.state()&&(this.drawTickMarks(this.ctx),this.drawBackLabels(this.ctx),this.top_ctx.clearRect(-.5,-.5,this.size.w,this.size.h),this.drawCrossHairLabel(this.top_ctx))))},o.prototype.restoreDefaultCursor=function(){this.jqCell.css("cursor","default")},o.prototype.image=function(){var t={};return t.content=this.canvas.toDataURL(),t.contentWidth=this.size.w,t.contentHeight=this.size.h,t},o.prototype.onMarksChanged=function(){var t,e=this.optimalWidth();this._prevOptimalWidth<e&&(t=this,this.updateTimeout||(this.updateTimeout=setTimeout(function(){t.pane&&t.pane.chart&&t.pane.chart()&&t.pane.chart().model().model().fullUpdate(),t.updateTimeout=null},100))),this._prevOptimalWidth=e},t.exports=o}).call(e,i(1))},function(t,e,i){(function(e){"use strict";function i(t,e,i,o){this.reset(t,e,i,o)}i.prototype.maxCount=50,i.prototype.reset=function(t,e,i,o){for(var n=this._next;n&&n!==this;n=n._next)n.canvas.width=0,n._next=null,n._prev=null;this._next=this,this._prev=this,this._count=0,this._fontSize=t,this._color=o,this._font=TradingView.makeFont(t,e,i),this._hash={}},i.prototype.paintTo=function(t,e,i,o,n){var s=this.getLabelImage(e);"left"!==n&&(i-=s.width),o-=Math.floor(s.height/2),t.drawImage(s.canvas,i,o)},i.prototype.getLabelImage=function(t){var i,o,n,s,r;return Object.prototype.hasOwnProperty.call(this._hash,t)?i=this._hash[t]:(this._count<this.maxCount?(this._count++,i={_next:this._next,_prev:this,text:t,width:0,height:0,canvas:document.createElement("canvas")},o=i.canvas.getContext("2d"),o.font=this._font):(i=this._prev,delete this._hash[i.text],i.text=t,o=i.canvas.getContext("2d")),n=Math.ceil(this._fontSize/4),s=Math.round(this._fontSize/10),r=o.measureText(t).width,i.height=this._fontSize+2*n,i.width=Math.max(1,r),0!==r?this._hash[i.text]=i:e.enabled("charting_library_debug_mode")&&console.log('Canvas 2d context measureText return zero width for "'+t+'" text'),i.canvas.height=i.height,i.canvas.width=i.width,o=i.canvas.getContext("2d"),o.font=this._font,o.fillStyle=this._color,o.fillText(t,0,n+this._fontSize-s)),this._next!==i&&(i._next._prev=i._prev,i._prev._next=i._next,i._prev=this,i._next=this._next,this._next._prev=i,this._next=i),i},t.exports=i}).call(e,i(1))},function(t,e){"use strict";function i(t,e,i){var o,n;return i||(i="light"),o=i+"/"+t+".cur",n=TradingView.wrapUrl("url("+TradingView.resourceFullPath(o)+")"),$.browser.msie?n+", default":n+" "+e+", default"}t.exports=i},function(t,e,i){(function(e){"use strict";function i(t,e,i){this._model=e,this._paneWidget=t,this._chart=t._chart,this._mainDiv=i,this.jqDiv=$('<div class="pane-controls">').appendTo(i),this._chart.navigationButtonsController().addWidget({widget:this.jqDiv,acceptableOffset:0,checkingWidget:i}),this.update()}i.prototype.update=function(){var t,i,o,n,s,r,a,l,h;if(!this._chart.isActive())return void this.jqDiv.css("display","none");if(this.jqDiv.css("display","block"),t=this,i=t._model,o=t._chart,n=t._paneWidget.state(),s=i.panes().indexOf(n),this.jqDiv.toggleClass("toppane",0===s||this._chart.isMaximizedPane()),r=!1,!n.containsMainSeries()&&!this._chart.isMaximizedPane()){for(a=0,l=n.dataSources(),h=l.length;h--;)if(l[h]instanceof TradingView.Study&&(a++,a>1)){r=!0;break}l=null}s>0&&!this._chart.isMaximizedPane()?(this._$upButton||(this._$upButton=$(document.createElement("a")).addClass("pane-legend-icon up").append(e("legend-up","14x14")).attr("title",$.t("Move Up")).on("click",function(){t._model.rearrangePanes(t._chart,t._model.panes().indexOf(t._paneWidget.state()),"up")})),this._$upButton.appendTo(this.jqDiv)):this._$upButton&&this._$upButton.detach(),s<this._model.panes().length-1&&!this._chart.isMaximizedPane()?(this._$downButton||(this._$downButton=$(document.createElement("a")).addClass("pane-legend-icon down").append(e("legend-down","14x14")).attr("title",$.t("Move Down")).on("click",function(){t._model.rearrangePanes(t._chart,t._model.panes().indexOf(t._paneWidget.state()),"down")})),this._$downButton.appendTo(this.jqDiv)):this._$downButton&&this._$downButton.detach(),r?(this._$closeButton||(this._$closeButton=$(document.createElement("a")).addClass("pane-legend-icon delete").append(e("legend-delete","14x14")).attr("title",$.t("Delete")).on("click",function(){t._model.removePane(t._chart,t._model.panes().indexOf(t._paneWidget.state()))})),this._$closeButton.appendTo(this.jqDiv)):this._$closeButton&&this._$closeButton.detach(),this._model.panes().length>1&&!this._chart.isMaximizedPane()?(this._$maximizeButton||(this._$maximizeButton=$(document.createElement("a")).addClass("pane-legend-icon maximize").append(e("legend-maximize","14x14")).attr("title",$.t("Toggle Maximize Pane")).on("click",function(){t._chart.toggleMaximizePane(t._paneWidget)})),this._$maximizeButton.appendTo(this.jqDiv)):this._$maximizeButton&&this._$maximizeButton.detach(),this._model.panes().length>1&&this._chart.isMaximizedPane()?(this._$restoreButton||(this._$restoreButton=$(document.createElement("a")).addClass("pane-legend-icon restore").append(e("legend-restore","14x14")).attr("title",$.t("Toggle Maximize Pane")).on("click",function(){t._chart.toggleMaximizePane(t._paneWidget)})),this._$restoreButton.appendTo(this.jqDiv)):this._$restoreButton&&this._$restoreButton.detach()},t.exports=i}).call(e,i(26))},function(t,e,i){(function(e){"use strict";function o(t,e,i){this.chart=t,this.paneA=t.paneWidgets()[e],this.paneB=t.paneWidgets()[i],this.jqRow=$(document.createElement("tr")),this.jqRow.height(o.HEIGHT),this.jqCell=$(document.createElement("td")),this.jqCell.appendTo(this.jqRow),this.jqCell.addClass("pane-separator"),this.jqCell.attr("colspan","3"),this.jqCell.css("background",this.chart.properties().scalesProperties.lineColor.value()),this.jqCell.click(function(){}),this.handle=$('<div class="handle">').appendTo(this.jqCell),$(this.handle).css("cursor",s("cursor_size_vertical","16 15")),n(this.handle,this)}var n=i(50).setMouseEventHandler,s=i(359);o.HEIGHT=1,o.prototype.hide=function(){this.jqRow.addClass("js-hidden")},o.prototype.show=function(){this.jqRow.removeClass("js-hidden")},o.prototype.mouseDownEvent=function(t){(0===t.button||Modernizr.touch)&&(this.startY=t.pageY,this.deltaY=0,this.totalHeight=this.paneA.size.h+this.paneB.size.h,this.totalStretch=this.paneA.stretchFactor()+this.paneB.stretchFactor(),this.prevStretchA=this.paneA.stretchFactor(),this.minPaneHeight=30,this.maxPaneHeight=this.totalHeight-this.minPaneHeight,this.pixelStretchFactor=this.totalStretch/this.totalHeight)},o.prototype.pressedMouseMoveEvent=function(t){var i,o,n,s;(0===t.button||Modernizr.touch)&&(t.preventDefault(),this.deltaY=t.pageY-this.startY,i=this.paneA.size.h,o=e.clamp(i+this.deltaY,this.minPaneHeight,this.maxPaneHeight),n=o*this.pixelStretchFactor,s=this.totalStretch-n,this.paneA.setStretchFactor(n),this.paneB.setStretchFactor(s),this.chart._adjustSize(),this.paneA.size.h!==i&&(this.startY=t.pageY),this.chart.paint())},o.prototype.mouseUpEvent=function(t){(0===t.button||Modernizr.touch)&&(this.chart._model.addPaneStretchFactorUndoCommand(this.paneA._state,this.paneB._state,this.prevStretchA,this.paneA.stretchFactor()),this.startY=0,this.deltaY=0,this.totalHeight=0,this.totalStretch=0,this.minPaneHeight=0,this.maxPaneHeight=0,this.pixelStretchFactor=0)},o.prototype.update=function(){this.jqCell.css("background",this.chart.properties().scalesProperties.lineColor.value())},o.prototype.paint=function(){},o.prototype.image=function(){var t={},e=o.HEIGHT,i=this.paneA.lhsPriceAxisWidget.size.w,n=this.paneA.size.w,s=this.paneA.rhsPriceAxisWidget.size.w,r=$('<canvas width="'+i+'" height="'+e+'">')[0],a=r.getContext("2d");return a.fillStyle=this.chart.properties().scalesProperties.lineColor.value(),a.fillRect(0,0,i,e),t.leftAxis={content:r.toDataURL(),contentWidth:i,contentHeight:e},r=$('<canvas width="'+n+'" height="'+e+'">')[0],a=r.getContext("2d"),a.fillStyle=this.chart.properties().scalesProperties.lineColor.value(),a.fillRect(0,0,n,e),t.content=r.toDataURL(),t.contentWidth=n,t.contentHeight=e,r=$('<canvas width="'+s+'" height="'+e+'">')[0],a=r.getContext("2d"),a.fillStyle=this.chart.properties().scalesProperties.lineColor.value(),a.fillRect(0,0,s,e),t.rightAxis={content:r.toDataURL(),contentWidth:s,contentHeight:e},t},t.exports=o}).call(e,i(21))},function(t,e,i){"use strict";function o(t,e,o,s,r,a,l,h){var c=i(287).ChartUndoModel,d=new c(t,e,o,s,r,a,l,h);return d.model().invalidate(new n(n.FULL_UPDATE)),d}var n=i(106),s=i(107);TradingView.MAMetaInfo=function(){var t={id:"MASimple",inputs:[{id:"length",type:"integer",defval:10},{id:"source",type:"text",defval:"close"}],plots:[{id:"MovAvg",type:"line"}],properties:[{id:"is_price_study",type:"bool",value:"true"}],palettes:{}};return new s(t)},TradingView.VolumeMetaInfo=function(){var t={id:"Volume",inputs:[],plots:[{id:"Volume",type:"histogram"},{id:"Color",type:"colorer",palette:"volumePalette",target:"Volume"}],properties:[{id:"is_price_study",type:"bool",value:"false"}],palettes:{volumePalette:{colors:{0:{color:"#007F0E",width:1,style:CanvasEx.LINESTYLE_SOLID,name:"Up Volume"},1:{color:"#872323",width:1,style:CanvasEx.LINESTYLE_SOLID,name:"Down Volume"}}}}};return new s(t)},TradingView.DMMetaInfo=function(){var t={id:"DM",inputs:[{id:"ADX smoothing",max:50,min:1,type:"integer",defval:14},{id:"DI Length",max:500,min:1,type:"integer",defval:14}],plots:[{id:"ADX",type:"line"},{id:"DI_P",type:"line"},{id:"DI_N",type:"line"}],properties:[{id:"is_price_study",type:"bool",value:"false"}],palettes:{}};return new s(t)},TradingView.RSIMetaInfo=function(){var t={id:"RSI",inputs:[{id:"length",type:"integer",defval:14}],plots:[{id:"RelativeStrengthIndex",type:"line"}],properties:[{id:"is_price_study",type:"bool",value:"false"}],palettes:{}};return new s(t)},t.exports=o},function(t,e,i){(function(e){"use strict";function o(t,e){this.chart=t,this._properties=t.properties().scalesProperties,this.contextMenu=null,this._disableContextMenu=!!e,this.jqRow=$(document.createElement("tr")),this.jqLhsTimeAxisStub=$(document.createElement("td")),this.jqLhsTimeAxisStub.addClass("chart-markup-table"),this.jqLhsTimeAxisStub.appendTo(this.jqRow),this.jqLhsStub=$("<div>"),this.jqLhsStub.css("width","100%"),this.jqLhsStub.css("height","100%"),this.jqLhsStub.css("position","relative"),this.jqLhsStub.css("overflow","hidden"),this.jqLhsStub.appendTo(this.jqLhsTimeAxisStub),this.lhsCanvas=_(this.jqLhsStub,new f(16,16)),$(this.lhsCanvas).css("position","absolute"),$(this.lhsCanvas).css("z-order","2"),$(this.lhsCanvas).css("left",0),$(this.lhsCanvas).css("top",0),this.lhsCtx=this.lhsCanvas.getContext("2d"),this.jqCell=$(document.createElement("td")),this.jqCell.appendTo(this.jqRow),this.jqCell.addClass("chart-markup-table"),this.jqCell.addClass("time-axis"),this.jqCell.height(25),this._dv=$("<div>"),this._dv.css("width","100%"),this._dv.css("height","100%"),this._dv.css("position","relative"),this._dv.css("overflow","hidden"),this._dv.appendTo(this.jqCell),this.canvas=_(this._dv,new f(16,16)),$(this.canvas).css("position","absolute"),$(this.canvas).css("z-order","2"),$(this.canvas).css("left",0),$(this.canvas).css("top",0),this.ctx=this.canvas.getContext("2d"),this.top_canvas=_(this._dv,new f(16,16)),$(this.top_canvas).css("position","absolute"),$(this.top_canvas).css("z-order","1"),$(this.top_canvas).css("left",0),$(this.top_canvas).css("top",0),this.top_ctx=this.top_canvas.getContext("2d"),this.jqRhsTimeAxisStub=$(document.createElement("td")),this.jqRhsTimeAxisStub.addClass("chart-markup-table"),this.jqRhsTimeAxisStub.appendTo(this.jqRow),this.jqRhsStub=$("<div>"),this.jqRhsStub.css("width","100%"),this.jqRhsStub.css("height","100%"),this.jqRhsStub.css("position","relative"),this.jqRhsStub.css("overflow","hidden"),this.jqRhsStub.appendTo(this.jqRhsTimeAxisStub),this.rhsCanvas=_(this.jqRhsStub,new f(16,16)),$(this.rhsCanvas).css("position","absolute"),$(this.rhsCanvas).css("z-order","2"),$(this.rhsCanvas).css("left",0),$(this.rhsCanvas).css("top",0),this.rhsCtx=this.rhsCanvas.getContext("2d"),this.restoreDefaultCursor(),this.update(),this._minVisibleSpan=TradingView.MINUTE_SPAN,g(this.jqCell,this,!0),this.updatePriceScalesVisibility()}var n=i(357),s=i(67).LineDataSource,r=i(83),a=i(132),l=a.ActionSeparator,h=i(275),c=i(106),d=i(50),p=d.setCanvasSize,u=d.clearRect,_=d.addCanvasTo,f=d.Size,g=d.setMouseEventHandler,m=i(359);o.prototype._BORDER_SIZE=1,o.prototype._OFFSET_SIZE=1,o.prototype._TICK_LENGTH=3,o.prototype.backgroundColor=function(){return this.chart.properties().paneProperties.background.value()},o.prototype.lineColor=function(){return this._properties.lineColor.value()},o.prototype.textColor=function(){return this._properties.textColor.value()},o.prototype.fontSize=function(){return this._properties.fontSize.value()},o.prototype.baseFont=function(){return TradingView.makeFont(this.fontSize(),"Arial","")},o.prototype.baseBoldFont=function(){return TradingView.makeFont(this.fontSize(),"Arial","bold")},o.prototype.rendererOptions=function(){var t,e;return this._rendererOptions||(this._rendererOptions={borderSize:this._BORDER_SIZE,offsetSize:this._OFFSET_SIZE,tickLength:this._TICK_LENGTH,fontSize:NaN,font:"",widthCache:new r}),t=this._rendererOptions,t.fontSize!==this.fontSize()&&(e=this.fontSize(),t.fontSize=e,t.font=this.baseFont(),t.paddingTop=Math.ceil(Math.max(e/4.5-t.tickLength/2,0)),t.paddingBottom=Math.ceil(e/4.5),t.paddingHorizontal=Math.ceil(e/3),t.baselineOffset=Math.round(this.fontSize()/10),t.widthCache.reset()),this._rendererOptions},o.prototype.updatePriceScalesVisibility=function(){var t=this.chart.properties().scalesProperties;t.showLeftScale.value()?this.jqLhsTimeAxisStub.css("display","table-cell"):this.jqLhsTimeAxisStub.css("display","none"),t.showRightScale.value()?this.jqRhsTimeAxisStub.css("display","table-cell"):this.jqRhsTimeAxisStub.css("display","none")},o.prototype.mouseDownEvent=function(t){if(this._mousedown)return!0;this._mousedown=!0;var e=this.chart.model();e.timeScale().isEmpty()||($(this.jqCell).css("cursor",m("cursor_size_horizontal","15 15")),e.startScaleTime(t.localX))},o.prototype.mouseDownOutsideEvent=function(t){var e=this.chart.model();!e.timeScale().isEmpty()&&this._mousedown&&(this._mousedown=!1,e.endScaleTime(),this.restoreDefaultCursor())},o.prototype.pressedMouseMoveEvent=function(t){var e,i,o,n=this.chart.model();n.timeScale().isEmpty()||(e=!1,i=(new Date).valueOf(),this._lastScrollScaleTime&&(o=i-this._lastScrollScaleTime,o<100&&(e=!0)),e||(n.scaleTimeTo(t.localX),this._lastScrollScaleTime=i))},o.prototype.mouseUpEvent=function(t){this._mousedown=!1;var e=this.chart.model();e.timeScale().isEmpty()||(e.endScaleTime(),this.restoreDefaultCursor())},o.prototype.contextMenuEvent=function(t,i){!this._disableContextMenu&&e.enabled("scales_context_menu")&&this._createContextMenu().show(t)},o.prototype._createContextMenu=function(){return h.createMenu(this.getContextMenuActions())},o.prototype.getContextMenuActions=function(){var t,i,o=this.chart;return o.model().mainSeries().createSessStudy(),o.updateActions(),t=o.actions(),i=e.enabled("charting_library_base")?[t.timeScaleReset,new l,t.applyTimeZone,t.extendedHours]:[t.timeScaleReset,new l,t.applyTimeZone,t.sessionBreaks,t.extendedHours],e.enabled("timezone_menu")||i.splice(2,1),e.enabled("show_chart_property_page")&&e.enabled("chart_property_page_timezone_sessions")&&i.push(new l,t.tmzProperties),i},o.prototype.mouseClickEvent=function(t){},o.prototype.mouseDoubleClickEvent=function(t){TradingView.trackEvent("GUI","Double click time scale"),this.chart.model().resetTimeScale()},o.prototype.optimalHeight=function(){var t=this.rendererOptions();return Math.ceil(t.offsetSize+t.borderSize+t.tickLength+t.fontSize+t.paddingTop+t.paddingBottom)},o.prototype.setSize=function(t,e,i){this.size&&this.size.equals(t)||(this.lhsStubSize=e,p(this.lhsCanvas,e),this.jqLhsTimeAxisStub.width(e.w),this.jqLhsTimeAxisStub.height(e.h),this.rhsStubSize=i,p(this.rhsCanvas,i),this.jqRhsTimeAxisStub.width(i.w),this.jqRhsTimeAxisStub.height(i.h),this.size=t,p(this.canvas,t),p(this.top_canvas,t),this.lhsCanvas.getContext("2d"),this.rhsCanvas.getContext("2d"),this.canvas.getContext("2d"),this.top_canvas.getContext("2d"),this.jqCell.width(t.w),this.jqCell.height(t.h))},o.prototype._spanIndex=function(t){for(var e=[TradingView.MINUTE_SPAN,TradingView.HOUR_SPAN,TradingView.DAY_SPAN,TradingView.MONTH_SPAN,TradingView.YEAR_SPAN],i=e.length-1;i>0;){if(e[i]<=t)return i;i--}return i},o.prototype._spanOffset=function(t,e){if(e<t)throw Error("actual span cuold not be less then base");return this._spanIndex(e)-this._spanIndex(t)},o.prototype.update=function(){var t,e;this.chart.model()&&(t=this.chart.model().timeScale().marks(),t&&(e=this,this._minVisibleSpan=TradingView.YEAR_SPAN,$.each(t,function(){e._minVisibleSpan=Math.min(this.span,e._minVisibleSpan)})))},o.prototype._hightlightBackground=function(t,e){var i,o,n,s,r=this.chart.model(),a=r.timeScale(),l=e[0].index,h=e[0].index;for(i=1;i<e.length;i++)l=Math.min(l,e[i].index),h=Math.max(h,e[i].index);o=a.indexToCoordinate(l),n=a.indexToCoordinate(h),s="rgba(109, 158, 235, 0.3)",u(t,o,1,n-o,this.size.h-1,s)},o.prototype.drawBackground=function(t){var e,i,o,n,r;if(u(t,0,0,this.size.w,this.size.h,this.backgroundColor()),e=this.chart.model()){if(i=e.timeScale(),o=e.model().selectedSource(),o&&o instanceof s&&!i.isEmpty()){if(n=o.axisPoints(),0===n.length)return;this._hightlightBackground(t,n)}r=e.model().crossHairSource(),r.startMeasurePoint()&&this._hightlightBackground(t,r.measurePoints())}},o.prototype.drawBorder=function(t){t.save(),t.fillStyle=this.lineColor(),t.fillRect(-.5,.5,this.size.w+.5,this._BORDER_SIZE),t.restore()},o.prototype.drawStubs=function(){var t,e=this._BORDER_SIZE,i=2*this._BORDER_SIZE,o=this.lhsCtx;u(o,0,0,this.lhsStubSize.w,this.lhsStubSize.h,this.backgroundColor()),o.fillStyle=this.lineColor(),o.fillRect(this.lhsStubSize.w-i-.5,.5,i,e),o.fillRect(this.lhsStubSize.w-i-.5,-.5,e,e),t=this.rhsCtx,u(t,0,0,this.rhsStubSize.w,this.rhsStubSize.h,this.backgroundColor()),t.fillStyle=this.lineColor(),t.fillRect(-.5,.5,i,e),t.fillRect(.5,-.5,e,e)},o.prototype.drawTickMarks=function(t){var e,i,o,n,s,r,a,l,h,c,d,p=this.chart.model().timeScale().marks();if(p&&0!==p.length){for(e=p.reduce(function(t,e){return t.span>e.span?t:e}).span,e>30&&e<40&&(e=30),t.save(),t.strokeStyle=this.lineColor(),i=this.rendererOptions(),o=i.borderSize+i.tickLength+i.paddingTop+i.fontSize-i.baselineOffset,t.textAlign="center",t.translate(.5,.5),t.fillStyle=this.lineColor(),t.beginPath(),n=p.length;n--;)t.rect(p[n].coord,i.borderSize,1,i.tickLength);for(t.fill(),t.fillStyle=this.textColor(),s={},r=this.baseFont(),a=this.baseBoldFont(),n=0;n<p.length;n++)l=p[n].span>=e?a:r,h=s[l]||[],h.push(p[n]),s[l]=h;for(c in s)for(t.setFont(c),d=s[c],n=0;n<d.length;n++)t.fillText(d[n].label,d[n].coord,o);t.restore()}},o.prototype.drawBackLabels=function(t){var e,i,o,n,s,r,a,l;for(t.save(),e=this.chart.model().dataSources(),i=this.chart.model(),o=i.sourceBeingMoved()||i.lineBeingEdited()||i.lineBeingCreated(),n=this.rendererOptions(),s=0;s<e.length;s++)if(r=e[s],r!==this.chart.model().crossHairSource()&&r!==o&&r.timeAxisViews&&(a=r.timeAxisViews()))for(l=0;l<a.length;l++)a[l].renderer().draw(t,n);t.restore()},o.prototype.drawCrossHairLabel=function(t){var e,i,o,n,s;if(this.top_ctx.clearRect(-.5,-.5,this.size.w,this.size.h),e=this.chart.model(),i=e.sourceBeingMoved()||e.lineBeingEdited()||e.lineBeingCreated(),o=this.rendererOptions(),i){if(t.save(),i.timeAxisViews&&(n=i.timeAxisViews()))for(s=0;s<n.length;s++)n[s].renderer().draw(t,o);return void t.restore()}if(t.save(),n=this.chart.model().crossHairSource().timeAxisView())for(s=0;s<n.length;s++)n[s].renderer().draw(t,o);t.restore()},o.prototype.paint=function(t){if(0!==t)if(t===c.UPDATE_CURSOR_ONLY)this.drawCrossHairLabel(this.top_ctx);else{var e=this.ctx;this.drawBackground(e),this.drawBorder(e),this.drawStubs(),this.chart.model()&&(this.drawTickMarks(e),this.drawBackLabels(e),this.drawCrossHairLabel(this.top_ctx))}},o.prototype.setStubVisible=function(t,e){var i=n.isLeft(t)?this.jqLhsTimeAxisStub:this.jqRhsTimeAxisStub;e?i.css("display","table-cell"):i.css("display","none")},o.prototype.restoreDefaultCursor=function(){this.jqCell.css("cursor","default")},o.prototype.image=function(){var t={};return t.content=this.canvas.toDataURL(),t.contentWidth=this.size.w,t.contentHeight=this.size.h,t.lhsStub={},t.lhsStub.content=this.lhsCanvas.toDataURL(),t.lhsStub.contentWidth=this.lhsStubSize.w,t.lhsStub.contentHeight=this.lhsStubSize.h,t.rhsStub={},t.rhsStub.content=this.rhsCanvas.toDataURL(),t.rhsStub.contentWidth=this.rhsStubSize.w,t.rhsStub.contentHeight=this.rhsStubSize.h,t},t.exports=o}).call(e,i(1))},function(t,e,i){(function(e,o){"use strict";function n(t,e){this._defaultOptions={maxHeight:550,padding:20,minHeight:258},this.options=$.extend({},this._defaultOptions,t||{}),this._model=e}var s=i(365),r=i(213),a=i(67).LineDataSource,l=i(106),h=i(366),c=i(46);n.prototype.getSourceProperties=function(){var t,e,i,o,n,s,r,l={groups:[],model:this._model,drawings:[]};for(t=0;t<this._model.panes().length;t++){for(e=this._model.panes()[t],i=[],o=e.orderedSources(),n=0;n<o.length;n++)s=o[n],s.showInObjectTree()&&i.push({datasource:s,name:s.title()});for(r=e.dataSources(),n=0;n<r.length;n++)s=r[n],s instanceof a&&s.showInObjectTree()&&l.drawings.push({datasource:s,name:s.title(),symbol:c.shortName(s.symbol()),lastupdate:s.properties().lastUpdateTime.value()});i.length&&l.groups.push({children:i})}return l},n.prototype.calcHeight=function(t,e){var i,o=0;for(i=0;i<t.length;i++){if(t[i]>e){o=0===i?t[0]:t[i-1];break}o=t[i]}return o<this.options.minHeight&&(o=this.options.minHeight),o},n.prototype.tabChanged=function(t){0===t?this.objectsTreeTab.tabChanged():this.manageDrawingsTab.tabChanged()},n.prototype.onDestroy=function(){this.objectsTreeTab.unsubscribeListeners(),this.manageDrawingsTab&&this.manageDrawingsTab.unsubscribeListeners()},n.prototype.show=function(t){var o,n,r,a,l,c,d,p,u,_,f,g;this.title=$.t("Objects Tree"),TradingView.trackEvent("GUI","Objects Tree"),o={hideTitle:!0,dragHandle:".properties-tabs"},l=TVDialogs.createDialog(this.title,o),c=l.find("._tv-dialog-content"),n=$('<div class="properties-tabs"></div>').appendTo(c),r=$('<a href="#" class="properties-tabs-label with-filter"></a>').text($.t("Objects Tree")).appendTo(n),d=$("<div>").appendTo(c),d.addClass("with-drawings"),p=$(window).height(),u=p>this.options.maxHeight?this.options.maxHeight:p,u-=n.height(),u-=this.options.padding,_=$('<div class="main-tree-page active">').appendTo(d),_.addClass("no-top-border"),e.enabled("support_manage_drawings")&&($('<a href="#" class="properties-tabs-label"></a>').text($.t("Manage Drawings")).appendTo(n),a=$('<div class="main-tree-page active">').appendTo(d),f=i(367),this.manageDrawingsTab=new f(this,this.options,this._model,l),this.manageDrawingsTab.createView(a,u)),this.objectsTreeTab=new s(this,this.options,this._model,l),this.objectsTreeTab.createView(_,r,u,t),this.tabs=new h(n,d,{saveTab:"ObjectsTreeDialog.tab",activeTab:this.options.activeTab}),this.tabs.tabChanged.subscribe(this,this.tabChanged),
TVDialogs.applyHandlers(l),TVDialogs.positionDialog(l),g=this,l.on("destroy",this.onDestroy.bind(this)),setTimeout(function(){l.unbind("mousedownoutside"),l.on("mousedownoutside",function(t){var e=$(t.target).parents().andSelf();e.is("._tv-dialog, .properties-toolbar, .colorpicker, .charts-popup-list, ._tv-dialog, .tvcolorpicker-popup, .symbol-edit-popup, .context-menu")||(TVDialogs.destroy(g.title),l.unbind("mousedownoutside"))})})},n._getBackgroundPosition=function(t){return"-"+t[0]+"px -"+t[1]+"px"},n.List=function(t,e,i,o){this.model=t,this.datasources={},this.contentHeights=[],this.content=e,this.dialog=i,this.options=o},n.List.prototype.setDefaultItemClass=function(t){this.defaultItemClass=t},n.List.prototype.setActiveListener=function(t){this.activeListener=t},n.List.prototype.setActive=function(t){this.content.find("._tv-dialog-tree-item").removeClass("active"),t.addClass("active"),this.activeListener&&this.activeListener(t);var e=this.datasources[t.attr("id")];this.model.setSelectedSource(e.datasource),this.model.invalidate(new l(l.LIGHT_UPDATE))},n.List.prototype.createItem=function(t,e,i){var o,n,s,r=this,l=$('<a class="_tv-dialog-tree-item"></a>').appendTo(e),h=$('<span class="tree-icon-container">').appendTo(l);return t.skipped&&l.addClass("skipped"),l.attr("id",t.datasource.id()),this.defaultItemClass&&l.addClass(this.defaultItemClass),this.datasources[t.datasource.id()]=t,this.contentHeights.push(this.content.height()),o=$('<div class="name-column"></div>').appendTo(l),$('<span class="name">'+TradingView.clean($.t(t.name))+"</span>").appendTo(o),this.setIcon(l,t),this.setVisible(l,t),l.mousedown(function(t){r.setActive(l)}),t.datasource.userEditEnabled()&&(TradingView.isInherited(t.datasource.constructor,a)?(n=$('<a class="button icon-lock" title="'+$.t("Lock/Unlock")+'">'),n.click(function(e){var i=t.datasource.properties().frozen.value();r.model.setProperty(t.datasource.properties().frozen,!i,"Lock/Unlock "+t.datasource.title())}),n.appendTo(h),$('<span class="icon">').appendTo(n),t.datasource.properties().frozen.value()&&(l.addClass("locked"),n.addClass("active")),t.datasource.properties().frozen.subscribe(this,function(t){var e=t.value();l.toggleClass("locked",e),n.toggleClass("active",e)})):i&&$('<div class="button hidden">&nbsp;</div>').appendTo(h),s=$('<a class="button icon-hide" title="'+$.t("Show/Hide")+'">'),s.click(function(e){var i=t.datasource.properties().visible.value();l.toggleClass("hidden",i),s.toggleClass("active",i),r.model.setProperty(t.datasource.properties().visible,!i,"Show/Hide "+t.datasource.title())}),s.appendTo(h),$('<span class="icon">').appendTo(s),t.datasource.properties().visible.value()||(l.addClass("hidden"),s.addClass("active")),t.datasource.properties().visible.subscribe(this,function(t){var e=t.value();l.toggleClass("hidden",!e),s.toggleClass("active",!e)}),this.createPropertyIcon(t,h,l)),l},n.List.prototype.contextMenuEvent=function(t,i){if(e.enabled("objects_tree_context_menu")){var o=this.options.chartWidget.paneByState(this.model.paneForSource(i));o.showContextMenuForSource(i,t)}},n.List.prototype.createPropertyIcon=function(t,e,o){var n,s,r,l=this;return t.datasource instanceof a&&!t.datasource.isActualSymbol()?void $('<div class="button hidden">&nbsp;</div>').appendTo(e):t.datasource===this.model.mainSeries()&&this.options.chartWidget&&this.options.chartWidget.onWidget()?void $('<div class="button hidden">&nbsp;</div>').appendTo(e):(n=i(292),s=i(291),void((n.hasStylesPropertyPage(t.datasource)||n.hasInputsPropertyPage(t.datasource))&&(r=$('<a class="button format" title="'+$.t("Format")+'">').click(function(e){new s(t.datasource,l.model).show()}).appendTo(e),$('<span class="icon">').appendTo(r),o.dblclick(function(e){new s(t.datasource,l.model).show()}),o.on("contextmenu",function(e){l.contextMenuEvent(e,t.datasource),e.preventDefault(),e.stopPropagation()}))))},n.List.prototype.updateItem=function(t){var e=this.content.find("#"+t.datasource.id());e.find(".name").text(TradingView.clean($.t(t.name))),this.setIcon(e,t),this.setVisible(e,t)},n.List.prototype.findItem=function(t){var e=this.content.find("#"+t.id());return e},n.List.prototype.removeItem=function(t){var e=this.findItem(t);e.remove()},n.List.prototype.setIcon=function(t,e){var n,s,a,l,h,c,d=t.find(".name-column");d.find(".instrument").remove(),!e.datasource.getType||e.datasource instanceof r||d.find(".svg-icon").length||(n=$('<span class="svg-icon">'),s=$(o(e.datasource.getType(),"30x30")).appendTo(n),n.appendTo(d)),e.datasource instanceof r&&(s=e.datasource.properties().icon.value(),a=String.fromCharCode(s),s=$('<span class="instrument lineicon text-as-icon">'+a+"</span>").appendTo(d)),e.datasource===this.model.mainSeries()&&(s=$('<span class="instrument series">').appendTo(d),l=this.model.mainSeries().properties().style.value(),h=i(368),c=h.styleIconPosition(l),s.css("background-position",c))},n.List.prototype.setVisible=function(t,e){var i=e.datasource.properties().visible.value();i?t.removeClass("hidden"):t.addClass("hidden")},TradingView.ObjectTreeDialog=n,t.exports=n}).call(e,i(1),i(26))},function(t,e,i){(function(e){"use strict";function o(t,e,i,o){this.dialog=t,this.options=e||{},this.model=i,this.$mainDialog=o}function n(t){this.$container=t,this.$button=$('<div class="button-filter">').click(function(t){this.$button.trigger("button-popup",[this._getActions()]),t.stopPropagation()}.bind(this)).appendTo(t),a(this.$button,null,{event:"button-popup",addClass:"tree-tab-filter"}),this.onChange=new e}var s=i(67).LineDataSource,r=i(56).SidebarCustomScroll,a=i(50).bindPopupMenu;o.prototype.activeListener=function(t){this.selectedId=t.attr("id")},o.prototype.changeZOrder=function(t){this.model.removeListener("changeZOrder",this.changeZorderListener),t(),this.model.on("changeZOrder",this.changeZorderListener)},o.prototype.addSortable=function(t){var e=0,i=this;t.sortable({scroll:!0,scrollSensitivity:100,scrollSpeed:100,axis:"y",helper:"clone",start:function(t,i){e=i.item.index()},stop:function(t,o){var n,s,r=o.item.index();e-r!==0&&(n=i.list.datasources[o.item.attr("id")],s=e-r>0?1:-1,i.changeZOrder(function(){i.items.model.beginUndoMacro("Change "+n.datasource.title()+" Z order");for(var t=0;t<Math.abs(e-r);t++)i.items.model.changeZOrder(n.datasource,s);i.items.model.endUndoMacro()})),i.setFirstLastItems(o.item.parent())}})},o.prototype.addItemControls=function(t,e,i,o,n){var s,r,a=this,l=e.find(".tree-icon-container"),h=$('<div class="button up" title="'+$.t("Move Up")+'">').click(function(i){i.stopPropagation(),i.preventDefault(),a.moveItemUp(e,t.datasource)}).prependTo(l);$('<span class="icon">').appendTo(h),s=$('<a class="button down" title="'+$.t("Move Down")+'">').click(function(i){i.stopPropagation(),i.preventDefault(),a.moveItemDown(e,t.datasource)}).prependTo(l),$('<span class="icon">').appendTo(s),t.datasource!==a.items.model.mainSeries()&&t.datasource.isUserDeletable()?(r=$('<a class="button delete" title="'+$.t("Delete")+'">').click(function(e){e.stopPropagation(),a.items.model.removeSource(t.datasource)}).appendTo(l),$('<span class="icon">').appendTo(r)):$('<div class="button hidden">&nbsp;</div>').appendTo(l)},o.prototype.getNewSelectedIdOnRemoval=function(t){var e=this.content.find("._tv-dialog-tree-item"),i=e.index(t),o=e.length;o>0&&(i!==o-1?this.selectedId=$(e[i+1]).attr("id"):0!==i&&(this.selectedId=$(e[i-1]).attr("id")))},o.prototype.moveItemUp=function(t,e){var i,o=t.prev(":visible");o.length&&(i=t.prev(":hidden").length,t.insertBefore(o.last()),e&&this.changeZOrder(function(){for(var t=0;t<1+i;t++)this.items.model.changeZOrder(e,1)}.bind(this)),this.setFirstLastItems(t.parent()),this._scroll.scrollTo(t))},o.prototype.moveItemDown=function(t,e){var i,o=t.next(":visible");o.length&&(i=t.next(":hidden").length,t.insertAfter(o.first()),e&&this.changeZOrder(function(){for(var t=0;t<1+i;t++)this.items.model.changeZOrder(e,-1)}.bind(this)),this.setFirstLastItems(t.parent()),this._scroll.scrollTo(t))},o.prototype.showSpinner=function(){this.spinner=TradingView.unifiedSpinner().spin(this.page.get(0)),this.contentContainer.css("opacity",0)},o.prototype.hideSpinner=function(){this.spinner&&(this.spinner.stop(),this.contentContainer.css("opacity",1))},o.prototype.createView=function(t,e,o,s){var r=i(364),a=this;return this.items=this.dialog.getSourceProperties(),this.maxHeight=o,this.page=t,this.contentContainer=$('<div class="main-tree-container object-tree-container">').appendTo(t),this.contentWrap=$('<div class="main-tree-wrap"></div>').appendTo(this.contentContainer),this.content=$('<div class="main-tree"></div>').appendTo(this.contentWrap),this.list=new r.List(this.items.model,this.content,this.dialog,this.options),this.list.setDefaultItemClass("objects"),this.list.setActiveListener(this.activeListener.bind(this)),this.items.model.selectedSource()&&(this.selectedId=this.items.model.selectedSource().id()),this.updateListListener=this.updateList.bind(this),this.fillListListener=this.fillList.bind(this,s),this.removeSourceListener=function(t){var e,i;t&&(Array.isArray(t)?this.fillList(function(){this._scroll.scrollToStart()}.bind(this)):(e=this.list.findItem(t),this.getNewSelectedIdOnRemoval(e),i=this.content.find("#"+this.selectedId),this.fillList(function(){this._scroll.scrollToStart(),i.position&&i.position()&&this._scroll.scrollTo(i)}.bind(this),{showDialog:!0})))}.bind(this),this.changeZorderListener=function(t,e){if(t)if(e){var i=this.list.findItem(t);1==e?this.moveItemUp(i):this.moveItemDown(i)}else this.fillList(function(){this._scroll.scrollTo(this.list.findItem(t))}.bind(this),{showDialog:!0})}.bind(this),this.model.on("setProperty",this.updateListListener),this.model.on("removeSource",this.removeSourceListener),this.model.on("cloneLineTool",this.fillListListener),this.model.on("setChartStyleProperty",this.updateListListener),this.model.on("changeZOrder",this.changeZorderListener),this.model.on("moveSource",this.fillListListener),this.filter=new n(e),this.filter.onChange.subscribe(this,function(){a._scroll&&a._scroll.scrollToStart(),a.fillListListener()}),this.filter.setValue("all"),this.addScroll(),this.contentContainer},o.prototype.unsubscribeListeners=function(){this.model.removeListener("setProperty",this.updateListListener),this.model.removeListener("removeSource",this.removeSourceListener),this.model.removeListener("cloneLineTool",this.fillListListener),this.model.removeListener("setChartStyleProperty",this.updateListListener),this.model.removeListener("changeZOrder",this.changeZorderListener),this.model.removeListener("moveSource",this.fillListListener)},o.prototype.updateList=function(){var t,e,i,o;for(this.items=this.dialog.getSourceProperties(),t=0;t<this.items.groups.length;t++)if(e=this.items.groups[t],e.children.length)for(i=e.children.length-1;i>=0;i--)o=e.children[i],this.list.updateItem(o)},o.prototype.setFirstLastItems=function(t,e){var i=e&&e.ignoreItemVisibility,o=i?"._tv-dialog-tree-item":"._tv-dialog-tree-item:visible",n=t.find(o);n.length&&(n.removeClass("first last"),n.first().addClass("first"),n.last().addClass("last"))},o.prototype.setSelectedItemActive=function(t,e){t.datasource.id()===this.selectedId&&this.list.setActive(e)},o.prototype.executeFillListCallback=function(t){isFunction(t)&&(this.$mainDialog.show(),t())},o.prototype.renderGroup=function(t){var e,i,o;t=t||{},e=0,i=t.index,o=setInterval(function(){var o=t.group.children.slice(e,e+50);o.forEach(function(e){var i=this.list.createItem(e,t.subitemList,t.showLocks);this.setSelectedItemActive(e,i),this.addItemControls(e,i,t.$group,t.itemIndex--,t.group)}.bind(this)),e+=50,o.length||(t.$group.append(t.subitemList),this.setFirstLastItems(t.subitemList,{ignoreItemVisibility:!0}),clearInterval(t.intervals[i]),0===--this.fillListGroupsCount&&(this.hideSpinner(),this.executeFillListCallback(t.callback)))}.bind(this),100),t.intervals[i]=o,this.$mainDialog.one("destroy",function(){clearInterval(o)})},o.prototype.fillList=function(t,e){var i,o,n,s,r,a,l,h=e&&e.showDialog;for(isFunction(t)&&!h&&this.$mainDialog.hide(),this.content.empty(),this.hideSpinner(),this.showSpinner(),this.items=this.dialog.getSourceProperties(),i="studies"!=this.filter.value()&&this.items.drawings.length,o=[],this.fillListGroupsCount=this.items.groups.length,n=0;n<this.items.groups.length;n++)s=this.filter.applyToGroup(this.items.groups[n]),s.children.length&&(r=$('<div class="_tv-dialog-tree-group">').appendTo(this.content),n>0&&r.append('<div class="_tv-dialog-tree-head">'),a=$('<div class="_tv-dialog-tree-item-list">'),Modernizr.touch||this.addSortable(a),l=s.children.length,s.children.reverse(),this.renderGroup({index:n,showLocks:i,intervals:o,callback:t,group:s,itemIndex:l,subitemList:a,$group:r}))},o.prototype.addScroll=function(){this._scroll=new r(this.contentContainer,this.contentWrap,{showBottomShadow:!1,scrollMarginTop:0})},o.prototype.tabChanged=function(){},n.prototype._getActions=function(){var t=[{name:"all",title:$.t("Show All")},{name:"drawings",title:$.t("Show Only Drawings")},{name:"studies",title:$.t("Show Only Studies")}].map(function(t){return t.name==this._value?t.active=!0:t.action=this.setValue.bind(this,t.name),t}.bind(this));return t},n.prototype.value=function(){return this._value},n.prototype.setValue=function(t){t!=this._value&&(this._value=t,this.onChange.fire(t))},n.prototype.applyToGroup=function(t){if("all"==this._value)return t;for(var e,i=0;i<t.children.length;i++)e=t.children[i],e.skipped=!TradingView.isInherited(e.datasource.constructor,TradingView.Series)&&!TradingView.isInherited(e.datasource.constructor,"drawings"==this._value?s:TradingView.Study);return t},t.exports=o}).call(e,i(32))},function(t,e,i){(function(e){"use strict";function i(t,i,o){this._$tabs=t,this._$pages=i,this.options=$.extend({},this._DEFAULT_OPTIONS,o||{}),this.tabChanged=new e,this.initActivePage(),this.initHandlers()}i.prototype._DEFAULT_OPTIONS={saveTab:!1},i.prototype.initActivePage=function(){var t=0;this.options.saveTab&&(t=TVSettings.getInt(this.options.saveTab,0)),t=this.options.activeTab||t,this.setActivePage(t)},i.prototype.setActivePage=function(t){this._$tabs.children().removeClass("active").eq(t).addClass("active"),this._$pages.children().removeClass("active").eq(t).addClass("active"),this.options.saveTab&&TVSettings.setValue(this.options.saveTab,t),this.tabChanged.fire(t)},i.prototype.initHandlers=function(){this._$tabs.on("click","*",this._onTabClick.bind(this))},i.prototype._onTabClick=function(t){t.preventDefault();var e=$(t.currentTarget).index();this.setActivePage(e)},i.prototype.addPage=function(t,e){var i=this.count();return this._$tabs.append(t),this._$pages.append(e),i||this.setActivePage(0),i},i.prototype.removePage=function(t){function e(t){return t-1>=0?t-1:0}this._$tabs.children().eq(t).remove(),this._$pages.children().eq(t).remove();var i=this._$tabs.children().filter(".active").length?this._$tabs.children().filter(".active").index():e(t);this.setActivePage(i)},i.prototype.count=function(){return this._$tabs.children().length},i.prototype.index=function(){return this._$tabs.children().filter(".active:eq(0)").index()},i.prototype.indexOfPage=function(t){return this._$pages.children().index(t)},i.prototype.pageAt=function(t){return this._$pages.children().eq(t)},t.exports=i}).call(e,i(32))},function(t,e,i){"use strict";function o(t,e,i,o){this.dialog=t,this.options=e||{},this.model=i,this.$mainDialog=o,this.SETTINGS_STORAGE_NAME="ManageDrawingsTab.sorting"}var n=i(364),s=i(56).SidebarCustomScroll;o.prototype.unsubscribeListeners=function(){},o.prototype.tabChanged=function(){},o.prototype.getSortSettings=function(){return TVSettings.getJSON(this.SETTINGS_STORAGE_NAME)},o.prototype.saveSortSettings=function(t,e){var i=this.getSortSettings()||{};i.sortField=t,i.sortOrder=e,TVSettings.setJSON(this.SETTINGS_STORAGE_NAME,i)},o.prototype.createView=function(t,e){var o,r,a,l,h,c,d,p,u,_,f,g,m,v,y,w,b,S,T,C=this.dialog.getSourceProperties(),x=$("<div>").addClass("manage-drawings").appendTo(t),P=$("<div>").addClass("wrap").appendTo(x),L={},k=0,E=this;this.items=C.drawings,this.maxHeight=e,this.list=new n.List(C.model,x,this.dialog,this.options),this._scroll=new s(x,P,{showBottomShadow:!1,scrollMarginTop:0}),r=function(t){var e=t.value();this.toggleClass("hidden",!e)},a=function(t){var e,i=t.data.row,o=t.data.symbol;i.hasClass("expanded")?(e=i.find(".subarea"),e.length&&e.hide(),i.removeClass("expanded")):(i.addClass("expanded"),e=i.find(".subarea"),e.length||(e=$("<table cellspacing = 0 cellpading = 0>").addClass("subarea").appendTo(i),E.items.filter(function(t){return t.symbol===o}).forEach(function(t){var i,n,s,a,l,c=$("<tr class='drawing-item'>").appendTo(e);c.data("id",t.datasource._id),i=$('<div class="name-column">'),n=$("<span>").append($.t(t.name)).addClass("name").appendTo(i),r.call(n,t.datasource.properties().visible),t.datasource.properties().visible.subscribe(null,r.bind(n)),s=$("<td class='drawing-property'>").append(i).appendTo(c),E.list.setIcon(s,t),a=$('<td class="controls-cell drawing-property">').appendTo(c),l=$("<div>").addClass("controls").appendTo(a),$('<a class="button flat format" title="'+$.t("Format")+'"><span class="icon"></span></a>').appendTo(l).click({source:t.datasource},d),$('<a class="button flat delete" title="'+$.t("Delete")+'"><span class="icon"></span></a>').appendTo(l).click({symbol:o,source:t.datasource},function(t){t.preventDefault(),h(t)})})),e.show()),E._scroll.updateScrollBar()},l=function(t){var e=$(t.target).addClass("button-in-process").find(".icon").addClass("icon-delete"),i=t.data.symbol,o=E.items.filter(function(t){return t.symbol===i});TradingView.unifiedSpinner("micro").spin(e.get(0)),C.model.beginUndoMacro($.t("Remove all line tools for ")+i),E.asyncRemoveInterval=setInterval(function(){var e=o.splice(0,200).map(function(t){return t.datasource});if(C.model.removeLineTools(e),!o.length)return C.model.emitEvent("removeSource",[e]),C.model.endUndoMacro(),c(t,".row"),b(x),void clearInterval(E.asyncRemoveInterval)},50),E.$mainDialog.one("destroy",function(){clearInterval(E.asyncRemoveInterval)}),delete L[i],v(),t.stopPropagation()},h=function(t){var e=t.data.source,i=t.data.symbol,o=E.items.filter(function(t){return t.symbol===i}).length;return 1===o?void l(t):(C.model.removeSource(e),_(t),c(t,".drawing-item"),p(e._id),void v())},c=function(t,e){var i,o=$(t.target).closest(e),n=o.parent().children(),s=n.index(o),r=n.length;o.remove(),r>0&&(s!==r-1?i=n[s+1]:0!==s&&(i=n[s-1]),u.call(i),E._scroll.scrollToStart(),E._scroll.scrollTo($(i)),E._scroll.updateScrollBar())},d=function(t){var e=t.data.source,o=i(291);new o(e,C.model).show()},p=function(t){E.items.forEach(function(e,i,o){t===e.datasource._id&&o.splice(i,1)})},u=function(){var t,e;P.find(".selected").removeClass("selected"),$(this).addClass("selected"),t=$(this).data("id"),e=E.items.filter(function(e){return e.datasource._id===t})[0],e&&C.model.setSelectedSource(e.datasource)},_=function(t){var e=$(t.target).closest(".expanded").find(".symbol").text();L[e].count-=1,L[e].row.$counter.text(L[e].count)},f=function(t,e,i){var o=[];return i=i||"ASC",$.each(t,function(t,e){o.push({name:t,counter:e.count})}),"ASC"===i?o.sort(function(t,i){return t[e]<i[e]?-1:t[e]>i[e]?1:0}):"DESC"===i&&o.sort(function(t,i){return t[e]>i[e]?-1:t[e]<i[e]?1:0}),o},g=function(){k=0,$.each(L,function(t,e){k+=e.count})},m=function(){o&&o.text($.t("# (Total: {0})").format(k))},v=function(){g(),m()},y=function(t){var e=this.data("order"),i={ASC:"DESC",DESC:"ASC"};S(t,i[e]),E.saveSortSettings(t,i[e])},w=function(t,e){$.each(t,function(t,e){e.removeClass("sorted")}),t[e].addClass("sorted")},b=function(t){var e=t.find(".row");e.find(".symbol-title").length||(e.remove(),$('<div class="empty-drawings-list"></div>').text($.t("No drawings yet")).appendTo(t))},S=function(t,e){var i,n,s,r,h;if(t=t||"name",e=e||"ASC",i=E.dialog.getSourceProperties(),P.empty(),E.items=i.drawings,!E.items.length)return void b(x);for(n=$('<div class="row header"><span class="symbol">'+$.t("Symbol")+'</span><span class="counter">#</span></div>').appendTo(P),s=n.find(".symbol").data("order",e),s.click(y.bind(s,"name")),o=n.find(".counter").data("order",e),o.click(y.bind(o,"counter")),w({name:s,counter:o},t),L={},r=0;r<E.items.length;r++)h=E.items[r],L[h.symbol]?L[h.symbol].count+=1:L[h.symbol]={count:1};f(L,t,e).forEach(function(t){var e,i,o,n=$("<div>").addClass("row").appendTo(P),s=$('<div class="symbol-title">').appendTo(n);P.on("click",".symbol-title, .drawing-item",function(){$(this).hasClass("selected")||u.call(this)}),$('<span class="expand"></span>').appendTo(s),s.click({row:n,symbol:t.name},a),e=$("<span>").append(t.name).addClass("symbol").appendTo(s),i=$("<span>").append(t.counter).addClass("counter").appendTo(s),o=$('<a class="button delete flat delete-symbol">').attr("title",$.t("Delete all drawing for this symbol")).appendTo(s).click({symbol:t.name},l),$('<span class="icon">').appendTo(o),L[t.name].row={$el:n,$symbol:e,$counter:i}}),E._scroll.updateScrollBar(),v()},T=this.getSortSettings()||{},S(T.sortField,T.sortOrder)},t.exports=o},function(t,e,i){(function(e,o){"use strict";function n(){}var s=i(369),r=i(271);TradingView.SYMBOL_SEARCH_MAX_LENGTH=100,n.prototype._createBackButton=function(t){var e=t.createGroup().appendTo(t._$left);t._backButton=$('<div class="mobile-back-button"><i></i></div>').click(function(){window.history.length>1&&window.history.back(),window.location.pathname="/"}).appendTo(e)},n.prototype._createBarsGroup=function(t){var e=this.createGroup({single:!0});return t._style_list.element().appendTo(e),e},n.prototype._createPropertiesGroup=function(t,i){var n,s=this.createGroup({single:!0});return this._onWidget&&!e.enabled("header_settings")||(n=$("<span>").addClass("button iconed properties apply-common-tooltip").append(o("properties","17x17")).appendTo(s),n.on(t,function(t){t.pageX=n.offset().left,t.pageY=n.offset().top+n.height()+15,TVSettings.setValue("properties_dialog.active_tab.chart",$.t("Style"));var e=i.activeChartWidget.value().showChartProperties({_lastEvent:t});n.addClass("active"),e.on("destroy",function(){n.removeClass("active")})}),n.attr("title",$.t("Chart Properties"))),s},n.prototype._createCompareGroup=function(t,e,i){var n=this.createGroup({single:!0}),r=$('<a class="button toggle-caption compare apply-common-tooltip">').append(o("compare")).append($('<span class="caption">'+$.t("Compare")+"</span>")).appendTo(n);return this._compareButton=r,this._compareButton.on(i,function(t){var i,o;t.preventDefault(),i=new s(e),o=i.show(),r.addClass("active"),o.on("destroy",function(){r.removeClass("active")})}),this._compareButton.attr("title",$.t("Compare or Add Symbol")),n},n.prototype._createIndicatorsGroup=function(t,i){var n=this.createGroup({single:!0});return this._indicatorsButton=$('<a class="button toggle-caption indicators'+(this._onWidget?" no-last":"")+' apply-common-tooltip">').append(o("indicators")).append($('<span class="caption">'+$.t("Indicators")+"</span>")).appendTo(n),e.enabled("charting_library_base")?this._indicatorsButton.attr("title",$.t("Indicators")):this._indicatorsButton.attr("title",$.t("Indicators, Fundamentals, Economy and Add-ons")),this._indicatorsButton.on(t,function(t){t.stopPropagation(),t.preventDefault(),window.studyMarket.isVisible()?window.studyMarket.hide():(window.studyMarket.show(),r.emit("indicators_dialog"))}),TradingView.keyboardBinder.registerListener("IndicatorsHotkey",function(t){if("47"==t.which&&$(t.target).is("body")&&!window.studyMarket.isVisible())return window.studyMarket.show(),window.studyMarket.selectSearchPage(),t.preventDefault(),t.stopPropagation(),!0}),window.studyMarket.visibilityChanged.subscribe(this,function(t){this._indicatorsButton.toggleClass("active",t)}),!TradingView.onWidget()&&e.enabled("study_templates")&&studyTemplates.appendMenuButtonTo(n),n},n.prototype.createGroup=function(t){t=t||{};var e=$("<div>").addClass("group");return t.right&&e.addClass("right"),t.single&&e.addClass("space-single"),e},n.prototype.bindToModel=function(){var t=this._chartWidget.model();t.mainSeries().properties();this._model=t},n.prototype.backButton=function(){return this._backButton},n.prototype.saveLoadWidget=function(){return this._saveLoad||TradingView.logWarn("No save-load widget created in footer")},n.prototype.styleIconPosition=function(t){return"-%1px 0".replace("%1",19*~~t)},n.styleIconPosition=n.prototype.styleIconPosition,t.exports=n}).call(e,i(1),i(26))},function(t,e,i){"use strict";function o(t){this.chartWidgetCollection=t}var n=i(366),s=i(370),r=i(371);o.prototype.tabChanged=function(t){0===t?this.compareTab.focus():this.addSymbolTab.focus()},o.prototype.show=function(){var t,e,i,o,a,l;return TradingView.trackEvent("GUI","Compare Add"),t=TVDialogs.createDialog($.t("Compare Add"),{hideTitle:!0,dragHandle:".properties-tabs"}),e=t.find("._tv-dialog-content"),t.css("min-width",0),e.css("min-width",0),i=$('<div class="properties-tabs"></div>').appendTo(e),$('<a href="#" class="properties-tabs-label"></a>').text($.t("Compare")).appendTo(i),$('<a href="#" class="properties-tabs-label"></a>').text($.t("Add Symbol")).appendTo(i),o=$("<div>").appendTo(e),a=$('<div class="main-tree-page compare active">').appendTo(o),l=$('<div class="main-tree-page compare">').appendTo(o),this.compareTab=new s(this.chartWidgetCollection),this.addSymbolTab=new r(this.chartWidgetCollection),this.compareTab.show(),a.append(this.compareTab._widget),this.addSymbolTab.show(),l.append(this.addSymbolTab._widget),this.tabs=new n(i,o,{saveTab:"CompareAddDialog.tab"}),this.tabs.tabChanged.subscribe(this,this.tabChanged),TVDialogs.applyHandlers(t),TVDialogs.positionDialog(t,this.position),t},t.exports=o},function(t,e,i){(function(e){"use strict";function o(t){var i,o;this._chartWidgetCollection=t,i={"AMEX:SPY":$.t("S&P 500 Trust"),"INDEX:NASX":$.t("Nasdaq Composite"),"AMEX:DIA":$.t("Diamonds Trust"),"AMEX:GLD":$.t("Gold Trust"),"AMEX:FXE":$.t("Euro Currency Trust"),"INDEX:IUXX":$.t("Nasdaq 100"),"INDEX:IXF":$.t("Nasdaq Financial 100")},o={IBOV:$.t("Bovespa Index"),IBXX:$.t("Brazil 100 Index"),IBXL:$.t("Brazil 50 Index"),IBRA:$.t("Brazil Broad-Based Index"),IGCX:$.t("Special Corporate Governance Stock Index"),ITAG:$.t("Special Tag-Along Stock Index"),IGNM:$.t("Novo Mercado Corporate Governance Equity Index")},this.predefines={"":e.enabled("bovespa_widget")?o:i},this.symbolAlias={"BATS:SPY":"AMEX:SPY","BATS:DIA":"AMEX:DIA","BATS:GLD":"AMEX:GLD","BATS:FXE":"AMEX:FXE"}}var n=i(41);o.prototype.addCompareSymbol=function(t,e,i){var o,n,s,r,a,l,h=this._chartWidgetCollection.activeChartWidget.value();if(h&&(o=h.model())){for(n=o.mainSeries().interval(),s=o.studiesMetaData(),a=0;a<s.length;a++)"Compare@tv-basicstudies"===s[a].id&&(r=s[a]);return l={exchange:i,inputs:{symbol:t,resolution:n}},TradingView.trackEvent("GUI","Add Compare"),o.insertStudy(r,l)}},o.prototype.removeCompareSymbol=function(t){var e,i,o,n,s,r=this._chartWidgetCollection.activeChartWidget.value();if(r&&(e=r.model()))for(i=e.dataSources(),o=0;o<i.length;o++)n=i[o],n._metaInfo&&"Compare@tv-basicstudies"===n._metaInfo.id&&(s=n.properties().inputs.symbol.value(),(s===t||this.symbolAlias[s]&&this.symbolAlias[s]===t)&&e.removeSource(n))},o.prototype._createPredefinesList_normal=function(){function t(t){$(this).is(":checked")?(e=a.addCompareSymbol(t.data.symbol),e||$(this).attr("checked",!1)):a.removeCompareSymbol(t.data.symbol)}var e,i,o,n,s,r,a=this;for(n in this.predefines){s=$('<div class="predefine-section">').appendTo(this._widget);for(r in this.predefines[n])i=$('<div class="predefine-line"></div>').appendTo(s),o=$('<input type="checkbox" id="predefine-checkbox-'+this.symbolToId(r)+'"/>').appendTo(i),o.change({symbol:r},t),$('<label for="predefine-checkbox-'+this.symbolToId(r)+'">'+this.predefines[n][r]+"</label>").appendTo(i)}$('<div class="clear"></div>').appendTo(this._widget)},o.prototype.init=function(){var t,i,o,s=this;this._widget=$('<div class="compare-widget"></div>'),t=$('<div class="symbol-edit-widget">'),this.input=$('<input type="text" class="symbol-edit with-plus single" placeholder="'+$.t("Company Comparison")+'" autocomplete="off">').appendTo(t),i=$('<a class="symbol-edit-plus" title="'+$.t("Company Comparison")+'"><span></span></a>').appendTo(t),o=n.bindToInput(this.input,{callback:function(t){s.addCompareSymbol(t)},keepFocus:!0,clearAfterAccept:!0}),i.click(function(){o.acceptTypeIn()}),t.appendTo(this._widget),e.enabled("charting_library_base")||this._createPredefinesList_normal()},o.prototype.show=function(){var t,e,i,o,n,s,r,a,l,h=this,c=this._chartWidgetCollection.activeChartWidget.value();if(c&&(t=c.model())){e=t.dataSources(),this.init(),this._widget.find('input[id^="predefine-checkbox"]').attr("checked",!1);for(i in this.predefines)for(o in this.predefines[i])for(n=this._widget.find("#predefine-checkbox-"+this.symbolToId(o)),s=0;s<e.length;s++)r=e[s],r._metaInfo&&"Compare@tv-basicstudies"===r._metaInfo.id&&(a=o,l=r.properties().inputs.symbol.value(),(l===a||h.symbolAlias[l]&&h.symbolAlias[l]===a)&&n.attr("checked",!0))}},o.prototype.symbolToId=function(t){return t.replace(/[^a-z0-9]/gi,"_")},o.prototype.focus=function(){Modernizr.touch||this.input.focus()},t.exports=o}).call(e,i(1))},function(t,e,i){"use strict";function o(t){this._chartWidgetCollection=t,this.init()}var n=i(41);o.prototype.init=function(){var t,e,i,o,s,r,a=this;this._widget=$('<div class="addsymbol-widget"></div>'),t=$('<div class="symbol-edit-widget">'),e=$('<input type="text" class="symbol-edit with-plus single" placeholder="'+$.t("Symbol")+'" autocomplete="off">').appendTo(t),this._input=e,i=$('<a class="symbol-edit-plus"><span></span></a>').appendTo(t),o=n.bindToInput(e,{callback:function(t){var e=a._chartWidgetCollection.activeChartWidget.value();e&&e.addSymbol(t,a._checkbox.is(":checked"))},keepFocus:!0,clearAfterAccept:!0}),i.on("click",function(){o.acceptTypeIn()}),t.appendTo(this._widget),s=$('<div class="opts-line">').appendTo(this._widget),r="addsymbol-widget-overlay-"+TradingView.guid(),this._checkbox=$('<input type="checkbox" id="'+r+'">').appendTo(s),this._checkbox.on("click",function(){TVSettings.setValue("showAddSymbolDialog.checkboxState",$(this).is(":checked"))}),$('<label for="'+r+'">'+$.t("Overlay the main chart")+"</label>").appendTo(s)},o.prototype.show=function(){this.focus(),this._checkbox.attr("checked",TVSettings.getBool("showAddSymbolDialog.checkboxState",!0))},o.prototype.focus=function(){Modernizr.touch||this._input.focus()},t.exports=o},function(t,e,i){(function(e){"use strict";function o(t){this._band=t||{}}function n(){o.apply(this,arguments)}function s(){o.apply(this,arguments)}function r(){o.apply(this,arguments)}function a(){o.apply(this,arguments)}TradingView="object"==typeof e?e.TradingView:TradingView||{},"function"!=typeof TradingView.logError&&(TradingView.logError=function(){console.error(arguments)});var l={create:function(t){var e,i=t||{},o=i.type;if("MainSeries"===o)e=n;else if("Study"===o||/^study_\w+/.test(o))e=s;else if("Value"===o)e=r;else{if(!/^LineTool.*/i.test(o))return TradingView.logError("Unknown alert band type "+o),null;e=a}return new e(i)}};o.prototype.uniqueId=function(){return this._band.uniqueId},o.prototype.type=function(){return this._band.type},o.prototype.title=function(){return this._band.title},o.prototype.hasPlots=function(){return this._band.plots&&this._band.plots.length},o.prototype._getPlotTitle=function(t){var e=i(54).StudyConsts,o="Plot";return o=t.title?t.title:t.type===e.PLOT_TYPE_OHLC_OPEN?t.ohlcTitle+" "+$.t("Open"):t.type===e.PLOT_TYPE_OHLC_HIGH?t.ohlcTitle+" "+$.t("High"):t.type===e.PLOT_TYPE_OHLC_LOW?t.ohlcTitle+" "+$.t("Low"):t.type===e.PLOT_TYPE_OHLC_CLOSE?t.ohlcTitle+" "+$.t("Close"):"vol"===t.id?$.t("Volume"):"vol_ma"===t.id?$.t("Volume MA"):"open"===t.id?$.t("Open"):"high"===t.id?$.t("High"):"low"===t.id?$.t("Low"):"close"===t.id?$.t("Close"):t.id},o.prototype.getPlots=function(t){var e,o=(i(54).StudyConsts,t||{}),n=this;return this._band.plots&&this._band.plots.length&&"inputSelect"===o.format?(e=-1,
this._band.plots.map(function(t){return e++,{value:e,title:n._getPlotTitle(t)}})):this._band.plots},inherit(n,o),n.prototype.title=function(t){var e=i(77),o=i(46),n=t||{},s=!!n.withInterval,r=this._band.actualSymbol;return o&&(r=o.shortName(r)),e.generateTitleForGui({symbol:r,interval:s?this._band.interval:null,style:this._band.style,inputs:this._band.styleInputs||{},boxSize:this._band.boxSize,reversalAmount:this._band.reversalAmount})},n.prototype.isJapanStyle=function(){var t=this._band.style;return[4,7,5,6,8].indexOf(t)!==-1},inherit(s,o),s.prototype.title=function(t){var e,i,o,n=t||{},s=n.withPlotTitle,r=this._band;return r.title?e=r.title:(e=r.shortDescription||"Study",i=[],Object.keys(r.inputs).forEach(function(t){var e=r.inputs[t]&&r.inputs[t].id;e&&!r.inputs[t].isHidden&&void 0!==r.inputs[e]&&i.push(r.inputs[e])}),i.length&&(e+=" ("+i.join(", ")+")")),s&&(o=this.selectedPlot(),o&&(e+=" "+(o.title||$.t("Untitled Plot")))),e},s.prototype.selectedPlot=function(){var t=this._band;return void 0===t.plotIndex?null:this.getPlots().filter(function(e){return e.value==t.plotIndex})[0]||null},inherit(r,o),r.prototype.title=function(){var t=this._band.value||0;return""+parseFloat(t)},inherit(a,o),t.exports.AlertBandAbstract=o,t.exports.AlertBandValue=r,t.exports.alertBandFactory=l}).call(e,function(){return this}())},function(t,e,i){(function(e,o){"use strict";function n(t,e,i){this._chart=t,this._parent=e,this.zoom_active=!1,this._real=i,this._state="stop",this.init(),i&&this.initToRealChart(),this.initHandlers(),t.navigationButtonsController().addWidget({widget:this._widget,acceptableOffset:100})}var s=i(106);n.visibilityProperty=new e,n.prototype.init=function(){this._widget=$('<div class="control-bar-wrapper">').appendTo(this._parent),$('<div class="control-bar">').append(o("left",{"class":"move-left-button-control-bar"})).append(o("minus",{"class":"zoom-out-right-button-control-bar"})).append(o("restore",{"class":"turn-button-control-bar"})).append(o("plus",{"class":"zoom-in-button-control-bar"})).append(o("right",{"class":"move-right-button-control-bar"})).appendTo(this._widget),this._buttons={zoomIn:this._widget.find(".zoom-in-button-control-bar"),zoomOut:this._widget.find(".zoom-out-right-button-control-bar"),moveLeft:this._widget.find(".move-left-button-control-bar"),moveRight:this._widget.find(".move-right-button-control-bar"),turn:this._widget.find(".turn-button-control-bar")}},n.prototype.initToRealChart=function(){var t,e=this;this._back=$(o("right-stop",{"class":"back-to-present hidden"})).appendTo(this._parent),this._back.on("click",function(){e._chart.model().timeScale().scrollToRealtime(!0),e._chart.model().model()._invalidateHandler(new s(s.FULL_UPDATE))}),t=function(){var t=e._chart.maxRhsPriceAxisWidth+4;t&&e._back.css("marginRight",t)},this._chart.rhsPriceAxisWidthChanged.subscribe(this,t),t(),this._chart.withModel(this,function(){this._chart.model().model().setInterval(function(){e.check()},1e3)})},n.prototype.check=function(){this._chart.model()&&this._chart.model().timeScale().rightOffset()<0?this._back.attr("class","back-to-present"):this._back.attr("class","back-to-present hidden")},n.prototype._move=function(t){var e,i,o;"stop"==this._state&&this._chart.model().beginUndoMacro(1==t?"Move Left":"Move Right"),e=1,this._state="moving",this._moveType="animated",this._deferredFinishTimeout&&(clearTimeout(this._deferredFinishTimeout),this._deferredFinishTimeout=0),this._finishingTimeout&&(clearTimeout(this._finishingTimeout),this._finishingTimeout=0),this._startTime=+new Date,this._movingTimeout||(i=this._startTime,o=10,this._movingTimeout=setTimeout(function n(){this._moveStep.call(this,i,0,50*t,1e3),this._movingTimeout=setTimeout(n.bind(this),o)}.bind(this),o))},n.prototype._moveStep=function(t,e,i,o){var n,s,r;if(!this._chart.model().timeScale().isEmpty())return n=+new Date,s=1-(Math.max(0,t+o-n)/o||0),s<1&&(r=jQuery.easing.easeOutCubic(null,o*s,0,1,o),this.currentDistance=(i-e)*r+e),this._chart.model().scrollChart(this.currentDistance),s},n.prototype._finishMove=function(t){var e,i;clearTimeout(this._movingTimeout),this._movingTimeout=0,this._deferredFinishTimeout=0,e=this.currentDistance,i=+new Date,this._finishingTimeout=setTimeout(function o(){var t=this._moveStep.call(this,i,e,0,700);t<1?this._finishingTimeout=setTimeout(o.bind(this),10):(this._state="stop",this._moveType="",this._movingTimeout=0,this.currentDistance=0,this._chart.model().endUndoMacro())}.bind(this),10)},n.prototype._stopMove=function(t){"moving"==this._state&&(this._state="wait_finishing",(new Date).getTime()-this._startTime<200?this._deferredFinishTimeout=setTimeout(this._finishMove.bind(this),200-((new Date).getTime()-this._startTime)):this._finishMove())},n.prototype._moveByBar=function(t){var e,i,o,n,s,r=this._chart.model().timeScale();r.isEmpty()||("stop"==this._state&&this._chart.model().beginUndoMacro(1==t?"Move Left":"Move Right"),e=r.indexToCoordinate(r.visibleBars().lastBar())+r.barSpacing()/2,Math.abs(r.width()-e)>r.barSpacing()/6&&this._chart.model().scrollChart(r.width()-e),i=1,this._state="moving",this._moveType="by_bar",this._startTime=+new Date,this._movingTimeout||(o=400,n=150,s=0,this._movingTimeout=setTimeout(function a(){this._moveByBarStep(t),s++,n>100&&(n-=20*(s/5)),this._movingTimeout=setTimeout(a.bind(this),n)}.bind(this),o),this._moveByBarStep(t)))},n.prototype._moveByBarStep=function(t){this._chart.model().timeScale().isEmpty()||this._chart.model().scrollChartByBar(t)},n.prototype._stopMoveByBar=function(t){"moving"==this._state&&(clearTimeout(this._movingTimeout),this._movingTimeout=0,this._state="stop",this._moveType="",this._movingTimeout=0,this.currentDistance=0,this._chart.model().endUndoMacro())},n.prototype.initHandlers=function(){var t,e=this._chart,i=($(".control-bar span"),Modernizr.touch?"touchstart":"mousedown"),o=Modernizr.touch?"touchend":"mouseup mouseout";this._buttons.moveLeft.on(i,this._moveByBar.bind(this,1)),this._buttons.moveLeft.on(o,this._stopMoveByBar.bind(this,1)),this._buttons.moveRight.on(i,this._moveByBar.bind(this,-1)),this._buttons.moveRight.on(o,this._stopMoveByBar.bind(this,-1)),this._buttons.turn.on("click",function(){e.GUIResetScales()}),this._buttons.zoomOut.on("click",function(){e.model()&&e.model().zoomOut()}),this._buttons.zoomIn.on("click",function(){e.model()&&e.model().zoomIn()}),t={},$("body").on("keydown",function(e){if(!$(e.target).closest("input, textarea").length&&!(e.metaKey||e.which in t))switch(t[e.which]=!0,e.which){case 37:e.ctrlKey||e.altKey?this._move(1):this._moveByBar(1),e.preventDefault();break;case 39:e.ctrlKey||e.altKey?this._move(-1):this._moveByBar(-1),e.preventDefault()}}.bind(this)).on("keyup",function(e){if(!$(e.target).closest("input, textarea").length)switch(delete t[e.which],e.which){case 37:case 39:"by_bar"==this._moveType?this._stopMoveByBar():this._stopMove()}}.bind(this))},t.exports=n}).call(e,i(63),i(26))},function(t,e,i){(function(e,o){"use strict";function n(t){var i,o,n,s,r,a=this,l=this._chartWidget=t.chartWidget;this.$parent=t.parent,this._dateRangesPopupList=[],this._goToPopupBtn=[],this._iterativeHide=[],this._$seriesControls=$(document.createElement("div")).attr("class","chart-controls-bar-buttons chart-series-controls").appendTo(t.parent),this._$timezoneButton=$('<a class="apply-common-tooltip" title="'+$.t("Timezone")+'"><span class="chart-controls-clock"></span><span class="chart-controls-tz"></span></a>').appendTo(this._$seriesControls),l.onWidget()?this._$timezoneButton.addClass("disabled"):this._$timezoneButton.click(function(){a._chartWidget.showTimezoneProperties()}),this._$timezoneClock=this._$timezoneButton.find(".chart-controls-clock"),this._$timezoneName=this._$timezoneButton.find(".chart-controls-tz"),l.onWidget()||e.enabled("charting_library_base")?this._$extendedHoursButton=null:(this._$extendedHoursButton=$(document.createElement("a")).text($.t("ext")).attr("title",$.t("The Extended Trading Hours feature is available only for intraday charts")).addClass("apply-common-tooltip").appendTo(this._$seriesControls),this._iterativeHide.push(this._$extendedHoursButton)),this._$percButton=$(document.createElement("a")).text("%").attr("title",$.t("Toggle Percentage")).addClass("apply-common-tooltip").appendTo(this._$seriesControls),this._iterativeHide.push(this._$percButton),this._$logButton=$(document.createElement("a")).text($.t("log")).attr("title",$.t("Toggle Log Scale")).addClass("apply-common-tooltip").appendTo(this._$seriesControls),this._iterativeHide.push(this._$logButton),this._$autoScaleButton=$(document.createElement("a")).text($.t("auto",{context:"scale"})).attr("title",$.t("Toggle Auto Scale")).addClass("apply-common-tooltip").appendTo(this._$seriesControls),this._iterativeHide.push(this._$autoScaleButton),i=null,e.enabled("chart_property_page_scales")&&e.enabled("show_chart_property_page")&&(i=$(document.createElement("a")).attr("title",$.t("Scales Properties")).addClass("apply-common-tooltip").appendTo(this._$seriesControls)),this._$fullscreenChartButton=$(document.createElement("a")).attr("title",$.t("Toggle Maximize Chart")).addClass("apply-common-tooltip").appendTo(this._$seriesControls),this._iterativeHide.push(this._$timezoneButton),o="http://www.w3.org/2000/svg",n=$(document.createElementNS(o,"svg")).attr({width:12,height:12}).css({fill:"currentColor",stroke:"none",margin:"1px"}),$(document.createElementNS(o,"desc")).text("SP").appendTo(n),$(document.createElementNS(o,"path")).attr({d:"M 11.896733,5.4401 C 11.201602,5.2497118 10.287185,5.3844905 9.8529668,4.6739798 9.3680407,3.9899631 9.7713075,3.1150758 10.335646,2.6255445 10.81759,2.1397596 10.086625,1.2464141 9.5348331,1.5679918 9.0096065,2.0197899 8.3586515,2.5915907 7.6081884,2.2860159 6.8487054,2.0572252 6.6657258,1.2214292 6.6611579,0.52971682 6.6904416,-0.14270317 5.5547878,-0.19920111 5.3509206,0.33932112 5.3495604,1.0614071 5.216111,1.980668 4.4411277,2.2733721 3.718985,2.58432 3.0421913,2.0835985 2.5447076,1.6132218 2.019086,1.2075468 1.1733117,2.0525503 1.6258135,2.5522279 2.1291674,3.0522349 2.6067846,3.7947509 2.23627,4.5142319 1.9382627,5.2487851 1.0997484,5.3013165 0.42629601,5.3591295 -0.18586111,5.4121559 -0.1726988,6.614951 0.4382476,6.6606553 1.1701866,6.6354301 2.0901088,6.8653212 2.3114865,7.6677973 2.5690397,8.4182506 1.9757702,9.0009969 1.5707544,9.5375753 1.260194,10.111116 2.1887088,10.863746 2.6392394,10.30714 3.1282414,9.7691412 3.9518015,9.3917137 4.6315605,9.8249999 5.3287279,10.186762 5.2619381,11.018963 5.3869987,11.672161 5.5440075,12.215504 6.7794125,12.12358 6.6535582,11.446999 6.6654072,10.746236 6.9028479,9.8947057 7.6677558,9.6885901 8.4182253,9.4312024 9.000933,10.024446 9.5375381,10.429439 10.111007,10.739871 10.863873,9.8114259 10.307197,9.360908 9.7691358,8.8719351 9.3913098,8.0483184 9.8250144,7.3685614 10.18688,6.6714752 11.018948,6.7380091 11.672226,6.6131264 12.162952,6.4957229 11.998177,5.7860369 11.896733,5.4401 z M 5.999918,8.8061 C 4.4052236,8.8574703 3.0094365,7.3092614 3.2012542,5.7303585 3.3197775,4.2414555 4.7798203,3.0282413 6.2655218,3.2004993 7.7296227,3.3187202 8.9364572,4.7279379 8.805387,6.1941362 8.7186344,7.6148699 7.4347334,8.84471 5.999918,8.8061 z"}).appendTo(n),i&&i.append(n),s=$(document.createElementNS(o,"svg")).attr({width:12,height:12}).css({fill:"currentColor",stroke:"none",margin:"1px"}),s.get(0).setAttribute("viewBox","0 0 24 24"),$(document.createElementNS(o,"desc")).text("FS").appendTo(s),$(document.createElementNS(o,"path")).attr({d:"M0 0v9l3.5-3.5 4.5 4.5h2v-2l-4.5-4.5 3.5-3.5h-9zm15 0l3.5 3.5-4.5 4.5v2h2l4.5-4.5 3.5 3.5v-9h-9zm-7 14l-4.5 4.5-3.5-3.5v9h9l-3.5-3.5 4.5-4.5v-2h-2zm6 0v2l4.5 4.5-3.5 3.5h9v-9l-3.5 3.5-4.5-4.5h-2z"}).appendTo(s),this._$fullscreenChartButton.append(s),this._$percButton.on("click",function(t){var e,i,o,n;t.preventDefault(),e=l.model(),i=e.mainSeries(),o=i.priceScale(),n=o.properties(),i.properties().lockScale.value()||(e.beginUndoMacro($.t("Toggle Percentage")),n.log.value()&&e.setLogProperty(n.log,!1,o,$.t("Toggle Log Scale")),e.setPercentProperty(n.percentage,!n.percentage.value(),o,$.t("Toggle Percentage")),e.endUndoMacro())}),this._$logButton.on("click",function(t){var e,i,o,n;t.preventDefault(),e=l.model(),i=e.mainSeries(),o=i.priceScale(),n=o.properties(),i.properties().lockScale.value()||(e.beginUndoMacro($.t("Toggle Log Scale")),n.percentage.value()&&e.setPercentProperty(n.percentage,!1,o,$.t("Toggle Percentage")),e.setLogProperty(n.log,!n.log.value(),o,$.t("Toggle Log Scale")),e.endUndoMacro())}),this._$autoScaleButton.on("click",function(t){var e,i,o,n;t.preventDefault(),e=l.model(),i=e.mainSeries(),o=i.priceScale(),n=o.properties(),e.beginUndoMacro($.t("Toggle Auto Scale")),n.autoScale.value()&&n.percentage.value()&&e.setPercentProperty(n.percentage,!1,o,$.t("Toggle Percentage")),e.setAutoScaleProperty(n.autoScale,!n.autoScale.value(),o,$.t("Toggle Auto Scale")),e.endUndoMacro()}),i&&i.on("click",function(t){t.preventDefault();var e=l.showScalesProperties();e&&(i.addClass("active"),e.on("remove",function(){i.removeClass("active")}))}),this._$extendedHoursButton&&this._$extendedHoursButton.on("click",function(t){var e,i;t.preventDefault(),e=l.model(),i=e.mainSeries().properties().extendedHours,e.setProperty(i,!i.value(),"Extended Hours")}),this._$dateRangesWrap=$(document.createElement("div")).addClass("chart-controls-bar-buttons date-range-wrapper").appendTo(t.parent),this._$dateRangesBtn=$(document.createElement("a")).addClass("date-range-btn").text($.t("Date Range")).appendTo(this._$dateRangesWrap),this._$dateRanges=$(document.createElement("div")).addClass("date-range-list").appendTo(this._$dateRangesWrap),l.withModel(null,function(){var t=l.model(),i=t.mainSeries(),o=i.priceScale();this.updateScaleButtons(),i.priceScaleChanged.subscribe(this,this.updateScaleButtons),o.properties().autoScale.subscribe(this,this.updateScaleButtons),this.updateDateRangeButtons(),i.onStatusChanged().subscribe(this,this.updateDateRangeButtons),e.enabled("update_timeframes_set_on_symbol_resolve")&&i.onSymbolResolved().subscribe(this,this.updateDateRangeButtons),i.properties().lockScale.subscribe(this,this.updateDateRangeButtons),this.updateExtendedHoursButton(),i.properties().extendedHours.subscribe(this,this.updateExtendedHoursButton),i.properties().interval.subscribe(this,this.updateExtendedHoursButton),t.model().mainSeries().onSymbolResolved().subscribe(null,this.updateTimezonesButton.bind(this)),t.model().properties().timezone.subscribe(null,this.updateTimezonesButton.bind(this))}.bind(this)),this.updateFullscreenChartButton(),r=this._chartWidget._chartWidgetCollection,r&&(r.layout.subscribe(this.updateFullscreenChartButton.bind(this)),r.maximizeCurrentChart.subscribe(this.updateFullscreenChartButton.bind(this)),this._$fullscreenChartButton.on("click",function(){r.activeChartWidget.setValue(l),r.maximizeCurrentChart.setValue(!r.maximizeCurrentChart.value())}),this.checkTimezonesButton(r.activeChartWidget.value()),r.activeChartWidget.subscribe(this.checkTimezonesButton.bind(this)))}var s=i(50),r=s.bindPopupMenu,a=s.unbindPopupMenu;n.prototype.updateScaleButtons=function(){var t=this._chartWidget.model().mainSeries(),e=t.priceScale().properties(),i=e.log.value(),o=e.percentage.value(),n=e.autoScale.value();this._$logButton.toggleClass("active",i),this._$percButton.toggleClass("active",o),this._$autoScaleButton.toggleClass("active",n)},n.prototype.updateDateRangeButtons=function(){var t,e,i,o,n,s,r,a=this._chartWidget,l=a.model().mainSeries().status();if(l!=TradingView.Series.STATUS_LOADING){if(t=this,e=a._dateRangeResolutions(),i=function(t){a.model().loadRange(t)},this._dateRangesPopupList=[],e.length)for(this._$dateRanges.empty(),o=0;o<e.length;o++)n=e[o],s=$(document.createElement("a")).text(n.text),r=i.bind(this,{val:n.value,res:n.targetResolution}),s.appendTo(this._$dateRanges).click(r),this._dateRangesPopupList.push({title:n.text,action:r});this.updateTimeframePopupMenu()}},n.prototype.updateTimeframePopupMenu=function(){this._$dateRangesBtn.toggleClass("i-hidden",!(this._dateRangesPopupList.length||this._goToPopupBtn.length)),a(this._$dateRangesBtn),r(this._$dateRangesBtn,this._dateRangesPopupList.concat(this._goToPopupBtn),{direction:"up",addClass:"date-range-popupmenu"}),this.resizeUI()},n.prototype.updateTimezonesButton=function(){var t,e,i;null!==this._chartWidget.model().mainSeries().symbolInfo()&&(t=this._chartWidget.model().model().timezone(),"exchange"===t&&(e=this._chartWidget.model().mainSeries().symbolInfo().timezone,e&&(t=e)),i=TradingView.parseTzOffset(t),this.tzOffset=i.offset,this._$timezoneName.text("("+i.string+")"),this.tickClock(),this.resizeUI())},n.prototype.checkTimezonesButton=function(t){this._$timezoneButton.toggleClass("i-invisible",t!==this._chartWidget),this.resizeUI()},n.prototype.tickClock=function(){void 0!==this.tzOffset&&this._$timezoneClock.text(o(Date.now()+this.tzOffset+1e3*ChartApiInstance.serverTimeOffset()).utc().format("HH:mm:ss"))},n.prototype.updateExtendedHoursButton=function(){if(this._$extendedHoursButton){var t=this._chartWidget.model().mainSeries();t.properties().extendedHours.value()?this._$extendedHoursButton.addClass("active"):this._$extendedHoursButton.removeClass("active"),this.resizeUI()}},n.prototype.updateFullscreenChartButton=function(){var t=this._chartWidget._chartWidgetCollection;return t&&"s"!==t.layout.value()?(this._$fullscreenChartButton.removeClass("i-hidden"),this._$fullscreenChartButton.toggleClass("active",t.maximizeCurrentChart.value()),void this.resizeUI()):void this._$fullscreenChartButton.addClass("i-hidden")},n.prototype.updateUI=function(){this.updateScaleButtons(),this.resizeUI()},n.prototype.resizeUI=function(){var t,e,i,o,n,s,r;if(this._$seriesControls&&this._$dateRanges){for(this.$parent.addClass("i-measure"),t=this.$parent.width(),e=this._$dateRanges.width(),i=this._$dateRangesBtn.outerWidth(),o=0,this._$seriesControls.find("a").each(function(){var t=$(this);t.hasClass("i-hidden")||(o+=t.outerWidth())}),n=o,s=0;s<this._iterativeHide.length;s++)this._iterativeHide[s].hasClass("i-hidden")||(r=this._iterativeHide[s].outerWidth(),this._iterativeHide[s].toggleClass("i-compact",t-i<n),n-=r);this._$dateRangesWrap.toggleClass("i-compact",e>t-o),this.$parent.removeClass("i-measure")}},t.exports=n}).call(e,i(1),i(6))},function(t,e,i){(function(e,o){"use strict";function n(t,i){var n,a,l,h,c,d,p,u,_,f,g,m,v,y,w,b;if(null==t&&(t=s.symbol.value()),null!=t)return t+="",n=i&&i.symbolInfo,a=$.t("Symbol Info"),l=TVDialogs.createDialog(a,{width:450}),h=l.find("._tv-dialog-content"),c=$(document.createElement("div")).addClass("main").addClass("symbol-info-dialog").appendTo(h),d=function(t){var e,i=r;for(e=0;e<i.length;e++)if(i[e].id==t)return i[e].title;return t},p=function(t){return TradingView.parseSessionHours(t).join("<br/>")},u=[{title:"Symbol Name",propName:e.enabled("charting_library_base")?"name":"pro_name"},{title:"Symbol Description",propName:"description"},{title:"Symbol Type",propName:"type"},{title:"Point Value",propName:"pointvalue"},{title:"Exchange",propName:"exchange"},{title:"Listed Exchange",propName:"listed_exchange"},{title:"Currency",propName:"currency_code",formatter:function(t){return t||"USD"},defValue:"USD"},{title:"Price Scale",propName:"pricescale"},{title:"Min Move",propName:"minmov"},{title:"Min Move 2",propName:"minmove2"},{title:"Sector",propName:"sector"},{title:"Industry",propName:"industry"},{title:"Timezone",propName:"timezone",formatter:d,optional:!0},{title:"Session",propName:"session",formatter:p,optional:!0,setHtml:!0}],_='<table cellspacing=0>{{#fields}}<tr{{#optional}} class="js-optional"{{/optional}}><td class="symbol-info-column"><span class="symbol-info-text">{{title}}</span></td><td class="symbol-info-value"><span class="symbol-info-text">{{#defValue}}{{defValue}}{{/defValue}}{{^defValue}}-{{/defValue}}</span></td></tr>{{/fields}}</table>',f=$(o.render(_,{fields:u})).appendTo(c),f.find(".symbol-info-value span").each(function(t,e){u[t].$element=$(e)}),g=function(t){return t||"-"},m=0,v=function(t){var e,i,o,n;for(e=0;e<u.length;e++)i=u[e].propName,i in t&&(o=t[i],o=(u[e].formatter||g)(o),u[e].setHtml?u[e].$element.html(o):u[e].$element.text(o),u.splice(e,1),e--);n=t.type&&"economic"==t.type||t.listed_exchange&&["QUANDL","BSE_EOD","NSE_EOD","LSE_EOD"].indexOf(t.listed_exchange)>=0,n&&f.find(".js-optional").remove()},n&&v(n),m<u.length&&window.quoteSessionMultiplexerInstance&&(y="symbolinfodialog."+TradingView.guid(),quoteSessionMultiplexerInstance.full.subscribe(y,t,function(e,i){v(i.values),quoteSessionMultiplexerInstance.full.unsubscribe(y,t)})),w=$(document.createElement("div")).addClass("dialog-buttons").appendTo(c),b=$(document.createElement("a")).addClass("_tv-button").addClass("cancel").text($.t("Close")).appendTo(w).click(function(){TVDialogs.destroy(l.data("title"))}),TVDialogs.positionDialog(l),TVDialogs.applyHandlers(l),l}var s=i(44),r=i(47).availableTimezones;t.exports=n}).call(e,i(1),i(33))},function(t,e,i){(function(e,o){"use strict";function n(t){function i(){if(!t.favoriteChartTypes)return[];var e={Bars:TradingView.Series.STYLE_BARS,Candles:TradingView.Series.STYLE_CANDLES,Line:TradingView.Series.STYLE_LINE,Area:TradingView.Series.STYLE_AREA,"Heiken Ashi":TradingView.Series.STYLE_HEIKEN_ASHI,"Hollow Candles":TradingView.Series.STYLE_HOLLOW_CANDLES};return t.favoriteChartTypes.map(function(t){return e[t]})}var n,l,d,_,f,g,m,v,y,w,b,S,T,C,x,P,L,k,E,I;t=t||{},n=this._chartWidgetCollection=t.chartWidgetCollection,l=this._chartWidget=n.activeChartWidget.value(),d=this._onWidget=l.onWidget(),_=this,f=Modernizr.touch?"touchstart":"click",g=$(".header-chart-panel").eq(0),this._$right=g.find(".right"),this._$left=g.find(".left"),this._itemsVisibility=t.itemsVisibility,TradingView.isMobileView&&!TradingView.winMobileMode&&this._createBackButton(this),n.readOnly()||(e.enabled("header_symbol_search")&&(m=this.createGroup().appendTo(this._$left),v=$('<div class="symbol-edit-widget no-last"></div>').appendTo(m),y=$('<div class="symbol-edit-wrap">').appendTo(v),w=null,!e.enabled("charting_library_base")&&p.canShowSpreadActions()&&(b=$('<div class="symbol-edit-buttonswrap">').appendTo(y),w=$('<div class="spread-actions">').appendTo(b).on("mousedown",function(t){t.preventDefault()})),S=$('<div class="symbol-edit-inputspacer">').appendTo(y),T=$('<input type="text" class="symbol-edit" maxlenght="'+TradingView.SYMBOL_SEARCH_MAX_LENGTH+'">').appendTo(S),p.bindToInput(T,{syncWithChartWidget:!0,spreadActions:w}),function(){var t=!1;T.on("focus",function(){t=!0,y.addClass("expanded")}),T.on("blur",function(){t=!1,setTimeout(function(){t||y.removeClass("expanded")},40)})}()),e.enabled("header_resolutions")&&(m=this.createGroup({single:!0}).appendTo(this._$left),C={onWidget:d,submenuBtnAddClass:"apply-common-tooltip"},t.interval_options&&$.extend(C,t.interval_options),!TradingView.isMobileView&&e.enabled("items_favoriting")||$.extend(C,{notShowQuicks:!0,popupSpacing:1}),TradingView.isOnFeaturePage&&$.extend(C,{notShowQuicks:!0}),this._interval=new h(C),e.enabled("charting_library_base")&&ChartApiInstance.on("configuration_received",function(){_._interval.forceUpdate()}),this._interval.element().addClass("no-first").appendTo(m),this._interval.onResize.subscribe(n,n.updateLayout),t.favoriteIntervals&&this._interval.setUpStarredItemsList(t.favoriteIntervals)),e.enabled("header_chart_type")&&(x=e.enabled("charting_library_base")?[{id:TradingView.Series.STYLE_BARS,title:$.t("Bars"),icon:"bars"},{id:TradingView.Series.STYLE_CANDLES,title:$.t("Candles"),icon:"candles"},{id:TradingView.Series.STYLE_HOLLOW_CANDLES,title:$.t("Hollow Candles"),icon:"hollowCandles"},{id:TradingView.Series.STYLE_LINE,title:$.t("Line"),icon:"line"},{id:TradingView.Series.STYLE_AREA,title:$.t("Area"),icon:"area"},{id:TradingView.Series.STYLE_HEIKEN_ASHI,title:$.t("Heikin Ashi"),icon:"heikenAshi"}]:[{id:TradingView.Series.STYLE_BARS,title:$.t("Bars"),icon:"bars"},{id:TradingView.Series.STYLE_CANDLES,title:$.t("Candles"),icon:"candles"},{id:TradingView.Series.STYLE_HOLLOW_CANDLES,title:$.t("Hollow Candles"),icon:"hollowCandles"},{id:TradingView.Series.STYLE_HEIKEN_ASHI,title:$.t("Heikin Ashi"),icon:"heikenAshi"},{id:TradingView.Series.STYLE_LINE,title:$.t("Line"),icon:"line"},{id:TradingView.Series.STYLE_AREA,title:$.t("Area"),icon:"area"},{id:TradingView.Series.STYLE_RENKO,title:$.t("Renko"),icon:"renko"},{id:TradingView.Series.STYLE_PB,title:$.t("Line Break"),icon:"lineBreak"},{id:TradingView.Series.STYLE_KAGI,title:$.t("Kagi"),icon:"kagi"},{id:TradingView.Series.STYLE_PNF,title:$.t("Point & Figure"),icon:"pointFigure"}],P=i()||[1,4,5,6],!TradingView.isMobileView&&!TradingView.isOnFeaturePage||e.enabled("charting_library_base")||(P=[]),d?P=[1,3]:e.enabled("collapsible_header")&&this._createMinimizeButton(t.headerChartPanel),this._style_list=new u("StyleWidget",$.map(x,function(t){return{id:t.id,title:t.title,svg:$(o(t.icon,"26x26")),favoriteButton:{title:t.title,addClass:"apply-common-tooltip"}}}),{defaultFavorites:P,addClass:"chart-style-widget",popupAddClass:"chart-style-popup",notShowQuicks:!!TradingView.isMobileView||!e.enabled("items_favoriting"),showJustDefaultQuicks:P&&P.length&&e.enabled("predefined_items_only_may_be_starred"),tooltip:$.t("Bar's Style"),addTooltipClass:"apply-common-tooltip"}),n.activeChartStyle.subscribe(function(t){_._style_list.setValue(t)},{callWithLast:!0}),_._style_list.onChange().subscribe(this,function(t){n.activeChartStyle.setValue(t)}),_._style_list.onResize().subscribe(n,n.updateLayout)),window.studyMarket=new c(n,window.user,{onWidget:d}),this._createLayout(t,_,f)),this._chartWidget.readOnly()||TradingView.isMobileView||!e.enabled("header_undo_redo")||(this._undoRedo=new s(this._$left,this._chartWidget),this._undoRedo.undoElement().addClass("apply-common-tooltip"),this._undoRedo.redoElement().addClass("apply-common-tooltip")),e.enabled("header_screenshot")&&(L=$('<div class="group space-single"></div>').appendTo(this._$right),k=$('<a class="button getimage"></a>').append(o("snapshot",{"class":"icon"})).addClass("apply-common-tooltip").attr("title",$.t("Take instant snapshot of your chart. No more Paint or other editors to save screenshots  simply click the button and copy the link of the picture.")).appendTo(L),L.click(function(t){if(!e.enabled("show_dialog_on_snapshot_ready")){if(k.hasClass("process"))return;k.addClass("process"),n.onScreenshotReady().subscribe(null,function(t){k.removeClass("process")},!0)}l.actions().takeScreenshot.callbacks().fire(),t.preventDefault()})),e.enabled("header_saveload")&&(E=e.enabled("header_saveload_to_the_right")?this._$right:this._$left,m=e.enabled("charting_library_base")?this.createGroup({single:!0}).appendTo(E):E,I=$("<div>").addClass("save-load-buttons").appendTo(m),this._saveLoad=new a(I,n,{popupDirection:"down",popupReverse:!0}),this._saveLoad.onTitleSizeChanged.subscribe(n,n.updateLayout),TradingView.isOnFeaturePage&&this._saveLoad.hideTitle()),e.enabled("header_widget_dom_node")||$(".header-chart-panel").css("display","none"),l.withModel(this,r.prototype.bindToModel)}var s=i(377),r=i(368),a=i(378),l=i(381),h=i(382),c=i(384),d=i(271),p=i(41),u=i(50).FavoredList;inherit(n,r),n.prototype._createUndoRedoGroup=function(){return this._undoRedo=new s(this._$left,this._chartWidget),this._undoRedo.undoElement().addClass("apply-common-tooltip"),this._undoRedo.redoElement().addClass("apply-common-tooltip"),this.createGroup({single:!0}).append(this._undoRedo.element())},n.prototype._createFullscreenGroup=function(){this._fullscreen=new l;var t=this.createGroup({single:!0});return this._fullscreen.element().addClass("apply-common-tooltip").appendTo(t),t},n.prototype._createLayout=function(t,i,o){var n=[];e.enabled("header_chart_type")&&n.push(this._createBarsGroup(i)),e.enabled("header_settings")&&e.enabled("show_chart_property_page")&&n.push(this._createPropertiesGroup(o,t.chartWidgetCollection)),e.enabled("header_indicators")&&n.push(this._createIndicatorsGroup(o)),e.enabled("header_compare")&&n.push(this._createCompareGroup(i,t.chartWidgetCollection,o)),!e.enabled("header_undo_redo")||this._chartWidget.readOnly()||TradingView.isMobileView||n.push(this._createUndoRedoGroup()),e.enabled("header_fullscreen_button")&&!TradingView.isMobileView&&n.push(this._createFullscreenGroup()),n.forEach(function(t){t.appendTo(this._$left)},this),e.enabled("caption_buttons_text_if_possible")&&this._setupCaptionButtons()},n.prototype._setupCaptionButtons=function(){var t=this._$left,e=t.children(".group"),i=this._chartWidgetCollection&&this._chartWidgetCollection.updateLayout,o=function(){for(var t,i=0,o=e.toArray();i<e.length;i++)if(void 0!==t){if($(o[i]).offset().top>t+5)return!1}else t=$(o[i]).offset().top;return!0},n=function(){t.addClass("captions"),o()||t.removeClass("captions"),t.find("svg").pixelSnap(),"function"==typeof i&&i()};this._style_list.onResize().subscribe(null,n),this._interval.onResize.subscribe(null,n),window.studyTemplates&&studyTemplates.onFavoriteListResize.subscribe(null,n),$(window).resize(n),n()},n.prototype._createMinimizeButton=function(t){if(t&&t.size()){$(document.createElement("span")).addClass("tv-close-panel top").appendTo(t).on("click",function(e){e.isDefaultPrevented()||(e.preventDefault(),t.toggleClass("hidden"),d.emit("toggle_header",!t.hasClass("hidden")),$(window).trigger("resize"))})}},t.exports=n}).call(e,i(1),i(26))},function(t,e,i){(function(e){"use strict";function o(){this._$wrap=$(document.createElement("span")),this._undo=$('<span class="button undo disabled"></span>').append(e("undo")).attr("title","").appendTo(this._$wrap),this._redo=$('<span class="button redo disabled"></span>').append(e("redo")).attr("title","").appendTo(this._$wrap);var t=this;this._undo.click(function(){t.undo()}),this._redo.click(function(){t.redo()}),n.undoStack().onChange().subscribe(this,this.update),n.redoStack().onChange().subscribe(this,this.update)}var n=i(287).UndoHistory;o.prototype.update=function(){var t=n.undoStack(),e=n.redoStack();t.isEmpty()?(this._undo.addClass("disabled"),this._undo.attr("title",null)):(this._undo.removeClass("disabled"),this._undo.attr("title",$.t("Undo {0}").format(t.head().text()||""))),e.isEmpty()?(this._redo.addClass("disabled"),this._redo.attr("title",null)):(this._redo.removeClass("disabled"),this._redo.attr("title",$.t("Redo {0}").format(e.head().text()||"")))},o.prototype.undo=function(){this._undo.hasClass("disabled")||(TradingView.trackEvent("GUI","Undo"),n.undo())},o.prototype.redo=function(){this._redo.hasClass("disabled")||(TradingView.trackEvent("GUI","Redo"),n.redo())},o.prototype.element=function(){return this._$wrap},o.prototype.undoElement=function(){return this._undo},o.prototype.redoElement=function(){return this._redo},t.exports=o}).call(e,i(26))},function(t,e,i){(function(e,o,n){"use strict";function s(t,i,n){function h(){i.metaInfo.name.value()||p._readOnly?p.setTitle(i.metaInfo.name.value()):p.hideTitle()}var d,p;n=$.extend({popupDirection:"up",popupReverse:!1},n||{}),this._options=n,this.onTitleSizeChanged=new e,this._container=t=$(t),this._chartWidgetCollection=i,this._readOnly=i.readOnly(),this._savedCharts=[],this._editEnabled=!0,this.loadChartDialog=new l,this.renameChartDialog=new a,this._load=$('<span class="load button first apply-common-tooltip"></span>').append(o("download")).attr("title",$.t("Load Chart Layout")).click(this.signInOrLoadChart.bind(this)).appendTo(t),this._title=$('<span class="title apply-common-tooltip"></span>'),n.hideChartTitle&&this._title.hide(),this._sep=$("<span>").addClass("separator"),this._optionsMenu=$('<span class="button with-arrow options last">').append($("<span>").addClass("arrow-icon")),c(this._optionsMenu,this._getSavedCharts.bind(this),{direction:n.popupDirection,reverse:n.popupReverse,notCloseOnButtons:!0,popupSpacing:n.popupSpacing}),this._readOnly?(this._save=$(),this._copy=$('<span class="copy">'+$.t("Copy")+"</span>").appendTo(t).click($.proxy(this,"cloneChart")),
this._title.addClass("read-only"),this._titleReadOnly=$("<span>").addClass("read-only").appendTo(this._title),this._sep.appendTo(this._copy),this._optionsMenu.hide()):(d=$.t("Save Chart Layout saves not just some particular chart, it saves all charts for all symbols and intervals which you are modifying while working with this Layout"),this._save=$('<span class="save button apply-common-tooltip"></span>').attr("title",d).append(o("upload")).appendTo(t).click($.proxy(this,"signInOrSaveChart")),this._copy=$(),this._titleInput=$('<span type="text" maxlength="80">').appendTo(this._title),this._title.bind("click",$.proxy(this,"_renameChart")),this._title.attr("title",$.t("Rename Chart Layout")),this._titleSize=$('<span class="sizer">').appendTo(this._title),this._sep.appendTo(this._save)),this._title.appendTo(t),this._optionsMenu.appendTo(t),this._savecopy=$().add(this._save).add(this._copy).mousedown(function(t){return!t.button&&void this._save.addClass("active")}.bind(this)).mouseup(function(){this._save.removeClass("active")}.bind(this)),p=this,i.metaInfo.name.subscribe(function(){h()}),h(),loginStateChange.subscribe(this,this._refreshSavedChartsList),TVXWindowEvents.on("saved-charts-change",$.proxy(this._otherTabUpdated,this)),TVXWindowEvents.on("saved-charts-change-favorites",$.proxy(this._favoritesUpdated,this)),r.undoStack().onChange().subscribe(this,function(){if(!r.undoStack().isEmpty()){var t=r.undoStack().head().text();if("scroll"==t||"scale time"==t)return}this._setChanges(!0),this.autosave()}),TradingView.keyboardBinder.registerListener("LoadChartDialogHotkey",function(t){return!t.ctrlKey&&(!("46"!=t.which||!$(t.target).is("body"))&&(this.loadMenu(),t.preventDefault(),t.stopPropagation(),!0))}.bind(this)),this.favorites=TVSettings.getJSON(s.FAVORITES_KEY,{})}var r=i(287).UndoHistory,a=i(379),l=i(380),h=i(50).showChartNameDialog,c=i(50).bindPopupMenu;s.FAVORITES_KEY="loadChartDialog.favorites",s.prototype._favoritesUpdated=function(t){this.favorites=JSON.parse(t),this.loadChartDialog.updateFavoritesData(this.favorites)},s.prototype._otherTabUpdated=function(t){this._savedCharts=JSON.parse(t),this.loadChartDialog.updateChartsData(this._getLoadMenuCharts())},s.prototype._renameChart=function(){var t=this;t._editEnabled&&this.renameChartDialog.show(this.getTitle()).then(function(e){t.setTitle(e),t.saveChart()})},s.prototype._setTitle=function(t){this._titleInput.text(t),this._titleValue=t,this._savecopy.removeClass("last").addClass("titled"),t?this._options.hideChartTitle||(this._optionsMenu.show(),this._title.show()):(this._optionsMenu.hide(),this._title.hide(),this._savecopy.addClass("last").removeClass("titled")),this._setInputSuze(),this._setChanges(!0)},s.prototype._setReadOnlyTitle=function(t){this._titleReadOnly.html(t).attr("title",t.replace(/<[^>]+>/g,"")),this._savecopy.removeClass("last").addClass("titled"),this._title.addClass("last"),this._options.hideChartTitle||this._title.show()},s.prototype.setTitle=function(t){if(this._readOnly){var e=TradingView.clean(this._chartWidgetCollection.metaInfo.username.value());t=(t?t+": ":"")+"view-only chart by "+'<a href="/u/%1">%1</a>'.replace(/%1/g,e),this._setReadOnlyTitle(t)}else this._setTitle(t)},s.prototype.hideTitle=function(){this._title.hide(),this._optionsMenu.hide(),this._titleInput.text(""),this._savecopy.removeClass("titled").addClass("last")},s.prototype.getTitle=function(){return this._titleValue},s.prototype._setInputSuze=function(){this._titleSize.text(this._titleInput.text()),this._titleInput.width(this._titleSize.width()),this.onTitleSizeChanged.fire()},s.prototype.cloneChart=function(){var t,e=this;n.enabled("save_old_chart_before_save_as")&&this._chartWidgetCollection.metaInfo.id.value()&&this._saveChart(),t=new a($.t("Copy Chart Layout")),t.show($.t("{0} copy").format(e._chartWidgetCollection.metaInfo.name.value())).then(function(t){n.enabled("saved_charts_count_restriction")&&!user.is_pro&&e._savedCharts.length>=5?TVDialogs.showGoProDialog({feature:"savedChartsLimit"}):n.enabled("saveload_storage_customization")?(e._chartWidgetCollection.metaInfo.uid.setValue(void 0),e._chartWidgetCollection.metaInfo.id.setValue(void 0),e.setTitle(t),e.saveChart()):window.open("/chart/?clone="+e._chartWidgetCollection.metaInfo.uid.value()+"&name="+encodeURIComponent(t),"_blank")}.bind(this))},s.prototype._setChanges=function(t){t=!!t,this._haveChanges=t,!t&&this.getTitle()?this._save.addClass("no-change"):this._save.removeClass("no-change")},s.prototype._process=function(t){t=!!t,t?this._save.addClass("process"):this._save.removeClass("process")},s.prototype._saveChart=function(t,e){if(!this._readOnly&&!this._saving&&this._haveChanges){var i=function(){this._saving=!1,this._process(!1),this._editEnabled=!0}.bind(this);this._saving=!0,this._process(!0),this._editEnabled=!1;try{window.saver.saveChartSilently(function(){i(),this._setChanges(!1),"function"==typeof t&&t.call(this)}.bind(this),null,function(){i(),"function"==typeof e&&e.call(this)})}catch(o){i(),TradingView.logError("Error while saving",o)}}},s.prototype._autosaveInterval=6e4,s.prototype.autosave=function(){n.enabled("charts_auto_save")&&(this._chartWidgetCollection.onfeatures||(this._autosaveTimer&&(clearTimeout(this._autosaveTimer),this._autosaveTimer=0),this._autosaveTimer=setTimeout(function(){this._chartWidgetCollection.metaInfo.id.value()&&this._saveChart()}.bind(this),this._autosaveInterval)))},s.prototype._goChartPage=function(t){"/chart/"==location.pathname&&(location.href="/chart/"+t+(TradingView.isMobileView?"?mobile=1":""))},s.prototype.saveChart=function(){if(!this._chartWidgetCollection.onfeatures){var t=this.getTitle();t?(this._chartWidgetCollection.metaInfo.name.setValue(t),this._saveChart(function(){TradingView.trackEvent("GUI","Save Chart Layout"),this._goChartPage(this._chartWidgetCollection.metaInfo.uid.value()),this._refreshSavedChartsList()}.bind(this),function(){this._chartWidgetCollection.metaInfo.name.setValue(""),this.setTitle("")}.bind(this))):h(function(t){this.setTitle(t),this.saveChart()}.bind(this),{label:$.t("Chart layout name")},64)}},s.prototype.signInOrSaveChart=function(){n.enabled("saveload_requires_authentication")?runOrSignIn($.proxy(this,"saveChart"),{source:"Save chart",sourceMeta:"Chart"}):this.saveChart()},s.prototype.signInOrLoadChart=function(){n.enabled("saveload_requires_authentication")?runOrSignIn($.proxy(this,"loadMenu"),{source:"Load chart",sourceMeta:"Chart"}):this.loadMenu()},s.prototype.signInOrRenameChart=function(){n.enabled("saveload_requires_authentication")?runOrSignIn($.proxy(this,"_renameChart"),{source:"Rename chart"}):this._renameChart()},s.prototype.signInOrSaveAs=function(){n.enabled("saveload_requires_authentication")?runOrSignIn($.proxy(this,"cloneChart"),{source:"Clone chart"}):this.cloneChart()},s.prototype.saveChartByEnter=function(t){"13"==t.keyCode&&(this._titleInput.blur(),this.signInOrSaveChart())},s.prototype._refreshSavedChartsList=function(t){n.enabled("saveload_requires_authentication")&&!is_authenticated?this._savedCharts=[]:TradingView.getSavedChartsList(function(t){this._savedCharts=t,TVXWindowEvents.emit("saved-charts-change",JSON.stringify(t))}.bind(this)).then(function(){TVSettings.getJSON(this._FAV_KEY,[]);t&&t()})},s.prototype._getSavedChartsList=function(){return this._savedCharts},s.prototype._fastDelete=function(t,e){this._savedCharts.splice(e,1),t==this._chartWidgetCollection.metaInfo.id.value()&&(n.enabled("saveload_storage_customization")?(this._chartWidgetCollection.clearChartMetaInfo(),this.setTitle(void 0)):location.href="/chart/")},s.prototype._getSavedCharts=function(){var t,e=[];return this.isSaved()&&e.push({title:this.getTitle(),disabled:!0,addClass:"save-load-chart-title"}),this._readOnly||(e.push({title:$.t("Save Chart Layout"),action:this.signInOrSaveChart.bind(this)}),this.isSaved()&&(e.push({title:$.t("Save As..."),action:this.signInOrSaveAs.bind(this)}),e.push({title:$.t("Rename..."),action:this.signInOrRenameChart.bind(this)})),n.enabled("charting_library_base")||(t=new c.Group,t.push({addClass:"button-load",title:$.t("Load"),action:this.signInOrLoadChart.bind(this)}),t.push({addClass:"button-new",title:$.t("New"),action:this.loadChartDialog.openNewChart.bind(this.loadChartDialog)}),e.push(t))),e},s.prototype.isSaved=function(){return!!this.getTitle()},s.prototype._getLoadMenuCharts=function(){var t=[],e=this,i=this._getSavedChartsList();return i.length&&$.each(i,function(i,o){t.push({id:o.id,title:o.name,symbol:o.short_symbol,interval:o.interval,toolsCount:0,modified:o.modified_iso,active:function(){return o.id==e._chartWidgetCollection.metaInfo.id.value()},openAction:function(){TradingView.openSavedChart(o)},deleteAction:function(t){TradingView.deleteChart(o.image_url,function(){e._fastDelete(o.id,i),TVXWindowEvents.emit("saved-charts-change",JSON.stringify(e._savedCharts)),t.resolve()})},favoriteAction:function(t){e.favorites=t,TVSettings.setJSON(s.FAVORITES_KEY,t),TVXWindowEvents.emit("saved-charts-change-favorites",JSON.stringify(t))}})}),t},s.prototype.loadMenu=function(){var t=this;this._load.addClass("process"),this._refreshSavedChartsList(function(){t._load.removeClass("process"),t.loadChartDialog.show(t._getLoadMenuCharts(),t.favorites)})},t.exports=s}).call(e,i(32),i(26),i(1))},function(t,e){"use strict";function i(t,e,i){this.title=t||$.t("Rename Chart Layout"),this.label=e||$.t("Enter a new chart layout name"),this.maxlength=i||""}i.prototype.show=function(t){var e,i=$.Deferred(),o=TVDialogs.createDialog(this.title),n=function(){var t=o.find('input[name="name"]'),e=t.val();return e?(i.resolve(e),TVDialogs.destroy(this.title)):(TVDialogs.showError($.t("Please enter chart layout name"),TVDialogs.get(this.title)),t.focus()),!1}.bind(this);return o.css("width","400px"),o.find("._tv-dialog-content").html('<div class="main"><form><p>'+this.label+':</p><p class="_tv-dialogs-name"><input type="text" name="name" maxlength="'+this.maxlength+'"/></p><p class="_tv-dialog-right"></p></form></div>'),o.find("form").submit(n),$('<a class="_tv-button wide ok">'+$.t("OK")+"</a>").click(n).css({"margin-right":"5px"}).appendTo(o.find("._tv-dialog-right")),$('<a class="_tv-button wide cancel">'+$.t("Cancel")+"</a>").click(function(){TVDialogs.destroy(this.title)}.bind(this)).appendTo(o.find("._tv-dialog-right")),TVDialogs.positionDialog(o,{left:$(window).width()/2-o.width()/2,top:$(window).height()/2-o.height()/2}),TVDialogs.applyHandlers(o),e=o.find('input[name="name"]'),e.val(t).focus().select(),i},t.exports=i},function(t,e,i){(function(e,o,n){"use strict";function s(){this.title=$.t("Load Chart Layout"),this.options={},this.inputDelegate=new e,this.matchedItems=[],this.itemsData=[],this.qs=new s.QuickSearch(this.inputDelegate,this.fieldsExtractor,this.searchResult.bind(this)),this.sortObj=new s.SortObject(this.modifiedCompare),this.nameSort=new s.SortObject(this.nameCompare),this.symbolSort=new s.SortObject(this.symbolCompare),this.toolsSort=new s.SortObject(this.toolsCompare),r.on("chart_loaded",s.onChartLoaded,this)}var r=i(271),a=i(56).SidebarCustomScroll;s.onChartLoaded=function(){this.itemsData&&this.itemsData.length>0&&this._refreshChartsList()},s.QuickSearch=function(t,e,i){this.fieldsExtractor=e,this.callback=i,this.regExps=[],t.subscribe(this,this.onInput)},s.QuickSearch.prototype.onInput=function(t){this.query=t,this.createRegexps(t),this.search()},s.QuickSearch.prototype.createRegexps=function(t){this.regExps=[],this.regExps.push(RegExp("("+t.split("").map(function(t){return TradingView.RegExpEscape(t)}).join(")(.*?)(")+")","i"))},s.QuickSearch.prototype.match=function(t){var e,i,o,n;for(e=0;e<this.regExps.length;e++)for(i=this.regExps[e],i.lastIndex=0,o=this.fieldsExtractor(t),n=0;n<o.length;n++)if(i.test(o[n]))return!0;return!1},s.QuickSearch.prototype.search=function(){var t,e,i=[];for(t=0;t<this.items.length;t++)e=this.items[t],this.match(e)&&i.push(e);this.callback(i,this.regExps)},s.QuickSearch.prototype.setItems=function(t){this.items=t},s.SortObject=function(t,e){this.isAscending=!1,this.sortingFunc=t,this.getPredicate=function(){return function(t,e){var i=this.sortingFunc(t,e);return this.isAscending&&(i*=-1),i}.bind(this)},this.inverse=function(){this.isAscending=!this.isAscending},this.setIsAscending=function(t){return"boolean"==typeof t&&(this.isAscending=t),this.isAscending},this.reset=function(){this.isAscending=!1}},s.prototype.fieldsExtractor=function(t){var e=s.symbolWrap(t);return[t.title,e]},s.prototype.saveFavorite=function(t,e){e?this.favorites[t]=e:delete this.favorites[t]},s.prototype.filterFavorites=function(){var t={};this.itemsData.map(function(e){this.favorites.hasOwnProperty(e.id)&&(t[e.id]=!0)}.bind(this)),this.favorites=t},s.prototype.getFavorite=function(t){return this.favorites.hasOwnProperty(t)},s.prototype._appendListItem=function(t){var e,i,s,r,a,l,h=$('<div class="item">').appendTo(this.itemsList);t.active()&&h.addClass("active"),e=o.unix(t.modified),i=$('<div class="value name first">').appendTo(h),n.enabled("items_favoriting")&&(s=$('<div class="icon-favorite">').appendTo(i).click(function(e){this.saveFavorite(t.id,!this.getFavorite(t.id)),this.filterFavorites(),this.fillList(),t.favoriteAction(this.favorites),e.stopPropagation()}.bind(this)),this.getFavorite(t.id)&&s.addClass("active")),r=$('<span class="text">').text(t.title).appendTo(i),a=$('<div class="actions">').appendTo(h),$('<div class="icon-delete">').appendTo(a).click(function(e){var i=this,o=$.Deferred();t.deleteAction(o),o.then(function(){i.removeItem(t)}),e.stopPropagation()}.bind(this)),$('<div class="value modified">').text(e.format("L LT")).appendTo(h),l=""===t.symbol?"multiple charts":t.symbol+", "+t.interval,$('<div class="value symbol last">').text(l).appendTo(h),h.click(function(e){this.itemsList.executing!==!0&&(this.itemsList.executing=!0,t.openAction(),setTimeout(function(){this.itemsList.executing=!1}.bind(this),1e3))}.bind(this))},s.prototype.removeItem=function(t){var e=this.itemsData.indexOf(t);e>-1&&this.itemsData.splice(e,1),this.setChartsData(this.itemsData)},s.prototype.modifiedCompare=function(t,e){var i=t.modified,n=e.modified;return o(n).diff(o(i))},s.prototype.nameCompare=function(t,e){return t.title.localeCompare(e.title)},s.symbolWrap=function(t){return""===t.symbol?"multiple charts":t.symbol+" "+t.interval},s.prototype.symbolCompare=function(t,e){return s.symbolWrap(t).localeCompare(s.symbolWrap(e))},s.prototype.toolsCompare=function(t,e){var i=t.toolsCount,o=e.toolsCount;return i<o?-1:i==o?0:1},s.prototype.sortClick=function(t){this.setSort($(t.target).data("sort"),!0),this.fillList()},s.prototype.setSort=function(t,e){var i,o={field:TVSettings.getValue("loadChartDialog.sort.field")||"modified",isAscending:TVSettings.getValue("loadChartDialog.sort.asc")||"0"},n=t||o.field,s=e?"0"==o.isAscending?"1":"0":o.isAscending;this.currentSortObj&&!(i=n!=o.field)||(this.currentSortObj="name"==n?this.nameSort:"symbol"==n?this.symbolSort:"tools"==n?this.toolsSort:this.sortObj,i&&TVSettings.setValue("loadChartDialog.sort.field",n)),this.currentSortObj.setIsAscending("1"==s),s!=o.isAscending&&TVSettings.setValue("loadChartDialog.sort.asc",s),$.each(this.header.children(".item"),function(){$(this).data("sort");$(this)[$(this).data("sort")==n?"addClass":"removeClass"]("active")})},s.prototype.sortList=function(){var t,e=[],i=[];this.matchedItems.map(function(t){this.favorites.hasOwnProperty(t.id)?e.push(t):i.push(t)}.bind(this)),void 0!==this.currentSortObj&&(t=this.currentSortObj.getPredicate(),i.sort(t),e.sort(t)),this.matchedItems=e.concat(i)},s.prototype.fillList=function(){var t=this;this.sortList(),this.itemsList.children(".item").remove(),$.each(this.matchedItems,function(){t._appendListItem(this)}),this.highlightOccurrences(this.qs.regExps)},s.prototype.searchResult=function(t,e){this.matchedItems=t,this.fillList()},s.prototype.updateChartsData=function(t){this.setChartsData(t)},s.prototype.updateFavoritesData=function(t){this.favorites=t,this.itemsList&&this.inputDelegate.fire(this.input.val())},s.prototype._refreshChartsList=function(){this.qs.setItems(this.itemsData),this.inputDelegate.fire(this.input.val())},s.prototype.setChartsData=function(t){this.itemsList&&(this.itemsData=t,this.qs.setItems(t),this.inputDelegate.fire(this.input.val()))},s.prototype.layoutHeader=function(){var t=$('<div class="list-header">').appendTo(this.content);return $('<div class="item name first">').text($.t("Chart Layout Name")).data("sort","name").appendTo(t),$('<div class="item modified">').text($.t("Last Modified")).data("sort","modified").appendTo(t),$('<div class="item symbol last">').text($.t("Active Symbol")).data("sort","symbol").appendTo(t),t},s.prototype.resetSort=function(){this.sortObj.reset(),this.nameSort.reset(),this.symbolSort.reset(),this.toolsSort.reset(),this.currentSortObj=this.sortObj},s.prototype.resetSearchClick=function(){this.input.val("").trigger("input").focus()},s.prototype.show=function(t,e){var i,o,l,h;this.options.width="654px",this.options.content='<div class="load-chart">'+(n.enabled("new_chart_creation_available")?'<a class="button new-chart">'+$.t("NEW CHART LAYOUT")+"</a>":"")+'<div class="chart-search"><input type="text" name="q" value="" autocomplete="off" placeholder="'+$.t("Search")+'"><a class="input-reset"></a><div class="search-icon"></div></div></div>',i=TVDialogs.createDialog(this.title,this.options),TVDialogs.positionDialog(i),this.input=i.find(".chart-search input"),this.inputReset=i.find(".chart-search .input-reset"),this.content=$('<div class="list-content"></div>').appendTo(i.find(".load-chart")),this.header=this.layoutHeader(),this.setSort(),this.itemsListContainer=$('<div class="charts-list-container">').appendTo(this.content),this.itemsList=$('<div class="charts-list">').appendTo(this.itemsListContainer),this._scroll=new a(this.itemsListContainer,this.itemsList,{showBottomShadow:!1}),i.find(".new-chart").click(this.openNewChart),this.header.children(".item").click($.proxy(this,"sortClick")),this.inputReset.click($.proxy(this,"resetSearchClick")),this.input.on("input propertychange",function(){this._scroll.scrollTo(0),this.inputDelegate.fire(this.input.val()),""!==this.input.val()?this.inputReset.show():this.inputReset.hide()}.bind(this)),n.enabled("saveload_requires_authentication")&&!is_authenticated&&(this.content.hide(),o=$('<div class="please-log-in"></div>').appendTo(i.find(".load-chart")),$('<a href="#" class="link">'+$.t("You are not logged in. Please sign in.")+"</a>").appendTo(o).click(function(t){t.preventDefault(),TVDialogs.destroy(this.title),TVDialogs.showSignInDialog(null,{mode:"signin",source:"Load chart dialog"})}.bind(this))),this.favorites=e,this.setChartsData(t),l=this,TVDialogs.applyHandlers(i,{doNotCloseOnBgClickIfShadowbox:!0,beforeDestroy:function(){r.on("chart_loaded",s.onChartLoaded,l)}}),h=this.itemsListContainer,o&&(h=o),TVDialogs.resizeContent(i.height(),h),TVDialogs.positionDialog(i)},s.prototype.openNewChart=function(){TradingView.openNewChart()},s.prototype.highlightOccurrences=function(t){this.itemsList.children(".item").each(function(){var e,i=$(this).find(".value.name").find("span"),o=i.text();o=s.highlightText(o,t),i.html(o),e=$(this).find(".value.symbol"),o=e.text(),o=s.highlightText(o,t),e.html(o)})},s.highlightText=function(t,e){var i,o,n,s,r,a;if(t=$("<div>").text(t).html(),0===e.length)return t;for(i=0;i<e.length;i++){if(o=e[i],o.lastIndex=0,n="",s="",r=o.exec(t),r&&r.length)for(a=1;a<r.length;a++)n+=a%2?'<span class="match">$'+a+"</span>":"$"+a;if(s=t.replace(o,n),s&&s!==t)return s}},t.exports=s}).call(e,i(32),i(6),i(1))},function(t,e,i){(function(e,i){"use strict";function o(){var t=this;this.isFullscreen=!1,this._e=$("<span>").addClass("button fullscreen iconed apply-common-tooltip").attr("title",$.t("Fullscreen mode")).append(e("fullscreen","18x18")),this._e.click(function(){t.startFullscreen()}),$(document).on("fullscreenchange webkitfullscreenchange mozfullscreenchange MSFullscreenChange",function(){var e;["fullscreenElement","webkitFullscreenElement","mozFullscreenElement","mozFullScreenElement","msFullscreenElement"].some(function(t){return t in document&&void(e=!!document[t])}),null!=e&&(e?t._onStartFullscreen():t._onExitFullscreen())})}o.prototype.element=function(){return this._e},o.prototype.startFullscreen=function(){["requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen"].some(function(t){if("function"==typeof document.documentElement[t])return document.documentElement[t](),!0}),this._onStartFullscreen()},o.prototype._onStartFullscreen=function(){var t,e,o=this;i.enabled("side_toolbar_in_fullscreen_mode")?(t=$(".header-chart-panel"),t.hide()):(e=$("#chart-area"),e.addClass("fullscreen")),this._$exitButton||(this._$exitButton=$('<div class="exit-fullscreen">'+$.t("Exit Full Screen (ESC)")+"</div>").on("click",this.exitFullscreen.bind(this)).appendTo(document.body)),$(window).resize(),$(document).off("keyup.toggleFullscreen").on("keyup.toggleFullscreen",function(t){27==t.keyCode&&o.exitFullscreen()})},o.prototype.exitFullscreen=function(){["exitFullscreen","mozCancelFullScreen","mozExitFullscreen","webkitExitFullscreen","msExitFullscreen"].some(function(t){if("function"==typeof document[t])return document[t](),!0}),this._onExitFullscreen()},o.prototype._onExitFullscreen=function(){var t,e;this._$exitButton&&($(".exit-fullscreen").remove(),delete this._$exitButton),i.enabled("side_toolbar_in_fullscreen_mode")?(t=$(".header-chart-panel"),t.show()):(e=$("#chart-area"),e.removeClass("fullscreen")),$(window).resize(),$(document).off("keyup.toggleFullscreen")},t.exports=o}).call(e,i(26),i(1))},function(t,e,i){(function(e,o){"use strict";function n(t){var n=i(383);this._options=$.extend({interval:1},t||{}),this._e=$("<div>").addClass("intervals-container favored-list-container"),this._quick=$("<div>").addClass("quick").appendTo(this._e),this._quicked={},this._main=$("<span>").text(this.shortLabel(this._options.interval)).appendTo(this._quick),this._main.data("interval",this._options.interval),e.enabled("header_interval_dialog_button")&&this._setIntervalDialogButton(),this._mainSub=$("<span>").addClass("submenu").attr("title",$.t("Time Interval")).append($("<i>")).appendTo(this._e),t&&"string"==typeof t.submenuBtnAddClass&&this._mainSub.addClass(t.submenuBtnAddClass),this._quick.on("click",this._selectInterval.bind(this)),this._mainSub.on("click",this._selectMenu.bind(this)),this._menu=new n(this,this._mainSub,this._options),this.onResize=new o,r.intraday.subscribe(this._fullUpdate.bind(this)),r.supportedResolutions.subscribe(this._fullUpdate.bind(this)),t.interval&&r.interval.setValue(t.interval),r.interval.subscribe(this.activateInterval.bind(this),{callWithLast:!0}),TVXWindowEvents.on("intervalwidget-change",this._onChangeInAnotherTab.bind(this)),this._fullUpdate()}var s=i(43),r=i(44);n.prototype.forceUpdate=function(){this._fullUpdate(!0)},n.prototype._fullUpdate=function(t){this._setupIntervals(t),this._setupQuicks(t),this.reactivateInterval(),this._resize()},n.prototype._onChangeInAnotherTab=function(){this._fullUpdate(!0)},n.prototype.isDefaultInterval=function(t){return t in ChartApiInstance.defaultResolutions()},n.prototype._setupIntervals=function(){this._intervals=$.extend({},ChartApiInstance.defaultResolutions())},n.prototype._sorted=function(t){Array.isArray(t)||(t=Object.keys(t));var e=function(t){var e=new s(t);return e.kind()!==s.MINUTES?{S:1/60,D:1440,W:10080,M:43200}[e.letter()]*e.multiplier():e.multiplier()};return t.sort(function(t,i){return e(t)-e(i)})},n.prototype.setUpStarredItemsList=function(t){var e,i={};for(e=0;e<t.length;++e)i[t[e]]=!0;this._setupQuicks(!1,i)},n.prototype._setupQuicks=function(t,i){this._options.notShowQuicks&&!i||(i=i||{},e.enabled("star_some_intervals_by_default")&&(i={1:!0,30:!0,60:!0}),this._quicked=TVSettings.getJSON("IntervalWidget.quicks",i,t),this._quicked=this._removeCustomIntervalQuicks(this._quicked)),this._addQuicked(this._quicked)},n.prototype._removeCustomIntervalQuicks=function(t){var e={};return Object.keys(t).forEach(function(i){this.isDefaultInterval(i)&&(e[i]=t[i])},this),e},n.prototype.element=function(){return this._e},n.prototype.mainButton=function(){return this._main},n.prototype._quicks=function(){return this._quick.find("span").slice(0,-1)},n.prototype.postfix=function(t,e){if(e){var i=" ";switch(t){case"D":i+=$.t("day",{count:e});break;case"W":i+=$.t("week",{count:e});break;case"M":i+=$.t("month",{count:e});break;case"S":i+=$.t("second",{count:e});break;case"m":i+=$.t("minute",{count:e});break;case"h":i+=$.t("hour",{count:e})}return i}switch(t){case"m":return"";case"h":return $.t("h",{context:"dates"});default:return $.t(t.toUpperCase(),{count:0})}},n.prototype.readable=function(t,e,i){function o(t){return t>=60&&!(t%60)}var n,r;if(t=t,n="m",e=e,r=new s(t),!r.isValid())throw new TypeError("Wrong interval value: "+t);return r.kind()!==s.MINUTES&&(n=r.letter()),t=r.multiplier(),r.kind()===s.MINUTES&&o(t)&&(t=~~(t/60),n="h"),e=e?t:null,t=i&&1===t&&r.isDWM()?"":t,""+t+this.postfix(n,e)},n.prototype.shortLabel=function(t){return TradingView.translatedIntervalString(this.readable(t,!1))},n.prototype.fullLabel=function(t){return this.readable(t,!0)},n.prototype._addQuicked=function(t){var e,o,n,s,r,a,l,h,c;for(t=this._sorted(t),e=this._quicks(),o=$(),n=this.getInterval(),s=!1,e.size()>t.length&&(e.slice(t.length).remove(),s=!0),r=i(42),a=0;a<t.length;a++)l=t[a],h=e.eq(a),c=!1,h.size()?h.data("interval")!=l&&(c=!0):(h=$("<span>"),o=o.add(h),c=!0),c&&(h.data("interval",l).text(this.shortLabel(l)),s=!0),h.toggleClass("selected",l==this.getInterval()).toggleClass("disabled",!r.isAvailable(l));this._main.before(o),s&&this._resize()},n.prototype._resize=function(){this.onResize.fire()},n.prototype.addQuick=function(t){this._quicked[t]=!0,this._addQuicked(this._quicked),this.saveSettings(),this.reactivateInterval()},n.prototype._quickWithInterval=function(t){var e=null;return this._quicks().each(function(i,o){if(o=$(o),t==o.data("interval"))return e=o,!1}),e},n.prototype.inQuick=function(t){return null!=this._quickWithInterval(t)},n.prototype.removeQuick=function(t){this._quickWithInterval(t)&&(this._quickWithInterval(t).remove(),this._resize(),delete this._quicked[t],this.saveSettings(),this.reactivateInterval())},n.prototype.toggleQuick=function(t){var e=this.inQuick(t);return e?this.removeQuick(t):this.addQuick(t),!e},n.prototype.hasQuicks=function(){return!!this._quicks().length},n.prototype.deactivate=function(t){this._quick.find("span").removeClass("selected")},n.prototype.activateInterval=function(t){this.deactivate(),this.inQuick(t)?this._quickWithInterval(t).addClass("selected"):(this.hasQuicks()&&this._main.addClass("selected"),this._main.data("interval")!=t&&(this._main.text(this.shortLabel(t)),this._main.data("interval",t),this._resize()))},n.prototype.reactivateInterval=function(){this.activateInterval(this.getInterval())},n.prototype.getInterval=function(){return r.interval.value()},n.prototype.setInterval=function(t){r.interval.setValue(""+t)},n.prototype._selectInterval=function(t){var e=$(t.target),i=e.data("interval");this.hasQuicks()||this.getInterval()!=i?e.hasClass("disabled")||this.setInterval(i):this._selectMenu()},n.prototype._selectMenu=function(t){this._mainSub.hasClass("active")?this._menu.close():this._menu.open(this._sorted(this._intervals))},n.prototype._setIntervalDialogButton=function(){var t=i(49);this._intervalDialogButton=$("<span>").addClass("submenu interval-dialog-button apply-common-tooltip").attr("title",$.t("Open Interval Dialog")).append($("<i>")).appendTo(this._e).click(function(){var e=new t({callback:function(t){r.interval.setValue(t)}}).show(),i=$(this);i.addClass("active"),e.on("destroy",function(){i.removeClass("active")})})},n.prototype.addInterval=function(t){},n.prototype.removeInterval=function(t){},n.prototype.saveIntervals=function(){},n.prototype.saveQuicked=function(){TVSettings.setJSON("IntervalWidget.quicks",this._quicked)},n.prototype.saveSettings=function(){this.saveQuicked(),this.saveIntervals(),TVXWindowEvents.emit("intervalwidget-change")},t.exports=n}).call(e,i(1),i(32))},function(t,e,i){(function(e,o){"use strict";function n(t,e,i){this._options=i||{},this._w=t,this._opener=e,this._addMetric=1,this._addOpened=!1}var s=i(43),r=i(42),a=i(50).bindPopupMenu;n.prototype._interval=function(t){var e=$(t.target);e.hasClass("disabled")||(this._w.setInterval(e.data("interval")),this.close())},n.prototype._quickTitle=function(t){return t?$.t("Remove from favorites"):$.t("Add to favorites")},n.prototype._onQuick=function(t){var e=$(t.target).closest(".item"),i=this._w.toggleQuick(e.data("interval"));return e.toggleClass("quicked",i),$(t.target).closest(".to-quick").attr("title",this._quickTitle(i)),!1},n.prototype._onDelete=function(t){var e=$(t.target.parentNode);return this._w.removeInterval(e.data("interval")),this._reopen(),!1},n.prototype._showControlButtons=function(){return!0},n.prototype._append=function(t,i){var o=$("<span>").addClass("item").toggleClass("active",i==this._w.getInterval()).toggleClass("quicked",this._w.inQuick(i)).toggleClass("disabled",!r.isAvailable(i)).text(this._w.fullLabel(i)).data("interval",i);this._showControlButtons()&&(this._w.isDefaultInterval(i)||o.prepend($("<span>").addClass("delete").attr("title",$.t("Remove custom interval")).click(this._onDelete.bind(this))),this._w._options.notShowQuicks||o.prepend($("<span>").addClass("to-quick").append(e("star","16x16")).attr("title",this._quickTitle(this._w.inQuick(i))).click(this._onQuick.bind(this)))),o.click(this._interval.bind(this)),t.append(o)},n.prototype._appendAdd=function(t){function e(){var t,e=parseInt(s.val());e<1&&s.val(1),t={1:1440,60:24,D:364,W:52,M:12}[this._addMetric],e>t&&s.val(t)}var i,o=$("<span>").addClass("item-add"),n=$('<span class="item-add-wrap">').appendTo(o),s=$('<input type="text">').addClass("tv-text-input inset minutes").val(1).appendTo(n).TVTicker(),r=$("<span>").addClass("_tv-button mins").append($("<span>")).append($("<i>")).appendTo(n),l=$("<span>").addClass("_tv-button add").text($.t("Add")).appendTo(n),h={1:$.t("minute_plural"),60:$.t("hour_plural"),D:$.t("day_plural"),W:$.t("week_plural"),M:$.t("month_plural")};r.find("span").text(h[this._addMetric||1]),s.change(e.bind(this)),i=this,a(r,null,{direction:"up",event:"button-popup",addClass:"thin small-font metrics",popupSpacing:~~this._w._options.popupSpacing,onRemove:function(){i._addOpened=!1}}),r.click(function(){i._addOpened=!0,r.trigger("button-popup",[$.map(h,function(t,o){return{title:t.toUpperCase(),active:o==i._addMetric,action:function(){return i._addMetric=o,r.find("span").text(t),e.call(i),!1}}})])}),l.click(function(){TradingView.trackGoProFeature("customIntervals"),TradingView.runOrGoPro(function(){var t,e=parseInt(s.val());e==e&&(t=parseInt(i._addMetric),t==t?i._addInterval(""+e*i._addMetric):i._addInterval(""+e+i._addMetric))},{feature:"customIntervals"})}),t.append($("<div>").addClass("separator")),t.append(o)},n.prototype._addInterval=function(t){},n.prototype._open=function(t,e){var i,n,r,a,l;t.find(".item, .item-add, .separator").remove(),i=[],n=[],r=[],a=[],l=$("<span>").addClass("separator"),$.each(e,function(t,e){var o=new s(e);o.isDWM()?a.push(e):o.kind()===s.HOURS?r.push(e):o.kind()===s.MINUTES?n.push(e):i.push(e)}.bind(this)),i.length&&i.forEach(function(e){this._append(t,e)}.bind(this)),n.length&&(t.append(l.clone()),n.forEach(function(e){this._append(t,e)}.bind(this))),r.length&&(t.append(l.clone()),r.forEach(function(e){this._append(t,e)}.bind(this))),a.length&&(t.append(l.clone()),a.forEach(function(e){this._append(t,e)}.bind(this))),o.enabled("custom_resolutions_box")&&this._appendAdd(t)},n.prototype._reopen=function(t){if(this._open(this._menu,this._w._sorted(this._w._intervals)),t&&t.highlight){var e=this._menu.find(".item").filter(function(){return $(this).data("interval")==t.highlight});e.length&&e.highlight(2);
}},n.prototype.open=function(t){var e,i=this,o=$("<div>").addClass("charts-popup-list intervals-list favored-list").toggleClass("touch",Modernizr.touch),n=this._w.mainButton().offset(),s=this._w.mainButton().outerHeight(),r=n.top+s+parseInt(i._options.popupSpacing||0),a=10;o.appendTo(document.body),o.css({top:r,left:n.left}).show(),this._menu=o,this._opener.addClass("active"),this._open(o,t),e=Math.min($("body").height(),$(window).height())-s-r-a,this._setMaxHeight(o,e),setTimeout(function(){o.on("mousedownoutside",function(t){this.close(t)&&o.unbind("mousedownoutside")}.bind(this))}.bind(this),0)},n.prototype._setMaxHeight=function(t,e){t.height()>=e&&(t.css("max-height",e+"px"),t.width(t.width()+18))},n.prototype.close=function(t){return(!t||!$(t.target).parents("span.item-add, .charts-popup-list.metrics").length)&&(!(t&&$(t.target).hasClass("submenu")&&$(t.target).parents(".intervals-container").length)&&(this._menu.remove(),$(document.body).off(".interval-menu"),delete this._menu,this._opener.removeClass("active"),!0))},t.exports=n}).call(e,i(26),i(1))},function(t,e,i){(function(e,o,n,s,r){"use strict";function a(t,i,n){var s=this;this.HIGHLIGHT_STUDY_NUM_FLICKS=2,this._BASIC_STUDIES_PACKAGE_NAME="tv-basicstudies",this._CUSTOM_STUDIES_PACKAGE_NAME="Script$USER",this._PUBLISHED_STUDIES_PACKAGE_NAME="Script$PUB",this._SCRIPTING_PACKAGE_NAME="tv-scripting",this._BASIC_STUDIES_PAGE_NAME=e.enabled("plain_studymarket")?"Technical Analysis":"Built-ins",this._chartWidgetCollection=t,this._chart=t.activeChartWidget.value(),this._options=$.extend({},this.DEFAULT_OPTIONS,n||{}),this.concretizeOptions(),this._market=null,this._studies=null,this._packagesWithTabNames={},this._user=i,this._favs=[],this._pages={},this._tabs={},this._headers={},this.favsChanged=new o,this.layoutChanged=new o,this.visibilityChanged=new o,this.studiesReady=new $.Deferred,this.marketPagesReady=new $.Deferred,this._pubSearchCount=[0,0,0],this._pubSearchCanLoad=[!0,!0,!0],this._pubSearchEntries=[],this._pubSearchCache=[],this._pubSearchDfd=null,this._pubSearchPageShown=!1,TVXWindowEvents.on("StudyFavoritesChanged",function(t){s._onExternalFavoritesChanged(JSON.parse(t))}),this._backtestingEnabled=TradingView.isFeatureEnabled("backtesting")}var l=i(271),h=i(371),c=i(56).SidebarCustomScroll,d=i(50).bindPopupMenu,p=i(107);a.prototype.init=function(){this._initialized||(this.setupMarketInfo(),this.getStudyInfo(),this.setUser(this._user),this.prepareLayout(),this.attachHandlers(),this._initialized=!0)},a.prototype.DEFAULT_OPTIONS={onWidget:!1,hideMarketPages:!1,selectBasicPage:!0,minimized:!1,searchKeywords:{earning:RegExp("EPS"),earnings:RegExp("EPS"),"trailing twelve months":RegExp("TTM")},popularFundamentals:[{name:$.t("Income Statement"),studies:["Script$EDGR_TOTAL_REVENUE_V2@tv-scripting","Script$EDGR_DILUTED_EPS_NET_INCOME_V2@tv-scripting","Script$EDGR_NET_INCOME_V2@tv-scripting","Script$EDGR_EBITDA_V2@tv-scripting","Script$EDGR_EBIT_V2@tv-scripting","Script$EDGR_EQUITY_EARNINGS_V2@tv-scripting"]},{name:$.t("Profitability"),studies:["Script$EDGR_GROSS_MARGIN_V2@tv-scripting","Script$EDGR_AFTER_TAX_MARGIN_V2@tv-scripting","Script$EDGR_GROSS_PROFIT_V2@tv-scripting"]},{name:$.t("Dividend"),studies:["Script$EDGR_DIVIDEND_YIELD_V2@tv-scripting","Script$EDGR_DIVIDENDS_PAID_V2@tv-scripting"]},{name:$.t("Current Valuation"),studies:["Script$EDGR_MARKET_CAP_V2@tv-scripting","Script$EDGR_PE_RATIO_V2@tv-scripting","Script$EDGR_PEG_RATIO_V2@tv-scripting","Script$EDGR_PS_RATIO_V2@tv-scripting","Script$EDGR_PRICE_BOOK_VALUE_PER_SHARE_V2@tv-scripting"]},{name:$.t("Other"),studies:["Script$EDGR_DEBT_TO_EQUITY_V2@tv-scripting","Script$EDGR_FREE_CASH_FLOW_V2@tv-scripting","Script$EDGR_PRICE_CASH_FLOW_PER_SHARE_V2@tv-scripting","Script$EDGR_RETURN_ON_EQUITY_V2@tv-scripting","Script$EDGR_ACCOUNTING_CHANGE_V2@tv-scripting","Script$EDGR_ACCOUNTS_PAYABLE_V2@tv-scripting"]}]},a.prototype._FAV_KEY="studyMarket.favorites",a.prototype._PAGE_KEY="studyMarket.page",a.prototype._MARKET_TAB_IS_OPEN_KEY="studyMarket.marketTabIsOpen",a.prototype._TECHNICAL_TAB_IS_OPEN_KEY="studyMarket.technicalTabIsOpen",a.prototype._ECONOMY_TAB="Economy & Symbols",a.prototype._FILTER_KEY="studyMarket.filter",a.prototype._PUB_SEARCH_ENTRIES_ON_PAGE=20,a.prototype.onCustomScriptModified=function(){this._initialized&&(this.getStudyInfo(),this.resetCustomScriptPage(),this.loadFavorites(),this.updateSearchPage())},a.prototype.onPublishedScriptModified=function(){this._initialized&&(this.getStudyInfo(),this.resetPublishedScriptPage(),this.loadFavorites(),this.updateSearchPage())},a.prototype.concretizeOptions=function(){(this._options.onWidget||e.enabled("study_market_minimized"))&&(this._options.hideMarketPages=!0,this._options.selectBasicPage=!0,this._options.minimized=!0)},a.prototype.setupMarketInfo=function(){var t=this;this._market={products:pro.getStudies(),order:pro.getStudiesOrder()},this._market.order=$.grep(t._market.order,function(t){return"Script$EOTPRO"!=t}),this.setupSubproductsInfo()},a.prototype.setupSubproductsInfo=function(){var t,e,i,o,n;for(this._subProductIds={},t=Object.keys(this._market.products),e=0;e<t.length;++e)if(i=this._market.products[t[e]],void 0!==i.subproduct_ids)for(o=0;o<i.subproduct_ids.length;++o)n=i.subproduct_ids[o],this._subProductIds[n]=i.id},a.prototype.getStudyInfo=function(){this._chart.withModel(this,function(){this.setupStudyInfo()})},a.prototype.setupStudyInfo=function(){var t=this._chart.model().studiesMetaData();this._studies={},t=t.filter(function(t){return!this.isHidedStudy(t)},this),t.forEach(function(t){var e,i=this.getStudyPackageName(t),o="Script$EOTPRO"!=i&&(!this._options.minimized||i==this._BASIC_STUDIES_PACKAGE_NAME);o&&(e=this.resolvePackageName(i),assert(void 0!==e,"Cannot resolve packageName "+i),this._studies[e]=this._studies[e]||[],this._studies[e].push(t))}.bind(this),this),this.studiesReady.resolve()},a.prototype.resolvePackageName=function(t){return t in this._subProductIds?this._subProductIds[t]:t},a.prototype.setUser=function(t){is_authenticated?this.setupUserData(t):this.setAnonymous()},a.prototype.setupUserData=function(t){this._user=t,this.loadFavorites(),this.updateMarketPages()},a.prototype.setAnonymous=function(){this.setupUserData(null,[]),this.favsChanged.fire()},a.prototype.isHidedStudy=function(t){return!!t.is_hidden_study},a.prototype.loadFavorites=function(){var t,e,i=TVSettings.getJSON(this._FAV_KEY,[]),o=[];for(t=0;t<i.length;t++)e=p.cutFullId(i[t]),o.indexOf(e)===-1&&o.push(e);this._favs=o,this.favsChanged.fire()},a.prototype.saveFavorites=function(){TVSettings.setJSON(this._FAV_KEY,this._favs)},a.prototype.prepareLayout=function(){var t=this;this._widget=$('<div class="insert-study-dialog"><div class="insert-study-row insert-study-title _tv-dialog-title"><a class="_tv-dialog-title-close"></a>'+$.t("Indicators")+'</div><div class="insert-study-row insert-study-body"><div class="insert-study-tabs"><div class="insert-study-tabs-list-container"><ul class="insert-study-tabs-list"></ul></div></div><div class="insert-study-main"><div class="insert-study-headers"></div><div class="insert-study-pages insert-study-row"></div></div></div></div>'),this._w_title=this._widget.find(".insert-study-title"),this._w_tabs_container=this._widget.find(".insert-study-tabs-list-container"),this._w_tabs=this._widget.find(".insert-study-tabs-list"),this._w_pages=this._widget.find(".insert-study-pages"),this._w_pages.onScrollToEnd=new o,this._w_headers=this._widget.find(".insert-study-headers"),this._widget.draggable(TVDialogs._constrainDraggableOptionsIfNeeded({handle:".insert-study-title"})).css({position:"absolute",zIndex:17}),this.preparePages(),this._options.minimized&&this._widget.addClass("minimized"),this._w_pages.scroll(function(){var e=$.map(t._w_pages.children(":visible"),function(t){return $(t).outerHeight(!0)}).reduce(function(t,e){return t+e},0),i=t._w_headers.outerHeight(!0),o=t._widget.find(".insert-study-main").height(),n=e>o-i;n&&e-t._w_pages.scrollTop()===o-i&&t._w_pages.onScrollToEnd.fire()}),this._widget.appendTo("body"),this.hide()},a.prototype.currentPage=function(){return this._pages[this._currentPageTitle]},a.prototype.preparePages=function(){this.addSearchPage(),e.enabled("items_favoriting")&&this.addFavoritesPage(),this.prepareBasicPage(),this._options.minimized||e.enabled("charting_library_base")||(this.preparePublishedScriptPage(),this.prepareCustomScriptPage()),this.prepareMarketPages(),this._options.minimized||e.enabled("charting_library_base")||(this.prepareFundamentalsPage(),this.studiesReady.done(function(){}.bind(this))),this.addEconomyPage(),this._scroll=new c(this._w_tabs_container,this._w_tabs,{showBottomShadow:!1})},a.prototype.addEconomyPage=function(){var t=this.addPage(this._ECONOMY_TAB,{showTitle:!0}),e=$('<div class="economy-page">').appendTo(t);this.addSymbolWidget=new h(this._chartWidgetCollection),this.addSymbolWidget.show(),e.append(this.addSymbolWidget._widget)},a.prototype.addFavoritesPage=function(){var t=this.addPage("Favorites",{showTitle:!0,filterControl:this._backtestingEnabled&&this._getStrategiesFilterControl(this.updateFavorites.bind(this))||null});t.addClass("page-padded")},a.prototype._strategiesFilterType=function(){return this._strategiesFilterTypeValue||(this._strategiesFilterTypeValue=new n(TVSettings.getValue("studyMarket.strategiesFilter","none")),this._strategiesFilterTypeValue.subscribe(function(t){TVSettings.setValue("studyMarket.strategiesFilter",t)})),this._strategiesFilterTypeValue},a.prototype._getStrategiesFilterControl=function(t){var e=this,i=$('<span class="filter-control">').on("click",function(){var t=e._strategiesFilterType().value(),i=[{title:$.t("Indicators and Strategies"),action:e._strategiesFilterType().setValue.bind(e._strategiesFilterType(),"none"),active:"only_strategies"!=t&&"not_strategies"!=t},{title:$.t("Indicators"),action:e._strategiesFilterType().setValue.bind(e._strategiesFilterType(),"not_strategies"),active:"not_strategies"==t},{title:$.t("Strategies"),action:e._strategiesFilterType().setValue.bind(e._strategiesFilterType(),"only_strategies"),active:"only_strategies"==t}];$(this).trigger("popup-menu",[i])});return d(i,null,{direction:"down",event:"popup-menu",addClass:"studymarket-strategies-filter"}),this._strategiesFilterType().subscribe(function(t){i.text({not_strategies:$.t("Indicators"),only_strategies:$.t("Strategies")}[t]||$.t("Indicators and Strategies"))},{callWithLast:!0}),"function"==typeof t&&this._strategiesFilterType().subscribe(t),i},a.prototype.prepareBasicPage=function(){var t=this,i=t.addPage(this._BASIC_STUDIES_PAGE_NAME,{packageName:this._BASIC_STUDIES_PACKAGE_NAME,technical:!e.enabled("plain_studymarket"),showTitle:!0,filterControl:this._backtestingEnabled&&this._getStrategiesFilterControl(t.resetBasicPage.bind(t))||null});this._basicPage=i,i.addClass("page-padded"),t.studiesReady.done(function(){t.resetBasicPage()}),t._options.selectBasicPage&&t.selectPage(this._BASIC_STUDIES_PAGE_NAME)},a.prototype.prepareCustomScriptPage=function(){var t=this,e="My Scripts",i=t.addPage(e,{packageName:this._CUSTOM_STUDIES_PACKAGE_NAME,technical:!0,showTitle:!0,filterControl:this._backtestingEnabled&&this._getStrategiesFilterControl(t.resetCustomScriptPage.bind(t))||null});i.addClass("page-padded"),t.studiesReady.done(function(){t.resetCustomScriptPage()})},a.prototype.preparePublishedScriptPage=function(){var t=this,e=$.t("Public Library"),i=t.addPage(e,{packageName:this._CUSTOM_STUDIES_PACKAGE_NAME,technical:!0,showTitle:!0,titleHref:"/script/",filterControl:this._backtestingEnabled&&this._getStrategiesFilterControl(t.resetPublishedScriptPage.bind(t))||null});i.addClass("page-padded"),t.studiesReady.done(function(){}),i.on("show-page",function(){t._onPublishedScriptPageShown()})},a.prototype._onPublishedScriptPageShown=function(){var t=this._getScriptType();this._pubSearchPageShown||(this._pubSearchPageShown=!0,this._pubslishedScriptsLoadMore(t))},a.prototype._pubslishedScriptsLoadMore=function(t){var e,i,o=this;this._pubslishedScriptsLoading||(e=this.getPage($.t("Public Library")),i=TradingView.unifiedSpinner("mini").spin(e.get(0)),this._pubslishedScriptsLoading=!0,this._loadNextPubSearchPage(t).done(function(){i.stop(),o.resetPublishedScriptPage(),o._pubslishedScriptsLoading=!1}))},a.prototype._applyStrategiesFilter=function(t){if(!this._backtestingEnabled)return t;var e=this._strategiesFilterType().value();return"not_strategies"!=e&&"only_strategies"!=e||(t=t.filter(function(t){var i=p.isScriptStrategy(t);return"not_strategies"==e?!i:i})),t},a.prototype.resetBasicPage=function(){var t,e=this.getPage(this._BASIC_STUDIES_PAGE_NAME);this._studies&&(t=this._studies[this._BASIC_STUDIES_PACKAGE_NAME]||[],t=this._applyStrategiesFilter(t),window.studyMarket.preparePageStudies(e,t))},a.prototype.resetCustomScriptPage=function(){var t,e,i,o;!this._options.minimized&&window.scriptLib&&this._studies&&(t=this.getPage("My Scripts"),e=this._studies.Script$USER||[],i=$.Deferred(),window.scriptLib&&e.length?window.scriptLib.requestUserScripts(function(t){var o,n,s,r;for(o=e.length;o--;)if(n=e[o].scriptIdPart){for(delete e[o].scriptName,s=null,r=t.length;r--;)if(t[r].scriptIdPart===n){s=t[r];break}s?e[o].scriptName=t[r].scriptName:e.splice(o,1)}else e.splice(o,1);i.resolve(e)}):i.resolve(e),o=this,i.done(function(e){return e.length?(e=o._applyStrategiesFilter(e),void window.studyMarket.preparePageStudies(t,e)):void window.studyMarket.appendTVScriptBtn(t)}))},a.prototype._createPublishedScriptMetaInfo=function(t){var e=this,i=e._chartWidgetCollection.activeChartWidget.value(),o=p.createMetaInfoStub(t,i.studyScriptingPkgVers);return o=new p(o),o.author=t.author,o.scriptName=t.scriptName,o.scriptDescription=t.description,o.agreeCount=t.agreeCount,o.imageUrl=t.imageUrl,o},a.prototype.resetPublishedScriptPage=function(){var t,e,i,o,n;if(!this._options.minimized&&this._pubSearchPageShown){if(t=this._getScriptType(),this._pubSearchCanLoad[t]&&this._pubSearchCount[t]<this._PUB_SEARCH_ENTRIES_ON_PAGE)return void this._pubslishedScriptsLoadMore(t);e=this,i=this.getPage($.t("Public Library")),o=this._pubSearchEntries.map(function(t){return e._createPublishedScriptMetaInfo(t)}),o=this._applyStrategiesFilter(o,"publishedScript"),e.preparePageStudies(i,o,null,!0),n=function(){e._pubslishedScriptsLoadMore(t)},e._w_pages.onScrollToEnd.unsubscribe(e,n),e._pubSearchCanLoad[t]&&e._w_pages.onScrollToEnd.subscribe(e,n)}},a.prototype.prepareFundamentalsPage=function(t,e){var i=this,o="Script$EDGR";t=this.addPage($.t("Fundamentals"),{packageName:o,showTitle:!0}),this.studiesReady.done(function(){function e(){function t(t){return r.indexOf(t)!=-1}function e(t){return g.filter(function(e){return t===e.id})[0]}var o,n,s=[],r=$.map(g,function(t){return t.id});for(o=0;o<i._options.popularFundamentals.length;o++)n=i._options.popularFundamentals[o],n.studies=n.studies.filter(t).map(e),n.studies.length&&s.push(n);return s}var n,s,r,a,l,h,c,d,p,u,_,f,g=this._studies[o];if("undefined"!==g){if(n=t,s=e(),t.addClass("page-with-popular"),s.length)for(n=$("<div></div>"),r=$("<div></div>"),a=$('<div><div class="column column-left"></div><div class="column column-right"></div></div>'),l=a.find(".column-left").css("width","50%"),h=a.find(".column-right").css("width","50%"),c=function(){var t,e=0;for(t=0;t<s.length;t++)e+=s[t].studies.length;return e}(),d=function(t){var e=$('<div class="insert-study-items"></div>');return i.fillStudies(e,t.studies,null),e.prepend('<div class="subgroup-header">'+t.name+"</div>"),e},t.append(r),r.append('<div class="header-container with-divider"><div class="group-header">'+$.t("All Metrics")+"</div></div>"),r.append(n),t.prepend(a),t.append(r),p=0,u=0;p<s.length;p++)_=s[p],f=d(_),u<c/2?l.append(f):h.append(f),u+=_.studies.length;this.preparePageStudies(n,g)}}.bind(this))},a.prototype.appendTVScriptBtn=function(t){var e,i=this;t&&(e=$('<br><a class="add-custom-script-btn"> '+$.t("Create your first script now!")+"</a>").on("click",function(t){i.hide(),TradingView.ScriptEditorWidget.open(),t.stopPropagation()}),t.empty(),t.append("<p>"+$.t("Welcome to the TradingView custom scripting engine. It allows you to create your own custom studies or modify existing. You do not have any scripts created.")+"</p>"),t.find("p").append(e))},a.prototype.appendPubScriptBtn=function(t){t&&t.html("<p>"+$.t("No public library scripts were found.")+"</p>")},a.prototype.prepareMarketPages=function(){this._options.hideMarketPages||this.studiesReady.done(function(){var t=this,e=this._market.order.map(function(e){return t._market.products[e]});e.sort(function(t,e){return t.name<e.name?-1:t.name>e.name?1:0}),e.forEach(function(t){var e="tv-volumebyprice"!=t.id,i={market:e,packageName:t.id,subProductIds:t.subproduct_ids||[]};t.$page=this.addPage(t.name,i),t.$page.addClass("offer-page")},this),this.selectPage(TVSettings.getValue(this._PAGE_KEY,this._basicPage)),this.marketPagesReady.resolve()}.bind(this))},a.prototype.addSearchPage=function(){var t,i,o,n,s=this;s._tabs.search=$('<div class="tv-chart-study-dialog-search-control"><div class="left-border"></div><div class="right-border"></div><input type="text" name="q" value="" autocomplete="off" placeholder="'+$.t("Search")+'"><div></div><a class="input-reset"></a></div>').data("title","search"),s._pages.search=$('<div class="page-search"></div>').data("title","search"),t=s._tabs.search.find("input"),i=s._tabs.search.find(".input-reset"),s._search_value=null,s._search_input=t,o=null,this._options.minimized?e.enabled("study_dialog_search_control")&&(o=this._widget.find(".insert-study-main"),o.css("border-top","none"),s._tabs.search.addClass("tv-chart-study-dialog-search-control--minimized")):o=this._widget.find(".insert-study-tabs"),o&&o.prepend(s._tabs.search),s._w_pages.prepend(s._pages.search),i.on("click",function(){t.val("").trigger("input").focus()}),t.focus(function(){s.search(t.val())}),t.on("input",function(){i.toggle(""!==this.value);var t=$(this);n&&clearTimeout(n),n=setTimeout(function(){n=void 0,s.search(t.val())},200)})},a.prototype.search=function(t,i,o){function n(t,e,i,o,n,s){t.push(e),t[t.length-1].matchPriority=o,n&&(t[t.length-1].matchIndex=i.match(s).index)}var s,r,a,l,h,c,d=this;(this._search_value!==t||i)&&(s=this,r=this._pages.search,a=[],l=function(t){return t.replace(/[!-\/[-^{-}]/g,"\\$&")},""!==t&&(h=t.split("").map(function(t,e){var i=l(t);return 0!==e&&(i="[/\\s-]"+i),"("+i+")"}).join("(.*?)")+"(.*)",a.push({fullMatch:RegExp("("+l(t)+")","i"),re:RegExp("^"+h,"i"),reserveRe:RegExp(h,"i"),fuzzyHighlight:!0}),t.toLowerCase()in this.DEFAULT_OPTIONS.searchKeywords&&a.push({re:this.DEFAULT_OPTIONS.searchKeywords[t.toLowerCase()],fuzzyHighlight:!1})),this._search_value=t,r.html(""),c=$.Deferred(),d._currentAsyncSearchDfd=c,e.enabled("plain_studymarket")?c.resolve([]):PublishedScript.suggest(t).done(function(t){var e=[];t&&t.results||[];c.resolve(e)}).fail(function(){c.resolve([])}),c.done(function(e){var i,o,s,l,h,p,u,_,f,g,m,v,y,w,b,S;if(d._currentAsyncSearchDfd===c){for(i=Object.keys(d._studies).concat(d._PUBLISHED_STUDIES_PACKAGE_NAME).sort(),o=[d._BASIC_STUDIES_PACKAGE_NAME,d._PUBLISHED_STUDIES_PACKAGE_NAME,d._CUSTOM_STUDIES_PACKAGE_NAME],s=o.length;s--;)l=o[s],h=i.indexOf(l),h!==-1&&(i.splice(h,1),i.unshift(l));for(p=0;p<i.length;p++){if(u=i[p],_=[],u===d._PUBLISHED_STUDIES_PACKAGE_NAME)_=e;else for(f=d._studies[u],s=0;s<f.length;s++)if(g=f[s],a.length)for(m=0;m<a.length;m++)v=a[m].re,v.lastIndex=0,y=a[m].fullMatch,w=g.shortDescription,w&&w.toLowerCase()==t.toLowerCase()?n(_,g,w,3,!0,y):w&&y.test(w)?n(_,g,w,2,!0,y):(w=g.description_localized||g.description||g.scriptName,y.test(w)?n(_,g,w,1,!0,y):v.test(w)&&n(_,g,w,0,!1,v));else _.push(g);if(_.length){switch(b=$('<div class="insert-study-items"><div>'),S=u,u){case d._BASIC_STUDIES_PACKAGE_NAME:S=d._BASIC_STUDIES_PAGE_NAME;break;case"Script$USER":S=$.t("My Scripts");break;case"Script$PUB":S=$.t("Public Library");break;default:u in d._packagesWithTabNames&&(S=d._packagesWithTabNames[S])}r.append('<div class="search-header">'+$.t(S)+"</div>"),r.append(b),a.length&&Array.prototype.sort.call(_,function(t,e){if(t.matchPriority<e.matchPriority)return 1;if(t.matchPriority>e.matchPriority)return-1;if(t.matchPriority==e.matchPriority)switch(t.matchIndex){case void 0:return 0;default:return t.matchIndex>e.matchIndex?1:t.matchIndex<e.matchIndex?-1:0}}),d.fillStudies(b,_,a)}}r.is(":has(li)")||r.is(":has(.not-found)")||r.append('<p class="not-found">'+$.t("No indicators matched your criteria.")+"</p>"),d.layoutChanged.fire()}})),o||this.selectPage("search")},a.prototype.updateSearchPage=function(){var t=this._search_input.val();this.search(t,!0,!0)},a.prototype.updateMarketPages=function(){$.when(this.marketPagesReady).done(function(){var t;this._market.order.forEach(function(e){if(t=this._market.products[e],pro.hasPackage(t.id)){var i=this._studies[t.id];i?this.preparePageStudies(t.$page,i,t):TradingView.logWarn("Subscripted study package "+t.id+" absent in metaInfo.")}else this.preparePageOffer(t.$page,t)},this)}.bind(this))},a.prototype.preparePageStudies=function(t,e,i,o){var n=$('<div class="insert-study-items"/>');t.empty(),t.append(n),i&&t.find(".insert-study-items").css({width:199,"float":"left"}).end().append('<div class="insert-study-offer-container">'+pro.prepareProductPage(i)+"</div>"),o||(e=this.sortStudies(e)),this.fillStudies(n,e,null)},a.prototype.preparePageOffer=function(t,e){t.data("html",pro.prepareProductOfferPage(e)),t.data("offer",e)},a.prototype.addPage=function(t,e){var i,o,n,r,a,l,h;return e=$.extend({},e),i=$.t(t),o=t.toLowerCase(),n=$("<div></div>").data("title",o),r=$('<li title="'+i+'"></li>').text(i).data("title",o),a=e.filterControl instanceof jQuery,l=$(s.render('<div class="insert-study-header">{{#showTitle}}<div class="header-text">{{#technical}}'+$.t("Technical Analysis")+': {{/technical}}{{#titleHref}}<a href="{{titleHref}}" target="_blank"><u>{{title}}</u></a>{{/titleHref}}{{^titleHref}}{{title}}{{/titleHref}}{{#wikiHref}}<a href="{{wikiHref}}" target="_blank" class="_tv-dialogs-label-hint apply-common-tooltip" title="Wiki"></a>{{/wikiHref}}{{#filterControl}}<span class="filter-control-placeholder"></span>{{/filterControl}}</div>{{/showTitle}}</div>',{showTitle:e.showTitle,title:i,technical:e.technical,titleHref:e.titleHref,wikiHref:e.wikiHref,filterControl:a})).data("title",o).appendTo(this._w_headers).hide(),a&&l.find(".filter-control-placeholder").replaceWith(e.filterControl),e.beta&&r.append('<span class="beta-sign">Beta</span>'),e.packageName&&(this._packagesWithTabNames[e.packageName]=t),this._pages[o]=n,this._tabs[o]=r,this._headers[o]=l,e.technical?(h=this._getOrCreateTechincalTab().find("ul"),h.append(r)):e.market?(h=this._getOrCreateMarketTab().find("ul"),h.append(r)):this._w_market_tabs?r.insertBefore(this._w_market_tabs):this._w_tabs.append(r),this._w_pages.append(n),n.toggle(o===this._currentPageTitle),n},a.prototype._getOrCreateMarketTab=function(){var t,e=this;return e._w_market_tabs?e._w_market_tabs:(t=TVSettings.getBool(e._MARKET_TAB_IS_OPEN_KEY,!0),e._w_market_tabs=$('<li class="tabs market-tabs"><div class="text open">'+$.t("Marketplace Add-ons")+"</div><ul></ul></li>"),e._w_tabs.append(e._w_market_tabs),e.toggleMarketTabs(t),e._w_market_tabs)},a.prototype._getOrCreateTechincalTab=function(){var t,e=this;return e._w_technical_tabs?e._w_technical_tabs:(t=TVSettings.getBool(e._TECHNICAL_TAB_IS_OPEN_KEY,!0),e._w_technical_tabs=$('<li class="tabs technical-tabs"><div class="text open">'+$.t("Technical Analysis")+"</div><ul></ul></li>"),e._w_tabs.append(e._w_technical_tabs),e.toggleTechnicalTabs(t),e._w_technical_tabs)},a.prototype.hide=function(){this._widget.hide(),this.visibilityChanged.fire(!1),TradingView.keyboardBinder.removeListener("StudyMarket");var t=TVDialogs.dialogs.indexOf(this._widget);t!==-1&&TVDialogs.dialogs.splice(t,1)},a.prototype.show=function(){this.init(),this._widget.show(),this._widget.css("z-index",TVDialogs.dialogs.length+110),this._widget.on("mousedownoutside",function(t){var e=$(t.target).parents().andSelf();e.is(".colorpicker, .charts-popup-list, .tvcolorpicker-popup, .symbol-edit-popup, ._tv-dialog-shadowbox, .fancybox-overlay")||(this._widget.unbind("mousedownoutside"),this.hide())}.bind(this)),this._widget.on("keyup.hideDialogStudy",function(t){"27"==t.which&&(this._widget.unbind("keyup.hideDialogStudy"),this.hide())}.bind(this)),this._clearInput(),this.loadFavorites(),this._scroll.scrollTo(0),this.updateLayout(!0),this.visibilityChanged.fire(!0),this.focusAddSymbolInput(this._currentPageTitle),TradingView.keyboardBinder.registerListener("StudyMarket",function(t){return!t.ctrlKey&&("47"!=t.which&&(t.which&&13===t.which?(t.target===this._search_input.get(0)&&this._insertStudyByShortDescription(),!0):!!t.charCode&&(!(!t.which||t.which<=32)&&(!/^(input|textarea)$/i.test(t.target.tagName)&&(t.preventDefault(),!!(TradingView.onWidget()||this._options.minimized&&!e.enabled("study_dialog_search_control"))||(this._search_input.focus(),this._search_input[0].value=String.fromCharCode(t.charCode),!0))))))}.bind(this)),TVDialogs.dialogs.push(this._widget)},a.prototype.isVisible=function(){return!!this._initialized&&this._widget.is(":visible")},a.prototype.updateLayout=function(t){var i,o,n,s,r,a,l,h,c=this._widget.find(".insert-study-body");c.css("height",""),this._widget.css("width",""),i=TVDialogs.calcHeight(this._widget.height(),c.height()),c.height(i),TVDialogs.resizeContentWidth(this._widget.width(),this._widget),o=this._w_headers.outerHeight(!0),n=this._widget.find(".insert-study-main").height(),this._options.minimized&&e.enabled("study_dialog_search_control")&&(o+=this._tabs.search.height()),this._w_pages.height(n-o),s=Math.min($(window).height(),$("body").height()),r=$(window).width(),a=this._widget.outerWidth(),l=$("body").hasClass("on-cme-widget")?10:20,h=this._widget.height(),t&&this._widget.css({left:Math.max(0,r-a)/2,top:Math.max(l,s-h)/2})},a.prototype.getPage=function(t){return t=t.toLowerCase(),this._pages[t]},a.prototype.focusAddSymbolInput=function(t){t==this._ECONOMY_TAB.toLowerCase()&&this.addSymbolWidget.focus()},a.prototype.selectPage=function(t){var e,i,o,n,s;if(this.focusAddSymbolInput(t),e="","string"==typeof t?e=t.toLowerCase():t instanceof $&&(e=t.data("title")),this._currentPageTitle!==e)if(e in this._pages&&e in this._tabs&&("favorites"!=e||this.hasVisibleFavorites())){for(i in this._pages)o=e===i,n=this._pages[i],this._headers[i]&&this._headers[i].toggle(o),n.toggle(o),this._tabs[i].toggleClass("active",o),o&&(n.data("html")&&(n.html(n.data("html")),n.data("html",null)),n.trigger("show-page"),s=this._tabs[i].parents(".tabs"),s.is(".technical-tabs")?this.toggleTechnicalTabs(!0):s.is(".market-tabs")&&this.toggleMarketTabs(!0));this._currentPageTitle=e,this._w_pages.scrollTop(0),this.layoutChanged.fire(),TVSettings.setValue(this._PAGE_KEY,e)}else this.selectPage(this._basicPage)},a.prototype.attachHandlers=function(){function t(t){t.stopPropagation()}var i=Modernizr.touch?"touchend":"click",o=this;Modernizr.touch&&this._w_pages.on("touchstart",".insert-study-items li",function(t){o._touchStart=$.extend({},t.originalEvent.touches[0])}),this._w_tabs.on(i,"li",this.selectThisPage.bind(this)),this._w_tabs.on(i,"li.market-tabs",this.marketTabsClickHandler.bind(this)),this._w_tabs.on(i,"li.technical-tabs",this.technicalTabsClickHandler.bind(this)),this._w_tabs.on(i,"li.market-tabs ul, li.technical-tabs ul",function(t){t.stopPropagation()}),e.enabled("items_favoriting")&&(this._w_pages.on(i,".insert-study-items .fav",this.toggleItem.bind(this)),this.favsChanged.subscribe(this,this.updateFavorites)),this._w_pages.on(i,".insert-study-items .source",this.viewSourceCode.bind(this)),this._w_pages.on(i,".insert-study-items .open-chart-popup",this.openChartPopup.bind(this)),this._w_pages.on(i,".insert-study-items .delete",this.deleteScript.bind(this)),this._w_pages.on(i,".insert-study-items li a",function(t){t.stopPropagation()}),this._w_pages.on(i,".insert-study-items li",function(t){o._touchStart&&Math.abs(o._touchStart.screenY-t.originalEvent.changedTouches[0].screenY)>o._w_pages.find(".insert-study-items li")[0].clientHeight||o.insertThisStudy.call(o,t)}),this._widget.on(i,t),this._widget.on(i,".insert-study-subscribe-button",this.subscribePackage.bind(this)),this.layoutChanged.subscribe(this,this.updateLayout),loginStateChange.subscribe(this,this.onLoginStateChange),this._w_title.on(i,"a",this.hide.bind(this)),this._widget.on("click",".insert-study-offer-info-screenshots",function(t){t.currentTarget.getAttribute("data-fancybox-inited")||(t.currentTarget.setAttribute("data-fancybox-inited",!0),$(this).find("a").fancybox({type:"image",live:!1,afterShow:function(){$(".fancybox-overlay").on("click",function(t){t.stopPropagation()})}}),setTimeout(function(){$(t.target).click()},0)),t.preventDefault()})},a.prototype.selectThisPage=function(t){var e=$(t.currentTarget).data("title");e&&"search"!=e&&this.selectPage(e),t.stopPropagation()},a.prototype.toggleTabs=function(t,e,i){var o=this,n=e.find("ul"),s=e.find(".text"),r=function(){TVSettings.setValue(i,s.hasClass("open")),o.layoutChanged.fire(),o._w_tabs.height()<o._w_tabs_container.height()&&o._w_tabs.css("top","0"),o._scroll&&o._scroll.updateScroll()};"boolean"==typeof t?t?(n.is(":visible")?n.slideDown(50,r):(n.css("display","block"),r()),s.addClass("open")):(n.is(":visible")?n.slideUp(50,r):(n.css("display","none"),r()),s.removeClass("open")):(s.toggleClass("open"),n.slideToggle(50,r))},a.prototype.marketTabsClickHandler=function(t){t.stopPropagation(),this.toggleMarketTabs()},a.prototype.toggleMarketTabs=function(t){var e=this,i=this._w_market_tabs;this.toggleTabs(t,i,e._MARKET_TAB_IS_OPEN_KEY)},a.prototype.technicalTabsClickHandler=function(t){t.stopPropagation(),this.toggleTechnicalTabs()},a.prototype.toggleTechnicalTabs=function(t){var e=this,i=this._w_technical_tabs;this.toggleTabs(t,i,e._TECHNICAL_TAB_IS_OPEN_KEY)},a.prototype.toggleItem=function(t){var e=$(t.target).parent().data("study");return this.toggleFavorite(e.id),this.toggleEverywhere(e.id),!1},a.prototype.toggleEverywhere=function(t){var e=this.isFavorite(t);this._widget.find(".insert-study-items li").filter(function(e,i){var o=$(i).data("study");return!!o&&p.cutFullId(o.id)==t}).find(".fav").toggleClass("in-fav",e).attr("title",this.favTitle(e))},a.prototype.toggleFavorite=function(t){this.isFavorite(t)?this.removeFavorite(t):this.addFavorite(t)},a.prototype.isFavorite=function(t){var t=p.cutFullId(t);return this._favs.indexOf(t)!=-1},a.prototype.addFavorite=function(t){return t=p.cutFullId(t),!this.isFavorite(t)&&(this._favs.push(t),this.saveFavorites(),TVXWindowEvents.emit("StudyFavoritesChanged",JSON.stringify(this._favs)),this.favsChanged.fire(),!0)},a.prototype.removeFavorite=function(t){return t=p.cutFullId(t),!!this.isFavorite(t)&&(this._favs.splice(this._favs.indexOf(t),1),this.saveFavorites(),TVXWindowEvents.emit("StudyFavoritesChanged",JSON.stringify(this._favs)),this.favsChanged.fire(),!0)},a.prototype.updateFavorites=function(){var t,e,i,o,n,s,r,a,l,h,c=this.getVisibleFavorites();if(0===c.length)return"favorites"===this._currentPageTitle&&this.selectPage(this._basicPage),this._widget.find(".insert-study-items li .fav").removeClass("in-fav"),void this._tabs.favorites.hide();for(t=this,e=$.Deferred(),i=[],o=[],n=0;n<c.length;n++)if(s=c[n],r=t.getStudyPackageName({id:s}),r!==t._PUBLISHED_STUDIES_PACKAGE_NAME){for(l=t._studies[r]||[],h=0;h<l.length;h++)if(p.cutFullId(l[h].id)==s){i.push(l[h]);break}}else a=(/^Script\$([^@]+)/.exec(s)||0)[1],a&&o.push(a);!o.length||this._options.minimized?e.resolve(i):PublishedScript.info(o).done(function(e){var o,n;for(o=0;o<e.length;o++)n=e[o],i.push(t._createPublishedScriptMetaInfo(n))}).always(function(){e.resolve(i)}),e.done(function(e){e=t._applyStrategiesFilter(e),t.preparePageStudies(t._pages.favorites,e),t._widget.find(".insert-study-items li").find(".fav").removeClass("in-fav"),c.forEach(t.toggleEverywhere,t);
}),this._tabs.favorites.show()},a.prototype.hasFavorites=function(){return!!this._favs.length},a.prototype.hasVisibleFavorites=function(){return!!this.getVisibleFavorites().length},a.prototype.getVisibleFavorites=function(){return this.checkExcludePackageStudies(this._favs)},a.prototype.viewSourceCode=function(t){t.stopPropagation(),this.hide();var e=$(t.target).parent().data("study");return this.studyIsPublishedScript(e)?void TradingView.ScriptEditorWidget.open({scriptIdPart:e.scriptIdPart,scriptSource:e.TVScriptSourceCode}):void window.scriptLib.requestBuiltinAndUserScripts(function(t){for(var i=t.length;i--;)if(t[i].scriptIdPart===e.scriptIdPart)return void TradingView.ScriptEditorWidget.open(t[i])})},a.prototype.openChartPopup=function(t){t.stopPropagation(),t.preventDefault();var e=$(t.target).parent().data("study");TradingView.historyManager.push(new HistoryManager.ChartPage(e.imageUrl,e.scriptName||e.description))},a.prototype.deleteScript=function(t){var e,i;t.stopPropagation(),t.preventDefault(),e=$(t.target).closest("li"),i=e.data("study"),TVDialogs.showConfirm($.t("Confirmation"),$.t("Do you really want to delete script '{0}'?").format(TradingView.cleanButAmpersand(i.scriptName||i.description)),function(){window.scriptLib.requestDeleteScript(i.scriptIdPart,function(){TradingView.logNormal("deleted"),e.remove()})})},a.prototype.checkExcludePackageStudies=function(t){var e=this;return t.filter(function(t){var i,o=this.getStudyPackageName({id:t});return o===this._PUBLISHED_STUDIES_PACKAGE_NAME||(i=e._studies[o]&&$.grep(e._studies[o],function(e){return t===e.id}).length>0,!!i&&(o===this._BASIC_STUDIES_PACKAGE_NAME||o===this._CUSTOM_STUDIES_PACKAGE_NAME||o===this._SCRIPTING_PACKAGE_NAME||"Script$EDGR"===o||pro.hasPackage(o)&&o in this._studies))},this)},a.prototype.sortStudies=function(t){return t.sort(function(t,e){return t=t.scriptName||t.description_localized||t.description,e=e.scriptName||e.description_localized||e.description,t>e?1:t<e?-1:0})},a.prototype.fillStudies=function(t,e,i){var o;t.empty(),e.forEach(function(e){e?o=this.createStudyListItem(e,i):(o=document.createElement("li"),o.className="placeholder"),t.append(o)},this)},a.prototype.createStudyListItem=function(t,i){var o,n,s,a,l,h,c,d,u,_,f,g,m,v,y,w,b=document.createElement("li");if($.data(b,"study",t),o=t.description_localized||$.t(t.scriptName||t.description||" ",{context:"study"}),n=this.isFavorite(t.id),s=[],i&&o)for(a=[],i instanceof RegExp?a.push({re:i,fuzzyHighlight:!1}):$.isArray(i)&&(a=i),l=0;l<a.length;l++)if(h=a[l].fullMatch,c=a[l].reserveRe,d=a[l].re,h.lastIndex=0,d.lastIndex=0,u=h.exec(o),u?a[l].fuzzyHighlight=!1:(u=d.exec(o),u||(u=c.exec(o)),a[l].fuzzyHighlight=!0),u)if(a[l].fuzzyHighlight)for(_=u.index,f=1;f<u.length;f++)g=u[f].length,f%2&&(s[_]=!0),_+=g;else for(m=0;m<u[0].length;m++)s[u.index+m]=!0;return v=o.replace(/./g,function(t,e){if("<"===t?t="&lt;":"&"===t?t="&amp;":'"'===t&&(t="&quot;"),s[e]){if(" "==t||"-"==t||"/"==t)return s[e+1]=!0,t;t='<span class="match">'+t+"</span>"}return t}),y='<span class="text" title="'+TradingView.strip_tags(v)+'"">'+v+"</span>",e.enabled("items_favoriting")&&(y='<span class="fav'+(n?" in-fav":"")+' apply-common-tooltip" title="'+this.favTitle(n)+'"></span>'+y),t.author&&t.author.username&&(y+='<span class="author"><a href="/u/'+t.author.username+'" target="_blank">'+t.author.username+"</a></span>"),t.agreeCount&&(y+='<span class="agrees apply-common-tooltip" title="'+$.t("Total agrees")+'">'+t.agreeCount+" "+$.t("like",{count:t.agreeCount})+"</span>"),w=t.TVScriptSourceCode&&(0===t.id.indexOf(this._PUBLISHED_STUDIES_PACKAGE_NAME)||0===t.id.indexOf(this._CUSTOM_STUDIES_PACKAGE_NAME)),!TradingView.isMobileView&&w&&(b.className="custom-script",y+='<span class="source apply-common-tooltip" title="'+$.t("Source code")+'">{}</span>'),e.enabled("graying_disabled_tools_enabled")&&ChartApiInstance.studiesAccessController.isToolGrayed(t.description)&&(b.className+=" grayed"),void 0!==t.isCustomIndicator&&(b.className+=" custom-indicator"),t.imageUrl?y+='<div class="open-chart-popup apply-common-tooltip" title="'+$.t("Read more...")+'">...</div>':w&&window.scriptLib&&(y+='<div class="delete apply-common-tooltip" title="'+$.t("Delete script")+'"><i></i></div>'),b.innerHTML=y,p.isScriptStrategy(t)&&$(r("strategy",{"class":"strategy"})).insertAfter(b.querySelector(".text")),b},a.prototype.favTitle=function(t){return t?$.t("Remove from favorites"):$.t("Add to favorites")},a.prototype.insertThisStudy=function(t){var i,o=$(t.target).closest("li");if(!o.hasClass("placeholder"))return i=o.data("study"),e.enabled("graying_disabled_tools_enabled")&&ChartApiInstance.studiesAccessController.isToolGrayed(i.description)?void l.emit("onGrayedObjectClicked",{type:"study",name:i.description}):(o.highlight(this.HIGHLIGHT_STUDY_NUM_FLICKS),this.insertStudy(i),!1)},a.prototype.insertStudy=function(t){var e,i,o=this._chartWidgetCollection.activeChartWidget.value();o&&(e=o.insertStudyStub(t.description),i=p.replaceWithFullStudyMetaInfoAsync(o.model().studiesMetaData(),t),i.done(function(t){var i=o.removeStudyStub(e.id());i&&(o.insertStudyOrShowDialog(t),this._is_on_chart=!0)}.bind(this)),i.fail(function(t){TradingView.logError("Error: "+t),e.setStatus(t)}))},a.prototype.subscribePackage=function(t){var e=$(t.target).closest(".insert-study-pages > div").data("offer");e&&TradingView.visitPaymentPage(e.id)},a.prototype.onLoginStateChange=function(t){t||this.setUser(window.user)},a.prototype.getStudyList=function(t){function e(t){i.push(t)}var i,o;if(!this.studiesReady.isResolved())return[];i=[];for(o in this._studies)(o==this._BASIC_STUDIES_PACKAGE_NAME||pro.hasPackage(o))&&(this._studies[o].forEach(e),t&&i.push({separator:!0}));return t&&i.splice(i.length-1,1),i},a.prototype.getStudyPackageName=function(t){var e,i,o,n;if(t&&t.id)return e=p.getPackageName(t.id),e!==this._SCRIPTING_PACKAGE_NAME?e:(i=t.id.split("@"),o=i[0],0!==o.indexOf("Script$")&&0!==o.indexOf("StrategyScript$")?e:(n=o.indexOf("_"),n!==-1?o.substring(0,n):/^Script\$USER;/.test(o)?"Script$USER":/^Script\$PUB;/.test(o)?"Script$PUB":/^Script\$STD;/.test(o)?this._BASIC_STUDIES_PACKAGE_NAME:o))},a.prototype.studyIsUserTVScript=function(t){if(t&&t.id)return"Script$USER"===this.getStudyPackageName(t)},a.prototype.studyIsPublishedScript=function(t){if(t&&t.id)return"Script$PUB"===this.getStudyPackageName(t)},a.prototype.selectSearchPage=function(){this.selectPage("search"),this._clearInput()},a.prototype._insertStudyByShortDescription=function(){var t,e,i,o=this._search_value;for(o=o.trim(),t=this._studies[this._BASIC_STUDIES_PACKAGE_NAME],e=0;e<t.length;e++)if(i=t[e],i.shortDescription&&i.shortDescription.toUpperCase()===o.toUpperCase()){this.insertStudy(i);break}},a.prototype._clearInput=function(){this._search_input.val(""),"search"===this._currentPageTitle&&this._search_input.val("").trigger("input").focus()},a.prototype._getScriptType=function(){var t=this._strategiesFilterType().value();return"not_strategies"===t?1:"only_strategies"===t?2:0},a.prototype._pubSearchEntryAlreadyLoaded=function(t){var e=t.scriptIdPart.split(";")[1];return!(this._pubSearchCache.indexOf(e)<0)||(this._pubSearchCache.push(e),!1)},a.prototype._addPubSearchResult=function(t,e){if(t.length){var i=this;t.forEach(function(t){i._pubSearchEntryAlreadyLoaded(t)||(i._pubSearchEntries.push(t),i._pubSearchCount[t.scriptType]++)}),0===e&&(i._pubSearchCount[0]+=t.length),i._pubSearchEntries.sort(function(t,e){return e.agreeCount-t.agreeCount})}},a.prototype._getPublicLibraryRequestParams=function(t){var e=this._pubSearchCount[t],i=this._PUB_SEARCH_ENTRIES_ON_PAGE;return e<this._PUB_SEARCH_ENTRIES_ON_PAGE&&(i=this._PUB_SEARCH_ENTRIES_ON_PAGE-e),{offset:e,count:i,type:t}},a.prototype._loadNextPubSearchPage=function(t){var e=this;return e._pubSearchDfd?e._pubSearchDfd:(e._pubSearchDfd=$.ajax({url:"/pubscripts-library/",type:"GET",data:e._getPublicLibraryRequestParams(t),dataType:"json"}),e._pubSearchDfd.done(function(i){e._pubSearchCanLoad[t]=!!i.load_more,0!==t||i.load_more||e._pubSearchCanLoad.fill(!1),e._addPubSearchResult(i.results,t)}),e._pubSearchDfd.always(function(){delete e._pubSearchDfd}),e._pubSearchDfd)},a.prototype._onExternalFavoritesChanged=function(t){var e,i,o=[];for(e=0;e<t.length;e++)i=p.cutFullId(t[e]),o.indexOf(i)===-1&&o.push(i);this._favs=o,this.saveFavorites(),this.favsChanged.fire()},t.exports=a}).call(e,i(1),i(32),i(45),i(33),i(26))},function(t,e,i){(function(e,o,n,s){"use strict";function r(t){function i(){var t=k.last();E.toolsGroupsHeight=t.offset().top+t.outerHeight(),$(window).resize()}var s,l,h,p,u,_,f,g,m,v,y,w,b,S,T,C,x,P,L,k,E=this;t=t||{},this.options=t,c.init(),s=this._container=t.container,this._chartWidgetCollection=t.chartWidgetCollection,this._container.on("contextmenu",function(t){t.preventDefault()}),this._allToolGroups=[],t.drawingsAccess?this._toolsFilter=new r.ModernToolsFilter(t.drawingsAccess):this._toolsFilter=new r.ObsoleteToolsFilter(t.enabledDrawings,t.disabledDrawings),this.favorites=TVSettings.getJSON("chart.favoriteDrawings",[]),t.readOnly||(l=$("<div>").addClass("tools-group no-delimiter").appendTo(s),this._main=l,this.appendToolsGroup([{tool:"cursor",name:$.t("Cross")},{tool:"dot",name:$.t("Dot")},{tool:"arrow",name:$.t("Arrow")},{tool:"eraser",name:$.t("Eraser")}]),this.appendToolsGroup([{tool:"LineToolTrendLine",name:$.t("Trend Line")},{tool:"LineToolTrendAngle",name:$.t("Trend Angle")},{tool:"LineToolHorzLine",name:$.t("Horizontal Line"),shortcut:{keys:"Alt+H",immediately:!0}},{tool:"LineToolHorzRay",name:$.t("Horizontal Ray")},{tool:"LineToolVertLine",name:$.t("Vertical Line"),shortcut:{keys:"Alt+V",immediately:!0}},{tool:"LineToolArrow",name:$.t("Arrow")},{tool:"LineToolRay",name:$.t("Ray")},{tool:"LineToolExtended",name:$.t("Extended")},{tool:"LineToolParallelChannel",name:$.t("Parallel Channel")},{tool:"LineToolDisjointAngle",name:$.t("Disjoint Angle")},{tool:"LineToolFlatBottom",name:$.t("Flat Top/Bottom")}]),this.appendToolsGroup([{tool:"LineToolPitchfork",name:$.t("Pitchfork")},{tool:"LineToolSchiffPitchfork2",name:$.t("Schiff Pitchfork")},{tool:"LineToolSchiffPitchfork",name:$.t("Modified Schiff Pitchfork")},{tool:"LineToolInsidePitchfork",name:$.t("Inside Pitchfork")},{tool:"LineToolPitchfan",name:$.t("Pitchfan")},{tool:"LineToolGannSquare",name:$.t("Gann Box")},{tool:"LineToolGannComplex",name:$.t("Gann Square")},{tool:"LineToolGannFan",name:$.t("Gann Fan")},{tool:"LineToolFibRetracement",name:$.t("Fib Retracement")},{tool:"LineToolTrendBasedFibExtension",name:$.t("Trend-Based Fib Extension")},{tool:"LineToolFibSpeedResistanceFan",name:$.t("Fib Speed Resistance Fan")},{tool:"LineToolFibTimeZone",name:$.t("Fib Time Zone")},{tool:"LineToolTrendBasedFibTime",name:$.t("Trend-Based Fib Time")},{tool:"LineToolFibCircles",name:$.t("Fib Circles")},{tool:"LineToolFibSpiral",name:$.t("Fib Spiral")},{tool:"LineToolFibSpeedResistanceArcs",name:$.t("Fib Speed Resistance Arcs")},{tool:"LineToolFibWedge",name:$.t("Fib Wedge")},{tool:"LineToolFibChannel",name:$.t("Fib Channel")}]),this.appendToolsGroup([{tool:"LineToolBrush",name:$.t("Brush")},{tool:"LineToolRectangle",name:$.t("Rectangle")},{tool:"LineToolRotatedRectangle",name:$.t("Rotated Rectangle")},{tool:"LineToolEllipse",name:$.t("Ellipse")},{tool:"LineToolTriangle",name:$.t("Triangle")},{tool:"LineToolPolyline",name:$.t("Polyline")},{tool:"LineToolBezierQuadro",name:$.t("Curve")},{tool:"LineToolBezierCubic",name:$.t("Double Curve")},{tool:"LineToolArc",name:$.t("Arc")}]),this.appendToolsGroup([{tool:"LineToolText",name:$.t("Text")},{tool:"LineToolTextAbsolute",name:$.t("Anchored Text")},{tool:"LineToolNote",name:$.t("Note")},{tool:"LineToolNoteAbsolute",name:$.t("Anchored Note")},{tool:"LineToolCallout",name:$.t("Callout")},{tool:"LineToolBalloon",name:$.t("Balloon")},{tool:"LineToolPriceLabel",name:$.t("Price Label")},{tool:"LineToolArrowMarkLeft",name:$.t("Arrow Mark Left")},{tool:"LineToolArrowMarkRight",name:$.t("Arrow Mark Right")},{tool:"LineToolArrowMarkUp",name:$.t("Arrow Mark Up")},{tool:"LineToolArrowMarkDown",name:$.t("Arrow Mark Down")},{tool:"LineToolFlagMark",name:$.t("Flag Mark")}]),this.appendToolsGroup([{tool:"LineTool5PointsPattern",name:$.t("XABCD Pattern")},{tool:"LineToolCypherPattern",name:$.t("Cypher Pattern")},{tool:"LineToolABCD",name:$.t("ABCD Pattern")},{tool:"LineToolTrianglePattern",name:$.t("Triangle Pattern")},{tool:"LineToolThreeDrivers",name:$.t("Three Drivers Pattern")},{tool:"LineToolHeadAndShoulders",name:$.t("Head & Shoulders")},{tool:"LineToolElliottImpulse",name:$.t("Elliott Impulse Wave (12345)")},{tool:"LineToolElliottTriangle",name:$.t("Elliott Triangle Wave (ABCDE)")},{tool:"LineToolElliottTripleCombo",name:$.t("Elliott Triple Combo Wave (WXYXZ)")},{tool:"LineToolElliottCorrection",name:$.t("Elliott Correction Wave (ABC)")},{tool:"LineToolElliottDoubleCombo",name:$.t("Elliott Double Combo Wave (WXY)")},{tool:"LineToolCircleLines",name:$.t("Cyclic Lines")},{tool:"LineToolTimeCycles",name:$.t("Time Cycles")},{tool:"LineToolSineLine",name:$.t("Sine Line")}]),this.appendToolsGroup([{tool:"LineToolRiskRewardLong",name:$.t("Long Position")},{tool:"LineToolRiskRewardShort",name:$.t("Short Position")},{tool:"LineToolPrediction",name:$.t("Forecast")},{tool:"LineToolDateRange",name:$.t("Date Range")},{tool:"LineToolPriceRange",name:$.t("Price Range")},{tool:"LineToolDateAndPriceRange",name:$.t("Date and Price Range")},{tool:"LineToolBarsPattern",name:$.t("Bars Pattern")},{tool:"LineToolGhostFeed",name:$.t("Ghost Feed")},{tool:"LineToolProjection",name:$.t("Projection")}]),this._toolsFilter.isToolEnabled("Font Icons")&&(h=new this.Button(this.createIconActions(),{addClass:"font-awesome line-tool-icons-popup",buttonClass:"font-awesome"},(!0)),this._icons=h,l.append(h.element()),this._allToolGroups.push(h)),TradingView.isMobileView||(p=$("<div>").addClass("tools-group").appendTo(s),u=new this.Button({tool:"zoom",name:"Zoom In",action:function(){c.tool.setValue("zoom")}}),p.append(u.element()),this._allToolGroups.push(u),E._chartWidgetCollection&&(_=new this.Button({tool:"zoom-out",name:"Zoom Out",action:function(){var t,e=E._chartWidgetCollection;e&&(t=e.activeChartWidget.value().model(),t&&t.zoomFromViewport())}}),p.append(_.element()),_.element().addClass("js-hidden"),function(){function t(){var i=E._chartWidgetCollection.activeChartWidget.value(),o=i.model(),n=!1;o?(e!==o&&(e&&e.zoomStack().onChange().unsubscribe(null,t),o.zoomStack().onChange().subscribe(null,t),e=o),n=!o.zoomStack().isEmpty()):i.withModel(null,t),_.element().toggleClass("js-hidden",!n)}var e=null;E._chartWidgetCollection.activeChartWidget.subscribe(t,{callWithLast:!0})}()),f=new this.Button({tool:"measure",name:"Measure (Shift + Click on the chart)",action:function(){c.tool.setValue("measure")}}),p.append(f.element()),this._allToolGroups.push(f)),g=$("<div>").addClass("tools-group").appendTo(s),m=!!c.properties().magnet.value(),v=new this.Button({tool:"magnet",name:"Magnet Mode",action:this.ToolbarActions.magnet.bind(this)}),this.magnet=v,g.append(v.element()),v.activate(m),c.properties().magnet.subscribe(this,function(t){v.activate(t.value())}),(!t.onWidget&&!TradingView.isMobileView||e.enabled("charting_library_base"))&&(m=!!c.properties().stayInDrawingMode.value(),y=new this.Button({tool:"drawginmode",name:"Stay in Drawing Mode",action:this.ToolbarActions.drawingmode.bind(this)}),this.drawingmode=y,g.append(y.element()),y.activate(m),c.properties().stayInDrawingMode.subscribe(this,function(t){y.activate(t.value())}),m=!!c.lockDrawings().value(),w=new this.Button({tool:"lockAllDrawings",name:"Lock All Drawing Tools",action:this.ToolbarActions.lockDrawings.bind(this)}),this.lockDrawings=w,g.append(w.element()),w.activate(m),c.lockDrawings().subscribe(this,function(t){w.activate(t.value())}),m=!!c.hideAllDrawings().value(),b=new this.Button({tool:"hideAllDrawings",name:"Hide All Drawing Tools",action:this.ToolbarActions.hideAllDrawings.bind(this)}),this.hideAllDrawings=b,g.append(b.element()),b.activate(m),c.hideAllDrawings().subscribe(this,function(t){b.activate(t.value())}),e.enabled("support_multicharts")&&(m=!!c.drawOnAllCharts().value(),S=new this.Button({tool:"SyncDrawing",name:$.t("Sync drawings to all charts"),action:this.ToolbarActions.drawAllCharts.bind(this)}),this.drawOnAllCharts=S,g.append(S.element()),S.activate(m),c.drawOnAllCharts().subscribe(this,function(t){S.activate(t.value())})),T=$("<div>").addClass("tools-group").appendTo(s),this.removeAndObjectsTreeTools=T,C=new this.Button({tool:"showObjectsTree",name:$.t("Show Objects Tree"),action:this.ToolbarActions.showObjectsTree.bind(this)}),this.showObjectsTree=C,T.append(C.element()),x=new this.Button({tool:"removeAllDrawingTools",name:"Remove All Drawing Tools",action:this.ToolbarActions.removeTools.bind(this)}),this.removeTools=x,T.append(x.element()),P=$("<div>").addClass("tools-group no-delimiter").appendTo(s),this.responsiveToolbar=new this.ResponsiveToolbar(this),P.append(this.responsiveToolbar.getButton().element())),L=TVSettings.getValue("chart.cursorPreference","cursor"),this._favoritesEvent=new o,this._favoritesEvent.subscribe(this,function(t){~["add","remove","reorder"].indexOf(t)&&TVSettings.setJSON("chart.favoriteDrawings",this.favorites.map(function(t){return{tool:t.drawing.tool}}))}),t.onWidget||(this.favorites=this.favorites.filter(function(t){return!!t.drawing}),this.favoriteDrawingToolbar=new a(this))),t.readOnly||c.tool.subscribe(function(t){this._syncView(t)}.bind(this),{callWithLast:!0}),$(document).bind("keydown","esc",function(){c.resetToCursor(!0)}),this._twoColumnLayout=!1,(!t.onWidget&&!TradingView.isMobileView||e.enabled("charting_library_base"))&&(k=s.find(".tools-group"),window.loaded?i():$(window).load(i),$(window).on("resize",this.updateToolsVisibility.bind(this))),this.visible=new n,this.visible.subscribe(this,function(t){this._fold(!t.value()),this.$panelClose&&this.$panelClose.prop("title",this.getVisibilityChangeText(t.value())),TVSettings.setValue("ChartSideToolbarWidget.visible",t.value())}),this.visible.setValue("boolean"==typeof t.forceVisible?t.forceVisible:TVSettings.getBool("ChartSideToolbarWidget.visible",!0)),this.$panelClose=$('<a href="#" class="tv-close-panel left" title="'+this.getVisibilityChangeText(this.visible.value())+'"></a>'),this.$panelClose.on("click",function(t){var e,i=this.activeChartWidget().model();i&&(e=this.visible.value(),this.$panelClose.prop("title",this.getVisibilityChangeText(!e)),i.setProperty(this.visible,!e,this.getVisibilityChangeText(e)),d.emit("toggle_sidebar",!e),t.preventDefault())}.bind(this)).appendTo(s),t.onResize&&(this.onResize=t.onResize),$(window).on("resize",this.updateLayout.bind(this))}var a=i(386),l=i(213),h=i(133),c=i(74),d=i(271),p=i(50).bindPopupMenu,u=i(73).saveDefaultProperties;r.prototype.updateToolsVisibility=function(){var t=$(window).height()<this.toolsGroupsHeight+10;t!=this._twoColumnLayout&&(this.magnet.element().toggleClass("js-hidden",t),this.drawingmode.element().toggleClass("js-hidden",t),this.lockDrawings.element().toggleClass("js-hidden",t),this.hideAllDrawings.element().toggleClass("js-hidden",t),this.drawOnAllCharts&&this.drawOnAllCharts.element().toggleClass("js-hidden",t),this.showObjectsTree.element().toggleClass("js-hidden",t),this.removeTools.element().toggleClass("js-hidden",t),this.removeAndObjectsTreeTools.toggleClass("js-hidden",t),this.responsiveToolbar.getButton().element().toggleClass("js-hidden",!t),this._twoColumnLayout=t)},r.prototype.updateLayout=function(){this.onResize&&this.onResize(this._container)},r.prototype.appendToolsGroup=function(t){var e,i=this.filterEnabledTools(this.extendTools(t));i.length>0&&(e=new this.Button(i),this._main.append(e.element()),this._allToolGroups.push(e))},r.prototype.filterEnabledTools=function(t){return t.filter(function(t){return this._toolsFilter.isToolEnabled(t.name)},this)},r.prototype.element=function(){return this._container},r.prototype._syncView=function(t){var e,i,o,n;if(this._allToolGroups)for(e=this._allToolGroups.length;e--;)if(i=this._allToolGroups[e],i.textAsIcon)i.activate("LineToolIcon"==t);else{for(o=!1,n=i.tools.length;n--;)i.tools[n].tool===t&&(i.setCurrent(n),o=!0);i.activate(o)}},r.prototype.activeChartWidget=function(){return this._chartWidgetCollection.activeChartWidget.value()},r.prototype.extendTools=function(t){var e=this,i=this._addToFavorite.bind(this),o=e._removeFromFavorite.bind(this),n=this.favorites.reduce(function(t,e){return t.push(e.tool),t},[]);return $.map(t,function(t){var s,r={tool:t.tool,name:t.name,localizedName:$.t(t.name),addClass:e._toolsFilter.isToolGrayed(t.name)&&" grayed",shortcut:t.shortcut,action:function(){c.tool.value()!==t.tool&&(TradingView.supportTouch()&&e._chartWidgetCollection.selectedSource.value()&&e.activeChartWidget().model().lineBeingCreated()&&e.activeChartWidget().model().cancelCreatingLine(),c.tool.setValue(t.tool))},favOptions:{allowMakeFavorite:!e.options.onWidget,addToFavorite:i,removeFromFavorite:o}},a=!!~n.indexOf(t.tool);if(a)for(s=0;s<e.favorites.length;s++)e.favorites[s].tool==t.tool&&(e.favorites[s].drawing=r);return r.favOptions.isFavorite=a,t.shortcut&&h.bind(t.shortcut.keys,function(i){return i.preventDefault(),t.shortcut.immediately?e.activeChartWidget().activePaneWidget&&e.activeChartWidget().activePaneWidget.drawRightThere(t.tool):r.action(),!1}.bind(this)),r})},r.prototype._addToFavorite=function(t){t.favOptions.isFavorite=!0;var e={drawing:t,tool:t.tool};this.favorites.push(e),this._favoritesEvent.fire("add",e)},r.prototype._removeFromFavorite=function(t){t.favOptions.isFavorite=!1;for(var e=0;e<this.favorites.length;e++)this.favorites[e].drawing.tool===t.tool&&(this.favorites.splice(e,1),this._favoritesEvent.fire("remove",t))},r.prototype.createIconActions=function(t){var e=this,i=l.availIcons,o=TVSettings.getJSON("linetoolicon.recenticons");return o&&(i=o.concat(["separator"]).concat(i)),$.map(i,function(t){return"separator"===t?{separator:!0}:{tool:"LineToolIcon",name:String.fromCharCode(t),addClass:e._toolsFilter.isToolGrayed("Font Icons")&&" grayed",action:function(){var i,o,n=defaults("linetoolicon");n.icon=t,TradingView.saveDefaults("linetoolicon",n),c.tool.setValue("LineToolIcon"),e._icons.setTools(e.createIconActions()),i=TVSettings.getJSON("linetoolicon.recenticons")||[],o=10,i=$.grep(i,function(e){return e!=t}),i.unshift(t),i.length>o&&(i=i.slice(0,o)),TVSettings.setJSON("linetoolicon.recenticons",i)}}})},r.prototype.changeTool=function(t){t?this._chartWidget.setCurrentTool(t):this._chartWidget.setCurrentTool(this._chartWidget.currentCursorTool())},r.prototype._fold=function(t){t=!!t;var e=this._container;e.toggleClass("hidden",t),$(window).resize()},r.prototype.getVisibilityChangeText=function(t){return t?$.t("Hide Drawings Toolbar"):$.t("Show Drawings Toolbar")},r.prototype.Button=function(t,e,i){t=Array.isArray(t)?t:[t],this.isGroup=t.length>1,this.textAsIcon=i,this.setTools(t),this._e=$("<span>").addClass("button").addClass("apply-common-tooltip common-tooltip-vertical"),this._main=$("<span>").addClass("main"),i&&(this._main.addClass("text-as-icon"),this._main.text(this._firstNonGrayedTool().localizedName)),this.isGroup&&(this._side=$("<span>").addClass("side").append(s("small_arrow_right","3x6")),this._e.addClass("subgroup"));var o=i?$.t("Icon"):this.tools[0].localizedName;this._e.append(this._main).attr("title",o).append(this._side),this.isGroup&&(e=$.extend({direction:TradingView.isMobileView?"up":"right",event:"button-popup",addClass:"drawings-popup-list favored-list",reverse:!1,popupSpacing:TradingView.isMobileView?15:4,svg:!i,listInner:!0,listTable:!0,wrapIcon:!0},e||{}),i||(e.addClass+=" iconed"),"function"==typeof TradingView.setWidgetLogoOverlayVisibility&&(this._e.on(e.event,function(){TradingView.setWidgetLogoOverlayVisibility(!1)}),e.onRemove=function(){TradingView.setWidgetLogoOverlayVisibility(!0)}),p(this._e,null,e)),this.activated=t.activated||!1,this.setCurrent(this.tools.indexOf(this._firstNonGrayedTool())),this.isGroup?(Modernizr.touch?(this._main.bind("touchstart",$.proxy(this,"_startclick")),this._main.bind("touchend",$.proxy(this,"_stopclick"))):(this._main.mousedown($.proxy(this,"_startclick")),this._main.mouseup($.proxy(this,"_stopclick"))),this._side.click($.proxy(this,"_submenu")),this._e.click(function(){return!1})):this._e.click($.proxy(this,"action"))},r.prototype.Button.prototype.toggle=function(){switch(this.element().css("display")){case"none":this.element().css("display","block");break;case"block":this.element().css("display","none")}},r.prototype.Button.prototype._isToolGrayed=function(t){return t.addClass&&t.addClass.indexOf("grayed")>-1},r.prototype.Button.prototype._firstNonGrayedTool=function(){var t,e;for(t=0;t<this.tools.length;++t)if(e=this.tools[t],!this._isToolGrayed(e)&&!e.separator)return e;return this.tools[0]},r.prototype.Button.prototype.element=function(){return this._e},r.prototype.Button.prototype.setTools=function(t){if(Array.isArray(t)){var e=this;this.tools=$.map(t,$.proxy(function(t,i){return t.separator?{separator:!0}:{icon:e.textAsIcon?t.name:t.tool,name:t.name,shortcut:t.shortcut,localizedName:t.localizedName||$.t(t.name),tool:t.tool,addClass:t.addClass,action:"function"==typeof t.action?t.action:e._defaultAction,favOptions:t.favOptions}},this))}},r.prototype.Button.prototype._setIcon=function(t){var e=$(s(t,"30x30"));this._main.empty().append(e)},r.prototype.Button.prototype._setTextAsIcon=function(t){this._main.text(t)},r.prototype.Button.prototype.setIcon=function(t){this.icon=t,this.textAsIcon?this._setTextAsIcon(t):this._setIcon(t)},r.prototype.Button.prototype._getPopupMenuItems=function(){function t(t){return t?$.t("Remove from favorites"):$.t("Add to favorites")}var e=this;return $.map(this.tools,function(i,o){var n,r;return i.separator?i:(n=function(){e._isToolGrayed(i)?d.emit("onGrayedObjectClicked",{type:"drawing",name:i.name}):(e.setCurrent(o),i.action.call(e,i),$(document).trigger("click"),$(document).trigger("touch"))},!e.textAsIcon&&i.favOptions.allowMakeFavorite&&(r=$('<span class="to-quick" title="'+t(i.favOptions.isFavorite)+'"></span>').append(s("star","16x16")).toggleClass("quicked",!!i.favOptions.isFavorite)),{title:""+i.localizedName,action:n,shortcut:i.shortcut,active:o==e.current,svg:!e.textAsIcon&&$(s(i.icon,"30x30")),addClass:i.addClass,buttons:e.textAsIcon||!i.favOptions.allowMakeFavorite?void 0:[{el:r,handler:function(e){i.favOptions.isFavorite?(i.favOptions.removeFromFavorite(i),r.removeClass("quicked").attr("title",t(!1))):(i.favOptions.addToFavorite(i),r.addClass("quicked").attr("title",t(!0))),e.stopPropagation(),e.preventDefault()}}]})})},r.prototype.Button.prototype._defaultAction=function(){this.activate()},r.prototype.Button.prototype._startclick=function(){this._e.hasClass("active")?($(document).trigger("click"),this.action()):this._delay=setTimeout($.proxy(function(){this._delay=null,this.openSubmenu()},this),200)},r.prototype.Button.prototype._stopclick=function(){this._delay&&(clearTimeout(this._delay),this._delay=null,this.action())},r.prototype.Button.prototype._submenu=function(){return this._e.hasClass("active")?void $(document).trigger("click"):void this.openSubmenu()},r.prototype.Button.prototype.activate=function(t){t=void 0===t||!!t,this.activated=t,t?this._e.addClass("selected"):this._e.removeClass("selected"),this.textAsIcon||this._setIcon(this.icon)},r.prototype.Button.prototype.action=function(){var t=this.getCurrent();this._isToolGrayed(t)?d.emit("onGrayedObjectClicked",{type:"drawing",name:t.name}):t.action.call(this,t)},r.prototype.Button.prototype.openSubmenu=function(){this._e.trigger("button-popup",[this._getPopupMenuItems()])},r.prototype.Button.prototype.setCurrent=function(t){if(t>=0&&t<this.tools.length){var e=this.tools[t];this.setIcon(e.icon),this._isToolGrayed(e)?this._e.find(".main").addClass(" grayed"):this._e.find(".main").removeClass(" grayed"),this.isGroup&&!this.textAsIcon&&this._e.attr("title",e.localizedName),this.current=t}},r.prototype.Button.prototype.getCurrent=function(){return this.tools[this.current]},r.prototype.Button.prototype.setCurrentTool=function(t,e){var i,o=this;"LineToolIcon"===t?(i=String.fromCharCode(defaults("linetoolicon").icon),$.each(this.tools,function(t,e){if(e.icon==i)return o.setCurrent(t),o.activate(),!1})):$.each(this.tools,function(e,i){if(i.tool==t)return o.setCurrent(e),o.activate(),!1})},r.prototype.ResponsiveToolbar=function(t,e){this.initButton(t,e),this.initPopupMenu()},r.prototype.ResponsiveToolbar.prototype.initButton=function(t){this.button=new r.prototype.Button({tool:"group",name:$.t("Show Hidden Tools"),addClass:"block",action:function(){var e,i;this.button.activate(!this.button.activated),e=[this.getMenuItem("Magnet Mode",t.ToolbarActions.magnet.bind(t),t.magnet.activated),this.getMenuItem("Stay in Drawing Mode",t.ToolbarActions.drawingmode.bind(t),t.drawingmode.activated),this.getMenuItem("Lock All Drawing Tools",t.ToolbarActions.lockDrawings.bind(t),t.lockDrawings.activated),this.getMenuItem("Hide All Drawing Tools",t.ToolbarActions.hideAllDrawings.bind(t),t.hideAllDrawings.activated),t.drawOnAllCharts&&this.getMenuItem("Sync drawings to all charts",t.ToolbarActions.drawAllCharts.bind(t),t.drawOnAllCharts.activated),this.getSeparator(),this.getMenuItem("Show Objects Tree...",t.ToolbarActions.showObjectsTree.bind(t)),this.getMenuItem("Remove All Drawing Tools",t.ToolbarActions.removeTools.bind(t))],i=e.filter(function(t){return void 0!==t}),this.button.element().trigger("button-popup",[i])}.bind(this)}),this.button.element().addClass("js-hidden")},r.prototype.ResponsiveToolbar.prototype.getSeparator=function(){return{separator:!0}},r.prototype.ResponsiveToolbar.prototype.getMenuItem=function(t,e,i){return{title:$.t(t),action:e,addClass:this.getClass(i)}},r.prototype.ResponsiveToolbar.prototype.initPopupMenu=function(){p(this.button.element(),null,{direction:"right",event:"button-popup",reverse:!0,notCloseOnButtons:!0,onRemove:function(){this.button.activate(!1)}.bind(this)})},r.prototype.ResponsiveToolbar.prototype.getClass=function(t){var e="setting-hidden";return t&&(e+=" checked"),e},r.prototype.ResponsiveToolbar.prototype.getButton=function(){return this.button},r.prototype.ResponsiveToolbar.prototype.getButtonElement=function(){return this.button.element()},r.prototype.ToolbarActions={magnet:function(t){this.magnet.activate(!this.magnet.activated),u(!0),c.properties().magnet.setValue(this.magnet.activated),u(!1)},drawingmode:function(){this.drawingmode.activate(!this.drawingmode.activated),u(!0),c.properties().stayInDrawingMode.setValue(this.drawingmode.activated),u(!1)},lockDrawings:function(){this.lockDrawings.activate(!this.lockDrawings.activated),c.lockDrawings().setValue(this.lockDrawings.activated)},hideAllDrawings:function(){this.hideAllDrawings.activate(!this.hideAllDrawings.activated),c.hideAllDrawings().setValue(this.hideAllDrawings.activated)},drawAllCharts:function(){this.drawOnAllCharts.activate(!this.drawOnAllCharts.activated),u(!0),c.drawOnAllCharts().setValue(this.drawOnAllCharts.activated),u(!1)},showObjectsTree:function(){this.activeChartWidget().showSourceProperties()},removeTools:function(){this._chartWidgetCollection.activeChartWidget.value().model().removeAllDrawingTools()}},r.ObsoleteToolsFilter=function(t,e){this._enabledTools=t,this._disabledTools=e},r.ObsoleteToolsFilter.prototype.isToolEnabled=function(t){var e=!!this._enabledTools&&this._enabledTools.length>0,i=!!this._disabledTools&&this._disabledTools.length>0;if(e&&i)throw"Unable to use enabled drawings list and disabled drawings one together. Please use just one of them.";return!i&&!e||e&&this._enabledTools.indexOf(t)>=0||i&&this._disabledTools.indexOf(t)<0},r.ObsoleteToolsFilter.prototype.isToolGrayed=function(){return!1},r.ModernToolsFilter=function(t){this._toolsAccess=t},r.ModernToolsFilter.prototype._findTool=function(t){var e,i,o=null;for(e=0;e<this._toolsAccess.tools.length;++e)if(i=this._toolsAccess.tools[e],
i.name==t){o=i;break}return o},r.ModernToolsFilter.prototype.isToolEnabled=function(t){var e=this._findTool(t);return!(!e||!e.grayed)||("black"==this._toolsAccess.type?!e:!!e)},r.ModernToolsFilter.prototype.isToolGrayed=function(t){var e=this._findTool(t);return e&&e.grayed},t.exports=r}).call(e,i(1),i(32),i(63),i(26))},function(t,e,i){(function(e,o){"use strict";function n(t){this.drawingToolbar=t,this.tools=this.drawingToolbar.favorites,this.visibleProperty=new e(TVSettings.getBool("ChartFavoriteDrawingToolbarWidget.visible",!0)),this.visibleProperty.subscribe(this,function(t){this.toggle(t.value()),TVSettings.setValue("ChartFavoriteDrawingToolbarWidget.visible",t.value())}),this._attach(),this.visibleProperty.value()&&this.tools.length>0?this.show():this.init()}var s=i(132).Action,r=i(275),a=i(74);n.prototype._POSITION_KEY="chart.favoriteDrawingsPosition",n.prototype._attach=function(){this.drawingToolbar._favoritesEvent.subscribe(this,this._onEvent),a.tool.subscribe(function(){this._visible&&this.render()}.bind(this))},n.prototype._onEvent=function(t,e){this.tools=this.drawingToolbar.favorites,this._visible||this.visibleProperty.value()?this.tools.length>0?(this.render(),this._visible||this.showWidget(),this._updatePosition()):this.hideWidget():"add"==t&&this.tools.length>0&&this.setVisible(!0)},n.prototype.render=function(){this._$toolsContainer.empty();var t=a.tool.value();this.tools.forEach(function(e){var i,n,s;e.drawing&&(i=e.drawing.tool==t,n=$(o(e.drawing.tool,"30x30")),s=$('<span class="button apply-common-tooltip" />').attr("title",e.drawing.localizedName).append(n).toggleClass("active",i).on("click",function(){a.tool.value()==e.drawing.tool?a.resetToCursor():e.drawing.action.call(this.drawingToolbar,e.drawing)}),this._$toolsContainer.append(s))}.bind(this))},n.prototype.init=function(){var t,e,i;this._inited||(this._inited=!0,t=this,e=$('<div class="drawing-favorites-toolbar"><div class="drag-handler"><i></i></div></div>').css("position","absolute").addClass("js-hidden").draggable({handle:".drag-handler",stop:function(){TVSettings.setJSON(t._POSITION_KEY,e.offset())}}),$(window).resize(function(){t._visible&&t._updatePosition()}),e.on("contextmenu",function(e){e.preventDefault();var i=new s({text:$.t("Hide Favorite Drawings Toolbar")});i.callbacks().subscribe(null,function(){var e,i=t.drawingToolbar.activeChartWidget().model();i&&(e=!t.visibleProperty.value(),i.setProperty(t.visibleProperty,e,$.t("Hide Favorite Drawings Toolbar")))}),r.createMenu([i]).show(e)}),this._$widget=e,this._$toolsContainer=$('<div class="tools-group"/>').appendTo(e),this._$widget.appendTo(document.body),this._$toolsContainer.sortable({tolerance:"pointer",start:function(t,e){TradingView.Tooltip.hide(),i=e.item.index()},stop:function(t,e){var o=e.item.index();i!=o&&(this.tools.splice(o,0,this.tools.splice(i,1)[0]),this.drawingToolbar._favoritesEvent.fire("reorder"))}.bind(this)}))},n.prototype._updatePosition=function(){var t=this,e=this._$widget,i=$(window),o=i.height()-e.outerHeight(),n=i.width()-e.outerWidth(),s=TVSettings.getJSON(t._POSITION_KEY,{left:n/2,top:window.headerChartPanel.outerHeight()+61});s={top:Math.min(o,Math.max(s.top,0)),left:Math.min(n,Math.max(s.left,0))},e.css(s),e.draggable("option","containment",[0,0,n,o])},n.prototype.showWidget=function(){this._visible=!0,this.render(),this._$widget.removeClass("js-hidden"),this._updatePosition()},n.prototype.hideWidget=function(){this._$widget.addClass("js-hidden"),this._visible=!1},n.prototype.setVisible=function(t){this.visibleProperty.setValue(t)},n.prototype.toggle=function(t){t?this.show():this.hide()},n.prototype.show=function(){!this._visible&&this.tools.length>0&&(this.init(),this.showWidget())},n.prototype.hide=function(){this._visible&&this.hideWidget()},t.exports=n}).call(e,i(63),i(26))},function(t,e,i){(function(e,o,n){"use strict";function s(t){this._chartWidgetCollection=t,this._bindings=[],this.attachHandlers()}var r=i(295),a=r.PropertyPage,l=r.SimpleComboBinder,h=r.ColorBinding,c=i(270).BarsMarksContainer,d=i(67).LineDataSource,p=i(51).Combobox,u=i(74),_=i(296),f=i(50).bindPopupMenu,g=i(73).DefaultProperty;s.prototype._POSITION_KEY="properties_toolbar.position",s.prototype.activeChartWidget=function(){return this._chartWidgetCollection.activeChartWidget.value()},s.prototype.selectedSource=function(){return this._chartWidgetCollection.selectedSource.value()},s.prototype.init=function(){var t,e;this._inited||(this._inited=!0,t=this,e=$('<div class="properties-toolbar"><div class="drag-handler"><i></i></div></div>').css("position","absolute").addClass("js-hidden").draggable({handle:".drag-handler",stop:function(){TVSettings.setJSON(t._POSITION_KEY,e.offset())}}),$(window).resize(function(){t._visible&&t._updatePositoin()}),this._$widget=e,this._$templates=$('<div class="tools-group properties-tools-group">').css("display","inline-block").addClass("js-hidden").appendTo(e),this._$properties=$('<div class="tools-group properties-tools-group">').css("display","inline-block").addClass("js-hidden").appendTo(e),this._$sourceActions=$('<div class="tools-group">').css("display","inline-block").addClass("js-hidden").appendTo(e),this.createSourceActions(),this._$widget.appendTo(document.body))},s.prototype.attachHandlers=function(){u.tool.subscribe(function(t){this.onToolChanged(t)}.bind(this),{callWithLast:!0}),this._chartWidgetCollection.selectedSource.subscribe(function(t){this.onSourceChanged(t)}.bind(this))},s.prototype.onToolChanged=function(t,e){if(t&&t.toLowerCase().indexOf("linetool")!=-1){var e=e instanceof g?e:new g(t.toLowerCase());this.init(),this.hideSourceActions(),this.showPropertiesOf(t,e),this.showTemplatesOf({tool:t,properties:e}),this._updateVisibility()}else this.selectedSource()?this.onSourceChanged(this.selectedSource()):this.hide()},s.prototype.findSourceOnWidget=function(t){var e,i,o,n;for(e=0;e<this.activeChartWidget().model().panes().length;e++)for(i=this.activeChartWidget().model().panes()[e],o=i.orderedSources(),n=0;n<o.length;n++)if(o[n]===t)return o[n]},s.prototype.onSourceChanged=function(t){return t?void(t instanceof d&&!(t instanceof c)&&this.findSourceOnWidget(t)?(this.init(),!t.userEditEnabled()||"LineToolBrush"!==t.toolname&&this.activeChartWidget().model().lineBeingCreated()?this.hideSourceActions():this.showSourceActions(t),this.showPropertiesOf(t.getConstructor(),t.properties()),this.showTemplatesOf({source:t}),this._setupToggleLockButton(t),this._updateVisibility()):this.hide()):void this.hide()},s.prototype.showTemplatesOf=function(t){var i,o,n,s,r,a,l;e.enabled("line_tool_templates")&&(i=t.source,i?(o=i.getConstructor(),n=i.properties()):(o=t.tool,n=t.properties),this._$templates.addClass("js-hidden").empty(),s=this,r=function(t){i?(i.restoreTemplate(t),s.activeChartWidget().model().model().updateSource(this._linetool),s.onSourceChanged(i)):(n.merge(t),n.listeners().fire(this),n.saveDefaults(),s.onToolChanged(o,n))},a=new _(o,r,{buttonInner:$.t("Template")+' <span class="icon"></span>',defaultsCallback:function(){n.restoreFactoryDefaults(),s.showPropertiesOf(o,n)},saveAsText:$.t("Save Drawing Template As..."),applyDefaultText:$.t("Apply Default Drawing Template"),getDataForSaveAs:i?function(){return i.template()}:null}),l=a.createButton().attr("title",$.t("Templates")),this.templatesList=a,this._$templates.append(l),this.activeChartWidget()._options.onWidget&&!window.is_authenticated||!e.enabled("linetoolpropertieswidget_template_button")||this._$templates.removeClass("js-hidden"),this._templatesVisible=!0)},s.prototype.createSourceActions=function(){function t(t,e,i,o){var n=$("<div>").addClass("button apply-common-tooltip").attr("title",e).on("click",function(t){i(t)});return o&&n.append(o),n}var n,s,r,a=this,l=i(291),h=t("Settings",$.t("Settings"),function(){new l(a.selectedSource(),a.activeChartWidget().model()).show({onWidget:a.activeChartWidget()._options.onWidget})},$(o("config","15x15")).css({"margin-top":"8px"}));this.$zOrder=t("ZOrder",$.t("Visual Order"),function(){a.zOrderButtonHandler()},$(o("linetool-layers","18x18")).css({"margin-top":"7px"})),this.$zOrder.addClass("with-arrow"),f(this.$zOrder,null,{direction:"down",event:"button-popup",reverse:!1,notCloseOnButtons:!0}),n=$.t("Clone"),e.enabled("datasource_copypaste")&&(n=n+", "+$.t("Copy")),e.enabled("support_multicharts")&&(n=n+", "+$.t("Sync")),this.$clone=t("Clone",n,function(){a.cloneButtonHandler()},$(o("linetool-clone","18x18")).css({"margin-top":"7px"})),this.$clone.addClass("with-arrow"),f(this.$clone,null,{direction:"down",event:"button-popup",reverse:!1,notCloseOnButtons:!0}),this.$lock=t("Lock",$.t("Lock"),function(){a.activeChartWidget().toggleLockSelectedObject()},$(o("lockAllDrawings","26x26")).css({"margin-top":"2px"})),this._lockChangeListener=function(t){a.$lock.toggleClass("active",t.value())},s=t("Hide",$.t("Hide"),function(){a.activeChartWidget().hideSelectedObject()},$(o("linetool-visibility","15x15")).css({"margin-top":"8px"})),r=t("Remove",$.t("Remove"),function(){a.activeChartWidget().removeSelectedSource()},$(o("bucket",{width:20,height:20})).css({"margin-top":"5px"})),e.enabled("alerts")||this._$sourceActions.append(h,this.$zOrder,this.$clone,this.$lock,s,r)},s.prototype.zOrderButtonHandler=function(){this.$zOrder.hasClass("active")||this.$zOrder.trigger("button-popup",[this._getZOrderActions()])},s.prototype.cloneButtonHandler=function(){this.$clone.hasClass("active")||this.$clone.trigger("button-popup",[this._getCloneActions()])},s.prototype._getCloneActions=function(){var t=this.activeChartWidget().model(),i=this.selectedSource(),o=[];return i.properties().clonable.value()&&o.push({title:$.t("Clone"),action:function(){t.cloneLineTool(i)}}),e.enabled("datasource_copypaste")?(o.push({title:$.t("Copy"),shortcut:"Ctrl-C",action:function(){t.copySourceToClip(i)}}),e.enabled("support_multicharts")?(o.push({title:$.t("Sync"),action:function(){t.copyToOtherCharts(i)}}),o):o):o},s.prototype._getZOrderActions=function(){var t=[],e=this.selectedSource(),i=this.activeChartWidget().model(),o={title:$.t("Bring to Front"),action:function(){i.bringToFront(e)}},n={title:$.t("Send to Back"),action:function(){i.sendToBack(e)}},s={title:$.t("Bring Forward"),action:function(){i.changeZOrder(e,1)}},r={title:$.t("Send Backward"),action:function(){i.changeZOrder(e,-1)}},a=i.paneForSource(this.selectedSource()),l=a.getZOrderMinMax();return e.zorder()===l.minZOrder&&(n.disabled=!0,r.disabled=!0),e.zorder()===l.maxZOrder&&(s.disabled=!0,o.disabled=!0),t.push(o,n,s,r),t},s.prototype._getPossibleProperty=function(t){var e,i,o=[],n=this._defaultToolProperties(),r=!0,a=!1;for(e=0;e<n.length;e++)i=n[e],i.name in t?(r=!1,o.push(i)):i.divider&&(o.push(i),a=!0);return t.extendLeft||(o=o.map(function(t){return"leftEnd"==t.name&&(t.comboboxOptions=t.comboboxOptions.filter(function(t){return t.value!=s.LINE_EXTEND})),t})),t.extendRight||(o=o.map(function(t){return"rightEnd"==t.name&&(t.comboboxOptions=t.comboboxOptions.filter(function(t){return t.value!=s.LINE_EXTEND})),t})),2===o.length&&a&&(o=$.grep(o,function(t){return!t.divider})),r?[]:o},s.prototype.showPropertiesOf=function(t,e){var i,o,n,s,r;if(this._toolExceptionCases||(this._toolExceptionCases=this._createToolExceptionCases()),i=this._toolExceptionCases[t]||this._getPossibleProperty(e),this._$properties.empty(),this._propertiesVisible=!1,!i.length)return void this._$properties.addClass("js-hidden");for(o=0;o<i.length;o++)n=i[o],n.divider?this._$properties.append('<div class="divider"></div>'):(s=e[n.name],("function"!=typeof n.showIf||n.showIf(s,e))&&(r=new this.propertyControl(this,s,n,e),this._$properties.append(r.el),this._propertiesVisible=!0));this._$properties.toggleClass("js-hidden",!this._propertiesVisible)},s.prototype.showSourceActions=function(t){function e(i){n.$editAlert.addClass("js-hidden"),n.$addAlert.addClass("js-hidden"),t.canHasAlert()&&(i?n.$editAlert.removeClass("js-hidden"):n.$addAlert.removeClass("js-hidden")),t.hasAlert.subscribe(e,!0)}var i=TradingView.className((t||this.selectedSource()).constructor),o=this.activeChartWidget().model().model().isSingleInstanceLineTool(i),n=this;this.$clone.toggleClass("js-hidden",o),n.$editAlert&&n.$addAlert&&e(t.hasAlert.value()),this._$sourceActions.removeClass("js-hidden"),this._sourceActionsVisible=!0},s.prototype.hideSourceActions=function(){this._$sourceActions.addClass("js-hidden"),this._sourceActionsVisible=!1},s.prototype._updateVisibility=function(){this._propertiesVisible||this._sourceActionsVisible||this._templatesVisible?this._show():this.hide()},s.prototype.hide=function(){this._$widget&&this._$widget.addClass("js-hidden"),this._visible=!1},s.prototype._show=function(){this._$widget.removeClass("js-hidden"),this._updatePositoin(),this._visible=!0},s.prototype.refresh=function(){this.onSourceChanged(this.selectedSource())},s.prototype._setupToggleLockButton=function(t){t!=this._selectedSourceBk&&(this._selectedSourceBk&&this._selectedSourceBk.properties().frozen&&this._selectedSourceBk.properties().frozen.unsubscribe(this,this._lockChangeListener),t&&t.properties().frozen&&(t.properties().frozen.subscribe(this,this._lockChangeListener),this.$lock.toggleClass("active",t.properties().frozen.value())),this._selectedSourceBk=t)},s.prototype._updatePositoin=function(){var t=this,e=this._$widget,i=$(window),o=i.height()-e.outerHeight(),n=i.width()-e.outerWidth(),s=TVSettings.getJSON(t._POSITION_KEY,{left:n/2,top:window.headerChartPanel.outerHeight()+15});s={top:Math.min(o,Math.max(s.top,0)),left:Math.min(n,Math.max(s.left,0))},e.css(s),e.draggable("option","containment",[0,0,n,o])},s.prototype.bindControl=function(t){this._bindings.push(t)},s.prototype.clearBindings=function(t){for(var e=this._bindings.length;e--;)this._bindings[e].destroy();this._bindings.length=0},s.prototype.propertyControl=function(t,e,i,n){var s,r,c,d,u,_,f,g,m,v;e&&i&&t&&i.inputType&&("combobox"!==i.inputType||i.comboboxOptions||TradingView.logWarn('inputType combobox, needs "comboboxOptions" option'),this._toolbarWidget=t,s=i.inputType,"colorPicker"===s?(r=a.prototype.createColorPicker({addClass:"tv-colorpicker-icon"}),c=r.find("input"),i.icon&&(c.addClass("svg-"+i.icon),d=$(o(i.icon,"40x36")),d.on("click",function(t){c.data("tvcolorpicker")||c.focus()}),$(document).on("click",function(t){c.data("tvcolorpicker")?c.addClass("active"):c.removeClass("active")}),c.after(d)),t.bindControl(new h(r,e,(!0),t.activeChartWidget().model(),null,this.getTransparency(i,n))),c.addClass("apply-common-tooltip")):"combobox"===s&&(_=!0,i.simple===!0?(u=$.map(i.comboboxOptions,function(t){return{value:t,html:'<div class="combobox-simple">'+t+"</div>"}}),_=!1):u=$.map(i.comboboxOptions,function(t){var e=$('<div class="combobox-icon"></div>');return e.append(o(t.icon,"32x25")),{value:t.value,html:e}}),f=new p(u,{horizontal:_}),g=0,m=1,v=41,r=f.render(),_&&r.find(".items").width(i.comboboxOptions.length*v+2*g+2*m-1),i.propertyProxy&&(e=i.propertyProxy(n,t.activeChartWidget().model())),t.bindControl(new l(f,e,null,(!0),t.activeChartWidget().model())),r.addClass("apply-common-tooltip")),i.title&&r.attr("title",i.title),"string"==typeof i.addClass&&r.addClass(i.addClass),this.el=r)},s.prototype.propertyControl.prototype.getTransparency=function(t,e){if(t.transparency)return t.transparencyField?e[t.transparencyField].value():e.transparency.value()},s.prototype.createLineEndPropertyProxy=function(t,e){return function(i,o){var r,a;return r=i[e]&&i[e].value()?s.LINE_EXTEND:i[t].value(),a=new n(r),a.subscribe(this,function(n){var s=n.value();s<2?(o.beginUndoMacro(""),i[t].setValue(s),i[e]&&i[e].setValue(!1),o.endUndoMacro()):(o.beginUndoMacro(""),i[t].setValue(d.LINEEND_NORMAL),i[e]&&i[e].setValue(!0),o.endUndoMacro())}),a}},s.LINE_EXTEND=42,s.prototype._defaultToolProperties=function(){return[{name:"color",inputType:"colorPicker",icon:"pencil2",title:$.t("Color")},{name:"linecolor",inputType:"colorPicker",icon:"pencil2",title:$.t("Color")},{name:"backgroundColor",inputType:"colorPicker",icon:"bucket2",title:$.t("Background Color"),transparency:!0},{divider:!1},{name:"linewidth",inputType:"combobox",comboboxOptions:[{value:1,icon:"line-width-1"},{value:2,icon:"line-width-2"},{value:3,icon:"line-width-3"},{value:4,icon:"line-width-4"}],title:$.t("Width")},{name:"linestyle",title:$.t("Style"),inputType:"combobox",comboboxOptions:[{value:0,icon:"line-width-1"},{value:1,icon:"line-dotted"},{value:2,icon:"line-dashed"}]},{name:"leftEnd",title:$.t("Left End"),inputType:"combobox",comboboxOptions:[{value:d.LINEEND_NORMAL,icon:"line-left-normal"},{value:d.LINEEND_ARROW,icon:"line-left-arrow"},{value:s.LINE_EXTEND,icon:"line-left-extend"}],propertyProxy:this.createLineEndPropertyProxy("leftEnd","extendLeft")},{name:"rightEnd",title:$.t("Right End"),inputType:"combobox",comboboxOptions:[{value:d.LINEEND_NORMAL,icon:"line-right-normal"},{value:d.LINEEND_ARROW,icon:"line-right-arrow"},{value:s.LINE_EXTEND,icon:"line-right-extend"}],propertyProxy:this.createLineEndPropertyProxy("rightEnd","extendRight")}]},s.prototype._riskPropertiesExceptionCases=function(){return[{name:"textcolor",title:$.t("Text color"),inputType:"colorPicker",icon:"font"},{name:"profitBackground",title:$.t("Profit Background Color"),inputType:"colorPicker",icon:"bucket2",transparency:!0,transparencyField:"profitBackgroundTransparency"},{name:"stopBackground",title:$.t("Stop Background Color"),inputType:"colorPicker",icon:"bucket2",transparency:!0,transparencyField:"stopBackgroundTransparency"},{name:"linecolor",title:$.t("Border color"),inputType:"colorPicker",icon:"pencil2"}]},s.prototype._elliottPropertiesExceptionCases=function(){return[{name:"color",inputType:"colorPicker",icon:"pencil2"}]},s.prototype._rangeExceptionCases=function(){return[{name:"linecolor",inputType:"colorPicker",icon:"pencil2",title:"Color"},{name:"backgroundColor",inputType:"colorPicker",icon:"bucket2",title:"Background Color",transparency:!0,transparencyField:"backgroundTransparency"},{name:"linewidth",inputType:"combobox",comboboxOptions:[{value:1,icon:"line-width-1"},{value:2,icon:"line-width-2"},{value:3,icon:"line-width-3"},{value:4,icon:"line-width-4"}],title:"Width"}]},s.prototype._textPropertiesExceptionCases=function(){return[{name:"color",title:$.t("Text color"),inputType:"colorPicker",icon:"font"},{name:"backgroundColor",title:$.t("Background Color"),inputType:"colorPicker",icon:"bucket2",showIf:function(t,e){return!e||!e.fillBackground||!!e.fillBackground.value()}},{name:"borderColor",title:$.t("Border Color"),inputType:"colorPicker",icon:"pencil2"},{name:"bordercolor",title:$.t("Border Color"),inputType:"colorPicker",icon:"pencil2"},{divider:!1},{name:"fontsize",title:$.t("Font Size"),inputType:"combobox",simple:!0,addClass:"simple fontsize-dropdown",comboboxOptions:[10,11,12,14,16,20,24,28,32,40]}]},s.prototype._notePropertiesExceptionCases=function(){return[{name:"markerColor",title:$.t("Marker Color"),inputType:"colorPicker",icon:"pencil2"},{name:"textColor",title:$.t("Text color"),inputType:"colorPicker",icon:"font"},{divider:!1},{name:"fontSize",title:$.t("Font Size"),inputType:"combobox",simple:!0,addClass:"simple fontsize-dropdown",comboboxOptions:[10,11,12,14,16,20,24,28,32,40]}]},s.prototype._brushPropertiesExceptionCases=function(){return[{name:"linecolor",inputType:"colorPicker",icon:"pencil2",title:$.t("Color")},{name:"backgroundColor",inputType:"colorPicker",icon:"bucket2",transparency:!0,showIf:function(t,e){return e.fillBackground.value()},title:$.t("Background Color")},{divider:!1},{name:"linewidth",inputType:"combobox",comboboxOptions:[{value:1,icon:"line-width-1"},{value:2,icon:"line-width-2"},{value:3,icon:"line-width-3"},{value:4,icon:"line-width-4"}],title:$.t("Line Width")},{name:"leftEnd",title:$.t("Left End"),inputType:"combobox",comboboxOptions:[{value:d.LINEEND_NORMAL,icon:"line-left-normal"},{value:d.LINEEND_ARROW,icon:"line-left-arrow"}],propertyProxy:this.createLineEndPropertyProxy("leftEnd","extendLeft")},{name:"rightEnd",title:$.t("Right End"),inputType:"combobox",comboboxOptions:[{value:d.LINEEND_NORMAL,icon:"line-right-normal"},{value:d.LINEEND_ARROW,icon:"line-right-arrow"}],propertyProxy:this.createLineEndPropertyProxy("rightEnd","extendRight")}]},s.prototype._oneColorForAllLines=function(){return[{name:"collectibleColors",inputType:"colorPicker",icon:"pencil2",title:$.t("One color for all lines")}]},s.prototype._createToolExceptionCases=function(){return{LineToolRegressionTrend:[],LineToolGannSquare:s.prototype._oneColorForAllLines(),LineToolFibTimeZone:s.prototype._oneColorForAllLines(),LineToolBrush:s.prototype._brushPropertiesExceptionCases(),LineToolPolyline:s.prototype._brushPropertiesExceptionCases(),LineToolText:s.prototype._textPropertiesExceptionCases(),LineToolTextAbsolute:s.prototype._textPropertiesExceptionCases(),LineToolBalloon:s.prototype._textPropertiesExceptionCases(),LineToolCallout:s.prototype._textPropertiesExceptionCases(),LineToolPriceLabel:s.prototype._textPropertiesExceptionCases(),LineToolArrowMarkLeft:[],LineToolArrowMarkRight:[],LineToolArrowMarkUp:[],LineToolArrowMarkDown:[],LineToolFlagMark:[],LineToolThumbUp:[],LineToolThumbDown:[],LineToolElliottCircle:s.prototype._elliottPropertiesExceptionCases(),LineToolElliottSubminuette:s.prototype._elliottPropertiesExceptionCases(),LineToolElliottMinor:s.prototype._elliottPropertiesExceptionCases(),LineToolElliottMinorRetr:s.prototype._elliottPropertiesExceptionCases(),LineToolElliottMajorRetr:s.prototype._elliottPropertiesExceptionCases(),LineToolDateRange:s.prototype._rangeExceptionCases(),LineToolPriceRange:s.prototype._rangeExceptionCases(),LineToolDateAndPriceRange:s.prototype._rangeExceptionCases(),LineToolIcon:[{name:"color",title:$.t("Color"),inputType:"colorPicker",icon:"bucket2"}],LineToolNote:s.prototype._notePropertiesExceptionCases(),LineToolNoteAbsolute:s.prototype._notePropertiesExceptionCases(),LineToolThreeDrivers:[{name:"color",title:$.t("Text color"),inputType:"colorPicker",icon:"pencil2"}],LineToolRiskRewardLong:s.prototype._riskPropertiesExceptionCases(),LineToolRiskRewardShort:s.prototype._riskPropertiesExceptionCases(),LineToolBarsPattern:[{name:"color",title:$.t("Color"),inputType:"colorPicker",icon:"bucket2"}],LineToolProjection:[{name:"color1",title:$.t("Background color 1"),inputType:"colorPicker",icon:"bucket2",transparency:!0},{name:"color2",title:$.t("Background color 2"),inputType:"colorPicker",icon:"bucket2",transparency:!0},{divider:!1},{name:"linewidth",inputType:"combobox",comboboxOptions:[{value:1,icon:"line-width-1"},{value:2,icon:"line-width-2"},{value:3,icon:"line-width-3"},{value:4,icon:"line-width-4"}]}],LineToolFibCircles:s.prototype._oneColorForAllLines(),LineToolFibChannel:s.prototype._oneColorForAllLines(),LineToolFibSpeedResistanceArcs:s.prototype._oneColorForAllLines(),LineToolFibRetracement:s.prototype._oneColorForAllLines(),LineToolFibSpeedResistanceFan:s.prototype._oneColorForAllLines(),LineToolTrendBasedFibTime:s.prototype._oneColorForAllLines(),LineToolFibWedge:s.prototype._oneColorForAllLines(),LineToolGannComplex:s.prototype._oneColorForAllLines(),LineToolGannFan:s.prototype._oneColorForAllLines(),LineToolPitchfan:s.prototype._oneColorForAllLines(),LineToolPitchfork:s.prototype._oneColorForAllLines(),LineToolSchiffPitchfork2:s.prototype._oneColorForAllLines(),LineToolSchiffPitchfork:s.prototype._oneColorForAllLines(),LineToolInsidePitchfork:s.prototype._oneColorForAllLines(),LineToolTrendBasedFibExtension:s.prototype._oneColorForAllLines()}},t.exports=s}).call(e,i(1),i(26),i(63))},function(t,e,i){"use strict";var o=i(287).UndoHistory,n=i(389),s=i(390),r=i(391),a=i(397),l=i(398),h=l.ChartApiInterface,c=l.HandlerInfo;JSServer.ChartApi=function(t){this._notificationHandlers=[],this._sessions=[],this.studyCounter=0,this._connected=!1,this._enabled=!1,this._studyEngine=new r(t),this._callbacks={},this._symbolIdCache={},this._seriesIdCache={},this._recentSeriesId={},this._enableLogging=!1,this._enabledMoreBarsRequest=!0,this._serverTimeOffset=0,this._autosaveTimeoutSeconds=5;var e=this;this._studyEngine.on("configuration_received",function(){e._fireEvent("configuration_received")}),this._studyEngine.on("realtime_tick",function(t){var i={time:t.value[0]/1e3,open:t.value[1],high:t.value[2],low:t.value[3],close:t.value[4],volume:t.value[5]};e._fireEvent("realtime_tick",i,!0)}),this._autosavePaused=void 0,this._setupAutoSave()},JSServer.ChartApi.prototype._makeSymbolKey=function(t,e){if(!t||!e)throw"incorrect identifiers";return t+"_"+e},JSServer.ChartApi.prototype._makeSeriesKey=function(t,e){if(!t||!e)throw"incorrect identifiers";return t+"_"+e},JSServer.ChartApi.prototype.destroy=function(){this._studyEngine.destroy(),this._studyEngine=null},JSServer.ChartApi.prototype.purgeCache=function(t){this._symbolIdCache={},this._seriesIdCache={},this._recentSeriesId={},this._studyEngine.purgeCache(),this._studyEngine.purgeRangeExtensionData(),this._studyEngine.purgeDataCache()},JSServer.ChartApi.prototype.setAdditionalBarsRequestEnabled=function(t){this._enabledMoreBarsRequest=t},JSServer.ChartApi.prototype.setTimeFramesList=function(t){var e,i,o,n,r,a,l,h;for(this._timeframes=[],e=/(\d+)(\w+)/,i=0;i<t.length;++i)o=t[i],n=e.exec(o.text),r=n[2].toLowerCase(),a=parseInt(n[1]),l="y"==r?12*a+"m":a+r,h=s.Symbol.parsePeriod(o.resolution),this._timeframes.push({text:a+$.t(r,{context:"dates",count:a}),value:l,targetResolution:o.resolution,requiresIntraday:h.isIntraday})},JSServer.ChartApi.prototype._setupAutoSave=function(){var t=this,e=!1;o.undoStack().onChange().subscribe(this,function(){t._autosavePaused?e=!0:(setTimeout(t._fireEvent.bind(t,"onAutoSaveNeeded",void 0,!0),0),t._autosavePaused=setTimeout(function(){e&&t._fireEvent("onAutoSaveNeeded",void 0,!0),t._autosavePaused=void 0,e=!1},1e3*t._autosaveTimeoutSeconds))})},JSServer.ChartApi.prototype.setAutoSaveDelay=function(t){this._autosaveTimeoutSeconds=+t},JSServer.ChartApi.prototype.defaultWatchlistSymbols=function(){return this._watchlistSettings.default_symbols},JSServer.ChartApi.prototype.availableTimeFrames=function(t,e){if(!t)return[];var i=this._timeframes.filter(function(e){return!(e.requiresIntraday&&!t.has_intraday)&&!(t.supported_resolutions&&t.supported_resolutions.indexOf(e.targetResolution)<0)});return i},JSServer.ChartApi.prototype.defaultResolutions=function(){var t=this._studyEngine.supportedResolutions();return t||{1:1,3:1,5:1,15:1,30:1,45:1,60:1,120:1,180:1,240:1,D:1,W:1,M:1}},JSServer.ChartApi.prototype.supportedSymbolsTypes=function(){return this._studyEngine.supportedSymbolsTypes()},JSServer.ChartApi.prototype.supportedExchangesList=function(){return this._studyEngine.supportedExchangesList()},JSServer.ChartApi.prototype.futuresRegex=function(){return this._studyEngine.futuresRegex()},JSServer.ChartApi.prototype.start=function(){this._enabled=!0,this._fireEvent("start_enabled")},JSServer.ChartApi.prototype._logMessage=function(t){this._enableLogging&&console.log(t)},JSServer.ChartApi.prototype.unsubscribe=function(t,e){var i,o=this._callbacks[t];o&&(i=o.splice(o.indexOf(e),1))},JSServer.ChartApi.prototype.on=function(t,e){return this._callbacks.hasOwnProperty(t)||(this._callbacks[t]=[]),this._callbacks[t].push(e),this},JSServer.ChartApi.prototype._fireEvent=function(t,e,i){var o,n;if(this._callbacks.hasOwnProperty(t))for(o=this._callbacks[t].slice(0),i||(this._callbacks[t]=[]),n=0;n<o.length;++n)o[n](e)},JSServer.ChartApi.prototype.chartCreateSession=function(t,e){},JSServer.ChartApi.prototype.chartDeleteSession=function(t){},JSServer.ChartApi.prototype.createSession=function(t,e){TradingView.ChartapiMessagerInstances[t]=new a(this,t),this._sessions[t]=e,this._notificationHandlers[t]=e,this.connected()&&e.onMessage({method:"connected",params:[]})},JSServer.ChartApi.prototype.removeSession=function(t){delete this._sessions[t],delete this._notificationHandlers[t],this.chartDeleteSession(t),this._studyEngine.stopSources(t)},JSServer.ChartApi.prototype.connected=function(){return this._connected},JSServer.ChartApi.prototype._getHost=function(t){return t},JSServer.ChartApi.prototype._isSafari5=function(){return!!navigator.appVersion.match(/\/5\.[^\/]*?Safari\//)},JSServer.ChartApi.prototype._isIE9=function(){return!!navigator.appVersion.match(/MSIE 9/)},JSServer.ChartApi.prototype._isIOS5=function(){return!!navigator.appVersion.match(/iPad, CPU 5/)},JSServer.ChartApi.prototype._getPort=function(t){var e=8081;return this._isSafari5()||this._isIE9()?e:t},JSServer.ChartApi.prototype.connect=function(){if(!this._enabled){var t=this;return void this.on("start_enabled",function(){t.connect()})}this.connected()||(this._connected=!0,this.sessionid="dummy session id",this._notifySessions({method:"connected",params:[]}))},JSServer.ChartApi.prototype.disconnect=function(){throw"This method is not implemented"},JSServer.ChartApi.prototype.switchTimezone=function(t,e){if(TradingView.ChartapiMessagerInstances[t].setTimezone(e),this._recentSeriesId[t]){this._studyEngine.purgeEndOfDataFlags(t,this._recentSeriesId[t]);var i=this;this._doWhenSeriesSymbolIdIsReady(t,this._recentSeriesId[t],function(e){var o=i._seriesIdCache[i._makeSeriesKey(t,i._recentSeriesId[t])].resolution;i._studyEngine.setDatafeedRequestsAllowed(!1),i._studyEngine.recreateSources(e.name,o,t),i._studyEngine.setDatafeedRequestsAllowed(!0),i._doWhenSeriesDataReceived(function(){var o=i._seriesIdCache[i._makeSeriesKey(t,i._recentSeriesId[t])].resolution,n=chartWidget.model().mainSeries().data().last();i._studyEngine.rebuildExtrapolatedData(t,e.name,o,e.info,1e3*n.value[0])})})}},JSServer.ChartApi.prototype.receiveLocalResponse=function(t){this._logMessage("< "+t.method),this._dispathNotification(t),this._fireEvent("message_"+t.method,void 0,!0)},JSServer.ChartApi.prototype.getMarks=function(t,e,i,o,n){this._studyEngine.getMarks(t,e,i,o,n)},JSServer.ChartApi.prototype.getTimescaleMarks=function(t,e,i,o,n){this._studyEngine.getTimescaleMarks(t,e,i,o,n)},JSServer.ChartApi.prototype.resolveSymbol=function(t,e,i,o,n){function s(e,o){TradingView.ChartapiMessagerInstances[t].onSymbolError(e,o),TradingView.ChartapiMessagerInstances[t].onSeriesClearData(0,""),r._symbolIdCache[r._makeSymbolKey(t,e)]={name:i,status:"invalid_symbol"},r._fireEvent(r._makeSymbolKey(t,e)+"_resolve_fail"),r._fireEvent("resolve_fail",{session:t,symbolId:e},!0)}this._notificationHandlers[t][e]=new c(o,e),this._symbolIdCache[this._makeSymbolKey(t,e)]=null;var r=this;this._studyEngine.resolveSymbol(i,function(o){return o.errmsg?void s(e,o.errmsg):(r._symbolIdCache[r._makeSymbolKey(t,e)]={name:i,info:o,status:"ok"},r._fireEvent(r._makeSymbolKey(t,e)+"_resolved",o),r._fireEvent("symbol_resolved",{symbolInfo:o,symbolId:e,session:t},!0),void TradingView.ChartapiMessagerInstances[t].onSymbolResolved(e,o))},function(t){s(e,t)})},JSServer.ChartApi.prototype._doWhenSymbolIdIsReady=function(t,e,i){function o(){return{name:s._symbolIdCache[s._makeSymbolKey(t,e)].name,info:s._symbolIdCache[s._makeSymbolKey(t,e)].info}}function n(){r&&(i(o()),r=!1,s.unsubscribe(s._makeSymbolKey(t,e)+"_resolved",n),s.unsubscribe(s._makeSymbolKey(t,e)+"_resolve_fail",n))}var s=this,r=!0;this._symbolIdCache[this._makeSymbolKey(t,e)]?n():(this.on(this._makeSymbolKey(t,e)+"_resolved",n),this.on(this._makeSymbolKey(t,e)+"_resolve_fail",n))},JSServer.ChartApi.prototype._doWhenSeriesDataReceived=function(t){function e(){chartWidget.model().mainSeries().onCompleted().unsubscribe(null,e),t()}chartWidget.model().mainSeries().onCompleted().subscribe(null,e)},JSServer.ChartApi.prototype._doWhenSeriesSymbolIdIsReady=function(t,e,i,o){function n(){var e=h._symbolIdCache[h._makeSymbolKey(t,c)];return{name:e.name,info:e.info}}function s(){i(n())}function r(){h.unsubscribe("symbol_resolved",l),h.unsubscribe("resolve_fail",a)}function a(e){e.symbolId==c&&e.session==t&&(r(),o&&o())}function l(e){e.symbolId==c&&e.session==t&&(r(),s())}var h=this,c=this._seriesIdCache[t+"_"+e].symbolId;this._symbolIdCache[this._makeSymbolKey(t,c)]?s():(this.on("symbol_resolved",l),
this.on("resolve_fail",a))},JSServer.ChartApi.prototype.createSeries=function(t,e,i,o,n,s,r){i=i||"",this._notificationHandlers[t][e]=new c(r,e),this._recentSeriesId[t]=e,TradingView.ChartapiMessagerInstances[t].setResolution(n);var a=this;this._seriesIdCache[t+"_"+e]={symbolId:o,resolution:n,turnaround:i},this._studyEngine.updateSeriesTurnaround(t,e,i),this._doWhenSeriesSymbolIdIsReady(t,e,function(o){a._studyEngine.createSeries(o.name,n,t,e,i)})},JSServer.ChartApi.prototype.removeSeries=function(t,e,i){this._notificationHandlers[t][e]=new c(i,e),this._studyEngine.removeSeries(t,e)},JSServer.ChartApi.prototype.setVisibleTimeRange=function(t,e,i,o){function n(){s=chartWidget.model().mainSeries().data();var n=[s.timeToBarIndex(e,TradingView.SEARCH_FROM_LEFT),s.timeToBarIndex(i,TradingView.SEARCH_FROM_RIGHT)];TradingView.ChartapiMessagerInstances[t].onSeriesTimeframeUpdate(a,l._seriesIdCache[t+"_"+a].turnaround,n[0],n[1],!0),o&&o()}var s=chartWidget.model().mainSeries().data(),r=!!s.timeToBarIndex(e,TradingView.SEARCH_FROM_LEFT),a=this._recentSeriesId[t],l=this;r?n():(this._studyEngine.ensureExtendedTo(a,t,e),this._doWhenSeriesDataReceived(n))},JSServer.ChartApi.prototype._exactBarsCountOfTimeFrame=function(t,e){var i,o,s=chartWidget.model().mainSeries().bars(),r=chartWidget.model().mainSeries().symbolInfo().session,a=s._valueAt(s.size()-1)[0],l=n.alignPeriodsBack(r,t.resolution,t.interval,1,1e3*a),h=s.size();for(l/=1e3,i=0,i=0;i<h&&(o=s._valueAt(i)[0],!(o>l));++i);return h-i},JSServer.ChartApi.prototype.modifySeries=function(t,e,i,o,n,r,a){var l,h;i=i||"",l=this._seriesIdCache[t+"_"+e]?this._seriesIdCache[t+"_"+e].resolution:void 0,TradingView.ChartapiMessagerInstances[t].setResolution(s.Symbol.parsePeriod(n).pureResolution),h=this,this._notificationHandlers[t][e]=new c(function(a){var c,d,p,u,_,f;"series_completed"==a.method&&(c=s.Symbol.parsePeriod(l),d=s.Symbol.parsePeriod(n),d.range&&c.range!=d.range&&(p=chartWidget.model().mainSeries().bars().size(),u=h._exactBarsCountOfTimeFrame(d.range,h._symbolIdCache[h._makeSymbolKey(t,o)].info),_=Math.max(0,p-1-u),f=Math.max(_,p-1),TradingView.ChartapiMessagerInstances[t].onSeriesTimeframeUpdate(e,i,_,f))),r(a)},e),this._recentSeriesId[t]=e,this._studyEngine.updateSeriesTurnaround(t,e,i),a&&(this._seriesIdCache[this._makeSeriesKey(t,a)]=null),this._seriesIdCache[this._makeSymbolKey(t,e)]={symbolId:o,resolution:n,turnaround:i},this._doWhenSeriesSymbolIdIsReady(t,e,function(i){h._studyEngine.purgeEndOfDataFlags(t,e),h._studyEngine.purgeRangeExtensionData(),h._studyEngine.purgeDataCache(),h._studyEngine.recreateSources(i.name,n,t,!0)})},JSServer.ChartApi.prototype.requestMoreData=function(t,e,i,o){this._enabledMoreBarsRequest&&(this._notificationHandlers[t][e]=new c(o,e),this._studyEngine.extendSeriesRange(e,t,i))},JSServer.ChartApi.prototype.setStudiesAccessController=function(t){this.studiesAccessController=t},JSServer.ChartApi.prototype.setWatchlistSettings=function(t){this._watchlistSettings=t},JSServer.ChartApi.prototype.allStudiesMetadata=function(){return this._studyEngine.studiesMetadata()},JSServer.ChartApi.prototype.requestMetadata=function(t,e,i){this._notificationHandlers[t][e]=new c(i,e);var o=this.studiesAccessController.getEnabledTools();TradingView.ChartapiMessagerInstances[t].onRequestMetadata(e,o)},JSServer.ChartApi.prototype.isCanCreateStudy=function(){return this.studyCounter<TradingView.STUDY_COUNT_LIMIT},JSServer.ChartApi.prototype.createStudy=function(t,e,i,o,n,s,r){var a,l,h;if(!this.isCanCreateStudy())throw"Exceeded the limit of studies";a=this,i=i||"",this._notificationHandlers[t][e]=new c(r,e),l=this._seriesIdCache[this._makeSeriesKey(t,o)].symbolId,h=this._seriesIdCache[this._makeSeriesKey(t,o)].resolution,this._doWhenSymbolIdIsReady(t,l,function(o){a._studyEngine.createStudy(o.name,h,t,e,i,n,s),a.studyCounter++})},JSServer.ChartApi.prototype.removeStudy=function(t,e){this._notificationHandlers[t][e]=null,this._studyEngine.removeStudy(t,e),this.studyCounter--},JSServer.ChartApi.prototype.modifyStudy=function(t,e,i,o,n){i=i||"",this._notificationHandlers[t][e]=new c(n,e);[t,e,i].concat(o);this._studyEngine.recomputeStudy(e,o,t,i)},JSServer.ChartApi.prototype.createPointset=function(t,e,i,o,n,s,r){i=i||"",this._notificationHandlers[t][e]=new c(r,e);var a=this;this._doWhenSymbolIdIsReady(t,o,function(i){a._studyEngine.createPointset(t,e,i.info.full_name,i.info,n,s)})},JSServer.ChartApi.prototype.modifyPointset=function(t,e,i,o,n){throw"This call is not implemented"},JSServer.ChartApi.prototype.removePointset=function(t,e,i){this._notificationHandlers[t][e]=null,this._studyEngine.removePointset(e)},JSServer.ChartApi.prototype.requestMoreTickmarks=function(t,e,i,o){this._notificationHandlers[t][e]=new c(o,e);var n=this;this._doWhenSeriesSymbolIdIsReady(t,e,function(o){var s=n._seriesIdCache[n._makeSeriesKey(t,e)].resolution;n._studyEngine.onMoreTickmarksRequested(t,o.name,o.info,s,i)})},JSServer.ChartApi.prototype.requestFirstBarTime=function(t,e,i,o){this._notificationHandlers[t][e]=new c(o,e)},JSServer.ChartApi.prototype._invokeHandler=function(t,e){t&&t(e)},JSServer.ChartApi.prototype._sendRequest=function(t,e){throw"This method is not implemented"},JSServer.ChartApi.prototype._onMessage=function(t){throw"This method is not implemented"},JSServer.ChartApi.prototype._convertTimescaleResponse=function(t){var e,i=t.marks;for(e=0;e<i.length;++e)i[e]={span:i[e][0],time:i[e][1],index:i[e][2]};return t},JSServer.ChartApi.prototype._dispathNotification=function(t){var e,i,o,n,s,r,a,l,h,c,d=t.params.shift();if(this._notificationHandlers[d])switch(t.method){case"timescale_update":e=t.params[0],i=t.params[1],o=this._convertTimescaleResponse(i),o.clear=0===i.changes.length&&0===i.marks.length,this._notificationHandlers[d].onMessage({method:"timescale_update",params:o});for(n in e)s={},s.customId=n,s.plots=e[n].series,e[n].ns&&(s.nonseries=e[n].ns),s.turnaround=e[n].turnaround,r={method:"data_update",params:s},this._invokeNotificationHandler(d,n,r);break;case"tickmark_update":o=this._convertTimescaleResponse(t.params[0]),o.changes=[],this._notificationHandlers[d].onMessage({method:"timescale_update",params:o});break;case"data_update":for(n in t.params[0]){a=t.params[0][n],s={},s.customId=n,s.plots=a.series?a.series:a.plots,s.turnaround=a.turnaround,"s"in a&&"ns"in a&&(s.plots=a.s,s.nonseries=a.ns);for(l in s.plots)for(h in s.plots[l].value)1e100===s.plots[l].value[h]&&(s.plots[l].value[h]=void 0);r={method:"data_update",params:s},this._invokeNotificationHandler(d,n,r)}break;case"index_update":for(n in t.params[0])r={method:"index_update",params:t.params[0][n]},this._invokeNotificationHandler(d,n,r);break;case"critical_error":TradingView.logNormal(new Date+" critical_error session:"+this.sessionid+" reason:"+t.params[0]),this._notificationHandlers[d].onMessage({method:"critical_error",params:t.params});break;case"quote_symbol_data":case"quote_list_fields":case"depth_symbol_error":case"depth_symbol_success":case"dd":case"dpu":case"depth_bar_last_value":this._notificationHandlers[d].onMessage({method:t.method,params:t.params});break;default:c=t.params[0],this._invokeNotificationHandler(d,c,t)}},JSServer.ChartApi.prototype._invokeNotificationHandler=function(t,e,i){if(void 0!==e){var o=this._notificationHandlers[t][e];void 0!==o&&o&&this._invokeHandler(o.handler,i),"series_deleted"!=i.method&&"study_deleted"!=i.method||delete this._notificationHandlers[t][e]}},JSServer.ChartApi.prototype.searchSymbols=function(t,e,i,o,n){0===t.length&&0===e.length&&0===i.length&&n([]),this._studyEngine.searchSymbols(t,e,i,n)},JSServer.ChartApi.prototype._notifySessions=function(t){var e,i;for(e in this._sessions){if(!this._sessions.hasOwnProperty(e))return;i=this._sessions[e],"function"==typeof i.onMessage&&i.onMessage(t)}},JSServer.ChartApi.prototype.unpack=function(t){throw"This method is not implemented"},JSServer.ChartApi.prototype.reconnectTimeout=function(t){throw"This method is not implemented"},JSServer.ChartApi.prototype.quoteCreateSession=function(t){return this._studyEngine.quoteCreateSession(t)},JSServer.ChartApi.prototype.quoteDeleteSession=function(t){return this._studyEngine.quoteDeleteSession(t)},JSServer.ChartApi.prototype.quoteSetFields=function(t,e){return this._studyEngine.quoteSetFields(t,e)},JSServer.ChartApi.prototype.quoteAddSymbols=function(t,e){return this._studyEngine.quoteAddSymbols(t,e)},JSServer.ChartApi.prototype.quoteRemoveSymbols=function(t,e){return this._studyEngine.quoteRemoveSymbols(t,e)},JSServer.ChartApi.prototype.quoteFastSymbols=function(t,e){return this._studyEngine.quoteFastSymbols(t,e)},JSServer.ChartApi.prototype.quoteHibernateAll=function(t){return this._studyEngine.quoteHibernateAll(t)},JSServer.ChartApi.prototype.depthCreateSession=function(t,e,i){},JSServer.ChartApi.prototype.depthDeleteSession=function(t){},JSServer.ChartApi.prototype.depthSetSymbol=function(t,e){},JSServer.ChartApi.prototype.depthClearSymbol=function(t){},JSServer.ChartApi.prototype.depthSetScale=function(t,e){},JSServer.ChartApi.prototype.createStudiesAccessController=function(t,e,i){return t?new this.StudiesAccessController(this._studyEngine,JSON.parse(t)):new this.ObsoleteStudiesAccessController(this._studyEngine,e&&JSON.parse(e),i&&JSON.parse(i))},JSServer.ChartApi.prototype.StudiesAccessController=function(t,e){this._studyEngine=t,this._studiesAccess=e},JSServer.ChartApi.prototype.StudiesAccessController.prototype._findTool=function(t){var e,i,o=null;for(e=0;e<this._studiesAccess.tools.length;++e)if(i=this._studiesAccess.tools[e],i.name==t||i==t){o=i;break}return o},JSServer.ChartApi.prototype.StudiesAccessController.prototype.getEnabledTools=function(){return this._studyEngine.studiesMetadata().filter(function(t){var e=this._findTool(t.description);return"black"==this._studiesAccess.type?!e||e.grayed:!!e},this)},JSServer.ChartApi.prototype.StudiesAccessController.prototype.isToolGrayed=function(t){var e=this._findTool(t);return e&&e.grayed},JSServer.ChartApi.prototype.ObsoleteStudiesAccessController=function(t,e,i){this._studyEngine=t,this._enabledStudiesList=e,this._disabledStudiesList=i},JSServer.ChartApi.prototype.ObsoleteStudiesAccessController.prototype.getEnabledTools=function(){var t=this._studyEngine.studiesMetadata();return this._enabledStudiesList.length>0?t=t.filter(function(t){return t.is_hidden_study||this._enabledStudiesList.indexOf(t.description)>=0},this):this._disabledStudiesList.length>0&&(t=t.filter(function(t){return t.is_hidden_study||this._disabledStudiesList.indexOf(t.description)==-1},this)),t},JSServer.ChartApi.prototype.ObsoleteStudiesAccessController.prototype.isToolGrayed=function(){return!1},JSServer.ChartApi.prototype.serverTimeOffset=function(){return this._studyEngine.serverTimeOffset()},JSServer.ChartApi.prototype.alignTimePoint=function(t,e,i){return this._studyEngine.alignTimePoint(t,e,i)},JSServer.ChartApi.prototype.disconnectCount=function(){return 0},TradingView.requireFullInterfaceImplementation(JSServer.ChartApi,"JSServer.ChartApi",h,"ChartApiInterface"),t.exports=JSServer.ChartApi},function(t,e,i){(function(e){"use strict";var o=function(){function t(t,e,i,n){return""===t?new h(60*e,i):"S"===t?new h(e,i):new c(i,n,e,o(t,i))}function o(t,e){switch(t){case"D":return new S(e);case"W":return new T(e);case"M":return new C(e)}return console.error("unknown dwm resolution: "+t),null}function n(t,e,i,o,n){var s,r,a,l,h,c,d,p=(new A).init("UTC",t),u=""!==e;return u?(r=i*F[e],s=F.D):(r=60*i*1e3,s=60*p.spec.findSession(0,0)._length*1e3),a=s/r,l=u?7:7-p.spec.weekEndsCount(),h=l*a,o<h?(c=o/a,n-c*F.D):(d=o/h,n-d*F.W)}function s(t,e,i){if("number"!=typeof i||"number"!=typeof e||isNaN(i)||isNaN(e))throw"Cannot extrapolate from "+e+" to "+i;return a(t,e,function(t,e){return e>i})}function r(t,e,i){return a(t,e,function(t,e){return t.length>=i})}function a(t,e,i){var o,n,s,r,a,l=e;for(t.moveTo(l),o=[],n=0,s=0;!i(o,l);){if(n>5)throw console.trace(["0x10",new Date(e),"->",new Date(l)]),"Internal error 0x10 while extrapolating.";if(r=t.indexOfBar(l),r===B)l=t.startOfBar(0);else if(r===O)l=t.startOfBar(O);else{if(a=t.startOfBar(r),a!=e){if(s&&s==a)throw console.trace(["0x11",new Date(e),"->",new Date(a)]),"Internal error 0x11 while extrapolating.";s=a,n=0,o.push(a)}l=t.startOfBar(r+1)}t.moveTo(l),n++}return o}function l(t){if(isNaN(t))return NaN;var e=this.indexOfBar(t);return e===O&&(this.moveTo(t),e=this.indexOfBar(t)),e<0?NaN:this.startOfBar(e)}function h(t,e){this.period=t,this.session=e,this.sessionStart=Number.MIN_VALUE,this.sessionEnd=Number.MIN_VALUE}function c(t,e,i,o){this.period=i,this.sessionTgt=t,this.sessionSrc=e||t,this.builder=o,this.periodStart=-Number.MAX_VALUE,this.periodEnd=-Number.MAX_VALUE,this.periodLastBarStart=-Number.MAX_VALUE}function d(t,e,i){var o=6e4,n=new Date(e.valueOf()+t*o),s=i.offset_loc(e)/o,r=i.offset_loc(n)/o,a=s-r,l=t+a;return l}function p(t,e,i){var o=N.clone(i);return e.alignToSessionStart(o,t),N.cal_to_utc(t,o)}function u(t){return t.firstDayOfWeek}function _(t,e){var i=N.get_day_of_week(e)-u(t);return i<0?i+7:i}function f(t,e){var i=e+u(t);return i>N.SATURDAY?i-N.SATURDAY:i}function g(t,e){var i=N.get_day_of_year(e)-1,o=_(t,e)-i%7;return 0===o?x(i/7):(o>=0&&(o-=7),x((o+i)/7))}function m(t,e,i){var o,n=0;for(o=e;o<i;++o)n+=t.isWeekEnd(f(t,o))?1:0;return n}function v(t,e){var i=new Date(Date.UTC(e,11,31,23,59)),o=N.days_per_year(e)-y(t,i);return N.get_day_of_week(i)!==N.SUNDAY&&N.get_day_of_week(i)!==N.SATURDAY||o--,o}function y(t,e){var i,o,n=N.get_day_of_year(e)-1,s=_(t,e),r=s-n%7;return r<0&&(r+=7),i=0,n<7-r?i+=m(t,r,s):(o=0===r?0:m(t,r,7),i+=m(t,0,s)+o),i+g(t,e)*t.weekEndsCount()}function w(){}function b(t){this.sessionsSpec=t}function S(t){this.session=t}function T(t){this.session=t}function C(t){this.session=t}function x(t){return 0|t}function P(t){return t%100+60*x(t/100)}function L(t,e,i){this._dayOfWeek=t,this._start=e,this._length=i}function k(t,e){return t.compareTo(e)}function E(t){function e(t){var e,i,o,s=t.split(";");return s.length>2?(console.error("Only one `first day` specification expected @ session "+t),t):1==s.length?t:(e=1,i=s[0].indexOf("-")>=0,o=i?NaN:parseInt(s[0]),isNaN(o)&&(e=0,o=parseInt(s[1])),o<N.SUNDAY||o>N.SATURDAY?(console.error("Unexpected day index @ session: "+t+"; day index "+o),t):(n.firstDayOfWeek=o,s[e]))}var i,o,n=this;t=t||"0000-0000",this.entries=[],this.firstDayOfWeek=N.MONDAY,"24x7"===t.toLowerCase()?D.forEach(function(t){this.addSessionEntry(t,0,0)},this):(t=e(t),i=!1,o={},t.split("|").forEach(function(t){var e,n,s=t.split(":");1!==s.length&&2!==s.length&&console.error("bad session section: "+t),e=1===s.length,e&&(i&&console.error("duplicated default section: "+t),i=!0),n=e?$:I(s[1]),n.forEach(function(t){e&&o[t]||(o[t]=s[0])},this)},this),D.forEach(function(e){var i=o[e];i&&i.split(",").forEach(function(i){var o,n,s=i.split("-");2!==s.length&&(console.error("bad sessions spec: "+t),s=["0000","0000"]),o=parseInt(s[0]),n=parseInt(s[1]),this.addSessionEntry(e,P(o),P(n))},this)},this)),this.entries.sort(k)}function I(t){var e,i,o=[];for(e=0;e<t.length;e++)i=t.charAt(e)-"0",-1===o.indexOf(i)&&o.push(i);return o}function A(){}function V(t,e,i){var o,n,s,r,a=t.length;if(0===a)return-1;for(o=0,n=a-1,s=x((o+n)/2);;){if(r=i(t[s],e),0===r||r>0){if(n=s-1,n<o)return s}else if(o=s+1,n<o)return s<a-1?s+1:-1;s=x((o+n)/2)}}function M(t,i){var o=("undefined"!=typeof window?window:e,N.utc_to_cal(i.timezone,+t)),n=N.get_day_of_week(o),s=N.get_minutes_from_midnight(o),r=i.spec.findSession(n,s);return r.isOvernight()&&s>r._start+r._length&&n==r._dayOfWeek-1&&(n++,s-=1440),n==r._dayOfWeek&&s>=r._start&&s<r._start+r._length}var $,D,B=-1,O=-2,R=-3,z="undefined"!=typeof window?window:e,N=z.PineJsCalendar?z.PineJsCalendar:i(37),F={S:1e3,D:864e5,W:6048e5,M:2592e6};return h.prototype.alignTime=l,h.prototype.indexOfBar=function(t){return t<this.sessionStart?B:t>=this.sessionEnd?O:x(N.time_seconds_diff(t,this.sessionStart)/this.period)},h.prototype.startOfBar=function(t){if(t===O)return this.sessionEnd;if(t<0)throw"Negative offset is not supported";return this.sessionStart+N.time_seconds(this.period*t)},h.prototype.isLastBar=function(t,e){var i=this.sessionStart+N.time_seconds(this.period*(t+1)-1);return e>=i},h.prototype.moveTo=function(t){var e=this.session.timezone,i=N.utc_to_cal(e,t),o=this.session.spec,n=o.alignToSessionStart(i,this.session.timezone);this.sessionStart=N.cal_to_utc(e,i),this.sessionEnd=this.sessionStart+N.time_minutes(n)},c.prototype.alignTime=l,c.prototype.tradingDayToSessionStart=function(t){return this.moveTo(t),this.startOfBar(0)},c.prototype.indexOfBar=function(t){return t<this.periodStart?B:t>=this.periodEnd?O:0},c.prototype.startOfBar=function(t){if(t===O||t>0)return this.periodEnd;if(t===B)throw"PRE_SESSION is not supported";return this.periodStart},c.prototype.isLastBar=function(t,e){return e>=this.periodLastBarStart},c.prototype.moveTo=function(t){var e,i,o,n,s,r,a,l,h=N.utc_to_cal(this.sessionSrc.timezone,t);h=this.sessionSrc.spec.correctTradingDay(h,this.sessionSrc.timezone),e=this.sessionTgt.timezone,i=this.builder.indexOfPeriod(h,e),o=x(i/this.period)*this.period,n=N.get_year(h),s=this.sessionTgt.spec,r=this.builder.startOfPeriod(e,o,n),this.periodStart=p(e,s,r),a=o+this.period,l=this.builder.startOfPeriod(e,a,n),this.periodEnd=p(e,s,l)},c.prototype.moveToPrevWorkDay=function(t,e){for(;t.isWeekEnd(N.get_day_of_week(e));)N.add_date(e,-1)},w.prototype.indexOfPeriod=function(t){return N.get_day_of_year(t)-1},w.prototype.startOfPeriod=function(t,e,i){var o=N.get_cal(t,i,N.JANUARY,1),n=N.add_days_considering_dst(t,o,e);return N.utc_to_cal(t,+n)},b.prototype.uber=new w,b.prototype.indexOfPeriod=function(t){var e=this.uber.indexOfPeriod(t);return e-y(this.sessionsSpec,t)},b.prototype.startOfPeriod=function(t,e,i){function o(t,e){this.weekEnds=m(t,e,7),this.calendarDays=7-e,this.businessDays=this.calendarDays-this.weekEnds}function n(t,e){var i,o=0;for(i=t;i<7&&(r.sessionsSpec.isWeekEnd(f(r.sessionsSpec,i))||!(--e<0));++i)o++;return o}function s(t,e,i){var o,n,s,a,l,h,c=0,d=i%(7-r.sessionsSpec.weekEndsCount());for(o=0,n=d-(0===t?0:e.businessDays);o<7&&n>0;++o)s=r.sessionsSpec.isWeekEnd(f(r.sessionsSpec,o)),c+=s?1:0,n-=s?0:1;return a=e.weekEnds+c,l=x((i-e.businessDays)/(7-r.sessionsSpec.weekEndsCount())),h=a+r.sessionsSpec.weekEndsCount()*l,i+h}var r,a,l,h,c,d=v(this.sessionsSpec,i);return e>=d&&(i++,e=0),r=this,a=new Date(Date.UTC(i,N.JANUARY,1)),l=_(this.sessionsSpec,a),h=new o(this.sessionsSpec,l),c=e<h.businessDays?n(l,e):s(l,h,e),this.uber.startOfPeriod(t,c,i)},S.prototype.indexOfPeriod=function(t){return this.builder().indexOfPeriod(t)},S.prototype.startOfPeriod=function(t,e,i){return this.builder().startOfPeriod(t,e,i)},S.prototype.builder=function(){return this._builder||(this._builder=this.session.spec.hasWeekEnds()?new b(this.session.spec):new w),this._builder},T.prototype.indexOfPeriod=function(t,e){var i=g(this.session.spec,t);return 0===i&&t<this.startOfPeriod(e,0,N.get_year(t))&&(i=-1),i},T.prototype.startOfPeriod=function(t,e,i){var o,n,s=new Date(Date.UTC(i,N.JANUARY,1)),r=_(this.session.spec,s),a=0===r?7*e:7*(e+1)-r,l=N.get_days_per_year(s);return a>l?this.startOfPeriod(t,0,i+x(a/l)):(o=N.get_cal(t,i,N.JANUARY,1),n=N.add_days_considering_dst(t,o,a),N.utc_to_cal(t,+n))},C.prototype.indexOfPeriod=function(t){return N.get_month(t)},C.prototype.startOfPeriod=function(t,e,i){var o,n,s,r;return e<0?(o=x((-e+11)/12),i-=o,e+=12*o):e>N.DECEMBER&&(i++,e=N.JANUARY),n=N.get_cal_utc(i,e,1),s=_(this.session.spec,n),s>4&&(r=7-s,N.add_date(n,r)),n},L.prototype.start=function(){return this._start<0?this._start+N.minutesPerDay:this._start},L.prototype.isOvernight=function(){return this._start<0},L.prototype.dayOfWeek=function(){return this._dayOfWeek},L.prototype.length=function(){return this._length},L.prototype.weight=function(){return this._dayOfWeek*N.minutesPerDay+this._start},L.prototype.compareTo=function(t){var e=this.weight(),i=e+this._length,o=t.weight();return e<=o&&o<i?0:e>o?1:-1},$=[N.MONDAY,N.TUESDAY,N.WEDNESDAY,N.THURSDAY,N.FRIDAY],D=[N.SUNDAY,N.MONDAY,N.TUESDAY,N.WEDNESDAY,N.THURSDAY,N.FRIDAY,N.SATURDAY],E.prototype.addSessionEntry=function(t,e,i){i<=e&&0!==e&&(e-=N.minutesPerDay);var o=i==e?N.minutesPerDay:i-e;this.entries.push(new L(t,e,o))},E.prototype.isWeekEnd=function(t){var e=V(this.entries,new L(t,0,0),function(t,e){return t.dayOfWeek()-e.dayOfWeek()});return e<0||this.entries[e].dayOfWeek()!=t},E.prototype.hasWeekEnds=function(){return this.weekEndsCount()>0},E.prototype.weekEndsCount=function(){if(void 0===this._weekEndsCount){var t=[];this.entries.forEach(function(e){t[e.dayOfWeek()]=1},this),this._weekEndsCount=7-t.reduce(function(t,e){return t+(e||0)},0)}return this._weekEndsCount},E.prototype.indexOfSession=function(t,e){var i=V(this.entries,new L(t,e,0),k);return-1===i?0:i},E.prototype.findSession=function(t,e){return this.entries[this.indexOfSession(t,e)]},E.prototype.correctTradingDay=function(t,e){var i=N.get_day_of_week(t),o=60*N.get_hours(t)+N.get_minutes(t),n=this.findSession(i,o),s=n.dayOfWeek(),r=(s-i+7)%7;return 0!==r?N.add_days_considering_dst(e,t,r):t},E.prototype.alignToSessionStart=function(t,e){var i,o=N.get_day_of_week(t),n=N.get_minutes_from_midnight(t),s=this.findSession(o,n),r=s.dayOfWeek(),a=s.isOvernight(),l=(r-o+7)%7-(a?1:0);return 0!==l&&N.add_date(t,l),i=s.start(),N.set_hms(t,x(i/60),i%60,0,0),d(s.length(),t,e)},A.prototype.init=function(t,e){return this.timezone="string"==typeof t?N.get_timezone(t):t,this.spec=new E(e),this},{PRE_SESSION:B,POST_SESSION:O,LASTBAR_SESSION:R,newBarBuilder:t,Session:A,alignPeriodsBack:n,extrapolateBarsFrontByCount:r,extrapolateBarsFrontToTime:s,lower_bound:V,isTradingNow:M,numberOfFullWeeks:g,numberOfWeekEndsSinceYearStart:y,BusinessDaysBuilder:b,alignExchangeTimeToSessionStartAndReturnUTC:p}}();t.exports=o}).call(e,function(){return this}())},function(t,e,i){(function(e){"use strict";var o=function(){function t(t,e,i,o,n){var s,r=n,a=0;if(isNaN(t.get(e-1)))return{index:NaN,value:NaN};for(s=0;s<e;++s)o(t.get(s),r)&&(a=s,r=t.get(s));return{index:a,value:r}}function o(t,e){return 100*t/e}function n(t,e,i,o,n){var s,r,a;this._areaRight=t,this._areaLeft=e,this._pivotType=i,this._series=o,this._currentIndex=n.new_var(0),this._currentValue=n.new_var(NaN),this._pivotIndex=n.new_var(-1),this._index=b.n(n),this._isNewBar=n.symbol.isNewBar,s=this._currentIndex.get(1),r=this._currentValue.get(1),a=this._pivotIndex.get(1),this._index>1&&(this._currentIndex.set(s),this._currentValue.set(r),this._pivotIndex.set(a))}function s(t,e,i){var o,s,r,a,l;this._deviation=t,o=i.new_var(b.high(i)),s=i.new_var(b.low(i)),o.get(2*e+1),s.get(2*e+1),this._pivotHigh=new n(e,e,n.HIGH,o,i),this._pivotLow=new n(e,e,n.LOW,s,i),this._lastVal=i.new_var(NaN),this._lastIndex=i.new_var(-1),this._lastType=i.new_var(),this._index=b.n(i),this._isNewBar=i.symbol.isNewBar,this._isBarClosed=i.symbol.isBarClosed,r=this._lastIndex.get(1),a=this._lastVal.get(1),l=this._lastType.get(1),this._index>1&&this.addPivot(r,a,l),this.processPivot(this._pivotHigh),this.processPivot(this._pivotLow)}function r(t){this.symbol=t,this.vars=[],this.vars_index=0,this.ctx=[],this.ctx_index=0}function a(t){this.mindepth=0,this.original=NaN,this.modified=!1,this.symbol=t}function l(t,e){this.timezone=t||"America/New_York",this.session=e||"0000-0000"}function h(t,e,i,o){this.periodBase=i,this.tickerid=t,this.period=e,this.index=-1,this.time=NaN,this.open=NaN,this.high=NaN,this.low=NaN,this.close=NaN,this.volume=NaN,this.updatetime=NaN,this.isNewBar=!1,this.isBarClosed=!1,this.session=new w.Session,this.other_sessions={},this.script=o,this.ticker=h.parseTicker(t);var n=h.parsePeriod(e);this.resolution=n.resolution,this.interval=n.interval,this.bb_cache={}}function c(t,e,i,o,n,s,a){this.body=n,this.symbols=[],this.runner=o,this.inputCallback=a,this.out=s,this.ctx=new r(this.add_sym(t,e,i)),this.init()}function d(t){this.symbols=[],this.barsets=[],this.subscription=[],this.host=t,this.isRecalculated=!1,this.start()}function p(t){d.feed=t}function u(t){this.runner=new d(t)}function _(t,e){this.info=t,this.bars=e||[],this.isBarClosed=!0}function f(t,e){this.period=t,this.generateEmptyBars=!!e}function g(){}function m(){}var v="undefined"!=typeof window?window:e,y=v.PineJsCalendar?v.PineJsCalendar:i(37),w=i(389),b={};return b.max_series_size=5e3,b.n=function(t){return t.symbol.index+1},b.nz=function(t,e){return e=e||0,isFinite(t)?t:e},b.na=function(t){return 0===arguments.length?NaN:isNaN(t)?1:0},b.isZero=function(t){return Math.abs(t)<=1e-10},b.toBool=function(t){return isFinite(t)&&!b.isZero(t)},b.eq=function(t,e){return b.isZero(t-e)},b.neq=function(t,e){return!b.eq(t,e)},b.ge=function(t,e){return b.isZero(t-e)||t>e},b.gt=function(t,e){return!b.isZero(t-e)&&t>e},b.lt=function(t,e){return!b.isZero(t-e)&&t<e},b.le=function(t,e){return b.isZero(t-e)||t<e},b.and=function(t,e){return isNaN(t)||isNaN(e)?NaN:b.isZero(t)||b.isZero(e)?0:1},b.or=function(t,e){return isNaN(t)||isNaN(e)?NaN:b.isZero(t)&&b.isZero(e)?0:1},b.not=function(t){return isNaN(t)?NaN:b.isZero(t)?1:0},b.max=Math.max,b.min=Math.min,b.pow=Math.pow,b.abs=Math.abs,b.log=Math.log,b.log10=function(t){return Math.log(t)/Math.LN10},b.sqrt=Math.sqrt,b.sign=function(t){return isNaN(t)?NaN:b.isZero(t)?0:t>0?1:-1},b.exp=Math.exp,b.sin=Math.sin,b.cos=Math.cos,b.tan=Math.tan,b.asin=Math.asin,b.acos=Math.acos,b.atan=Math.atan,b.floor=Math.floor,b.ceil=Math.ceil,b.round=Math.round,b.avg=function(t,e,i,o,n,s){var r,a;if(2===arguments.length)return(t+e)/2;for(r=0,a=0;a<arguments.length;a++)r+=arguments[a];return r/arguments.length},b.open=function(t){return t.symbol.open},b.high=function(t){return t.symbol.high},b.low=function(t){return t.symbol.low},b.close=function(t){return t.symbol.close},b.hl2=function(t){return(t.symbol.high+t.symbol.low)/2},b.hlc3=function(t){return(t.symbol.high+t.symbol.low+t.symbol.close)/3},b.ohlc4=function(t){return(t.symbol.open+t.symbol.high+t.symbol.low+t.symbol.close)/4},b.volume=function(t){return t.symbol.volume},b.time=function(t,e,i){return t.symbol.bartime(e,i)},b.period=function(t){return t.symbol.period},b.tickerid=function(t){return t.symbol.tickerid},b.ticker=function(t){return t.symbol.ticker},b.interval=function(t){return t.symbol.interval},b.isdwm=function(t){return t.symbol.isdwm()},b.isintraday=function(t){return!t.symbol.isdwm()},b.isdaily=function(t){return"D"===t.symbol.resolution},b.isweekly=function(t){return"W"===t.symbol.resolution},b.ismonthly=function(t){return"M"===t.symbol.resolution},b.year=function(t){return b.timepart(t.symbol,y.YEAR,arguments[1])},b.month=function(t){return b.timepart(t.symbol,y.MONTH,arguments[1])},b.weekofyear=function(t){return b.timepart(t.symbol,y.WEEK_OF_YEAR,arguments[1])},b.dayofmonth=function(t){return b.timepart(t.symbol,y.DAY_OF_MONTH,arguments[1])},b.dayofweek=function(t){return b.timepart(t.symbol,y.DAY_OF_WEEK,arguments[1])},b.hour=function(t){return b.timepart(t.symbol,y.HOUR_OF_DAY,arguments[1])},b.minute=function(t){return b.timepart(t.symbol,y.MINUTE,arguments[1])},b.second=function(t){return b.timepart(t.symbol,y.SECOND,arguments[1])},b.iff=function(t,e,i){return b.not(t)?i:e},b.rising=function(t,e){for(var i=1;i<e+1;++i)if(t.get(i)>t.get(0))return 0;return 1},b.falling=function(t,e){for(var i=1;i<e+1;++i)if(t.get(i)<t.get(0))return 0;return 1},b.timepart=function(t,e,i){var o=y.utc_to_cal(t.timezone,i||t.bartime());return y.get_part(o,e)},b.rsi=function(t,e){return b.isZero(e)?100:b.isZero(t)?0:100-100/(1+t/e)},b.sum=function(t,e,i){var o=i.new_var(),n=b.nz(t.get())+b.nz(o.get(1))-b.nz(t.get(e));return o.set(n),n},b.sma=function(t,e,i){var o=b.sum(t,e,i),n=b.na(t.get(e-1))?NaN:o/e;return n},b.rma=function(t,e,i){var o=b.sum(t,e,i),n=e-1,s=t.get(n),r=i.new_var(),a=r.get(1),l=t.get(),h=b.na(s)?NaN:b.na(a)?o/e:(l+a*n)/e;return r.set(h),h},b.fixnan=function(t,e){var i=e.new_var();return isNaN(t)?i.get(1):(i.set(t),t)},b.tr=function(t,e){var i,o,n;return 1==arguments.length&&(e=t,t=void 0),i=void 0!==t&&!!t,o=e.new_var(b.close(e)),n=o.get(1),i&&isNaN(n)&&(n=b.close(e)),b.max(b.max(b.high(e)-b.low(e),b.abs(b.high(e)-n)),b.abs(b.low(e)-n))},b.atr=function(t,e){var i=e.new_var(b.tr(e));return b.sma(i,t,e)},b.ema=function(t,e,i){var o=b.sum(t,e,i),n=i.new_var(),s=t.get(0),r=t.get(e-1),a=n.get(1),l=b.na(r)?NaN:b.na(a)?o/e:2*(s-a)/(e+1)+a;return n.set(l),l},b.wma=function(t,e,i){var o,n,s=0;for(e=Math.round(e),o=e;o>=0;o--)n=e-o,s+=n*t.get(o);return 2*s/(e*(e+1))},b.vwma=function(t,e,i){var o=i.new_var(b.volume(i)),n=i.new_var(t.get(0)*b.volume(i));return b.sma(n,e,i)/b.sma(o,e,i)},b.swma=function(t,e){return(t.get(0)+2*t.get(1)+2*t.get(2)+t.get(3))/6},b.lowestbars=function(e,i,o){return-t(e,i,o,function(t,e){return b.lt(t,e)},Number.MAX_VALUE).index},b.lowest=function(e,i,o){return t(e,i,o,function(t,e){return b.lt(t,e)},Number.MAX_VALUE).value},b.highestbars=function(e,i,o){return-t(e,i,o,function(t,e){return b.gt(t,e)},Number.MIN_VALUE).index},b.highest=function(e,i,o){return t(e,i,o,function(t,e){return b.gt(t,e)},Number.MIN_VALUE).value},b.cum=function(t,e){var i=e.new_var(),o=b.nz(i.get(1))+t;return i.set(o),o},b.accdist=function(t){var e=(b.open(t),b.high(t)),i=b.low(t),o=b.close(t),n=b.volume(t);return b.cum(o==e&&o==i||e==i?0:n*(2*o-i-e)/(e-i),t)},b.correlation=function(t,e,i,o){var n=b.sma(t,i,o),s=b.sma(e,i,o),r=o.new_var(t.get()*e.get()),a=b.sma(r,i,o)-n*s;return a/Math.sqrt(b.variance2(t,n,i)*b.variance2(e,s,i))},b.stoch=function(t,e,i,n,s){var r=b.highest(e,n),a=b.lowest(i,n);return b.fixnan(o(t.get()-a,r-a),s)},b.tsi=function(t,e,i,o){var n=o.new_var(b.change(t)),s=o.new_var(b.abs(b.change(t))),r=o.new_var(b.ema(n,i,o)),a=o.new_var(b.ema(s,i,o)),l=b.ema(r,e,o),h=b.ema(a,e,o);return l/h},b.cross=function(t,e,i){function o(t){return t<0?-1:0===t?0:1}if(isNaN(t)||isNaN(e))return!1;var n=i.new_var(o(t-e));return!isNaN(n.get(1))&&n.get(1)!=n.get()},b.linreg=function(t,e,i){var o,n,s,r,a,l,h,c=0,d=0,p=0,u=0;for(o=0;o<e;++o)n=t.get(o),s=e-1-o,r=s+1,c+=r,d+=n,p+=r*r,u+=n*r;return a=(e*u-c*d)/(e*p-c*c),l=d/e,h=l-a*c/e+a,h+a*(e-1-i)},b.sar=function(t,e,i,o){function n(e,i){var o=g.get();return m.set(e),g.set(i),v.set(1e3*t),y.set(o),o}var s,r,a=b.high(o),l=b.low(o),h=b.close(o),c=o.new_var(a),d=o.new_var(l),p=o.new_var(h),u=p.get(1),_=d.get(1),f=c.get(1),g=o.new_var(),m=o.new_var(),v=o.new_var(),y=o.new_var(),w=y.get(1);if(isNaN(u))return NaN;if(s=1e-7,isNaN(w)&&(b.ge(h,u)?(m.set(1),g.set(Math.max(a,f)),w=Math.min(l,_)):(m.set(-1),w=Math.max(a,f),g.set(Math.min(l,_))),v.set(1e3*t)),1==m.get()){if(b.gt(a,g.get())&&(g.set(a),v.set(Math.min(v.get()+1e3*e,1e3*i))),b.le(l,w))return n(-1,l)}else if(b.lt(l,g.get())&&(g.set(l),v.set(Math.min(v.get()+1e3*e,1e3*i))),b.ge(a,w))return n(1,a);return r=w+v.get()*(g.get()-w)/1e3,1==m.get()?b.ge(r,l)&&(r=l-s):b.le(r,a)&&(r=a+s),y.set(r),r},b.alma=function(t,e,i,o){var n,s,r,a=Math.floor(i*(e-1)),l=e/o*(e/o),h=[],c=0;for(n=0;n<e;++n)s=Math.exp(-1*Math.pow(n-a,2)/(2*l)),c+=s,h.push(s);for(n=0;n<e;++n)h[n]/=c;for(r=0,n=0;n<e;++n)r+=h[n]*t.get(e-n-1);return r},b.wvap=function(t,e){var i=t.get()-t.get(1);return i},b.change=function(t){var e=t.get()-t.get(1);return e},b.roc=function(t,e){var i=t.get(e),o=100*(t.get()-i)/i;return o},b.dev=function(t,e,i){var o=b.sma(t,e,i);return b.dev2(t,e,o)},b.dev2=function(t,e,i){var o,n,s,r=0;for(o=0;o<e;o++)n=t.get(o),s=b.abs(n-i),r+=s;return r/e},b.stdev=function(t,e,i){var o=b.variance(t,e,i);return b.sqrt(o)},b.variance=function(t,e,i){var o=b.sma(t,e,i);return b.variance2(t,o,e)},b.variance2=function(t,e,i){var o,n,s,r=0;for(o=0;o<i;o++)n=t.get(o),s=b.abs(n-e),r+=s*s;return r/i},b.percentrank=function(t,e){var i,o,n,s,r;if(b.na(t.get(e-1)))return NaN;for(i=0,o=t.get(),n=1;n<e;n++)s=t.get(n),b.ge(o,s)&&i++;return r=100*i/e},n.LOW=0,n.HIGH=1,n.prototype.isPivotFound=function(){return this._pivotIndex.get()!=-1},n.prototype.pivotIndex=function(){return this._pivotIndex.get()},n.prototype.currentValue=function(){return this._currentValue.get();
},n.prototype.pivotType=function(){return this._pivotType},n.prototype.reset=function(){this._currentValue.set(NaN),this._currentIndex.set(0),this._pivotIndex.set(-1)},n.prototype.isRightSideOk=function(t){return t-this._currentIndex.get()==this._areaRight},n.prototype.isViolate=function(t,e){if(t<1||isNaN(this._currentValue.get()))return!0;var i=this._series.get(this._index-t);return!!isNaN(i)||(i===this._currentValue.get()?e:this._pivotType==n.HIGH?i>this._currentValue.get():i<this._currentValue.get())},n.prototype.processPoint=function(t){this.isViolate(t,!1)&&(this._currentValue.set(this._series.get()),this._currentIndex.set(t))},n.prototype.isRestartNeeded=function(t){return t-this._currentIndex.get()>this._areaRight},n.prototype.update=function(){var t,e;if(this._isNewBar&&this.isPivotFound()&&this.reset(),this.processPoint(this._index),this.isRightSideOk(this._index)){if(this._pivotIndex.get()==-1){for(t=!0,e=0;e<this._areaLeft;++e)if(this.isViolate(this._currentIndex.get()-1-e,!0)){t=!1;break}t&&this._pivotIndex.set(this._currentIndex.get())}}else this._pivotIndex.get()!=-1&&this._pivotIndex.set(-1);if(this.isRestartNeeded(this._index))for(this.reset(),e=0;e<=this._areaRight;++e)this.processPoint(this._index-this._areaRight+e)},s.prototype.addPivot=function(t,e,i){this._lastIndex.set(t),this._lastVal.set(e),this._lastType.set(i)},s.prototype.updatePivot=function(t,e){this._lastIndex.set(t),this._lastVal.set(e)},s.prototype.lastPrice=function(){return this._lastVal.get()},s.prototype.lastIndex=function(){return this._lastIndex.get()},s.prototype.addPoint=function(t,e,i){var o,s,r;return isNaN(this._lastVal.get())?void this.addPivot(t,e,i):(o=this._lastVal.get(),this._lastType.get()==i?(s=i===n.HIGH?e>o:e<o,void(s&&this.updatePivot(t,e))):(r=Math.abs(o-e)/e,void(r>this._deviation&&this.addPivot(t,e,i))))},s.prototype.processPivot=function(t){t.update(),this._isBarClosed&&t.isPivotFound()&&this.addPoint(t.pivotIndex(),t.currentValue(),t.pivotType())},b.zigzag=function(t,e,i){var o=new s(t,e,i);return o.lastPrice()},b.zigzagbars=function(t,e,i){var o=new s(t,e,i);return o.lastIndex()==-1?NaN:o.lastIndex()-b.n(i)},r.prototype.new_sym=function(t,e,i){return this.symbol.script.add_sym(t,e,i)},r.prototype.select_sym=function(t){this.symbol=this.symbol.script.get_sym(t)},r.prototype.new_var=function(t){var e,i=this.vars;return i.length<=this.vars_index&&i.push(new a(this.symbol)),e=i[this.vars_index++],arguments.length>0&&e.set(t),e},r.prototype.new_ctx=function(){return this.ctx.length<=this.ctx_index&&this.ctx.push(new r(this.symbol)),this.ctx[this.ctx_index++]},r.prototype.prepare=function(t){var e,i;for(this.ctx_index=0,this.vars_index=0,e=0;e<this.vars.length;e++)this.vars[e].prepare(t);for(i=0;i<this.ctx.length;i++)this.ctx[i].prepare(t)},r.prototype.stop=function(){this.symbol=null,this.vars=null},a.prototype.valueOf=function(){return this.get(0)},a.prototype.get=function(t){return isNaN(t)&&(t=0),t=t||0,this.hist?t>=this.hist.length?(console.error("not enough depth: "+this),NaN):this._get(t):(this.mindepth=b.max(this.mindepth,t),NaN)},a.prototype._get=function(t){var e=this.hist_pos-t;return e<0&&(e+=this.hist.length),this.hist[e]},a.prototype.set=function(t){this.hist&&(this.hist[this.hist_pos]=t,this.modified=!0)},a.prototype.prepare=function(t){t===this.symbol&&(t.isNewBar?(this.original=this.get(0),!this.modified&&this.hist||this.add_hist()):this.set(this.original),this.modified=!1)},a.prototype.add_hist=function(){var t,e,i;if(!this.hist){for(t=b.na(this.mindepth)?b.max_series_size:b.min(this.mindepth+1,b.max_series_size),t=Math.round(t),e=Array(t),i=0;i<t;i++)e[i]=NaN;this.hist=e,this.hist_pos=-1}this.hist_pos=(this.hist_pos+1)%this.hist.length,this.hist[this.hist_pos]=this.original},a.prototype.adopt=function(t,e,i){var o,n,s,r;return this.hist||(this.mindepth=NaN),o=e.get(),n=t.indexOf(o),0!==i&&(s=e.get(1),b.na(s)||(r=t.indexOf(s),n=n===r?-1:n)),n<0?NaN:this._get(n)},a.prototype.indexOf=function(t){var e,i,o,n,s,r;if(!this.hist)return this.mindepth=NaN,-1;if(b.na(t))return-1;for(e=this.symbol.index+1,i=this.hist.length,o=0,n=(e>i?i:e)-1,s=(n+o)/2|0;;){if(r=this._get(s),r>t){if(o=s+1,o>n)return s+1}else if(n=s-1,o>n)return s;s=(n+o)/2|0}},h.parseTicker=function(t){var e=t.indexOf(":");return e===-1?t:t.substr(e+1)},h.parsePeriod=function(t){var e,i,o,n,s,r,a,l;return t+="",e=t.slice(0),i=e.indexOf(",")>=0,i&&(n=e.split(","),o=h.parsePeriod(n[1]),e=n[0]),s=!1,r=!1,a=e[e.length-1],"DWM".indexOf(a)===-1&&("S"===a?r=!0:(s=!0,a="")),l=parseInt(s?e:e.length>1?e.slice(0,e.length-1):1),{resolution:a,interval:l,pureResolution:""+l+a,isIntraday:s,isSeconds:r,range:o}},h.newBarBuilder=function(t,e,i){var o=h.parsePeriod(t);return w.newBarBuilder(o.resolution,o.interval,e,i)},h.newSession=function(t,e){var i=y.get_timezone(t);return(new w.Session).init(i,e)},h.prototype.set_symbolinfo=function(t){t||console.error("WARN: symbolinfo isn't defined for "+this.tickerid),this.info=t,this.timezone=y.get_timezone(t.timezone),this.session.init(this.timezone,t.session);for(var e in this.other_sessions)this.other_sessions.hasOwnProperty(e)&&this.other_sessions[e].init(this.timezone,e)},h.prototype.get_session=function(t){if(!t)return this.session;var e=this.other_sessions[t];return e||(e=new w.Session,this.other_sessions[t]=e),e},h.prototype.isdwm=function(){return""!==this.resolution&&"S"!==this.resolution},h.prototype.enable_dwm_aligning=function(t,e){this.dwm_aligner=h.newBarBuilder(this.period,t,e)},h.prototype.bartime=function(t,e){var i,o,n,s,r=this.time;return t&&(i=t,e&&(i+=e),o=this.bb_cache[i],o||(n=this.get_session(e),o=h.newBarBuilder(t,n),this.bb_cache[i]=o),r=o.alignTime(r)),!this.isdwm()||isNaN(r)?r:(s=y.utc_to_cal(this.timezone,r),this.session.spec.correctTradingDay(s,this.timezone),y.cal_to_utc(this.timezone,s))},h.prototype.lastbar=function(t){var e,i;isNaN(t.time)||(e=t.time,this.dwm_aligner&&(this.dwm_aligner.moveTo(e),e=this.dwm_aligner.startOfBar(0)),i=this.time!==e,i&&this.index>=0&&!this.isBarClosed&&(this.isNewBar=!1,this.isBarClosed=!0,this.script.calc(this)),this.time=e,this.open=t.open,this.high=t.high,this.low=t.low,this.close=t.close,this.volume=t.volume,this.updatetime=t.updatetime,this.isNewBar=i,this.isBarClosed=t.isBarClosed,this.isNewBar&&this.index++,this.script.calc(this))},c.prototype.calc=function(t){var e,i=this.ctx,o=this.body;i.prepare(t),e=o.main(i,this.inputCallback),!isNaN(i.symbol.time)&&this.out&&this.out(i.symbol,e)},c.prototype.init=function(){var t=this.ctx,e=this.body;e.init&&e.init(t,this.inputCallback),e.main(t,this.inputCallback)},c.prototype.add_sym=function(t,e,i){var o=this.runner.add_sym(t,e,i,this);return this.symbols.push(o),o.isdwm()&&this.symbols.length>1&&o.enable_dwm_aligning(this.symbols[0].session,o.session),o},c.prototype.stop=function(t){this.symbols=null,this.ctx.stop(),this.ctx=null},c.prototype.get_sym=function(t){return this.symbols[t]},d.prototype.add_sym=function(t,e,i,o){var n=new h(t,e,i,o);return this.symbols.push(n),n},d.prototype.get_sym=function(t){return this.symbols[t]},d.prototype.start=function(){function t(t,o){var n=d.feed.subscribe(t.tickerid,t.period,t.periodBase,function(t){e.update(o,t)},s.onErrorCallback,s.symbolInfo,s.rangeExtension);i.push(n)}var e,i,o,n,s=this.host;for(this._script=new c(s.tickerid,s.period,s.periodBase||s.period,this,s.body,s.out,s.input),e=this,i=[],o=this.symbols,n=0;n<o.length;n++)t(o[n],n);this.subscription=i},d.prototype.stop=function(){var t,e=this.subscription;if(!e&&!this._script)return void console.warn("Recurring script engine stop happened.");for(t=0;t<e.length;t++)d.feed.unsubscribe(e[t]);this.subscription=null,this._script.stop(),this._script=null,this.symbols=null},d.prototype.update=function(t,e){var i,o;return e?(i=this.symbols[t],void(this.isRecalculated?(o=e.bar(e.count()-1),o.isBarClosed=e.isLastBarClosed(),i.lastbar(o)):this.barsets[t]||(this.barsets[t]=e,i.set_symbolinfo(e.symbolinfo()),this.recalc()))):void console.error("Unexpected barset = null")},d.prototype.recalc=function(){var t,e,i,o,n,s,r,a=this.symbols;for(t=0;t<a.length;t++)if(!this.barsets[t])return;for(e=a.length-1;e>=0;e--)for(i=a[e],o=this.barsets[e],n=o.count(),s=0;s<n;s++)r=o.bar(s),r.isBarClosed=s!==n-1||o.isLastBarClosed(),i.lastbar(r);this.isRecalculated=!0,this.host.recalc(this)},d.feed={subscribe:function(t,e,i,o){console.error("must be initialized with setupFeed")},unsubscribe:function(t){console.error("must be initialized with setupFeed")}},u.prototype.stop=function(){this.runner.stop()},_.prototype.symbolinfo=function(){return this.info},_.prototype.isLastBarClosed=function(){return this.isBarClosed},_.prototype.bar=function(t){return this.bars[t]},_.prototype.count=function(){return this.bars.length},_.prototype.add=function(t,e){var i=t,o=this.bars,n=o.length,s=i.time,r=0===n?NaN:o[n-1].time,a=0===n||r<s;a?o.push(i):r===s?o[n-1]=i:console.error("time order violation, prev: "+new Date(r).toUTCString()+", cur: "+new Date(s).toUTCString()),this.isBarClosed=!!e},f.prototype.init=function(t){this.bb=h.newBarBuilder(this.period,t.symbol.session),this.bbEmptyBars=this.generateEmptyBars?h.newBarBuilder(this.period,t.symbol.session):void 0},f.prototype.extrapolate=function(t,e){return isNaN(t)||isNaN(e)?void 0:w.extrapolateBarsFrontToTime(this.bbEmptyBars,t,e)},f.prototype.main=function(t){var e=t.symbol.time,i=this.bb.alignTime(e),o=t.new_var(i),n=b.na(i),s=o.get(1),r=b.na(s)?1:b.neq(i,s),a=t.new_var(),l=t.new_var(),h=t.new_var(),c=t.new_var(),d=a.get(1),p=l.get(1),u=h.get(1),_=c.get(1),f=n?NaN:r?b.open(t):d,g=n?NaN:r?b.high(t):b.max(b.high(t),p),m=n?NaN:r?b.low(t):b.min(b.low(t),u),v=n?NaN:b.close(t),y=n?NaN:r?b.volume(t):b.volume(t)+_,w=n?NaN:e,S=t.symbol.isBarClosed&&this.bb.isLastBar(e),T=this.generateEmptyBars&&r?this.extrapolate(s,i):void 0,C=t.new_var(b.close(t)),x=C.get(1),P=T instanceof Array?x:NaN;return a.set(f),l.set(g),h.set(m),c.set(y),[i,f,g,m,v,y,w,S,T,P]},g.prototype.main=function(t){var e,i,o,n,s=t.new_var(b.open(t)),r=t.new_var(b.close(t)),a=s.get(1),l=r.get(1),h=b.ohlc4(t),c=b.na(s.get(1))?(b.open(t)+b.close(t))/2:(a+l)/2;return s.set(c),e=b.max(b.high(t),b.max(c,h)),i=b.min(b.low(t),b.min(c,h)),o=b.volume(t),n=t.symbol,[n.time,c,e,i,h,o,n.updatetime,n.isBarClosed]},m.prototype.main=function(t){var e=b.open(t),i=b.high(t),o=b.low(t),n=b.close(t),s=b.volume(t);return[e,i,o,n,s]},{Std:b,Series:a,Symbol:h,SymbolInfo:l,StudyEngine:u,BarSet:_,OHLCV:m,BarBuilder:f,HeikenAshi:g,setupFeed:p}}(this);t.exports=o}).call(e,function(){return this}())},function(t,e,i){(function(e,o){"use strict";var n,s=i(392),r=i(390),a=i(393),l=i(394),h=i(395),c=i(389),d=i(43);i(396),i(397),n=function(t){function i(t,i){var n,s,a=!e.enabled("disable_resolution_rebuild");return a&&d.isDWM(t)?(n=o.get_timezone(i.timezone),s=new c.Session,s.init(n,i.session),r.Symbol.newBarBuilder(t,s,s)):null}function n(t,e){var i,o=v._cacheSymbols[t.ticker];return void 0===o&&(o=v._cacheSymbols[t.ticker]={}),i=o[e],void 0===i&&(i=o[e]=[]),i}function s(t){if(e.enabled("charting_library_debug_mode"))for(var i=1;i<t.length;i++)t[i].time<=t[i-1].time&&console.error("Corrupted bars, time {0} at {1} > {2} at {3}".format(t[i].time,i,t[i-1].time,i-1))}function p(t,e,i){var o,r;return 0===i.length||(o=n(t,e),o.length===i.length&&o[0].time===i[0].time&&o[o.length-1].time===i[i.length-1].time?(v._logMessage("Time range of received data is the same as cached one. Skip the update."),!0):(0!==o.length&&i[i.length-1].time==o[0].time&&o.splice(0,1),!(0!==o.length&&i[i.length-1].time>=o[0].time&&(r=o[o.length-1].time===i[i.length-1].time,o.splice(0,o.length),!r))&&(Array.prototype.unshift.apply(o,i),s(o),!0)))}function u(t,e,i){var o=n(t,e),s=o.length,r=i.time,a=0===s?NaN:o[s-1].time,l=0===s||a<r;l?o.push(i):a===r?o[s-1]=i:console.error("putToCacheNewBar: time violation, prev: "+new Date(a).toUTCString()+", cur: "+new Date(r).toUTCString())}function _(){return v._nextSubscriptionId++}function f(t,o,a,l,h){function c(t){if(w)for(var e=0;e<t.length;e++)t[e].time=w.tradingDayToSessionStart(t[e].time)}function d(e,i,a){var h,d,_,y,T,C,x,P,L;if(s(e),c(e),h=n(t,o),d=i&&i.version&&i.version>1,!a&&d){if(_=h.length,e.length>0){if(y=e[0].time,T=e[e.length-1].time,v._logMessage("Receiving bars: `{0}` total {1} bars in [{2} ... {3}] ".format(b,e.length,new Date(y).toUTCString(),new Date(T).toUTCString())),!p(t,o,e))return v._logMessage("Incremental update failed. Starting full update."),void f(g,m)}else v._logMessage("Receiving bars: barset is empty");if(h.length===_&&(C=86400,x=m-g,x=x>C?x:C,!i.noData||i.nextTime))return i.nextTime&&v._logMessage("Next time received: `{0}`".format(new Date(1e3*i.nextTime).toUTCString())),m=i.nextTime||g,g=m-x,void f(g,m)}P=d?h:e,L=new r.BarSet(t,P),P.length>0?v._logMessage("Bars to return: `{0}` total {1} bars in [{2} ... {3}] ".format(b,P.length,new Date(P[0].time).toUTCString(),new Date(P[P.length-1].time).toUTCString())):v._logMessage("Nothing to return"),l(L),t.expired||(v._externalDatafeed.subscribeBars(t,o,function(e){w&&(e.time=w.tradingDayToSessionStart(e.time)),d&&u(t,o,e),L.add(e),l(L)},S),v._subscribedGUIDs.push(S))}function f(e,i){var s,r,a;if(T++>4)return v._logMessage("Stop requesting data. 4 attempts to reach the data failed."),void setTimeout(function(){d([],{version:2},!0)},0);if(s=n(t,o),!v._datafeedRequestsAllowed&&s.length)return void setTimeout(function(){d([],{version:2},!0)},0);if(s.length>0){if(r=s[0].time/1e3,e>=r)return v._logMessage("Requested bars which already sent"),d([],{version:2},!1),S;i=r-1}v._logMessage("Requesting data: `{0}` in [{1} ... {2}] ".format(b,new Date(1e3*e).toUTCString(),new Date(1e3*i).toUTCString())),a=0===s.length,v._externalDatafeed.getBars(t,o,e,i,function(t,e){var i=v._stoppingSubscriptions.indexOf(S);return i!==-1?void v._stoppingSubscriptions.splice(i,1):void d(t,e)},function(t){var e=v._stoppingSubscriptions.indexOf(S);return e!==-1?void v._stoppingSubscriptions.splice(e,1):void h(t)},a)}var g,m,y,w,b=t.ticker,S=b+","+o+"%"+_(),T=0;return v._logMessage("History request for {0} {1}: from `{2}` to {3}".format(b,o,new Date(a.from),new Date(a.to))),g=parseInt(a.from/1e3),m=parseInt(a.to/1e3),e.enabled("log_data_request_time")&&(y=new Date,console.log(y.toLocaleTimeString()+":"+y.getMilliseconds()+"> Requesting data")),w=i(o,t),f(g,m),S}function g(t){var e=v._subscribedGUIDs.indexOf(t);return e===-1?void v._stoppingSubscriptions.push(t):(v._subscribedGUIDs.splice(e,1),void v._externalDatafeed.unsubscribeBars(t))}function m(t,e,i){v.resolveSymbol(t,e,i)}var v=this;this._studiesCache={},this._metainfoCache=[],this._symbolInfoCache={},this._extrapolationManager=l,this._externalDatafeed=t,this._datafeedConfiguration=null,this._marketStatusWatchers={},this._callbacks={},this._serverTimeOffset=0,v._logMessage("Datafeed settings received: {0}".format(JSON.stringify(window.configurationData))),v._datafeedConfiguration=v._adoptConfigurationData(window.configurationData),v._fireEvent("configuration_received"),v._externalDatafeed.getServerTime&&v._externalDatafeed.getServerTime(function(t){v._serverTimeOffset=t-(new Date).valueOf()/1e3}),this._pointsetsManager=h,this._rangeExtensionData={summary:0},this._quotesInfo=[],this._endOfData={},this._cacheSymbols={},this._datafeedRequestsAllowed=!0,this._nextSubscriptionId=0,this._subscribedGUIDs=[],this._stoppingSubscriptions=[],this._create_dwm_aligner=i,this._extendedRange=function(){return v._rangeExtensionData.summary},this._extendedTime=function(){return v._rangeExtensionData.time},a.setupFeed({resolve:m,subscribe:f,unsubscribe:g,calculateHistoryDepth:this._externalDatafeed.calculateHistoryDepth,getRangeExtension:this._extendedRange,getRangeExtensionTime:this._extendedTime})},n.prototype.destroy=function(){this._externalDatafeed=null},n.prototype.setDatafeedRequestsAllowed=function(t){this._datafeedRequestsAllowed=t},n.prototype.purgeCache=function(){this._endOfData={},this._symbolInfoCache={}},n.prototype.purgeDataCache=function(){this._cacheSymbols={}},n.prototype._logMessage=function(t){e.enabled("charting_library_debug_mode")&&console.log(t)},n.prototype._extendRange=function(t){this._rangeExtensionData.summary+=t},n.prototype.on=function(t,e){return this._callbacks.hasOwnProperty(t)||(this._callbacks[t]=[]),this._callbacks[t].push(e),this},n.prototype._fireEvent=function(t,e,i){var o,n;if(this._callbacks.hasOwnProperty(t)){for(o=this._callbacks[t],n=0;n<o.length;++n)o[n](e);i||(this._callbacks[t]=[])}},n.prototype._adoptConfigurationData=function(t){var e,i,o,n=TradingView.merge({},t),s=n.supported_resolutions;if(!s||0===s.length)return n.supported_resolutions=void 0,n;for(e={},i=0;i<s.length;i++){if(o=s[i],e.hasOwnProperty(o))throw"Duplicating resolution `"+o+"`";e[o]=1}return n.supported_resolutions=e,n},n.prototype.supportedResolutions=function(){return this._datafeedConfiguration.supported_resolutions},n.prototype.supportedSymbolsTypes=function(){return this._datafeedConfiguration.symbols_types||[]},n.prototype.supportedExchangesList=function(){return this._datafeedConfiguration.exchanges||[]},n.prototype.futuresRegex=function(){return this._datafeedConfiguration.futures_regex||/$a/},n.prototype._createStudyLogicObject=function(t){var e,i=t.split("@")[0],o=JSServer.studyLibrary.filter(function(e){return e.metainfo.id==t||e.metainfo.shortDescription==i});if(0===o.length)throw"Study `"+t+"` not found";return e=o[0],new e.constructor},n.prototype.getMarks=function(t,e,i,o,n){function s(t){function e(e,i){return isArray(t[e])?t[e][i]:t[e]}var i,o,n=isArray(t);if(n)return t;for(i=[],o=0;o<t.id.length;++o)i.push({id:e("id",o),time:e("time",o),color:e("color",o),text:e("text",o),label:e("label",o),labelFontColor:e("labelFontColor",o),minSize:e("minSize",o)});return i}var r,a={red:6,green:5,blue:4,yellow:3};this._externalDatafeed.getMarks&&this._datafeedConfiguration.supports_marks&&(this._logMessage("Requesting bars marks: symbol {0}, resolution {1}, range [{2} ... {3}]".format(t.full_name,n,new Date(1e3*e).toUTCString(),new Date(1e3*i).toUTCString())),r=this,this._externalDatafeed.getMarks(t,e,i,function(e){var i,l,h=s(e).map(function(t){return t.time=parseInt(t.time),t});r._logMessage("Received bars marks: symbol {0}, resolution {1}, marks {2}".format(t.full_name,n,JSON.stringify(h))),i=r._create_dwm_aligner(n,t),l=h.map(function(t){return t.tickmark=null!==i?i.tradingDayToSessionStart(1e3*t.time)/1e3:t.time,t.direction=a[t.color],t.onClicked=function(){TradingView.GlobalEventsStorage.emit("onMarkClick",t.id)},t.label=!!t.label&&t.label[0],t}),o(l)},n))},n.prototype.getTimescaleMarks=function(t,e,i,o,n){if(this._externalDatafeed.getTimescaleMarks&&this._datafeedConfiguration.supports_timescale_marks){this._logMessage("Requesting timescale marks: symbol {0}, resolution {1}, range [{2} ... {3}]".format(t.full_name,n,new Date(1e3*e).toUTCString(),new Date(1e3*i).toUTCString()));var s=this;this._externalDatafeed.getTimescaleMarks(t,e,i,function(e){var i,r;s._logMessage("Received timescale marks: symbol {0}, resolution {1}, marks {2}".format(t.full_name,n,JSON.stringify(e))),i=s._create_dwm_aligner(n,t),r=e.map(function(t){return t.tickmark=null!==i?i.tradingDayToSessionStart(1e3*t.time)/1e3:t.time,t}),o(r)},n)}},n.prototype._computeStudy=function(t,e,i,o,n,s,a,l,h){function c(t,e,i){var o,n,s,r,a=t.time,h="number"==typeof e?[e]:e;for(o=0;o<h.length;++o)n=h[o],n&&"object"==typeof n&&(u["plot_"+o]=n.offset,n=n.value,_++),"number"==typeof n&&isNaN(n)&&(n=void 0),h[o]=n;s=p.length-1,r=s<0||a>p[s].value[0],r?p.push({index:p.length,value:[a].concat(h)}):p[s].value=[a].concat(h),d||l([p[p.length-1]],r,p.length,u,i)}var d=!0,p=[],u={},_=0,f=this;this.resolveSymbol(i,function(l){var g,m=r.Symbol.parsePeriod(o);if(m.isIntraday&&!l.has_intraday)return void h("Unsupported resolution");if(g=new r.StudyEngine({tickerid:i,symbolInfo:l,period:o,body:e,onErrorCallback:h,input:function(t){return s[t]},out:function(t,e){c(t,e,l)},recalc:function(){d=!1,a(p,_>0?u:void 0,l)}}),!f._studiesCache[t]||!f._studiesCache[t][n])throw"This should never happen";f._studiesCache[t][n].engine=g},function(t){h(t)})},n.prototype._createStudy=function(t,e,i,o,n,s,r){var a=this;TradingView.ChartapiMessagerInstances[o].onStudyLoading(n,s),a._computeStudy(o,i,t,e,n,r,function(i,r,l){TradingView.ChartapiMessagerInstances[o].onDataUpdate(n,s,a._convertBarsTimeToUnix(i),r,l,a._extendedRange(t,e)),TradingView.ChartapiMessagerInstances[o].onStudyCompleted(n,s)},function(i,r,l,h,c){TradingView.ChartapiMessagerInstances[o].onDataUpdate(n,s,a._convertBarsTimeToUnix(i),h,c,a._extendedRange(t,e))},function(t){TradingView.ChartapiMessagerInstances[o].onStudyError(n,t)})},n.prototype.purgeEndOfDataFlags=function(t,e){for(var i in this._studiesCache[t])e&&e!=i||(this._studiesCache[t][i].firstBarTime=null)},n.prototype.stopSources=function(t){var e,i;for(e in this._studiesCache[t])i=this._studiesCache[t][e],i&&i.engine&&i.engine.stop();a.unsubscribeUnused()},n.prototype.recreateSources=function(t,e,i,o){var n,s;this.stopSources(i);for(n in this._studiesCache[i])s=this._studiesCache[i][n],s&&(s.symbol=t,s.resolution=e,"series"==s.type&&this.createSeries(t,e,i,n,s.turnaround,o));for(n in this._studiesCache[i])s=this._studiesCache[i][n],s&&"study"==s.type&&this._createStudy(t,e,s.studyObject,i,n,s.turnaround,s.inputs)},n.prototype.removeStudy=function(t,e){this._studiesCache[t]&&this._studiesCache[t][e]&&this._studiesCache[t][e].engine&&(this._studiesCache[t][e].engine.stop(),a.unsubscribeUnused()),this._studiesCache[t][e]=null},n.prototype.removeSeries=function(t,e){this.removeStudy(t,e)},n.prototype.recomputeStudy=function(t,e,i,o){var n=this._studiesCache[i][t];if(!n)throw"This should never happen";n.inputs=e,n.turnaround=o,n.engine&&n.engine.stop(),this._createStudy(n.symbol,n.resolution,n.studyObject,i,t,o,e)},n.prototype._convertBarsTimeToUnix=function(t){var e,i,o=[];for(e=0;e<t.length;++e)i={index:t[e].index,value:[].concat(t[e].value)},i.value[0]/=1e3,o.push(i);return o},n.prototype.createStudy=function(t,e,i,o,n,s,r){var a=this._createStudyLogicObject(s);this._studiesCache[i]=this._studiesCache[i]||{},this._studiesCache[i][o]={studyObject:a,symbol:t,resolution:e,guid:o,type:"study",inputs:r,turnaround:n},this._createStudy(t,e,a,i,o,n,r)},n.prototype.purgeRangeExtensionData=function(){this._rangeExtensionData={summary:0}},n.prototype.ensureExtendedTo=function(t,e,i){var o,n=this._studiesCache[e][t];if(!n)throw"This should never happen";this.purgeRangeExtensionData(),this._rangeExtensionData.time=i,o=this,setTimeout(function(){o.recreateSources(n.symbol,n.resolution,e,!0)},0)},n.prototype.extendSeriesRange=function(t,e,i){var o,n,s=this._studiesCache[e][t];if(!s)throw"This should never happen";return this._isEndOfData(e,t,s.turnaround)?(o=s.engine.runner.host.symbolInfo.data_status,void setTimeout(function(){TradingView.ChartapiMessagerInstances[e].onSeriesCompleted(t,s.turnaround,o)},0)):(i+=10,this._extendRange(i),n=this,void setTimeout(function(){n.recreateSources(s.symbol,s.resolution,e,!0)},0))},n.prototype.updateSeriesTurnaround=function(t,e,i){this._studiesCache[t]||(this._studiesCache[t]={}),this._studiesCache[t][e]||(this._studiesCache[t][e]={}),this._studiesCache[t][e].type="series",this._studiesCache[t][e].turnaround=i},n.prototype.createSeries=function(t,i,o,n,s,a){function l(t,e,n){var s=d._extrapolationManager.storage(o,t.full_name,i);s.setLastBarTime(e,n)}var h,c,d,p=t,u=new r.OHLCV;this._studiesCache[o]=this._studiesCache[o]||{},h=this._studiesCache[o][n],c=h&&h.firstBarTime,this._studiesCache[o][n]={symbol:t,resolution:i,studyObject:u,guid:n,type:"series",turnaround:s},TradingView.ChartapiMessagerInstances[o].onSeriesLoading(n,s),d=this,this._computeStudy(o,u,p,i,n,[],function(t,e,r){var h,p,u,_,f,g=d._studiesCache[o][n];if(!g)throw"This should never happen";h=d._convertBarsTimeToUnix(t),p=h.length>0?1e3*h[0].value[0]:void 0,u=0===h.length||c===p,u?(d._logMessage("Series has no more data on server: {0}".format(r.full_name)),d._setEndOfData(o,n,s),0===h.length&&TradingView.ChartapiMessagerInstances[o].onSeriesClearData(n,s),TradingView.ChartapiMessagerInstances[o].onSeriesCompleted(n,s,r.data_status)):(g.firstBarTime=p,_=h[h.length-1],l(r,h.length-1,1e3*_.value[0]),a&&TradingView.ChartapiMessagerInstances[o].onSeriesClearData(n,s),TradingView.ChartapiMessagerInstances[o].onTimescaleUpdate(n,s,h,r,0),TradingView.ChartapiMessagerInstances[o].onSeriesCompleted(n,s,r.data_status),f=d._extrapolationManager.storage(o,r.full_name,i),d._pointsetsManager.broadcastPointsetsUpdates(r.full_name,i,t,f,r,function(t,e){TradingView.ChartapiMessagerInstances[o].onPointsetDataUpdate(t,s,e,r)}))},function(t,e,r,a,h){var c,p,u=d._convertBarsTimeToUnix(t),_=u[u.length-1];if(e){if(c=d._studiesCache[o][n],!c)throw"This should never happen";p=r-1,d._logMessage("New bar arrived: symbol {0}, bar {1}".format(h.full_name,JSON.stringify(_))),TradingView.ChartapiMessagerInstances[o].onTimescaleUpdate(n,s,[_],h,p),l(h,p,1e3*_.value[0]),d.rebuildExtrapolatedData(o,h.full_name,i,h,1e3*_.value[0])}else d._logMessage("Last bar update: symbol {0}, bar {1}".format(h.full_name,JSON.stringify(_))),TradingView.ChartapiMessagerInstances[o].onDataUpdate(n,s,u,void 0,h);d._fireEvent("realtime_tick",t[t.length-1],!0)},function(t){d._logMessage("Series error: {0}".format(t)),TradingView.ChartapiMessagerInstances[o].onSeriesError(n,t),e.enabled("clear_bars_on_series_error")&&TradingView.ChartapiMessagerInstances[o].onSeriesClearData(n,s)})},n.prototype.onMoreTickmarksRequested=function(t,e,i,o,n){this._extrapolationManager.storage(t,i.full_name,o).onTickmarksNeeded(i,n)},n.prototype.removePointset=function(t){this._pointsetsManager.removePointset(t)},n.prototype.rebuildExtrapolatedData=function(t,e,i,o,n){this._extrapolationManager.storage(t,o.full_name,i).rebuild(n,o)},n.prototype.createPointset=function(t,e,i,o,n,s){var r=this._extrapolationManager.storage(t,o.full_name,n);this._pointsetsManager.createPointset(e,i,n,s,r,o)},n.prototype.studiesMetadata=function(){return 0===this._metainfoCache.length&&(this._metainfoCache=JSServer.studyLibrary.map(function(t){return t.metainfo})),this._metainfoCache},n.prototype.searchSymbols=function(t,e,i,o){function n(t){s._logMessage("Symbol search response: {0}".format(JSON.stringify(t))),o(t)}this._logMessage("Symbol search requested: search string `{0}`, exchange: `{1}`, type `{2}`".format(t,e,i));var s=this;"function"==typeof this._externalDatafeed.searchSymbols?this._externalDatafeed.searchSymbols(t,e,i,n):this._externalDatafeed.searchSymbolsByName(t,e,i,n)},n.prototype.validateSymbolInfo=function(t){function e(t){console.warn("SymbolInfo validation: "+t)}var i,o;if((void 0===t.minmov||t.minmov<=0)&&e("minmov must be positive"),(void 0===t.pricescale||t.pricescale<=0)&&e("pricescale must be positive"),void 0!==t.name&&0!==t.name.length||e("name must be non-empty stirng"),void 0!==t.session&&0!==t.session.length||e("session must be non-empty stirng"),void 0!==t.timezone&&0!==t.timezone.length||e("timezone must be non-empty stirng"),void 0!==t.intraday_multipliers)if(i=t.intraday_multipliers,Array.isArray(i))for(o=0;o<i.length;++o)"string"!=typeof i[o]&&e('intraday_multipliers[{0}] = "{1}" must be string (now: {2})'.format(o+1,i[o],typeof i[o]));else e("intraday_multipliers must be array")},n.prototype.resolveSymbol=function(t,e,i){function o(t){e(t)}function n(t){h._logMessage("Symbol resolve failed: `{0}`, reason: `{1}`".format(l,t)),i(t)}var s,r,l=a.parseSymbol(t).symbol,h=this;return this._symbolInfoCache.hasOwnProperty(l)?(s=this._symbolInfoCache[l],void o(s)):(this._logMessage("Symbol resolve requested: `{0}` ".format(l)),r=!0,this._externalDatafeed.resolveSymbol(l,function(t){r&&console.warn("`resolveSymbol` should return result asynchronously. Use `setTimeout` with 0 interval to execute the callback function."),h._logMessage("Symbol resolved: `{0}`, SymbolInfo in server response {1}".format(l,JSON.stringify(t))),t.base_name||(t.base_name=[t.name]),t.legs||(t.legs=[t.name]),t.exchange||(t.exchange=t["exchange-listed"]),t.full_name||(t.full_name=t.symbol||t.exchange+":"+t.name),t.data_status||(t.data_status="streaming"),t.ticker||(t.ticker=t.symbol),!t.session&&t["session-regular"]&&(t.session=t["session-regular"]),!t.minmov&&t.minmovement&&(t.minmov=t.minmovement),h.validateSymbolInfo(t),h._logMessage("Symbol info after post-processing: `{0}`, SymbolInfo {1}".format(l,JSON.stringify(t))),h._symbolInfoCache[l]=h._symbolInfoCache[t.symbol]=t,o(t)},n),void(r=!1))},n.prototype._createMarketStatusWatchers=function(t,e){void 0===this._marketStatusWatchers[t]&&(this._marketStatusWatchers[t]={});var i=this;e.forEach(function(e){void 0===i._marketStatusWatchers[t][e]&&(i._marketStatusWatchers[t][e]=new s(i,t,e))})},n.prototype._removeMarketStatusWatchers=function(t){var e=this;Object.keys(this._marketStatusWatchers[t]||{}).forEach(function(i){e._marketStatusWatchers[t][i].stop()}),this._marketStatusWatchers[t]={}},n.prototype._stopQuotesSubscription=function(t){this._quotesInfo[t].listenerGUID&&(this._externalDatafeed.unsubscribeQuotes(this._quotesInfo[t].listenerGUID),this._quotesInfo[t].listenerGUID=void 0),this._removeMarketStatusWatchers(t)},n.prototype._startQuotesSubscription=function(t){function i(e,i){var o=s._marketStatusWatchers[t][e.n];e.symbolname=e.n,e.status=e.s,e.values=e.v,e.values.change=e.v.ch,e.values.last_price=e.v.lp,e.values.change_percent=e.v.chp,e.values.current_session=e.v.cs||o&&o.marketStatus(),e.values.pricescale=i.pricescale,e.values.minmov=i.minmov,e.values.minmove2=i.minmove2||0,e.values.fractional=i.fractional||!1,o&&e.v.cs&&o.stop(),TradingView.ChartapiMessagerInstances[t].onQuotesData([t].concat([e]))}function o(t){t.forEach(function(t){void 0!==n[t.n]?null!==n[t.n]&&i(t,n[t.n]):s.resolveSymbol(t.n,function(e){n[t.n]=e,i(t,e)},function(){n[t.n]=null})})}var n={},s=this,r=this._quotesInfo[t].symbols;0!==r.length&&(this._externalDatafeed.getQuotes&&!e.enabled("charting_library")&&this._externalDatafeed.getQuotes(r,function(e){s._quotesInfo[t]&&(o(e),s._quotesInfo[t].listenerGUID=t,s._externalDatafeed.subscribeQuotes(r,s._quotesInfo[t].fastSymbols,o,s._quotesInfo[t].listenerGUID))}),this._createMarketStatusWatchers(t,r))},n.prototype._restartQuotesSubscription=function(t){this._stopQuotesSubscription(t),this._startQuotesSubscription(t)},n.prototype.quoteCreateSession=function(t){this._quotesInfo[t]={symbols:[],fastSymbols:[],listenerGUID:void 0}},n.prototype.quoteDeleteSession=function(t){this._stopQuotesSubscription(t),this._quotesInfo[t]=null},n.prototype.quoteSetFields=function(t,e){},n.prototype.quoteAddSymbols=function(t,e){this._quotesInfo[t].symbols=this._filteredSymbols(this._quotesInfo[t].symbols.concat(e)),this._restartQuotesSubscription(t)},n.prototype.quoteRemoveSymbols=function(t,e){this._quotesInfo[t].symbols=this._quotesInfo[t].symbols.filter(function(t){return e.indexOf(t)<0}),this._restartQuotesSubscription(t)},n.prototype.quoteFastSymbols=function(t,e){this._quotesInfo[t].fastSymbols=this._filteredSymbols(e),this._restartQuotesSubscription(t)},n.prototype.quoteHibernateAll=function(t){},n.prototype._filteredSymbols=function(t){var e=[];return t.forEach(function(t){t instanceof Object||e.indexOf(t)<0&&e.push(t)}),e},n.prototype._isEndOfData=function(t,e,i){var o=t+"!"+e+"@"+i;return!!this._endOfData[o]},n.prototype._setEndOfData=function(t,e,i){var o=t+"!"+e+"@"+i;this._endOfData[o]=!0},n.prototype.alignTimePoint=function(t,e,i){var o=this._create_dwm_aligner(e,i);return o?o.tradingDayToSessionStart(1e3*t)/1e3:t},n.prototype.serverTimeOffset=function(){return this._serverTimeOffset},t.exports=n}).call(e,i(1),i(37))},function(t,e,i){(function(e){"use strict";var o=i(389),n={},s=function(t,i,s){function r(){var t={};t.symbolname=f,t.status="ok",t.values={},t.values.current_session=p,n[f]=p,TradingView.ChartapiMessagerInstances[g].onQuotesData([g].concat([t]))}function a(t,i,n){var s=e.get_timezone(i);h=(new o.Session).init(s,t),
c=n,m=setTimeout(l,6e4),l(),r()}function l(){var t,e;if(h){if(c)return void(p="out_of_session");t=o.isTradingNow(new Date,h),e=t?"market":"out_of_session",e!==p&&(p=e,r())}}var h,c,d={},p=n[s]||"out_of_session",u=t,_=!1,f=s,g=i,m=null;return t.resolveSymbol(s,function(t){_||a(t.session,t.timezone,t.expired)},function(){}),d.stop=function(){_=!0,u=null,m&&clearTimeout(m)},d.marketStatus=function(){return p},d};t.exports=s}).call(e,i(37))},function(t,e,i){(function(e){"use strict";var o=function(){function t(t){this.host=t,this.cache={}}function o(t,e,i,o){var s=n(o)?"_":"";return t+e+i+s}function n(t){return t.has_empty_bars||t.force_session_rebuild}function s(t){if(0!==t.indexOf("="))return{symbol:t};var e;try{e=JSON.parse(t.slice(1))}catch(i){return{symbol:t}}return e.type&&(0===e.type.indexOf("BarSetHeikenAshi@tv-basicstudies-")?e.builder=new c.HeikenAshi:console.error("unknown builder type: "+e.type)),"string"!=typeof e.symbol&&(e.session=e.symbol.session||e.session,e.symbol=e.symbol.symbol),e}function r(e){t.instance=new t(e),c.setupFeed(t.instance)}var a,l,h,c=i(390),d=i(389),p=c.Symbol,u=c.StudyEngine,_=c.BarBuilder,f=c.BarSet;return t.prototype.getCache=function(t){return this.cache[t]},t.prototype.putCache=function(t,e){this.cache[t]=e},t.prototype.subscribe=function(t,e,i,n,s,r){var a=o(t,e,i,r),l=this.getCache(a);return l||(l=this.createItem(t,e,i,r),this.putCache(a,l)),l.listeners.addListener(n,s),{key:a,listener:n}},t.prototype.unsubscribe=function(t){var e=this.getCache(t.key);e&&e.listeners.removeListener(t.listener)},t.prototype.removeUnused=function(){var t,e,i,o,n,s=[];for(t in this.cache)this.cache[t]&&(e=this.cache[t],0===e.listeners.listenersCount()&&s.push(t));if(0!==s.length){for(i=0;i<s.length;i++)o=s[i],n=this.cache[o],this.cache[o]=null,n.stop();this.removeUnused()}},t.prototype.rebuildFrom=function(t,e,i){var o,n,s,r,a=p.parsePeriod(t),l=p.parsePeriod(e);if(""!==a.resolution&&!a.isSeconds){if(i.has_weekly_and_monthly)return a.resolution;if(void 0===i.has_daily||i.has_daily)return"D";""!==l.resolution&&(l.resolution="",l.interval=i.intraday_multipliers?i.intraday_multipliers[0]:1)}if(a.isIntraday&&void 0!==i.has_intraday&&!i.has_intraday)return"";if(a.isSeconds&&!i.has_seconds)return"";if(o=""!==a.resolution?l.interval:""===l.resolution?Math.min(a.interval,l.interval):a.interval,n=a.isIntraday?i.intraday_multipliers:i.seconds_multipliers,n&&-1===n.indexOf(o)){for(s=n.length-1;s>=0;s--)if(r=+n[s],o%r===0)return r+(a.isSeconds?"S":"");return""}return o+(a.isSeconds?"S":"")},t.prototype.createItem=function(t,e,i,o){var r,c,d,p,u,f=new h,g=s(t);return g.builder?new l(f,g.symbol,e,i,g.builder,o):(r=this.rebuildFrom(e,i,o),c=n(o),e!==r||c?(d=o.has_empty_bars,p=$.extend({},o),c&&(p.has_empty_bars=!1,p.force_session_rebuild=!1),new l(f,g.symbol,e,r,new _(e,d),p)):(u=g.session&&"extended"!==g.session,new a(f,g.symbol,e,i,u,this.host,o)))},a=function(t,e,i,o,n,s,r){this.listeners=t,this.host=s,this._aligner_set=!1;var a=this;this.host.resolve(e,function(t){n&&t.regular_session&&(t.session=t.regular_session);var s=a.calculateFromTo(t,o||i,e);a.subs=a.host.subscribe(t,i,s,function(t){a.listeners.fire(t)},function(t){a.listeners.onError(t)})},function(t){a.listeners.onError(t)})},a.prototype._create_dwm_aligner=function(t,i){var o=e.get_timezone(i.timezone),n=new d.Session;return n.init(o,i.session),p.newBarBuilder(t,n,n)},a.prototype.stop=function(){this.host.unsubscribe(this.subs)},a.prototype.calculateFromTo=function(t,i,o){var n,s,r,a,l,h,c,u,_=p.parsePeriod(i),f=(new Date).valueOf(),g=t.expired?e.cal_to_utc(e.get_timezone(t.timezone),new Date(1e3*t.expiration_date))||f:f;return""===_.resolution?(s=_.interval,r="D"):"S"===_.resolution?(s=10*_.interval,r=""):(a="D"===_.resolution?1:"W"===_.resolution?5:30,s=12*a*_.interval,r="M"),_.range?(s=_.range.interval,r=_.range.resolution):this.host.calculateHistoryDepth&&(l=this.host.calculateHistoryDepth(i,r,s),l&&(s=l.intervalBack||s,r=l.resolutionBack||r)),h=t.sessionString||t.session,n=d.alignPeriodsBack(h,r,s,1,g),this.host.getRangeExtensionTime&&(c=this.host.getRangeExtensionTime(),c&&(n=Math.min(1e3*c,n))),this.host.getRangeExtension&&(u=this.host.getRangeExtension(),u>0&&(n=d.alignPeriodsBack(h,_.resolution,_.interval,u,n))),{from:n,to:g+6e4}},l=function(t,e,i,o,n,s){if(this.listeners=t,this.isRecalculated=!1,""===o)return console.error("unsupported resolution for rebuild: "+i),void this.listeners.onError("unsupported resolution for rebuild: "+i);var r=this;this.engine=new u({tickerid:e,period:o,periodBase:i,body:n,symbolInfo:s,recalc:function(){r._recalc()},out:function(t,e){r._out(t,e)},onErrorCallback:function(t){r.listeners.onError(t)}})},l.prototype.stop=function(){this.engine?this.engine.stop():console.error("Internal library error 0x1")},l.prototype._recalc=function(){this.isRecalculated&&console.error("recalc called twice!"),this.barset&&this.listeners.fire(this.barset),this.isRecalculated=!0},l.prototype._out=function(t,e){var i,o,n,s,r,a,l,h=e[0];if(!isNaN(h)){if(i={time:h,open:e[1],high:e[2],low:e[3],close:e[4],volume:e[5],updatetime:e[6]},o=e[7],this.barset||(this.barset=new f(t.info)),n=e[8],n instanceof Array)for(s=0;s<n.length;s++)r=e[9],a=n[s],l={time:a,open:r,high:r,low:r,close:r,volume:0,updatetime:a},this.barset.add(l,!0),this.isRecalculated&&this.listeners.fire(this.barset);this.barset.add(i,o),this.isRecalculated&&this.listeners.fire(this.barset)}},h=function(){this.listeners=[]},h.prototype.listenersCount=function(){return this.listeners.reduce(function(t,e){return t+(e?1:0)},0)},h.prototype.addListener=function(t,e){this.listeners.push({dataListener:t,onErrorCallback:e}),this.barset&&t(this.barset),this.errorMsg&&e(this.errorMsg)},h.prototype.removeListener=function(t){var e,i=this.listeners.filter(function(e){return e.dataListener==t});0!==i.length&&(e=this.listeners.indexOf(i[0]),delete this.listeners[e])},h.prototype.onError=function(t){var e,i,o,n;for(this.errorMsg=t||"unspecified error",e=this.listeners,i=e.length,o=0;o<i;o++)n=e[o],n&&n.onErrorCallback&&n.onErrorCallback(t)},h.prototype.fire=function(t){var e,i,o,n;for(this.barset=t,e=this.listeners,i=e.length,o=0;o<i;o++)n=e[o],n&&n.dataListener(t)},{setupFeed:r,parseSymbol:s,unsubscribeUnused:function(){t.instance.removeUnused()}}}();t.exports=o}).call(e,i(37))},function(t,e,i){"use strict";var o=function(){function t(t,e,i){return t+","+e+","+i}function e(e,i,o){delete n[t(e,i,o)]}function o(e,i,o){function r(t){return"undefined"!=typeof TradingView&&TradingView.ChartapiMessagerInstances?n[t]=new a(TradingView.ChartapiMessagerInstances[e],l.pureResolution):n[t]=new a(null,l.pureResolution),n[t]}var l=s.Symbol.parsePeriod(o),h=t(e,i,l.pureResolution);return n[h]?n[h]:r(h)}var n={},s=i(390),r=i(389),a=function(t,e,i){this._chartApiMessager=t,this._lastRealBarTime=null,this._lastRealBarIndex=null,this._resolution=e,this._extrapolatedBarsCache=[],this._onReadyCallbacks=[],this._maxDepth=i||100};return a.prototype.ready=function(){return null!==this._lastRealBarIndex},a.prototype.rebuild=function(t,e){this._lastRealBarTime=t,this._extrapolatedBarsCache=[],this.ensureExtrapolatedToBar(e,this._lastRealBarIndex)},a.prototype.historyExtrapolator=function(){return void 0===this._historyExtrapolator&&(this._historyExtrapolator=new a(null,this._resolution,Math.max(this._maxDepth,1e3))),this._historyExtrapolator},a.prototype.getPointTimeUTC=function(t,e,i){var o,n;return 0===e?t:!this.ready()||t<this._lastRealBarTime/1e3?(this.historyExtrapolator().setLastBarTime(0,1e3*t),this.historyExtrapolator().getPointTimeUTC(t,e,i)):(o=0===this._extrapolatedBarsCache.length||t==this._lastRealBarTime/1e3,n=o?-1:this.indexOfBar(t,i)-this._lastRealBarIndex-1,this.ensureExtrapolatedToBar(i,n+e+1),this._extrapolatedBarsCache[n+e])},a.prototype.findDistanceInBars=function(t,e,i){return t===e?0:(this.historyExtrapolator().setLastBarTime(0,1e3*t),this.historyExtrapolator().indexOfBar(e,i))},a.prototype.indexOfBar=function(t,e){this._ensureExtrapolatedToTime(e,1e3*t);var i=r.lower_bound(this._extrapolatedBarsCache,t,function(t,e){return t>e?1:t<e?-1:0});return i===-1?i:this._lastRealBarIndex+i+1},a.prototype._extrapolateData=function(t,e){var i,o,n;if(!this._lastRealBarTime)throw"No real bars known, so cannot extrapolate anything";if(i=e(this._lastRealBarTime),!i||0===i.length)return void(null!==this._lastRealBarIndex&&null!==this._chartApiMessager&&this._chartApiMessager.onTickmarksUpdated(this._lastRealBarIndex+1,this._extrapolatedBarsCache,t,this._resolution));for(o=0;o<i.length;++o)i[o]=i[o]/1e3;for(i[0]==this._lastRealBarTime/1e3&&(i=i.slice(1)),this._extrapolatedBarsCache=i,n=i.slice(0),n.sort(),o=0;o<n.length-1;++o)n[o]==n[o+1]&&console.error("Duplicating extrapolated bars: duplicated "+new Date(1e3*n[o]));null!==this._lastRealBarIndex&&null!==this._chartApiMessager&&this._chartApiMessager.onTickmarksUpdated(this._lastRealBarIndex+1,i,t,this._resolution)},a.prototype.onTickmarksNeeded=function(t,e){if(this.ready())this.ensureExtrapolatedToBar(t,e);else{var i=this;this._onReadyCallbacks.push(function(){i.ensureExtrapolatedToBar(t,e)})}},a.prototype.ensureExtrapolatedToBar=function(t,e){var i=this;return this._extrapolateData(t,function(o){return i._extrapolatedBarsCache.length>=e||!i._shouldExtrapolateMore()?null:r.extrapolateBarsFrontByCount(i.newBarBuilder(t),o,e)})},a.prototype._ensureExtrapolatedToTime=function(t,e){var i=this;return this._extrapolateData(t,function(o){if(o>=e||!i._shouldExtrapolateMore())return null;var n=r.extrapolateBarsFrontToTime(i.newBarBuilder(t),o,e);return n[n.length-1]<e&&console.warn("Extrapolation error: not enough data created"),n})},a.prototype.newBarBuilder=function(t){var e=s.Symbol.newSession(t.timezone,t.session);return s.Symbol.newBarBuilder(this._resolution,e)},a.prototype._shouldExtrapolateMore=function(){return this._extrapolatedBarsCache.length<this._maxDepth},a.prototype.setLastBarTime=function(t,e){(null===this._lastRealBarIndex||this._lastRealBarIndex===t&&this._lastRealBarTime!==e)&&(this._extrapolatedBarsCache=[]),this._extrapolatedBarsCache&&this._extrapolatedBarsCache.length&&this._lastRealBarIndex!==t&&(this._lastRealBarIndex>t?this._extrapolatedBarsCache=[]:this._extrapolatedBarsCache.shift(t-this._lastRealBarIndex)),this._lastRealBarIndex=t,this._lastRealBarTime=e;for(var i=0;i<this._onReadyCallbacks.length;++i)this._onReadyCallbacks[i]();this._onReadyCallbacks=[]},{remove:e,storage:o}}();t.exports=o},function(t,e,i){(function(e){"use strict";var o=i(389),n=i(43),s=function(){function t(t,e){return t}function s(e,i,o,n,s,r){var a,l,h,c,d=t(i,o);for(p.hasOwnProperty(d)||(p[d]=[]),a=[],l=0;l<n.length;++l)n[l][1]<0&&(n[l][1]=0),0!==n[l][1]?(h=s.getPointTimeUTC(n[l][0],n[l][1],r),a.push(h)):n[l][0]&&a.push(n[l][0]);c={guid:e,points:a},p[d].push(c)}function r(t){var e,i,o;for(e in p)for(i=p[e],o=0;o<i.length;++o)if(i[o].guid==t)return void i.splice(o,1)}function a(t,e,i,o,n){var s,r,a,l=[];for(s=0;s<t.points.length;++s){if(r=t.points[s],a=h(e,r,i,o,n),null===a)return null;l.push({index:s,value:[a,r]})}return l}function l(e,i,o,n,s,r){var l,h,c,d,u=t(e,i);if(p.hasOwnProperty(u))for(l=p[u].length,h=0;h<l;++h)c=p[u][h],d=a(c,o,n,s,i),null!==d&&r(c.guid,d)}function h(t,e,i,n,s){var r,a;return 1e3*e<t[0].value[0]?-d(n,s,e,t[0].value[0]/1e3,i):(r=o.lower_bound(t,1e3*e,function(t,e){return t.value[0]>e?1:t.value[0]<e?-1:0}),r>=0&&e<t[t.length-1].value[0]?(t[r].value[0]/1e3!==e&&0!==r&&r--,t[r].index):(a=i.indexOfBar(e,n),a===-1?null:a))}function c(t,e,i,o,s){function r(t,e){var i=new Date(1e3*t),o=new Date(1e3*e),n=12*(o.getFullYear()-i.getFullYear());return n-=i.getMonth()+1,n+=o.getMonth(),n<=0?0:n}var a,l,h,c,d,p,u,_,g,m,v,y,w,b,S;if(e.kind()==n.MONTHS)a=r(o,s)/e.multiplier();else if(e.kind()===n.WEEKS)l=Math.ceil((s-o)/604800),a=Math.ceil(l/e.multiplier());else{if(h=f.utc_to_cal(i.timezone,+new Date(1e3*o)),c=f.utc_to_cal(i.timezone,+new Date(1e3*s)),d=(s-o)/86400,d>4*(7-i.spec.weekEndsCount()))u=d/7,p=u*(7-i.spec.weekEndsCount());else{for(_=0,g={},m=h;m.valueOf()<=c.valueOf();m=f.add_days_considering_dst(i.timezone,m,1))v=f.get_day_of_week(m),void 0===g[v]&&(g[v]=i.spec.isWeekEnd(v)),g[v]&&_++;p=d-_}if(e.kind()===n.DAYS)a=Math.ceil(p/e.multiplier());else{if(y=e.kind()==n.HOURS?60*e.multiplier()*60:e.kind()==n.SECONDS?e.multiplier():60*e.multiplier(),d<1&&(w=i.spec.findSession(f.get_day_of_week(h),f.get_minutes_from_midnight(h)),b=i.spec.findSession(f.get_day_of_week(c),f.get_minutes_from_midnight(c)),w===b))return Math.ceil((s-o)/y);v=i.spec.entries[0]._dayOfWeek,S=60*i.spec.entries.reduce(function(t,e){return t+(e._dayOfWeek==v?e._length:0)},0),a=Math.ceil(p*S/y)}}return a}function d(t,e,i,s,r){var a,l,h=new n(e),d=f.get_timezone(t.timezone),p=new o.Session;return p.init(d,t.session),h.isDWM()&&(a=_.Symbol.newBarBuilder(e,p,p),i=a.tradingDayToSessionStart(1e3*i)/1e3,s=a.tradingDayToSessionStart(1e3*s)/1e3),i>=s?0:(l=c(t,h,p,i,s),l>=1e3?l:r.findDistanceInBars(i,s,t))}var p={},u="undefined"!=typeof window?window:e,_=i(390),f=u.PineJsCalendar?u.PineJsCalendar:i(37);return{createPointset:s,removePointset:r,broadcastPointsetsUpdates:l,tests:{approxBarsInterval:c}}}();t.exports=s}).call(e,function(){return this}())},function(t,e,i){"use strict";var o=i(390);JSServer.studyLibrary=[{name:"Accumulation/Distribution",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#808000"}},precision:4,inputs:{}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Accumulation/Distribution",shortDescription:"Accum/Dist",is_price_study:!1,inputs:[],id:"Accumulation/Distribution@tv-basicstudies-1",scriptIdPart:"",name:"Accumulation/Distribution"},constructor:function(){this.f_0=function(t,e,i,n){var s=o.Std.or(o.Std.and(o.Std.eq(t,e),o.Std.eq(t,i)),o.Std.eq(e,i))?0:(2*t-i-e)/(e-i)*n;return s},this.main=function(t,e){var i,n,s;return this._context=t,this._input=e,i=this.f_0(o.Std.close(this._context),o.Std.high(this._context),o.Std.low(this._context),o.Std.volume(this._context)),n=o.Std.cum(i,this._context),s=n,[s]}}},{name:"Aroon",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF6A00"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0094FF"}},precision:4,inputs:{in_0:14}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"}],styles:{plot_0:{title:"Upper",histogramBase:0,joinPoints:!1},plot_1:{title:"Lower",histogramBase:0,joinPoints:!1}},description:"Aroon",shortDescription:"Aroon",is_price_study:!1,inputs:[{id:"in_0",name:"length",defval:14,type:"integer",min:1,max:1e12}],id:"Aroon@tv-basicstudies-1",scriptIdPart:"",name:"Aroon"},constructor:function(){this.f_0=function(t,e){var i=100*(t+e)/e;return i},this.main=function(t,e){var i,n,s,r,a,l,h,c,d,p,u,_;return this._context=t,this._input=e,i=this._input(0),n=o.Std.high(this._context),s=i+1,r=this._context.new_var(n),a=o.Std.highestbars(r,s,this._context),l=this.f_0(a,i),h=o.Std.low(this._context),c=this._context.new_var(h),d=o.Std.lowestbars(c,s,this._context),p=this.f_0(d,i),u=l,_=p,[u,_]}}},{name:"Advance/Decline",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,inputs:{in_0:10}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Advance/Decline",shortDescription:"AD",is_price_study:!1,inputs:[{id:"in_0",name:"length",defval:10,type:"integer",min:1,max:1e12}],id:"Advance/Decline@tv-basicstudies-1",scriptIdPart:"",name:"Advance/Decline"},constructor:function(){this.f_0=function(t,e){var i=o.Std.gt(t,e);return i},this.f_1=function(t,e){var i=o.Std.lt(t,e);return i},this.f_2=function(t,e){var i=t/e;return i},this.main=function(t,e){var i,n,s,r,a,l,h,c,d;return this._context=t,this._input=e,i=this._input(0),n=this.f_0(o.Std.close(this._context),o.Std.open(this._context)),s=this._context.new_var(n),r=o.Std.sum(s,i,this._context),a=this.f_1(o.Std.close(this._context),o.Std.open(this._context)),l=this._context.new_var(a),h=o.Std.sum(l,i,this._context),c=this.f_2(r,h),d=c,[d]}}},{name:"Average True Range",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,inputs:{in_0:14}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Average True Range",shortDescription:"ATR",is_price_study:!1,inputs:[{id:"in_0",name:"length",defval:14,type:"integer",min:1,max:1e12}],id:"Average True Range@tv-basicstudies-1",scriptIdPart:"",name:"Average True Range"},constructor:function(){this.main=function(t,e){var i,n,s,r;return this._context=t,this._input=e,i=this._input(0),n=o.Std.tr(this._context),s=this._context.new_var(n),r=o.Std.rma(s,i,this._context),[r]}}},{name:"Awesome Oscillator",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:1,trackPrice:!1,transparency:35,visible:!0,color:"#000080"}},precision:4,palettes:{palette_0:{colors:{0:{color:"#FF0000",width:1,style:0},1:{color:"#008000",width:1,style:0}}}},inputs:{}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",palette:"palette_0",target:"plot_0",type:"colorer"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Awesome Oscillator",shortDescription:"AO",is_price_study:!1,palettes:{palette_0:{colors:{0:{name:"Color 0"},1:{name:"Color 1"}}}},inputs:[],id:"Awesome Oscillator@tv-basicstudies-1",scriptIdPart:"",name:"Awesome Oscillator"},constructor:function(){this.f_0=function(t,e){var i=t-e;return i},this.f_1=function(t){var e=o.Std.le(t,0)?0:1;return e},this.main=function(t,e){var i,n,s,r,a,l,h,c,d,p;return this._context=t,this._input=e,i=o.Std.hl2(this._context),n=this._context.new_var(i),s=o.Std.sma(n,5,this._context),r=this._context.new_var(i),a=o.Std.sma(r,34,this._context),l=this.f_0(s,a),h=l,c=this._context.new_var(l),d=o.Std.change(c),p=this.f_1(d),[h,p]}}},{name:"Bollinger Bands Width",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,inputs:{in_0:20,in_1:2}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Bollinger Bands Width",shortDescription:"BBW",is_price_study:!1,inputs:[{id:"in_0",name:"length",defval:20,type:"integer",min:1,max:1e12},{id:"in_1",name:"mult",defval:2,type:"float",min:.001,max:50}],id:"Bollinger Bands Width@tv-basicstudies-1",scriptIdPart:"",name:"Bollinger Bands Width"},constructor:function(){this.f_0=function(t,e){var i=t*e;return i},this.f_1=function(t,e){var i=t+e;return i},this.f_2=function(t,e){var i=t-e;return i},this.f_3=function(t,e,i){var o=(t-e)/i;return o},this.main=function(t,e){var i,n,s,r,a,l,h,c,d,p,u,_;return this._context=t,this._input=e,i=o.Std.close(this._context),n=this._input(0),s=this._input(1),r=this._context.new_var(i),a=o.Std.sma(r,n,this._context),l=this._context.new_var(i),h=o.Std.stdev(l,n,this._context),c=this.f_0(s,h),d=this.f_1(a,c),p=this.f_2(a,c),u=this.f_3(d,p,a),_=u,[_]}}},{name:"Balance of Power",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,inputs:{}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Balance of Power",shortDescription:"Balance of Power",is_price_study:!1,inputs:[],id:"Balance of Power@tv-basicstudies-1",scriptIdPart:"",name:"Balance of Power"},constructor:function(){this.f_0=function(t,e,i,o){var n=(t-e)/(i-o);return n},this.main=function(t,e){this._context=t,this._input=e;var i=this.f_0(o.Std.close(this._context),o.Std.open(this._context),o.Std.high(this._context),o.Std.low(this._context));return[i]}}},{name:"Bollinger Bands",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},plot_2:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,filledAreasStyle:{fill_0:{color:"#000080",transparency:90,visible:!0}},inputs:{in_0:20,in_1:2}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"},{id:"plot_2",type:"line"}],styles:{plot_0:{title:"Median",histogramBase:0,joinPoints:!1},plot_1:{title:"Upper",histogramBase:0,joinPoints:!1},plot_2:{title:"Lower",histogramBase:0,joinPoints:!1}},description:"Bollinger Bands",shortDescription:"BB",is_price_study:!0,filledAreas:[{id:"fill_0",objAId:"plot_1",objBId:"plot_2",type:"plot_plot",title:"Plots Background"}],inputs:[{id:"in_0",name:"length",defval:20,type:"integer",min:1,max:1e12},{id:"in_1",name:"mult",defval:2,type:"float",min:.001,max:50}],id:"Bollinger Bands@tv-basicstudies-1",scriptIdPart:"",name:"Bollinger Bands"},constructor:function(){this.f_0=function(t,e){var i=t*e;return i},this.f_1=function(t,e){var i=t+e;return i},this.f_2=function(t,e){var i=t-e;return i},this.main=function(t,e){var i,n,s,r,a,l,h,c,d,p,u,_,f;return this._context=t,this._input=e,i=o.Std.close(this._context),n=this._input(0),s=this._input(1),r=this._context.new_var(i),a=o.Std.sma(r,n,this._context),l=this._context.new_var(i),h=o.Std.stdev(l,n,this._context),c=this.f_0(s,h),d=this.f_1(a,c),p=this.f_2(a,c),u=a,_=d,f=p,[u,_,f]}}},{name:"Bollinger Bands %B",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008080"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:1},{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:0}],filledAreasStyle:{fill_0:{color:"#008080",transparency:90,visible:!0}},inputs:{in_0:20,in_1:2}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Bollinger Bands %B",shortDescription:"BB %B",is_price_study:!1,bands:[{id:"hline_0",name:"UpperLimit"},{id:"hline_1",name:"LowerLimit"}],filledAreas:[{id:"fill_0",objAId:"hline_0",objBId:"hline_1",type:"hline_hline",title:"Hlines Background"}],inputs:[{id:"in_0",name:"length",defval:20,type:"integer",min:1,max:1e12},{id:"in_1",name:"mult",defval:2,type:"float",min:.001,max:50}],id:"Bollinger Bands %B@tv-basicstudies-1",scriptIdPart:"",name:"Bollinger Bands %B"},constructor:function(){this.f_0=function(t,e){var i=t*e;return i},this.f_1=function(t,e){var i=t+e;return i},this.f_2=function(t,e){var i=t-e;return i},this.f_3=function(t,e,i){var o=(t-e)/(i-e);return o},this.main=function(t,e){var i,n,s,r,a,l,h,c,d,p,u,_;return this._context=t,this._input=e,i=o.Std.close(this._context),n=this._input(0),s=this._input(1),r=this._context.new_var(i),a=o.Std.sma(r,n,this._context),l=this._context.new_var(i),h=o.Std.stdev(l,n,this._context),c=this.f_0(s,h),d=this.f_1(a,c),p=this.f_2(a,c),u=this.f_3(i,p,d),_=u,[_]}}},{name:"Chaikin Money Flow",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008000"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:0}],inputs:{in_0:20}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Chaikin Money Flow",shortDescription:"CMF",is_price_study:!1,bands:[{id:"hline_0",name:"Zero"}],inputs:[{id:"in_0",name:"length",defval:20,type:"integer",min:1,max:1e12}],id:"Chaikin Money Flow@tv-basicstudies-1",scriptIdPart:"",name:"Chaikin Money Flow"},constructor:function(){this.f_0=function(t,e,i,n){var s=o.Std.or(o.Std.and(o.Std.eq(t,e),o.Std.eq(t,i)),o.Std.eq(e,i))?0:(2*t-i-e)/(e-i)*n;return s},this.f_1=function(t,e){var i=t/e;return i},this.main=function(t,e){var i,n,s,r,a,l,h,c,d;return this._context=t,this._input=e,i=this._input(0),n=this.f_0(o.Std.close(this._context),o.Std.high(this._context),o.Std.low(this._context),o.Std.volume(this._context)),s=this._context.new_var(n),r=o.Std.sum(s,i,this._context),a=o.Std.volume(this._context),l=this._context.new_var(a),h=o.Std.sum(l,i,this._context),c=this.f_1(r,h),d=c,[d]}}},{name:"Chaikin Oscillator",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:0}],inputs:{in_0:3,in_1:10}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Chaikin Oscillator",shortDescription:"Chaikin Osc",is_price_study:!1,bands:[{id:"hline_0",name:"Zero"}],inputs:[{id:"in_0",name:"short",defval:3,type:"integer",min:1,max:1e12},{id:"in_1",name:"long",defval:10,type:"integer",min:1,max:1e12}],id:"Chaikin Oscillator@tv-basicstudies-1",scriptIdPart:"",name:"Chaikin Oscillator"},constructor:function(){this.f_0=function(t,e){var i=t-e;return i},this.main=function(t,e){var i,n,s,r,a,l,h,c,d;return this._context=t,this._input=e,i=this._input(0),n=this._input(1),s=o.Std.accdist(this._context),r=this._context.new_var(s),a=o.Std.ema(r,i,this._context),l=this._context.new_var(s),h=o.Std.ema(l,n,this._context),c=this.f_0(a,h),d=c,[d]}}},{name:"Chande Kroll Stop",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008000"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,inputs:{in_0:10,in_1:1,in_2:9}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"}],styles:{plot_0:{title:"Long",histogramBase:0,joinPoints:!1},plot_1:{title:"Short",histogramBase:0,joinPoints:!1}},description:"Chande Kroll Stop",shortDescription:"Chande Kroll Stop",is_price_study:!0,inputs:[{id:"in_0",name:"p",defval:10,type:"integer",min:1,max:1e12},{id:"in_1",name:"x",defval:1,type:"integer",min:1,max:1e12},{id:"in_2",name:"q",defval:9,type:"integer",min:1,max:1e12}],id:"Chande Kroll Stop@tv-basicstudies-1",scriptIdPart:"",name:"Chande Kroll Stop"},constructor:function(){this.f_0=function(t,e,i){var o=t-e*i;return o},this.f_1=function(t,e,i){var o=t+e*i;return o},this.main=function(t,e){var i,n,s,r,a,l,h,c,d,p,u,_,f,g,m,v,y;return this._context=t,this._input=e,i=this._input(0),n=this._input(1),s=this._input(2),r=o.Std.high(this._context),a=this._context.new_var(r),l=o.Std.highest(a,i,this._context),h=o.Std.atr(i,this._context),c=this.f_0(l,n,h),d=this._context.new_var(r),p=o.Std.lowest(d,i,this._context),u=this.f_1(p,n,h),_=this._context.new_var(c),f=o.Std.highest(_,s,this._context),g=this._context.new_var(u),m=o.Std.lowest(g,s,this._context),v=m,y=f,[v,y]}}},{name:"Chande Momentum Oscillator",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008080"}},precision:4,inputs:{in_0:9}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Chande Momentum Oscillator",shortDescription:"ChandeMO",is_price_study:!1,inputs:[{id:"in_0",name:"length",defval:9,type:"integer",min:1,max:1e12}],id:"Chande Momentum Oscillator@tv-basicstudies-1",scriptIdPart:"",name:"Chande Momentum Oscillator"},constructor:function(){this.f_0=function(t){var e=o.Std.ge(t,0)?t:0;return e},this.f_1=function(t){var e=o.Std.ge(t,0)?0:-t;return e},this.f_2=function(t,e){var i=100*t/e;return i},this.f_3=function(t,e){var i=this.f_2(t-e,t+e);return i},this.main=function(t,e){var i,n,s,r,a,l,h,c,d,p,u,_;return this._context=t,this._input=e,i=this._input(0),n=o.Std.close(this._context),s=this._context.new_var(n),r=o.Std.change(s),a=this.f_0(r),l=this.f_1(r),h=this._context.new_var(a),c=o.Std.sum(h,i,this._context),d=this._context.new_var(l),p=o.Std.sum(d,i,this._context),u=this.f_3(c,p),_=u,[_]}}},{name:"Commodity Channel Index",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#808000"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:100},{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:-100}],filledAreasStyle:{fill_0:{color:"#808000",transparency:90,visible:!0}},inputs:{in_0:20}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Commodity Channel Index",shortDescription:"CCI",is_price_study:!1,bands:[{id:"hline_0",name:"UpperLimit"},{id:"hline_1",name:"LowerLimit"}],filledAreas:[{id:"fill_0",objAId:"hline_0",objBId:"hline_1",type:"hline_hline",title:"Hlines Background"}],inputs:[{id:"in_0",name:"length",defval:20,type:"integer",min:1,max:1e12}],id:"Commodity Channel Index@tv-basicstudies-1",scriptIdPart:"",name:"Commodity Channel Index"},constructor:function(){this.f_0=function(t,e,i){var o=(t-e)/(.015*i);return o},this.main=function(t,e){var i,n,s,r,a,l,h,c;return this._context=t,this._input=e,i=o.Std.close(this._context),n=this._input(0),s=this._context.new_var(i),r=o.Std.sma(s,n,this._context),a=this._context.new_var(i),l=o.Std.dev(a,n,this._context),h=this.f_0(i,r,l),c=h,[c]}}},{name:"Choppiness Index",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:61.8},{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:38.2}],filledAreasStyle:{fill_0:{color:"#008000",transparency:90,visible:!0}},inputs:{in_0:14}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Choppiness Index",shortDescription:"CHOP",is_price_study:!1,bands:[{id:"hline_0",name:"UpperLimit"},{id:"hline_1",name:"LowerLimit"}],filledAreas:[{id:"fill_0",objAId:"hline_0",objBId:"hline_1",type:"hline_hline",title:"Hlines Background"}],inputs:[{id:"in_0",name:"length",defval:14,type:"integer",min:1,max:1e12}],id:"Choppiness Index@tv-basicstudies-1",scriptIdPart:"",name:"Choppiness Index"},constructor:function(){this.f_0=function(t,e,i,n){var s=100*o.Std.log10(t/(e-i))/n;return s},this.main=function(t,e){var i,n,s,r,a,l,h,c,d,p,u,_,f;return this._context=t,this._input=e,i=this._input(0),n=o.Std.atr(1,this._context),s=this._context.new_var(n),r=o.Std.sum(s,i,this._context),a=o.Std.high(this._context),l=this._context.new_var(a),h=o.Std.highest(l,i,this._context),c=o.Std.low(this._context),d=this._context.new_var(c),p=o.Std.lowest(d,i,this._context),u=o.Std.log10(i),_=this.f_0(r,h,p,u),f=_,[f]}}},{name:"Directional Movement Index",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,
visible:!0,color:"#FF7F00"},plot_2:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,inputs:{in_0:14,in_1:14}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"},{id:"plot_2",type:"line"}],styles:{plot_0:{title:"+DI",histogramBase:0,joinPoints:!1},plot_1:{title:"-DI",histogramBase:0,joinPoints:!1},plot_2:{title:"ADX",histogramBase:0,joinPoints:!1}},description:"Directional Movement Index",shortDescription:"DMI",is_price_study:!1,inputs:[{id:"in_0",name:"DI Length",defval:14,type:"integer",min:1,max:1e12},{id:"in_1",name:"ADX Smoothing",defval:14,type:"integer",min:1,max:50}],id:"Directional Movement Index@tv-basicstudies-1",scriptIdPart:"",name:"Directional Movement Index"},constructor:function(){this.f_0=function(t){var e=-t;return e},this.f_1=function(t,e){var i=o.Std.and(o.Std.gt(t,e),o.Std.gt(t,0))?t:0;return i},this.f_2=function(t,e){var i=100*t/e;return i},this.f_3=function(t,e){var i=t+e;return i},this.f_4=function(t,e,i){var n=o.Std.abs(t-e)/(o.Std.eq(i,0)?1:i);return n},this.f_5=function(t){var e=100*t;return e},this.main=function(t,e){var i,n,s,r,a,l,h,c,d,p,u,_,f,g,m,v,y,w,b,S,T,C,x,P,L,k,E,I,A,V;return this._context=t,this._input=e,i=this._input(0),n=this._input(1),s=o.Std.high(this._context),r=this._context.new_var(s),a=o.Std.change(r),l=o.Std.low(this._context),h=this._context.new_var(l),c=o.Std.change(h),d=this.f_0(c),p=o.Std.tr(this._context),u=this._context.new_var(p),_=o.Std.rma(u,i,this._context),f=this.f_1(a,d),g=this._context.new_var(f),m=o.Std.rma(g,i,this._context),v=this.f_2(m,_),y=o.Std.fixnan(v,this._context),w=this.f_1(d,a),b=this._context.new_var(w),S=o.Std.rma(b,i,this._context),T=this.f_2(S,_),C=o.Std.fixnan(T,this._context),x=this.f_3(y,C),P=this.f_4(y,C,x),L=this._context.new_var(P),k=o.Std.rma(L,n,this._context),E=this.f_5(k),I=y,A=C,V=E,[I,A,V]}}},{name:"Correlation Coeff",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:4,trackPrice:!1,transparency:40,visible:!0,color:"#800080"}},precision:4,inputs:{in_0:"AAPL",in_1:20}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Correlation Coeff",shortDescription:"CC",is_price_study:!1,inputs:[{id:"in_0",name:"sym",defval:"AAPL",type:"symbol"},{id:"in_1",name:"length",defval:20,type:"integer",min:1,max:1e12}],id:"Correlation Coeff@tv-basicstudies-1",scriptIdPart:"",name:"Correlation Coeff"},constructor:function(){this.init=function(t,e){this._context=t,this._input=e,this._context.new_sym(this._input(0),o.Std.period(this._context),o.Std.period(this._context))},this.main=function(t,e){var i,n,s,r,a,l,h,c,d,p,u,_;return this._context=t,this._input=e,i=this._context.new_var(this._context.symbol.time),n=this._input(0),s=o.Std.period(this._context),r=o.Std.close(this._context),a=this._input(1),this._context.select_sym(1),l=this._context.new_var(this._context.symbol.time),h=o.Std.close(this._context),c=this._context.new_var(h),this._context.select_sym(0),d=c.adopt(l,i,0),p=this._context.new_var(r),u=this._context.new_var(d),_=o.Std.correlation(p,u,a,this._context),[_]}}},{name:"Donchian Channels",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},plot_2:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF7F00"}},precision:4,filledAreasStyle:{fill_0:{color:"#0000FF",transparency:90,visible:!0}},inputs:{in_0:20}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"},{id:"plot_2",type:"line"}],styles:{plot_0:{title:"Lower",histogramBase:0,joinPoints:!1},plot_1:{title:"Upper",histogramBase:0,joinPoints:!1},plot_2:{title:"Basis",histogramBase:0,joinPoints:!1}},description:"Donchian Channels",shortDescription:"DC",is_price_study:!0,filledAreas:[{id:"fill_0",objAId:"plot_1",objBId:"plot_0",type:"plot_plot",title:"Plots Background"}],inputs:[{id:"in_0",name:"length",defval:20,type:"integer",min:1,max:1e12}],id:"Donchian Channels@tv-basicstudies-1",scriptIdPart:"",name:"Donchian Channels"},constructor:function(){this.main=function(t,e){var i,n,s,r,a,l,h,c,d,p,u;return this._context=t,this._input=e,i=this._input(0),n=o.Std.low(this._context),s=this._context.new_var(n),r=o.Std.lowest(s,i,this._context),a=o.Std.high(this._context),l=this._context.new_var(a),h=o.Std.highest(l,i,this._context),c=o.Std.avg(h,r),d=r,p=h,u=c,[d,p,u]}}},{name:"Double Exponential Moving Average",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008000"}},precision:4,inputs:{in_0:9}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Double Exponential Moving Average",shortDescription:"DEMA",is_price_study:!0,inputs:[{id:"in_0",name:"length",defval:9,type:"integer",min:1,max:1e12}],id:"Double Exponential Moving Average@tv-basicstudies-1",scriptIdPart:"",name:"Double Exponential Moving Average"},constructor:function(){this.f_0=function(t,e){var i=2*t-e;return i},this.main=function(t,e){var i,n,s,r,a,l,h,c;return this._context=t,this._input=e,i=this._input(0),n=o.Std.close(this._context),s=this._context.new_var(n),r=o.Std.ema(s,i,this._context),a=this._context.new_var(r),l=o.Std.ema(a,i,this._context),h=this.f_0(r,l),c=h,[c]}}},{name:"Ease of Movement",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#808000"}},precision:4,inputs:{in_0:1e4,in_1:14}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Ease of Movement",shortDescription:"EOM",is_price_study:!1,inputs:[{id:"in_0",name:"Divisor",defval:1e4,type:"integer",min:1,max:1e12},{id:"in_1",name:"length",defval:14,type:"integer",min:1,max:1e12}],id:"Ease of Movement@tv-basicstudies-1",scriptIdPart:"",name:"Ease of Movement"},constructor:function(){this.f_0=function(t,e,i,o,n){var s=t*e*(i-o)/n;return s},this.main=function(t,e){var i,n,s,r,a,l,h,c,d;return this._context=t,this._input=e,i=this._input(0),n=this._input(1),s=o.Std.hl2(this._context),r=this._context.new_var(s),a=o.Std.change(r),l=this.f_0(i,a,o.Std.high(this._context),o.Std.low(this._context),o.Std.volume(this._context)),h=this._context.new_var(l),c=o.Std.sma(h,n,this._context),d=c,[d]}}},{name:"Elders Force Index",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#800000"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:0}],inputs:{in_0:13}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Elders Force Index",shortDescription:"EFI",is_price_study:!1,bands:[{id:"hline_0",name:"Zero"}],inputs:[{id:"in_0",name:"length",defval:13,type:"integer",min:1,max:1e12}],id:"Elders Force Index@tv-basicstudies-1",scriptIdPart:"",name:"Elders Force Index"},constructor:function(){this.f_0=function(t,e){var i=t*e;return i},this.main=function(t,e){var i,n,s,r,a,l,h,c;return this._context=t,this._input=e,i=this._input(0),n=o.Std.close(this._context),s=this._context.new_var(n),r=o.Std.change(s),a=this.f_0(r,o.Std.volume(this._context)),l=this._context.new_var(a),h=o.Std.ema(l,i,this._context),c=h,[c]}}},{name:"Envelope",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF7F00"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},plot_2:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,filledAreasStyle:{fill_0:{color:"#0000FF",transparency:90,visible:!0}},inputs:{in_0:20,in_1:10,in_2:!1}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"},{id:"plot_2",type:"line"}],styles:{plot_0:{title:"Median",histogramBase:0,joinPoints:!1},plot_1:{title:"Upper",histogramBase:0,joinPoints:!1},plot_2:{title:"Lower",histogramBase:0,joinPoints:!1}},description:"Envelope",shortDescription:"Env",is_price_study:!0,filledAreas:[{id:"fill_0",objAId:"plot_1",objBId:"plot_2",type:"plot_plot",title:"Plots Background"}],inputs:[{id:"in_0",name:"Length",defval:20,type:"integer",min:1,max:1e12},{id:"in_1",name:"percent",defval:10,type:"float",min:-1e12,max:1e12},{id:"in_2",name:"exponential",defval:!1,type:"bool"}],id:"Envelope@tv-basicstudies-1",scriptIdPart:"",name:"Envelope"},constructor:function(){this.f_0=function(t,e,i){var o=t?e:i;return o},this.f_1=function(t,e){var i=t*(1+e);return i},this.f_2=function(t,e){var i=t*(1-e);return i},this.main=function(t,e){var i,n,s,r,a,l,h,c,d,p,u,_,f,g,m;return this._context=t,this._input=e,i=o.Std.close(this._context),n=this._input(0),s=this._input(1),r=this._input(2),a=this._context.new_var(i),l=o.Std.ema(a,n,this._context),h=this._context.new_var(i),c=o.Std.sma(h,n,this._context),d=this.f_0(r,l,c),p=s/100,u=this.f_1(d,p),_=this.f_2(d,p),f=d,g=u,m=_,[f,g,m]}}},{name:"Ichimoku Cloud",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},plot_2:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008000"},plot_3:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#800080"},plot_4:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#800080"}},precision:4,filledAreasStyle:{fill_0:{color:"#000080",transparency:90,visible:!0}},inputs:{in_0:9,in_1:26,in_2:52,in_3:26}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"},{id:"plot_2",type:"line"},{id:"plot_3",type:"line"},{id:"plot_4",type:"line"}],styles:{plot_0:{title:"Tenkan-sen",histogramBase:0,joinPoints:!1},plot_1:{title:"Kijun-sen",histogramBase:0,joinPoints:!1},plot_2:{title:"Chikou span",histogramBase:0,joinPoints:!1},plot_3:{title:"Senkou A",histogramBase:0,joinPoints:!1},plot_4:{title:"Senkou B",histogramBase:0,joinPoints:!1}},description:"Ichimoku Cloud",shortDescription:"Ichimoku",is_price_study:!0,filledAreas:[{id:"fill_0",objAId:"plot_3",objBId:"plot_4",type:"plot_plot",title:"Plots Background"}],inputs:[{id:"in_0",name:"Short",defval:9,type:"integer",min:1,max:1e12},{id:"in_1",name:"Middle",defval:26,type:"integer",min:1,max:1e12},{id:"in_2",name:"Long",defval:52,type:"integer",min:1,max:1e12},{id:"in_3",name:"displacement",defval:26,type:"integer",min:1,max:1e12}],id:"Ichimoku Cloud@tv-basicstudies-1",scriptIdPart:"",name:"Ichimoku Cloud"},constructor:function(){this.f_0=function(t){var e=-t;return e},this.main=function(t,e){var i,n,s,r,a,l,h,c,d,p,u,_,f,g,m,v,y,w,b,S,T,C,x,P,L,k,E,I,A,V,M,$,D;return this._context=t,this._input=e,i=this._input(0),n=this._input(1),s=this._input(2),r=this._input(3),a=o.Std.low(this._context),l=i,h=this._context.new_var(a),c=o.Std.lowest(h,l,this._context),d=o.Std.high(this._context),p=this._context.new_var(d),u=o.Std.highest(p,l,this._context),_=o.Std.avg(c,u),f=_,g=n,m=this._context.new_var(a),v=o.Std.lowest(m,g,this._context),y=this._context.new_var(d),w=o.Std.highest(y,g,this._context),b=o.Std.avg(v,w),S=b,T=o.Std.avg(f,S),C=s,x=this._context.new_var(a),P=o.Std.lowest(x,C,this._context),L=this._context.new_var(d),k=o.Std.highest(L,C,this._context),E=o.Std.avg(P,k),I=E,A=f,V=S,M=o.Std.close(this._context),$=T,D=I,[A,V,{value:M,offset:this.f_0(r)},{value:$,offset:r},{value:D,offset:r}]}}},{name:"Klinger Oscillator",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#000080"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008000"}},precision:4,inputs:{}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1},plot_1:{title:"Signal",histogramBase:0,joinPoints:!1}},description:"Klinger Oscillator",shortDescription:"Klinger Oscillator",is_price_study:!1,inputs:[],id:"Klinger Oscillator@tv-basicstudies-1",scriptIdPart:"",name:"Klinger Oscillator"},constructor:function(){this.f_0=function(t,e){var i=o.Std.ge(t,0)?e:-e;return i},this.f_1=function(t,e){var i=t-e;return i},this.main=function(t,e){var i,n,s,r,a,l,h,c,d,p,u,_,f;return this._context=t,this._input=e,i=o.Std.hlc3(this._context),n=this._context.new_var(i),s=o.Std.change(n),r=this.f_0(s,o.Std.volume(this._context)),a=this._context.new_var(r),l=o.Std.ema(a,34,this._context),h=this._context.new_var(r),c=o.Std.ema(h,55,this._context),d=this.f_1(l,c),p=this._context.new_var(d),u=o.Std.ema(p,13,this._context),_=d,f=u,[_,f]}}},{name:"Hull MA",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#000080"}},precision:4,inputs:{in_0:9}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Hull MA",shortDescription:"HMA",is_price_study:!0,inputs:[{id:"in_0",name:"length",defval:9,type:"integer",min:1,max:1e12}],id:"Hull MA@tv-basicstudies-1",scriptIdPart:"",name:"Hull MA"},constructor:function(){this.f_0=function(t,e){var i=2*t-e;return i},this.main=function(t,e){var i,n,s,r,a,l,h,c,d,p,u,_,f;return this._context=t,this._input=e,i=o.Std.close(this._context),n=this._input(0),s=n/2,r=this._context.new_var(i),a=o.Std.wma(r,s,this._context),l=this._context.new_var(i),h=o.Std.wma(l,n,this._context),c=this.f_0(a,h),d=o.Std.sqrt(n),p=o.Std.round(d),u=this._context.new_var(c),_=o.Std.wma(u,p,this._context),f=_,[f]}}},{name:"Keltner Channels",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},plot_2:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,filledAreasStyle:{fill_0:{color:"#0000FF",transparency:90,visible:!0}},inputs:{in_0:!0,in_1:20,in_2:1}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"},{id:"plot_2",type:"line"}],styles:{plot_0:{title:"Upper",histogramBase:0,joinPoints:!1},plot_1:{title:"Middle",histogramBase:0,joinPoints:!1},plot_2:{title:"Lower",histogramBase:0,joinPoints:!1}},description:"Keltner Channels",shortDescription:"KC",is_price_study:!0,filledAreas:[{id:"fill_0",objAId:"plot_0",objBId:"plot_2",type:"plot_plot",title:"Plots Background"}],inputs:[{id:"in_0",name:"useTrueRange",defval:!0,type:"bool"},{id:"in_1",name:"length",defval:20,type:"integer",min:1,max:1e12},{id:"in_2",name:"mult",defval:1,type:"float",min:-1e12,max:1e12}],id:"Keltner Channels@tv-basicstudies-1",scriptIdPart:"",name:"Keltner Channels"},constructor:function(){this.f_0=function(t,e,i,o){var n=t?e:i-o;return n},this.f_1=function(t,e,i){var o=t+e*i;return o},this.f_2=function(t,e,i){var o=t-e*i;return o},this.main=function(t,e){var i,n,s,r,a,l,h,c,d,p,u,_,f,g;return this._context=t,this._input=e,i=o.Std.close(this._context),n=this._input(0),s=this._input(1),r=this._input(2),a=this._context.new_var(i),l=o.Std.ema(a,s,this._context),h=this.f_0(n,o.Std.tr(this._context),o.Std.high(this._context),o.Std.low(this._context)),c=this._context.new_var(h),d=o.Std.ema(c,s,this._context),p=this.f_1(l,d,r),u=this.f_2(l,d,r),_=p,f=l,g=u,[_,f,g]}}},{name:"Linear Regression Curve",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#000080"}},precision:4,inputs:{in_0:9}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Linear Regression Curve",shortDescription:"LRC",is_price_study:!0,inputs:[{id:"in_0",name:"Length",defval:9,type:"integer",min:1,max:1e12}],id:"Linear Regression Curve@tv-basicstudies-1",scriptIdPart:"",name:"Linear Regression Curve"},constructor:function(){this.main=function(t,e){var i,n,s,r,a;return this._context=t,this._input=e,i=o.Std.close(this._context),n=this._input(0),s=this._context.new_var(i),r=o.Std.linreg(s,n,0),a=r,[a]}}},{name:"Know Sure Thing",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008000"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:0}],inputs:{in_0:10,in_1:15,in_2:20,in_3:30,in_4:10,in_5:10,in_6:10,in_7:15,in_8:9}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"}],styles:{plot_0:{title:"KST",histogramBase:0,joinPoints:!1},plot_1:{title:"Signal",histogramBase:0,joinPoints:!1}},description:"Know Sure Thing",shortDescription:"KST",is_price_study:!1,bands:[{id:"hline_0",name:"Zero"}],inputs:[{id:"in_0",name:"roclen1",defval:10,type:"integer",min:1,max:1e12},{id:"in_1",name:"roclen2",defval:15,type:"integer",min:1,max:1e12},{id:"in_2",name:"roclen3",defval:20,type:"integer",min:1,max:1e12},{id:"in_3",name:"roclen4",defval:30,type:"integer",min:1,max:1e12},{id:"in_4",name:"smalen1",defval:10,type:"integer",min:1,max:1e12},{id:"in_5",name:"smalen2",defval:10,type:"integer",min:1,max:1e12},{id:"in_6",name:"smalen3",defval:10,type:"integer",min:1,max:1e12},{id:"in_7",name:"smalen4",defval:15,type:"integer",min:1,max:1e12},{id:"in_8",name:"siglen",defval:9,type:"integer",min:1,max:1e12}],id:"Know Sure Thing@tv-basicstudies-1",scriptIdPart:"",name:"Know Sure Thing"},constructor:function(){this.f_0=function(t,e,i,o){var n=t+2*e+3*i+4*o;return n},this.main=function(t,e){var i,n,s,r,a,l,h,c,d,p,u,_,f,g,m,v,y,w,b,S,T,C,x,P,L,k,E,I,A,V,M,$,D,B,O,R,z,N,F;return this._context=t,this._input=e,i=this._input(0),n=this._input(1),s=this._input(2),r=this._input(3),a=this._input(4),l=this._input(5),h=this._input(6),c=this._input(7),d=this._input(8),p=o.Std.close(this._context),u=i,_=this._context.new_var(p),f=o.Std.roc(_,u),g=a,m=this._context.new_var(f),v=o.Std.sma(m,g,this._context),y=n,w=this._context.new_var(p),b=o.Std.roc(w,y),S=l,T=this._context.new_var(b),C=o.Std.sma(T,S,this._context),x=s,P=this._context.new_var(p),L=o.Std.roc(P,x),k=h,E=this._context.new_var(L),I=o.Std.sma(E,k,this._context),A=r,V=this._context.new_var(p),M=o.Std.roc(V,A),$=c,D=this._context.new_var(M),B=o.Std.sma(D,$,this._context),O=this.f_0(v,C,I,B),R=this._context.new_var(O),z=o.Std.sma(R,d,this._context),N=O,F=z,[N,F]}}},{name:"MA Cross",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008000"},plot_2:{linestyle:0,linewidth:4,plottype:3,trackPrice:!1,transparency:35,visible:!0,color:"#000080"}},precision:4,inputs:{in_0:9,in_1:26}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"},{id:"plot_2",type:"line"}],styles:{plot_0:{title:"Short",histogramBase:0,joinPoints:!1},plot_1:{title:"Long",histogramBase:0,joinPoints:!1},plot_2:{title:"Crosses",histogramBase:0,joinPoints:!1}},description:"MA Cross",shortDescription:"MA Cross",is_price_study:!0,inputs:[{id:"in_0",name:"Short",defval:9,type:"integer",min:1,max:1e12},{id:"in_1",name:"Long",defval:26,type:"integer",min:1,max:1e12}],id:"MA Cross@tv-basicstudies-1",scriptIdPart:"",name:"MA Cross"},constructor:function(){this.f_0=function(t,e){var i=t?e:o.Std.na();return i},this.main=function(t,e){var i,n,s,r,a,l,h,c,d,p,u;return this._context=t,this._input=e,i=this._input(0),n=this._input(1),s=o.Std.close(this._context),r=this._context.new_var(s),a=o.Std.sma(r,i,this._context),l=this._context.new_var(s),h=o.Std.sma(l,n,this._context),c=a,d=h,p=o.Std.cross(a,h,this._context),u=this.f_0(p,a),[c,d,u]}}},{name:"Money Flow",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#459915"}},precision:4,bands:[{color:"#c0c0c0",linestyle:2,linewidth:1,visible:!0,value:80},{color:"#c0c0c0",linestyle:2,linewidth:1,visible:!0,value:20}],filledAreasStyle:{fill_0:{color:"#9915ff",transparency:90,visible:!0}},inputs:{in_0:14}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Money Flow",shortDescription:"MFI",is_price_study:!1,bands:[{id:"hline_0",name:"UpperLimit"},{id:"hline_1",name:"LowerLimit"}],filledAreas:[{id:"fill_0",objAId:"hline_0",objBId:"hline_1",type:"hline_hline",title:"Hlines Background"}],inputs:[{id:"in_0",name:"Length",defval:14,type:"integer",min:1,max:2e3}],id:"Money Flow@tv-basicstudies-1",scriptIdPart:"",name:"Money Flow"},constructor:function(){this.f_0=function(t,e,i){var n=t*(o.Std.le(e,0)?0:i);return n},this.f_1=function(t,e,i){var n=t*(o.Std.ge(e,0)?0:i);return n},this.main=function(t,e){var i,n,s,r,a,l,h,c,d,p,u,_;return this._context=t,this._input=e,i=this._input(0),n=o.Std.hlc3(this._context),s=this._context.new_var(n),r=o.Std.change(s),a=this.f_0(o.Std.volume(this._context),r,n),l=this._context.new_var(a),h=o.Std.sum(l,i,this._context),c=this.f_1(o.Std.volume(this._context),r,n),d=this._context.new_var(c),p=o.Std.sum(d,i,this._context),u=o.Std.rsi(h,p),_=u,[_]}}},{name:"Mass Index",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#000080"}},precision:4,inputs:{in_0:10}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Mass Index",shortDescription:"Mass Index",is_price_study:!1,inputs:[{id:"in_0",name:"length",defval:10,type:"integer",min:1,max:1e12}],id:"Mass Index@tv-basicstudies-1",scriptIdPart:"",name:"Mass Index"},constructor:function(){this.f_0=function(t,e){var i=t-e;return i},this.f_1=function(t,e){var i=t/e;return i},this.main=function(t,e){var i,n,s,r,a,l,h,c,d,p;return this._context=t,this._input=e,i=this._input(0),n=this.f_0(o.Std.high(this._context),o.Std.low(this._context)),s=this._context.new_var(n),r=o.Std.ema(s,9,this._context),a=this._context.new_var(r),l=o.Std.ema(a,9,this._context),h=this.f_1(r,l),c=this._context.new_var(h),d=o.Std.sum(c,i,this._context),p=d,[p]}}},{name:"Moving Average Exponential",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,inputs:{in_0:9,in_1:"close",in_2:0}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Moving Average Exponential",shortDescription:"EMA",is_price_study:!0,inputs:[{id:"in_0",name:"Length",defval:9,type:"integer",min:1,max:1e12},{id:"in_1",name:"Source",defval:"close",type:"source",options:["open","high","low","close","hl2","hlc3","ohlc4"]},{id:"in_2",name:"Offset",defval:0,type:"integer",min:-1e12,max:1e12}],id:"Moving Average Exponential@tv-basicstudies-1",scriptIdPart:"",name:"Moving Average Exponential"},constructor:function(){this.main=function(t,e){var i,n,s,r,a,l;return this._context=t,this._input=e,i=o.Std[this._input(1)](this._context),n=this._input(0),s=this._input(2),r=this._context.new_var(i),a=o.Std.ema(r,n,this._context),l=a,[{value:l,offset:s}]}}},{name:"Net Volume",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,inputs:{}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Net Volume",shortDescription:"Net Volume",is_price_study:!1,inputs:[],id:"Net Volume@tv-basicstudies-1",scriptIdPart:"",name:"Net Volume"},constructor:function(){this.f_0=function(t,e,i){var n=o.Std.gt(t,0)?e:o.Std.lt(i,0)?-e:0*e;return n},this.main=function(t,e){var i,n,s,r,a;return this._context=t,this._input=e,i=o.Std.close(this._context),n=this._context.new_var(i),s=o.Std.change(n),r=this.f_0(s,o.Std.volume(this._context),s),a=r,[a]}}},{name:"Moving Average Convergence/Divergence",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:1,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},plot_2:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,inputs:{in_0:12,in_1:26,in_3:"close",in_2:9}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"},{id:"plot_2",type:"line"}],styles:{plot_0:{title:"Histogram",histogramBase:0,joinPoints:!1},plot_1:{title:"MACD",histogramBase:0,joinPoints:!1},plot_2:{title:"Signal",histogramBase:0,joinPoints:!1}},description:"MACD",shortDescription:"MACD",is_price_study:!1,inputs:[{id:"in_0",name:"fastLength",defval:12,type:"integer",min:1,max:1e12},{id:"in_1",name:"slowLength",defval:26,type:"integer",min:1,max:1e12},{id:"in_3",name:"Source",defval:"close",type:"source",options:["open","high","low","close","hl2","hlc3","ohlc4"]},{id:"in_2",name:"signalLength",defval:9,type:"integer",min:1,max:1e12}],id:"Moving Average Convergence/Divergence@tv-basicstudies-1",scriptIdPart:"",name:"MACD"},constructor:function(){this.f_0=function(t,e){var i=t-e;return i},this.main=function(t,e){var i,n,s,r,a,l,h,c,d,p,u,_,f,g,m;return this._context=t,this._input=e,i=o.Std[this._input(2)](this._context),n=this._input(0),s=this._input(1),r=this._input(3),a=this._context.new_var(i),l=o.Std.ema(a,n,this._context),h=this._context.new_var(i),c=o.Std.ema(h,s,this._context),d=this.f_0(l,c),p=this._context.new_var(d),u=o.Std.sma(p,r,this._context),_=this.f_0(d,u),f=_,g=d,m=u,[f,g,m]}}},{name:"Moving Average",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,inputs:{in_0:9,in_1:"close",in_2:0}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Moving Average",shortDescription:"MA",is_price_study:!0,inputs:[{id:"in_0",name:"Length",defval:9,type:"integer",min:1,max:1e12},{id:"in_1",name:"Source",defval:"close",type:"source",options:["open","high","low","close","hl2","hlc3","ohlc4"]},{id:"in_2",name:"Offset",defval:0,type:"integer",min:-1e12,max:1e12}],id:"Moving Average@tv-basicstudies-1",scriptIdPart:"",name:"Moving Average"},constructor:function(){this.main=function(t,e){var i,n,s,r,a,l;return this._context=t,this._input=e,i=o.Std[this._input(1)](this._context),n=this._input(0),s=this._input(2),r=this._context.new_var(i),a=o.Std.sma(r,n,this._context),l=a,[{value:l,offset:s}]}}},{name:"Moving Average Weighted",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,inputs:{in_0:9,in_1:"close",in_2:0}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Moving Average Weighted",shortDescription:"WMA",is_price_study:!0,inputs:[{id:"in_0",name:"Length",defval:9,type:"integer",min:1,max:1e12},{id:"in_1",name:"Source",defval:"close",type:"source",options:["open","high","low","close","hl2","hlc3","ohlc4"]},{id:"in_2",name:"Offset",defval:0,type:"integer",min:-1e12,max:1e12}],id:"Moving Average Weighted@tv-basicstudies-1",scriptIdPart:"",name:"Moving Average Weighted"},constructor:function(){this.main=function(t,e){var i,n,s,r,a,l;return this._context=t,this._input=e,i=o.Std[this._input(1)](this._context),n=this._input(0),s=this._input(2),r=this._context.new_var(i),a=o.Std.wma(r,n,this._context),l=a,[{value:l,offset:s}]}}},{name:"Parabolic SAR",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:3,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,inputs:{in_0:.02,in_1:.02,in_2:.2}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Parabolic SAR",shortDescription:"SAR",is_price_study:!0,inputs:[{id:"in_0",name:"start",defval:.02,type:"float",min:-1e12,max:1e12},{id:"in_1",name:"increment",defval:.02,type:"float",min:-1e12,max:1e12},{id:"in_2",name:"maximum",defval:.2,type:"float",min:-1e12,max:1e12}],id:"Parabolic SAR@tv-basicstudies-1",scriptIdPart:"",name:"Parabolic SAR"},constructor:function(){this.main=function(t,e){var i,n,s,r,a;return this._context=t,this._input=e,i=this._input(0),n=this._input(1),s=this._input(2),r=o.Std.sar(i,n,s,this._context),a=r,[a]}}},{name:"On Balance Volume",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,inputs:{}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"On Balance Volume",shortDescription:"OBV",is_price_study:!1,inputs:[],id:"On Balance Volume@tv-basicstudies-1",scriptIdPart:"",name:"On Balance Volume"},constructor:function(){this.f_0=function(t,e,i){var n=o.Std.gt(t,0)?e:o.Std.lt(i,0)?-e:0*e;return n},this.main=function(t,e){var i,n,s,r,a,l;return this._context=t,this._input=e,i=o.Std.close(this._context),n=this._context.new_var(i),s=o.Std.change(n),r=this.f_0(s,o.Std.volume(this._context),s),a=o.Std.cum(r,this._context),l=a,[l]}}},{name:"Price Oscillator",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,inputs:{in_0:10,in_1:21}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Price Oscillator",shortDescription:"PPO",is_price_study:!1,inputs:[{id:"in_0",name:"shortlen",defval:10,type:"integer",min:1,max:1e12},{id:"in_1",name:"longlen",defval:21,type:"integer",min:1,max:1e12}],id:"Price Oscillator@tv-basicstudies-1",scriptIdPart:"",name:"Price Oscillator"},constructor:function(){this.f_0=function(t,e){var i=(t-e)/e*100;return i},this.main=function(t,e){var i,n,s,r,a,l,h,c,d;return this._context=t,this._input=e,i=o.Std.close(this._context),n=this._input(0),s=this._input(1),r=this._context.new_var(i),a=o.Std.sma(r,n,this._context),l=this._context.new_var(i),h=o.Std.sma(l,s,this._context),c=this.f_0(a,h),d=c,[d]}}},{name:"Relative Strength Index",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{
linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#800080"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:70},{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:30}],filledAreasStyle:{fill_0:{color:"#800080",transparency:90,visible:!0}},inputs:{in_0:14}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Relative Strength Index",shortDescription:"RSI",is_price_study:!1,bands:[{id:"hline_0",name:"UpperLimit"},{id:"hline_1",name:"LowerLimit"}],filledAreas:[{id:"fill_0",objAId:"hline_0",objBId:"hline_1",type:"hline_hline",title:"Hlines Background"}],inputs:[{id:"in_0",name:"Length",defval:14,type:"integer",min:1,max:1e12}],id:"Relative Strength Index@tv-basicstudies-1",scriptIdPart:"",name:"Relative Strength Index"},constructor:function(){this.f_0=function(t){var e=o.Std.max(t,0);return e},this.f_1=function(t){var e=-o.Std.min(t,0);return e},this.f_2=function(t,e){var i=o.Std.eq(t,0)?100:o.Std.eq(e,0)?0:100-100/(1+e/t);return i},this.main=function(t,e){var i,n,s,r,a,l,h,c,d,p,u,_;return this._context=t,this._input=e,i=o.Std.close(this._context),n=this._input(0),s=this._context.new_var(i),r=o.Std.change(s),a=this.f_0(r),l=this._context.new_var(a),h=o.Std.rma(l,n,this._context),c=this.f_1(r),d=this._context.new_var(c),p=o.Std.rma(d,n,this._context),u=this.f_2(p,h),_=u,[_]}}},{name:"Relative Vigor Index",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008000"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,inputs:{in_0:10}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"}],styles:{plot_0:{title:"RVGI",histogramBase:0,joinPoints:!1},plot_1:{title:"Signal",histogramBase:0,joinPoints:!1}},description:"Relative Vigor Index",shortDescription:"RVGI",is_price_study:!1,inputs:[{id:"in_0",name:"Length",defval:10,type:"integer",min:1,max:1e12}],id:"Relative Vigor Index@tv-basicstudies-1",scriptIdPart:"",name:"Relative Vigor Index"},constructor:function(){this.f_0=function(t,e){var i=t-e;return i},this.f_1=function(t,e){var i=t/e;return i},this.main=function(t,e){var i,n,s,r,a,l,h,c,d,p,u,_,f,g,m,v;return this._context=t,this._input=e,i=this._input(0),n=this.f_0(o.Std.close(this._context),o.Std.open(this._context)),s=this._context.new_var(n),r=o.Std.swma(s,this._context),a=this._context.new_var(r),l=o.Std.sum(a,i,this._context),h=this.f_0(o.Std.high(this._context),o.Std.low(this._context)),c=this._context.new_var(h),d=o.Std.swma(c,this._context),p=this._context.new_var(d),u=o.Std.sum(p,i,this._context),_=this.f_1(l,u),f=this._context.new_var(_),g=o.Std.swma(f,this._context),m=_,v=g,[m,v]}}},{name:"Relative Volatility Index",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#000080"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:80},{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:20}],filledAreasStyle:{fill_0:{color:"#808000",transparency:90,visible:!0}},inputs:{in_0:10}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Relative Volatility Index",shortDescription:"RVI",is_price_study:!1,bands:[{id:"hline_0",name:"UpperLimit"},{id:"hline_1",name:"LowerLimit"}],filledAreas:[{id:"fill_0",objAId:"hline_0",objBId:"hline_1",type:"hline_hline",title:"Hlines Background"}],inputs:[{id:"in_0",name:"length",defval:10,type:"integer",min:1,max:1e12}],id:"Relative Volatility Index@tv-basicstudies-1",scriptIdPart:"",name:"Relative Volatility Index"},constructor:function(){this.f_0=function(t,e){var i=o.Std.le(t,0)?0:e;return i},this.f_1=function(t,e){var i=o.Std.gt(t,0)?0:e;return i},this.f_2=function(t,e){var i=t/(t+e)*100;return i},this.main=function(t,e){var i,n,s,r,a,l,h,c,d,p,u,_,f,g;return this._context=t,this._input=e,i=this._input(0),n=o.Std.close(this._context),s=this._context.new_var(n),r=o.Std.stdev(s,i,this._context),a=this._context.new_var(n),l=o.Std.change(a),h=this.f_0(l,r),c=this._context.new_var(h),d=o.Std.ema(c,14,this._context),p=this.f_1(l,r),u=this._context.new_var(p),_=o.Std.ema(u,14,this._context),f=this.f_2(d,_),g=f,[g]}}},{name:"SMI Ergodic Indicator/Oscillator",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF7F00"},plot_2:{linestyle:0,linewidth:1,plottype:1,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,inputs:{in_0:5,in_1:20,in_2:5}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"},{id:"plot_2",type:"line"}],styles:{plot_0:{title:"Indicator",histogramBase:0,joinPoints:!1},plot_1:{title:"Signal",histogramBase:0,joinPoints:!1},plot_2:{title:"Oscillator",histogramBase:0,joinPoints:!1}},description:"SMI Ergodic Indicator/Oscillator",shortDescription:"SMIIO",is_price_study:!1,inputs:[{id:"in_0",name:"shortlen",defval:5,type:"integer",min:1,max:1e12},{id:"in_1",name:"longlen",defval:20,type:"integer",min:1,max:1e12},{id:"in_2",name:"siglen",defval:5,type:"integer",min:1,max:1e12}],id:"SMI Ergodic Indicator/Oscillator@tv-basicstudies-1",scriptIdPart:"",name:"SMI Ergodic Indicator/Oscillator"},constructor:function(){this.f_0=function(t,e){var i=t-e;return i},this.main=function(t,e){var i,n,s,r,a,l,h,c,d,p,u,_;return this._context=t,this._input=e,i=this._input(0),n=this._input(1),s=this._input(2),r=o.Std.close(this._context),a=this._context.new_var(r),l=o.Std.tsi(a,i,n,this._context),h=this._context.new_var(l),c=o.Std.ema(h,s,this._context),d=this.f_0(l,c),p=l,u=c,_=d,[p,u,_]}}},{name:"Stochastic",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:80},{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:20}],filledAreasStyle:{fill_0:{color:"#800080",transparency:75,visible:!0}},inputs:{in_0:14,in_1:1,in_2:3}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"}],styles:{plot_0:{title:"%K",histogramBase:0,joinPoints:!1},plot_1:{title:"%D",histogramBase:0,joinPoints:!1}},description:"Stochastic",shortDescription:"Stoch",is_price_study:!1,bands:[{id:"hline_0",name:"UpperLimit"},{id:"hline_1",name:"LowerLimit"}],filledAreas:[{id:"fill_0",objAId:"hline_0",objBId:"hline_1",type:"hline_hline",title:"Hlines Background"}],inputs:[{id:"in_0",name:"length",defval:14,type:"integer",min:1,max:1e12},{id:"in_1",name:"smoothK",defval:1,type:"integer",min:1,max:1e12},{id:"in_2",name:"smoothD",defval:3,type:"integer",min:1,max:1e12}],id:"Stochastic@tv-basicstudies-1",scriptIdPart:"",name:"Stochastic"},constructor:function(){this.main=function(t,e){var i,n,s,r,a,l,h,c,d,p,u,_,f,g,m,v;return this._context=t,this._input=e,i=this._input(0),n=this._input(1),s=this._input(2),r=o.Std.close(this._context),a=o.Std.high(this._context),l=o.Std.low(this._context),h=this._context.new_var(r),c=this._context.new_var(a),d=this._context.new_var(l),p=o.Std.stoch(h,c,d,i,this._context),u=this._context.new_var(p),_=o.Std.sma(u,n,this._context),f=this._context.new_var(_),g=o.Std.sma(f,s,this._context),m=_,v=g,[m,v]}}},{name:"TRIX",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#800000"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:0}],inputs:{in_0:18}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"TRIX",histogramBase:0,joinPoints:!1}},description:"TRIX",shortDescription:"TRIX",is_price_study:!1,bands:[{id:"hline_0",name:"Zero"}],inputs:[{id:"in_0",name:"length",defval:18,type:"integer",min:1,max:1e12}],id:"TRIX@tv-basicstudies-1",scriptIdPart:"",name:"TRIX"},constructor:function(){this.f_0=function(t){var e=o.Std.log(t);return e},this.f_1=function(t){var e=1e4*t;return e},this.main=function(t,e){var i,n,s,r,a,l,h,c,d,p,u,_;return this._context=t,this._input=e,i=this._input(0),n=this.f_0(o.Std.close(this._context)),s=this._context.new_var(n),r=o.Std.ema(s,i,this._context),a=this._context.new_var(r),l=o.Std.ema(a,i,this._context),h=this._context.new_var(l),c=o.Std.ema(h,i,this._context),d=this._context.new_var(c),p=o.Std.change(d),u=this.f_1(p),_=u,[_]}}},{name:"Stochastic RSI",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:80},{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:20}],filledAreasStyle:{fill_0:{color:"#800080",transparency:80,visible:!0}},inputs:{in_0:14,in_1:14,in_2:3,in_3:3}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"}],styles:{plot_0:{title:"%K",histogramBase:0,joinPoints:!1},plot_1:{title:"%D",histogramBase:0,joinPoints:!1}},description:"Stochastic RSI",shortDescription:"Stoch RSI",is_price_study:!1,bands:[{id:"hline_0",name:"UpperLimit"},{id:"hline_1",name:"LowerLimit"}],filledAreas:[{id:"fill_0",objAId:"hline_0",objBId:"hline_1",type:"hline_hline",title:"Hlines Background"}],inputs:[{id:"in_0",name:"lengthRSI",defval:14,type:"integer",min:1,max:1e12},{id:"in_1",name:"lengthStoch",defval:14,type:"integer",min:1,max:1e12},{id:"in_2",name:"smoothK",defval:3,type:"integer",min:1,max:1e12},{id:"in_3",name:"smoothD",defval:3,type:"integer",min:1,max:1e12}],id:"Stochastic RSI@tv-basicstudies-1",scriptIdPart:"",name:"Stochastic RSI"},constructor:function(){this.main=function(t,e){var i,n,s,r,a,l,h,c,d,p,u,_,f,g,m,v;return this._context=t,this._input=e,i=o.Std.close(this._context),n=this._input(0),s=this._input(1),r=this._input(2),a=this._input(3),l=o.Std.rsi(i,n),h=this._context.new_var(l),c=this._context.new_var(l),d=this._context.new_var(l),p=o.Std.stoch(h,c,d,s,this._context),u=this._context.new_var(p),_=o.Std.sma(u,r,this._context),f=this._context.new_var(_),g=o.Std.sma(f,a,this._context),m=_,v=g,[m,v]}}},{name:"Triple EMA",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008000"}},precision:4,inputs:{in_0:9}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Triple EMA",shortDescription:"TEMA",is_price_study:!0,inputs:[{id:"in_0",name:"length",defval:9,type:"integer",min:1,max:1e12}],id:"Triple EMA@tv-basicstudies-1",scriptIdPart:"",name:"Triple EMA"},constructor:function(){this.f_0=function(t,e,i){var o=3*(t-e)+i;return o},this.main=function(t,e){var i,n,s,r,a,l,h,c,d,p;return this._context=t,this._input=e,i=this._input(0),n=o.Std.close(this._context),s=this._context.new_var(n),r=o.Std.ema(s,i,this._context),a=this._context.new_var(r),l=o.Std.ema(a,i,this._context),h=this._context.new_var(l),c=o.Std.ema(h,i,this._context),d=this.f_0(r,l,c),p=d,[p]}}},{name:"VWMA",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,inputs:{in_0:20}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"VWMA",shortDescription:"VWMA",is_price_study:!0,inputs:[{id:"in_0",name:"len",defval:20,type:"integer",min:1,max:1e12}],id:"VWMA@tv-basicstudies-1",scriptIdPart:"",name:"VWMA"},constructor:function(){this.main=function(t,e){var i,n,s,r,a;return this._context=t,this._input=e,i=o.Std.close(this._context),n=this._input(0),s=this._context.new_var(i),r=o.Std.vwma(s,n,this._context),a=r,[a]}}},{name:"Volume Oscillator",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#000080"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:0}],inputs:{in_0:5,in_1:10}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Volume Oscillator",shortDescription:"Volume Osc",is_price_study:!1,bands:[{id:"hline_0",name:"Zero"}],inputs:[{id:"in_0",name:"shortlen",defval:5,type:"integer",min:1,max:1e12},{id:"in_1",name:"longlen",defval:10,type:"integer",min:1,max:1e12}],id:"Volume Oscillator@tv-basicstudies-1",scriptIdPart:"",name:"Volume Oscillator"},constructor:function(){this.f_0=function(t,e){var i=100*(t-e)/e;return i},this.main=function(t,e){var i,n,s,r,a,l,h,c,d;return this._context=t,this._input=e,i=this._input(0),n=this._input(1),s=o.Std.volume(this._context),r=this._context.new_var(s),a=o.Std.ema(r,i,this._context),l=this._context.new_var(s),h=o.Std.ema(l,n,this._context),c=this.f_0(a,h),d=c,[d]}}},{name:"Williams Alligator",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"},plot_2:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008000"}},precision:4,inputs:{in_0:21,in_1:13,in_2:8}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"},{id:"plot_2",type:"line"}],styles:{plot_0:{title:"Jaw",histogramBase:0,joinPoints:!1},plot_1:{title:"Teeth",histogramBase:0,joinPoints:!1},plot_2:{title:"Lips",histogramBase:0,joinPoints:!1}},description:"Williams Alligator",shortDescription:"Alligator",is_price_study:!0,inputs:[{id:"in_0",name:"jawLength",defval:21,type:"integer",min:1,max:1e12},{id:"in_1",name:"teethLength",defval:13,type:"integer",min:1,max:1e12},{id:"in_2",name:"lipsLength",defval:8,type:"integer",min:1,max:1e12}],id:"Williams Alligator@tv-basicstudies-1",scriptIdPart:"",name:"Williams Alligator"},constructor:function(){this.main=function(t,e){var i,n,s,r,a,l,h,c,d,p,u,_,f;return this._context=t,this._input=e,i=this._input(0),n=this._input(1),s=this._input(2),r=o.Std.hl2(this._context),a=this._context.new_var(r),l=o.Std.ema(a,i,this._context),h=this._context.new_var(r),c=o.Std.ema(h,n,this._context),d=this._context.new_var(r),p=o.Std.ema(d,s,this._context),u=l,_=c,f=p,[{value:u,offset:8},{value:_,offset:5},{value:f,offset:3}]}}},{name:"Willams %R",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#000080"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:-20},{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:-80}],filledAreasStyle:{fill_0:{color:"#000080",transparency:90,visible:!0}},inputs:{in_0:14}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Willams %R",shortDescription:"%R",is_price_study:!1,bands:[{id:"hline_0",name:"UpperLimit"},{id:"hline_1",name:"LowerLimit"}],filledAreas:[{id:"fill_0",objAId:"hline_0",objBId:"hline_1",type:"hline_hline",title:"Hlines Background"}],inputs:[{id:"in_0",name:"length",defval:14,type:"integer",min:1,max:1e12}],id:"Willams %R@tv-basicstudies-1",scriptIdPart:"",name:"Willams %R"},constructor:function(){this.f_0=function(t,e,i){var o=100*(t-e)/(e-i);return o},this.main=function(t,e){var i,n,s,r,a,l,h,c,d;return this._context=t,this._input=e,i=this._input(0),n=o.Std.high(this._context),s=this._context.new_var(n),r=o.Std.highest(s,i,this._context),a=o.Std.low(this._context),l=this._context.new_var(a),h=o.Std.lowest(l,i,this._context),c=this.f_0(o.Std.close(this._context),r,h),d=c,[d]}}},{name:"Coppock Curve",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#000080"}},precision:4,inputs:{in_0:10,in_1:14,in_2:11}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Coppock Curve",shortDescription:"Coppock Curve",is_price_study:!1,inputs:[{id:"in_0",name:"WMA Length",defval:10,type:"integer",min:-1e12,max:1e12},{id:"in_1",name:"Long RoC Length",defval:14,type:"integer",min:-1e12,max:1e12},{id:"in_2",name:"Short RoC Length",defval:11,type:"integer",min:-1e12,max:1e12}],id:"Coppock Curve@tv-basicstudies-1",scriptIdPart:"",name:"Coppock Curve"},constructor:function(){this.f_0=function(t,e){var i=t+e;return i},this.main=function(t,e){var i,n,s,r,a,l,h,c,d,p,u,_;return this._context=t,this._input=e,i=this._input(0),n=this._input(1),s=this._input(2),r=o.Std.close(this._context),a=this._context.new_var(r),l=o.Std.roc(a,n),h=this._context.new_var(r),c=o.Std.roc(h,s),d=this.f_0(l,c),p=this._context.new_var(d),u=o.Std.wma(p,i,this._context),_=u,[_]}}},{name:"Least Squares Moving Average",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#000080"}},precision:4,inputs:{in_0:25,in_1:0}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Least Squares Moving Average",shortDescription:"LSMA",is_price_study:!0,inputs:[{id:"in_0",name:"Length",defval:25,type:"integer",min:-1e12,max:1e12},{id:"in_1",name:"Offset",defval:0,type:"integer",min:-1e12,max:1e12}],id:"Least Squares Moving Average@tv-basicstudies-1",scriptIdPart:"",name:"Least Squares Moving Average"},constructor:function(){this.main=function(t,e){var i,n,s,r,a,l;return this._context=t,this._input=e,i=this._input(0),n=this._input(1),s=o.Std.close(this._context),r=this._context.new_var(s),a=o.Std.linreg(r,i,n),l=a,[l]}}},{name:"Arnaud Legoux Moving Average",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#000080"}},precision:4,inputs:{in_0:9,in_1:.85,in_2:6}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Arnaud Legoux Moving Average",shortDescription:"ALMA",is_price_study:!0,inputs:[{id:"in_0",name:"Window Size",defval:9,type:"integer",min:-1e12,max:1e12},{id:"in_1",name:"Offset",defval:.85,type:"float",min:-1e12,max:1e12},{id:"in_2",name:"Sigma",defval:6,type:"float",min:-1e12,max:1e12}],id:"Arnaud Legoux Moving Average@tv-basicstudies-1",scriptIdPart:"",name:"Arnaud Legoux Moving Average"},constructor:function(){this.main=function(t,e){var i,n,s,r,a,l;return this._context=t,this._input=e,i=o.Std.close(this._context),n=this._input(0),s=this._input(1),r=this._input(2),a=this._context.new_var(i),l=o.Std.alma(a,n,s,r),[l]}}},{name:"True Strength Indicator",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#000080"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:0}],inputs:{in_0:25,in_1:13,in_2:13}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1},plot_1:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"True Strength Indicator",shortDescription:"True Strength Indicator",is_price_study:!1,bands:[{id:"hline_0",name:"Zero"}],inputs:[{id:"in_0",name:"long",defval:25,type:"integer",min:-1e12,max:1e12},{id:"in_1",name:"short",defval:13,type:"integer",min:-1e12,max:1e12},{id:"in_2",name:"siglen",defval:13,type:"integer",min:1,max:1e12}],id:"True Strength Indicator@tv-basicstudies-1",scriptIdPart:"",name:"True Strength Indicator"},constructor:function(){this.main=function(t,e){var i,n,s,r,a,l,h,c;return this._context=t,this._input=e,i=this._input(0),n=this._input(1),s=this._input(2),r=o.Std.close(this._context),a=this._context.new_var(r),l=o.Std.tsi(a,n,i,this._context),h=l,c=this._context.new_var(h),[h,o.Std.ema(c,s,this._context)]}}},{name:"Momentum",metainfo:{_metainfoVersion:30,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#808000"}},precision:4,inputs:{in_0:10,in_1:"close"}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Mom",histogramBase:0,joinPoints:!1,isHidden:!1}},description:"Momentum",shortDescription:"Mom",is_price_study:!1,inputs:[{id:"in_0",name:"Length",defval:10,type:"integer",min:1,max:1e12},{id:"in_1",name:"Source",defval:"close",type:"source",options:["open","high","low","close","hl2","hlc3","ohlc4"]}],id:"Momentum@tv-basicstudies-1",scriptIdPart:"",name:"Momentum"},constructor:function(){this.main=function(t,e){var i,n,s,r,a;return this._context=t,this._input=e,i=this._input(0),n=o.Std[this._input(1)](this._context),s=this._context.new_var(n),r=s.get(i),a=r?n-r:null,[a]}}}]},function(t,e,i){(function(e){"use strict";var o=i(389),n=i(43),s=function(t,e){this._server=t,this._session=e,this._timezone=null,this._isDWM=!1,this._resolution=null};s.prototype._userTimezone=function(){return this._timezone},s.prototype.setTimezone=function(t){this._timezone="exchange"==t?"exchange":e.get_timezone(t)},s.prototype.setResolution=function(t){this._isDWM=n.isDWM(t),this._resolution=t},s.prototype.onRequestMetadata=function(t,e){this._server.receiveLocalResponse({method:"studies_metadata",params:[this._session,t,e]})},s.prototype.onSymbolResolved=function(t,e){this._server.receiveLocalResponse({method:"symbol_resolved",params:[this._session,t,e]})},s.prototype.onSymbolError=function(t,e){this._server.receiveLocalResponse({method:"symbol_error",params:[this._session,t,e]})},s.prototype.onStudyError=function(t,e){this._server.receiveLocalResponse({method:"study_error",params:[this._session,t,e]})},s.prototype.onSeriesLoading=function(t,e){this._server.receiveLocalResponse({method:"series_loading",params:[this._session,t,e]})},s.prototype.onSeriesCompleted=function(t,e,i){this._server.receiveLocalResponse({method:"series_completed",params:[this._session,t,i,e]})},s.prototype.onSeriesError=function(t,e){this._server.receiveLocalResponse({method:"series_error",params:[this._session,t,e]})},s.prototype.onSeriesClearData=function(t,e){var i={};i[t]={series:[],turnaround:e},this._server.receiveLocalResponse({method:"timescale_update",params:[this._session,i,{index:0,zoffset:0,changes:[],marks:[]}]})},s.prototype.onStudyCompleted=function(t,e){this._server.receiveLocalResponse({method:"study_completed",params:[this._session,t,e]})},s.prototype.onStudyLoading=function(t,e){this._server.receiveLocalResponse({method:"study_loading",params:[this._session,t,e]})},s.prototype._calcMarksTime=function(t,i,n,s,r){var a,l,h,c,d,p=e.get_timezone(i),u=this;if(this._isDWM)for(d=new o.Session,d.init(p,n),c=0;c<t.length;c++)h=t[c],a=s(h),l=e.utc_to_cal(p,1e3*a),l=d.spec.correctTradingDay(l,p),e.set_hms(l,0,0,0,0),t[c]=r(h,parseInt(l.valueOf()/1e3));else for(c=0;c<t.length;c++)t[c]=r(t[c],u.timeInTimezone(s(t[c]),p))},s.prototype.onTickmarksUpdated=function(t,e,i,o){var s,r,a,l,h,c,d;if(n.isEqual(o,this._resolution)){for(s=e.slice(0),this._calcMarksTime(s,i.timezone,i.session,function(t){return t},function(t,e){return e}),r=[],a=[],h=0;h<s.length;++h)c=s[h],r.push([this._spanByTime(c,l),c,t+h]),a.push(c),l=c;d={method:"tickmark_update",params:[this._session,{index:t,zoffset:0,changes:a,marks:r}]},this._server.receiveLocalResponse(d)}},s.prototype.onTimescaleUpdate=function(t,e,i,o,n){var s,r,a,l,h,c,d;for(this._calcMarksTime(i,o.timezone,o.session,function(t){return t.value[0]},function(t,e){return t.exTime=e,t}),s={},s[t]={series:i,turnaround:e},r=[],a=[],h=0;h<i.length;++h)c=i[h].exTime,r.push([this._spanByTime(c,l),c,n+h]),a.push(i[h].value[0]),l=c;d={method:"timescale_update",params:[this._session,s,{index:n,zoffset:0,changes:a,marks:r}]},this._server.receiveLocalResponse(d)},s.prototype.onSeriesTimeframeUpdate=function(t,e,i,o,n){var s={method:"series_timeframe",params:[this._session,t,e,i,o,n]};this._server.receiveLocalResponse(s)},s.prototype.onPointsetDataUpdate=function(t,e,i,o){this._onDataUpdate(t,e,i,void 0,o,1)},s.prototype.onDataUpdate=function(t,e,i,o,n){this._onDataUpdate(t,e,i,o,n,0)},s.prototype._onDataUpdate=function(t,e,i,o,n,s){var r,a={},l=o?JSON.stringify({offsets:o}):"";a[t]={s:i,ns:{d:l,indexes:[]},turnaround:e},r={method:"data_update",params:[this._session,a]},this._server.receiveLocalResponse(r)},s.prototype.onQuotesData=function(t){this._server.receiveLocalResponse({method:"quote_symbol_data",params:t})},s.prototype.timeInTimezone=function(t,i){return"exchange"==this._userTimezone()?parseInt(e.utc_to_cal(i,1e3*t).valueOf()/1e3):parseInt(e.utc_to_cal(this._userTimezone(),1e3*t).valueOf()/1e3)},s.prototype._spanByTime=function(t,e){function i(t){return 60*t*60*1e3}function o(t){return 60*t*1e3}function n(t){return 1e3*t}var s,r,a,l=[{divisor:1,span:20},{divisor:n(1),span:19},{divisor:o(5),span:21},{divisor:o(30),span:22},{divisor:i(1),span:30},{divisor:i(3),span:31},{divisor:i(6),span:32},{divisor:i(12),span:33}];if(!e)return 20;if(s=new Date(1e3*e),r=new Date(1e3*t),r.getYear()!=s.getYear())return 70;if(r.getUTCMonth()!=s.getUTCMonth())return 60;if(r.getUTCDate()!=s.getUTCDate())return 50;for(a=l.length-1;a>=0;--a)if(Math.floor(s/l[a].divisor)!=Math.floor(r/l[a].divisor))return l[a].span},TradingView.ChartapiMessagerInstances=[],t.exports=s}).call(e,i(37))},function(t,e,i){"use strict";function o(t,e){this.handler=t,this.customId=e,this.requestHook=null}function n(){}TradingView.resourceFullPath("web_socket_main.swf");TradingView.WEB_SOCKET_WAS_CONNECTED=!1,TradingView.STUDY_COUNT_LIMIT=120,n.prototype.defaultWatchlistSymbols=function(){},n.prototype.availableTimeFrames=function(t,e){},n.prototype.defaultResolutions=function(){},n.prototype.supportedSymbolsTypes=function(){},n.prototype.supportedExchangesList=function(){},n.prototype.futuresRegex=function(){},n.prototype.quoteCreateSession=function(t){},n.prototype.quoteDeleteSession=function(t){},n.prototype.quoteSetFields=function(t,e){},n.prototype.quoteAddSymbols=function(t,e){},n.prototype.quoteRemoveSymbols=function(t,e){},n.prototype.quoteFastSymbols=function(t,e){},n.prototype.depthCreateSession=function(t,e,i){},n.prototype.depthDeleteSession=function(t){},n.prototype.depthSetSymbol=function(t,e){},n.prototype.depthClearSymbol=function(t){},n.prototype.depthSetScale=function(t,e){},n.prototype.chartCreateSession=function(t,e){},n.prototype.chartDeleteSession=function(t){},n.prototype.createSession=function(t,e){},n.prototype.removeSession=function(t){},n.prototype.connected=function(){},n.prototype._getHost=function(t){},n.prototype.connect=function(){},n.prototype.disconnect=function(){},n.prototype.switchTimezone=function(t,e){},n.prototype.resolveSymbol=function(t,e,i,o,n){},n.prototype.createSeries=function(t,e,i,o,n,s,r){},n.prototype.removeSeries=function(t,e,i){},n.prototype.modifySeries=function(t,e,i,o,n,s){},n.prototype.requestMoreData=function(t,e,i,o){},n.prototype.requestMetadata=function(t,e,i){},n.prototype.isCanCreateStudy=function(){},n.prototype.createStudy=function(t,e,i,o,n,s,r){},n.prototype.removeStudy=function(t,e,i){},n.prototype.modifyStudy=function(t,e,i,o,n){},n.prototype.createPointset=function(t,e,i,o,n,s,r){},n.prototype.modifyPointset=function(t,e,i,o,n){},n.prototype.removePointset=function(t,e,i){},n.prototype.requestMoreTickmarks=function(t,e,i,o){},n.prototype.requestFirstBarTime=function(t,e,i,o){},n.prototype._invokeHandler=function(t,e){},n.prototype._sendRequest=function(t,e){},n.prototype._onMessage=function(t){},n.prototype._convertTimescaleResponse=function(t){},n.prototype._dispathNotification=function(t){},n.prototype._invokeNotificationHandler=function(t,e,i){},n.prototype._notifySessions=function(t){},n.prototype.unpack=function(t){},n.prototype.reconnectTimeout=function(t){},n.prototype.searchSymbols=function(t){},n.prototype.serverTimeOffset=function(){},n.prototype._isSafari5=function(){},n.prototype._isIE9=function(){},n.prototype._isIOS5=function(){},n.prototype._getPort=function(t){},n.prototype.getMarks=function(t,e,i,o,n){},n.prototype.getTimescaleMarks=function(t,e,i,o,n){},TradingView.declareClassAsPureInterface(n,"ChartApiInterface"),TradingView.ChartApiInterface=n,TradingView.HandlerInfo=o,e.HandlerInfo=o,e.ChartApiInterface=n},function(t,e,i){(function(e){"use strict";var o=i(54).StudyConsts,n=function(){function t(t){e.enabled("charting_library_debug_mode")&&console.warn("Overrides:"+t)}function n(t,e,i,o){t.defaults.inputs[e]=o,t.inputs[i].defval=o}function s(t,e){t.defaults.precision=e}function r(e,i,o,n){var s,r,a=o[1];if("color"==a){if(s=h(e,i),r=o.length>2?parseInt(o[2]):NaN,null==s&&!isNaN(r)&&r>0)return void t("Plot `{1}` of `{0}` does not have color #{2}".format(e.description,o[0],r));0==r||isNaN(r)?(e.defaults.styles[i].color=n,null!=s&&(s.colors[0].color=n)):s.colors[r].color=n}else{if(!e.defaults.styles[i].hasOwnProperty(a))return void t("Plot `{1}` of `{0}` does not have property `{2}`".format(e.description,o[0],a));"plottype"==a&&(n=v[n]),e.defaults.styles[i][a]=n}}function a(e,i,o,n){var s=o[1];return e.defaults.bands[i].hasOwnProperty(s)?("plottype"==s&&(n=v[n]),void(e.defaults.bands[i][s]=n)):void t("Band `{1}` of `{0}` does not have property `{2}`".format(e.description,o[0],s))}function l(e,i,o,n){var s=o[1];return e.defaults.filledAreasStyle[i].hasOwnProperty(s)?void(e.defaults.filledAreasStyle[i][s]=n):void t("Area `{1}` of `{0}` does not have property `{2}`".format(e.description,o[0],s))}function h(t,e){for(var i in t.plots)if("colorer"==t.plots[i].type&&t.plots[i].target==e)return t.defaults.palettes[t.plots[i].palette];return null}function c(t){var e,i,o=JSServer.studyLibrary;for(e=0;e<o.length;++e)if(i=o[e].metainfo,i.description.toLowerCase()==t.toLowerCase()||i.shortDescription.toLowerCase()==t.toLowerCase())return i;return null}function d(t,e){for(var i=0;i<t.inputs.length;++i)if(t.inputs[i].name.toLowerCase()==e.toLowerCase())return{id:t.inputs[i].id,index:i};return null}function p(t,e){for(var i in t.styles)if(t.styles[i].title.toLowerCase()==e.toLowerCase())return i;return null}function u(t,e){for(var i in t.filledAreas)if(t.filledAreas[i].title.toLowerCase()==e.toLowerCase())return t.filledAreas[i].id;return null}function _(t,e){if(!t.bands)return null;for(var i in t.bands)if(t.bands[i].name.toLowerCase()==e.toLowerCase())return i;return null}var f,g,m={"volume.transparency":"!transparency","upper limit":"UpperLimit","lower limit":"LowerLimit"},v={};if(Object.keys(o).forEach(function(t){0===t.indexOf("PLOT_")&&0!==t.indexOf("PLOT_TYPE_")&&(v[t.toLowerCase().substring(5)]=o[t])}),f={},f.setMetainfoProperty=function(e,i,o){var h,c,f,g,v,y,w,b,S;return i=m[i]||i,h=i.split("."),c=h[0],0===c.indexOf("!")?void(e[c.slice(1)]=o):(c=m[c]||c,f=p(e,c),g=_(e,c),v=u(e,c),y=d(e,c),w="options"==c,b="precision"==c&&e.defaults&&e.defaults.precision,
S=!!f+!!g+!!y+!!w+!!v+!!b,void(0===S?t("Study `{0}` has no plot or input `{1}`".format(e.description,c)):S>1?t("Study `{0}` ambiguous identifier `{1}`".format(e.description,c)):f?r(e,f,h,o):y?n(e,y.id,y.index,o):g?a(e,g,h,o):v?l(e,v,h,o):b?s(e,o):e[h[1]]=o))},f.setProperty=function(e,i){var o=e.split(".")[0],n=c(o);return n?void f.setMetainfoProperty(n,e.substring(o.length+1),i):void t("Study `{0}` not found".format(o))},i(396),"undefined"!=typeof __initialMetainfoOverrides&&__initialMetainfoOverrides)for(g in __initialMetainfoOverrides)f.setProperty(g,__initialMetainfoOverrides[g]);return f}();t.exports=n}).call(e,i(1))},function(t,e,i){(function(e){"use strict";var o=i(401),n=i(399),s=i(73).DefaultProperty,r=i(107),a=i(389),l=i(43),h=i(37),c=function(t){this._chartWidget=t};c.prototype._makeSubscriptionFromDelegate=function(t){var e=$.extend({},t);return delete e.fire,e},c.prototype.executeAction=function(t){this._chartWidget.executeActionByName(t)},c.prototype.executeActionById=function(t){this._chartWidget.executeActionById(t)},c.prototype.refreshMarks=function(){this._chartWidget.refreshMarks()},c.prototype.clearMarks=function(){this._chartWidget.clearMarks()},c.prototype.symbol=function(){return this._chartWidget.getSymbol()},c.prototype.resolution=function(){return this._chartWidget.model().mainSeries().properties().interval.value()},c.prototype.setSymbol=function(t,i){function o(){n._chartWidget.model().mainSeries().onDataLoaded().unsubscribe(null,o),i&&i()}if(t!=this.symbol()||e.enabled("same_data_requery")){var n=this;return this._chartWidget.model().mainSeries().onDataLoaded().subscribe(null,o),this._chartWidget.setSymbol(t)}},c.prototype.setResolution=function(t,e){function i(){o._chartWidget.model().mainSeries().onDataLoaded().unsubscribe(null,i),e&&e()}if(t!=this.resolution()){var o=this;return this._chartWidget.model().mainSeries().onDataLoaded().subscribe(null,i),this._chartWidget.setResolution(t)}},c.prototype.removeAllShapes=function(){this._chartWidget.removeAllDrawingTools()},c.prototype.removeAllStudies=function(){this._chartWidget.removeAllStudies()},c.prototype.removeEntity=function(t){var e=this._chartWidget.model().chartModel().dataSourceForId(t);return e?void this._chartWidget.model().chartModel().removeSource(e,!0):void console.warn("Can't find a source with id: "+t)},c.prototype.createStudyTemplate=function(t){return this._chartWidget.model().model().studyTemplate(t.saveInterval)},c.prototype.applyStudyTemplate=function(t){this._chartWidget.model().model().restoreStudyTemplate(t,""+1e3*Math.random())},c.prototype.setVisibleRange=function(t,e){return void 0===t||!t.from||!t.to||isNaN(t.from)||isNaN(t.to)?void console.warn("Wrong time range: "+JSON.stringify(t)):void this._chartWidget.setVisibleTimeRange(parseInt(t.from),parseInt(t.to),e)},c.prototype.getVisibleRange=function(){var t=this._chartWidget.model().timeScale(),e=t.visibleBars(),i={from:t.indexToUserTime(e.firstBar()<0?0:e.firstBar()),to:t.indexToUserTime(e.lastBar())};return{from:(+i.from||0)/1e3,to:(+i.to||0)/1e3}},c.prototype._createTradingPrimitive=function(t,e){function i(){var t=4,e=o._chartWidget.model().timeScale().m_points.lastTimePointIndex(),i=o._chartWidget.model().mainSeries().data().valueAt(e)[t];return{index:e,price:i}}var o=this,n=this._chartWidget.model().model(),s=n.paneForSource(this._chartWidget.model().model().mainSeries()),r=e?this._chartWidget.model().chartModel():this._chartWidget.model(),a=r.createLineTool(s,i(),t);return a._adapter},c.prototype.createOrderLine=function(t){var t=t||{};return this._createTradingPrimitive("LineToolOrder",t.disableUndo)},c.prototype.createPositionLine=function(t){var t=t||{};return this._createTradingPrimitive("LineToolPosition",t.disableUndo)},c.prototype.createExecutionShape=function(t){var t=t||{};return this._createTradingPrimitive("LineToolExecution",t.disableUndo)},c.prototype.createVerticalLine=function(t,e){this._chartWidget.createShape(t,$.extend(e,{shape:"vertical_line"}))},c.prototype.createShape=function(t,e,i){return this.createMultipointShape([t],e,i)},c.prototype.createMultipointShape=function(t,e,i){function o(t,e,i){var o,s,r=l.isDWM(w.interval())?a.alignExchangeTimeToSessionStartAndReturnUTC(n.timezone,n.spec,new Date(1e3*t))/1e3:t,h=b.closestIndexLeft(r)||0,c={index:h};return e?c.price=e:(o=["open","high","low","close"],s=i?o.indexOf(i)+1:1,s<=0&&(s=1),c.price=S.valueAt(h)[s]),c}var n,r,c,d,p,u,_,f,g,m,v=e.disableUndo?this._chartWidget.model().model():this._chartWidget.model(),y=this._chartWidget.model().model(),w=y.mainSeries(),b=y.timeScale().points(),S=w.data(),T=w.symbolInfo(),C=h.get_timezone(T.timezone);if(!y.timeScale().isEmpty()){for(n=(new a.Session).init(C,T.session),r=y.paneForSource(w),d=[],c=0;c<t.length;c++)p=t[c],d.push(o(p.time,p.price,p.channel));if(u={text:{name:"LineToolText",supportsText:!0},note:{name:"LineToolNote",supportsText:!0},callout:{name:"LineToolCallout",supportsText:!0},balloon:{name:"LineToolBalloon",supportsText:!0},arrow_up:{name:"LineToolArrowMarkUp",supportsText:!0},arrow_down:{name:"LineToolArrowMarkDown",supportsText:!0},arrow_left:{name:"LineToolArrowMarkLeft",supportsText:!0},arrow_right:{name:"LineToolArrowMarkRight",supportsText:!0},price_label:{name:"LineToolPriceLabel"},flag:{name:"LineToolFlagMark"},vertical_line:{name:"LineToolVertLine"},horizontal_line:{name:"LineToolHorzLine"},horizontal_ray:{name:"LineToolHorzRay"},trend_line:{name:"LineToolTrendLine"},trend_angle:{name:"LineToolTrendAngle"},arrow:{name:"LineToolArrow"},ray:{name:"LineToolRay"},extended:{name:"LineToolExtended"},parallel_channel:{name:"LineToolParallelChannel"},disjoint_angle:{name:"LineToolDisjointAngle"},flat_bottom:{name:"LineToolFlatBottom"},pitchfork:{name:"LineToolPitchfork"},schiff_pitchfork_modified:{name:"LineToolSchiffPitchfork"},schiff_pitchfork:{name:"LineToolSchiffPitchfork2"},inside_pitchfork:{name:"LineToolInsidePitchfork"},pitchfan:{name:"LineToolPitchfan"},gannbox:{name:"LineToolGannSquare"},gannbox_square:{name:"LineToolGannComplex"},gannbox_fan:{name:"LineToolGannFan"},fib_retracement:{name:"LineToolFibRetracement"},fib_trend_ext:{name:"LineToolTrendBasedFibExtension"},fib_speed_resist_fan:{name:"LineToolFibSpeedResistanceFan"},fib_timezone:{name:"LineToolFibTimeZone"},fib_trend_time:{name:"LineToolTrendBasedFibTime"},fib_circles:{name:"LineToolFibCircles"},fib_spiral:{name:"LineToolFibSpiral"},fib_speed_resist_arcs:{name:"LineToolFibSpeedResistanceArcs"},fib_wedge:{name:"LineToolFibWedge"},fib_channel:{name:"LineToolFibChannel"},xabcd_pattern:{name:"LineTool5PointsPattern"},abcd_pattern:{name:"LineToolABCD"},triangle_pattern:{name:"LineToolTrianglePattern"},"3divers_pattern":{name:"LineToolThreeDrivers"},head_and_shoulders:{name:"LineToolHeadAndShoulders"},elliott_impulse_wave:{name:"LineToolElliottImpulse"},elliott_triangle_wave:{name:"LineToolElliottTriangle"},elliott_triple_combo:{name:"LineToolElliottTripleCombo"},elliott_correction:{name:"LineToolElliottCorrection"},elliott_double_combo:{name:"LineToolElliottDoubleCombo"},cyclic_lines:{name:"LineToolCircleLines"},time_cycles:{name:"LineToolTimeCycles"},sine_line:{name:"LineToolSineLine"},long_position:{name:"LineToolRiskRewardLong"},short_position:{name:"LineToolRiskRewardShort"},forecast:{name:"LineToolPrediction"},date_range:{name:"LineToolDateRange"},price_range:{name:"LineToolPriceRange"},bars_pattern:{name:"LineToolBarsPattern"},projection:{name:"LineToolProjection"},rectangle:{name:"LineToolRectangle"},rotated_rectangle:{name:"LineToolRotatedRectangle"},ellipse:{name:"LineToolEllipse"},triangle:{name:"LineToolTriangle"},polyline:{name:"LineToolPolyline"},curve:{name:"LineToolBezierQuadro"},double_curve:{name:"LineToolBezierCubic"},arc:{name:"LineToolArc"}},_=u[e.shape]||u.flag,"LineToolPolyline"===_.name&&(d[0].price==d[d.length-1].price&&d[0].index==d[d.length-1].index||d.push(d[0])),f=new s(_.name.toLowerCase()),e.overrides)for(g in e.overrides)f[g]&&f[g].setValue(e.overrides[g]);if(_.supportsText&&e.text&&f.text.setValue(e.text),m=v.createLineTool(r,d[0],_.name,f),m.pointsCount()!=d.length&&m.pointsCount()!=-1)throw"Wrong points count for "+e.shape+". Required "+m.pointsCount();for(c=1;c<d.length&&this._chartWidget.model().lineBeingCreated();c++)v.coninueCreatingLine(d[c],{},c<d.length-1);return e.lock&&m.setUserEditEnabled(!1),e.disableSelection&&(m.customization.disableSelection=!0),e.disableSave&&(m.customization.disableSave=!0),e.hasOwnProperty("showInObjectsTree")&&(m.customization.showInObjectsTree=e.showInObjectsTree),e.zOrder&&("top"==e.zOrder?v.bringToFront(m):"bottom"==e.zOrder&&v.sendToBack(m)),i&&i(m.id()),m.id()}},c.prototype.createStudy=function(t,e,i,s,a,l){var h,c,d,p;if(t=t.toLowerCase(),h=r.findStudyMetaInfoByDescription(this._chartWidget.model().studiesMetaData(),t),h=$.extend({},h),delete h.state,h||console.warn("Study `"+t+"` not found."),c={},l){l=l;for(d in l)n.setMetainfoProperty(h,d,l[d]);c.styles=h.defaults.styles,c.bands=h.defaults.bands,c.filledAreasStyle=h.defaults.filledAreasStyle}s&&(c.inputs=o.getStudyRecordFromArray([t].concat(s),this._chartWidget).inputs),p=this._chartWidget.model().chartModel().insertStudy(h,c,e),i&&p.setUserEditEnabled(!1),a&&a(p.id())},c.prototype.setChartType=function(t){this._chartWidget.model().mainSeries().properties().style.setValue(t)},c.prototype.priceFormatter=function(){return this._chartWidget.model().mainSeries().priceScale().formatter()},c.prototype.onDataLoaded=function(){return this._makeSubscriptionFromDelegate(this._chartWidget.model().mainSeries().onCompleted())},c.prototype.onSymbolChanged=function(){return this._makeSubscriptionFromDelegate(this._chartWidget.model().mainSeries().onSymbolResolved())},c.prototype.dataReady=function(t){var e=!this._chartWidget.model()||!this._chartWidget.model().mainSeries()||this._chartWidget.model().mainSeries().data().isEmpty();return t&&(e?this.onDataLoaded().subscribe(null,t,!0):t()),!e},c.prototype.crossHairMoved=function(t){this._makeSubscriptionFromDelegate(this._chartWidget.model().chartModel().crossHairMoved()).subscribe(null,t)},t.exports=c}).call(e,i(1))},function(t,e){"use strict";var i=function(){function t(t){return t.is_price_study}function e(t,e){var i,o=e.slice(0).toLowerCase();if(t){for(i=0;i<t.length;++i)if(t[i].description.toLowerCase()===o||t[i].shortDescription.toLowerCase()===o)return t[i];throw Error("Can't find metainfo for `"+e+"`")}throw Error("There is no studies metainfo at all")}function i(t){return t.inputs.map(function(t){return{id:t.id,type:t.type,name:t.name}})}function o(o,n){var s,a,l,h,c,d,p,u,_;if(!Array.isArray(o))return s=e(n.model().studiesMetaData(),o),{id:s.id,overlay:t(s)};for(a=o.slice(0),l=a[0],s=e(n.model().studiesMetaData(),l),h=t(s),c=i(s),p=a.splice(1),u=0;u<p.length;++u)d||(d={}),_=r[c[u].type]||r.string,d[c[u].id]=_(p[u]);return{id:s.id,name:l,overlay:h,inputs:d}}function n(t,o,n){function s(t){return t.name.toLowerCase()===a}var r,a,l,h=e(n.model().studiesMetaData(),t),c=i(h),d={};for(r in o)a=r.toLowerCase(),l=c.filter(s),0!==l.length?(l=l[0],d[l.id]=o[r]):console.warn("Uknown input `"+r+"` of `"+t+"`");return{id:h.id,name:t,inputs:d}}var s={},r={bool:function(t){return!!t},integer:function(t){return parseInt(t)},"float":function(t){return parseFloat(t)},string:function(t){return t}};return s.getStudyRecordFromArray=function(t,e){return e=e||chartWidget,o(t,e)},s.getStudyRecordFromObject=function(t,e,i){return i=i||chartWidget,n(t,e,i)},s}();t.exports=i},function(t,e,i){"use strict";var o=i(390);i(396),JSServer.studyLibrary=JSServer.studyLibrary.concat([{name:"Compare",metainfo:{_metainfoVersion:15,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!0,defaults:{styles:{compare:{linestyle:0,linewidth:2,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#800080"}},precision:4,inputs:{source:"close",symbol:""}},plots:[{id:"compare",type:"line"}],styles:{compare:{title:"Plot",histogramBase:0}},description:"Compare",shortDescription:"Compare",is_price_study:!0,inputs:[{defval:"close",id:"source",name:"Source",options:["open","high","low","close","hl2","hlc3","ohlc4"],type:"text"},{id:"symbol",name:"Symbol",type:"symbol"}],id:"Compare@tv-basicstudies-1"},constructor:function(){this.init=function(t,e){this._context=t,this._context.new_sym(e(1),o.Std.period(this._context),o.Std.period(this._context))},this.main=function(t,e){var i,n,s,r,a,l;return this._context=t,i=this._context.new_var(this._context.symbol.time),n=o.Std.period(this._context),this._context.select_sym(1),s=this._context.new_var(this._context.symbol.time),r=o.Std[e(0)](this._context),a=this._context.new_var(r),this._context.select_sym(0),l=a.adopt(s,i,0),[l]}}},{name:"Overlay",metainfo:{_metainfoVersion:15,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!0,defaults:{styles:{},precision:4,inputs:{}},plots:[{id:"open",type:"line"},{id:"high",type:"line"},{id:"low",type:"line"},{id:"close",type:"line"}],styles:{open:{},high:{},low:{},close:{}},description:"Overlay",shortDescription:"Overlay",is_price_study:!1,inputs:[{id:"symbol",name:"symbol",defval:"",type:"symbol",isHidden:!0}],id:"Overlay@tv-basicstudies-1"},constructor:function(){this.init=function(t,e){this._context=t,this._context.new_sym(e(0),o.Std.period(this._context),o.Std.period(this._context))},this.main=function(t,e){var i,n,s,r,a,l;return this._context=t,i=this._context.new_var(this._context.symbol.time),this._context.select_sym(1),n=this._context.new_var(this._context.symbol.time),s=this._context.new_var(o.Std.open(this._context)),r=this._context.new_var(o.Std.high(this._context)),a=this._context.new_var(o.Std.low(this._context)),l=this._context.new_var(o.Std.close(this._context)),this._context.select_sym(0),[s.adopt(n,i,0),r.adopt(n,i,0),a.adopt(n,i,0),l.adopt(n,i,0)]}}},{name:"Volume",metainfo:{_metainfoVersion:15,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,transparency:65,defaults:{styles:{vol:{linestyle:0,linewidth:1,plottype:5,trackPrice:!1,transparency:65,visible:!0,color:"#000080"},vol_ma:{linestyle:0,linewidth:1,plottype:4,trackPrice:!1,transparency:65,visible:!0,color:"#0496FF"}},precision:0,palettes:{volumePalette:{colors:{0:{color:"#FF0000",width:1,style:0},1:{color:"#008000",width:1,style:0}}}},inputs:{showMA:!1,maLength:20}},plots:[{id:"vol",type:"line"},{id:"volumePalette",palette:"volumePalette",target:"vol",type:"colorer"},{id:"vol_ma",type:"line"}],styles:{vol:{title:"Volume",histogramBase:0},vol_ma:{title:"Volume MA",histogramBase:0}},description:"Volume",shortDescription:"Volume",is_price_study:!1,palettes:{volumePalette:{colors:{0:{name:"Color 0"},1:{name:"Color 1"}}}},inputs:[{id:"showMA",name:"show MA",defval:!1,type:"bool"},{id:"maLength",name:"MA Length",defval:20,type:"integer",min:1,max:2e3}],id:"Volume@tv-basicstudies-1"},constructor:function(){this.f_0=function(t,e){var i=o.Std.gt(t,e)?0:1;return i},this.f_1=function(t,e){var i=t?e:o.Std.na();return i},this.main=function(t,e){var i,n,s,r,a,l,h;return this._context=t,this._input=e,i=this._input(0),n=o.Std.volume(this._context),s=this.f_0(o.Std.open(this._context),o.Std.close(this._context)),r=o.Std.volume(this._context),a=this._context.new_var(r),l=o.Std.sma(a,this._input(1),this._context),h=this.f_1(i,l),[n,s,h]}}},{name:"ZigZag",metainfo:{_metainfoVersion:23,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:2,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008000"}},precision:4,inputs:{in_0:5,in_1:10}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",target:"plot_0",type:"dataoffset"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"ZigZag",shortDescription:"ZigZag",is_price_study:!0,classId:"ScriptWithDataOffset",inputs:[{id:"in_0",name:"deviation",defval:5,type:"integer",min:1,max:100},{id:"in_1",name:"depth",defval:10,type:"integer",min:2,max:1e3}],id:"ZigZag@tv-basicstudies-1"},constructor:function(){this.main=function(t,e){var i,n,s,r,a,l,h,c;return this._context=t,this._input=e,i=this._input(0),n=this._input(1),s=i/100,r=n/2,a=o.Std.zigzag(s,r,this._context),l=o.Std.zigzagbars(s,r,this._context),h=a,c=l,[h,c]}}}])}]);